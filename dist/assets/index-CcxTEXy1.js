function lY(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var D9e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P_={exports:{}},Hg={},j_={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q9;function cY(){if(Q9)return Nn;Q9=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function b(K,I,z){this.props=K,this.context=I,this.refs=y,this.updater=z||m}b.prototype.isReactComponent={},b.prototype.setState=function(K,I){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,I,"setState")},b.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function S(){}S.prototype=b.prototype;function P(K,I,z){this.props=K,this.context=I,this.refs=y,this.updater=z||m}var T=P.prototype=new S;T.constructor=P,x(T,b.prototype),T.isPureReactComponent=!0;var O=Array.isArray,W=Object.prototype.hasOwnProperty,Y={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function A(K,I,z){var X,J={},se=null,le=null;if(I!=null)for(X in I.ref!==void 0&&(le=I.ref),I.key!==void 0&&(se=""+I.key),I)W.call(I,X)&&!L.hasOwnProperty(X)&&(J[X]=I[X]);var ve=arguments.length-2;if(ve===1)J.children=z;else if(1<ve){for(var xe=Array(ve),Ee=0;Ee<ve;Ee++)xe[Ee]=arguments[Ee+2];J.children=xe}if(K&&K.defaultProps)for(X in ve=K.defaultProps,ve)J[X]===void 0&&(J[X]=ve[X]);return{$$typeof:t,type:K,key:se,ref:le,props:J,_owner:Y.current}}function N(K,I){return{$$typeof:t,type:K.type,key:I,ref:K.ref,props:K.props,_owner:K._owner}}function D(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function j(K){var I={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(z){return I[z]})}var F=/\/+/g;function M(K,I){return typeof K=="object"&&K!==null&&K.key!=null?j(""+K.key):I.toString(36)}function Z(K,I,z,X,J){var se=typeof K;(se==="undefined"||se==="boolean")&&(K=null);var le=!1;if(K===null)le=!0;else switch(se){case"string":case"number":le=!0;break;case"object":switch(K.$$typeof){case t:case e:le=!0}}if(le)return le=K,J=J(le),K=X===""?"."+M(le,0):X,O(J)?(z="",K!=null&&(z=K.replace(F,"$&/")+"/"),Z(J,I,z,"",function(Ee){return Ee})):J!=null&&(D(J)&&(J=N(J,z+(!J.key||le&&le.key===J.key?"":(""+J.key).replace(F,"$&/")+"/")+K)),I.push(J)),1;if(le=0,X=X===""?".":X+":",O(K))for(var ve=0;ve<K.length;ve++){se=K[ve];var xe=X+M(se,ve);le+=Z(se,I,z,xe,J)}else if(xe=g(K),typeof xe=="function")for(K=xe.call(K),ve=0;!(se=K.next()).done;)se=se.value,xe=X+M(se,ve++),le+=Z(se,I,z,xe,J);else if(se==="object")throw I=String(K),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return le}function ue(K,I,z){if(K==null)return K;var X=[],J=0;return Z(K,X,"","",function(se){return I.call(z,se,J++)}),X}function pe(K){if(K._status===-1){var I=K._result;I=I(),I.then(function(z){(K._status===0||K._status===-1)&&(K._status=1,K._result=z)},function(z){(K._status===0||K._status===-1)&&(K._status=2,K._result=z)}),K._status===-1&&(K._status=0,K._result=I)}if(K._status===1)return K._result.default;throw K._result}var fe={current:null},te={transition:null},H={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:te,ReactCurrentOwner:Y};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Nn.Children={map:ue,forEach:function(K,I,z){ue(K,function(){I.apply(this,arguments)},z)},count:function(K){var I=0;return ue(K,function(){I++}),I},toArray:function(K){return ue(K,function(I){return I})||[]},only:function(K){if(!D(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Nn.Component=b,Nn.Fragment=r,Nn.Profiler=s,Nn.PureComponent=P,Nn.StrictMode=n,Nn.Suspense=l,Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Nn.act=ie,Nn.cloneElement=function(K,I,z){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var X=x({},K.props),J=K.key,se=K.ref,le=K._owner;if(I!=null){if(I.ref!==void 0&&(se=I.ref,le=Y.current),I.key!==void 0&&(J=""+I.key),K.type&&K.type.defaultProps)var ve=K.type.defaultProps;for(xe in I)W.call(I,xe)&&!L.hasOwnProperty(xe)&&(X[xe]=I[xe]===void 0&&ve!==void 0?ve[xe]:I[xe])}var xe=arguments.length-2;if(xe===1)X.children=z;else if(1<xe){ve=Array(xe);for(var Ee=0;Ee<xe;Ee++)ve[Ee]=arguments[Ee+2];X.children=ve}return{$$typeof:t,type:K.type,key:J,ref:se,props:X,_owner:le}},Nn.createContext=function(K){return K={$$typeof:i,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:a,_context:K},K.Consumer=K},Nn.createElement=A,Nn.createFactory=function(K){var I=A.bind(null,K);return I.type=K,I},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(K){return{$$typeof:o,render:K}},Nn.isValidElement=D,Nn.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:pe}},Nn.memo=function(K,I){return{$$typeof:u,type:K,compare:I===void 0?null:I}},Nn.startTransition=function(K){var I=te.transition;te.transition={};try{K()}finally{te.transition=I}},Nn.unstable_act=ie,Nn.useCallback=function(K,I){return fe.current.useCallback(K,I)},Nn.useContext=function(K){return fe.current.useContext(K)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(K){return fe.current.useDeferredValue(K)},Nn.useEffect=function(K,I){return fe.current.useEffect(K,I)},Nn.useId=function(){return fe.current.useId()},Nn.useImperativeHandle=function(K,I,z){return fe.current.useImperativeHandle(K,I,z)},Nn.useInsertionEffect=function(K,I){return fe.current.useInsertionEffect(K,I)},Nn.useLayoutEffect=function(K,I){return fe.current.useLayoutEffect(K,I)},Nn.useMemo=function(K,I){return fe.current.useMemo(K,I)},Nn.useReducer=function(K,I,z){return fe.current.useReducer(K,I,z)},Nn.useRef=function(K){return fe.current.useRef(K)},Nn.useState=function(K){return fe.current.useState(K)},Nn.useSyncExternalStore=function(K,I,z){return fe.current.useSyncExternalStore(K,I,z)},Nn.useTransition=function(){return fe.current.useTransition()},Nn.version="18.3.1",Nn}var J9;function Eb(){return J9||(J9=1,j_.exports=cY()),j_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z9;function uY(){if(Z9)return Hg;Z9=1;var t=Eb(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,l,u){var d,p={},g=null,m=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)n.call(l,d)&&!a.hasOwnProperty(d)&&(p[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)p[d]===void 0&&(p[d]=l[d]);return{$$typeof:e,type:o,key:g,ref:m,props:p,_owner:s.current}}return Hg.Fragment=r,Hg.jsx=i,Hg.jsxs=i,Hg}var eC;function dY(){return eC||(eC=1,P_.exports=uY()),P_.exports}var c=dY(),R=Eb();const Ts=kF(R),u5=lY({__proto__:null,default:Ts},[R]);var Sv={},R_={exports:{}},Sl={},L_={exports:{}},F_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function fY(){return tC||(tC=1,(function(t){function e(te,H){var ie=te.length;te.push(H);e:for(;0<ie;){var K=ie-1>>>1,I=te[K];if(0<s(I,H))te[K]=H,te[ie]=I,ie=K;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var H=te[0],ie=te.pop();if(ie!==H){te[0]=ie;e:for(var K=0,I=te.length,z=I>>>1;K<z;){var X=2*(K+1)-1,J=te[X],se=X+1,le=te[se];if(0>s(J,ie))se<I&&0>s(le,J)?(te[K]=le,te[se]=ie,K=se):(te[K]=J,te[X]=ie,K=X);else if(se<I&&0>s(le,ie))te[K]=le,te[se]=ie,K=se;else break e}}return H}function s(te,H){var ie=te.sortIndex-H.sortIndex;return ie!==0?ie:te.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,p=null,g=3,m=!1,x=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(te){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=te)n(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(u)}}function O(te){if(y=!1,T(te),!x)if(r(l)!==null)x=!0,pe(W);else{var H=r(u);H!==null&&fe(O,H.startTime-te)}}function W(te,H){x=!1,y&&(y=!1,S(A),A=-1),m=!0;var ie=g;try{for(T(H),p=r(l);p!==null&&(!(p.expirationTime>H)||te&&!j());){var K=p.callback;if(typeof K=="function"){p.callback=null,g=p.priorityLevel;var I=K(p.expirationTime<=H);H=t.unstable_now(),typeof I=="function"?p.callback=I:p===r(l)&&n(l),T(H)}else n(l);p=r(l)}if(p!==null)var z=!0;else{var X=r(u);X!==null&&fe(O,X.startTime-H),z=!1}return z}finally{p=null,g=ie,m=!1}}var Y=!1,L=null,A=-1,N=5,D=-1;function j(){return!(t.unstable_now()-D<N)}function F(){if(L!==null){var te=t.unstable_now();D=te;var H=!0;try{H=L(!0,te)}finally{H?M():(Y=!1,L=null)}}else Y=!1}var M;if(typeof P=="function")M=function(){P(F)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ue=Z.port2;Z.port1.onmessage=F,M=function(){ue.postMessage(null)}}else M=function(){b(F,0)};function pe(te){L=te,Y||(Y=!0,M())}function fe(te,H){A=b(function(){te(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,pe(W))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(te){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var ie=g;g=H;try{return te()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,H){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ie=g;g=te;try{return H()}finally{g=ie}},t.unstable_scheduleCallback=function(te,H,ie){var K=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?K+ie:K):ie=K,te){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ie+I,te={id:d++,callback:H,priorityLevel:te,startTime:ie,expirationTime:I,sortIndex:-1},ie>K?(te.sortIndex=ie,e(u,te),r(l)===null&&te===r(u)&&(y?(S(A),A=-1):y=!0,fe(O,ie-K))):(te.sortIndex=I,e(l,te),x||m||(x=!0,pe(W))),te},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(te){var H=g;return function(){var ie=g;g=H;try{return te.apply(this,arguments)}finally{g=ie}}}})(F_)),F_}var rC;function hY(){return rC||(rC=1,L_.exports=fY()),L_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC;function pY(){if(nC)return Sl;nC=1;var t=Eb(),e=hY();function r(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(f,h){i(f,h),i(f+"Capture",h)}function i(f,h){for(s[f]=h,f=0;f<h.length;f++)n.add(h[f])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(f){return l.call(p,f)?!0:l.call(d,f)?!1:u.test(f)?p[f]=!0:(d[f]=!0,!1)}function m(f,h,w,E){if(w!==null&&w.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return E?!1:w!==null?!w.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function x(f,h,w,E){if(h===null||typeof h>"u"||m(f,h,w,E))return!0;if(E)return!1;if(w!==null)switch(w.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(f,h,w,E,B,G,de){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=E,this.attributeNamespace=B,this.mustUseProperty=w,this.propertyName=f,this.type=h,this.sanitizeURL=G,this.removeEmptyString=de}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){b[f]=new y(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var h=f[0];b[h]=new y(h,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){b[f]=new y(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){b[f]=new y(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){b[f]=new y(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){b[f]=new y(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){b[f]=new y(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){b[f]=new y(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){b[f]=new y(f,5,!1,f.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function P(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var h=f.replace(S,P);b[h]=new y(h,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var h=f.replace(S,P);b[h]=new y(h,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var h=f.replace(S,P);b[h]=new y(h,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){b[f]=new y(f,1,!1,f.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){b[f]=new y(f,1,!1,f.toLowerCase(),null,!0,!0)});function T(f,h,w,E){var B=b.hasOwnProperty(h)?b[h]:null;(B!==null?B.type!==0:E||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(x(h,w,B,E)&&(w=null),E||B===null?g(h)&&(w===null?f.removeAttribute(h):f.setAttribute(h,""+w)):B.mustUseProperty?f[B.propertyName]=w===null?B.type===3?!1:"":w:(h=B.attributeName,E=B.attributeNamespace,w===null?f.removeAttribute(h):(B=B.type,w=B===3||B===4&&w===!0?"":""+w,E?f.setAttributeNS(E,h,w):f.setAttribute(h,w))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),Y=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),j=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),te=Symbol.iterator;function H(f){return f===null||typeof f!="object"?null:(f=te&&f[te]||f["@@iterator"],typeof f=="function"?f:null)}var ie=Object.assign,K;function I(f){if(K===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);K=h&&h[1]||""}return`
`+K+f}var z=!1;function X(f,h){if(!f||z)return"";z=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(dt){var E=dt}Reflect.construct(f,[],h)}else{try{h.call()}catch(dt){E=dt}f.call(h.prototype)}else{try{throw Error()}catch(dt){E=dt}f()}}catch(dt){if(dt&&E&&typeof dt.stack=="string"){for(var B=dt.stack.split(`
`),G=E.stack.split(`
`),de=B.length-1,Me=G.length-1;1<=de&&0<=Me&&B[de]!==G[Me];)Me--;for(;1<=de&&0<=Me;de--,Me--)if(B[de]!==G[Me]){if(de!==1||Me!==1)do if(de--,Me--,0>Me||B[de]!==G[Me]){var $e=`
`+B[de].replace(" at new "," at ");return f.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",f.displayName)),$e}while(1<=de&&0<=Me);break}}}finally{z=!1,Error.prepareStackTrace=w}return(f=f?f.displayName||f.name:"")?I(f):""}function J(f){switch(f.tag){case 5:return I(f.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return f=X(f.type,!1),f;case 11:return f=X(f.type.render,!1),f;case 1:return f=X(f.type,!0),f;default:return""}}function se(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case L:return"Fragment";case Y:return"Portal";case N:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case Z:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case j:return(f.displayName||"Context")+".Consumer";case D:return(f._context.displayName||"Context")+".Provider";case F:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case ue:return h=f.displayName||null,h!==null?h:se(f.type)||"Memo";case pe:h=f._payload,f=f._init;try{return se(f(h))}catch{}}return null}function le(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(h);case 8:return h===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function ve(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function xe(f){var h=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ee(f){var h=xe(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,h),E=""+f[h];if(!f.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var B=w.get,G=w.set;return Object.defineProperty(f,h,{configurable:!0,get:function(){return B.call(this)},set:function(de){E=""+de,G.call(this,de)}}),Object.defineProperty(f,h,{enumerable:w.enumerable}),{getValue:function(){return E},setValue:function(de){E=""+de},stopTracking:function(){f._valueTracker=null,delete f[h]}}}}function ke(f){f._valueTracker||(f._valueTracker=Ee(f))}function oe(f){if(!f)return!1;var h=f._valueTracker;if(!h)return!0;var w=h.getValue(),E="";return f&&(E=xe(f)?f.checked?"true":"false":f.value),f=E,f!==w?(h.setValue(f),!0):!1}function Fe(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Pe(f,h){var w=h.checked;return ie({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??f._wrapperState.initialChecked})}function ne(f,h){var w=h.defaultValue==null?"":h.defaultValue,E=h.checked!=null?h.checked:h.defaultChecked;w=ve(h.value!=null?h.value:w),f._wrapperState={initialChecked:E,initialValue:w,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function ye(f,h){h=h.checked,h!=null&&T(f,"checked",h,!1)}function Ae(f,h){ye(f,h);var w=ve(h.value),E=h.type;if(w!=null)E==="number"?(w===0&&f.value===""||f.value!=w)&&(f.value=""+w):f.value!==""+w&&(f.value=""+w);else if(E==="submit"||E==="reset"){f.removeAttribute("value");return}h.hasOwnProperty("value")?Oe(f,h.type,w):h.hasOwnProperty("defaultValue")&&Oe(f,h.type,ve(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(f.defaultChecked=!!h.defaultChecked)}function Be(f,h,w){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var E=h.type;if(!(E!=="submit"&&E!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+f._wrapperState.initialValue,w||h===f.value||(f.value=h),f.defaultValue=h}w=f.name,w!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,w!==""&&(f.name=w)}function Oe(f,h,w){(h!=="number"||Fe(f.ownerDocument)!==f)&&(w==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+w&&(f.defaultValue=""+w))}var pt=Array.isArray;function nt(f,h,w,E){if(f=f.options,h){h={};for(var B=0;B<w.length;B++)h["$"+w[B]]=!0;for(w=0;w<f.length;w++)B=h.hasOwnProperty("$"+f[w].value),f[w].selected!==B&&(f[w].selected=B),B&&E&&(f[w].defaultSelected=!0)}else{for(w=""+ve(w),h=null,B=0;B<f.length;B++){if(f[B].value===w){f[B].selected=!0,E&&(f[B].defaultSelected=!0);return}h!==null||f[B].disabled||(h=f[B])}h!==null&&(h.selected=!0)}}function Lt(f,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return ie({},h,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Ct(f,h){var w=h.value;if(w==null){if(w=h.children,h=h.defaultValue,w!=null){if(h!=null)throw Error(r(92));if(pt(w)){if(1<w.length)throw Error(r(93));w=w[0]}h=w}h==null&&(h=""),w=h}f._wrapperState={initialValue:ve(w)}}function Nt(f,h){var w=ve(h.value),E=ve(h.defaultValue);w!=null&&(w=""+w,w!==f.value&&(f.value=w),h.defaultValue==null&&f.defaultValue!==w&&(f.defaultValue=w)),E!=null&&(f.defaultValue=""+E)}function _t(f){var h=f.textContent;h===f._wrapperState.initialValue&&h!==""&&h!==null&&(f.value=h)}function ot(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(f,h){return f==null||f==="http://www.w3.org/1999/xhtml"?ot(h):f==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Ot,ft=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,w,E,B){MSApp.execUnsafeLocalFunction(function(){return f(h,w,E,B)})}:f})(function(f,h){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=h;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Ot.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;h.firstChild;)f.appendChild(h.firstChild)}});function st(f,h){if(h){var w=f.firstChild;if(w&&w===f.lastChild&&w.nodeType===3){w.nodeValue=h;return}}f.textContent=h}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(f){me.forEach(function(h){h=h+f.charAt(0).toUpperCase()+f.substring(1),wt[h]=wt[f]})});function Ue(f,h,w){return h==null||typeof h=="boolean"||h===""?"":w||typeof h!="number"||h===0||wt.hasOwnProperty(f)&&wt[f]?(""+h).trim():h+"px"}function ut(f,h){f=f.style;for(var w in h)if(h.hasOwnProperty(w)){var E=w.indexOf("--")===0,B=Ue(w,h[w],E);w==="float"&&(w="cssFloat"),E?f.setProperty(w,B):f[w]=B}}var Ut=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(f,h){if(h){if(Ut[f]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,f));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Dt(f,h){if(f.indexOf("-")===-1)return typeof h.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $t=null;function jt(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var pr=null,hn=null,an=null;function kr(f){if(f=Df(f)){if(typeof pr!="function")throw Error(r(280));var h=f.stateNode;h&&(h=d0(h),pr(f.stateNode,f.type,h))}}function Vr(f){hn?an?an.push(f):an=[f]:hn=f}function va(){if(hn){var f=hn,h=an;if(an=hn=null,kr(f),h)for(f=0;f<h.length;f++)kr(h[f])}}function Ss(f,h){return f(h)}function Da(){}var Hs=!1;function vr(f,h,w){if(Hs)return f(h,w);Hs=!0;try{return Ss(f,h,w)}finally{Hs=!1,(hn!==null||an!==null)&&(Da(),va())}}function pn(f,h){var w=f.stateNode;if(w===null)return null;var E=d0(w);if(E===null)return null;w=E[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(w&&typeof w!="function")throw Error(r(231,h,typeof w));return w}var ei=!1;if(o)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){ei=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{ei=!1}function Os(f,h,w,E,B,G,de,Me,$e){var dt=Array.prototype.slice.call(arguments,3);try{h.apply(w,dt)}catch(Vt){this.onError(Vt)}}var Ln=!1,en=null,ce=!1,je=null,Se={onError:function(f){Ln=!0,en=f}};function Ne(f,h,w,E,B,G,de,Me,$e){Ln=!1,en=null,Os.apply(Se,arguments)}function Re(f,h,w,E,B,G,de,Me,$e){if(Ne.apply(this,arguments),Ln){if(Ln){var dt=en;Ln=!1,en=null}else throw Error(r(198));ce||(ce=!0,je=dt)}}function Le(f){var h=f,w=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,(h.flags&4098)!==0&&(w=h.return),f=h.return;while(f)}return h.tag===3?w:null}function Ge(f){if(f.tag===13){var h=f.memoizedState;if(h===null&&(f=f.alternate,f!==null&&(h=f.memoizedState)),h!==null)return h.dehydrated}return null}function lt(f){if(Le(f)!==f)throw Error(r(188))}function Xe(f){var h=f.alternate;if(!h){if(h=Le(f),h===null)throw Error(r(188));return h!==f?null:f}for(var w=f,E=h;;){var B=w.return;if(B===null)break;var G=B.alternate;if(G===null){if(E=B.return,E!==null){w=E;continue}break}if(B.child===G.child){for(G=B.child;G;){if(G===w)return lt(B),f;if(G===E)return lt(B),h;G=G.sibling}throw Error(r(188))}if(w.return!==E.return)w=B,E=G;else{for(var de=!1,Me=B.child;Me;){if(Me===w){de=!0,w=B,E=G;break}if(Me===E){de=!0,E=B,w=G;break}Me=Me.sibling}if(!de){for(Me=G.child;Me;){if(Me===w){de=!0,w=G,E=B;break}if(Me===E){de=!0,E=G,w=B;break}Me=Me.sibling}if(!de)throw Error(r(189))}}if(w.alternate!==E)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?f:h}function Qe(f){return f=Xe(f),f!==null?rt(f):null}function rt(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=rt(f);if(h!==null)return h;f=f.sibling}return null}var At=e.unstable_scheduleCallback,Gt=e.unstable_cancelCallback,er=e.unstable_shouldYield,qt=e.unstable_requestPaint,It=e.unstable_now,Ar=e.unstable_getCurrentPriorityLevel,bn=e.unstable_ImmediatePriority,Kr=e.unstable_UserBlockingPriority,tn=e.unstable_NormalPriority,xi=e.unstable_LowPriority,ji=e.unstable_IdlePriority,ti=null,gs=null;function el(f){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(ti,f,void 0,(f.current.flags&128)===128)}catch{}}var De=Math.clz32?Math.clz32:Sr,Kt=Math.log,ar=Math.LN2;function Sr(f){return f>>>=0,f===0?32:31-(Kt(f)/ar|0)|0}var An=64,Tr=4194304;function dn(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Tn(f,h){var w=f.pendingLanes;if(w===0)return 0;var E=0,B=f.suspendedLanes,G=f.pingedLanes,de=w&268435455;if(de!==0){var Me=de&~B;Me!==0?E=dn(Me):(G&=de,G!==0&&(E=dn(G)))}else de=w&~B,de!==0?E=dn(de):G!==0&&(E=dn(G));if(E===0)return 0;if(h!==0&&h!==E&&(h&B)===0&&(B=E&-E,G=h&-h,B>=G||B===16&&(G&4194240)!==0))return h;if((E&4)!==0&&(E|=w&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=E;0<h;)w=31-De(h),B=1<<w,E|=f[w],h&=~B;return E}function Ji(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function In(f,h){for(var w=f.suspendedLanes,E=f.pingedLanes,B=f.expirationTimes,G=f.pendingLanes;0<G;){var de=31-De(G),Me=1<<de,$e=B[de];$e===-1?((Me&w)===0||(Me&E)!==0)&&(B[de]=Ji(Me,h)):$e<=h&&(f.expiredLanes|=Me),G&=~Me}}function _n(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Ws(){var f=An;return An<<=1,(An&4194240)===0&&(An=64),f}function aa(f){for(var h=[],w=0;31>w;w++)h.push(f);return h}function Ri(f,h,w){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-De(h),f[h]=w}function on(f,h){var w=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<w;){var B=31-De(w),G=1<<B;h[B]=0,E[B]=-1,f[B]=-1,w&=~G}}function Zi(f,h){var w=f.entangledLanes|=h;for(f=f.entanglements;w;){var E=31-De(w),B=1<<E;B&h|f[E]&h&&(f[E]|=h),w&=~B}}var rn=0;function ia(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var ku,Su,kf,Sf,Nu,Ol=!1,yi=[],Oa=null,vi=null,eo=null,Lr=new Map,bo=new Map,pl=[],t0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nf(f,h){switch(f){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Lr.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(h.pointerId)}}function Gs(f,h,w,E,B,G){return f===null||f.nativeEvent!==G?(f={blockedOn:h,domEventName:w,eventSystemFlags:E,nativeEvent:G,targetContainers:[B]},h!==null&&(h=Df(h),h!==null&&Su(h)),f):(f.eventSystemFlags|=E,h=f.targetContainers,B!==null&&h.indexOf(B)===-1&&h.push(B),f)}function Ml(f,h,w,E,B){switch(h){case"focusin":return Oa=Gs(Oa,f,h,w,E,B),!0;case"dragenter":return vi=Gs(vi,f,h,w,E,B),!0;case"mouseover":return eo=Gs(eo,f,h,w,E,B),!0;case"pointerover":var G=B.pointerId;return Lr.set(G,Gs(Lr.get(G)||null,f,h,w,E,B)),!0;case"gotpointercapture":return G=B.pointerId,bo.set(G,Gs(bo.get(G)||null,f,h,w,E,B)),!0}return!1}function Ef(f){var h=Ru(f.target);if(h!==null){var w=Le(h);if(w!==null){if(h=w.tag,h===13){if(h=Ge(w),h!==null){f.blockedOn=h,Nu(f.priority,function(){kf(w)});return}}else if(h===3&&w.stateNode.current.memoizedState.isDehydrated){f.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Bl(f){if(f.blockedOn!==null)return!1;for(var h=f.targetContainers;0<h.length;){var w=dc(f.domEventName,f.eventSystemFlags,h[0],f.nativeEvent);if(w===null){w=f.nativeEvent;var E=new w.constructor(w.type,w);$t=E,w.target.dispatchEvent(E),$t=null}else return h=Df(w),h!==null&&Su(h),f.blockedOn=w,!1;h.shift()}return!0}function ml(f,h,w){Bl(f)&&w.delete(h)}function Eu(){Ol=!1,Oa!==null&&Bl(Oa)&&(Oa=null),vi!==null&&Bl(vi)&&(vi=null),eo!==null&&Bl(eo)&&(eo=null),Lr.forEach(ml),bo.forEach(ml)}function wi(f,h){f.blockedOn===h&&(f.blockedOn=null,Ol||(Ol=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Eu)))}function Li(f){function h(B){return wi(B,f)}if(0<yi.length){wi(yi[0],f);for(var w=1;w<yi.length;w++){var E=yi[w];E.blockedOn===f&&(E.blockedOn=null)}}for(Oa!==null&&wi(Oa,f),vi!==null&&wi(vi,f),eo!==null&&wi(eo,f),Lr.forEach(h),bo.forEach(h),w=0;w<pl.length;w++)E=pl[w],E.blockedOn===f&&(E.blockedOn=null);for(;0<pl.length&&(w=pl[0],w.blockedOn===null);)Ef(w),w.blockedOn===null&&pl.shift()}var _o=O.ReactCurrentBatchConfig,uc=!0;function ts(f,h,w,E){var B=rn,G=_o.transition;_o.transition=null;try{rn=1,Vl(f,h,w,E)}finally{rn=B,_o.transition=G}}function bd(f,h,w,E){var B=rn,G=_o.transition;_o.transition=null;try{rn=4,Vl(f,h,w,E)}finally{rn=B,_o.transition=G}}function Vl(f,h,w,E){if(uc){var B=dc(f,h,w,E);if(B===null)l0(f,h,E,tl,w),Nf(f,E);else if(Ml(B,f,h,w,E))E.stopPropagation();else if(Nf(f,E),h&4&&-1<t0.indexOf(f)){for(;B!==null;){var G=Df(B);if(G!==null&&ku(G),G=dc(f,h,w,E),G===null&&l0(f,h,E,tl,w),G===B)break;B=G}B!==null&&E.stopPropagation()}else l0(f,h,E,null,w)}}var tl=null;function dc(f,h,w,E){if(tl=null,f=jt(E),f=Ru(f),f!==null)if(h=Le(f),h===null)f=null;else if(w=h.tag,w===13){if(f=Ge(h),f!==null)return f;f=null}else if(w===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;f=null}else h!==f&&(f=null);return tl=f,null}function fc(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ar()){case bn:return 1;case Kr:return 4;case tn:case xi:return 16;case ji:return 536870912;default:return 16}default:return 16}}var bi=null,gl=null,ri=null;function Wc(){if(ri)return ri;var f,h=gl,w=h.length,E,B="value"in bi?bi.value:bi.textContent,G=B.length;for(f=0;f<w&&h[f]===B[f];f++);var de=w-f;for(E=1;E<=de&&h[w-E]===B[G-E];E++);return ri=B.slice(f,1<E?1-E:void 0)}function ni(f){var h=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&h===13&&(f=13)):f=h,f===10&&(f=13),32<=f||f===13?f:0}function Ma(){return!0}function V(){return!1}function re(f){function h(w,E,B,G,de){this._reactName=w,this._targetInst=B,this.type=E,this.nativeEvent=G,this.target=de,this.currentTarget=null;for(var Me in f)f.hasOwnProperty(Me)&&(w=f[Me],this[Me]=w?w(G):G[Me]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?Ma:V,this.isPropagationStopped=V,this}return ie(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),h}var Te={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ve=re(Te),We=ie({},Te,{view:0,detail:0}),kt=re(We),Tt,sr,cr,Pr=ie({},We,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:to,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==cr&&(cr&&f.type==="mousemove"?(Tt=f.screenX-cr.screenX,sr=f.screenY-cr.screenY):sr=Tt=0,cr=f),Tt)},movementY:function(f){return"movementY"in f?f.movementY:sr}}),Ur=re(Pr),Pn=ie({},Pr,{dataTransfer:0}),xs=re(Pn),Ns=ie({},We,{relatedTarget:0}),Bn=re(Ns),Ks=ie({},Te,{animationName:0,elapsedTime:0,pseudoElement:0}),rs=re(Ks),wa=ie({},Te,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),xl=re(wa),Ul=ie({},Te,{data:0}),_d=re(Ul),Gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ko={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(f){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(f):(f=ko[f])?!!h[f]:!1}function to(){return Cu}var k=ie({},We,{key:function(f){if(f.key){var h=Gc[f.key]||f.key;if(h!=="Unidentified")return h}return f.type==="keypress"?(f=ni(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?oa[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:to,charCode:function(f){return f.type==="keypress"?ni(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?ni(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),q=re(k),ee=ie({},Pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),be=re(ee),Ke=ie({},We,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:to}),mt=re(Ke),zt=ie({},Te,{propertyName:0,elapsedTime:0,pseudoElement:0}),Un=re(zt),Ps=ie({},Pr,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),mn=re(Ps),kn=[9,13,27,32],$n=o&&"CompositionEvent"in window,Fi=null;o&&"documentMode"in document&&(Fi=document.documentMode);var _i=o&&"TextEvent"in window&&!Fi,So=o&&(!$n||Fi&&8<Fi&&11>=Fi),zl=" ",ro=!1;function no(f,h){switch(f){case"keyup":return kn.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var so=!1;function Tu(f,h){switch(f){case"compositionend":return Au(h);case"keypress":return h.which!==32?null:(ro=!0,zl);case"textInput":return f=h.data,f===zl&&ro?null:f;default:return null}}function r0(f,h){if(so)return f==="compositionend"||!$n&&no(f,h)?(f=Wc(),ri=gl=bi=null,so=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return So&&h.locale!=="ko"?null:h.data;default:return null}}var Iu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ys(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h==="input"?!!Iu[f.type]:h==="textarea"}function Wp(f,h,w,E){Vr(E),h=Jp(h,"onChange"),0<h.length&&(w=new Ve("onChange","change",null,w,E),f.push({event:w,listeners:h}))}var No=null,Eo=null;function Cf(f){i0(f,0)}function Pu(f){var h=Id(f);if(oe(h))return f}function Af(f,h){if(f==="change")return h}var kd=!1;if(o){var Kc;if(o){var Yc="oninput"in document;if(!Yc){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),Yc=typeof hc.oninput=="function"}Kc=Yc}else Kc=!1;kd=Kc&&(!document.documentMode||9<document.documentMode)}function Tf(){No&&(No.detachEvent("onpropertychange",Co),Eo=No=null)}function Co(f){if(f.propertyName==="value"&&Pu(Eo)){var h=[];Wp(h,Eo,f,jt(f)),vr(Cf,h)}}function pc(f,h,w){f==="focusin"?(Tf(),No=h,Eo=w,No.attachEvent("onpropertychange",Co)):f==="focusout"&&Tf()}function ys(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Pu(Eo)}function vs(f,h){if(f==="click")return Pu(h)}function la(f,h){if(f==="input"||f==="change")return Pu(h)}function ca(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var Ba=typeof Object.is=="function"?Object.is:ca;function mc(f,h){if(Ba(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var w=Object.keys(f),E=Object.keys(h);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var B=w[E];if(!l.call(h,B)||!Ba(f[B],h[B]))return!1}return!0}function $l(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function If(f,h){var w=$l(f);f=0;for(var E;w;){if(w.nodeType===3){if(E=f+w.textContent.length,f<=h&&E>=h)return{node:w,offset:h-f};f=E}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=$l(w)}}function vg(f,h){return f&&h?f===h?!0:f&&f.nodeType===3?!1:h&&h.nodeType===3?vg(f,h.parentNode):"contains"in f?f.contains(h):f.compareDocumentPosition?!!(f.compareDocumentPosition(h)&16):!1:!1}function wg(){for(var f=window,h=Fe();h instanceof f.HTMLIFrameElement;){try{var w=typeof h.contentWindow.location.href=="string"}catch{w=!1}if(w)f=h.contentWindow;else break;h=Fe(f.document)}return h}function Gp(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h&&(h==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||h==="textarea"||f.contentEditable==="true")}function zy(f){var h=wg(),w=f.focusedElem,E=f.selectionRange;if(h!==w&&w&&w.ownerDocument&&vg(w.ownerDocument.documentElement,w)){if(E!==null&&Gp(w)){if(h=E.start,f=E.end,f===void 0&&(f=h),"selectionStart"in w)w.selectionStart=h,w.selectionEnd=Math.min(f,w.value.length);else if(f=(h=w.ownerDocument||document)&&h.defaultView||window,f.getSelection){f=f.getSelection();var B=w.textContent.length,G=Math.min(E.start,B);E=E.end===void 0?G:Math.min(E.end,B),!f.extend&&G>E&&(B=E,E=G,G=B),B=If(w,G);var de=If(w,E);B&&de&&(f.rangeCount!==1||f.anchorNode!==B.node||f.anchorOffset!==B.offset||f.focusNode!==de.node||f.focusOffset!==de.offset)&&(h=h.createRange(),h.setStart(B.node,B.offset),f.removeAllRanges(),G>E?(f.addRange(h),f.extend(de.node,de.offset)):(h.setEnd(de.node,de.offset),f.addRange(h)))}}for(h=[],f=w;f=f.parentNode;)f.nodeType===1&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<h.length;w++)f=h[w],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var $y=o&&"documentMode"in document&&11>=document.documentMode,Sd=null,Kp=null,Pf=null,Yp=!1;function bg(f,h,w){var E=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Yp||Sd==null||Sd!==Fe(E)||(E=Sd,"selectionStart"in E&&Gp(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Pf&&mc(Pf,E)||(Pf=E,E=Jp(Kp,"onSelect"),0<E.length&&(h=new Ve("onSelect","select",null,h,w),f.push({event:h,listeners:E}),h.target=Sd)))}function n0(f,h){var w={};return w[f.toLowerCase()]=h.toLowerCase(),w["Webkit"+f]="webkit"+h,w["Moz"+f]="moz"+h,w}var Nd={animationend:n0("Animation","AnimationEnd"),animationiteration:n0("Animation","AnimationIteration"),animationstart:n0("Animation","AnimationStart"),transitionend:n0("Transition","TransitionEnd")},Ed={},_g={};o&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete Nd.animationend.animation,delete Nd.animationiteration.animation,delete Nd.animationstart.animation),"TransitionEvent"in window||delete Nd.transitionend.transition);function s0(f){if(Ed[f])return Ed[f];if(!Nd[f])return f;var h=Nd[f],w;for(w in h)if(h.hasOwnProperty(w)&&w in _g)return Ed[f]=h[w];return f}var kg=s0("animationend"),Sg=s0("animationiteration"),Ng=s0("animationstart"),Eg=s0("transitionend"),Cg=new Map,Ag="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gc(f,h){Cg.set(f,h),a(h,[f])}for(var jf=0;jf<Ag.length;jf++){var ao=Ag[jf],yl=ao.toLowerCase(),Xp=ao[0].toUpperCase()+ao.slice(1);gc(yl,"on"+Xp)}gc(kg,"onAnimationEnd"),gc(Sg,"onAnimationIteration"),gc(Ng,"onAnimationStart"),gc("dblclick","onDoubleClick"),gc("focusin","onFocus"),gc("focusout","onBlur"),gc(Eg,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function a0(f,h,w){var E=f.type||"unknown-event";f.currentTarget=w,Re(E,h,void 0,f),f.currentTarget=null}function i0(f,h){h=(h&4)!==0;for(var w=0;w<f.length;w++){var E=f[w],B=E.event;E=E.listeners;e:{var G=void 0;if(h)for(var de=E.length-1;0<=de;de--){var Me=E[de],$e=Me.instance,dt=Me.currentTarget;if(Me=Me.listener,$e!==G&&B.isPropagationStopped())break e;a0(B,Me,dt),G=$e}else for(de=0;de<E.length;de++){if(Me=E[de],$e=Me.instance,dt=Me.currentTarget,Me=Me.listener,$e!==G&&B.isPropagationStopped())break e;a0(B,Me,dt),G=$e}}}if(ce)throw f=je,ce=!1,je=null,f}function is(f,h){var w=h[To];w===void 0&&(w=h[To]=new Set);var E=f+"__bubble";w.has(E)||(o0(h,f,2,!1),w.add(E))}function Qp(f,h,w){var E=0;h&&(E|=4),o0(w,f,E,h)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function Cd(f){if(!f[Rf]){f[Rf]=!0,n.forEach(function(w){w!=="selectionchange"&&(qy.has(w)||Qp(w,!1,f),Qp(w,!0,f))});var h=f.nodeType===9?f:f.ownerDocument;h===null||h[Rf]||(h[Rf]=!0,Qp("selectionchange",!1,h))}}function o0(f,h,w,E){switch(fc(h)){case 1:var B=ts;break;case 4:B=bd;break;default:B=Vl}w=B.bind(null,h,w,f),B=void 0,!ei||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(B=!0),E?B!==void 0?f.addEventListener(h,w,{capture:!0,passive:B}):f.addEventListener(h,w,!0):B!==void 0?f.addEventListener(h,w,{passive:B}):f.addEventListener(h,w,!1)}function l0(f,h,w,E,B){var G=E;if((h&1)===0&&(h&2)===0&&E!==null)e:for(;;){if(E===null)return;var de=E.tag;if(de===3||de===4){var Me=E.stateNode.containerInfo;if(Me===B||Me.nodeType===8&&Me.parentNode===B)break;if(de===4)for(de=E.return;de!==null;){var $e=de.tag;if(($e===3||$e===4)&&($e=de.stateNode.containerInfo,$e===B||$e.nodeType===8&&$e.parentNode===B))return;de=de.return}for(;Me!==null;){if(de=Ru(Me),de===null)return;if($e=de.tag,$e===5||$e===6){E=G=de;continue e}Me=Me.parentNode}}E=E.return}vr(function(){var dt=G,Vt=jt(w),Ht=[];e:{var Mt=Cg.get(f);if(Mt!==void 0){var or=Ve,gr=f;switch(f){case"keypress":if(ni(w)===0)break e;case"keydown":case"keyup":or=q;break;case"focusin":gr="focus",or=Bn;break;case"focusout":gr="blur",or=Bn;break;case"beforeblur":case"afterblur":or=Bn;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":or=Ur;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":or=xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":or=mt;break;case kg:case Sg:case Ng:or=rs;break;case Eg:or=Un;break;case"scroll":or=kt;break;case"wheel":or=mn;break;case"copy":case"cut":case"paste":or=xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":or=be}var wr=(h&4)!==0,za=!wr&&f==="scroll",et=wr?Mt!==null?Mt+"Capture":null:Mt;wr=[];for(var He=dt,at;He!==null;){at=He;var Yt=at.stateNode;if(at.tag===5&&Yt!==null&&(at=Yt,et!==null&&(Yt=pn(He,et),Yt!=null&&wr.push(c0(He,Yt,at)))),za)break;He=He.return}0<wr.length&&(Mt=new or(Mt,gr,null,w,Vt),Ht.push({event:Mt,listeners:wr}))}}if((h&7)===0){e:{if(Mt=f==="mouseover"||f==="pointerover",or=f==="mouseout"||f==="pointerout",Mt&&w!==$t&&(gr=w.relatedTarget||w.fromElement)&&(Ru(gr)||gr[Di]))break e;if((or||Mt)&&(Mt=Vt.window===Vt?Vt:(Mt=Vt.ownerDocument)?Mt.defaultView||Mt.parentWindow:window,or?(gr=w.relatedTarget||w.toElement,or=dt,gr=gr?Ru(gr):null,gr!==null&&(za=Le(gr),gr!==za||gr.tag!==5&&gr.tag!==6)&&(gr=null)):(or=null,gr=dt),or!==gr)){if(wr=Ur,Yt="onMouseLeave",et="onMouseEnter",He="mouse",(f==="pointerout"||f==="pointerover")&&(wr=be,Yt="onPointerLeave",et="onPointerEnter",He="pointer"),za=or==null?Mt:Id(or),at=gr==null?Mt:Id(gr),Mt=new wr(Yt,He+"leave",or,w,Vt),Mt.target=za,Mt.relatedTarget=at,Yt=null,Ru(Vt)===dt&&(wr=new wr(et,He+"enter",gr,w,Vt),wr.target=at,wr.relatedTarget=za,Yt=wr),za=Yt,or&&gr)t:{for(wr=or,et=gr,He=0,at=wr;at;at=Ad(at))He++;for(at=0,Yt=et;Yt;Yt=Ad(Yt))at++;for(;0<He-at;)wr=Ad(wr),He--;for(;0<at-He;)et=Ad(et),at--;for(;He--;){if(wr===et||et!==null&&wr===et.alternate)break t;wr=Ad(wr),et=Ad(et)}wr=null}else wr=null;or!==null&&Hy(Ht,Mt,or,wr,!1),gr!==null&&za!==null&&Hy(Ht,za,gr,wr,!0)}}e:{if(Mt=dt?Id(dt):window,or=Mt.nodeName&&Mt.nodeName.toLowerCase(),or==="select"||or==="input"&&Mt.type==="file")var Nr=Af;else if(Ys(Mt))if(kd)Nr=la;else{Nr=ys;var Dr=pc}else(or=Mt.nodeName)&&or.toLowerCase()==="input"&&(Mt.type==="checkbox"||Mt.type==="radio")&&(Nr=vs);if(Nr&&(Nr=Nr(f,dt))){Wp(Ht,Nr,w,Vt);break e}Dr&&Dr(f,Mt,dt),f==="focusout"&&(Dr=Mt._wrapperState)&&Dr.controlled&&Mt.type==="number"&&Oe(Mt,"number",Mt.value)}switch(Dr=dt?Id(dt):window,f){case"focusin":(Ys(Dr)||Dr.contentEditable==="true")&&(Sd=Dr,Kp=dt,Pf=null);break;case"focusout":Pf=Kp=Sd=null;break;case"mousedown":Yp=!0;break;case"contextmenu":case"mouseup":case"dragend":Yp=!1,bg(Ht,w,Vt);break;case"selectionchange":if($y)break;case"keydown":case"keyup":bg(Ht,w,Vt)}var Or;if($n)e:{switch(f){case"compositionstart":var Yr="onCompositionStart";break e;case"compositionend":Yr="onCompositionEnd";break e;case"compositionupdate":Yr="onCompositionUpdate";break e}Yr=void 0}else so?no(f,w)&&(Yr="onCompositionEnd"):f==="keydown"&&w.keyCode===229&&(Yr="onCompositionStart");Yr&&(So&&w.locale!=="ko"&&(so||Yr!=="onCompositionStart"?Yr==="onCompositionEnd"&&so&&(Or=Wc()):(bi=Vt,gl="value"in bi?bi.value:bi.textContent,so=!0)),Dr=Jp(dt,Yr),0<Dr.length&&(Yr=new _d(Yr,f,null,w,Vt),Ht.push({event:Yr,listeners:Dr}),Or?Yr.data=Or:(Or=Au(w),Or!==null&&(Yr.data=Or)))),(Or=_i?Tu(f,w):r0(f,w))&&(dt=Jp(dt,"onBeforeInput"),0<dt.length&&(Vt=new _d("onBeforeInput","beforeinput",null,w,Vt),Ht.push({event:Vt,listeners:dt}),Vt.data=Or))}i0(Ht,h)})}function c0(f,h,w){return{instance:f,listener:h,currentTarget:w}}function Jp(f,h){for(var w=h+"Capture",E=[];f!==null;){var B=f,G=B.stateNode;B.tag===5&&G!==null&&(B=G,G=pn(f,w),G!=null&&E.unshift(c0(f,G,B)),G=pn(f,h),G!=null&&E.push(c0(f,G,B))),f=f.return}return E}function Ad(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function Hy(f,h,w,E,B){for(var G=h._reactName,de=[];w!==null&&w!==E;){var Me=w,$e=Me.alternate,dt=Me.stateNode;if($e!==null&&$e===E)break;Me.tag===5&&dt!==null&&(Me=dt,B?($e=pn(w,G),$e!=null&&de.unshift(c0(w,$e,Me))):B||($e=pn(w,G),$e!=null&&de.push(c0(w,$e,Me)))),w=w.return}de.length!==0&&f.push({event:h,listeners:de})}var H4=/\r\n?/g,W4=/\u0000|\uFFFD/g;function Wy(f){return(typeof f=="string"?f:""+f).replace(H4,`
`).replace(W4,"")}function Zp(f,h,w){if(h=Wy(h),Wy(f)!==h&&w)throw Error(r(425))}function Lf(){}var u0=null,Td=null;function Tg(f,h){return f==="textarea"||f==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,Gy=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,G4=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(f){return Ky.resolve(null).then(f).catch(K4)}:Ig;function K4(f){setTimeout(function(){throw f})}function Pg(f,h){var w=h,E=0;do{var B=w.nextSibling;if(f.removeChild(w),B&&B.nodeType===8)if(w=B.data,w==="/$"){if(E===0){f.removeChild(B),Li(h);return}E--}else w!=="$"&&w!=="$?"&&w!=="$!"||E++;w=B}while(w);Li(h)}function io(f){for(;f!=null;f=f.nextSibling){var h=f.nodeType;if(h===1||h===3)break;if(h===8){if(h=f.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return f}function vl(f){f=f.previousSibling;for(var h=0;f;){if(f.nodeType===8){var w=f.data;if(w==="$"||w==="$!"||w==="$?"){if(h===0)return f;h--}else w==="/$"&&h++}f=f.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),xc="__reactFiber$"+Ao,Ff="__reactProps$"+Ao,Di="__reactContainer$"+Ao,To="__reactEvents$"+Ao,Y4="__reactListeners$"+Ao,X4="__reactHandles$"+Ao;function Ru(f){var h=f[xc];if(h)return h;for(var w=f.parentNode;w;){if(h=w[Di]||w[xc]){if(w=h.alternate,h.child!==null||w!==null&&w.child!==null)for(f=vl(f);f!==null;){if(w=f[xc])return w;f=vl(f)}return h}f=w,w=f.parentNode}return null}function Df(f){return f=f[xc]||f[Di],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Id(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(r(33))}function d0(f){return f[Ff]||null}var jg=[],Xc=-1;function ql(f){return{current:f}}function es(f){0>Xc||(f.current=jg[Xc],jg[Xc]=null,Xc--)}function ns(f,h){Xc++,jg[Xc]=f.current,f.current=h}var Lu={},ki=ql(Lu),Io=ql(!1),Pd=Lu;function Of(f,h){var w=f.type.contextTypes;if(!w)return Lu;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var B={},G;for(G in w)B[G]=h[G];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=B),B}function Po(f){return f=f.childContextTypes,f!=null}function em(){es(Io),es(ki)}function Yy(f,h,w){if(ki.current!==Lu)throw Error(r(168));ns(ki,h),ns(Io,w)}function Rg(f,h,w){var E=f.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var B in E)if(!(B in h))throw Error(r(108,le(f)||"Unknown",B));return ie({},w,E)}function jd(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Lu,Pd=ki.current,ns(ki,f),ns(Io,Io.current),!0}function Xy(f,h,w){var E=f.stateNode;if(!E)throw Error(r(169));w?(f=Rg(f,h,Pd),E.__reactInternalMemoizedMergedChildContext=f,es(Io),es(ki),ns(ki,f)):es(Io),ns(Io,w)}var Qc=null,f0=!1,_=!1;function C(f){Qc===null?Qc=[f]:Qc.push(f)}function U(f){f0=!0,C(f)}function Q(){if(!_&&Qc!==null){_=!0;var f=0,h=rn;try{var w=Qc;for(rn=1;f<w.length;f++){var E=w[f];do E=E(!0);while(E!==null)}Qc=null,f0=!1}catch(B){throw Qc!==null&&(Qc=Qc.slice(f+1)),At(bn,Q),B}finally{rn=h,_=!1}}return null}var ae=[],he=0,ge=null,we=0,_e=[],Ce=0,ze=null,Ze=1,Ie="";function qe(f,h){ae[he++]=we,ae[he++]=ge,ge=f,we=h}function Ye(f,h,w){_e[Ce++]=Ze,_e[Ce++]=Ie,_e[Ce++]=ze,ze=f;var E=Ze;f=Ie;var B=32-De(E)-1;E&=~(1<<B),w+=1;var G=32-De(h)+B;if(30<G){var de=B-B%5;G=(E&(1<<de)-1).toString(32),E>>=de,B-=de,Ze=1<<32-De(h)+B|w<<B|E,Ie=G+f}else Ze=1<<G|w<<B|E,Ie=f}function vt(f){f.return!==null&&(qe(f,1),Ye(f,1,0))}function tt(f){for(;f===ge;)ge=ae[--he],ae[he]=null,we=ae[--he],ae[he]=null;for(;f===ze;)ze=_e[--Ce],_e[Ce]=null,Ie=_e[--Ce],_e[Ce]=null,Ze=_e[--Ce],_e[Ce]=null}var xt=null,yt=null,St=!1,Et=null;function _r(f,h){var w=_c(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=f,h=f.deletions,h===null?(f.deletions=[w],f.flags|=16):h.push(w)}function ur(f,h){switch(f.tag){case 5:var w=f.type;return h=h.nodeType!==1||w.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(f.stateNode=h,xt=f,yt=io(h.firstChild),!0):!1;case 6:return h=f.pendingProps===""||h.nodeType!==3?null:h,h!==null?(f.stateNode=h,xt=f,yt=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(w=ze!==null?{id:Ze,overflow:Ie}:null,f.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=_c(18,null,null,0),w.stateNode=h,w.return=f,f.child=w,xt=f,yt=null,!0):!1;default:return!1}}function Jr(f){return(f.mode&1)!==0&&(f.flags&128)===0}function mr(f){if(St){var h=yt;if(h){var w=h;if(!ur(f,h)){if(Jr(f))throw Error(r(418));h=io(w.nextSibling);var E=xt;h&&ur(f,h)?_r(E,w):(f.flags=f.flags&-4097|2,St=!1,xt=f)}}else{if(Jr(f))throw Error(r(418));f.flags=f.flags&-4097|2,St=!1,xt=f}}}function Sn(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;xt=f}function Xs(f){if(f!==xt)return!1;if(!St)return Sn(f),St=!0,!1;var h;if((h=f.tag!==3)&&!(h=f.tag!==5)&&(h=f.type,h=h!=="head"&&h!=="body"&&!Tg(f.type,f.memoizedProps)),h&&(h=yt)){if(Jr(f))throw nn(),Error(r(418));for(;h;)_r(f,h),h=io(h.nextSibling)}if(Sn(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,h=0;f;){if(f.nodeType===8){var w=f.data;if(w==="/$"){if(h===0){yt=io(f.nextSibling);break e}h--}else w!=="$"&&w!=="$!"&&w!=="$?"||h++}f=f.nextSibling}yt=null}}else yt=xt?io(f.stateNode.nextSibling):null;return!0}function nn(){for(var f=yt;f;)f=io(f.nextSibling)}function dr(){yt=xt=null,St=!1}function Jt(f){Et===null?Et=[f]:Et.push(f)}var ua=O.ReactCurrentBatchConfig;function zr(f,h,w){if(f=w.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(r(309));var E=w.stateNode}if(!E)throw Error(r(147,f));var B=E,G=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===G?h.ref:(h=function(de){var Me=B.refs;de===null?delete Me[G]:Me[G]=de},h._stringRef=G,h)}if(typeof f!="string")throw Error(r(284));if(!w._owner)throw Error(r(290,f))}return f}function gn(f,h){throw f=Object.prototype.toString.call(h),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function ws(f){var h=f._init;return h(f._payload)}function si(f){function h(et,He){if(f){var at=et.deletions;at===null?(et.deletions=[He],et.flags|=16):at.push(He)}}function w(et,He){if(!f)return null;for(;He!==null;)h(et,He),He=He.sibling;return null}function E(et,He){for(et=new Map;He!==null;)He.key!==null?et.set(He.key,He):et.set(He.index,He),He=He.sibling;return et}function B(et,He){return et=Gf(et,He),et.index=0,et.sibling=null,et}function G(et,He,at){return et.index=at,f?(at=et.alternate,at!==null?(at=at.index,at<He?(et.flags|=2,He):at):(et.flags|=2,He)):(et.flags|=1048576,He)}function de(et){return f&&et.alternate===null&&(et.flags|=2),et}function Me(et,He,at,Yt){return He===null||He.tag!==6?(He=N_(at,et.mode,Yt),He.return=et,He):(He=B(He,at),He.return=et,He)}function $e(et,He,at,Yt){var Nr=at.type;return Nr===L?Vt(et,He,at.props.children,Yt,at.key):He!==null&&(He.elementType===Nr||typeof Nr=="object"&&Nr!==null&&Nr.$$typeof===pe&&ws(Nr)===He.type)?(Yt=B(He,at.props),Yt.ref=zr(et,He,at),Yt.return=et,Yt):(Yt=gv(at.type,at.key,at.props,null,et.mode,Yt),Yt.ref=zr(et,He,at),Yt.return=et,Yt)}function dt(et,He,at,Yt){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=E_(at,et.mode,Yt),He.return=et,He):(He=B(He,at.children||[]),He.return=et,He)}function Vt(et,He,at,Yt,Nr){return He===null||He.tag!==7?(He=w0(at,et.mode,Yt,Nr),He.return=et,He):(He=B(He,at),He.return=et,He)}function Ht(et,He,at){if(typeof He=="string"&&He!==""||typeof He=="number")return He=N_(""+He,et.mode,at),He.return=et,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case W:return at=gv(He.type,He.key,He.props,null,et.mode,at),at.ref=zr(et,null,He),at.return=et,at;case Y:return He=E_(He,et.mode,at),He.return=et,He;case pe:var Yt=He._init;return Ht(et,Yt(He._payload),at)}if(pt(He)||H(He))return He=w0(He,et.mode,at,null),He.return=et,He;gn(et,He)}return null}function Mt(et,He,at,Yt){var Nr=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return Nr!==null?null:Me(et,He,""+at,Yt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case W:return at.key===Nr?$e(et,He,at,Yt):null;case Y:return at.key===Nr?dt(et,He,at,Yt):null;case pe:return Nr=at._init,Mt(et,He,Nr(at._payload),Yt)}if(pt(at)||H(at))return Nr!==null?null:Vt(et,He,at,Yt,null);gn(et,at)}return null}function or(et,He,at,Yt,Nr){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return et=et.get(at)||null,Me(He,et,""+Yt,Nr);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case W:return et=et.get(Yt.key===null?at:Yt.key)||null,$e(He,et,Yt,Nr);case Y:return et=et.get(Yt.key===null?at:Yt.key)||null,dt(He,et,Yt,Nr);case pe:var Dr=Yt._init;return or(et,He,at,Dr(Yt._payload),Nr)}if(pt(Yt)||H(Yt))return et=et.get(at)||null,Vt(He,et,Yt,Nr,null);gn(He,Yt)}return null}function gr(et,He,at,Yt){for(var Nr=null,Dr=null,Or=He,Yr=He=0,Ui=null;Or!==null&&Yr<at.length;Yr++){Or.index>Yr?(Ui=Or,Or=null):Ui=Or.sibling;var Yn=Mt(et,Or,at[Yr],Yt);if(Yn===null){Or===null&&(Or=Ui);break}f&&Or&&Yn.alternate===null&&h(et,Or),He=G(Yn,He,Yr),Dr===null?Nr=Yn:Dr.sibling=Yn,Dr=Yn,Or=Ui}if(Yr===at.length)return w(et,Or),St&&qe(et,Yr),Nr;if(Or===null){for(;Yr<at.length;Yr++)Or=Ht(et,at[Yr],Yt),Or!==null&&(He=G(Or,He,Yr),Dr===null?Nr=Or:Dr.sibling=Or,Dr=Or);return St&&qe(et,Yr),Nr}for(Or=E(et,Or);Yr<at.length;Yr++)Ui=or(Or,et,Yr,at[Yr],Yt),Ui!==null&&(f&&Ui.alternate!==null&&Or.delete(Ui.key===null?Yr:Ui.key),He=G(Ui,He,Yr),Dr===null?Nr=Ui:Dr.sibling=Ui,Dr=Ui);return f&&Or.forEach(function(Kf){return h(et,Kf)}),St&&qe(et,Yr),Nr}function wr(et,He,at,Yt){var Nr=H(at);if(typeof Nr!="function")throw Error(r(150));if(at=Nr.call(at),at==null)throw Error(r(151));for(var Dr=Nr=null,Or=He,Yr=He=0,Ui=null,Yn=at.next();Or!==null&&!Yn.done;Yr++,Yn=at.next()){Or.index>Yr?(Ui=Or,Or=null):Ui=Or.sibling;var Kf=Mt(et,Or,Yn.value,Yt);if(Kf===null){Or===null&&(Or=Ui);break}f&&Or&&Kf.alternate===null&&h(et,Or),He=G(Kf,He,Yr),Dr===null?Nr=Kf:Dr.sibling=Kf,Dr=Kf,Or=Ui}if(Yn.done)return w(et,Or),St&&qe(et,Yr),Nr;if(Or===null){for(;!Yn.done;Yr++,Yn=at.next())Yn=Ht(et,Yn.value,Yt),Yn!==null&&(He=G(Yn,He,Yr),Dr===null?Nr=Yn:Dr.sibling=Yn,Dr=Yn);return St&&qe(et,Yr),Nr}for(Or=E(et,Or);!Yn.done;Yr++,Yn=at.next())Yn=or(Or,et,Yr,Yn.value,Yt),Yn!==null&&(f&&Yn.alternate!==null&&Or.delete(Yn.key===null?Yr:Yn.key),He=G(Yn,He,Yr),Dr===null?Nr=Yn:Dr.sibling=Yn,Dr=Yn);return f&&Or.forEach(function(oY){return h(et,oY)}),St&&qe(et,Yr),Nr}function za(et,He,at,Yt){if(typeof at=="object"&&at!==null&&at.type===L&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case W:e:{for(var Nr=at.key,Dr=He;Dr!==null;){if(Dr.key===Nr){if(Nr=at.type,Nr===L){if(Dr.tag===7){w(et,Dr.sibling),He=B(Dr,at.props.children),He.return=et,et=He;break e}}else if(Dr.elementType===Nr||typeof Nr=="object"&&Nr!==null&&Nr.$$typeof===pe&&ws(Nr)===Dr.type){w(et,Dr.sibling),He=B(Dr,at.props),He.ref=zr(et,Dr,at),He.return=et,et=He;break e}w(et,Dr);break}else h(et,Dr);Dr=Dr.sibling}at.type===L?(He=w0(at.props.children,et.mode,Yt,at.key),He.return=et,et=He):(Yt=gv(at.type,at.key,at.props,null,et.mode,Yt),Yt.ref=zr(et,He,at),Yt.return=et,et=Yt)}return de(et);case Y:e:{for(Dr=at.key;He!==null;){if(He.key===Dr)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){w(et,He.sibling),He=B(He,at.children||[]),He.return=et,et=He;break e}else{w(et,He);break}else h(et,He);He=He.sibling}He=E_(at,et.mode,Yt),He.return=et,et=He}return de(et);case pe:return Dr=at._init,za(et,He,Dr(at._payload),Yt)}if(pt(at))return gr(et,He,at,Yt);if(H(at))return wr(et,He,at,Yt);gn(et,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,He!==null&&He.tag===6?(w(et,He.sibling),He=B(He,at),He.return=et,et=He):(w(et,He),He=N_(at,et.mode,Yt),He.return=et,et=He),de(et)):w(et,He)}return za}var ba=si(!0),Ms=si(!1),Va=ql(null),ai=null,js=null,jn=null;function qn(){jn=js=ai=null}function Rs(f){var h=Va.current;es(Va),f._currentValue=h}function Hn(f,h,w){for(;f!==null;){var E=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),f===w)break;f=f.return}}function Qs(f,h){ai=f,jn=js=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&h)!==0&&(bl=!0),f.firstContext=null)}function Js(f){var h=f._currentValue;if(jn!==f)if(f={context:f,memoizedValue:h,next:null},js===null){if(ai===null)throw Error(r(308));js=f,ai.dependencies={lanes:0,firstContext:f}}else js=js.next=f;return h}var os=null;function Oi(f){os===null?os=[f]:os.push(f)}function ss(f,h,w,E){var B=h.interleaved;return B===null?(w.next=w,Oi(h)):(w.next=B.next,B.next=w),h.interleaved=w,ls(f,E)}function ls(f,h){f.lanes|=h;var w=f.alternate;for(w!==null&&(w.lanes|=h),w=f,f=f.return;f!==null;)f.childLanes|=h,w=f.alternate,w!==null&&(w.childLanes|=h),w=f,f=f.return;return w.tag===3?w.stateNode:null}var _a=!1;function Si(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jo(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function da(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function fa(f,h,w){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(Wn&2)!==0){var B=E.pending;return B===null?h.next=h:(h.next=B.next,B.next=h),E.pending=h,ls(f,w)}return B=E.interleaved,B===null?(h.next=h,Oi(E)):(h.next=B.next,B.next=h),E.interleaved=h,ls(f,w)}function Mi(f,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var E=h.lanes;E&=f.pendingLanes,w|=E,h.lanes=w,Zi(f,w)}}function cs(f,h){var w=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var B=null,G=null;if(w=w.firstBaseUpdate,w!==null){do{var de={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};G===null?B=G=de:G=G.next=de,w=w.next}while(w!==null);G===null?B=G=h:G=G.next=h}else B=G=h;w={baseState:E.baseState,firstBaseUpdate:B,lastBaseUpdate:G,shared:E.shared,effects:E.effects},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=h:f.next=h,w.lastBaseUpdate=h}function Bi(f,h,w,E){var B=f.updateQueue;_a=!1;var G=B.firstBaseUpdate,de=B.lastBaseUpdate,Me=B.shared.pending;if(Me!==null){B.shared.pending=null;var $e=Me,dt=$e.next;$e.next=null,de===null?G=dt:de.next=dt,de=$e;var Vt=f.alternate;Vt!==null&&(Vt=Vt.updateQueue,Me=Vt.lastBaseUpdate,Me!==de&&(Me===null?Vt.firstBaseUpdate=dt:Me.next=dt,Vt.lastBaseUpdate=$e))}if(G!==null){var Ht=B.baseState;de=0,Vt=dt=$e=null,Me=G;do{var Mt=Me.lane,or=Me.eventTime;if((E&Mt)===Mt){Vt!==null&&(Vt=Vt.next={eventTime:or,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var gr=f,wr=Me;switch(Mt=h,or=w,wr.tag){case 1:if(gr=wr.payload,typeof gr=="function"){Ht=gr.call(or,Ht,Mt);break e}Ht=gr;break e;case 3:gr.flags=gr.flags&-65537|128;case 0:if(gr=wr.payload,Mt=typeof gr=="function"?gr.call(or,Ht,Mt):gr,Mt==null)break e;Ht=ie({},Ht,Mt);break e;case 2:_a=!0}}Me.callback!==null&&Me.lane!==0&&(f.flags|=64,Mt=B.effects,Mt===null?B.effects=[Me]:Mt.push(Me))}else or={eventTime:or,lane:Mt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Vt===null?(dt=Vt=or,$e=Ht):Vt=Vt.next=or,de|=Mt;if(Me=Me.next,Me===null){if(Me=B.shared.pending,Me===null)break;Mt=Me,Me=Mt.next,Mt.next=null,B.lastBaseUpdate=Mt,B.shared.pending=null}}while(!0);if(Vt===null&&($e=Ht),B.baseState=$e,B.firstBaseUpdate=dt,B.lastBaseUpdate=Vt,h=B.shared.interleaved,h!==null){B=h;do de|=B.lane,B=B.next;while(B!==h)}else G===null&&(B.shared.lanes=0);g0|=de,f.lanes=de,f.memoizedState=Ht}}function wl(f,h,w){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var E=f[h],B=E.callback;if(B!==null){if(E.callback=null,E=w,typeof B!="function")throw Error(r(191,B));B.call(E)}}}var Hl={},ii=ql(Hl),ha=ql(Hl),Fu=ql(Hl);function Jc(f){if(f===Hl)throw Error(r(174));return f}function Mf(f,h){switch(ns(Fu,h),ns(ha,f),ns(ii,Hl),f=h.nodeType,f){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Bt(null,"");break;default:f=f===8?h.parentNode:h,h=f.namespaceURI||null,f=f.tagName,h=Bt(h,f)}es(ii),ns(ii,h)}function yc(){es(ii),es(ha),es(Fu)}function Qy(f){Jc(Fu.current);var h=Jc(ii.current),w=Bt(h,f.type);h!==w&&(ns(ha,f),ns(ii,w))}function Lg(f){ha.current===f&&(es(ii),es(ha))}var Es=ql(0);function Wl(f){for(var h=f;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Fg=[];function Dg(){for(var f=0;f<Fg.length;f++)Fg[f]._workInProgressVersionPrimary=null;Fg.length=0}var tm=O.ReactCurrentDispatcher,rm=O.ReactCurrentBatchConfig,vc=0,Ls=null,ka=null,pa=null,Bf=!1,Zc=!1,Vf=0,Q4=0;function Ua(){throw Error(r(321))}function nm(f,h){if(h===null)return!1;for(var w=0;w<h.length&&w<f.length;w++)if(!Ba(f[w],h[w]))return!1;return!0}function h0(f,h,w,E,B,G){if(vc=G,Ls=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,tm.current=f===null||f.memoizedState===null?RK:LK,f=w(E,B),Zc){G=0;do{if(Zc=!1,Vf=0,25<=G)throw Error(r(301));G+=1,pa=ka=null,h.updateQueue=null,tm.current=FK,f=w(E,B)}while(Zc)}if(tm.current=rv,h=ka!==null&&ka.next!==null,vc=0,pa=ka=Ls=null,Bf=!1,h)throw Error(r(300));return f}function wc(){var f=Vf!==0;return Vf=0,f}function Gl(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pa===null?Ls.memoizedState=pa=f:pa=pa.next=f,pa}function rl(){if(ka===null){var f=Ls.alternate;f=f!==null?f.memoizedState:null}else f=ka.next;var h=pa===null?Ls.memoizedState:pa.next;if(h!==null)pa=h,ka=f;else{if(f===null)throw Error(r(310));ka=f,f={memoizedState:ka.memoizedState,baseState:ka.baseState,baseQueue:ka.baseQueue,queue:ka.queue,next:null},pa===null?Ls.memoizedState=pa=f:pa=pa.next=f}return pa}function p0(f,h){return typeof h=="function"?h(f):h}function sm(f){var h=rl(),w=h.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=f;var E=ka,B=E.baseQueue,G=w.pending;if(G!==null){if(B!==null){var de=B.next;B.next=G.next,G.next=de}E.baseQueue=B=G,w.pending=null}if(B!==null){G=B.next,E=E.baseState;var Me=de=null,$e=null,dt=G;do{var Vt=dt.lane;if((vc&Vt)===Vt)$e!==null&&($e=$e.next={lane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),E=dt.hasEagerState?dt.eagerState:f(E,dt.action);else{var Ht={lane:Vt,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null};$e===null?(Me=$e=Ht,de=E):$e=$e.next=Ht,Ls.lanes|=Vt,g0|=Vt}dt=dt.next}while(dt!==null&&dt!==G);$e===null?de=E:$e.next=Me,Ba(E,h.memoizedState)||(bl=!0),h.memoizedState=E,h.baseState=de,h.baseQueue=$e,w.lastRenderedState=E}if(f=w.interleaved,f!==null){B=f;do G=B.lane,Ls.lanes|=G,g0|=G,B=B.next;while(B!==f)}else B===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function Du(f){var h=rl(),w=h.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=f;var E=w.dispatch,B=w.pending,G=h.memoizedState;if(B!==null){w.pending=null;var de=B=B.next;do G=f(G,de.action),de=de.next;while(de!==B);Ba(G,h.memoizedState)||(bl=!0),h.memoizedState=G,h.baseQueue===null&&(h.baseState=G),w.lastRenderedState=G}return[G,E]}function Jy(){}function Og(f,h){var w=Ls,E=rl(),B=h(),G=!Ba(E.memoizedState,B);if(G&&(E.memoizedState=B,bl=!0),E=E.queue,om(ev.bind(null,w,E,f),[f]),E.getSnapshot!==h||G||pa!==null&&pa.memoizedState.tag&1){if(w.flags|=2048,nl(9,Mg.bind(null,w,E,B,h),void 0,null),Vi===null)throw Error(r(349));(vc&30)!==0||Zy(w,h,B)}return B}function Zy(f,h,w){f.flags|=16384,f={getSnapshot:h,value:w},h=Ls.updateQueue,h===null?(h={lastEffect:null,stores:null},Ls.updateQueue=h,h.stores=[f]):(w=h.stores,w===null?h.stores=[f]:w.push(f))}function Mg(f,h,w,E){h.value=w,h.getSnapshot=E,Uf(h)&&am(f)}function ev(f,h,w){return w(function(){Uf(h)&&am(f)})}function Uf(f){var h=f.getSnapshot;f=f.value;try{var w=h();return!Ba(f,w)}catch{return!0}}function am(f){var h=ls(f,1);h!==null&&su(h,f,1,-1)}function m0(f){var h=Gl();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p0,lastRenderedState:f},h.queue=f,f=f.dispatch=jK.bind(null,Ls,f),[h.memoizedState,f]}function nl(f,h,w,E){return f={tag:f,create:h,destroy:w,deps:E,next:null},h=Ls.updateQueue,h===null?(h={lastEffect:null,stores:null},Ls.updateQueue=h,h.lastEffect=f.next=f):(w=h.lastEffect,w===null?h.lastEffect=f.next=f:(E=w.next,w.next=f,f.next=E,h.lastEffect=f)),f}function eu(){return rl().memoizedState}function Kl(f,h,w,E){var B=Gl();Ls.flags|=f,B.memoizedState=nl(1|h,w,void 0,E===void 0?null:E)}function Rd(f,h,w,E){var B=rl();E=E===void 0?null:E;var G=void 0;if(ka!==null){var de=ka.memoizedState;if(G=de.destroy,E!==null&&nm(E,de.deps)){B.memoizedState=nl(h,w,G,E);return}}Ls.flags|=f,B.memoizedState=nl(1|h,w,G,E)}function im(f,h){return Kl(8390656,8,f,h)}function om(f,h){return Rd(2048,8,f,h)}function tv(f,h){return Rd(4,2,f,h)}function lm(f,h){return Rd(4,4,f,h)}function cm(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function YE(f,h,w){return w=w!=null?w.concat([f]):null,Rd(4,4,cm.bind(null,h,f),w)}function J4(){}function XE(f,h){var w=rl();h=h===void 0?null:h;var E=w.memoizedState;return E!==null&&h!==null&&nm(h,E[1])?E[0]:(w.memoizedState=[f,h],f)}function QE(f,h){var w=rl();h=h===void 0?null:h;var E=w.memoizedState;return E!==null&&h!==null&&nm(h,E[1])?E[0]:(f=f(),w.memoizedState=[f,h],f)}function JE(f,h,w){return(vc&21)===0?(f.baseState&&(f.baseState=!1,bl=!0),f.memoizedState=w):(Ba(w,h)||(w=Ws(),Ls.lanes|=w,g0|=w,f.baseState=!0),h)}function IK(f,h){var w=rn;rn=w!==0&&4>w?w:4,f(!0);var E=rm.transition;rm.transition={};try{f(!1),h()}finally{rn=w,rm.transition=E}}function ZE(){return rl().memoizedState}function PK(f,h,w){var E=Hf(f);if(w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},e9(f))t9(h,w);else if(w=ss(f,h,w,E),w!==null){var B=al();su(w,f,E,B),r9(w,h,E)}}function jK(f,h,w){var E=Hf(f),B={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(e9(f))t9(h,B);else{var G=f.alternate;if(f.lanes===0&&(G===null||G.lanes===0)&&(G=h.lastRenderedReducer,G!==null))try{var de=h.lastRenderedState,Me=G(de,w);if(B.hasEagerState=!0,B.eagerState=Me,Ba(Me,de)){var $e=h.interleaved;$e===null?(B.next=B,Oi(h)):(B.next=$e.next,$e.next=B),h.interleaved=B;return}}catch{}finally{}w=ss(f,h,B,E),w!==null&&(B=al(),su(w,f,E,B),r9(w,h,E))}}function e9(f){var h=f.alternate;return f===Ls||h!==null&&h===Ls}function t9(f,h){Zc=Bf=!0;var w=f.pending;w===null?h.next=h:(h.next=w.next,w.next=h),f.pending=h}function r9(f,h,w){if((w&4194240)!==0){var E=h.lanes;E&=f.pendingLanes,w|=E,h.lanes=w,Zi(f,w)}}var rv={readContext:Js,useCallback:Ua,useContext:Ua,useEffect:Ua,useImperativeHandle:Ua,useInsertionEffect:Ua,useLayoutEffect:Ua,useMemo:Ua,useReducer:Ua,useRef:Ua,useState:Ua,useDebugValue:Ua,useDeferredValue:Ua,useTransition:Ua,useMutableSource:Ua,useSyncExternalStore:Ua,useId:Ua,unstable_isNewReconciler:!1},RK={readContext:Js,useCallback:function(f,h){return Gl().memoizedState=[f,h===void 0?null:h],f},useContext:Js,useEffect:im,useImperativeHandle:function(f,h,w){return w=w!=null?w.concat([f]):null,Kl(4194308,4,cm.bind(null,h,f),w)},useLayoutEffect:function(f,h){return Kl(4194308,4,f,h)},useInsertionEffect:function(f,h){return Kl(4,2,f,h)},useMemo:function(f,h){var w=Gl();return h=h===void 0?null:h,f=f(),w.memoizedState=[f,h],f},useReducer:function(f,h,w){var E=Gl();return h=w!==void 0?w(h):h,E.memoizedState=E.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},E.queue=f,f=f.dispatch=PK.bind(null,Ls,f),[E.memoizedState,f]},useRef:function(f){var h=Gl();return f={current:f},h.memoizedState=f},useState:m0,useDebugValue:J4,useDeferredValue:function(f){return Gl().memoizedState=f},useTransition:function(){var f=m0(!1),h=f[0];return f=IK.bind(null,f[1]),Gl().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,w){var E=Ls,B=Gl();if(St){if(w===void 0)throw Error(r(407));w=w()}else{if(w=h(),Vi===null)throw Error(r(349));(vc&30)!==0||Zy(E,h,w)}B.memoizedState=w;var G={value:w,getSnapshot:h};return B.queue=G,im(ev.bind(null,E,G,f),[f]),E.flags|=2048,nl(9,Mg.bind(null,E,G,w,h),void 0,null),w},useId:function(){var f=Gl(),h=Vi.identifierPrefix;if(St){var w=Ie,E=Ze;w=(E&~(1<<32-De(E)-1)).toString(32)+w,h=":"+h+"R"+w,w=Vf++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=Q4++,h=":"+h+"r"+w.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},LK={readContext:Js,useCallback:XE,useContext:Js,useEffect:om,useImperativeHandle:YE,useInsertionEffect:tv,useLayoutEffect:lm,useMemo:QE,useReducer:sm,useRef:eu,useState:function(){return sm(p0)},useDebugValue:J4,useDeferredValue:function(f){var h=rl();return JE(h,ka.memoizedState,f)},useTransition:function(){var f=sm(p0)[0],h=rl().memoizedState;return[f,h]},useMutableSource:Jy,useSyncExternalStore:Og,useId:ZE,unstable_isNewReconciler:!1},FK={readContext:Js,useCallback:XE,useContext:Js,useEffect:om,useImperativeHandle:YE,useInsertionEffect:tv,useLayoutEffect:lm,useMemo:QE,useReducer:Du,useRef:eu,useState:function(){return Du(p0)},useDebugValue:J4,useDeferredValue:function(f){var h=rl();return ka===null?h.memoizedState=f:JE(h,ka.memoizedState,f)},useTransition:function(){var f=Du(p0)[0],h=rl().memoizedState;return[f,h]},useMutableSource:Jy,useSyncExternalStore:Og,useId:ZE,unstable_isNewReconciler:!1};function tu(f,h){if(f&&f.defaultProps){h=ie({},h),f=f.defaultProps;for(var w in f)h[w]===void 0&&(h[w]=f[w]);return h}return h}function Z4(f,h,w,E){h=f.memoizedState,w=w(E,h),w=w==null?h:ie({},h,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var nv={isMounted:function(f){return(f=f._reactInternals)?Le(f)===f:!1},enqueueSetState:function(f,h,w){f=f._reactInternals;var E=al(),B=Hf(f),G=da(E,B);G.payload=h,w!=null&&(G.callback=w),h=fa(f,G,B),h!==null&&(su(h,f,B,E),Mi(h,f,B))},enqueueReplaceState:function(f,h,w){f=f._reactInternals;var E=al(),B=Hf(f),G=da(E,B);G.tag=1,G.payload=h,w!=null&&(G.callback=w),h=fa(f,G,B),h!==null&&(su(h,f,B,E),Mi(h,f,B))},enqueueForceUpdate:function(f,h){f=f._reactInternals;var w=al(),E=Hf(f),B=da(w,E);B.tag=2,h!=null&&(B.callback=h),h=fa(f,B,E),h!==null&&(su(h,f,E,w),Mi(h,f,E))}};function n9(f,h,w,E,B,G,de){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,G,de):h.prototype&&h.prototype.isPureReactComponent?!mc(w,E)||!mc(B,G):!0}function s9(f,h,w){var E=!1,B=Lu,G=h.contextType;return typeof G=="object"&&G!==null?G=Js(G):(B=Po(h)?Pd:ki.current,E=h.contextTypes,G=(E=E!=null)?Of(f,B):Lu),h=new h(w,G),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=nv,f.stateNode=h,h._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=B,f.__reactInternalMemoizedMaskedChildContext=G),h}function a9(f,h,w,E){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,E),h.state!==f&&nv.enqueueReplaceState(h,h.state,null)}function e_(f,h,w,E){var B=f.stateNode;B.props=w,B.state=f.memoizedState,B.refs={},Si(f);var G=h.contextType;typeof G=="object"&&G!==null?B.context=Js(G):(G=Po(h)?Pd:ki.current,B.context=Of(f,G)),B.state=f.memoizedState,G=h.getDerivedStateFromProps,typeof G=="function"&&(Z4(f,h,G,w),B.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(h=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),h!==B.state&&nv.enqueueReplaceState(B,B.state,null),Bi(f,w,B,E),B.state=f.memoizedState),typeof B.componentDidMount=="function"&&(f.flags|=4194308)}function um(f,h){try{var w="",E=h;do w+=J(E),E=E.return;while(E);var B=w}catch(G){B=`
Error generating stack: `+G.message+`
`+G.stack}return{value:f,source:h,stack:B,digest:null}}function t_(f,h,w){return{value:f,source:null,stack:w??null,digest:h??null}}function r_(f,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var DK=typeof WeakMap=="function"?WeakMap:Map;function i9(f,h,w){w=da(-1,w),w.tag=3,w.payload={element:null};var E=h.value;return w.callback=function(){uv||(uv=!0,x_=E),r_(f,h)},w}function o9(f,h,w){w=da(-1,w),w.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var B=h.value;w.payload=function(){return E(B)},w.callback=function(){r_(f,h)}}var G=f.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(w.callback=function(){r_(f,h),typeof E!="function"&&($f===null?$f=new Set([this]):$f.add(this));var de=h.stack;this.componentDidCatch(h.value,{componentStack:de!==null?de:""})}),w}function l9(f,h,w){var E=f.pingCache;if(E===null){E=f.pingCache=new DK;var B=new Set;E.set(h,B)}else B=E.get(h),B===void 0&&(B=new Set,E.set(h,B));B.has(w)||(B.add(w),f=XK.bind(null,f,h,w),h.then(f,f))}function c9(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function u9(f,h,w,E,B){return(f.mode&1)===0?(f===h?f.flags|=65536:(f.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=da(-1,1),h.tag=2,fa(w,h,1))),w.lanes|=1),f):(f.flags|=65536,f.lanes=B,f)}var OK=O.ReactCurrentOwner,bl=!1;function sl(f,h,w,E){h.child=f===null?Ms(h,null,w,E):ba(h,f.child,w,E)}function d9(f,h,w,E,B){w=w.render;var G=h.ref;return Qs(h,B),E=h0(f,h,w,E,G,B),w=wc(),f!==null&&!bl?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~B,Ld(f,h,B)):(St&&w&&vt(h),h.flags|=1,sl(f,h,E,B),h.child)}function f9(f,h,w,E,B){if(f===null){var G=w.type;return typeof G=="function"&&!S_(G)&&G.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=G,h9(f,h,G,E,B)):(f=gv(w.type,null,E,h,h.mode,B),f.ref=h.ref,f.return=h,h.child=f)}if(G=f.child,(f.lanes&B)===0){var de=G.memoizedProps;if(w=w.compare,w=w!==null?w:mc,w(de,E)&&f.ref===h.ref)return Ld(f,h,B)}return h.flags|=1,f=Gf(G,E),f.ref=h.ref,f.return=h,h.child=f}function h9(f,h,w,E,B){if(f!==null){var G=f.memoizedProps;if(mc(G,E)&&f.ref===h.ref)if(bl=!1,h.pendingProps=E=G,(f.lanes&B)!==0)(f.flags&131072)!==0&&(bl=!0);else return h.lanes=f.lanes,Ld(f,h,B)}return n_(f,h,w,E,B)}function p9(f,h,w){var E=h.pendingProps,B=E.children,G=f!==null?f.memoizedState:null;if(E.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},ns(fm,Yl),Yl|=w;else{if((w&1073741824)===0)return f=G!==null?G.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null,transitions:null},h.updateQueue=null,ns(fm,Yl),Yl|=f,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=G!==null?G.baseLanes:w,ns(fm,Yl),Yl|=E}else G!==null?(E=G.baseLanes|w,h.memoizedState=null):E=w,ns(fm,Yl),Yl|=E;return sl(f,h,B,w),h.child}function m9(f,h){var w=h.ref;(f===null&&w!==null||f!==null&&f.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function n_(f,h,w,E,B){var G=Po(w)?Pd:ki.current;return G=Of(h,G),Qs(h,B),w=h0(f,h,w,E,G,B),E=wc(),f!==null&&!bl?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~B,Ld(f,h,B)):(St&&E&&vt(h),h.flags|=1,sl(f,h,w,B),h.child)}function g9(f,h,w,E,B){if(Po(w)){var G=!0;jd(h)}else G=!1;if(Qs(h,B),h.stateNode===null)av(f,h),s9(h,w,E),e_(h,w,E,B),E=!0;else if(f===null){var de=h.stateNode,Me=h.memoizedProps;de.props=Me;var $e=de.context,dt=w.contextType;typeof dt=="object"&&dt!==null?dt=Js(dt):(dt=Po(w)?Pd:ki.current,dt=Of(h,dt));var Vt=w.getDerivedStateFromProps,Ht=typeof Vt=="function"||typeof de.getSnapshotBeforeUpdate=="function";Ht||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Me!==E||$e!==dt)&&a9(h,de,E,dt),_a=!1;var Mt=h.memoizedState;de.state=Mt,Bi(h,E,de,B),$e=h.memoizedState,Me!==E||Mt!==$e||Io.current||_a?(typeof Vt=="function"&&(Z4(h,w,Vt,E),$e=h.memoizedState),(Me=_a||n9(h,w,Me,E,Mt,$e,dt))?(Ht||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(h.flags|=4194308)):(typeof de.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=$e),de.props=E,de.state=$e,de.context=dt,E=Me):(typeof de.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{de=h.stateNode,jo(f,h),Me=h.memoizedProps,dt=h.type===h.elementType?Me:tu(h.type,Me),de.props=dt,Ht=h.pendingProps,Mt=de.context,$e=w.contextType,typeof $e=="object"&&$e!==null?$e=Js($e):($e=Po(w)?Pd:ki.current,$e=Of(h,$e));var or=w.getDerivedStateFromProps;(Vt=typeof or=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Me!==Ht||Mt!==$e)&&a9(h,de,E,$e),_a=!1,Mt=h.memoizedState,de.state=Mt,Bi(h,E,de,B);var gr=h.memoizedState;Me!==Ht||Mt!==gr||Io.current||_a?(typeof or=="function"&&(Z4(h,w,or,E),gr=h.memoizedState),(dt=_a||n9(h,w,dt,E,Mt,gr,$e)||!1)?(Vt||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(E,gr,$e),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(E,gr,$e)),typeof de.componentDidUpdate=="function"&&(h.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof de.componentDidUpdate!="function"||Me===f.memoizedProps&&Mt===f.memoizedState||(h.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Me===f.memoizedProps&&Mt===f.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=gr),de.props=E,de.state=gr,de.context=$e,E=dt):(typeof de.componentDidUpdate!="function"||Me===f.memoizedProps&&Mt===f.memoizedState||(h.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Me===f.memoizedProps&&Mt===f.memoizedState||(h.flags|=1024),E=!1)}return s_(f,h,w,E,G,B)}function s_(f,h,w,E,B,G){m9(f,h);var de=(h.flags&128)!==0;if(!E&&!de)return B&&Xy(h,w,!1),Ld(f,h,G);E=h.stateNode,OK.current=h;var Me=de&&typeof w.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,f!==null&&de?(h.child=ba(h,f.child,null,G),h.child=ba(h,null,Me,G)):sl(f,h,Me,G),h.memoizedState=E.state,B&&Xy(h,w,!0),h.child}function x9(f){var h=f.stateNode;h.pendingContext?Yy(f,h.pendingContext,h.pendingContext!==h.context):h.context&&Yy(f,h.context,!1),Mf(f,h.containerInfo)}function y9(f,h,w,E,B){return dr(),Jt(B),h.flags|=256,sl(f,h,w,E),h.child}var a_={dehydrated:null,treeContext:null,retryLane:0};function i_(f){return{baseLanes:f,cachePool:null,transitions:null}}function v9(f,h,w){var E=h.pendingProps,B=Es.current,G=!1,de=(h.flags&128)!==0,Me;if((Me=de)||(Me=f!==null&&f.memoizedState===null?!1:(B&2)!==0),Me?(G=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(B|=1),ns(Es,B&1),f===null)return mr(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((h.mode&1)===0?h.lanes=1:f.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(de=E.children,f=E.fallback,G?(E=h.mode,G=h.child,de={mode:"hidden",children:de},(E&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=de):G=xv(de,E,0,null),f=w0(f,E,w,null),G.return=h,f.return=h,G.sibling=f,h.child=G,h.child.memoizedState=i_(w),h.memoizedState=a_,f):o_(h,de));if(B=f.memoizedState,B!==null&&(Me=B.dehydrated,Me!==null))return MK(f,h,de,E,Me,B,w);if(G){G=E.fallback,de=h.mode,B=f.child,Me=B.sibling;var $e={mode:"hidden",children:E.children};return(de&1)===0&&h.child!==B?(E=h.child,E.childLanes=0,E.pendingProps=$e,h.deletions=null):(E=Gf(B,$e),E.subtreeFlags=B.subtreeFlags&14680064),Me!==null?G=Gf(Me,G):(G=w0(G,de,w,null),G.flags|=2),G.return=h,E.return=h,E.sibling=G,h.child=E,E=G,G=h.child,de=f.child.memoizedState,de=de===null?i_(w):{baseLanes:de.baseLanes|w,cachePool:null,transitions:de.transitions},G.memoizedState=de,G.childLanes=f.childLanes&~w,h.memoizedState=a_,E}return G=f.child,f=G.sibling,E=Gf(G,{mode:"visible",children:E.children}),(h.mode&1)===0&&(E.lanes=w),E.return=h,E.sibling=null,f!==null&&(w=h.deletions,w===null?(h.deletions=[f],h.flags|=16):w.push(f)),h.child=E,h.memoizedState=null,E}function o_(f,h){return h=xv({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function sv(f,h,w,E){return E!==null&&Jt(E),ba(h,f.child,null,w),f=o_(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function MK(f,h,w,E,B,G,de){if(w)return h.flags&256?(h.flags&=-257,E=t_(Error(r(422))),sv(f,h,de,E)):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(G=E.fallback,B=h.mode,E=xv({mode:"visible",children:E.children},B,0,null),G=w0(G,B,de,null),G.flags|=2,E.return=h,G.return=h,E.sibling=G,h.child=E,(h.mode&1)!==0&&ba(h,f.child,null,de),h.child.memoizedState=i_(de),h.memoizedState=a_,G);if((h.mode&1)===0)return sv(f,h,de,null);if(B.data==="$!"){if(E=B.nextSibling&&B.nextSibling.dataset,E)var Me=E.dgst;return E=Me,G=Error(r(419)),E=t_(G,E,void 0),sv(f,h,de,E)}if(Me=(de&f.childLanes)!==0,bl||Me){if(E=Vi,E!==null){switch(de&-de){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=(B&(E.suspendedLanes|de))!==0?0:B,B!==0&&B!==G.retryLane&&(G.retryLane=B,ls(f,B),su(E,f,B,-1))}return k_(),E=t_(Error(r(421))),sv(f,h,de,E)}return B.data==="$?"?(h.flags|=128,h.child=f.child,h=QK.bind(null,f),B._reactRetry=h,null):(f=G.treeContext,yt=io(B.nextSibling),xt=h,St=!0,Et=null,f!==null&&(_e[Ce++]=Ze,_e[Ce++]=Ie,_e[Ce++]=ze,Ze=f.id,Ie=f.overflow,ze=h),h=o_(h,E.children),h.flags|=4096,h)}function w9(f,h,w){f.lanes|=h;var E=f.alternate;E!==null&&(E.lanes|=h),Hn(f.return,h,w)}function l_(f,h,w,E,B){var G=f.memoizedState;G===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:B}:(G.isBackwards=h,G.rendering=null,G.renderingStartTime=0,G.last=E,G.tail=w,G.tailMode=B)}function b9(f,h,w){var E=h.pendingProps,B=E.revealOrder,G=E.tail;if(sl(f,h,E.children,w),E=Es.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&w9(f,w,h);else if(f.tag===19)w9(f,w,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(ns(Es,E),(h.mode&1)===0)h.memoizedState=null;else switch(B){case"forwards":for(w=h.child,B=null;w!==null;)f=w.alternate,f!==null&&Wl(f)===null&&(B=w),w=w.sibling;w=B,w===null?(B=h.child,h.child=null):(B=w.sibling,w.sibling=null),l_(h,!1,B,w,G);break;case"backwards":for(w=null,B=h.child,h.child=null;B!==null;){if(f=B.alternate,f!==null&&Wl(f)===null){h.child=B;break}f=B.sibling,B.sibling=w,w=B,B=f}l_(h,!0,w,null,G);break;case"together":l_(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function av(f,h){(h.mode&1)===0&&f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2)}function Ld(f,h,w){if(f!==null&&(h.dependencies=f.dependencies),g0|=h.lanes,(w&h.childLanes)===0)return null;if(f!==null&&h.child!==f.child)throw Error(r(153));if(h.child!==null){for(f=h.child,w=Gf(f,f.pendingProps),h.child=w,w.return=h;f.sibling!==null;)f=f.sibling,w=w.sibling=Gf(f,f.pendingProps),w.return=h;w.sibling=null}return h.child}function BK(f,h,w){switch(h.tag){case 3:x9(h),dr();break;case 5:Qy(h);break;case 1:Po(h.type)&&jd(h);break;case 4:Mf(h,h.stateNode.containerInfo);break;case 10:var E=h.type._context,B=h.memoizedProps.value;ns(Va,E._currentValue),E._currentValue=B;break;case 13:if(E=h.memoizedState,E!==null)return E.dehydrated!==null?(ns(Es,Es.current&1),h.flags|=128,null):(w&h.child.childLanes)!==0?v9(f,h,w):(ns(Es,Es.current&1),f=Ld(f,h,w),f!==null?f.sibling:null);ns(Es,Es.current&1);break;case 19:if(E=(w&h.childLanes)!==0,(f.flags&128)!==0){if(E)return b9(f,h,w);h.flags|=128}if(B=h.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ns(Es,Es.current),E)break;return null;case 22:case 23:return h.lanes=0,p9(f,h,w)}return Ld(f,h,w)}var _9,c_,k9,S9;_9=function(f,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)f.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},c_=function(){},k9=function(f,h,w,E){var B=f.memoizedProps;if(B!==E){f=h.stateNode,Jc(ii.current);var G=null;switch(w){case"input":B=Pe(f,B),E=Pe(f,E),G=[];break;case"select":B=ie({},B,{value:void 0}),E=ie({},E,{value:void 0}),G=[];break;case"textarea":B=Lt(f,B),E=Lt(f,E),G=[];break;default:typeof B.onClick!="function"&&typeof E.onClick=="function"&&(f.onclick=Lf)}nr(w,E);var de;w=null;for(dt in B)if(!E.hasOwnProperty(dt)&&B.hasOwnProperty(dt)&&B[dt]!=null)if(dt==="style"){var Me=B[dt];for(de in Me)Me.hasOwnProperty(de)&&(w||(w={}),w[de]="")}else dt!=="dangerouslySetInnerHTML"&&dt!=="children"&&dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&dt!=="autoFocus"&&(s.hasOwnProperty(dt)?G||(G=[]):(G=G||[]).push(dt,null));for(dt in E){var $e=E[dt];if(Me=B?.[dt],E.hasOwnProperty(dt)&&$e!==Me&&($e!=null||Me!=null))if(dt==="style")if(Me){for(de in Me)!Me.hasOwnProperty(de)||$e&&$e.hasOwnProperty(de)||(w||(w={}),w[de]="");for(de in $e)$e.hasOwnProperty(de)&&Me[de]!==$e[de]&&(w||(w={}),w[de]=$e[de])}else w||(G||(G=[]),G.push(dt,w)),w=$e;else dt==="dangerouslySetInnerHTML"?($e=$e?$e.__html:void 0,Me=Me?Me.__html:void 0,$e!=null&&Me!==$e&&(G=G||[]).push(dt,$e)):dt==="children"?typeof $e!="string"&&typeof $e!="number"||(G=G||[]).push(dt,""+$e):dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&(s.hasOwnProperty(dt)?($e!=null&&dt==="onScroll"&&is("scroll",f),G||Me===$e||(G=[])):(G=G||[]).push(dt,$e))}w&&(G=G||[]).push("style",w);var dt=G;(h.updateQueue=dt)&&(h.flags|=4)}},S9=function(f,h,w,E){w!==E&&(h.flags|=4)};function Bg(f,h){if(!St)switch(f.tailMode){case"hidden":h=f.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Ro(f){var h=f.alternate!==null&&f.alternate.child===f.child,w=0,E=0;if(h)for(var B=f.child;B!==null;)w|=B.lanes|B.childLanes,E|=B.subtreeFlags&14680064,E|=B.flags&14680064,B.return=f,B=B.sibling;else for(B=f.child;B!==null;)w|=B.lanes|B.childLanes,E|=B.subtreeFlags,E|=B.flags,B.return=f,B=B.sibling;return f.subtreeFlags|=E,f.childLanes=w,h}function VK(f,h,w){var E=h.pendingProps;switch(tt(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ro(h),null;case 1:return Po(h.type)&&em(),Ro(h),null;case 3:return E=h.stateNode,yc(),es(Io),es(ki),Dg(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Xs(h)?h.flags|=4:f===null||f.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Et!==null&&(w_(Et),Et=null))),c_(f,h),Ro(h),null;case 5:Lg(h);var B=Jc(Fu.current);if(w=h.type,f!==null&&h.stateNode!=null)k9(f,h,w,E,B),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(r(166));return Ro(h),null}if(f=Jc(ii.current),Xs(h)){E=h.stateNode,w=h.type;var G=h.memoizedProps;switch(E[xc]=h,E[Ff]=G,f=(h.mode&1)!==0,w){case"dialog":is("cancel",E),is("close",E);break;case"iframe":case"object":case"embed":is("load",E);break;case"video":case"audio":for(B=0;B<ju.length;B++)is(ju[B],E);break;case"source":is("error",E);break;case"img":case"image":case"link":is("error",E),is("load",E);break;case"details":is("toggle",E);break;case"input":ne(E,G),is("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!G.multiple},is("invalid",E);break;case"textarea":Ct(E,G),is("invalid",E)}nr(w,G),B=null;for(var de in G)if(G.hasOwnProperty(de)){var Me=G[de];de==="children"?typeof Me=="string"?E.textContent!==Me&&(G.suppressHydrationWarning!==!0&&Zp(E.textContent,Me,f),B=["children",Me]):typeof Me=="number"&&E.textContent!==""+Me&&(G.suppressHydrationWarning!==!0&&Zp(E.textContent,Me,f),B=["children",""+Me]):s.hasOwnProperty(de)&&Me!=null&&de==="onScroll"&&is("scroll",E)}switch(w){case"input":ke(E),Be(E,G,!0);break;case"textarea":ke(E),_t(E);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(E.onclick=Lf)}E=B,h.updateQueue=E,E!==null&&(h.flags|=4)}else{de=B.nodeType===9?B:B.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=ot(w)),f==="http://www.w3.org/1999/xhtml"?w==="script"?(f=de.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof E.is=="string"?f=de.createElement(w,{is:E.is}):(f=de.createElement(w),w==="select"&&(de=f,E.multiple?de.multiple=!0:E.size&&(de.size=E.size))):f=de.createElementNS(f,w),f[xc]=h,f[Ff]=E,_9(f,h,!1,!1),h.stateNode=f;e:{switch(de=Dt(w,E),w){case"dialog":is("cancel",f),is("close",f),B=E;break;case"iframe":case"object":case"embed":is("load",f),B=E;break;case"video":case"audio":for(B=0;B<ju.length;B++)is(ju[B],f);B=E;break;case"source":is("error",f),B=E;break;case"img":case"image":case"link":is("error",f),is("load",f),B=E;break;case"details":is("toggle",f),B=E;break;case"input":ne(f,E),B=Pe(f,E),is("invalid",f);break;case"option":B=E;break;case"select":f._wrapperState={wasMultiple:!!E.multiple},B=ie({},E,{value:void 0}),is("invalid",f);break;case"textarea":Ct(f,E),B=Lt(f,E),is("invalid",f);break;default:B=E}nr(w,B),Me=B;for(G in Me)if(Me.hasOwnProperty(G)){var $e=Me[G];G==="style"?ut(f,$e):G==="dangerouslySetInnerHTML"?($e=$e?$e.__html:void 0,$e!=null&&ft(f,$e)):G==="children"?typeof $e=="string"?(w!=="textarea"||$e!=="")&&st(f,$e):typeof $e=="number"&&st(f,""+$e):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?$e!=null&&G==="onScroll"&&is("scroll",f):$e!=null&&T(f,G,$e,de))}switch(w){case"input":ke(f),Be(f,E,!1);break;case"textarea":ke(f),_t(f);break;case"option":E.value!=null&&f.setAttribute("value",""+ve(E.value));break;case"select":f.multiple=!!E.multiple,G=E.value,G!=null?nt(f,!!E.multiple,G,!1):E.defaultValue!=null&&nt(f,!!E.multiple,E.defaultValue,!0);break;default:typeof B.onClick=="function"&&(f.onclick=Lf)}switch(w){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ro(h),null;case 6:if(f&&h.stateNode!=null)S9(f,h,f.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(r(166));if(w=Jc(Fu.current),Jc(ii.current),Xs(h)){if(E=h.stateNode,w=h.memoizedProps,E[xc]=h,(G=E.nodeValue!==w)&&(f=xt,f!==null))switch(f.tag){case 3:Zp(E.nodeValue,w,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Zp(E.nodeValue,w,(f.mode&1)!==0)}G&&(h.flags|=4)}else E=(w.nodeType===9?w:w.ownerDocument).createTextNode(E),E[xc]=h,h.stateNode=E}return Ro(h),null;case 13:if(es(Es),E=h.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(St&&yt!==null&&(h.mode&1)!==0&&(h.flags&128)===0)nn(),dr(),h.flags|=98560,G=!1;else if(G=Xs(h),E!==null&&E.dehydrated!==null){if(f===null){if(!G)throw Error(r(318));if(G=h.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(r(317));G[xc]=h}else dr(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ro(h),G=!1}else Et!==null&&(w_(Et),Et=null),G=!0;if(!G)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=w,h):(E=E!==null,E!==(f!==null&&f.memoizedState!==null)&&E&&(h.child.flags|=8192,(h.mode&1)!==0&&(f===null||(Es.current&1)!==0?Ni===0&&(Ni=3):k_())),h.updateQueue!==null&&(h.flags|=4),Ro(h),null);case 4:return yc(),c_(f,h),f===null&&Cd(h.stateNode.containerInfo),Ro(h),null;case 10:return Rs(h.type._context),Ro(h),null;case 17:return Po(h.type)&&em(),Ro(h),null;case 19:if(es(Es),G=h.memoizedState,G===null)return Ro(h),null;if(E=(h.flags&128)!==0,de=G.rendering,de===null)if(E)Bg(G,!1);else{if(Ni!==0||f!==null&&(f.flags&128)!==0)for(f=h.child;f!==null;){if(de=Wl(f),de!==null){for(h.flags|=128,Bg(G,!1),E=de.updateQueue,E!==null&&(h.updateQueue=E,h.flags|=4),h.subtreeFlags=0,E=w,w=h.child;w!==null;)G=w,f=E,G.flags&=14680066,de=G.alternate,de===null?(G.childLanes=0,G.lanes=f,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=de.childLanes,G.lanes=de.lanes,G.child=de.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=de.memoizedProps,G.memoizedState=de.memoizedState,G.updateQueue=de.updateQueue,G.type=de.type,f=de.dependencies,G.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),w=w.sibling;return ns(Es,Es.current&1|2),h.child}f=f.sibling}G.tail!==null&&It()>hm&&(h.flags|=128,E=!0,Bg(G,!1),h.lanes=4194304)}else{if(!E)if(f=Wl(de),f!==null){if(h.flags|=128,E=!0,w=f.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),Bg(G,!0),G.tail===null&&G.tailMode==="hidden"&&!de.alternate&&!St)return Ro(h),null}else 2*It()-G.renderingStartTime>hm&&w!==1073741824&&(h.flags|=128,E=!0,Bg(G,!1),h.lanes=4194304);G.isBackwards?(de.sibling=h.child,h.child=de):(w=G.last,w!==null?w.sibling=de:h.child=de,G.last=de)}return G.tail!==null?(h=G.tail,G.rendering=h,G.tail=h.sibling,G.renderingStartTime=It(),h.sibling=null,w=Es.current,ns(Es,E?w&1|2:w&1),h):(Ro(h),null);case 22:case 23:return __(),E=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(h.flags|=8192),E&&(h.mode&1)!==0?(Yl&1073741824)!==0&&(Ro(h),h.subtreeFlags&6&&(h.flags|=8192)):Ro(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function UK(f,h){switch(tt(h),h.tag){case 1:return Po(h.type)&&em(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return yc(),es(Io),es(ki),Dg(),f=h.flags,(f&65536)!==0&&(f&128)===0?(h.flags=f&-65537|128,h):null;case 5:return Lg(h),null;case 13:if(es(Es),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(r(340));dr()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return es(Es),null;case 4:return yc(),null;case 10:return Rs(h.type._context),null;case 22:case 23:return __(),null;case 24:return null;default:return null}}var iv=!1,Lo=!1,zK=typeof WeakSet=="function"?WeakSet:Set,fr=null;function dm(f,h){var w=f.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){Sa(f,h,E)}else w.current=null}function u_(f,h,w){try{w()}catch(E){Sa(f,h,E)}}var N9=!1;function $K(f,h){if(u0=uc,f=wg(),Gp(f)){if("selectionStart"in f)var w={start:f.selectionStart,end:f.selectionEnd};else e:{w=(w=f.ownerDocument)&&w.defaultView||window;var E=w.getSelection&&w.getSelection();if(E&&E.rangeCount!==0){w=E.anchorNode;var B=E.anchorOffset,G=E.focusNode;E=E.focusOffset;try{w.nodeType,G.nodeType}catch{w=null;break e}var de=0,Me=-1,$e=-1,dt=0,Vt=0,Ht=f,Mt=null;t:for(;;){for(var or;Ht!==w||B!==0&&Ht.nodeType!==3||(Me=de+B),Ht!==G||E!==0&&Ht.nodeType!==3||($e=de+E),Ht.nodeType===3&&(de+=Ht.nodeValue.length),(or=Ht.firstChild)!==null;)Mt=Ht,Ht=or;for(;;){if(Ht===f)break t;if(Mt===w&&++dt===B&&(Me=de),Mt===G&&++Vt===E&&($e=de),(or=Ht.nextSibling)!==null)break;Ht=Mt,Mt=Ht.parentNode}Ht=or}w=Me===-1||$e===-1?null:{start:Me,end:$e}}else w=null}w=w||{start:0,end:0}}else w=null;for(Td={focusedElem:f,selectionRange:w},uc=!1,fr=h;fr!==null;)if(h=fr,f=h.child,(h.subtreeFlags&1028)!==0&&f!==null)f.return=h,fr=f;else for(;fr!==null;){h=fr;try{var gr=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(gr!==null){var wr=gr.memoizedProps,za=gr.memoizedState,et=h.stateNode,He=et.getSnapshotBeforeUpdate(h.elementType===h.type?wr:tu(h.type,wr),za);et.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var at=h.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Yt){Sa(h,h.return,Yt)}if(f=h.sibling,f!==null){f.return=h.return,fr=f;break}fr=h.return}return gr=N9,N9=!1,gr}function Vg(f,h,w){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var B=E=E.next;do{if((B.tag&f)===f){var G=B.destroy;B.destroy=void 0,G!==void 0&&u_(h,w,G)}B=B.next}while(B!==E)}}function ov(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&f)===f){var E=w.create;w.destroy=E()}w=w.next}while(w!==h)}}function d_(f){var h=f.ref;if(h!==null){var w=f.stateNode;switch(f.tag){case 5:f=w;break;default:f=w}typeof h=="function"?h(f):h.current=f}}function E9(f){var h=f.alternate;h!==null&&(f.alternate=null,E9(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&(delete h[xc],delete h[Ff],delete h[To],delete h[Y4],delete h[X4])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function C9(f){return f.tag===5||f.tag===3||f.tag===4}function A9(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||C9(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function f_(f,h,w){var E=f.tag;if(E===5||E===6)f=f.stateNode,h?w.nodeType===8?w.parentNode.insertBefore(f,h):w.insertBefore(f,h):(w.nodeType===8?(h=w.parentNode,h.insertBefore(f,w)):(h=w,h.appendChild(f)),w=w._reactRootContainer,w!=null||h.onclick!==null||(h.onclick=Lf));else if(E!==4&&(f=f.child,f!==null))for(f_(f,h,w),f=f.sibling;f!==null;)f_(f,h,w),f=f.sibling}function h_(f,h,w){var E=f.tag;if(E===5||E===6)f=f.stateNode,h?w.insertBefore(f,h):w.appendChild(f);else if(E!==4&&(f=f.child,f!==null))for(h_(f,h,w),f=f.sibling;f!==null;)h_(f,h,w),f=f.sibling}var oo=null,ru=!1;function zf(f,h,w){for(w=w.child;w!==null;)T9(f,h,w),w=w.sibling}function T9(f,h,w){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(ti,w)}catch{}switch(w.tag){case 5:Lo||dm(w,h);case 6:var E=oo,B=ru;oo=null,zf(f,h,w),oo=E,ru=B,oo!==null&&(ru?(f=oo,w=w.stateNode,f.nodeType===8?f.parentNode.removeChild(w):f.removeChild(w)):oo.removeChild(w.stateNode));break;case 18:oo!==null&&(ru?(f=oo,w=w.stateNode,f.nodeType===8?Pg(f.parentNode,w):f.nodeType===1&&Pg(f,w),Li(f)):Pg(oo,w.stateNode));break;case 4:E=oo,B=ru,oo=w.stateNode.containerInfo,ru=!0,zf(f,h,w),oo=E,ru=B;break;case 0:case 11:case 14:case 15:if(!Lo&&(E=w.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){B=E=E.next;do{var G=B,de=G.destroy;G=G.tag,de!==void 0&&((G&2)!==0||(G&4)!==0)&&u_(w,h,de),B=B.next}while(B!==E)}zf(f,h,w);break;case 1:if(!Lo&&(dm(w,h),E=w.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=w.memoizedProps,E.state=w.memoizedState,E.componentWillUnmount()}catch(Me){Sa(w,h,Me)}zf(f,h,w);break;case 21:zf(f,h,w);break;case 22:w.mode&1?(Lo=(E=Lo)||w.memoizedState!==null,zf(f,h,w),Lo=E):zf(f,h,w);break;default:zf(f,h,w)}}function I9(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var w=f.stateNode;w===null&&(w=f.stateNode=new zK),h.forEach(function(E){var B=JK.bind(null,f,E);w.has(E)||(w.add(E),E.then(B,B))})}}function nu(f,h){var w=h.deletions;if(w!==null)for(var E=0;E<w.length;E++){var B=w[E];try{var G=f,de=h,Me=de;e:for(;Me!==null;){switch(Me.tag){case 5:oo=Me.stateNode,ru=!1;break e;case 3:oo=Me.stateNode.containerInfo,ru=!0;break e;case 4:oo=Me.stateNode.containerInfo,ru=!0;break e}Me=Me.return}if(oo===null)throw Error(r(160));T9(G,de,B),oo=null,ru=!1;var $e=B.alternate;$e!==null&&($e.return=null),B.return=null}catch(dt){Sa(B,h,dt)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)P9(h,f),h=h.sibling}function P9(f,h){var w=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(nu(h,f),Ou(f),E&4){try{Vg(3,f,f.return),ov(3,f)}catch(wr){Sa(f,f.return,wr)}try{Vg(5,f,f.return)}catch(wr){Sa(f,f.return,wr)}}break;case 1:nu(h,f),Ou(f),E&512&&w!==null&&dm(w,w.return);break;case 5:if(nu(h,f),Ou(f),E&512&&w!==null&&dm(w,w.return),f.flags&32){var B=f.stateNode;try{st(B,"")}catch(wr){Sa(f,f.return,wr)}}if(E&4&&(B=f.stateNode,B!=null)){var G=f.memoizedProps,de=w!==null?w.memoizedProps:G,Me=f.type,$e=f.updateQueue;if(f.updateQueue=null,$e!==null)try{Me==="input"&&G.type==="radio"&&G.name!=null&&ye(B,G),Dt(Me,de);var dt=Dt(Me,G);for(de=0;de<$e.length;de+=2){var Vt=$e[de],Ht=$e[de+1];Vt==="style"?ut(B,Ht):Vt==="dangerouslySetInnerHTML"?ft(B,Ht):Vt==="children"?st(B,Ht):T(B,Vt,Ht,dt)}switch(Me){case"input":Ae(B,G);break;case"textarea":Nt(B,G);break;case"select":var Mt=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!G.multiple;var or=G.value;or!=null?nt(B,!!G.multiple,or,!1):Mt!==!!G.multiple&&(G.defaultValue!=null?nt(B,!!G.multiple,G.defaultValue,!0):nt(B,!!G.multiple,G.multiple?[]:"",!1))}B[Ff]=G}catch(wr){Sa(f,f.return,wr)}}break;case 6:if(nu(h,f),Ou(f),E&4){if(f.stateNode===null)throw Error(r(162));B=f.stateNode,G=f.memoizedProps;try{B.nodeValue=G}catch(wr){Sa(f,f.return,wr)}}break;case 3:if(nu(h,f),Ou(f),E&4&&w!==null&&w.memoizedState.isDehydrated)try{Li(h.containerInfo)}catch(wr){Sa(f,f.return,wr)}break;case 4:nu(h,f),Ou(f);break;case 13:nu(h,f),Ou(f),B=f.child,B.flags&8192&&(G=B.memoizedState!==null,B.stateNode.isHidden=G,!G||B.alternate!==null&&B.alternate.memoizedState!==null||(g_=It())),E&4&&I9(f);break;case 22:if(Vt=w!==null&&w.memoizedState!==null,f.mode&1?(Lo=(dt=Lo)||Vt,nu(h,f),Lo=dt):nu(h,f),Ou(f),E&8192){if(dt=f.memoizedState!==null,(f.stateNode.isHidden=dt)&&!Vt&&(f.mode&1)!==0)for(fr=f,Vt=f.child;Vt!==null;){for(Ht=fr=Vt;fr!==null;){switch(Mt=fr,or=Mt.child,Mt.tag){case 0:case 11:case 14:case 15:Vg(4,Mt,Mt.return);break;case 1:dm(Mt,Mt.return);var gr=Mt.stateNode;if(typeof gr.componentWillUnmount=="function"){E=Mt,w=Mt.return;try{h=E,gr.props=h.memoizedProps,gr.state=h.memoizedState,gr.componentWillUnmount()}catch(wr){Sa(E,w,wr)}}break;case 5:dm(Mt,Mt.return);break;case 22:if(Mt.memoizedState!==null){L9(Ht);continue}}or!==null?(or.return=Mt,fr=or):L9(Ht)}Vt=Vt.sibling}e:for(Vt=null,Ht=f;;){if(Ht.tag===5){if(Vt===null){Vt=Ht;try{B=Ht.stateNode,dt?(G=B.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(Me=Ht.stateNode,$e=Ht.memoizedProps.style,de=$e!=null&&$e.hasOwnProperty("display")?$e.display:null,Me.style.display=Ue("display",de))}catch(wr){Sa(f,f.return,wr)}}}else if(Ht.tag===6){if(Vt===null)try{Ht.stateNode.nodeValue=dt?"":Ht.memoizedProps}catch(wr){Sa(f,f.return,wr)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===f)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===f)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===f)break e;Vt===Ht&&(Vt=null),Ht=Ht.return}Vt===Ht&&(Vt=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}break;case 19:nu(h,f),Ou(f),E&4&&I9(f);break;case 21:break;default:nu(h,f),Ou(f)}}function Ou(f){var h=f.flags;if(h&2){try{e:{for(var w=f.return;w!==null;){if(C9(w)){var E=w;break e}w=w.return}throw Error(r(160))}switch(E.tag){case 5:var B=E.stateNode;E.flags&32&&(st(B,""),E.flags&=-33);var G=A9(f);h_(f,G,B);break;case 3:case 4:var de=E.stateNode.containerInfo,Me=A9(f);f_(f,Me,de);break;default:throw Error(r(161))}}catch($e){Sa(f,f.return,$e)}f.flags&=-3}h&4096&&(f.flags&=-4097)}function qK(f,h,w){fr=f,j9(f)}function j9(f,h,w){for(var E=(f.mode&1)!==0;fr!==null;){var B=fr,G=B.child;if(B.tag===22&&E){var de=B.memoizedState!==null||iv;if(!de){var Me=B.alternate,$e=Me!==null&&Me.memoizedState!==null||Lo;Me=iv;var dt=Lo;if(iv=de,(Lo=$e)&&!dt)for(fr=B;fr!==null;)de=fr,$e=de.child,de.tag===22&&de.memoizedState!==null?F9(B):$e!==null?($e.return=de,fr=$e):F9(B);for(;G!==null;)fr=G,j9(G),G=G.sibling;fr=B,iv=Me,Lo=dt}R9(f)}else(B.subtreeFlags&8772)!==0&&G!==null?(G.return=B,fr=G):R9(f)}}function R9(f){for(;fr!==null;){var h=fr;if((h.flags&8772)!==0){var w=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Lo||ov(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!Lo)if(w===null)E.componentDidMount();else{var B=h.elementType===h.type?w.memoizedProps:tu(h.type,w.memoizedProps);E.componentDidUpdate(B,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var G=h.updateQueue;G!==null&&wl(h,G,E);break;case 3:var de=h.updateQueue;if(de!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=h.child.stateNode;break;case 1:w=h.child.stateNode}wl(h,de,w)}break;case 5:var Me=h.stateNode;if(w===null&&h.flags&4){w=Me;var $e=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":$e.autoFocus&&w.focus();break;case"img":$e.src&&(w.src=$e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var dt=h.alternate;if(dt!==null){var Vt=dt.memoizedState;if(Vt!==null){var Ht=Vt.dehydrated;Ht!==null&&Li(Ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Lo||h.flags&512&&d_(h)}catch(Mt){Sa(h,h.return,Mt)}}if(h===f){fr=null;break}if(w=h.sibling,w!==null){w.return=h.return,fr=w;break}fr=h.return}}function L9(f){for(;fr!==null;){var h=fr;if(h===f){fr=null;break}var w=h.sibling;if(w!==null){w.return=h.return,fr=w;break}fr=h.return}}function F9(f){for(;fr!==null;){var h=fr;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{ov(4,h)}catch($e){Sa(h,w,$e)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var B=h.return;try{E.componentDidMount()}catch($e){Sa(h,B,$e)}}var G=h.return;try{d_(h)}catch($e){Sa(h,G,$e)}break;case 5:var de=h.return;try{d_(h)}catch($e){Sa(h,de,$e)}}}catch($e){Sa(h,h.return,$e)}if(h===f){fr=null;break}var Me=h.sibling;if(Me!==null){Me.return=h.return,fr=Me;break}fr=h.return}}var HK=Math.ceil,lv=O.ReactCurrentDispatcher,p_=O.ReactCurrentOwner,bc=O.ReactCurrentBatchConfig,Wn=0,Vi=null,oi=null,lo=0,Yl=0,fm=ql(0),Ni=0,Ug=null,g0=0,cv=0,m_=0,zg=null,_l=null,g_=0,hm=1/0,Fd=null,uv=!1,x_=null,$f=null,dv=!1,qf=null,fv=0,$g=0,y_=null,hv=-1,pv=0;function al(){return(Wn&6)!==0?It():hv!==-1?hv:hv=It()}function Hf(f){return(f.mode&1)===0?1:(Wn&2)!==0&&lo!==0?lo&-lo:ua.transition!==null?(pv===0&&(pv=Ws()),pv):(f=rn,f!==0||(f=window.event,f=f===void 0?16:fc(f.type)),f)}function su(f,h,w,E){if(50<$g)throw $g=0,y_=null,Error(r(185));Ri(f,w,E),((Wn&2)===0||f!==Vi)&&(f===Vi&&((Wn&2)===0&&(cv|=w),Ni===4&&Wf(f,lo)),kl(f,E),w===1&&Wn===0&&(h.mode&1)===0&&(hm=It()+500,f0&&Q()))}function kl(f,h){var w=f.callbackNode;In(f,h);var E=Tn(f,f===Vi?lo:0);if(E===0)w!==null&&Gt(w),f.callbackNode=null,f.callbackPriority=0;else if(h=E&-E,f.callbackPriority!==h){if(w!=null&&Gt(w),h===1)f.tag===0?U(O9.bind(null,f)):C(O9.bind(null,f)),G4(function(){(Wn&6)===0&&Q()}),w=null;else{switch(ia(E)){case 1:w=bn;break;case 4:w=Kr;break;case 16:w=tn;break;case 536870912:w=ji;break;default:w=tn}w=H9(w,D9.bind(null,f))}f.callbackPriority=h,f.callbackNode=w}}function D9(f,h){if(hv=-1,pv=0,(Wn&6)!==0)throw Error(r(327));var w=f.callbackNode;if(pm()&&f.callbackNode!==w)return null;var E=Tn(f,f===Vi?lo:0);if(E===0)return null;if((E&30)!==0||(E&f.expiredLanes)!==0||h)h=mv(f,E);else{h=E;var B=Wn;Wn|=2;var G=B9();(Vi!==f||lo!==h)&&(Fd=null,hm=It()+500,y0(f,h));do try{KK();break}catch(Me){M9(f,Me)}while(!0);qn(),lv.current=G,Wn=B,oi!==null?h=0:(Vi=null,lo=0,h=Ni)}if(h!==0){if(h===2&&(B=_n(f),B!==0&&(E=B,h=v_(f,B))),h===1)throw w=Ug,y0(f,0),Wf(f,E),kl(f,It()),w;if(h===6)Wf(f,E);else{if(B=f.current.alternate,(E&30)===0&&!WK(B)&&(h=mv(f,E),h===2&&(G=_n(f),G!==0&&(E=G,h=v_(f,G))),h===1))throw w=Ug,y0(f,0),Wf(f,E),kl(f,It()),w;switch(f.finishedWork=B,f.finishedLanes=E,h){case 0:case 1:throw Error(r(345));case 2:v0(f,_l,Fd);break;case 3:if(Wf(f,E),(E&130023424)===E&&(h=g_+500-It(),10<h)){if(Tn(f,0)!==0)break;if(B=f.suspendedLanes,(B&E)!==E){al(),f.pingedLanes|=f.suspendedLanes&B;break}f.timeoutHandle=Ig(v0.bind(null,f,_l,Fd),h);break}v0(f,_l,Fd);break;case 4:if(Wf(f,E),(E&4194240)===E)break;for(h=f.eventTimes,B=-1;0<E;){var de=31-De(E);G=1<<de,de=h[de],de>B&&(B=de),E&=~G}if(E=B,E=It()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*HK(E/1960))-E,10<E){f.timeoutHandle=Ig(v0.bind(null,f,_l,Fd),E);break}v0(f,_l,Fd);break;case 5:v0(f,_l,Fd);break;default:throw Error(r(329))}}}return kl(f,It()),f.callbackNode===w?D9.bind(null,f):null}function v_(f,h){var w=zg;return f.current.memoizedState.isDehydrated&&(y0(f,h).flags|=256),f=mv(f,h),f!==2&&(h=_l,_l=w,h!==null&&w_(h)),f}function w_(f){_l===null?_l=f:_l.push.apply(_l,f)}function WK(f){for(var h=f;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var B=w[E],G=B.getSnapshot;B=B.value;try{if(!Ba(G(),B))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Wf(f,h){for(h&=~m_,h&=~cv,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var w=31-De(h),E=1<<w;f[w]=-1,h&=~E}}function O9(f){if((Wn&6)!==0)throw Error(r(327));pm();var h=Tn(f,0);if((h&1)===0)return kl(f,It()),null;var w=mv(f,h);if(f.tag!==0&&w===2){var E=_n(f);E!==0&&(h=E,w=v_(f,E))}if(w===1)throw w=Ug,y0(f,0),Wf(f,h),kl(f,It()),w;if(w===6)throw Error(r(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,v0(f,_l,Fd),kl(f,It()),null}function b_(f,h){var w=Wn;Wn|=1;try{return f(h)}finally{Wn=w,Wn===0&&(hm=It()+500,f0&&Q())}}function x0(f){qf!==null&&qf.tag===0&&(Wn&6)===0&&pm();var h=Wn;Wn|=1;var w=bc.transition,E=rn;try{if(bc.transition=null,rn=1,f)return f()}finally{rn=E,bc.transition=w,Wn=h,(Wn&6)===0&&Q()}}function __(){Yl=fm.current,es(fm)}function y0(f,h){f.finishedWork=null,f.finishedLanes=0;var w=f.timeoutHandle;if(w!==-1&&(f.timeoutHandle=-1,Gy(w)),oi!==null)for(w=oi.return;w!==null;){var E=w;switch(tt(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&em();break;case 3:yc(),es(Io),es(ki),Dg();break;case 5:Lg(E);break;case 4:yc();break;case 13:es(Es);break;case 19:es(Es);break;case 10:Rs(E.type._context);break;case 22:case 23:__()}w=w.return}if(Vi=f,oi=f=Gf(f.current,null),lo=Yl=h,Ni=0,Ug=null,m_=cv=g0=0,_l=zg=null,os!==null){for(h=0;h<os.length;h++)if(w=os[h],E=w.interleaved,E!==null){w.interleaved=null;var B=E.next,G=w.pending;if(G!==null){var de=G.next;G.next=B,E.next=de}w.pending=E}os=null}return f}function M9(f,h){do{var w=oi;try{if(qn(),tm.current=rv,Bf){for(var E=Ls.memoizedState;E!==null;){var B=E.queue;B!==null&&(B.pending=null),E=E.next}Bf=!1}if(vc=0,pa=ka=Ls=null,Zc=!1,Vf=0,p_.current=null,w===null||w.return===null){Ni=1,Ug=h,oi=null;break}e:{var G=f,de=w.return,Me=w,$e=h;if(h=lo,Me.flags|=32768,$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var dt=$e,Vt=Me,Ht=Vt.tag;if((Vt.mode&1)===0&&(Ht===0||Ht===11||Ht===15)){var Mt=Vt.alternate;Mt?(Vt.updateQueue=Mt.updateQueue,Vt.memoizedState=Mt.memoizedState,Vt.lanes=Mt.lanes):(Vt.updateQueue=null,Vt.memoizedState=null)}var or=c9(de);if(or!==null){or.flags&=-257,u9(or,de,Me,G,h),or.mode&1&&l9(G,dt,h),h=or,$e=dt;var gr=h.updateQueue;if(gr===null){var wr=new Set;wr.add($e),h.updateQueue=wr}else gr.add($e);break e}else{if((h&1)===0){l9(G,dt,h),k_();break e}$e=Error(r(426))}}else if(St&&Me.mode&1){var za=c9(de);if(za!==null){(za.flags&65536)===0&&(za.flags|=256),u9(za,de,Me,G,h),Jt(um($e,Me));break e}}G=$e=um($e,Me),Ni!==4&&(Ni=2),zg===null?zg=[G]:zg.push(G),G=de;do{switch(G.tag){case 3:G.flags|=65536,h&=-h,G.lanes|=h;var et=i9(G,$e,h);cs(G,et);break e;case 1:Me=$e;var He=G.type,at=G.stateNode;if((G.flags&128)===0&&(typeof He.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&($f===null||!$f.has(at)))){G.flags|=65536,h&=-h,G.lanes|=h;var Yt=o9(G,Me,h);cs(G,Yt);break e}}G=G.return}while(G!==null)}U9(w)}catch(Nr){h=Nr,oi===w&&w!==null&&(oi=w=w.return);continue}break}while(!0)}function B9(){var f=lv.current;return lv.current=rv,f===null?rv:f}function k_(){(Ni===0||Ni===3||Ni===2)&&(Ni=4),Vi===null||(g0&268435455)===0&&(cv&268435455)===0||Wf(Vi,lo)}function mv(f,h){var w=Wn;Wn|=2;var E=B9();(Vi!==f||lo!==h)&&(Fd=null,y0(f,h));do try{GK();break}catch(B){M9(f,B)}while(!0);if(qn(),Wn=w,lv.current=E,oi!==null)throw Error(r(261));return Vi=null,lo=0,Ni}function GK(){for(;oi!==null;)V9(oi)}function KK(){for(;oi!==null&&!er();)V9(oi)}function V9(f){var h=q9(f.alternate,f,Yl);f.memoizedProps=f.pendingProps,h===null?U9(f):oi=h,p_.current=null}function U9(f){var h=f;do{var w=h.alternate;if(f=h.return,(h.flags&32768)===0){if(w=VK(w,h,Yl),w!==null){oi=w;return}}else{if(w=UK(w,h),w!==null){w.flags&=32767,oi=w;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Ni=6,oi=null;return}}if(h=h.sibling,h!==null){oi=h;return}oi=h=f}while(h!==null);Ni===0&&(Ni=5)}function v0(f,h,w){var E=rn,B=bc.transition;try{bc.transition=null,rn=1,YK(f,h,w,E)}finally{bc.transition=B,rn=E}return null}function YK(f,h,w,E){do pm();while(qf!==null);if((Wn&6)!==0)throw Error(r(327));w=f.finishedWork;var B=f.finishedLanes;if(w===null)return null;if(f.finishedWork=null,f.finishedLanes=0,w===f.current)throw Error(r(177));f.callbackNode=null,f.callbackPriority=0;var G=w.lanes|w.childLanes;if(on(f,G),f===Vi&&(oi=Vi=null,lo=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||dv||(dv=!0,H9(tn,function(){return pm(),null})),G=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||G){G=bc.transition,bc.transition=null;var de=rn;rn=1;var Me=Wn;Wn|=4,p_.current=null,$K(f,w),P9(w,f),zy(Td),uc=!!u0,Td=u0=null,f.current=w,qK(w),qt(),Wn=Me,rn=de,bc.transition=G}else f.current=w;if(dv&&(dv=!1,qf=f,fv=B),G=f.pendingLanes,G===0&&($f=null),el(w.stateNode),kl(f,It()),h!==null)for(E=f.onRecoverableError,w=0;w<h.length;w++)B=h[w],E(B.value,{componentStack:B.stack,digest:B.digest});if(uv)throw uv=!1,f=x_,x_=null,f;return(fv&1)!==0&&f.tag!==0&&pm(),G=f.pendingLanes,(G&1)!==0?f===y_?$g++:($g=0,y_=f):$g=0,Q(),null}function pm(){if(qf!==null){var f=ia(fv),h=bc.transition,w=rn;try{if(bc.transition=null,rn=16>f?16:f,qf===null)var E=!1;else{if(f=qf,qf=null,fv=0,(Wn&6)!==0)throw Error(r(331));var B=Wn;for(Wn|=4,fr=f.current;fr!==null;){var G=fr,de=G.child;if((fr.flags&16)!==0){var Me=G.deletions;if(Me!==null){for(var $e=0;$e<Me.length;$e++){var dt=Me[$e];for(fr=dt;fr!==null;){var Vt=fr;switch(Vt.tag){case 0:case 11:case 15:Vg(8,Vt,G)}var Ht=Vt.child;if(Ht!==null)Ht.return=Vt,fr=Ht;else for(;fr!==null;){Vt=fr;var Mt=Vt.sibling,or=Vt.return;if(E9(Vt),Vt===dt){fr=null;break}if(Mt!==null){Mt.return=or,fr=Mt;break}fr=or}}}var gr=G.alternate;if(gr!==null){var wr=gr.child;if(wr!==null){gr.child=null;do{var za=wr.sibling;wr.sibling=null,wr=za}while(wr!==null)}}fr=G}}if((G.subtreeFlags&2064)!==0&&de!==null)de.return=G,fr=de;else e:for(;fr!==null;){if(G=fr,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:Vg(9,G,G.return)}var et=G.sibling;if(et!==null){et.return=G.return,fr=et;break e}fr=G.return}}var He=f.current;for(fr=He;fr!==null;){de=fr;var at=de.child;if((de.subtreeFlags&2064)!==0&&at!==null)at.return=de,fr=at;else e:for(de=He;fr!==null;){if(Me=fr,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:ov(9,Me)}}catch(Nr){Sa(Me,Me.return,Nr)}if(Me===de){fr=null;break e}var Yt=Me.sibling;if(Yt!==null){Yt.return=Me.return,fr=Yt;break e}fr=Me.return}}if(Wn=B,Q(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(ti,f)}catch{}E=!0}return E}finally{rn=w,bc.transition=h}}return!1}function z9(f,h,w){h=um(w,h),h=i9(f,h,1),f=fa(f,h,1),h=al(),f!==null&&(Ri(f,1,h),kl(f,h))}function Sa(f,h,w){if(f.tag===3)z9(f,f,w);else for(;h!==null;){if(h.tag===3){z9(h,f,w);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&($f===null||!$f.has(E))){f=um(w,f),f=o9(h,f,1),h=fa(h,f,1),f=al(),h!==null&&(Ri(h,1,f),kl(h,f));break}}h=h.return}}function XK(f,h,w){var E=f.pingCache;E!==null&&E.delete(h),h=al(),f.pingedLanes|=f.suspendedLanes&w,Vi===f&&(lo&w)===w&&(Ni===4||Ni===3&&(lo&130023424)===lo&&500>It()-g_?y0(f,0):m_|=w),kl(f,h)}function $9(f,h){h===0&&((f.mode&1)===0?h=1:(h=Tr,Tr<<=1,(Tr&130023424)===0&&(Tr=4194304)));var w=al();f=ls(f,h),f!==null&&(Ri(f,h,w),kl(f,w))}function QK(f){var h=f.memoizedState,w=0;h!==null&&(w=h.retryLane),$9(f,w)}function JK(f,h){var w=0;switch(f.tag){case 13:var E=f.stateNode,B=f.memoizedState;B!==null&&(w=B.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(r(314))}E!==null&&E.delete(h),$9(f,w)}var q9;q9=function(f,h,w){if(f!==null)if(f.memoizedProps!==h.pendingProps||Io.current)bl=!0;else{if((f.lanes&w)===0&&(h.flags&128)===0)return bl=!1,BK(f,h,w);bl=(f.flags&131072)!==0}else bl=!1,St&&(h.flags&1048576)!==0&&Ye(h,we,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;av(f,h),f=h.pendingProps;var B=Of(h,ki.current);Qs(h,w),B=h0(null,h,E,f,B,w);var G=wc();return h.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Po(E)?(G=!0,jd(h)):G=!1,h.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,Si(h),B.updater=nv,h.stateNode=B,B._reactInternals=h,e_(h,E,f,w),h=s_(null,h,E,!0,G,w)):(h.tag=0,St&&G&&vt(h),sl(null,h,B,w),h=h.child),h;case 16:E=h.elementType;e:{switch(av(f,h),f=h.pendingProps,B=E._init,E=B(E._payload),h.type=E,B=h.tag=eY(E),f=tu(E,f),B){case 0:h=n_(null,h,E,f,w);break e;case 1:h=g9(null,h,E,f,w);break e;case 11:h=d9(null,h,E,f,w);break e;case 14:h=f9(null,h,E,tu(E.type,f),w);break e}throw Error(r(306,E,""))}return h;case 0:return E=h.type,B=h.pendingProps,B=h.elementType===E?B:tu(E,B),n_(f,h,E,B,w);case 1:return E=h.type,B=h.pendingProps,B=h.elementType===E?B:tu(E,B),g9(f,h,E,B,w);case 3:e:{if(x9(h),f===null)throw Error(r(387));E=h.pendingProps,G=h.memoizedState,B=G.element,jo(f,h),Bi(h,E,null,w);var de=h.memoizedState;if(E=de.element,G.isDehydrated)if(G={element:E,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},h.updateQueue.baseState=G,h.memoizedState=G,h.flags&256){B=um(Error(r(423)),h),h=y9(f,h,E,w,B);break e}else if(E!==B){B=um(Error(r(424)),h),h=y9(f,h,E,w,B);break e}else for(yt=io(h.stateNode.containerInfo.firstChild),xt=h,St=!0,Et=null,w=Ms(h,null,E,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(dr(),E===B){h=Ld(f,h,w);break e}sl(f,h,E,w)}h=h.child}return h;case 5:return Qy(h),f===null&&mr(h),E=h.type,B=h.pendingProps,G=f!==null?f.memoizedProps:null,de=B.children,Tg(E,B)?de=null:G!==null&&Tg(E,G)&&(h.flags|=32),m9(f,h),sl(f,h,de,w),h.child;case 6:return f===null&&mr(h),null;case 13:return v9(f,h,w);case 4:return Mf(h,h.stateNode.containerInfo),E=h.pendingProps,f===null?h.child=ba(h,null,E,w):sl(f,h,E,w),h.child;case 11:return E=h.type,B=h.pendingProps,B=h.elementType===E?B:tu(E,B),d9(f,h,E,B,w);case 7:return sl(f,h,h.pendingProps,w),h.child;case 8:return sl(f,h,h.pendingProps.children,w),h.child;case 12:return sl(f,h,h.pendingProps.children,w),h.child;case 10:e:{if(E=h.type._context,B=h.pendingProps,G=h.memoizedProps,de=B.value,ns(Va,E._currentValue),E._currentValue=de,G!==null)if(Ba(G.value,de)){if(G.children===B.children&&!Io.current){h=Ld(f,h,w);break e}}else for(G=h.child,G!==null&&(G.return=h);G!==null;){var Me=G.dependencies;if(Me!==null){de=G.child;for(var $e=Me.firstContext;$e!==null;){if($e.context===E){if(G.tag===1){$e=da(-1,w&-w),$e.tag=2;var dt=G.updateQueue;if(dt!==null){dt=dt.shared;var Vt=dt.pending;Vt===null?$e.next=$e:($e.next=Vt.next,Vt.next=$e),dt.pending=$e}}G.lanes|=w,$e=G.alternate,$e!==null&&($e.lanes|=w),Hn(G.return,w,h),Me.lanes|=w;break}$e=$e.next}}else if(G.tag===10)de=G.type===h.type?null:G.child;else if(G.tag===18){if(de=G.return,de===null)throw Error(r(341));de.lanes|=w,Me=de.alternate,Me!==null&&(Me.lanes|=w),Hn(de,w,h),de=G.sibling}else de=G.child;if(de!==null)de.return=G;else for(de=G;de!==null;){if(de===h){de=null;break}if(G=de.sibling,G!==null){G.return=de.return,de=G;break}de=de.return}G=de}sl(f,h,B.children,w),h=h.child}return h;case 9:return B=h.type,E=h.pendingProps.children,Qs(h,w),B=Js(B),E=E(B),h.flags|=1,sl(f,h,E,w),h.child;case 14:return E=h.type,B=tu(E,h.pendingProps),B=tu(E.type,B),f9(f,h,E,B,w);case 15:return h9(f,h,h.type,h.pendingProps,w);case 17:return E=h.type,B=h.pendingProps,B=h.elementType===E?B:tu(E,B),av(f,h),h.tag=1,Po(E)?(f=!0,jd(h)):f=!1,Qs(h,w),s9(h,E,B),e_(h,E,B,w),s_(null,h,E,!0,f,w);case 19:return b9(f,h,w);case 22:return p9(f,h,w)}throw Error(r(156,h.tag))};function H9(f,h){return At(f,h)}function ZK(f,h,w,E){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(f,h,w,E){return new ZK(f,h,w,E)}function S_(f){return f=f.prototype,!(!f||!f.isReactComponent)}function eY(f){if(typeof f=="function")return S_(f)?1:0;if(f!=null){if(f=f.$$typeof,f===F)return 11;if(f===ue)return 14}return 2}function Gf(f,h){var w=f.alternate;return w===null?(w=_c(f.tag,h,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=h,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&14680064,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,h=f.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function gv(f,h,w,E,B,G){var de=2;if(E=f,typeof f=="function")S_(f)&&(de=1);else if(typeof f=="string")de=5;else e:switch(f){case L:return w0(w.children,B,G,h);case A:de=8,B|=8;break;case N:return f=_c(12,w,h,B|2),f.elementType=N,f.lanes=G,f;case M:return f=_c(13,w,h,B),f.elementType=M,f.lanes=G,f;case Z:return f=_c(19,w,h,B),f.elementType=Z,f.lanes=G,f;case fe:return xv(w,B,G,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case D:de=10;break e;case j:de=9;break e;case F:de=11;break e;case ue:de=14;break e;case pe:de=16,E=null;break e}throw Error(r(130,f==null?f:typeof f,""))}return h=_c(de,w,h,B),h.elementType=f,h.type=E,h.lanes=G,h}function w0(f,h,w,E){return f=_c(7,f,E,h),f.lanes=w,f}function xv(f,h,w,E){return f=_c(22,f,E,h),f.elementType=fe,f.lanes=w,f.stateNode={isHidden:!1},f}function N_(f,h,w){return f=_c(6,f,null,h),f.lanes=w,f}function E_(f,h,w){return h=_c(4,f.children!==null?f.children:[],f.key,h),h.lanes=w,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function tY(f,h,w,E,B){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=E,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function C_(f,h,w,E,B,G,de,Me,$e){return f=new tY(f,h,w,Me,$e),h===1?(h=1,G===!0&&(h|=8)):h=0,G=_c(3,null,null,h),f.current=G,G.stateNode=f,G.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Si(G),f}function rY(f,h,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:E==null?null:""+E,children:f,containerInfo:h,implementation:w}}function W9(f){if(!f)return Lu;f=f._reactInternals;e:{if(Le(f)!==f||f.tag!==1)throw Error(r(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Po(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(f.tag===1){var w=f.type;if(Po(w))return Rg(f,w,h)}return h}function G9(f,h,w,E,B,G,de,Me,$e){return f=C_(w,E,!0,f,B,G,de,Me,$e),f.context=W9(null),w=f.current,E=al(),B=Hf(w),G=da(E,B),G.callback=h??null,fa(w,G,B),f.current.lanes=B,Ri(f,B,E),kl(f,E),f}function yv(f,h,w,E){var B=h.current,G=al(),de=Hf(B);return w=W9(w),h.context===null?h.context=w:h.pendingContext=w,h=da(G,de),h.payload={element:f},E=E===void 0?null:E,E!==null&&(h.callback=E),f=fa(B,h,de),f!==null&&(su(f,B,de,G),Mi(f,B,de)),de}function vv(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function K9(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<h?w:h}}function A_(f,h){K9(f,h),(f=f.alternate)&&K9(f,h)}function nY(){return null}var Y9=typeof reportError=="function"?reportError:function(f){console.error(f)};function T_(f){this._internalRoot=f}wv.prototype.render=T_.prototype.render=function(f){var h=this._internalRoot;if(h===null)throw Error(r(409));yv(f,h,null,null)},wv.prototype.unmount=T_.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var h=f.containerInfo;x0(function(){yv(null,f,null,null)}),h[Di]=null}};function wv(f){this._internalRoot=f}wv.prototype.unstable_scheduleHydration=function(f){if(f){var h=Sf();f={blockedOn:null,target:f,priority:h};for(var w=0;w<pl.length&&h!==0&&h<pl[w].priority;w++);pl.splice(w,0,f),w===0&&Ef(f)}};function I_(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function bv(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function X9(){}function sY(f,h,w,E,B){if(B){if(typeof E=="function"){var G=E;E=function(){var dt=vv(de);G.call(dt)}}var de=G9(h,E,f,0,null,!1,!1,"",X9);return f._reactRootContainer=de,f[Di]=de.current,Cd(f.nodeType===8?f.parentNode:f),x0(),de}for(;B=f.lastChild;)f.removeChild(B);if(typeof E=="function"){var Me=E;E=function(){var dt=vv($e);Me.call(dt)}}var $e=C_(f,0,!1,null,null,!1,!1,"",X9);return f._reactRootContainer=$e,f[Di]=$e.current,Cd(f.nodeType===8?f.parentNode:f),x0(function(){yv(h,$e,w,E)}),$e}function _v(f,h,w,E,B){var G=w._reactRootContainer;if(G){var de=G;if(typeof B=="function"){var Me=B;B=function(){var $e=vv(de);Me.call($e)}}yv(h,de,f,B)}else de=sY(w,h,f,B,E);return vv(de)}ku=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var w=dn(h.pendingLanes);w!==0&&(Zi(h,w|1),kl(h,It()),(Wn&6)===0&&(hm=It()+500,Q()))}break;case 13:x0(function(){var E=ls(f,1);if(E!==null){var B=al();su(E,f,1,B)}}),A_(f,1)}},Su=function(f){if(f.tag===13){var h=ls(f,134217728);if(h!==null){var w=al();su(h,f,134217728,w)}A_(f,134217728)}},kf=function(f){if(f.tag===13){var h=Hf(f),w=ls(f,h);if(w!==null){var E=al();su(w,f,h,E)}A_(f,h)}},Sf=function(){return rn},Nu=function(f,h){var w=rn;try{return rn=f,h()}finally{rn=w}},pr=function(f,h,w){switch(h){case"input":if(Ae(f,w),h=w.name,w.type==="radio"&&h!=null){for(w=f;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<w.length;h++){var E=w[h];if(E!==f&&E.form===f.form){var B=d0(E);if(!B)throw Error(r(90));oe(E),Ae(E,B)}}}break;case"textarea":Nt(f,w);break;case"select":h=w.value,h!=null&&nt(f,!!w.multiple,h,!1)}},Ss=b_,Da=x0;var aY={usingClientEntryPoint:!1,Events:[Df,Id,d0,Vr,va,b_]},qg={findFiberByHostInstance:Ru,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iY={bundleType:qg.bundleType,version:qg.version,rendererPackageName:qg.rendererPackageName,rendererConfig:qg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Qe(f),f===null?null:f.stateNode},findFiberByHostInstance:qg.findFiberByHostInstance||nY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kv.isDisabled&&kv.supportsFiber)try{ti=kv.inject(iY),gs=kv}catch{}}return Sl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aY,Sl.createPortal=function(f,h){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I_(h))throw Error(r(200));return rY(f,h,null,w)},Sl.createRoot=function(f,h){if(!I_(f))throw Error(r(299));var w=!1,E="",B=Y9;return h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(B=h.onRecoverableError)),h=C_(f,1,!1,null,null,w,!1,E,B),f[Di]=h.current,Cd(f.nodeType===8?f.parentNode:f),new T_(h)},Sl.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=Qe(h),f=f===null?null:f.stateNode,f},Sl.flushSync=function(f){return x0(f)},Sl.hydrate=function(f,h,w){if(!bv(h))throw Error(r(200));return _v(null,f,h,!0,w)},Sl.hydrateRoot=function(f,h,w){if(!I_(f))throw Error(r(405));var E=w!=null&&w.hydratedSources||null,B=!1,G="",de=Y9;if(w!=null&&(w.unstable_strictMode===!0&&(B=!0),w.identifierPrefix!==void 0&&(G=w.identifierPrefix),w.onRecoverableError!==void 0&&(de=w.onRecoverableError)),h=G9(h,null,f,1,w??null,B,!1,G,de),f[Di]=h.current,Cd(f),E)for(f=0;f<E.length;f++)w=E[f],B=w._getVersion,B=B(w._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[w,B]:h.mutableSourceEagerHydrationData.push(w,B);return new wv(h)},Sl.render=function(f,h,w){if(!bv(h))throw Error(r(200));return _v(null,f,h,!1,w)},Sl.unmountComponentAtNode=function(f){if(!bv(f))throw Error(r(40));return f._reactRootContainer?(x0(function(){_v(null,null,f,!1,function(){f._reactRootContainer=null,f[Di]=null})}),!0):!1},Sl.unstable_batchedUpdates=b_,Sl.unstable_renderSubtreeIntoContainer=function(f,h,w,E){if(!bv(w))throw Error(r(200));if(f==null||f._reactInternals===void 0)throw Error(r(38));return _v(f,h,w,!1,E)},Sl.version="18.3.1-next-f1338f8080-20240426",Sl}var sC;function SF(){if(sC)return R_.exports;sC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),R_.exports=pY(),R_.exports}var aC;function mY(){if(aC)return Sv;aC=1;var t=SF();return Sv.createRoot=t.createRoot,Sv.hydrateRoot=t.hydrateRoot,Sv}var gY=mY(),mi=SF();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i2.apply(this,arguments)}var fh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fh||(fh={}));const iC="popstate";function xY(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:i,hash:o}=n.location;return R6("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:d5(s)}return vY(e,r,null,t)}function Ta(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NF(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yY(){return Math.random().toString(36).substr(2,8)}function oC(t,e){return{usr:t.state,key:t.key,idx:e}}function R6(t,e,r,n){return r===void 0&&(r=null),i2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?U1(e):e,{state:r,key:e&&e.key||n||yY()})}function d5(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function U1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function vY(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=fh.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(i2({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function p(){o=fh.Pop;let b=d(),S=b==null?null:b-u;u=b,l&&l({action:o,location:y.location,delta:S})}function g(b,S){o=fh.Push;let P=R6(y.location,b,S);u=d()+1;let T=oC(P,u),O=y.createHref(P);try{i.pushState(T,"",O)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;s.location.assign(O)}a&&l&&l({action:o,location:y.location,delta:1})}function m(b,S){o=fh.Replace;let P=R6(y.location,b,S);u=d();let T=oC(P,u),O=y.createHref(P);i.replaceState(T,"",O),a&&l&&l({action:o,location:y.location,delta:0})}function x(b){let S=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof b=="string"?b:d5(b);return P=P.replace(/ $/,"%20"),Ta(S,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,S)}let y={get action(){return o},get location(){return t(s,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(iC,p),l=b,()=>{s.removeEventListener(iC,p),l=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let S=x(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(b){return i.go(b)}};return y}var lC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lC||(lC={}));function wY(t,e,r){return r===void 0&&(r="/"),bY(t,e,r)}function bY(t,e,r,n){let s=typeof e=="string"?U1(e):e,a=Q8(s.pathname||"/",r);if(a==null)return null;let i=EF(t);_Y(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=TF(a);o=PY(i[l],u)}return o}function EF(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(Ta(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=yh([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Ta(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),EF(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:TY(u,a.index),routesMeta:d})};return t.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of CF(a.path))s(a,i,l)}),e}function CF(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=CF(n.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function _Y(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:IY(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const kY=/^:[\w-]+$/,SY=3,NY=2,EY=1,CY=10,AY=-2,cC=t=>t==="*";function TY(t,e){let r=t.split("/"),n=r.length;return r.some(cC)&&(n+=AY),e&&(n+=NY),r.filter(s=>!cC(s)).reduce((s,a)=>s+(kY.test(a)?SY:a===""?EY:CY),n)}function IY(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function PY(t,e,r){let{routesMeta:n}=t,s={},a="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=AF({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),g=l.route;if(!p)return null;Object.assign(s,p.params),i.push({params:s,pathname:yh([a,p.pathname]),pathnameBase:DY(yh([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=yh([a,p.pathnameBase]))}return i}function AF(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=jY(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,p)=>{let{paramName:g,isOptional:m}=d;if(g==="*"){let y=o[p]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[p];return m&&!x?u[g]=void 0:u[g]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:t}}function jY(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),NF(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function TF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return NF(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Q8(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function RY(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?U1(t):t;return{pathname:r?r.startsWith("/")?r:LY(r,e):e,search:OY(n),hash:MY(s)}}function LY(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function D_(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FY(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function J8(t,e){let r=FY(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Z8(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=U1(t):(s=i2({},t),Ta(!s.pathname||!s.pathname.includes("?"),D_("?","pathname","search",s)),Ta(!s.pathname||!s.pathname.includes("#"),D_("#","pathname","hash",s)),Ta(!s.search||!s.search.includes("#"),D_("#","search","hash",s)));let a=t===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let p=e.length-1;if(!n&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}o=p>=0?e[p]:"/"}let l=RY(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const yh=t=>t.join("/").replace(/\/\/+/g,"/"),DY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const IF=["post","put","patch","delete"];new Set(IF);const VY=["get",...IF];new Set(VY);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o2.apply(this,arguments)}const e7=R.createContext(null),UY=R.createContext(null),zh=R.createContext(null),Cb=R.createContext(null),md=R.createContext({outlet:null,matches:[],isDataRoute:!1}),PF=R.createContext(null);function zY(t,e){let{relative:r}=e===void 0?{}:e;Pp()||Ta(!1);let{basename:n,navigator:s}=R.useContext(zh),{hash:a,pathname:i,search:o}=RF(t,{relative:r}),l=i;return n!=="/"&&(l=i==="/"?n:yh([n,i])),s.createHref({pathname:l,search:o,hash:a})}function Pp(){return R.useContext(Cb)!=null}function hl(){return Pp()||Ta(!1),R.useContext(Cb).location}function uC(t){Pp()||Ta(!1);let{pathname:e}=hl();return R.useMemo(()=>AF(t,TF(e)),[e,t])}function jF(t){R.useContext(zh).static||R.useLayoutEffect(t)}function Jn(){let{isDataRoute:t}=R.useContext(md);return t?nX():$Y()}function $Y(){Pp()||Ta(!1);let t=R.useContext(e7),{basename:e,future:r,navigator:n}=R.useContext(zh),{matches:s}=R.useContext(md),{pathname:a}=hl(),i=JSON.stringify(J8(s,r.v7_relativeSplatPath)),o=R.useRef(!1);return jF(()=>{o.current=!0}),R.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=Z8(u,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:yh([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,i,a,t])}const qY=R.createContext(null);function HY(t){let e=R.useContext(md).outlet;return e&&R.createElement(qY.Provider,{value:t},e)}function t7(){let{matches:t}=R.useContext(md),e=t[t.length-1];return e?e.params:{}}function RF(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=R.useContext(zh),{matches:s}=R.useContext(md),{pathname:a}=hl(),i=JSON.stringify(J8(s,n.v7_relativeSplatPath));return R.useMemo(()=>Z8(t,JSON.parse(i),a,r==="path"),[t,i,a,r])}function WY(t,e){return GY(t,e)}function GY(t,e,r,n){Pp()||Ta(!1);let{navigator:s}=R.useContext(zh),{matches:a}=R.useContext(md),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=hl(),d;if(e){var p;let b=typeof e=="string"?U1(e):e;l==="/"||(p=b.pathname)!=null&&p.startsWith(l)||Ta(!1),d=b}else d=u;let g=d.pathname||"/",m=g;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=wY(t,{pathname:m}),y=JY(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:yh([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:yh([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return e&&y?R.createElement(Cb.Provider,{value:{location:o2({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fh.Pop}},y):y}function KY(){let t=rX(),e=BY(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),r?R.createElement("pre",{style:s},r):null,null)}const YY=R.createElement(KY,null);class XY extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?R.createElement(md.Provider,{value:this.props.routeContext},R.createElement(PF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QY(t){let{routeContext:e,match:r,children:n}=t,s=R.useContext(e7);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(md.Provider,{value:e},n)}function JY(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);d>=0||Ta(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:g,errors:m}=r,x=p.route.loader&&g[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||x){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,p,g)=>{let m,x=!1,y=null,b=null;r&&(m=o&&p.route.id?o[p.route.id]:void 0,y=p.route.errorElement||YY,l&&(u<0&&g===0?(sX("route-fallback"),x=!0,b=null):u===g&&(x=!0,b=p.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,g+1)),P=()=>{let T;return m?T=y:x?T=b:p.route.Component?T=R.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=d,R.createElement(QY,{match:p,routeContext:{outlet:d,matches:S,isDataRoute:r!=null},children:T})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?R.createElement(XY,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:P(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):P()},null)}var LF=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(LF||{}),FF=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(FF||{});function ZY(t){let e=R.useContext(e7);return e||Ta(!1),e}function eX(t){let e=R.useContext(UY);return e||Ta(!1),e}function tX(t){let e=R.useContext(md);return e||Ta(!1),e}function DF(t){let e=tX(),r=e.matches[e.matches.length-1];return r.route.id||Ta(!1),r.route.id}function rX(){var t;let e=R.useContext(PF),r=eX(),n=DF();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function nX(){let{router:t}=ZY(LF.UseNavigateStable),e=DF(FF.UseNavigateStable),r=R.useRef(!1);return jF(()=>{r.current=!0}),R.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,o2({fromRouteId:e},a)))},[t,e])}const dC={};function sX(t,e,r){dC[t]||(dC[t]=!0)}function aX(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function T0(t){let{to:e,replace:r,state:n,relative:s}=t;Pp()||Ta(!1);let{future:a,static:i}=R.useContext(zh),{matches:o}=R.useContext(md),{pathname:l}=hl(),u=Jn(),d=Z8(e,J8(o,a.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return R.useEffect(()=>u(JSON.parse(p),{replace:r,state:n,relative:s}),[u,p,s,r,n]),null}function r7(t){return HY(t.context)}function Xn(t){Ta(!1)}function iX(t){let{basename:e="/",children:r=null,location:n,navigationType:s=fh.Pop,navigator:a,static:i=!1,future:o}=t;Pp()&&Ta(!1);let l=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:a,static:i,future:o2({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);typeof n=="string"&&(n=U1(n));let{pathname:d="/",search:p="",hash:g="",state:m=null,key:x="default"}=n,y=R.useMemo(()=>{let b=Q8(d,l);return b==null?null:{location:{pathname:b,search:p,hash:g,state:m,key:x},navigationType:s}},[l,d,p,g,m,x,s]);return y==null?null:R.createElement(zh.Provider,{value:u},R.createElement(Cb.Provider,{children:r,value:y}))}function fC(t){let{children:e,location:r}=t;return WY(L6(e),r)}new Promise(()=>{});function L6(t,e){e===void 0&&(e=[]);let r=[];return R.Children.forEach(t,(n,s)=>{if(!R.isValidElement(n))return;let a=[...e,s];if(n.type===R.Fragment){r.push.apply(r,L6(n.props.children,a));return}n.type!==Xn&&Ta(!1),!n.props.index||!n.props.children||Ta(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=L6(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F6(){return F6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},F6.apply(this,arguments)}function oX(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function lX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cX(t,e){return t.button===0&&(!e||e==="_self")&&!lX(t)}function D6(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function uX(t,e){let r=D6(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}const dX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fX="6";try{window.__reactRouterVersion=fX}catch{}const hX="startTransition",hC=u5[hX];function pX(t){let{basename:e,children:r,future:n,window:s}=t,a=R.useRef();a.current==null&&(a.current=xY({window:s,v5Compat:!0}));let i=a.current,[o,l]=R.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=R.useCallback(p=>{u&&hC?hC(()=>l(p)):l(p)},[l,u]);return R.useLayoutEffect(()=>i.listen(d),[i,d]),R.useEffect(()=>aX(n),[n]),R.createElement(iX,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const mX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sp=R.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:o,target:l,to:u,preventScrollReset:d,viewTransition:p}=e,g=oX(e,dX),{basename:m}=R.useContext(zh),x,y=!1;if(typeof u=="string"&&gX.test(u)&&(x=u,mX))try{let T=new URL(window.location.href),O=u.startsWith("//")?new URL(T.protocol+u):new URL(u),W=Q8(O.pathname,m);O.origin===T.origin&&W!=null?u=W+O.search+O.hash:y=!0}catch{}let b=zY(u,{relative:s}),S=xX(u,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:p});function P(T){n&&n(T),T.defaultPrevented||S(T)}return R.createElement("a",F6({},g,{href:x||b,onClick:y||a?n:P,ref:r,target:l}))});var pC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pC||(pC={}));var mC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mC||(mC={}));function xX(t,e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=e===void 0?{}:e,l=Jn(),u=hl(),d=RF(t,{relative:i});return R.useCallback(p=>{if(cX(p,r)){p.preventDefault();let g=n!==void 0?n:d5(u)===d5(d);l(t,{replace:g,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[u,l,d,n,s,r,t,a,i,o])}function yX(t){let e=R.useRef(D6(t)),r=R.useRef(!1),n=hl(),s=R.useMemo(()=>uX(n.search,r.current?null:e.current),[n.search]),a=Jn(),i=R.useCallback((o,l)=>{const u=D6(typeof o=="function"?o(s):o);r.current=!0,a("?"+u,l)},[a,s]);return[s,i]}var gC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},vX=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],i=t[r++],o=t[r++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},MF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=a>>2,p=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,m=u&63;l||(m=64,i||(g=64)),n.push(r[d],r[p],r[g],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vX(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||o==null||u==null||p==null)throw new wX;const g=a<<2|o>>4;if(n.push(g),u!==64){const m=o<<4&240|u>>2;if(n.push(m),p!==64){const x=u<<6&192|p;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wX extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bX=function(t){const e=OF(t);return MF.encodeByteArray(e,!0)},f5=function(t){return bX(t).replace(/\./g,"")},BF=function(t){try{return MF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _X(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX=()=>_X().__FIREBASE_DEFAULTS__,SX=()=>{if(typeof process>"u"||typeof gC>"u")return;const t=gC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NX=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BF(t[1]);return e&&JSON.parse(e)},Ab=()=>{try{return kX()||SX()||NX()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VF=t=>{var e,r;return(r=(e=Ab())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},n7=t=>{const e=VF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},UF=()=>{var t;return(t=Ab())===null||t===void 0?void 0:t.config},zF=t=>{var e;return(e=Ab())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EX{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[f5(JSON.stringify(r)),f5(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CX(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ti())}function AX(){var t;const e=(t=Ab())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TX(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IX(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PX(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jX(){const t=Ti();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qF(){return!AX()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HF(){try{return typeof indexedDB=="object"}catch{return!1}}function RX(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX="FirebaseError";class yu extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=LX,Object.setPrototypeOf(this,yu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K2.prototype.create)}}class K2{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?FX(a,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new yu(s,o,n)}}function FX(t,e){return t.replace(DX,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const DX=/\{\$([^}]+)}/g;function OX(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],i=e[s];if(xC(a)&&xC(i)){if(!bh(a,i))return!1}else if(a!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function xC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ix(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function ox(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function MX(t,e){const r=new BX(t,e);return r.subscribe.bind(r)}class BX{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");VX(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=O_),s.error===void 0&&(s.error=O_),s.complete===void 0&&(s.complete=O_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VX(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function O_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){return t&&t._delegate?t._delegate:t}class tf{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UX{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new EX;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e?.identifier),s=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($X(e))try{this.getOrInitializeService({instanceIdentifier:S0})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=S0){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=S0){return this.instances.has(e)}getOptions(e=S0){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const i=this.instances.get(s);return i&&e(i,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:zX(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=S0){return this.component?this.component.multipleInstances?e:S0:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zX(t){return t===S0?void 0:t}function $X(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new UX(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fn||(Fn={}));const HX={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},WX=Fn.INFO,GX={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},KX=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=GX[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s7{constructor(e){this.name=e,this._logLevel=WX,this._logHandler=KX,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HX[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...e),this._logHandler(this,Fn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...e),this._logHandler(this,Fn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...e),this._logHandler(this,Fn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...e),this._logHandler(this,Fn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...e),this._logHandler(this,Fn.ERROR,...e)}}const YX=(t,e)=>e.some(r=>t instanceof r);let yC,vC;function XX(){return yC||(yC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QX(){return vC||(vC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WF=new WeakMap,O6=new WeakMap,GF=new WeakMap,M_=new WeakMap,a7=new WeakMap;function JX(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{r(vh(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&WF.set(r,t)}).catch(()=>{}),a7.set(e,t),e}function ZX(t){if(O6.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});O6.set(t,e)}let M6={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return O6.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return vh(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eQ(t){M6=t(M6)}function tQ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(B_(this),e,...r);return GF.set(n,e.sort?e.sort():[e]),vh(n)}:QX().includes(t)?function(...e){return t.apply(B_(this),e),vh(WF.get(this))}:function(...e){return vh(t.apply(B_(this),e))}}function rQ(t){return typeof t=="function"?tQ(t):(t instanceof IDBTransaction&&ZX(t),YX(t,XX())?new Proxy(t,M6):t)}function vh(t){if(t instanceof IDBRequest)return JX(t);if(M_.has(t))return M_.get(t);const e=rQ(t);return e!==t&&(M_.set(t,e),a7.set(e,t)),e}const B_=t=>a7.get(t);function nQ(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=vh(i);return n&&i.addEventListener("upgradeneeded",l=>{n(vh(i.result),l.oldVersion,l.newVersion,vh(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const sQ=["get","getKey","getAll","getAllKeys","count"],aQ=["put","add","delete","clear"],V_=new Map;function wC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(V_.get(e))return V_.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=aQ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||sQ.includes(r)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),s&&l.done]))[0]};return V_.set(e,a),a}eQ(t=>({...t,get:(e,r,n)=>wC(e,r)||t.get(e,r,n),has:(e,r)=>!!wC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(oQ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function oQ(t){const e=t.getComponent();return e?.type==="VERSION"}const B6="@firebase/app",bC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new s7("@firebase/app"),lQ="@firebase/app-compat",cQ="@firebase/analytics-compat",uQ="@firebase/analytics",dQ="@firebase/app-check-compat",fQ="@firebase/app-check",hQ="@firebase/auth",pQ="@firebase/auth-compat",mQ="@firebase/database",gQ="@firebase/data-connect",xQ="@firebase/database-compat",yQ="@firebase/functions",vQ="@firebase/functions-compat",wQ="@firebase/installations",bQ="@firebase/installations-compat",_Q="@firebase/messaging",kQ="@firebase/messaging-compat",SQ="@firebase/performance",NQ="@firebase/performance-compat",EQ="@firebase/remote-config",CQ="@firebase/remote-config-compat",AQ="@firebase/storage",TQ="@firebase/storage-compat",IQ="@firebase/firestore",PQ="@firebase/vertexai-preview",jQ="@firebase/firestore-compat",RQ="firebase",LQ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="[DEFAULT]",FQ={[B6]:"fire-core",[lQ]:"fire-core-compat",[uQ]:"fire-analytics",[cQ]:"fire-analytics-compat",[fQ]:"fire-app-check",[dQ]:"fire-app-check-compat",[hQ]:"fire-auth",[pQ]:"fire-auth-compat",[mQ]:"fire-rtdb",[gQ]:"fire-data-connect",[xQ]:"fire-rtdb-compat",[yQ]:"fire-fn",[vQ]:"fire-fn-compat",[wQ]:"fire-iid",[bQ]:"fire-iid-compat",[_Q]:"fire-fcm",[kQ]:"fire-fcm-compat",[SQ]:"fire-perf",[NQ]:"fire-perf-compat",[EQ]:"fire-rc",[CQ]:"fire-rc-compat",[AQ]:"fire-gcs",[TQ]:"fire-gcs-compat",[IQ]:"fire-fst",[jQ]:"fire-fst-compat",[PQ]:"fire-vertex","fire-js":"fire-js",[RQ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new Map,DQ=new Map,V6=new Map;function _C(t,e){try{t.container.addComponent(e)}catch(r){rf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _h(t){const e=t.name;if(V6.has(e))return rf.debug(`There were multiple attempts to register component ${e}.`),!1;V6.set(e,t);for(const r of p5.values())_C(r,t);for(const r of DQ.values())_C(r,t);return!0}function jp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function OQ(t,e,r=h5){jp(t,e).clearInstance(r)}function cu(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wh=new K2("app","Firebase",MQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=LQ;function KF(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:h5,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw wh.create("bad-app-name",{appName:String(s)});if(r||(r=UF()),!r)throw wh.create("no-options");const a=p5.get(s);if(a){if(bh(r,a.options)&&bh(n,a.config))return a;throw wh.create("duplicate-app",{appName:s})}const i=new qX(s);for(const l of V6.values())i.addComponent(l);const o=new BQ(r,n,i);return p5.set(s,o),o}function Tb(t=h5){const e=p5.get(t);if(!e&&t===h5&&UF())return KF();if(!e)throw wh.create("no-app",{appName:t});return e}function Dc(t,e,r){var n;let s=(n=FQ[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const o=[`Unable to register library "${s}" with version "${e}":`];a&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rf.warn(o.join(" "));return}_h(new tf(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ="firebase-heartbeat-database",UQ=1,l2="firebase-heartbeat-store";let U_=null;function YF(){return U_||(U_=nQ(VQ,UQ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(l2)}catch(r){console.warn(r)}}}}).catch(t=>{throw wh.create("idb-open",{originalErrorMessage:t.message})})),U_}async function zQ(t){try{const r=(await YF()).transaction(l2),n=await r.objectStore(l2).get(XF(t));return await r.done,n}catch(e){if(e instanceof yu)rf.warn(e.message);else{const r=wh.create("idb-get",{originalErrorMessage:e?.message});rf.warn(r.message)}}}async function kC(t,e){try{const n=(await YF()).transaction(l2,"readwrite");await n.objectStore(l2).put(e,XF(t)),await n.done}catch(r){if(r instanceof yu)rf.warn(r.message);else{const n=wh.create("idb-set",{originalErrorMessage:r?.message});rf.warn(n.message)}}}function XF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Q=1024,qQ=720*60*60*1e3;class HQ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new GQ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=SC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=qQ}),this._storage.overwrite(this._heartbeatsCache))}catch(n){rf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=SC(),{heartbeatsToSend:n,unsentEntries:s}=WQ(this._heartbeatsCache.heartbeats),a=f5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return rf.warn(r),""}}}function SC(){return new Date().toISOString().substring(0,10)}function WQ(t,e=$Q){const r=[];let n=t.slice();for(const s of t){const a=r.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),NC(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),NC(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class GQ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HF()?RX().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await zQ(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return kC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return kC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function NC(t){return f5(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KQ(t){_h(new tf("platform-logger",e=>new iQ(e),"PRIVATE")),_h(new tf("heartbeat",e=>new HQ(e),"PRIVATE")),Dc(B6,bC,t),Dc(B6,bC,"esm2017"),Dc("fire-js","")}KQ("");var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G0,QF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,A){function N(){}N.prototype=A.prototype,L.D=A.prototype,L.prototype=new N,L.prototype.constructor=L,L.C=function(D,j,F){for(var M=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)M[Z-2]=arguments[Z];return A.prototype[j].apply(D,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,A,N){N||(N=0);var D=Array(16);if(typeof A=="string")for(var j=0;16>j;++j)D[j]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(j=0;16>j;++j)D[j]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=L.g[0],N=L.g[1],j=L.g[2];var F=L.g[3],M=A+(F^N&(j^F))+D[0]+3614090360&4294967295;A=N+(M<<7&4294967295|M>>>25),M=F+(j^A&(N^j))+D[1]+3905402710&4294967295,F=A+(M<<12&4294967295|M>>>20),M=j+(N^F&(A^N))+D[2]+606105819&4294967295,j=F+(M<<17&4294967295|M>>>15),M=N+(A^j&(F^A))+D[3]+3250441966&4294967295,N=j+(M<<22&4294967295|M>>>10),M=A+(F^N&(j^F))+D[4]+4118548399&4294967295,A=N+(M<<7&4294967295|M>>>25),M=F+(j^A&(N^j))+D[5]+1200080426&4294967295,F=A+(M<<12&4294967295|M>>>20),M=j+(N^F&(A^N))+D[6]+2821735955&4294967295,j=F+(M<<17&4294967295|M>>>15),M=N+(A^j&(F^A))+D[7]+4249261313&4294967295,N=j+(M<<22&4294967295|M>>>10),M=A+(F^N&(j^F))+D[8]+1770035416&4294967295,A=N+(M<<7&4294967295|M>>>25),M=F+(j^A&(N^j))+D[9]+2336552879&4294967295,F=A+(M<<12&4294967295|M>>>20),M=j+(N^F&(A^N))+D[10]+4294925233&4294967295,j=F+(M<<17&4294967295|M>>>15),M=N+(A^j&(F^A))+D[11]+2304563134&4294967295,N=j+(M<<22&4294967295|M>>>10),M=A+(F^N&(j^F))+D[12]+1804603682&4294967295,A=N+(M<<7&4294967295|M>>>25),M=F+(j^A&(N^j))+D[13]+4254626195&4294967295,F=A+(M<<12&4294967295|M>>>20),M=j+(N^F&(A^N))+D[14]+2792965006&4294967295,j=F+(M<<17&4294967295|M>>>15),M=N+(A^j&(F^A))+D[15]+1236535329&4294967295,N=j+(M<<22&4294967295|M>>>10),M=A+(j^F&(N^j))+D[1]+4129170786&4294967295,A=N+(M<<5&4294967295|M>>>27),M=F+(N^j&(A^N))+D[6]+3225465664&4294967295,F=A+(M<<9&4294967295|M>>>23),M=j+(A^N&(F^A))+D[11]+643717713&4294967295,j=F+(M<<14&4294967295|M>>>18),M=N+(F^A&(j^F))+D[0]+3921069994&4294967295,N=j+(M<<20&4294967295|M>>>12),M=A+(j^F&(N^j))+D[5]+3593408605&4294967295,A=N+(M<<5&4294967295|M>>>27),M=F+(N^j&(A^N))+D[10]+38016083&4294967295,F=A+(M<<9&4294967295|M>>>23),M=j+(A^N&(F^A))+D[15]+3634488961&4294967295,j=F+(M<<14&4294967295|M>>>18),M=N+(F^A&(j^F))+D[4]+3889429448&4294967295,N=j+(M<<20&4294967295|M>>>12),M=A+(j^F&(N^j))+D[9]+568446438&4294967295,A=N+(M<<5&4294967295|M>>>27),M=F+(N^j&(A^N))+D[14]+3275163606&4294967295,F=A+(M<<9&4294967295|M>>>23),M=j+(A^N&(F^A))+D[3]+4107603335&4294967295,j=F+(M<<14&4294967295|M>>>18),M=N+(F^A&(j^F))+D[8]+1163531501&4294967295,N=j+(M<<20&4294967295|M>>>12),M=A+(j^F&(N^j))+D[13]+2850285829&4294967295,A=N+(M<<5&4294967295|M>>>27),M=F+(N^j&(A^N))+D[2]+4243563512&4294967295,F=A+(M<<9&4294967295|M>>>23),M=j+(A^N&(F^A))+D[7]+1735328473&4294967295,j=F+(M<<14&4294967295|M>>>18),M=N+(F^A&(j^F))+D[12]+2368359562&4294967295,N=j+(M<<20&4294967295|M>>>12),M=A+(N^j^F)+D[5]+4294588738&4294967295,A=N+(M<<4&4294967295|M>>>28),M=F+(A^N^j)+D[8]+2272392833&4294967295,F=A+(M<<11&4294967295|M>>>21),M=j+(F^A^N)+D[11]+1839030562&4294967295,j=F+(M<<16&4294967295|M>>>16),M=N+(j^F^A)+D[14]+4259657740&4294967295,N=j+(M<<23&4294967295|M>>>9),M=A+(N^j^F)+D[1]+2763975236&4294967295,A=N+(M<<4&4294967295|M>>>28),M=F+(A^N^j)+D[4]+1272893353&4294967295,F=A+(M<<11&4294967295|M>>>21),M=j+(F^A^N)+D[7]+4139469664&4294967295,j=F+(M<<16&4294967295|M>>>16),M=N+(j^F^A)+D[10]+3200236656&4294967295,N=j+(M<<23&4294967295|M>>>9),M=A+(N^j^F)+D[13]+681279174&4294967295,A=N+(M<<4&4294967295|M>>>28),M=F+(A^N^j)+D[0]+3936430074&4294967295,F=A+(M<<11&4294967295|M>>>21),M=j+(F^A^N)+D[3]+3572445317&4294967295,j=F+(M<<16&4294967295|M>>>16),M=N+(j^F^A)+D[6]+76029189&4294967295,N=j+(M<<23&4294967295|M>>>9),M=A+(N^j^F)+D[9]+3654602809&4294967295,A=N+(M<<4&4294967295|M>>>28),M=F+(A^N^j)+D[12]+3873151461&4294967295,F=A+(M<<11&4294967295|M>>>21),M=j+(F^A^N)+D[15]+530742520&4294967295,j=F+(M<<16&4294967295|M>>>16),M=N+(j^F^A)+D[2]+3299628645&4294967295,N=j+(M<<23&4294967295|M>>>9),M=A+(j^(N|~F))+D[0]+4096336452&4294967295,A=N+(M<<6&4294967295|M>>>26),M=F+(N^(A|~j))+D[7]+1126891415&4294967295,F=A+(M<<10&4294967295|M>>>22),M=j+(A^(F|~N))+D[14]+2878612391&4294967295,j=F+(M<<15&4294967295|M>>>17),M=N+(F^(j|~A))+D[5]+4237533241&4294967295,N=j+(M<<21&4294967295|M>>>11),M=A+(j^(N|~F))+D[12]+1700485571&4294967295,A=N+(M<<6&4294967295|M>>>26),M=F+(N^(A|~j))+D[3]+2399980690&4294967295,F=A+(M<<10&4294967295|M>>>22),M=j+(A^(F|~N))+D[10]+4293915773&4294967295,j=F+(M<<15&4294967295|M>>>17),M=N+(F^(j|~A))+D[1]+2240044497&4294967295,N=j+(M<<21&4294967295|M>>>11),M=A+(j^(N|~F))+D[8]+1873313359&4294967295,A=N+(M<<6&4294967295|M>>>26),M=F+(N^(A|~j))+D[15]+4264355552&4294967295,F=A+(M<<10&4294967295|M>>>22),M=j+(A^(F|~N))+D[6]+2734768916&4294967295,j=F+(M<<15&4294967295|M>>>17),M=N+(F^(j|~A))+D[13]+1309151649&4294967295,N=j+(M<<21&4294967295|M>>>11),M=A+(j^(N|~F))+D[4]+4149444226&4294967295,A=N+(M<<6&4294967295|M>>>26),M=F+(N^(A|~j))+D[11]+3174756917&4294967295,F=A+(M<<10&4294967295|M>>>22),M=j+(A^(F|~N))+D[2]+718787259&4294967295,j=F+(M<<15&4294967295|M>>>17),M=N+(F^(j|~A))+D[9]+3951481745&4294967295,L.g[0]=L.g[0]+A&4294967295,L.g[1]=L.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,L.g[2]=L.g[2]+j&4294967295,L.g[3]=L.g[3]+F&4294967295}n.prototype.u=function(L,A){A===void 0&&(A=L.length);for(var N=A-this.blockSize,D=this.B,j=this.h,F=0;F<A;){if(j==0)for(;F<=N;)s(this,L,F),F+=this.blockSize;if(typeof L=="string"){for(;F<A;)if(D[j++]=L.charCodeAt(F++),j==this.blockSize){s(this,D),j=0;break}}else for(;F<A;)if(D[j++]=L[F++],j==this.blockSize){s(this,D),j=0;break}}this.h=j,this.o+=A},n.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var A=1;A<L.length-8;++A)L[A]=0;var N=8*this.o;for(A=L.length-8;A<L.length;++A)L[A]=N&255,N/=256;for(this.u(L),L=Array(16),A=N=0;4>A;++A)for(var D=0;32>D;D+=8)L[N++]=this.g[A]>>>D&255;return L};function a(L,A){var N=o;return Object.prototype.hasOwnProperty.call(N,L)?N[L]:N[L]=A(L)}function i(L,A){this.h=A;for(var N=[],D=!0,j=L.length-1;0<=j;j--){var F=L[j]|0;D&&F==A||(N[j]=F,D=!1)}this.g=N}var o={};function l(L){return-128<=L&&128>L?a(L,function(A){return new i([A|0],0>A?-1:0)}):new i([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return p;if(0>L)return b(u(-L));for(var A=[],N=1,D=0;L>=N;D++)A[D]=L/N|0,N*=4294967296;return new i(A,0)}function d(L,A){if(L.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(L.charAt(0)=="-")return b(d(L.substring(1),A));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(A,8)),D=p,j=0;j<L.length;j+=8){var F=Math.min(8,L.length-j),M=parseInt(L.substring(j,j+F),A);8>F?(F=u(Math.pow(A,F)),D=D.j(F).add(u(M))):(D=D.j(N),D=D.add(u(M)))}return D}var p=l(0),g=l(1),m=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-b(this).m();for(var L=0,A=1,N=0;N<this.g.length;N++){var D=this.i(N);L+=(0<=D?D:4294967296+D)*A,A*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(x(this))return"0";if(y(this))return"-"+b(this).toString(L);for(var A=u(Math.pow(L,6)),N=this,D="";;){var j=O(N,A).g;N=S(N,j.j(A));var F=((0<N.g.length?N.g[0]:N.h)>>>0).toString(L);if(N=j,x(N))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function x(L){if(L.h!=0)return!1;for(var A=0;A<L.g.length;A++)if(L.g[A]!=0)return!1;return!0}function y(L){return L.h==-1}t.l=function(L){return L=S(this,L),y(L)?-1:x(L)?0:1};function b(L){for(var A=L.g.length,N=[],D=0;D<A;D++)N[D]=~L.g[D];return new i(N,~L.h).add(g)}t.abs=function(){return y(this)?b(this):this},t.add=function(L){for(var A=Math.max(this.g.length,L.g.length),N=[],D=0,j=0;j<=A;j++){var F=D+(this.i(j)&65535)+(L.i(j)&65535),M=(F>>>16)+(this.i(j)>>>16)+(L.i(j)>>>16);D=M>>>16,F&=65535,M&=65535,N[j]=M<<16|F}return new i(N,N[N.length-1]&-2147483648?-1:0)};function S(L,A){return L.add(b(A))}t.j=function(L){if(x(this)||x(L))return p;if(y(this))return y(L)?b(this).j(b(L)):b(b(this).j(L));if(y(L))return b(this.j(b(L)));if(0>this.l(m)&&0>L.l(m))return u(this.m()*L.m());for(var A=this.g.length+L.g.length,N=[],D=0;D<2*A;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(var j=0;j<L.g.length;j++){var F=this.i(D)>>>16,M=this.i(D)&65535,Z=L.i(j)>>>16,ue=L.i(j)&65535;N[2*D+2*j]+=M*ue,P(N,2*D+2*j),N[2*D+2*j+1]+=F*ue,P(N,2*D+2*j+1),N[2*D+2*j+1]+=M*Z,P(N,2*D+2*j+1),N[2*D+2*j+2]+=F*Z,P(N,2*D+2*j+2)}for(D=0;D<A;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=A;D<2*A;D++)N[D]=0;return new i(N,0)};function P(L,A){for(;(L[A]&65535)!=L[A];)L[A+1]+=L[A]>>>16,L[A]&=65535,A++}function T(L,A){this.g=L,this.h=A}function O(L,A){if(x(A))throw Error("division by zero");if(x(L))return new T(p,p);if(y(L))return A=O(b(L),A),new T(b(A.g),b(A.h));if(y(A))return A=O(L,b(A)),new T(b(A.g),A.h);if(30<L.g.length){if(y(L)||y(A))throw Error("slowDivide_ only works with positive integers.");for(var N=g,D=A;0>=D.l(L);)N=W(N),D=W(D);var j=Y(N,1),F=Y(D,1);for(D=Y(D,2),N=Y(N,2);!x(D);){var M=F.add(D);0>=M.l(L)&&(j=j.add(N),F=M),D=Y(D,1),N=Y(N,1)}return A=S(L,j.j(A)),new T(j,A)}for(j=p;0<=L.l(A);){for(N=Math.max(1,Math.floor(L.m()/A.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=u(N),M=F.j(A);y(M)||0<M.l(L);)N-=D,F=u(N),M=F.j(A);x(F)&&(F=g),j=j.add(F),L=S(L,M)}return new T(j,L)}t.A=function(L){return O(this,L).h},t.and=function(L){for(var A=Math.max(this.g.length,L.g.length),N=[],D=0;D<A;D++)N[D]=this.i(D)&L.i(D);return new i(N,this.h&L.h)},t.or=function(L){for(var A=Math.max(this.g.length,L.g.length),N=[],D=0;D<A;D++)N[D]=this.i(D)|L.i(D);return new i(N,this.h|L.h)},t.xor=function(L){for(var A=Math.max(this.g.length,L.g.length),N=[],D=0;D<A;D++)N[D]=this.i(D)^L.i(D);return new i(N,this.h^L.h)};function W(L){for(var A=L.g.length+1,N=[],D=0;D<A;D++)N[D]=L.i(D)<<1|L.i(D-1)>>>31;return new i(N,L.h)}function Y(L,A){var N=A>>5;A%=32;for(var D=L.g.length-N,j=[],F=0;F<D;F++)j[F]=0<A?L.i(F+N)>>>A|L.i(F+N+1)<<32-A:L.i(F+N);return new i(j,L.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,QF=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,G0=i}).apply(typeof EC<"u"?EC:typeof self<"u"?self:typeof window<"u"?window:{});var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JF,lx,ZF,kw,U6,eD,tD,rD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,q,ee){return k==Array.prototype||k==Object.prototype||(k[q]=ee.value),k};function r(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nv=="object"&&Nv];for(var q=0;q<k.length;++q){var ee=k[q];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}var n=r(this);function s(k,q){if(q)e:{var ee=n;k=k.split(".");for(var be=0;be<k.length-1;be++){var Ke=k[be];if(!(Ke in ee))break e;ee=ee[Ke]}k=k[k.length-1],be=ee[k],q=q(be),q!=be&&q!=null&&e(ee,k,{configurable:!0,writable:!0,value:q})}}function a(k,q){k instanceof String&&(k+="");var ee=0,be=!1,Ke={next:function(){if(!be&&ee<k.length){var mt=ee++;return{value:q(mt,k[mt]),done:!1}}return be=!0,{done:!0,value:void 0}}};return Ke[Symbol.iterator]=function(){return Ke},Ke}s("Array.prototype.values",function(k){return k||function(){return a(this,function(q,ee){return ee})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(k){var q=typeof k;return q=q!="object"?q:k?Array.isArray(k)?"array":q:"null",q=="array"||q=="object"&&typeof k.length=="number"}function u(k){var q=typeof k;return q=="object"&&k!=null||q=="function"}function d(k,q,ee){return k.call.apply(k.bind,arguments)}function p(k,q,ee){if(!k)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var Ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ke,be),k.apply(q,Ke)}}return function(){return k.apply(q,arguments)}}function g(k,q,ee){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(k,q){var ee=Array.prototype.slice.call(arguments,1);return function(){var be=ee.slice();return be.push.apply(be,arguments),k.apply(this,be)}}function x(k,q){function ee(){}ee.prototype=q.prototype,k.aa=q.prototype,k.prototype=new ee,k.prototype.constructor=k,k.Qb=function(be,Ke,mt){for(var zt=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)zt[Un-2]=arguments[Un];return q.prototype[Ke].apply(be,zt)}}function y(k){const q=k.length;if(0<q){const ee=Array(q);for(let be=0;be<q;be++)ee[be]=k[be];return ee}return[]}function b(k,q){for(let ee=1;ee<arguments.length;ee++){const be=arguments[ee];if(l(be)){const Ke=k.length||0,mt=be.length||0;k.length=Ke+mt;for(let zt=0;zt<mt;zt++)k[Ke+zt]=be[zt]}else k.push(be)}}class S{constructor(q,ee){this.i=q,this.j=ee,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function P(k){return/^[\s\xa0]*$/.test(k)}function T(){var k=o.navigator;return k&&(k=k.userAgent)?k:""}function O(k){return O[" "](k),k}O[" "]=function(){};var W=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function Y(k,q,ee){for(const be in k)q.call(ee,k[be],be,k)}function L(k,q){for(const ee in k)q.call(void 0,k[ee],ee,k)}function A(k){const q={};for(const ee in k)q[ee]=k[ee];return q}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(k,q){let ee,be;for(let Ke=1;Ke<arguments.length;Ke++){be=arguments[Ke];for(ee in be)k[ee]=be[ee];for(let mt=0;mt<N.length;mt++)ee=N[mt],Object.prototype.hasOwnProperty.call(be,ee)&&(k[ee]=be[ee])}}function j(k){var q=1;k=k.split(":");const ee=[];for(;0<q&&k.length;)ee.push(k.shift()),q--;return k.length&&ee.push(k.join(":")),ee}function F(k){o.setTimeout(()=>{throw k},0)}function M(){var k=H;let q=null;return k.g&&(q=k.g,k.g=k.g.next,k.g||(k.h=null),q.next=null),q}class Z{constructor(){this.h=this.g=null}add(q,ee){const be=ue.get();be.set(q,ee),this.h?this.h.next=be:this.g=be,this.h=be}}var ue=new S(()=>new pe,k=>k.reset());class pe{constructor(){this.next=this.g=this.h=null}set(q,ee){this.h=q,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,te=!1,H=new Z,ie=()=>{const k=o.Promise.resolve(void 0);fe=()=>{k.then(K)}};var K=()=>{for(var k;k=M();){try{k.h.call(k.g)}catch(ee){F(ee)}var q=ue;q.j(k),100>q.h&&(q.h++,k.next=q.g,q.g=k)}te=!1};function I(){this.s=this.s,this.C=this.C}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(k,q){this.type=k,this.g=this.target=q,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var k=!1,q=Object.defineProperty({},"passive",{get:function(){k=!0}});try{const ee=()=>{};o.addEventListener("test",ee,q),o.removeEventListener("test",ee,q)}catch{}return k})();function J(k,q){if(z.call(this,k?k.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,k){var ee=this.type=k.type,be=k.changedTouches&&k.changedTouches.length?k.changedTouches[0]:null;if(this.target=k.target||k.srcElement,this.g=q,q=k.relatedTarget){if(W){e:{try{O(q.nodeName);var Ke=!0;break e}catch{}Ke=!1}Ke||(q=null)}}else ee=="mouseover"?q=k.fromElement:ee=="mouseout"&&(q=k.toElement);this.relatedTarget=q,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0),this.button=k.button,this.key=k.key||"",this.ctrlKey=k.ctrlKey,this.altKey=k.altKey,this.shiftKey=k.shiftKey,this.metaKey=k.metaKey,this.pointerId=k.pointerId||0,this.pointerType=typeof k.pointerType=="string"?k.pointerType:se[k.pointerType]||"",this.state=k.state,this.i=k,k.defaultPrevented&&J.aa.h.call(this)}}x(J,z);var se={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var k=this.i;k.preventDefault?k.preventDefault():k.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ve=0;function xe(k,q,ee,be,Ke){this.listener=k,this.proxy=null,this.src=q,this.type=ee,this.capture=!!be,this.ha=Ke,this.key=++ve,this.da=this.fa=!1}function Ee(k){k.da=!0,k.listener=null,k.proxy=null,k.src=null,k.ha=null}function ke(k){this.src=k,this.g={},this.h=0}ke.prototype.add=function(k,q,ee,be,Ke){var mt=k.toString();k=this.g[mt],k||(k=this.g[mt]=[],this.h++);var zt=Fe(k,q,be,Ke);return-1<zt?(q=k[zt],ee||(q.fa=!1)):(q=new xe(q,this.src,mt,!!be,Ke),q.fa=ee,k.push(q)),q};function oe(k,q){var ee=q.type;if(ee in k.g){var be=k.g[ee],Ke=Array.prototype.indexOf.call(be,q,void 0),mt;(mt=0<=Ke)&&Array.prototype.splice.call(be,Ke,1),mt&&(Ee(q),k.g[ee].length==0&&(delete k.g[ee],k.h--))}}function Fe(k,q,ee,be){for(var Ke=0;Ke<k.length;++Ke){var mt=k[Ke];if(!mt.da&&mt.listener==q&&mt.capture==!!ee&&mt.ha==be)return Ke}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),ne={};function ye(k,q,ee,be,Ke){if(Array.isArray(q)){for(var mt=0;mt<q.length;mt++)ye(k,q[mt],ee,be,Ke);return null}return ee=_t(ee),k&&k[le]?k.K(q,ee,u(be)?!!be.capture:!1,Ke):Ae(k,q,ee,!1,be,Ke)}function Ae(k,q,ee,be,Ke,mt){if(!q)throw Error("Invalid event type");var zt=u(Ke)?!!Ke.capture:!!Ke,Un=Ct(k);if(Un||(k[Pe]=Un=new ke(k)),ee=Un.add(q,ee,be,zt,mt),ee.proxy)return ee;if(be=Be(),ee.proxy=be,be.src=k,be.listener=ee,k.addEventListener)X||(Ke=zt),Ke===void 0&&(Ke=!1),k.addEventListener(q.toString(),be,Ke);else if(k.attachEvent)k.attachEvent(nt(q.toString()),be);else if(k.addListener&&k.removeListener)k.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return ee}function Be(){function k(ee){return q.call(k.src,k.listener,ee)}const q=Lt;return k}function Oe(k,q,ee,be,Ke){if(Array.isArray(q))for(var mt=0;mt<q.length;mt++)Oe(k,q[mt],ee,be,Ke);else be=u(be)?!!be.capture:!!be,ee=_t(ee),k&&k[le]?(k=k.i,q=String(q).toString(),q in k.g&&(mt=k.g[q],ee=Fe(mt,ee,be,Ke),-1<ee&&(Ee(mt[ee]),Array.prototype.splice.call(mt,ee,1),mt.length==0&&(delete k.g[q],k.h--)))):k&&(k=Ct(k))&&(q=k.g[q.toString()],k=-1,q&&(k=Fe(q,ee,be,Ke)),(ee=-1<k?q[k]:null)&&pt(ee))}function pt(k){if(typeof k!="number"&&k&&!k.da){var q=k.src;if(q&&q[le])oe(q.i,k);else{var ee=k.type,be=k.proxy;q.removeEventListener?q.removeEventListener(ee,be,k.capture):q.detachEvent?q.detachEvent(nt(ee),be):q.addListener&&q.removeListener&&q.removeListener(be),(ee=Ct(q))?(oe(ee,k),ee.h==0&&(ee.src=null,q[Pe]=null)):Ee(k)}}}function nt(k){return k in ne?ne[k]:ne[k]="on"+k}function Lt(k,q){if(k.da)k=!0;else{q=new J(q,this);var ee=k.listener,be=k.ha||k.src;k.fa&&pt(k),k=ee.call(be,q)}return k}function Ct(k){return k=k[Pe],k instanceof ke?k:null}var Nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(k){return typeof k=="function"?k:(k[Nt]||(k[Nt]=function(q){return k.handleEvent(q)}),k[Nt])}function ot(){I.call(this),this.i=new ke(this),this.M=this,this.F=null}x(ot,I),ot.prototype[le]=!0,ot.prototype.removeEventListener=function(k,q,ee,be){Oe(this,k,q,ee,be)};function Bt(k,q){var ee,be=k.F;if(be)for(ee=[];be;be=be.F)ee.push(be);if(k=k.M,be=q.type||q,typeof q=="string")q=new z(q,k);else if(q instanceof z)q.target=q.target||k;else{var Ke=q;q=new z(be,k),D(q,Ke)}if(Ke=!0,ee)for(var mt=ee.length-1;0<=mt;mt--){var zt=q.g=ee[mt];Ke=Ot(zt,be,!0,q)&&Ke}if(zt=q.g=k,Ke=Ot(zt,be,!0,q)&&Ke,Ke=Ot(zt,be,!1,q)&&Ke,ee)for(mt=0;mt<ee.length;mt++)zt=q.g=ee[mt],Ke=Ot(zt,be,!1,q)&&Ke}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var k=this.i,q;for(q in k.g){for(var ee=k.g[q],be=0;be<ee.length;be++)Ee(ee[be]);delete k.g[q],k.h--}}this.F=null},ot.prototype.K=function(k,q,ee,be){return this.i.add(String(k),q,!1,ee,be)},ot.prototype.L=function(k,q,ee,be){return this.i.add(String(k),q,!0,ee,be)};function Ot(k,q,ee,be){if(q=k.i.g[String(q)],!q)return!0;q=q.concat();for(var Ke=!0,mt=0;mt<q.length;++mt){var zt=q[mt];if(zt&&!zt.da&&zt.capture==ee){var Un=zt.listener,Ps=zt.ha||zt.src;zt.fa&&oe(k.i,zt),Ke=Un.call(Ps,be)!==!1&&Ke}}return Ke&&!be.defaultPrevented}function ft(k,q,ee){if(typeof k=="function")ee&&(k=g(k,ee));else if(k&&typeof k.handleEvent=="function")k=g(k.handleEvent,k);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:o.setTimeout(k,q||0)}function st(k){k.g=ft(()=>{k.g=null,k.i&&(k.i=!1,st(k))},k.l);const q=k.h;k.h=null,k.m.apply(null,q)}class wt extends I{constructor(q,ee){super(),this.m=q,this.l=ee,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(k){I.call(this),this.h=k,this.g={}}x(me,I);var Ue=[];function ut(k){Y(k.g,function(q,ee){this.g.hasOwnProperty(ee)&&pt(q)},k),k.g={}}me.prototype.N=function(){me.aa.N.call(this),ut(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=o.JSON.stringify,nr=o.JSON.parse,Dt=class{stringify(k){return o.JSON.stringify(k,void 0)}parse(k){return o.JSON.parse(k,void 0)}};function $t(){}$t.prototype.h=null;function jt(k){return k.h||(k.h=k.i())}function pr(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function an(){z.call(this,"d")}x(an,z);function kr(){z.call(this,"c")}x(kr,z);var Vr={},va=null;function Ss(){return va=va||new ot}Vr.La="serverreachability";function Da(k){z.call(this,Vr.La,k)}x(Da,z);function Hs(k){const q=Ss();Bt(q,new Da(q))}Vr.STAT_EVENT="statevent";function vr(k,q){z.call(this,Vr.STAT_EVENT,k),this.stat=q}x(vr,z);function pn(k){const q=Ss();Bt(q,new vr(q,k))}Vr.Ma="timingevent";function ei(k,q){z.call(this,Vr.Ma,k),this.size=q}x(ei,z);function Zn(k,q){if(typeof k!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){k()},q)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function Ln(k,q,ee,be,Ke,mt){k.info(function(){if(k.g)if(mt)for(var zt="",Un=mt.split("&"),Ps=0;Ps<Un.length;Ps++){var mn=Un[Ps].split("=");if(1<mn.length){var kn=mn[0];mn=mn[1];var $n=kn.split("_");zt=2<=$n.length&&$n[1]=="type"?zt+(kn+"="+mn+"&"):zt+(kn+"=redacted&")}}else zt=null;else zt=mt;return"XMLHTTP REQ ("+be+") [attempt "+Ke+"]: "+q+`
`+ee+`
`+zt})}function en(k,q,ee,be,Ke,mt,zt){k.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+Ke+"]: "+q+`
`+ee+`
`+mt+" "+zt})}function ce(k,q,ee,be){k.info(function(){return"XMLHTTP TEXT ("+q+"): "+Se(k,ee)+(be?" "+be:"")})}function je(k,q){k.info(function(){return"TIMEOUT: "+q})}Os.prototype.info=function(){};function Se(k,q){if(!k.g)return q;if(!q)return null;try{var ee=JSON.parse(q);if(ee){for(k=0;k<ee.length;k++)if(Array.isArray(ee[k])){var be=ee[k];if(!(2>be.length)){var Ke=be[1];if(Array.isArray(Ke)&&!(1>Ke.length)){var mt=Ke[0];if(mt!="noop"&&mt!="stop"&&mt!="close")for(var zt=1;zt<Ke.length;zt++)Ke[zt]=""}}}}return Ut(ee)}catch{return q}}var Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Le;function Ge(){}x(Ge,$t),Ge.prototype.g=function(){return new XMLHttpRequest},Ge.prototype.i=function(){return{}},Le=new Ge;function lt(k,q,ee,be){this.j=k,this.i=q,this.l=ee,this.R=be||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xe}function Xe(){this.i=null,this.g="",this.h=!1}var Qe={},rt={};function At(k,q,ee){k.L=1,k.v=Zi(_n(q)),k.m=ee,k.P=!0,Gt(k,null)}function Gt(k,q){k.F=Date.now(),It(k),k.A=_n(k.v);var ee=k.A,be=k.R;Array.isArray(be)||(be=[String(be)]),Lr(ee.i,"t",be),k.C=0,ee=k.j.J,k.h=new Xe,k.g=Ul(k.j,ee?q:null,!k.m),0<k.O&&(k.M=new wt(g(k.Y,k,k.g),k.O)),q=k.U,ee=k.g,be=k.ca;var Ke="readystatechange";Array.isArray(Ke)||(Ke&&(Ue[0]=Ke.toString()),Ke=Ue);for(var mt=0;mt<Ke.length;mt++){var zt=ye(ee,Ke[mt],be||q.handleEvent,!1,q.h||q);if(!zt)break;q.g[zt.key]=zt}q=k.H?A(k.H):{},k.m?(k.u||(k.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",k.g.ea(k.A,k.u,k.m,q)):(k.u="GET",k.g.ea(k.A,k.u,null,q)),Hs(),Ln(k.i,k.u,k.A,k.l,k.R,k.m)}lt.prototype.ca=function(k){k=k.target;const q=this.M;q&&ri(k)==3?q.j():this.Y(k)},lt.prototype.Y=function(k){try{if(k==this.g)e:{const $n=ri(this.g);var q=this.g.Ba();const Fi=this.g.Z();if(!(3>$n)&&($n!=3||this.g&&(this.h.h||this.g.oa()||Wc(this.g)))){this.J||$n!=4||q==7||(q==8||0>=Fi?Hs(3):Hs(2)),bn(this);var ee=this.g.Z();this.X=ee;t:if(er(this)){var be=Wc(this.g);k="";var Ke=be.length,mt=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Kr(this);var zt="";break t}this.h.i=new o.TextDecoder}for(q=0;q<Ke;q++)this.h.h=!0,k+=this.h.i.decode(be[q],{stream:!(mt&&q==Ke-1)});be.length=0,this.h.g+=k,this.C=0,zt=this.h.g}else zt=this.g.oa();if(this.o=ee==200,en(this.i,this.u,this.A,this.l,this.R,$n,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var Un,Ps=this.g;if((Un=Ps.g?Ps.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Un)){var mn=Un;break t}}mn=null}if(ee=mn)ce(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,ee);else{this.o=!1,this.s=3,pn(12),tn(this),Kr(this);break e}}if(this.P){ee=!0;let _i;for(;!this.J&&this.C<zt.length;)if(_i=qt(this,zt),_i==rt){$n==4&&(this.s=4,pn(14),ee=!1),ce(this.i,this.l,null,"[Incomplete Response]");break}else if(_i==Qe){this.s=4,pn(15),ce(this.i,this.l,zt,"[Invalid Chunk]"),ee=!1;break}else ce(this.i,this.l,_i,null),xi(this,_i);if(er(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$n!=4||zt.length!=0||this.h.h||(this.s=1,pn(16),ee=!1),this.o=this.o&&ee,!ee)ce(this.i,this.l,zt,"[Invalid Chunked Response]"),tn(this),Kr(this);else if(0<zt.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+zt.length),Pn(kn),kn.M=!0,pn(11))}}else ce(this.i,this.l,zt,null),xi(this,zt);$n==4&&tn(this),this.o&&!this.J&&($n==4?Bn(this.j,this):(this.o=!1,It(this)))}else ni(this.g),ee==400&&0<zt.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),tn(this),Kr(this)}}}catch{}finally{}};function er(k){return k.g?k.u=="GET"&&k.L!=2&&k.j.Ca:!1}function qt(k,q){var ee=k.C,be=q.indexOf(`
`,ee);return be==-1?rt:(ee=Number(q.substring(ee,be)),isNaN(ee)?Qe:(be+=1,be+ee>q.length?rt:(q=q.slice(be,be+ee),k.C=be+ee,q)))}lt.prototype.cancel=function(){this.J=!0,tn(this)};function It(k){k.S=Date.now()+k.I,Ar(k,k.I)}function Ar(k,q){if(k.B!=null)throw Error("WatchDog timer not null");k.B=Zn(g(k.ba,k),q)}function bn(k){k.B&&(o.clearTimeout(k.B),k.B=null)}lt.prototype.ba=function(){this.B=null;const k=Date.now();0<=k-this.S?(je(this.i,this.A),this.L!=2&&(Hs(),pn(17)),tn(this),this.s=2,Kr(this)):Ar(this,this.S-k)};function Kr(k){k.j.G==0||k.J||Bn(k.j,k)}function tn(k){bn(k);var q=k.M;q&&typeof q.ma=="function"&&q.ma(),k.M=null,ut(k.U),k.g&&(q=k.g,k.g=null,q.abort(),q.ma())}function xi(k,q){try{var ee=k.j;if(ee.G!=0&&(ee.g==k||De(ee.h,k))){if(!k.K&&De(ee.h,k)&&ee.G==3){try{var be=ee.Da.g.parse(q)}catch{be=null}if(Array.isArray(be)&&be.length==3){var Ke=be;if(Ke[0]==0){e:if(!ee.u){if(ee.g)if(ee.g.F+3e3<k.F)Ns(ee),Te(ee);else break e;Ur(ee),pn(18)}}else ee.za=Ke[1],0<ee.za-ee.T&&37500>Ke[2]&&ee.F&&ee.v==0&&!ee.C&&(ee.C=Zn(g(ee.Za,ee),6e3));if(1>=el(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else rs(ee,11)}else if((k.K||ee.g==k)&&Ns(ee),!P(q))for(Ke=ee.Da.g.parse(q),q=0;q<Ke.length;q++){let mn=Ke[q];if(ee.T=mn[0],mn=mn[1],ee.G==2)if(mn[0]=="c"){ee.K=mn[1],ee.ia=mn[2];const kn=mn[3];kn!=null&&(ee.la=kn,ee.j.info("VER="+ee.la));const $n=mn[4];$n!=null&&(ee.Aa=$n,ee.j.info("SVER="+ee.Aa));const Fi=mn[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(be=1.5*Fi,ee.L=be,ee.j.info("backChannelRequestTimeoutMs_="+be)),be=ee;const _i=k.g;if(_i){const So=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var mt=be.h;mt.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(mt.j=mt.l,mt.g=new Set,mt.h&&(Kt(mt,mt.h),mt.h=null))}if(be.D){const zl=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(be.ya=zl,on(be.I,be.D,zl))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-k.F,ee.j.info("Handshake RTT: "+ee.R+"ms")),be=ee;var zt=k;if(be.qa=xl(be,be.J?be.ia:null,be.W),zt.K){ar(be.h,zt);var Un=zt,Ps=be.L;Ps&&(Un.I=Ps),Un.B&&(bn(Un),It(Un)),be.g=zt}else Pr(be);0<ee.i.length&&We(ee)}else mn[0]!="stop"&&mn[0]!="close"||rs(ee,7);else ee.G==3&&(mn[0]=="stop"||mn[0]=="close"?mn[0]=="stop"?rs(ee,7):re(ee):mn[0]!="noop"&&ee.l&&ee.l.ta(mn),ee.v=0)}}Hs(4)}catch{}}var ji=class{constructor(k,q){this.g=k,this.map=q}};function ti(k){this.l=k||10,o.PerformanceNavigationTiming?(k=o.performance.getEntriesByType("navigation"),k=0<k.length&&(k[0].nextHopProtocol=="hq"||k[0].nextHopProtocol=="h2")):k=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=k?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gs(k){return k.h?!0:k.g?k.g.size>=k.j:!1}function el(k){return k.h?1:k.g?k.g.size:0}function De(k,q){return k.h?k.h==q:k.g?k.g.has(q):!1}function Kt(k,q){k.g?k.g.add(q):k.h=q}function ar(k,q){k.h&&k.h==q?k.h=null:k.g&&k.g.has(q)&&k.g.delete(q)}ti.prototype.cancel=function(){if(this.i=Sr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const k of this.g.values())k.cancel();this.g.clear()}};function Sr(k){if(k.h!=null)return k.i.concat(k.h.D);if(k.g!=null&&k.g.size!==0){let q=k.i;for(const ee of k.g.values())q=q.concat(ee.D);return q}return y(k.i)}function An(k){if(k.V&&typeof k.V=="function")return k.V();if(typeof Map<"u"&&k instanceof Map||typeof Set<"u"&&k instanceof Set)return Array.from(k.values());if(typeof k=="string")return k.split("");if(l(k)){for(var q=[],ee=k.length,be=0;be<ee;be++)q.push(k[be]);return q}q=[],ee=0;for(be in k)q[ee++]=k[be];return q}function Tr(k){if(k.na&&typeof k.na=="function")return k.na();if(!k.V||typeof k.V!="function"){if(typeof Map<"u"&&k instanceof Map)return Array.from(k.keys());if(!(typeof Set<"u"&&k instanceof Set)){if(l(k)||typeof k=="string"){var q=[];k=k.length;for(var ee=0;ee<k;ee++)q.push(ee);return q}q=[],ee=0;for(const be in k)q[ee++]=be;return q}}}function dn(k,q){if(k.forEach&&typeof k.forEach=="function")k.forEach(q,void 0);else if(l(k)||typeof k=="string")Array.prototype.forEach.call(k,q,void 0);else for(var ee=Tr(k),be=An(k),Ke=be.length,mt=0;mt<Ke;mt++)q.call(void 0,be[mt],ee&&ee[mt],k)}var Tn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ji(k,q){if(k){k=k.split("&");for(var ee=0;ee<k.length;ee++){var be=k[ee].indexOf("="),Ke=null;if(0<=be){var mt=k[ee].substring(0,be);Ke=k[ee].substring(be+1)}else mt=k[ee];q(mt,Ke?decodeURIComponent(Ke.replace(/\+/g," ")):"")}}}function In(k){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,k instanceof In){this.h=k.h,Ws(this,k.j),this.o=k.o,this.g=k.g,aa(this,k.s),this.l=k.l;var q=k.i,ee=new yi;ee.i=q.i,q.g&&(ee.g=new Map(q.g),ee.h=q.h),Ri(this,ee),this.m=k.m}else k&&(q=String(k).match(Tn))?(this.h=!1,Ws(this,q[1]||"",!0),this.o=rn(q[2]||""),this.g=rn(q[3]||"",!0),aa(this,q[4]),this.l=rn(q[5]||"",!0),Ri(this,q[6]||"",!0),this.m=rn(q[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}In.prototype.toString=function(){var k=[],q=this.j;q&&k.push(ia(q,Su,!0),":");var ee=this.g;return(ee||q=="file")&&(k.push("//"),(q=this.o)&&k.push(ia(q,Su,!0),"@"),k.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ee=this.s,ee!=null&&k.push(":",String(ee))),(ee=this.l)&&(this.g&&ee.charAt(0)!="/"&&k.push("/"),k.push(ia(ee,ee.charAt(0)=="/"?Sf:kf,!0))),(ee=this.i.toString())&&k.push("?",ee),(ee=this.m)&&k.push("#",ia(ee,Ol)),k.join("")};function _n(k){return new In(k)}function Ws(k,q,ee){k.j=ee?rn(q,!0):q,k.j&&(k.j=k.j.replace(/:$/,""))}function aa(k,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);k.s=q}else k.s=null}function Ri(k,q,ee){q instanceof yi?(k.i=q,pl(k.i,k.h)):(ee||(q=ia(q,Nu)),k.i=new yi(q,k.h))}function on(k,q,ee){k.i.set(q,ee)}function Zi(k){return on(k,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),k}function rn(k,q){return k?q?decodeURI(k.replace(/%25/g,"%2525")):decodeURIComponent(k):""}function ia(k,q,ee){return typeof k=="string"?(k=encodeURI(k).replace(q,ku),ee&&(k=k.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k):null}function ku(k){return k=k.charCodeAt(0),"%"+(k>>4&15).toString(16)+(k&15).toString(16)}var Su=/[#\/\?@]/g,kf=/[#\?:]/g,Sf=/[#\?]/g,Nu=/[#\?@]/g,Ol=/#/g;function yi(k,q){this.h=this.g=null,this.i=k||null,this.j=!!q}function Oa(k){k.g||(k.g=new Map,k.h=0,k.i&&Ji(k.i,function(q,ee){k.add(decodeURIComponent(q.replace(/\+/g," ")),ee)}))}t=yi.prototype,t.add=function(k,q){Oa(this),this.i=null,k=bo(this,k);var ee=this.g.get(k);return ee||this.g.set(k,ee=[]),ee.push(q),this.h+=1,this};function vi(k,q){Oa(k),q=bo(k,q),k.g.has(q)&&(k.i=null,k.h-=k.g.get(q).length,k.g.delete(q))}function eo(k,q){return Oa(k),q=bo(k,q),k.g.has(q)}t.forEach=function(k,q){Oa(this),this.g.forEach(function(ee,be){ee.forEach(function(Ke){k.call(q,Ke,be,this)},this)},this)},t.na=function(){Oa(this);const k=Array.from(this.g.values()),q=Array.from(this.g.keys()),ee=[];for(let be=0;be<q.length;be++){const Ke=k[be];for(let mt=0;mt<Ke.length;mt++)ee.push(q[be])}return ee},t.V=function(k){Oa(this);let q=[];if(typeof k=="string")eo(this,k)&&(q=q.concat(this.g.get(bo(this,k))));else{k=Array.from(this.g.values());for(let ee=0;ee<k.length;ee++)q=q.concat(k[ee])}return q},t.set=function(k,q){return Oa(this),this.i=null,k=bo(this,k),eo(this,k)&&(this.h-=this.g.get(k).length),this.g.set(k,[q]),this.h+=1,this},t.get=function(k,q){return k?(k=this.V(k),0<k.length?String(k[0]):q):q};function Lr(k,q,ee){vi(k,q),0<ee.length&&(k.i=null,k.g.set(bo(k,q),y(ee)),k.h+=ee.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const k=[],q=Array.from(this.g.keys());for(var ee=0;ee<q.length;ee++){var be=q[ee];const mt=encodeURIComponent(String(be)),zt=this.V(be);for(be=0;be<zt.length;be++){var Ke=mt;zt[be]!==""&&(Ke+="="+encodeURIComponent(String(zt[be]))),k.push(Ke)}}return this.i=k.join("&")};function bo(k,q){return q=String(q),k.j&&(q=q.toLowerCase()),q}function pl(k,q){q&&!k.j&&(Oa(k),k.i=null,k.g.forEach(function(ee,be){var Ke=be.toLowerCase();be!=Ke&&(vi(this,be),Lr(this,Ke,ee))},k)),k.j=q}function t0(k,q){const ee=new Os;if(o.Image){const be=new Image;be.onload=m(Gs,ee,"TestLoadImage: loaded",!0,q,be),be.onerror=m(Gs,ee,"TestLoadImage: error",!1,q,be),be.onabort=m(Gs,ee,"TestLoadImage: abort",!1,q,be),be.ontimeout=m(Gs,ee,"TestLoadImage: timeout",!1,q,be),o.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=k}else q(!1)}function Nf(k,q){const ee=new Os,be=new AbortController,Ke=setTimeout(()=>{be.abort(),Gs(ee,"TestPingServer: timeout",!1,q)},1e4);fetch(k,{signal:be.signal}).then(mt=>{clearTimeout(Ke),mt.ok?Gs(ee,"TestPingServer: ok",!0,q):Gs(ee,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(Ke),Gs(ee,"TestPingServer: error",!1,q)})}function Gs(k,q,ee,be,Ke){try{Ke&&(Ke.onload=null,Ke.onerror=null,Ke.onabort=null,Ke.ontimeout=null),be(ee)}catch{}}function Ml(){this.g=new Dt}function Ef(k,q,ee){const be=ee||"";try{dn(k,function(Ke,mt){let zt=Ke;u(Ke)&&(zt=Ut(Ke)),q.push(be+mt+"="+encodeURIComponent(zt))})}catch(Ke){throw q.push(be+"type="+encodeURIComponent("_badmap")),Ke}}function Bl(k){this.l=k.Ub||null,this.j=k.eb||!1}x(Bl,$t),Bl.prototype.g=function(){return new ml(this.l,this.j)},Bl.prototype.i=(function(k){return function(){return k}})({});function ml(k,q){ot.call(this),this.D=k,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ml,ot),t=ml.prototype,t.open=function(k,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=k,this.A=q,this.readyState=1,Li(this)},t.send=function(k){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};k&&(q.body=k),(this.D||o).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Sa=function(k){if(this.g&&(this.l=k,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=k.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")k.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in k){if(this.j=k.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eu(this)}else k.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eu(k){k.j.read().then(k.Pa.bind(k)).catch(k.ga.bind(k))}t.Pa=function(k){if(this.g){if(this.o&&k.value)this.response.push(k.value);else if(!this.o){var q=k.value?k.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!k.done}))&&(this.response=this.responseText+=q)}k.done?wi(this):Li(this),this.readyState==3&&Eu(this)}},t.Ra=function(k){this.g&&(this.response=this.responseText=k,wi(this))},t.Qa=function(k){this.g&&(this.response=k,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(k){k.readyState=4,k.l=null,k.j=null,k.v=null,Li(k)}t.setRequestHeader=function(k,q){this.u.append(k,q)},t.getResponseHeader=function(k){return this.h&&this.h.get(k.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const k=[],q=this.h.entries();for(var ee=q.next();!ee.done;)ee=ee.value,k.push(ee[0]+": "+ee[1]),ee=q.next();return k.join(`\r
`)};function Li(k){k.onreadystatechange&&k.onreadystatechange.call(k)}Object.defineProperty(ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(k){this.m=k?"include":"same-origin"}});function _o(k){let q="";return Y(k,function(ee,be){q+=be,q+=":",q+=ee,q+=`\r
`}),q}function uc(k,q,ee){e:{for(be in ee){var be=!1;break e}be=!0}be||(ee=_o(ee),typeof k=="string"?ee!=null&&encodeURIComponent(String(ee)):on(k,q,ee))}function ts(k){ot.call(this),this.headers=new Map,this.o=k||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ts,ot);var bd=/^https?$/i,Vl=["POST","PUT"];t=ts.prototype,t.Ha=function(k){this.J=k},t.ea=function(k,q,ee,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+k);q=q?q.toUpperCase():"GET",this.D=k,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Le.g(),this.v=this.o?jt(this.o):jt(Le),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(q,String(k),!0),this.B=!1}catch(mt){tl(this,mt);return}if(k=ee||"",ee=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var Ke in be)ee.set(Ke,be[Ke]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const mt of be.keys())ee.set(mt,be.get(mt));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(ee.keys()).find(mt=>mt.toLowerCase()=="content-type"),Ke=o.FormData&&k instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Vl,q,void 0))||be||Ke||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[mt,zt]of ee)this.g.setRequestHeader(mt,zt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gl(this),this.u=!0,this.g.send(k),this.u=!1}catch(mt){tl(this,mt)}};function tl(k,q){k.h=!1,k.g&&(k.j=!0,k.g.abort(),k.j=!1),k.l=q,k.m=5,dc(k),bi(k)}function dc(k){k.A||(k.A=!0,Bt(k,"complete"),Bt(k,"error"))}t.abort=function(k){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=k||7,Bt(this,"complete"),Bt(this,"abort"),bi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),ts.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fc(this):this.bb())},t.bb=function(){fc(this)};function fc(k){if(k.h&&typeof i<"u"&&(!k.v[1]||ri(k)!=4||k.Z()!=2)){if(k.u&&ri(k)==4)ft(k.Ea,0,k);else if(Bt(k,"readystatechange"),ri(k)==4){k.h=!1;try{const zt=k.Z();e:switch(zt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var ee;if(!(ee=q)){var be;if(be=zt===0){var Ke=String(k.D).match(Tn)[1]||null;!Ke&&o.self&&o.self.location&&(Ke=o.self.location.protocol.slice(0,-1)),be=!bd.test(Ke?Ke.toLowerCase():"")}ee=be}if(ee)Bt(k,"complete"),Bt(k,"success");else{k.m=6;try{var mt=2<ri(k)?k.g.statusText:""}catch{mt=""}k.l=mt+" ["+k.Z()+"]",dc(k)}}finally{bi(k)}}}}function bi(k,q){if(k.g){gl(k);const ee=k.g,be=k.v[0]?()=>{}:null;k.g=null,k.v=null,q||Bt(k,"ready");try{ee.onreadystatechange=be}catch{}}}function gl(k){k.I&&(o.clearTimeout(k.I),k.I=null)}t.isActive=function(){return!!this.g};function ri(k){return k.g?k.g.readyState:0}t.Z=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(k){if(this.g){var q=this.g.responseText;return k&&q.indexOf(k)==0&&(q=q.substring(k.length)),nr(q)}};function Wc(k){try{if(!k.g)return null;if("response"in k.g)return k.g.response;switch(k.H){case"":case"text":return k.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in k.g)return k.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(k){const q={};k=(k.g&&2<=ri(k)&&k.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<k.length;be++){if(P(k[be]))continue;var ee=j(k[be]);const Ke=ee[0];if(ee=ee[1],typeof ee!="string")continue;ee=ee.trim();const mt=q[Ke]||[];q[Ke]=mt,mt.push(ee)}L(q,function(be){return be.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ma(k,q,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[k]||q}function V(k){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ma("failFast",!1,k),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ma("baseRetryDelayMs",5e3,k),this.cb=Ma("retryDelaySeedMs",1e4,k),this.Wa=Ma("forwardChannelMaxRetries",2,k),this.wa=Ma("forwardChannelRequestTimeoutMs",2e4,k),this.pa=k&&k.xmlHttpFactory||void 0,this.Xa=k&&k.Tb||void 0,this.Ca=k&&k.useFetchStreams||!1,this.L=void 0,this.J=k&&k.supportsCrossDomainXhr||!1,this.K="",this.h=new ti(k&&k.concurrentRequestLimit),this.Da=new Ml,this.P=k&&k.fastHandshake||!1,this.O=k&&k.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=k&&k.Rb||!1,k&&k.xa&&this.j.xa(),k&&k.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&k&&k.detectBufferingProxy||!1,this.ja=void 0,k&&k.longPollingTimeout&&0<k.longPollingTimeout&&(this.ja=k.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=V.prototype,t.la=8,t.G=1,t.connect=function(k,q,ee,be){pn(0),this.W=k,this.H=q||{},ee&&be!==void 0&&(this.H.OSID=ee,this.H.OAID=be),this.F=this.X,this.I=xl(this,null,this.W),We(this)};function re(k){if(Ve(k),k.G==3){var q=k.U++,ee=_n(k.I);if(on(ee,"SID",k.K),on(ee,"RID",q),on(ee,"TYPE","terminate"),sr(k,ee),q=new lt(k,k.j,q),q.L=2,q.v=Zi(_n(ee)),ee=!1,o.navigator&&o.navigator.sendBeacon)try{ee=o.navigator.sendBeacon(q.v.toString(),"")}catch{}!ee&&o.Image&&(new Image().src=q.v,ee=!0),ee||(q.g=Ul(q.j,null),q.g.ea(q.v)),q.F=Date.now(),It(q)}wa(k)}function Te(k){k.g&&(Pn(k),k.g.cancel(),k.g=null)}function Ve(k){Te(k),k.u&&(o.clearTimeout(k.u),k.u=null),Ns(k),k.h.cancel(),k.s&&(typeof k.s=="number"&&o.clearTimeout(k.s),k.s=null)}function We(k){if(!gs(k.h)&&!k.s){k.s=!0;var q=k.Ga;fe||ie(),te||(fe(),te=!0),H.add(q,k),k.B=0}}function kt(k,q){return el(k.h)>=k.h.j-(k.s?1:0)?!1:k.s?(k.i=q.D.concat(k.i),!0):k.G==1||k.G==2||k.B>=(k.Va?0:k.Wa)?!1:(k.s=Zn(g(k.Ga,k,q),Ks(k,k.B)),k.B++,!0)}t.Ga=function(k){if(this.s)if(this.s=null,this.G==1){if(!k){this.U=Math.floor(1e5*Math.random()),k=this.U++;const Ke=new lt(this,this.j,k);let mt=this.o;if(this.S&&(mt?(mt=A(mt),D(mt,this.S)):mt=this.S),this.m!==null||this.O||(Ke.H=mt,mt=null),this.P)e:{for(var q=0,ee=0;ee<this.i.length;ee++){t:{var be=this.i[ee];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(q+=be,4096<q){q=ee;break e}if(q===4096||ee===this.i.length-1){q=ee+1;break e}}q=1e3}else q=1e3;q=cr(this,Ke,q),ee=_n(this.I),on(ee,"RID",k),on(ee,"CVER",22),this.D&&on(ee,"X-HTTP-Session-Id",this.D),sr(this,ee),mt&&(this.O?q="headers="+encodeURIComponent(String(_o(mt)))+"&"+q:this.m&&uc(ee,this.m,mt)),Kt(this.h,Ke),this.Ua&&on(ee,"TYPE","init"),this.P?(on(ee,"$req",q),on(ee,"SID","null"),Ke.T=!0,At(Ke,ee,null)):At(Ke,ee,q),this.G=2}}else this.G==3&&(k?Tt(this,k):this.i.length==0||gs(this.h)||Tt(this))};function Tt(k,q){var ee;q?ee=q.l:ee=k.U++;const be=_n(k.I);on(be,"SID",k.K),on(be,"RID",ee),on(be,"AID",k.T),sr(k,be),k.m&&k.o&&uc(be,k.m,k.o),ee=new lt(k,k.j,ee,k.B+1),k.m===null&&(ee.H=k.o),q&&(k.i=q.D.concat(k.i)),q=cr(k,ee,1e3),ee.I=Math.round(.5*k.wa)+Math.round(.5*k.wa*Math.random()),Kt(k.h,ee),At(ee,be,q)}function sr(k,q){k.H&&Y(k.H,function(ee,be){on(q,be,ee)}),k.l&&dn({},function(ee,be){on(q,be,ee)})}function cr(k,q,ee){ee=Math.min(k.i.length,ee);var be=k.l?g(k.l.Na,k.l,k):null;e:{var Ke=k.i;let mt=-1;for(;;){const zt=["count="+ee];mt==-1?0<ee?(mt=Ke[0].g,zt.push("ofs="+mt)):mt=0:zt.push("ofs="+mt);let Un=!0;for(let Ps=0;Ps<ee;Ps++){let mn=Ke[Ps].g;const kn=Ke[Ps].map;if(mn-=mt,0>mn)mt=Math.max(0,Ke[Ps].g-100),Un=!1;else try{Ef(kn,zt,"req"+mn+"_")}catch{be&&be(kn)}}if(Un){be=zt.join("&");break e}}}return k=k.i.splice(0,ee),q.D=k,be}function Pr(k){if(!k.g&&!k.u){k.Y=1;var q=k.Fa;fe||ie(),te||(fe(),te=!0),H.add(q,k),k.v=0}}function Ur(k){return k.g||k.u||3<=k.v?!1:(k.Y++,k.u=Zn(g(k.Fa,k),Ks(k,k.v)),k.v++,!0)}t.Fa=function(){if(this.u=null,xs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var k=2*this.R;this.j.info("BP detection timer enabled: "+k),this.A=Zn(g(this.ab,this),k)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Te(this),xs(this))};function Pn(k){k.A!=null&&(o.clearTimeout(k.A),k.A=null)}function xs(k){k.g=new lt(k,k.j,"rpc",k.Y),k.m===null&&(k.g.H=k.o),k.g.O=0;var q=_n(k.qa);on(q,"RID","rpc"),on(q,"SID",k.K),on(q,"AID",k.T),on(q,"CI",k.F?"0":"1"),!k.F&&k.ja&&on(q,"TO",k.ja),on(q,"TYPE","xmlhttp"),sr(k,q),k.m&&k.o&&uc(q,k.m,k.o),k.L&&(k.g.I=k.L);var ee=k.g;k=k.ia,ee.L=1,ee.v=Zi(_n(q)),ee.m=null,ee.P=!0,Gt(ee,k)}t.Za=function(){this.C!=null&&(this.C=null,Te(this),Ur(this),pn(19))};function Ns(k){k.C!=null&&(o.clearTimeout(k.C),k.C=null)}function Bn(k,q){var ee=null;if(k.g==q){Ns(k),Pn(k),k.g=null;var be=2}else if(De(k.h,q))ee=q.D,ar(k.h,q),be=1;else return;if(k.G!=0){if(q.o)if(be==1){ee=q.m?q.m.length:0,q=Date.now()-q.F;var Ke=k.B;be=Ss(),Bt(be,new ei(be,ee)),We(k)}else Pr(k);else if(Ke=q.s,Ke==3||Ke==0&&0<q.X||!(be==1&&kt(k,q)||be==2&&Ur(k)))switch(ee&&0<ee.length&&(q=k.h,q.i=q.i.concat(ee)),Ke){case 1:rs(k,5);break;case 4:rs(k,10);break;case 3:rs(k,6);break;default:rs(k,2)}}}function Ks(k,q){let ee=k.Ta+Math.floor(Math.random()*k.cb);return k.isActive()||(ee*=2),ee*q}function rs(k,q){if(k.j.info("Error code "+q),q==2){var ee=g(k.fb,k),be=k.Xa;const Ke=!be;be=new In(be||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ws(be,"https"),Zi(be),Ke?t0(be.toString(),ee):Nf(be.toString(),ee)}else pn(2);k.G=0,k.l&&k.l.sa(q),wa(k),Ve(k)}t.fb=function(k){k?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function wa(k){if(k.G=0,k.ka=[],k.l){const q=Sr(k.h);(q.length!=0||k.i.length!=0)&&(b(k.ka,q),b(k.ka,k.i),k.h.i.length=0,y(k.i),k.i.length=0),k.l.ra()}}function xl(k,q,ee){var be=ee instanceof In?_n(ee):new In(ee);if(be.g!="")q&&(be.g=q+"."+be.g),aa(be,be.s);else{var Ke=o.location;be=Ke.protocol,q=q?q+"."+Ke.hostname:Ke.hostname,Ke=+Ke.port;var mt=new In(null);be&&Ws(mt,be),q&&(mt.g=q),Ke&&aa(mt,Ke),ee&&(mt.l=ee),be=mt}return ee=k.D,q=k.ya,ee&&q&&on(be,ee,q),on(be,"VER",k.la),sr(k,be),be}function Ul(k,q,ee){if(q&&!k.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=k.Ca&&!k.pa?new ts(new Bl({eb:ee})):new ts(k.pa),q.Ha(k.J),q}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}t=_d.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gc(){}Gc.prototype.g=function(k,q){return new oa(k,q)};function oa(k,q){ot.call(this),this.g=new V(q),this.l=k,this.h=q&&q.messageUrlParams||null,k=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(k?k["X-Client-Protocol"]="webchannel":k={"X-Client-Protocol":"webchannel"}),this.g.o=k,k=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(k?k["X-WebChannel-Content-Type"]=q.messageContentType:k={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(k?k["X-WebChannel-Client-Profile"]=q.va:k={"X-WebChannel-Client-Profile":q.va}),this.g.S=k,(k=q&&q.Sb)&&!P(k)&&(this.g.m=k),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!P(q)&&(this.g.D=q,k=this.h,k!==null&&q in k&&(k=this.h,q in k&&delete k[q])),this.j=new to(this)}x(oa,ot),oa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},oa.prototype.close=function(){re(this.g)},oa.prototype.o=function(k){var q=this.g;if(typeof k=="string"){var ee={};ee.__data__=k,k=ee}else this.u&&(ee={},ee.__data__=Ut(k),k=ee);q.i.push(new ji(q.Ya++,k)),q.G==3&&We(q)},oa.prototype.N=function(){this.g.l=null,delete this.j,re(this.g),delete this.g,oa.aa.N.call(this)};function ko(k){an.call(this),k.__headers__&&(this.headers=k.__headers__,this.statusCode=k.__status__,delete k.__headers__,delete k.__status__);var q=k.__sm__;if(q){e:{for(const ee in q){k=ee;break e}k=void 0}(this.i=k)&&(k=this.i,q=q!==null&&k in q?q[k]:void 0),this.data=q}else this.data=k}x(ko,an);function Cu(){kr.call(this),this.status=1}x(Cu,kr);function to(k){this.g=k}x(to,_d),to.prototype.ua=function(){Bt(this.g,"a")},to.prototype.ta=function(k){Bt(this.g,new ko(k))},to.prototype.sa=function(k){Bt(this.g,new Cu)},to.prototype.ra=function(){Bt(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,oa.prototype.send=oa.prototype.o,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,rD=function(){return new Gc},tD=function(){return Ss()},eD=Vr,U6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,kw=Ne,Re.COMPLETE="complete",ZF=Re,pr.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",ot.prototype.listen=ot.prototype.K,lx=pr,ts.prototype.listenOnce=ts.prototype.L,ts.prototype.getLastError=ts.prototype.Ka,ts.prototype.getLastErrorCode=ts.prototype.Ba,ts.prototype.getStatus=ts.prototype.Z,ts.prototype.getResponseJson=ts.prototype.Oa,ts.prototype.getResponseText=ts.prototype.oa,ts.prototype.send=ts.prototype.ea,ts.prototype.setWithCredentials=ts.prototype.Ha,JF=ts}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});const CC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new s7("@firebase/firestore");function Im(){return kh.logLevel}function YQ(t){kh.setLogLevel(t)}function Ft(t,...e){if(kh.logLevel<=Fn.DEBUG){const r=e.map(i7);kh.debug(`Firestore (${z1}): ${t}`,...r)}}function Ka(t,...e){if(kh.logLevel<=Fn.ERROR){const r=e.map(i7);kh.error(`Firestore (${z1}): ${t}`,...r)}}function oc(t,...e){if(kh.logLevel<=Fn.WARN){const r=e.map(i7);kh.warn(`Firestore (${z1}): ${t}`,...r)}}function i7(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t="Unexpected state"){const e=`FIRESTORE (${z1}) INTERNAL ASSERTION FAILED: `+t;throw Ka(e),new Error(e)}function yr(t,e){t||lr()}function XQ(t,e){t||lr()}function Zt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends yu{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Wi.UNAUTHENTICATED)))}shutdown(){}}class QQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class JQ{constructor(e){this.t=e,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){yr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xi,e.enqueueRetryable((()=>s(this.currentUser)))};const i=()=>{const l=a;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},o=l=>{Ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xi)}}),0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(yr(typeof n.accessToken=="string"),new nD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yr(e===null||typeof e=="string"),new Wi(e)}}class ZQ{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eJ{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new ZQ(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Wi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tJ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){yr(this.o===void 0);const n=a=>{a.error!=null&&Ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.R;return this.R=a.token,Ft("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const s=a=>{Ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(yr(typeof r.token=="string"),this.R=r.token,new aD(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class rJ{getToken(){return Promise.resolve(new aD(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=nJ(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%e.length))}return n}}function Qr(t,e){return t<e?-1:t>e?1:0}function g1(t,e,r){return t.length===e.length&&t.every(((n,s)=>r(n,e[s])))}function iD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return na.fromMillis(Date.now())}static fromDate(e){return na.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new na(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qr(this.nanoseconds,e.nanoseconds):Qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Er(e)}static min(){return new Er(new na(0,0))}static max(){return new Er(new na(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,r,n){r===void 0?r=0:r>e.length&&lr(),n===void 0?n=e.length-r:n>e.length-r&&lr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return c2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof c2?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=e.get(s),i=r.get(s);if(a<i)return-1;if(a>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class On extends c2{construct(e,r,n){return new On(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Rt(ht.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((s=>s.length>0)))}return new On(r)}static emptyPath(){return new On([])}}const sJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Us extends c2{construct(e,r,n){return new Us(e,r,n)}static isValidIdentifier(e){return sJ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Us.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Us(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Rt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Rt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Rt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(n+=o,s++):(a(),s++)}if(a(),i)throw new Rt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Us(r)}static emptyPath(){return new Us([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.path=e}static fromPath(e){return new rr(On.fromString(e))}static fromName(e){return new rr(On.fromString(e).popFirst(5))}static empty(){return new rr(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return On.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rr(new On(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function z6(t){return t.fields.find((e=>e.kind===2))}function N0(t){return t.fields.filter((e=>e.kind!==2))}function aJ(t,e){let r=Qr(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=iJ(t.fields[n],e.fields[n]),r!==0)return r;return Qr(t.fields.length,e.fields.length)}x1.UNKNOWN_ID=-1;class K0{constructor(e,r){this.fieldPath=e,this.kind=r}}function iJ(t,e){const r=Us.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Qr(t.kind,e.kind)}class y1{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new y1(0,lc.min())}}function oD(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Er.fromTimestamp(n===1e9?new na(r+1,0):new na(r,n));return new lc(s,rr.empty(),e)}function lD(t){return new lc(t.readTime,t.key,-1)}class lc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new lc(Er.min(),rr.empty(),-1)}static max(){return new lc(Er.max(),rr.empty(),-1)}}function l7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=rr.comparator(t.documentKey,e.documentKey),r!==0?r:Qr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(t){if(t.code!==ht.FAILED_PRECONDITION||t.message!==cD)throw t;Ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&lr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Je(((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Je?r:Je.resolve(r)}catch(r){return Je.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Je.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Je.reject(r)}static resolve(e){return new Je(((r,n)=>{r(e)}))}static reject(e){return new Je(((r,n)=>{n(e)}))}static waitFor(e){return new Je(((r,n)=>{let s=0,a=0,i=!1;e.forEach((o=>{++s,o.next((()=>{++a,i&&a===s&&r()}),(l=>n(l)))})),i=!0,a===s&&r()}))}static or(e){let r=Je.resolve(!1);for(const n of e)r=r.next((s=>s?Je.resolve(s):n()));return r}static forEach(e,r){const n=[];return e.forEach(((s,a)=>{n.push(r.call(this,s,a))})),this.waitFor(n)}static mapArray(e,r){return new Je(((n,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;r(e[u]).next((d=>{i[u]=d,++o,o===a&&n(i)}),(d=>s(d)))}}))}static doWhile(e,r){return new Je(((n,s)=>{const a=()=>{e()===!0?r().next((()=>{a()}),s):n()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Xi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Tx(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=c7(n.target.error);this.V.reject(new Tx(e,s))}}static open(e,r,n,s){try{return new Ib(r,e.transaction(s,n))}catch(a){throw new Tx(r,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new lJ(r)}}class nd{constructor(e,r,n){this.name=e,this.version=r,this.p=n,nd.S(Ti())===12.2&&Ka("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ft("SimpleDb","Removing database:",e),I0(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!HF())return!1;if(nd.v())return!0;const e=Ti(),r=nd.S(e),n=0<r&&r<10,s=dD(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ft("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const i=a.target.result;r(i)},s.onblocked=()=>{n(new Tx(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const i=a.target.error;i.name==="VersionError"?n(new Rt(ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new Rt(ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Tx(e,i))},s.onupgradeneeded=a=>{Ft("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const i=a.target.result;this.p.O(i,s.transaction,a.oldVersion,this.version).next((()=>{Ft("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const a=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=Ib.open(this.db,e,a?"readonly":"readwrite",n),l=s(o).next((u=>(o.g(),u))).catch((u=>(o.abort(u),Je.reject(u)))).toPromise();return l.catch((()=>{})),await o.m,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&i<3;if(Ft("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dD(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class oJ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return I0(this.B.delete())}}class Tx extends Rt{constructor(e,r){super(ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function qh(t){return t.name==="IndexedDbTransactionError"}class lJ{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ft("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),I0(n)}add(e){return Ft("SimpleDb","ADD",this.store.name,e,e),I0(this.store.add(e))}get(e){return I0(this.store.get(e)).next((r=>(r===void 0&&(r=null),Ft("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Ft("SimpleDb","DELETE",this.store.name,e),I0(this.store.delete(e))}count(){return Ft("SimpleDb","COUNT",this.store.name),I0(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(n.range);return new Je(((i,o)=>{a.onerror=l=>{o(l.target.error)},a.onsuccess=l=>{i(l.target.result)}}))}{const a=this.cursor(n),i=[];return this.W(a,((o,l)=>{i.push(l)})).next((()=>i))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Je(((s,a)=>{n.onerror=i=>{a(i.target.error)},n.onsuccess=i=>{s(i.target.result)}}))}j(e,r){Ft("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,((a,i,o)=>o.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Je(((n,s)=>{r.onerror=a=>{const i=c7(a.target.error);s(i)},r.onsuccess=a=>{const i=a.target.result;i?e(i.primaryKey,i.value).next((o=>{o?i.continue():n()})):n()}}))}W(e,r){const n=[];return new Je(((s,a)=>{e.onerror=i=>{a(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void s();const l=new oJ(o),u=r(o.primaryKey,o.value,l);if(u instanceof Je){const d=u.catch((p=>(l.done(),Je.reject(p))));n.push(d)}l.isDone?s():l.K===null?o.continue():o.continue(l.K)}})).next((()=>Je.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function I0(t){return new Je(((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=c7(n.target.error);r(s)}}))}let AC=!1;function c7(t){const e=nd.S(Ti());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AC||(AC=!0,setTimeout((()=>{throw n}),0)),n}}return t}class cJ{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ft("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ft("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){qh(r)?Ft("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await $h(r)}await this.X(6e4)}))}}class uJ{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let s=r,a=!0;return Je.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((i=>{if(i!==null&&!n.has(i))return Ft("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next((o=>{s-=o,n.add(i)}));a=!1})))).next((()=>r-s))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next((a=>{const i=a.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(s,a))).next((o=>(Ft("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o)))).next((()=>i.size))}))))}re(e,r){let n=e;return r.changes.forEach(((s,a)=>{const i=lD(a);l7(i,n)>0&&(n=i)})),new lc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Al.oe=-1;function X2(t){return t==null}function u2(t){return t===0&&1/t==-1/0}function fD(t){return typeof t=="number"&&Number.isInteger(t)&&!u2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=TC(e)),e=dJ(t.get(r),e);return TC(e)}function dJ(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case"":r+="";break;default:r+=a}}return r}function TC(t){return t+""}function Xu(t){const e=t.length;if(yr(e>=2),e===2)return yr(t.charAt(0)===""&&t.charAt(1)===""),On.emptyPath();const r=e-2,n=[];let s="";for(let a=0;a<e;){const i=t.indexOf("",a);switch((i<0||i>r)&&lr(),t.charAt(i+1)){case"":const o=t.substring(a,i);let l;s.length===0?l=o:(s+=o,l=s,s=""),n.push(l);break;case"":s+=t.substring(a,i),s+="\0";break;case"":s+=t.substring(a,i+1);break;default:lr()}a=i+2}return new On(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){return[t,Yo(e)]}function hD(t,e,r){return[t,Yo(e),r]}const fJ={},hJ=["prefixPath","collectionGroup","readTime","documentId"],pJ=["prefixPath","collectionGroup","documentId"],mJ=["collectionGroup","readTime","prefixPath","documentId"],gJ=["canonicalId","targetId"],xJ=["targetId","path"],yJ=["path","targetId"],vJ=["collectionId","parent"],wJ=["indexId","uid"],bJ=["uid","sequenceNumber"],_J=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kJ=["indexId","uid","orderedDocumentKey"],SJ=["userId","collectionPath","documentId"],NJ=["userId","collectionPath","largestBatchId"],EJ=["userId","collectionGroup","largestBatchId"],pD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CJ=[...pD,"documentOverlays"],mD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gD=mD,u7=[...gD,"indexConfiguration","indexState","indexEntries"],AJ=u7,TJ=[...u7,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6 extends uD{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Pi(t,e){const r=Zt(t);return nd.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Hh(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function xD(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function yD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,r){this.comparator=e,this.root=r||mo.EMPTY}insert(e,r){return new Fs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(e){return new Fs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ev(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ev(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ev(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ev(this.root,e,this.comparator,!0)}}class Ev{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mo{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??mo.RED,this.left=s??mo.EMPTY,this.right=a??mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new mo(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return mo.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lr();const e=this.left.check();if(e!==this.right.check())throw lr();return e+(this.isRed()?0:1)}}mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw lr()}get value(){throw lr()}get color(){throw lr()}get left(){throw lr()}get right(){throw lr()}copy(e,r,n,s,a){return this}insert(e,r,n){return new mo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.comparator=e,this.data=new Fs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new jC(this.data.getIterator())}getIteratorFrom(e){return new jC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof _s)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new _s(this.comparator);return r.data=e,r}}class jC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mm(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.fields=e,e.sort(Us.comparator)}static empty(){return new Tl([])}unionWith(e){let r=new _s(Us.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Tl(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return g1(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new vD("Invalid base64 string: "+a):a}})(e);return new ya(r)}static fromUint8Array(e){const r=(function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a})(e);return new ya(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ya.EMPTY_BYTE_STRING=new ya("");const PJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nf(t){if(yr(!!t),typeof t=="string"){let e=0;const r=PJ.exec(t);if(yr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ea(t.seconds),nanos:ea(t.nanos)}}function ea(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sf(t){return typeof t=="string"?ya.fromBase64String(t):ya.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function jb(t){const e=t.mapValue.fields.__previous_value__;return Pb(e)?jb(e):e}function d2(t){const e=nf(t.mapValue.fields.__local_write_time__.timestampValue);return new na(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(e,r,n,s,a,i,o,l,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}class Sh{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Sh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nw={nullValue:"NULL_VALUE"};function Nh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pb(t)?4:wD(t)?9007199254740991:Rb(t)?10:11:lr()}function fd(t,e){if(t===e)return!0;const r=Nh(t);if(r!==Nh(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return d2(t).isEqual(d2(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=nf(s.timestampValue),o=nf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return sf(s.bytesValue).isEqual(sf(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return ea(s.geoPointValue.latitude)===ea(a.geoPointValue.latitude)&&ea(s.geoPointValue.longitude)===ea(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ea(s.integerValue)===ea(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=ea(s.doubleValue),o=ea(a.doubleValue);return i===o?u2(i)===u2(o):isNaN(i)&&isNaN(o)}return!1})(t,e);case 9:return g1(t.arrayValue.values||[],e.arrayValue.values||[],fd);case 10:case 11:return(function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(PC(i)!==PC(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!fd(i[l],o[l])))return!1;return!0})(t,e);default:return lr()}}function f2(t,e){return(t.values||[]).find((r=>fd(r,e)))!==void 0}function Eh(t,e){if(t===e)return 0;const r=Nh(t),n=Nh(e);if(r!==n)return Qr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Qr(t.booleanValue,e.booleanValue);case 2:return(function(a,i){const o=ea(a.integerValue||a.doubleValue),l=ea(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(t,e);case 3:return RC(t.timestampValue,e.timestampValue);case 4:return RC(d2(t),d2(e));case 5:return Qr(t.stringValue,e.stringValue);case 6:return(function(a,i){const o=sf(a),l=sf(i);return o.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(a,i){const o=a.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=Qr(o[u],l[u]);if(d!==0)return d}return Qr(o.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,i){const o=Qr(ea(a.latitude),ea(i.latitude));return o!==0?o:Qr(ea(a.longitude),ea(i.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return LC(t.arrayValue,e.arrayValue);case 10:return(function(a,i){var o,l,u,d;const p=a.fields||{},g=i.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,x=(l=g.value)===null||l===void 0?void 0:l.arrayValue,y=Qr(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=x?.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:LC(m,x)})(t.mapValue,e.mapValue);case 11:return(function(a,i){if(a===hh.mapValue&&i===hh.mapValue)return 0;if(a===hh.mapValue)return 1;if(i===hh.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Qr(l[p],d[p]);if(g!==0)return g;const m=Eh(o[l[p]],u[d[p]]);if(m!==0)return m}return Qr(l.length,d.length)})(t.mapValue,e.mapValue);default:throw lr()}}function RC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qr(t,e);const r=nf(t),n=nf(e),s=Qr(r.seconds,n.seconds);return s!==0?s:Qr(r.nanos,n.nanos)}function LC(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=Eh(r[s],n[s]);if(a)return a}return Qr(r.length,n.length)}function v1(t){return q6(t)}function q6(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=nf(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return sf(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return rr.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=q6(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const i of n)a?a=!1:s+=",",s+=`${i}:${q6(r.fields[i])}`;return s+"}"})(t.mapValue):lr()}function Ew(t){switch(Nh(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jb(t);return e?16+Ew(e):16;case 5:return 2*t.stringValue.length;case 6:return sf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,a)=>s+Ew(a)),0)})(t.arrayValue);case 10:case 11:return(function(n){let s=0;return Hh(n.fields,((a,i)=>{s+=a.length+Ew(i)})),s})(t.mapValue);default:throw lr()}}function ap(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function H6(t){return!!t&&"integerValue"in t}function h2(t){return!!t&&"arrayValue"in t}function FC(t){return!!t&&"nullValue"in t}function DC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cw(t){return!!t&&"mapValue"in t}function Rb(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Ix(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hh(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Ix(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ix(t.arrayValue.values[r]);return e}return Object.assign({},t)}function wD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const bD={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function RJ(t){return"nullValue"in t?Nw:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ap(Sh.empty(),rr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Rb(t)?bD:{mapValue:{}}:lr()}function LJ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ap(Sh.empty(),rr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?bD:"mapValue"in t?Rb(t)?{mapValue:{}}:hh:lr()}function OC(t,e){const r=Eh(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function MC(t,e){const r=Eh(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.value=e}static empty(){return new yo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Cw(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ix(r)}setAll(e){let r=Us.emptyPath(),n={},s=[];e.forEach(((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}i?n[o.lastSegment()]=Ix(i):s.push(o.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());Cw(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return fd(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Cw(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Hh(r,((s,a)=>e[s]=a));for(const s of n)delete e[s]}clone(){return new yo(Ix(this.value))}}function _D(t){const e=[];return Hh(t.fields,((r,n)=>{const s=new Us([r]);if(Cw(n)){const a=_D(n.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)})),new Tl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,r,n,s,a,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Vs(e,0,Er.min(),Er.min(),Er.min(),yo.empty(),0)}static newFoundDocument(e,r,n,s){return new Vs(e,1,r,Er.min(),n,s,0)}static newNoDocument(e,r){return new Vs(e,2,r,Er.min(),Er.min(),yo.empty(),0)}static newUnknownDocument(e,r){return new Vs(e,3,r,Er.min(),Er.min(),yo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,r){this.position=e,this.inclusive=r}}function BC(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?n=rr.comparator(rr.fromName(i.referenceValue),r.key):n=Eh(i,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function VC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!fd(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,r="asc"){this.field=e,this.dir=r}}function FJ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kD=class{};class Mn extends kD{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new DJ(e,r,n):r==="array-contains"?new BJ(e,n):r==="in"?new TD(e,n):r==="not-in"?new VJ(e,n):r==="array-contains-any"?new UJ(e,n):new Mn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new OJ(e,n):new MJ(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Eh(r,this.value)):r!==null&&Nh(this.value)===Nh(r)&&this.matchesComparison(Eh(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends kD{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ps(e,r)}matches(e){return w1(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function w1(t){return t.op==="and"}function W6(t){return t.op==="or"}function d7(t){return SD(t)&&w1(t)}function SD(t){for(const e of t.filters)if(e instanceof ps)return!1;return!0}function G6(t){if(t instanceof Mn)return t.field.canonicalString()+t.op.toString()+v1(t.value);if(d7(t))return t.filters.map((e=>G6(e))).join(",");{const e=t.filters.map((r=>G6(r))).join(",");return`${t.op}(${e})`}}function ND(t,e){return t instanceof Mn?(function(n,s){return s instanceof Mn&&n.op===s.op&&n.field.isEqual(s.field)&&fd(n.value,s.value)})(t,e):t instanceof ps?(function(n,s){return s instanceof ps&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((a,i,o)=>a&&ND(i,s.filters[o])),!0):!1})(t,e):void lr()}function ED(t,e){const r=t.filters.concat(e);return ps.create(r,t.op)}function CD(t){return t instanceof Mn?(function(r){return`${r.field.canonicalString()} ${r.op} ${v1(r.value)}`})(t):t instanceof ps?(function(r){return r.op.toString()+" {"+r.getFilters().map(CD).join(" ,")+"}"})(t):"Filter"}class DJ extends Mn{constructor(e,r,n){super(e,r,n),this.key=rr.fromName(n.referenceValue)}matches(e){const r=rr.comparator(e.key,this.key);return this.matchesComparison(r)}}class OJ extends Mn{constructor(e,r){super(e,"in",r),this.keys=AD("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class MJ extends Mn{constructor(e,r){super(e,"not-in",r),this.keys=AD("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function AD(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>rr.fromName(n.referenceValue)))}class BJ extends Mn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return h2(r)&&f2(r.arrayValue,this.value)}}class TD extends Mn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&f2(this.value.arrayValue,r)}}class VJ extends Mn{constructor(e,r){super(e,"not-in",r)}matches(e){if(f2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!f2(this.value.arrayValue,r)}}class UJ extends Mn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!h2(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>f2(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(e,r=null,n=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.ue=null}}function K6(t,e=null,r=[],n=[],s=null,a=null,i=null){return new zJ(t,e,r,n,s,a,i)}function ip(t){const e=Zt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>G6(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),X2(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>v1(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>v1(n))).join(",")),e.ue=r}return e.ue}function Q2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!FJ(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!ND(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VC(t.startAt,e.startAt)&&VC(t.endAt,e.endAt)}function m5(t){return rr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function g5(t,e){return t.filters.filter((r=>r instanceof Mn&&r.field.isEqual(e)))}function UC(t,e,r){let n=Nw,s=!0;for(const a of g5(t,e)){let i=Nw,o=!0;switch(a.op){case"<":case"<=":i=RJ(a.value);break;case"==":case"in":case">=":i=a.value;break;case">":i=a.value,o=!1;break;case"!=":case"not-in":i=Nw}OC({value:n,inclusive:s},{value:i,inclusive:o})<0&&(n=i,s=o)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const i=r.position[a];OC({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function zC(t,e,r){let n=hh,s=!0;for(const a of g5(t,e)){let i=hh,o=!0;switch(a.op){case">=":case">":i=LJ(a.value),o=!1;break;case"==":case"in":case"<=":i=a.value;break;case"<":i=a.value,o=!1;break;case"!=":case"not-in":i=hh}MC({value:n,inclusive:s},{value:i,inclusive:o})>0&&(n=i,s=o)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const i=r.position[a];MC({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,r=null,n=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ID(t,e,r,n,s,a,i,o){return new ff(t,e,r,n,s,a,i,o)}function $1(t){return new ff(t)}function $C(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f7(t){return t.collectionGroup!==null}function Jm(t){const e=Zt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new _s(Us.comparator);return i.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new p2(a,n))})),r.has(Us.keyField().canonicalString())||e.ce.push(new p2(Us.keyField(),n))}return e.ce}function Xo(t){const e=Zt(t);return e.le||(e.le=jD(e,Jm(t))),e.le}function PD(t){const e=Zt(t);return e.he||(e.he=jD(e,t.explicitOrderBy)),e.he}function jD(t,e){if(t.limitType==="F")return K6(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new p2(s.field,a)}));const r=t.endAt?new Ch(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ch(t.startAt.position,t.startAt.inclusive):null;return K6(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Y6(t,e){const r=t.filters.concat([e]);return new ff(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function x5(t,e,r){return new ff(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function J2(t,e){return Q2(Xo(t),Xo(e))&&t.limitType===e.limitType}function RD(t){return`${ip(Xo(t))}|lt:${t.limitType}`}function Pm(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((s=>CD(s))).join(", ")}]`),X2(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((s=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(s))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((s=>v1(s))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((s=>v1(s))).join(",")),`Target(${n})`})(Xo(t))}; limitType=${t.limitType})`}function Z2(t,e){return e.isFoundDocument()&&(function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):rr.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,s){for(const a of Jm(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(n,s){return!(n.startAt&&!(function(i,o,l){const u=BC(i,o,l);return i.inclusive?u<=0:u<0})(n.startAt,Jm(n),s)||n.endAt&&!(function(i,o,l){const u=BC(i,o,l);return i.inclusive?u>=0:u>0})(n.endAt,Jm(n),s))})(t,e)}function LD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FD(t){return(e,r)=>{let n=!1;for(const s of Jm(t)){const a=$J(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function $J(t,e,r){const n=t.field.isKeyField()?rr.comparator(e.key,r.key):(function(a,i,o){const l=i.data.field(a),u=o.data.field(a);return l!==null&&u!==null?Eh(l,u):lr()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return lr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hh(this.inner,((r,n)=>{for(const[s,a]of n)e(s,a)}))}isEmpty(){return yD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ=new Fs(rr.comparator);function Il(){return qJ}const DD=new Fs(rr.comparator);function cx(...t){let e=DD;for(const r of t)e=e.insert(r.key,r);return e}function OD(t){let e=DD;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Qu(){return Px()}function MD(){return Px()}function Px(){return new hf((t=>t.toString()),((t,e)=>t.isEqual(e)))}const HJ=new Fs(rr.comparator),WJ=new _s(rr.comparator);function cn(...t){let e=WJ;for(const r of t)e=e.add(r);return e}const GJ=new _s(Qr);function h7(){return GJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:u2(e)?"-0":e}}function BD(t){return{integerValue:""+t}}function VD(t,e){return fD(e)?BD(e):p7(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this._=void 0}}function KJ(t,e,r){return t instanceof b1?(function(s,a){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Pb(a)&&(a=jb(a)),a&&(i.fields.__previous_value__=a),{mapValue:i}})(r,e):t instanceof op?zD(t,e):t instanceof lp?$D(t,e):(function(s,a){const i=UD(s,a),o=qC(i)+qC(s.Pe);return H6(i)&&H6(s.Pe)?BD(o):p7(s.serializer,o)})(t,e)}function YJ(t,e,r){return t instanceof op?zD(t,e):t instanceof lp?$D(t,e):r}function UD(t,e){return t instanceof _1?(function(n){return H6(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class b1 extends Lb{}class op extends Lb{constructor(e){super(),this.elements=e}}function zD(t,e){const r=qD(e);for(const n of t.elements)r.some((s=>fd(s,n)))||r.push(n);return{arrayValue:{values:r}}}class lp extends Lb{constructor(e){super(),this.elements=e}}function $D(t,e){let r=qD(e);for(const n of t.elements)r=r.filter((s=>!fd(s,n)));return{arrayValue:{values:r}}}class _1 extends Lb{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function qC(t){return ea(t.integerValue||t.doubleValue)}function qD(t){return h2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,r){this.field=e,this.transform=r}}function XJ(t,e){return t.field.isEqual(e.field)&&(function(n,s){return n instanceof op&&s instanceof op||n instanceof lp&&s instanceof lp?g1(n.elements,s.elements,fd):n instanceof _1&&s instanceof _1?fd(n.Pe,s.Pe):n instanceof b1&&s instanceof b1})(t.transform,e.transform)}class QJ{constructor(e,r){this.version=e,this.transformResults=r}}class ta{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ta}static exists(e){return new ta(void 0,e)}static updateTime(e){return new ta(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Aw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fb{}function HD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new H1(t.key,ta.none()):new q1(t.key,t.data,ta.none());{const r=t.data,n=yo.empty();let s=new _s(Us.comparator);for(let a of e.fields)if(!s.has(a)){let i=r.field(a);i===null&&a.length>1&&(a=a.popLast(),i=r.field(a)),i===null?n.delete(a):n.set(a,i),s=s.add(a)}return new pf(t.key,n,new Tl(s.toArray()),ta.none())}}function JJ(t,e,r){t instanceof q1?(function(s,a,i){const o=s.value.clone(),l=WC(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()})(t,e,r):t instanceof pf?(function(s,a,i){if(!Aw(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=WC(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(WD(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()})(t,e,r):(function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()})(0,e,r)}function jx(t,e,r,n){return t instanceof q1?(function(a,i,o,l){if(!Aw(a.precondition,i))return o;const u=a.value.clone(),d=GC(a.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null})(t,e,r,n):t instanceof pf?(function(a,i,o,l){if(!Aw(a.precondition,i))return o;const u=GC(a.fieldTransforms,l,i),d=i.data;return d.setAll(WD(a)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(a,i,o){return Aw(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o})(t,e,r)}function ZJ(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=UD(n.transform,s||null);a!=null&&(r===null&&(r=yo.empty()),r.set(n.field,a))}return r||null}function HC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&g1(n,s,((a,i)=>XJ(a,i)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class q1 extends Fb{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class pf extends Fb{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function WD(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function WC(t,e,r){const n=new Map;yr(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);n.set(a.field,YJ(i,o,r[s]))}return n}function GC(t,e,r){const n=new Map;for(const s of t){const a=s.transform,i=r.data.field(s.field);n.set(s.field,KJ(a,i,e))}return n}class H1 extends Fb{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m7 extends Fb{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&JJ(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=jx(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=jx(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=MD();return this.mutations.forEach((s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=r.has(s.key)?null:o;const l=HD(i,o);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Er.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),cn())}isEqual(e){return this.batchId===e.batchId&&g1(this.mutations,e.mutations,((r,n)=>HC(r,n)))&&g1(this.baseMutations,e.baseMutations,((r,n)=>HC(r,n)))}}class x7{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){yr(e.mutations.length===n.length);let s=(function(){return HJ})();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,n[i].version);return new x7(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci,zn;function KD(t){switch(t){default:return lr();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function YD(t){if(t===void 0)return Ka("GRPC error has no .code"),ht.UNKNOWN;switch(t){case ci.OK:return ht.OK;case ci.CANCELLED:return ht.CANCELLED;case ci.UNKNOWN:return ht.UNKNOWN;case ci.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case ci.INTERNAL:return ht.INTERNAL;case ci.UNAVAILABLE:return ht.UNAVAILABLE;case ci.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case ci.NOT_FOUND:return ht.NOT_FOUND;case ci.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case ci.ABORTED:return ht.ABORTED;case ci.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case ci.DATA_LOSS:return ht.DATA_LOSS;default:return lr()}}(zn=ci||(ci={}))[zn.OK=0]="OK",zn[zn.CANCELLED=1]="CANCELLED",zn[zn.UNKNOWN=2]="UNKNOWN",zn[zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zn[zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zn[zn.NOT_FOUND=5]="NOT_FOUND",zn[zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",zn[zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",zn[zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",zn[zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zn[zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zn[zn.ABORTED=10]="ABORTED",zn[zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",zn[zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",zn[zn.INTERNAL=13]="INTERNAL",zn[zn.UNAVAILABLE=14]="UNAVAILABLE",zn[zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y5=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ=new G0([4294967295,4294967295],0);function KC(t){const e=XD().encode(t),r=new QF;return r.update(e),new Uint8Array(r.digest())}function YC(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new G0([r,n],0),new G0([s,a],0)]}class v7{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ux(`Invalid padding: ${r}`);if(n<0)throw new ux(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ux(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ux(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=G0.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(G0.fromNumber(n)));return s.compare(tZ)===1&&(s=new G0([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=KC(e),[n,s]=YC(r);for(let a=0;a<this.hashCount;a++){const i=this.Ee(n,s,a);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new v7(a,s,r);return n.forEach((o=>i.insert(o))),i}insert(e){if(this.Ie===0)return;const r=KC(e),[n,s]=YC(r);for(let a=0;a<this.hashCount;a++){const i=this.Ee(n,s,a);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ux extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,ry.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ty(Er.min(),s,new Fs(Qr),Il(),cn())}}class ry{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ry(n,r,cn(),cn(),cn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class QD{constructor(e,r){this.targetId=e,this.me=r}}class JD{constructor(e,r,n=ya.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class XC{constructor(){this.fe=0,this.ge=JC(),this.pe=ya.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=cn(),r=cn(),n=cn();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:lr()}})),new ry(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=JC()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,yr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Il(),this.qe=QC(),this.Qe=new Fs(Qr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:lr()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,s)=>{this.ze(s)&&r(s)}))}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const a=s.target;if(m5(a))if(n===0){const i=new rr(a.path);this.Ue(r,i,Vs.newNoDocument(i,Er.min()))}else yr(n===1);else{const i=this.Ye(r);if(i!==n){const o=this.Ze(e),l=o?this.Xe(o,e,i):1;if(l!==0){this.je(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}y5?.et((function(d,p,g,m,x){var y,b,S,P,T,O;const W={localCacheCount:d,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Y=p.unchangedNames;return Y&&(W.bloomFilter={applied:x===0,hashCount:(y=Y?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(P=(S=(b=Y?.bits)===null||b===void 0?void 0:b.bitmap)===null||S===void 0?void 0:S.length)!==null&&P!==void 0?P:0,padding:(O=(T=Y?.bits)===null||T===void 0?void 0:T.padding)!==null&&O!==void 0?O:0,mightContain:L=>{var A;return(A=m?.mightContain(L))!==null&&A!==void 0&&A}}),W})(i,e.me,this.Le.tt(),o,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let i,o;try{i=sf(n).toUint8Array()}catch(l){if(l instanceof vD)return oc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new v7(i,s,a)}catch(l){return oc(l instanceof ux?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach((a=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,a,null),s++)})),s}rt(e){const r=new Map;this.Be.forEach(((a,i)=>{const o=this.Je(i);if(o){if(a.current&&m5(o.target)){const l=new rr(o.target.path);this.ke.get(l)!==null||this.it(i,l)||this.Ue(i,l,Vs.newNoDocument(l,e))}a.be&&(r.set(i,a.ve()),a.Ce())}}));let n=cn();this.qe.forEach(((a,i)=>{let o=!0;i.forEachWhile((l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(a))})),this.ke.forEach(((a,i)=>i.setReadTime(e)));const s=new ty(e,r,this.Qe,this.ke,n);return this.ke=Il(),this.qe=QC(),this.Qe=new Fs(Qr),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new XC,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new _s(Qr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ft("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new XC),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function QC(){return new Fs(rr.comparator)}function JC(){return new Fs(rr.comparator)}const nZ={asc:"ASCENDING",desc:"DESCENDING"},sZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aZ={and:"AND",or:"OR"};class iZ{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function X6(t,e){return t.useProto3Json||X2(e)?e:{value:e}}function k1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oZ(t,e){return k1(t,e.toTimestamp())}function Ya(t){return yr(!!t),Er.fromTimestamp((function(r){const n=nf(r);return new na(n.seconds,n.nanos)})(t))}function w7(t,e){return Q6(t,e).canonicalString()}function Q6(t,e){const r=(function(s){return new On(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?r:r.child(e)}function eO(t){const e=On.fromString(t);return yr(uO(e)),e}function m2(t,e){return w7(t.databaseId,e.path)}function sd(t,e){const r=eO(e);if(r.get(1)!==t.databaseId.projectId)throw new Rt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Rt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new rr(nO(r))}function tO(t,e){return w7(t.databaseId,e)}function rO(t){const e=eO(t);return e.length===4?On.emptyPath():nO(e)}function J6(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nO(t){return yr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ZC(t,e,r){return{name:m2(t,e),fields:r.value.mapValue.fields}}function sO(t,e,r){const n=sd(t,e.name),s=Ya(e.updateTime),a=e.createTime?Ya(e.createTime):Er.min(),i=new yo({mapValue:{fields:e.fields}}),o=Vs.newFoundDocument(n,s,a,i);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function lZ(t,e){return"found"in e?(function(n,s){yr(!!s.found),s.found.name,s.found.updateTime;const a=sd(n,s.found.name),i=Ya(s.found.updateTime),o=s.found.createTime?Ya(s.found.createTime):Er.min(),l=new yo({mapValue:{fields:s.found.fields}});return Vs.newFoundDocument(a,i,o,l)})(t,e):"missing"in e?(function(n,s){yr(!!s.missing),yr(!!s.readTime);const a=sd(n,s.missing),i=Ya(s.readTime);return Vs.newNoDocument(a,i)})(t,e):lr()}function cZ(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:lr()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(u,d){return u.useProto3Json?(yr(d===void 0||typeof d=="string"),ya.fromBase64String(d||"")):(yr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ya.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&(function(u){const d=u.code===void 0?ht.UNKNOWN:YD(u.code);return new Rt(d,u.message||"")})(i);r=new JD(n,s,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=sd(t,n.document.name),a=Ya(n.document.updateTime),i=n.document.createTime?Ya(n.document.createTime):Er.min(),o=new yo({mapValue:{fields:n.document.fields}}),l=Vs.newFoundDocument(s,a,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new Tw(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=sd(t,n.document),a=n.readTime?Ya(n.readTime):Er.min(),i=Vs.newNoDocument(s,a),o=n.removedTargetIds||[];r=new Tw([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=sd(t,n.document),a=n.removedTargetIds||[];r=new Tw([],a,s,null)}else{if(!("filter"in e))return lr();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,i=new eZ(s,a),o=n.targetId;r=new QD(o,i)}}return r}function g2(t,e){let r;if(e instanceof q1)r={update:ZC(t,e.key,e.value)};else if(e instanceof H1)r={delete:m2(t,e.key)};else if(e instanceof pf)r={update:ZC(t,e.key,e.data),updateMask:mZ(e.fieldMask)};else{if(!(e instanceof m7))return lr();r={verify:m2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,i){const o=i.transform;if(o instanceof b1)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof op)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof lp)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof _1)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw lr()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:oZ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:lr()})(t,e.precondition)),r}function Z6(t,e){const r=e.currentDocument?(function(a){return a.updateTime!==void 0?ta.updateTime(Ya(a.updateTime)):a.exists!==void 0?ta.exists(a.exists):ta.none()})(e.currentDocument):ta.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(i,o){let l=null;if("setToServerValue"in o)yr(o.setToServerValue==="REQUEST_TIME"),l=new b1;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new op(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new lp(d)}else"increment"in o?l=new _1(i,o.increment):lr();const u=Us.fromServerFormat(o.fieldPath);return new ey(u,l)})(t,s))):[];if(e.update){e.update.name;const s=sd(t,e.update.name),a=new yo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=(function(l){const u=l.fieldPaths||[];return new Tl(u.map((d=>Us.fromServerFormat(d))))})(e.updateMask);return new pf(s,a,i,r,n)}return new q1(s,a,r,n)}if(e.delete){const s=sd(t,e.delete);return new H1(s,r)}if(e.verify){const s=sd(t,e.verify);return new m7(s,r)}return lr()}function uZ(t,e){return t&&t.length>0?(yr(e!==void 0),t.map((r=>(function(s,a){let i=s.updateTime?Ya(s.updateTime):Ya(a);return i.isEqual(Er.min())&&(i=Ya(a)),new QJ(i,s.transformResults||[])})(r,e)))):[]}function aO(t,e){return{documents:[tO(t,e.path)]}}function Db(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=tO(t,s);const a=(function(u){if(u.length!==0)return cO(ps.create(u,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const i=(function(u){if(u.length!==0)return u.map((d=>(function(g){return{field:ah(g.field),direction:fZ(g.dir)}})(d)))})(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=X6(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{_t:r,parent:s}}function iO(t,e,r,n){const{_t:s,parent:a}=Db(t,e),i={},o=[];let l=0;return r.forEach((u=>{const d=n?u.alias:"aggregate_"+l++;i[d]=u.alias,u.aggregateType==="count"?o.push({alias:d,count:{}}):u.aggregateType==="avg"?o.push({alias:d,avg:{field:ah(u.fieldPath)}}):u.aggregateType==="sum"&&o.push({alias:d,sum:{field:ah(u.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:a}}function oO(t){let e=rO(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){yr(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=(function(p){const g=lO(p);return g instanceof ps&&d7(g)?g.getFilters():[g]})(r.where));let i=[];r.orderBy&&(i=(function(p){return p.map((g=>(function(x){return new p2(jm(x.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(g)))})(r.orderBy));let o=null;r.limit&&(o=(function(p){let g;return g=typeof p=="object"?p.value:p,X2(g)?null:g})(r.limit));let l=null;r.startAt&&(l=(function(p){const g=!!p.before,m=p.values||[];return new Ch(m,g)})(r.startAt));let u=null;return r.endAt&&(u=(function(p){const g=!p.before,m=p.values||[];return new Ch(m,g)})(r.endAt)),ID(e,s,i,a,o,"F",l,u)}function dZ(t,e){const r=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lr()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function lO(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=jm(r.unaryFilter.field);return Mn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=jm(r.unaryFilter.field);return Mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=jm(r.unaryFilter.field);return Mn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jm(r.unaryFilter.field);return Mn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lr()}})(t):t.fieldFilter!==void 0?(function(r){return Mn.create(jm(r.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lr()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return ps.create(r.compositeFilter.filters.map((n=>lO(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return lr()}})(r.compositeFilter.op))})(t):lr()}function fZ(t){return nZ[t]}function hZ(t){return sZ[t]}function pZ(t){return aZ[t]}function ah(t){return{fieldPath:t.canonicalString()}}function jm(t){return Us.fromServerFormat(t.fieldPath)}function cO(t){return t instanceof Mn?(function(r){if(r.op==="=="){if(DC(r.value))return{unaryFilter:{field:ah(r.field),op:"IS_NAN"}};if(FC(r.value))return{unaryFilter:{field:ah(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(DC(r.value))return{unaryFilter:{field:ah(r.field),op:"IS_NOT_NAN"}};if(FC(r.value))return{unaryFilter:{field:ah(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ah(r.field),op:hZ(r.op),value:r.value}}})(t):t instanceof ps?(function(r){const n=r.getFilters().map((s=>cO(s)));return n.length===1?n[0]:{compositeFilter:{op:pZ(r.op),filters:n}}})(t):lr()}function mZ(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function uO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,r,n,s,a=Er.min(),i=Er.min(),o=ya.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ud(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.ct=e}}function gZ(t,e){let r;if(e.document)r=sO(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=rr.fromSegments(e.noDocument.path),s=up(e.noDocument.readTime);r=Vs.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return lr();{const n=rr.fromSegments(e.unknownDocument.path),s=up(e.unknownDocument.version);r=Vs.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime((function(s){const a=new na(s[0],s[1]);return Er.fromTimestamp(a)})(e.readTime)),r}function eA(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:v5(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,i){return{name:m2(a,i.key),fields:i.data.value.mapValue.fields,updateTime:k1(a,i.version.toTimestamp()),createTime:k1(a,i.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:cp(e.version)};else{if(!e.isUnknownDocument())return lr();n.unknownDocument={path:r.path.toArray(),version:cp(e.version)}}return n}function v5(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function cp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function up(t){const e=new na(t.seconds,t.nanoseconds);return Er.fromTimestamp(e)}function P0(t,e){const r=(e.baseMutations||[]).map((a=>Z6(t.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const i=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>Z6(t.ct,a))),s=na.fromMillis(e.localWriteTimeMs);return new g7(e.batchId,s,r,n)}function dx(t){const e=up(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?up(t.lastLimboFreeSnapshotVersion):Er.min();let n;return n=(function(a){return a.documents!==void 0})(t.query)?(function(a){return yr(a.documents.length===1),Xo($1(rO(a.documents[0])))})(t.query):(function(a){return Xo(oO(a))})(t.query),new Ud(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ya.fromBase64String(t.resumeToken))}function fO(t,e){const r=cp(e.snapshotVersion),n=cp(e.lastLimboFreeSnapshotVersion);let s;s=m5(e.target)?aO(t.ct,e.target):Db(t.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ip(e.target),readTime:r,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function b7(t){const e=oO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?x5(e,e.limit,"L"):e}function z_(t,e){return new y7(e.largestBatchId,Z6(t.ct,e.overlayMutation))}function tA(t,e){const r=e.path.lastSegment();return[t,Yo(e.path.popLast()),r]}function rA(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:cp(n.readTime),documentKey:Yo(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{getBundleMetadata(e,r){return nA(e).get(r).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:up(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,r){return nA(e).put((function(s){return{bundleId:s.id,createTime:cp(Ya(s.createTime)),version:s.version}})(r))}getNamedQuery(e,r){return sA(e).get(r).next((n=>{if(n)return(function(a){return{name:a.name,query:b7(a.bundledQuery),readTime:up(a.readTime)}})(n)}))}saveNamedQuery(e,r){return sA(e).put((function(s){return{name:s.name,readTime:cp(Ya(s.readTime)),bundledQuery:s.bundledQuery}})(r))}}function nA(t){return Pi(t,"bundles")}function sA(t){return Pi(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Ob(e,n)}getOverlay(e,r){return Wg(e).get(tA(this.userId,r)).next((n=>n?z_(this.serializer,n):null))}getOverlays(e,r){const n=Qu();return Je.forEach(r,(s=>this.getOverlay(e,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(e,r,n){const s=[];return n.forEach(((a,i)=>{const o=new y7(r,i);s.push(this.ht(e,o))})),Je.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach((i=>s.add(Yo(i.getCollectionPath()))));const a=[];return s.forEach((i=>{const o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);a.push(Wg(e).j("collectionPathOverlayIndex",o))})),Je.waitFor(a)}getOverlaysForCollection(e,r,n){const s=Qu(),a=Yo(r),i=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Wg(e).U("collectionPathOverlayIndex",i).next((o=>{for(const l of o){const u=z_(this.serializer,l);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,r,n,s){const a=Qu();let i;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Wg(e).J({index:"collectionGroupOverlayIndex",range:o},((l,u,d)=>{const p=z_(this.serializer,u);a.size()<s||p.largestBatchId===i?(a.set(p.getKey(),p),i=p.largestBatchId):d.done()})).next((()=>a))}ht(e,r){return Wg(e).put((function(s,a,i){const[o,l,u]=tA(a,i.mutation.key);return{userId:a,collectionPath:l,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:g2(s.ct,i.mutation)}})(this.serializer,this.userId,r))}}function Wg(t){return Pi(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{Pt(e){return Pi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r?.value;return n?ya.fromUint8Array(n):ya.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(ea(e.integerValue));else if("doubleValue"in e){const n=ea(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),u2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=nf(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(sf(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?wD(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Rb(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):lr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const a=e.fields||{};this.dt(r,53);const i="value",o=((s=(n=a[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(ea(o)),this.Vt(i,r),this.Tt(a[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),rr.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}j0.vt=new j0;function vZ(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function aA(t){const e=64-(function(n){let s=0;for(let a=0;a<8;++a){const i=vZ(255&n[a]);if(s+=i,i!==8)break}return s})(t);return Math.ceil(e/8)}class wZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=aA(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=aA(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(a){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,a,!1),new Uint8Array(i.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class bZ{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class _Z{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Gg{constructor(){this.jt=new wZ,this.Ht=new bZ(this.jt),this.Jt=new _Z(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new R0(this.indexId,this.documentKey,this.arrayValue,n)}}function Yf(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=iA(t.arrayValue,e.arrayValue),r!==0?r:(r=iA(t.directionalValue,e.directionalValue),r!==0?r:rr.comparator(t.documentKey,e.documentKey)))}function iA(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.Xt=new _s(((r,n)=>Us.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(yr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=z6(e);if(r!==void 0&&!this.sn(r))return!1;const n=N0(e);let s=new Set,a=0,i=0;for(;a<n.length&&this.sn(n[a]);++a)s=s.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=n[a];if(!this.on(o,l)||!this._n(this.en[i++],l))return!1}++a}for(;a<n.length;++a){const o=n[a];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new _s(Us.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new K0(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new K0(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new K0(n.field,n.dir==="asc"?0:1)));return new x1(x1.UNKNOWN_ID,this.collectionId,r,y1.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){var e,r;if(yr(t instanceof Mn||t instanceof ps),t instanceof Mn){if(t instanceof TD){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((a=>Mn.create(t.field,"==",a))))||[];return ps.create(s,"or")}return t}const n=t.filters.map((s=>hO(s)));return ps.create(n,t.op)}function kZ(t){if(t.getFilters().length===0)return[];const e=rk(hO(t));return yr(pO(e)),ek(e)||tk(e)?[e]:e.getFilters()}function ek(t){return t instanceof Mn}function tk(t){return t instanceof ps&&d7(t)}function pO(t){return ek(t)||tk(t)||(function(r){if(r instanceof ps&&W6(r)){for(const n of r.getFilters())if(!ek(n)&&!tk(n))return!1;return!0}return!1})(t)}function rk(t){if(yr(t instanceof Mn||t instanceof ps),t instanceof Mn)return t;if(t.filters.length===1)return rk(t.filters[0]);const e=t.filters.map((n=>rk(n)));let r=ps.create(e,t.op);return r=w5(r),pO(r)?r:(yr(r instanceof ps),yr(w1(r)),yr(r.filters.length>1),r.filters.reduce(((n,s)=>_7(n,s))))}function _7(t,e){let r;return yr(t instanceof Mn||t instanceof ps),yr(e instanceof Mn||e instanceof ps),r=t instanceof Mn?e instanceof Mn?(function(s,a){return ps.create([s,a],"and")})(t,e):lA(t,e):e instanceof Mn?lA(e,t):(function(s,a){if(yr(s.filters.length>0&&a.filters.length>0),w1(s)&&w1(a))return ED(s,a.getFilters());const i=W6(s)?s:a,o=W6(s)?a:s,l=i.filters.map((u=>_7(u,o)));return ps.create(l,"or")})(t,e),w5(r)}function lA(t,e){if(w1(e))return ED(e,t.getFilters());{const r=e.filters.map((n=>_7(t,n)));return ps.create(r,"or")}}function w5(t){if(yr(t instanceof Mn||t instanceof ps),t instanceof Mn)return t;const e=t.getFilters();if(e.length===1)return w5(e[0]);if(SD(t))return t;const r=e.map((s=>w5(s))),n=[];return r.forEach((s=>{s instanceof Mn?n.push(s):s instanceof ps&&(s.op===t.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:ps.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(){this.un=new k7}addToCollectionParentIndex(e,r){return this.un.add(r),Je.resolve()}getCollectionParents(e,r){return Je.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Je.resolve()}deleteFieldIndex(e,r){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,r){return Je.resolve()}getDocumentsMatchingTarget(e,r){return Je.resolve(null)}getIndexType(e,r){return Je.resolve(0)}getFieldIndexes(e,r){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,r){return Je.resolve(lc.min())}getMinOffsetFromCollectionGroup(e,r){return Je.resolve(lc.min())}updateCollectionGroup(e,r,n){return Je.resolve()}updateIndexEntries(e,r){return Je.resolve()}}class k7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new _s(On.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new _s(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Uint8Array(0);class NZ{constructor(e,r){this.databaseId=r,this.cn=new k7,this.ln=new hf((n=>ip(n)),((n,s)=>Q2(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const a={collectionId:n,parent:Yo(s)};return cA(e).put(a)}return Je.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[iD(r),""],!1,!0);return cA(e).U(s).next((a=>{for(const i of a){if(i.collectionId!==r)break;n.push(Xu(i.parent))}return n}))}addFieldIndex(e,r){const n=Kg(e),s=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(r);delete s.indexId;const a=n.add(s);if(r.indexState){const i=xm(e);return a.next((o=>{i.put(rA(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return a.next()}deleteFieldIndex(e,r){const n=Kg(e),s=xm(e),a=gm(e);return n.delete(r.indexId).next((()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Kg(e),n=gm(e),s=xm(e);return r.j().next((()=>n.j())).next((()=>s.j()))}createTargetIndexes(e,r){return Je.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const a=new oA(n).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,r){const n=gm(e);let s=!0;const a=new Map;return Je.forEach(this.hn(r),(i=>this.Pn(e,i).next((o=>{s&&(s=!!o),a.set(i,o)})))).next((()=>{if(s){let i=cn();const o=[];return Je.forEach(a,((l,u)=>{Ft("IndexedDbIndexManager",`Using index ${(function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(l)} to execute ${ip(r)}`);const d=(function(T,O){const W=z6(O);if(W===void 0)return null;for(const Y of g5(T,W.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null})(u,l),p=(function(T,O){const W=new Map;for(const Y of N0(O))for(const L of g5(T,Y.fieldPath))switch(L.op){case"==":case"in":W.set(Y.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return W.set(Y.fieldPath.canonicalString(),L.value),Array.from(W.values())}return null})(u,l),g=(function(T,O){const W=[];let Y=!0;for(const L of N0(O)){const A=L.kind===0?UC(T,L.fieldPath,T.startAt):zC(T,L.fieldPath,T.startAt);W.push(A.value),Y&&(Y=A.inclusive)}return new Ch(W,Y)})(u,l),m=(function(T,O){const W=[];let Y=!0;for(const L of N0(O)){const A=L.kind===0?zC(T,L.fieldPath,T.endAt):UC(T,L.fieldPath,T.endAt);W.push(A.value),Y&&(Y=A.inclusive)}return new Ch(W,Y)})(u,l),x=this.In(l,u,g),y=this.In(l,u,m),b=this.Tn(l,u,p),S=this.En(l.indexId,d,x,g.inclusive,y,m.inclusive,b);return Je.forEach(S,(P=>n.G(P,r.limit).next((T=>{T.forEach((O=>{const W=rr.fromSegments(O.documentKey);i.has(W)||(i=i.add(W),o.push(W))}))}))))})).next((()=>o))}return Je.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=kZ(ps.create(e.filters,"and")).map((n=>K6(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,s,a,i,o){const l=(r!=null?r.length:1)*Math.max(n.length,a.length),u=l/(r!=null?r.length:1),d=[];for(let p=0;p<l;++p){const g=r?this.dn(r[p/u]):Cv,m=this.An(e,g,n[p%u],s),x=this.Rn(e,g,a[p%u],i),y=o.map((b=>this.An(e,g,b,!0)));d.push(...this.createRange(m,x,y))}return d}An(e,r,n,s){const a=new R0(e,rr.empty(),r,n);return s?a:a.Zt()}Rn(e,r,n,s){const a=new R0(e,rr.empty(),r,n);return s?a.Zt():a}Pn(e,r){const n=new oA(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let i=null;for(const o of a)n.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i}))}getIndexType(e,r){let n=2;const s=this.hn(r);return Je.forEach(s,(a=>this.Pn(e,a).next((i=>{i?n!==0&&i.fields.length<(function(l){let u=new _s(Us.comparator),d=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:u=u.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(d?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(i){return i.limit!==null})(r)&&s.length>1&&n===2?1:n))}Vn(e,r){const n=new Gg;for(const s of N0(e)){const a=r.data.field(s.fieldPath);if(a==null)return null;const i=n.Yt(s.kind);j0.vt.It(a,i)}return n.zt()}dn(e){const r=new Gg;return j0.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Gg;return j0.vt.It(ap(this.databaseId,r),n.Yt((function(a){const i=N0(a);return i.length===0?0:i[i.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Gg);let a=0;for(const i of N0(e)){const o=n[a++];for(const l of s)if(this.fn(r,i.fieldPath)&&h2(o))s=this.gn(s,i,o);else{const u=l.Yt(i.kind);j0.vt.It(o,u)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],a=[];for(const i of n.arrayValue.values||[])for(const o of s){const l=new Gg;l.seed(o.zt()),j0.vt.It(i,l.Yt(r.kind)),a.push(l)}return a}fn(e,r){return!!e.filters.find((n=>n instanceof Mn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Kg(e),s=xm(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((a=>{const i=[];return Je.forEach(a,(o=>s.get([o.indexId,this.uid]).next((l=>{i.push((function(d,p){const g=p?new y1(p.sequenceNumber,new lc(up(p.readTime),new rr(Xu(p.documentKey)),p.largestBatchId)):y1.empty(),m=d.fields.map((([x,y])=>new K0(Us.fromServerFormat(x),y)));return new x1(d.indexId,d.collectionGroup,m,g)})(o,l))})))).next((()=>i))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,s)=>{const a=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Qr(n.collectionGroup,s.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const s=Kg(e),a=xm(e);return this.yn(e).next((i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((o=>Je.forEach(o,(l=>a.put(rA(l.indexId,this.uid,i,n))))))))}updateIndexEntries(e,r){const n=new Map;return Je.forEach(r,((s,a)=>{const i=n.get(s.collectionGroup);return(i?Je.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next((o=>(n.set(s.collectionGroup,o),Je.forEach(o,(l=>this.wn(e,s,l).next((u=>{const d=this.Sn(a,l);return u.isEqual(d)?Je.resolve():this.bn(e,a,l,u,d)})))))))}))}Dn(e,r,n,s){return gm(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return gm(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=gm(e);let a=new _s(Yf);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((i,o)=>{a=a.add(new R0(n.indexId,r,o.arrayValue,o.directionalValue))})).next((()=>a))}Sn(e,r){let n=new _s(Yf);const s=this.Vn(r,e);if(s==null)return n;const a=z6(r);if(a!=null){const i=e.data.field(a.fieldPath);if(h2(i))for(const o of i.arrayValue.values||[])n=n.add(new R0(r.indexId,e.key,this.dn(o),s))}else n=n.add(new R0(r.indexId,e.key,Cv,s));return n}bn(e,r,n,s,a){Ft("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return(function(l,u,d,p,g){const m=l.getIterator(),x=u.getIterator();let y=mm(m),b=mm(x);for(;y||b;){let S=!1,P=!1;if(y&&b){const T=d(y,b);T<0?P=!0:T>0&&(S=!0)}else y!=null?P=!0:S=!0;S?(p(b),b=mm(x)):P?(g(y),y=mm(m)):(y=mm(m),b=mm(x))}})(s,a,Yf,(o=>{i.push(this.Dn(e,r,n,o))}),(o=>{i.push(this.vn(e,r,n,o))})),Je.waitFor(i)}yn(e){let r=1;return xm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,a)=>{a.done(),r=s.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((i,o)=>Yf(i,o))).filter(((i,o,l)=>!o||Yf(i,l[o-1])!==0));const s=[];s.push(e);for(const i of n){const o=Yf(i,e),l=Yf(i,r);if(o===0)s[0]=e.Zt();else if(o>0&&l<0)s.push(i),s.push(i.Zt());else if(l>0)break}s.push(r);const a=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const o=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,Cv,[]],l=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,Cv,[]];a.push(IDBKeyRange.bound(o,l))}return a}Cn(e,r){return Yf(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(uA)}getMinOffset(e,r){return Je.mapArray(this.hn(r),(n=>this.Pn(e,n).next((s=>s||lr())))).next(uA)}}function cA(t){return Pi(t,"collectionParents")}function gm(t){return Pi(t,"indexEntries")}function Kg(t){return Pi(t,"indexConfiguration")}function xm(t){return Pi(t,"indexState")}function uA(t){yr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;l7(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new lc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uo{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Uo(e,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),a=[],i=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:i},((d,p,g)=>(o++,g.delete())));a.push(l.next((()=>{yr(o===1)})));const u=[];for(const d of r.mutations){const p=hD(e,d.key.path,r.batchId);a.push(s.delete(p)),u.push(d.key)}return Je.waitFor(a).next((()=>u))}function b5(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(41943040,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);class Mb{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){yr(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Mb(a,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xf(e).J({index:"userMutationsIndex",range:n},((s,a,i)=>{r=!1,i.done()})).next((()=>r))}addMutationBatch(e,r,n,s){const a=Rm(e),i=Xf(e);return i.add({}).next((o=>{yr(typeof o=="number");const l=new g7(o,r,n,s),u=(function(m,x,y){const b=y.baseMutations.map((P=>g2(m.ct,P))),S=y.mutations.map((P=>g2(m.ct,P)));return{userId:x,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:b,mutations:S}})(this.serializer,this.userId,l),d=[];let p=new _s(((g,m)=>Qr(g.canonicalString(),m.canonicalString())));for(const g of s){const m=hD(this.userId,g.key.path,o);p=p.add(g.key.path.popLast()),d.push(i.put(u)),d.push(a.put(m,fJ))}return p.forEach((g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Fn[o]=l.keys()})),Je.waitFor(d).next((()=>l))}))}lookupMutationBatch(e,r){return Xf(e).get(r).next((n=>n?(yr(n.userId===this.userId),P0(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Je.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Xf(e).J({index:"userMutationsIndex",range:s},((i,o,l)=>{o.userId===this.userId&&(yr(o.batchId>=n),a=P0(this.serializer,o)),l.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Xf(e).J({index:"userMutationsIndex",range:r,reverse:!0},((s,a,i)=>{n=a.batchId,i.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xf(e).U("userMutationsIndex",r).next((n=>n.map((s=>P0(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Sw(this.userId,r.path),s=IDBKeyRange.lowerBound(n),a=[];return Rm(e).J({range:s},((i,o,l)=>{const[u,d,p]=i,g=Xu(d);if(u===this.userId&&r.path.isEqual(g))return Xf(e).get(p).next((m=>{if(!m)throw lr();yr(m.userId===this.userId),a.push(P0(this.serializer,m))}));l.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new _s(Qr);const s=[];return r.forEach((a=>{const i=Sw(this.userId,a.path),o=IDBKeyRange.lowerBound(i),l=Rm(e).J({range:o},((u,d,p)=>{const[g,m,x]=u,y=Xu(m);g===this.userId&&a.path.isEqual(y)?n=n.add(x):p.done()}));s.push(l)})),Je.waitFor(s).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,a=Sw(this.userId,n),i=IDBKeyRange.lowerBound(a);let o=new _s(Qr);return Rm(e).J({range:i},((l,u,d)=>{const[p,g,m]=l,x=Xu(g);p===this.userId&&n.isPrefixOf(x)?x.length===s&&(o=o.add(m)):d.done()})).next((()=>this.xn(e,o)))}xn(e,r){const n=[],s=[];return r.forEach((a=>{s.push(Xf(e).get(a).next((i=>{if(i===null)throw lr();yr(i.userId===this.userId),n.push(P0(this.serializer,i))})))})),Je.waitFor(s).next((()=>n))}removeMutationBatch(e,r){return mO(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Je.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Je.resolve();const n=IDBKeyRange.lowerBound((function(i){return[i]})(this.userId)),s=[];return Rm(e).J({range:n},((a,i,o)=>{if(a[0]===this.userId){const l=Xu(a[1]);s.push(l)}else o.done()})).next((()=>{yr(s.length===0)}))}))}containsKey(e,r){return gO(e,this.userId,r)}Nn(e){return xO(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function gO(t,e,r){const n=Sw(e,r.path),s=n[1],a=IDBKeyRange.lowerBound(n);let i=!1;return Rm(t).J({range:a,H:!0},((o,l,u)=>{const[d,p,g]=o;d===e&&p===s&&(i=!0),u.done()})).next((()=>i))}function Xf(t){return Pi(t,"mutations")}function Rm(t){return Pi(t,"documentMutations")}function xO(t){return Pi(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new dp(0)}static kn(){return new dp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new dp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Er.fromTimestamp(new na(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>ym(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(yr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let s=0;const a=[];return ym(e).J(((i,o)=>{const l=dx(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,a.push(this.removeTargetData(e,l)))})).next((()=>Je.waitFor(a))).next((()=>s))}forEachTarget(e,r){return ym(e).J(((n,s)=>{const a=dx(s);r(a)}))}qn(e){return fA(e).get("targetGlobalKey").next((r=>(yr(r!==null),r)))}Qn(e,r){return fA(e).put("targetGlobalKey",r)}Kn(e,r){return ym(e).put(fO(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=ip(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return ym(e).J({range:s,index:"queryTargetsIndex"},((i,o,l)=>{const u=dx(o);Q2(r,u.target)&&(a=u,l.done())})).next((()=>a))}addMatchingKeys(e,r,n){const s=[],a=ih(e);return r.forEach((i=>{const o=Yo(i.path);s.push(a.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,i))})),Je.waitFor(s)}removeMatchingKeys(e,r,n){const s=ih(e);return Je.forEach(r,(a=>{const i=Yo(a.path);return Je.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,r){const n=ih(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=ih(e);let a=cn();return s.J({range:n,H:!0},((i,o,l)=>{const u=Xu(i[1]),d=new rr(u);a=a.add(d)})).next((()=>a))}containsKey(e,r){const n=Yo(r.path),s=IDBKeyRange.bound([n],[iD(n)],!1,!0);let a=0;return ih(e).J({index:"documentTargetsIndex",H:!0,range:s},(([i,o],l,u)=>{i!==0&&(a++,u.done())})).next((()=>a>0))}ot(e,r){return ym(e).get(r).next((n=>n?dx(n):null))}}function ym(t){return Pi(t,"targets")}function fA(t){return Pi(t,"targetGlobal")}function ih(t){return Pi(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA([t,e],[r,n]){const s=Qr(t,r);return s===0?Qr(e,n):s}class CZ{constructor(e){this.Un=e,this.buffer=new _s(hA),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();hA(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class yO{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){qh(r)?Ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await $h(r)}await this.Hn(3e5)}))}}class AZ{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Je.resolve(Al.oe);const n=new CZ(r);return this.Jn.forEachTarget(e,(s=>n.zn(s.sequenceNumber))).next((()=>this.Jn.Zn(e,(s=>n.zn(s))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ft("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(dA)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dA):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,a,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,i=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(n=p,o=Date.now(),this.removeTargets(e,n,r)))).next((p=>(a=p,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(u=Date.now(),Im()<=Fn.DEBUG&&Ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:p}))))}}function vO(t,e){return new AZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e,r){this.db=e,this.garbageCollector=vO(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((s=>n+s))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,s)=>r(s)))}addReference(e,r,n){return Av(e,n)}removeReference(e,r,n){return Av(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Av(e,r)}nr(e,r){return(function(s,a){let i=!1;return xO(s).Y((o=>gO(s,o,a).next((l=>(l&&(i=!0),Je.resolve(!l)))))).next((()=>i))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.tr(e,((i,o)=>{if(o<=r){const l=this.nr(e,i).next((u=>{if(!u)return a++,n.getEntry(e,i).next((()=>(n.removeEntry(i,Er.min()),ih(e).delete((function(p){return[0,Yo(p.path)]})(i)))))}));s.push(l)}})).next((()=>Je.waitFor(s))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Av(e,r)}tr(e,r){const n=ih(e);let s,a=Al.oe;return n.J({index:"documentTargetsIndex"},(([i,o],{path:l,sequenceNumber:u})=>{i===0?(a!==Al.oe&&r(new rr(Xu(s)),a),a=u,s=l):a=Al.oe})).next((()=>{a!==Al.oe&&r(new rr(Xu(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Av(t,e){return ih(t).put((function(n,s){return{targetId:0,path:Yo(n.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.changes=new hf((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Je.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return b0(e).put(n)}removeEntry(e,r,n){return b0(e).delete((function(a,i){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],v5(i),o[o.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Vs.newInvalidDocument(r);return b0(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yg(r))},((s,a)=>{n=this.ir(r,a)})).next((()=>n))}sr(e,r){let n={size:0,document:Vs.newInvalidDocument(r)};return b0(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yg(r))},((s,a)=>{n={document:this.ir(r,a),size:b5(a)}})).next((()=>n))}getEntries(e,r){let n=Il();return this._r(e,r,((s,a)=>{const i=this.ir(s,a);n=n.insert(s,i)})).next((()=>n))}ar(e,r){let n=Il(),s=new Fs(rr.comparator);return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o),s=s.insert(a,b5(i))})).next((()=>({documents:n,ur:s})))}_r(e,r,n){if(r.isEmpty())return Je.resolve();let s=new _s(gA);r.forEach((l=>s=s.add(l)));const a=IDBKeyRange.bound(Yg(s.first()),Yg(s.last())),i=s.getIterator();let o=i.getNext();return b0(e).J({index:"documentKeyIndex",range:a},((l,u,d)=>{const p=rr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&gA(o,p)<0;)n(o,null),o=i.getNext();o&&o.isEqual(p)&&(n(o,u),o=i.hasNext()?i.getNext():null),o?d.$(Yg(o)):d.done()})).next((()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,r,n,s,a){const i=r.path,o=[i.popLast().toArray(),i.lastSegment(),v5(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return b0(e).U(IDBKeyRange.bound(o,l,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let d=Il();for(const p of u){const g=this.ir(rr.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Z2(r,g)||s.has(g.key))&&(d=d.insert(g.key,g))}return d}))}getAllFromCollectionGroup(e,r,n,s){let a=Il();const i=mA(r,n),o=mA(r,lc.max());return b0(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},((l,u,d)=>{const p=this.ir(rr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(p.key,p),a.size===s&&d.done()})).next((()=>a))}newChangeBuffer(e){return new PZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return pA(e).get("remoteDocumentGlobalKey").next((r=>(yr(!!r),r)))}rr(e,r){return pA(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=gZ(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Er.min())))return n}return Vs.newInvalidDocument(e)}}function bO(t){return new IZ(t)}class PZ extends wO{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new hf((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const r=[];let n=0,s=new _s(((a,i)=>Qr(a.canonicalString(),i.canonicalString())));return this.changes.forEach(((a,i)=>{const o=this.lr.get(a);if(r.push(this.cr.removeEntry(e,a,o.readTime)),i.isValidDocument()){const l=eA(this.cr.serializer,i);s=s.add(a.path.popLast());const u=b5(l);n+=u-o.size,r.push(this.cr.addEntry(e,a,l))}else if(n-=o.size,this.trackRemovals){const l=eA(this.cr.serializer,i.convertToNoDocument(Er.min()));r.push(this.cr.addEntry(e,a,l))}})),s.forEach((a=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),r.push(this.cr.updateMetadata(e,n)),Je.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:s})=>(s.forEach(((a,i)=>{this.lr.set(a,{size:i,readTime:n.get(a).readTime})})),n)))}}function pA(t){return Pi(t,"remoteDocumentGlobal")}function b0(t){return Pi(t,"remoteDocumentsV14")}function Yg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mA(t,e){const r=e.documentKey.path.toArray();return[t,v5(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function gA(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let a=0;a<r.length-2&&a<n.length-2;++a)if(s=Qr(r[a],n[a]),s)return s;return s=Qr(r.length,n.length),s||(s=Qr(r[r.length-2],n[n.length-2]),s||Qr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,r)))).next((s=>(n!==null&&jx(n.mutation,s,Tl.empty(),na.now()),s)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,cn()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=cn()){const s=Qu();return this.populateOverlays(e,s,r).next((()=>this.computeViews(e,r,s,n).next((a=>{let i=cx();return a.forEach(((o,l)=>{i=i.insert(o,l.overlayedDocument)})),i}))))}getOverlayedDocuments(e,r){const n=Qu();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,cn())))}populateOverlays(e,r,n){const s=[];return n.forEach((a=>{r.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((i,o)=>{r.set(i,o)}))}))}computeViews(e,r,n,s){let a=Il();const i=Px(),o=(function(){return Px()})();return r.forEach(((l,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof pf)?a=a.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),jx(d.mutation,u,d.mutation.getFieldMask(),na.now())):i.set(u.key,Tl.empty())})),this.recalculateAndSaveOverlays(e,a).next((l=>(l.forEach(((u,d)=>i.set(u,d))),r.forEach(((u,d)=>{var p;return o.set(u,new jZ(d,(p=i.get(u))!==null&&p!==void 0?p:null))})),o)))}recalculateAndSaveOverlays(e,r){const n=Px();let s=new Fs(((i,o)=>i-o)),a=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((i=>{for(const o of i)o.keys().forEach((l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||Tl.empty();d=o.applyToLocalView(u,d),n.set(l,d);const p=(s.get(o.batchId)||cn()).add(l);s=s.insert(o.batchId,p)}))})).next((()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,p=MD();d.forEach((g=>{if(!a.has(g)){const m=HD(r.get(g),n.get(g));m!==null&&p.set(g,m),a=a.add(g)}})),i.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Je.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,s){return(function(i){return rr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):f7(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next((a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):Je.resolve(Qu());let o=-1,l=a;return i.next((u=>Je.forEach(u,((d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),a.get(d)?Je.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{l=l.insert(d,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,l,u,cn()))).next((d=>({batchId:o,changes:OD(d)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new rr(r)).next((n=>{let s=cx();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let i=cx();return this.indexManager.getCollectionParents(e,a).next((o=>Je.forEach(o,(l=>{const u=(function(p,g){return new ff(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next((d=>{d.forEach(((p,g)=>{i=i.insert(p,g)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s)))).next((i=>{a.forEach(((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Vs.newInvalidDocument(d)))}));let o=cx();return i.forEach(((l,u)=>{const d=a.get(l);d!==void 0&&jx(d.mutation,u,Tl.empty(),na.now()),Z2(r,u)&&(o=o.insert(l,u))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Je.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(s){return{id:s.id,version:s.version,createTime:Ya(s.createTime)}})(r)),Je.resolve()}getNamedQuery(e,r){return Je.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(s){return{name:s.name,query:b7(s.bundledQuery),readTime:Ya(s.readTime)}})(r)),Je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(){this.overlays=new Fs(rr.comparator),this.Ir=new Map}getOverlay(e,r){return Je.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Qu();return Je.forEach(r,(s=>this.getOverlay(e,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((s,a)=>{this.ht(e,r,a)})),Je.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(n)),Je.resolve()}getOverlaysForCollection(e,r,n){const s=Qu(),a=r.length+1,i=new rr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Je.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new Fs(((u,d)=>u-d));const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=Qu(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Qu(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,d)=>o.set(u,d))),!(o.size()>=s)););return Je.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new y7(r,n));let a=this.Ir.get(r);a===void 0&&(a=cn(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(){this.sessionToken=ya.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.Tr=new _s($i.Er),this.dr=new _s($i.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new $i(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new $i(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new rr(new On([])),n=new $i(r,e),s=new $i(r,e+1),a=[];return this.dr.forEachInRange([n,s],(i=>{this.Vr(i),a.push(i.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new rr(new On([])),n=new $i(r,e),s=new $i(r,e+1);let a=cn();return this.dr.forEachInRange([n,s],(i=>{a=a.add(i.key)})),a}containsKey(e){const r=new $i(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class $i{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return rr.comparator(e.key,r.key)||Qr(e.wr,r.wr)}static Ar(e,r){return Qr(e.wr,r.wr)||rr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new _s($i.Er)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new g7(a,r,n,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new $i(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Je.resolve(i)}lookupMutationBatch(e,r){return Je.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),a=s<0?0:s;return Je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new $i(r,0),s=new $i(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,s],(i=>{const o=this.Dr(i.wr);a.push(o)})),Je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new _s(Qr);return r.forEach((s=>{const a=new $i(s,0),i=new $i(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,i],(o=>{n=n.add(o.wr)}))})),Je.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;rr.isDocumentKey(a)||(a=a.child(""));const i=new $i(new rr(a),0);let o=new _s(Qr);return this.br.forEachWhile((l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.wr)),!0)}),i),Je.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach((n=>{const s=this.Dr(n);s!==null&&r.push(s)})),r}removeMutationBatch(e,r){yr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Je.forEach(r.mutations,(s=>{const a=new $i(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new $i(r,0),s=this.br.firstAfterOrEqual(n);return Je.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(e){this.Mr=e,this.docs=(function(){return new Fs(rr.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Je.resolve(n?n.document.mutableCopy():Vs.newInvalidDocument(r))}getEntries(e,r){let n=Il();return r.forEach((s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Vs.newInvalidDocument(s))})),Je.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=Il();const i=r.path,o=new rr(i.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||l7(lD(d),n)<=0||(s.has(d.key)||Z2(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Je.resolve(a)}getAllFromCollectionGroup(e,r,n,s){lr()}Or(e,r){return Je.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new MZ(this)}getSize(e){return Je.resolve(this.size)}}class MZ extends wO{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)})),Je.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{constructor(e){this.persistence=e,this.Nr=new hf((r=>ip(r)),Q2),this.lastRemoteSnapshotVersion=Er.min(),this.highestTargetId=0,this.Lr=0,this.Br=new S7,this.targetCount=0,this.kr=dp.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,s)=>r(s))),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Je.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new dp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Je.resolve()}updateTargetData(e,r){return this.Kn(r),Je.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.Nr.forEach(((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),Je.waitFor(a).next((()=>s))}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Je.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Je.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach((i=>{a.push(s.markPotentiallyOrphaned(e,i))})),Je.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Je.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Je.resolve(n)}containsKey(e,r){return Je.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Al(0),this.Kr=!1,this.Kr=!0,this.$r=new FZ,this.referenceDelegate=e(this),this.Ur=new BZ(this),this.indexManager=new SZ,this.remoteDocumentCache=(function(s){return new OZ(s)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new dO(r),this.Gr=new RZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new LZ,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new DZ(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ft("MemoryPersistence","Starting transaction:",e);const s=new VZ(this.Qr.next());return this.referenceDelegate.zr(),n(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,r){return Je.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class VZ extends uD{constructor(e){super(),this.currentSequenceNumber=e}}class Bb{constructor(e){this.persistence=e,this.Jr=new S7,this.Yr=null}static Zr(e){return new Bb(e)}get Xr(){if(this.Yr)return this.Yr;throw lr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Je.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Je.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Je.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((s=>this.Xr.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Xr,(n=>{const s=rr.fromPath(n);return this.ei(e,s).next((a=>{a||r.removeEntry(s,Er.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Je.or([()=>Je.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class _5{constructor(e,r){this.persistence=e,this.ti=new hf((n=>Yo(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=vO(this,r)}static Zr(e,r){return new _5(e,r)}zr(){}jr(e){return Je.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((s=>n+s))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}Zn(e,r){return Je.forEach(this.ti,((n,s)=>this.nr(e,n,s).next((a=>a?Je.resolve():r(s)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Or(e,(i=>this.nr(e,i,r).next((o=>{o||(n++,a.removeEntry(i,Er.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),Je.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Je.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),Je.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Ew(e.data.value)),r}nr(e,r,n){return Je.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return Je.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.serializer=e}O(e,r,n,s){const a=new Ib("createOrUpgrade",r);n<1&&s>=1&&((function(l){l.createObjectStore("owner")})(e),(function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IC,{unique:!0}),l.createObjectStore("documentMutations")})(e),xA(e),(function(l){l.createObjectStore("remoteDocuments")})(e));let i=Je.resolve();return n<3&&s>=3&&(n!==0&&((function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")})(e),xA(e)),i=i.next((()=>(function(l){const u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Er.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)})(a)))),n<4&&s>=4&&(n!==0&&(i=i.next((()=>(function(l,u){return u.store("mutations").U().next((d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IC,{unique:!0});const p=u.store("mutations"),g=d.map((m=>p.put(m)));return Je.waitFor(g)}))})(e,a)))),i=i.next((()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&s>=5&&(i=i.next((()=>this.ni(a)))),n<6&&s>=6&&(i=i.next((()=>((function(l){l.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),n<7&&s>=7&&(i=i.next((()=>this.ii(a)))),n<8&&s>=8&&(i=i.next((()=>this.si(e,a)))),n<9&&s>=9&&(i=i.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(i=i.next((()=>this.oi(a)))),n<11&&s>=11&&(i=i.next((()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(l){l.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&s>=12&&(i=i.next((()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:SJ});u.createIndex("collectionPathOverlayIndex",NJ,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",EJ,{unique:!1})})(e)}))),n<13&&s>=13&&(i=i.next((()=>(function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:hJ});u.createIndex("documentKeyIndex",pJ),u.createIndex("collectionGroupIndex",mJ)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&s>=14&&(i=i.next((()=>this.ai(e,a)))),n<15&&s>=15&&(i=i.next((()=>(function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:wJ}).createIndex("sequenceNumberIndex",bJ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:_J}).createIndex("documentKeyIndex",kJ,{unique:!1})})(e)))),n<16&&s>=16&&(i=i.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&s>=17&&(i=i.next((()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)}))),i}ri(e){let r=0;return e.store("remoteDocuments").J(((n,s)=>{r+=b5(s)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((s=>Je.forEach(s,(a=>{const i=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next((o=>Je.forEach(o,(l=>{yr(l.userId===a.userId);const u=P0(this.serializer,l);return mO(e,a.userId,u).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((s=>{const a=[];return n.J(((i,o)=>{const l=new On(i),u=(function(p){return[0,Yo(p)]})(l);a.push(r.get(u).next((d=>d?Je.resolve():(p=>r.put({targetId:0,path:Yo(p),sequenceNumber:s.highestListenSequenceNumber}))(l))))})).next((()=>Je.waitFor(a)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:vJ});const n=r.store("collectionParents"),s=new k7,a=i=>{if(s.add(i)){const o=i.lastSegment(),l=i.popLast();return n.put({collectionId:o,parent:Yo(l)})}};return r.store("remoteDocuments").J({H:!0},((i,o)=>{const l=new On(i);return a(l.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([i,o,l],u)=>{const d=Xu(o);return a(d.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,s)=>{const a=dx(s),i=fO(this.serializer,a);return r.put(i)}))}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J(((a,i)=>{const o=r.store("remoteDocumentsV14"),l=(function(p){return p.document?new rr(On.fromString(p.document.name).popFirst(5)):p.noDocument?rr.fromSegments(p.noDocument.path):p.unknownDocument?rr.fromSegments(p.unknownDocument.path):lr()})(i).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(o.put(u))})).next((()=>Je.waitFor(s)))}ai(e,r){const n=r.store("mutations"),s=bO(this.serializer),a=new N7(Bb.Zr,this.serializer.ct);return n.U().next((i=>{const o=new Map;return i.forEach((l=>{var u;let d=(u=o.get(l.userId))!==null&&u!==void 0?u:cn();P0(this.serializer,l).keys().forEach((p=>d=d.add(p))),o.set(l.userId,d)})),Je.forEach(o,((l,u)=>{const d=new Wi(u),p=Ob.lt(this.serializer,d),g=a.getIndexManager(d),m=Mb.lt(d,this.serializer,g,a.referenceDelegate);return new _O(s,m,p,g).recalculateAndSaveOverlaysForDocumentKeys(new $6(r,Al.oe),l).next()}))}))}}function xA(t){t.createObjectStore("targetDocuments",{keyPath:xJ}).createIndex("documentTargetsIndex",yJ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gJ,{unique:!0}),t.createObjectStore("targetGlobal")}const $_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class E7{constructor(e,r,n,s,a,i,o,l,u,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=a,this.window=i,this.document=o,this.ci=u,this.li=d,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!E7.D())throw new Rt(ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TZ(this,s),this.Ai=r+"main",this.serializer=new dO(l),this.Ri=new nd(this.Ai,this.hi,new UZ(this.serializer)),this.$r=new yZ,this.Ur=new EZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bO(this.serializer),this.Gr=new xZ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ka("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(ht.FAILED_PRECONDITION,$_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Al(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Tv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(qh(e))return Ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Xg(e).get("owner").next((r=>Je.resolve(this.vi(r))))}Ci(e){return Tv(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Pi(r,"clientMetadata");return n.U().next((s=>{const a=this.xi(s,18e5),i=s.filter((o=>a.indexOf(o)===-1));return Je.forEach(i,(o=>n.delete(o.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Je.resolve(!0):Xg(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Rt(ht.FAILED_PRECONDITION,$_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tv(e).U().next((n=>this.xi(n,5e3).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(a||i&&o)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Ft("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new $6(e,Al.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Tv(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Mb.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new NZ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ob.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ft("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",a=(function(l){return l===17?TJ:l===16?AJ:l===15?u7:l===14?gD:l===13?mD:l===12?CJ:l===11?pD:void lr()})(this.hi);let i;return this.Ri.runTransaction(e,s,a,(o=>(i=new $6(o,this.Qr?this.Qr.next():Al.oe),r==="readwrite-primary"?this.wi(i).next((l=>!!l||this.Si(i))).next((l=>{if(!l)throw Ka(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new Rt(ht.FAILED_PRECONDITION,cD);return n(i)})).next((l=>this.Di(i).next((()=>l)))):this.Ki(i).next((()=>n(i)))))).then((o=>(i.raiseOnCommittedEvent(),o)))}Ki(e){return Xg(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Rt(ht.FAILED_PRECONDITION,$_)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xg(e).put("owner",r)}static D(){return nd.D()}bi(e){const r=Xg(e);return r.get("owner").next((n=>this.vi(n)?(Ft("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Je.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ka(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;qF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Ft("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ka("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ka("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xg(t){return Pi(t,"owner")}function Tv(t){return Pi(t,"clientMetadata")}function C7(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=cn(),s=cn();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new A7(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return qF()?8:dD(Ti())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.Yi(e,r).next((i=>{a.result=i})).next((()=>{if(!a.result)return this.Zi(e,r,s,n).next((i=>{a.result=i}))})).next((()=>{if(a.result)return;const i=new zZ;return this.Xi(e,r,i).next((o=>{if(a.result=o,this.zi)return this.es(e,r,i,o.size)}))})).next((()=>a.result))}es(e,r,n,s){return n.documentReadCount<this.ji?(Im()<=Fn.DEBUG&&Ft("QueryEngine","SDK will not create cache indexes for query:",Pm(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Je.resolve()):(Im()<=Fn.DEBUG&&Ft("QueryEngine","Query:",Pm(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Im()<=Fn.DEBUG&&Ft("QueryEngine","The SDK decides to create cache indexes for query:",Pm(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xo(r))):Je.resolve())}Yi(e,r){if($C(r))return Je.resolve(null);let n=Xo(r);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(r.limit!==null&&s===1&&(r=x5(r,null,"F"),n=Xo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const i=cn(...a);return this.Ji.getDocuments(e,i).next((o=>this.indexManager.getMinOffset(e,n).next((l=>{const u=this.ts(r,o);return this.ns(r,u,i,l.readTime)?this.Yi(e,x5(r,null,"F")):this.rs(e,u,r,l)}))))})))))}Zi(e,r,n,s){return $C(r)||s.isEqual(Er.min())?Je.resolve(null):this.Ji.getDocuments(e,n).next((a=>{const i=this.ts(r,a);return this.ns(r,i,n,s)?Je.resolve(null):(Im()<=Fn.DEBUG&&Ft("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pm(r)),this.rs(e,i,r,oD(s,-1)).next((o=>o)))}))}ts(e,r){let n=new _s(FD(e));return r.forEach(((s,a)=>{Z2(e,a)&&(n=n.add(a))})),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,r,n){return Im()<=Fn.DEBUG&&Ft("QueryEngine","Using full collection scan to execute query:",Pm(r)),this.Ji.getDocumentsMatchingQuery(e,r,lc.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next((a=>(r.forEach((i=>{a=a.insert(i.key,i)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Fs(Qr),this._s=new hf((a=>ip(a)),Q2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _O(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function SO(t,e,r,n){return new $Z(t,e,r,n)}async function NO(t,e){const r=Zt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next((a=>(s=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const i=[],o=[];let l=cn();for(const u of s){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next((u=>({hs:u,removedBatchIds:i,addedBatchIds:o})))}))}))}function qZ(t,e){const r=Zt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,d){const p=u.batch,g=p.keys();let m=Je.resolve();return g.forEach((x=>{m=m.next((()=>d.getEntry(l,x))).next((y=>{const b=u.docVersions.get(x);yr(b!==null),y.version.compareTo(b)<0&&(p.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(l,p)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let l=cn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>r.localDocuments.getDocuments(n,s)))}))}function EO(t){const e=Zt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function HZ(t,e){const r=Zt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;o.push(r.Ur.removeMatchingKeys(a,d.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(a,d.addedDocuments,p))));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ya.EMPTY_BYTE_STRING,Er.min()).withLastLimboFreeSnapshotVersion(Er.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(p,m),(function(y,b,S){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,m,d)&&o.push(r.Ur.updateTargetData(a,m))}));let l=Il(),u=cn();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))})),o.push(CO(a,i,e.documentUpdates).next((d=>{l=d.Ps,u=d.Is}))),!n.isEqual(Er.min())){const d=r.Ur.getLastRemoteSnapshotVersion(a).next((p=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n)));o.push(d)}return Je.waitFor(o).next((()=>i.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,l,u))).next((()=>l))})).then((a=>(r.os=s,a)))}function CO(t,e,r){let n=cn(),s=cn();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let i=Il();return r.forEach(((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Er.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Ft("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{Ps:i,Is:s}}))}function WZ(t,e){const r=Zt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function S1(t,e){const r=Zt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return r.Ur.getTargetData(n,e).next((a=>a?(s=a,Je.resolve(s)):r.Ur.allocateTargetId(n).next((i=>(s=new Ud(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function N1(t,e,r){const n=Zt(t),s=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(i=>n.persistence.referenceDelegate.removeTarget(i,s)))}catch(i){if(!qh(i))throw i;Ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function k5(t,e,r){const n=Zt(t);let s=Er.min(),a=cn();return n.persistence.runTransaction("Execute query","readwrite",(i=>(function(l,u,d){const p=Zt(l),g=p._s.get(d);return g!==void 0?Je.resolve(p.os.get(g)):p.Ur.getTargetData(u,d)})(n,i,Xo(e)).next((o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,o.targetId).next((l=>{a=l}))})).next((()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:Er.min(),r?a:cn()))).next((o=>(IO(n,LD(e),o),{documents:o,Ts:a})))))}function AO(t,e){const r=Zt(t),n=Zt(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",(a=>n.ot(a,e).next((i=>i?i.target:null))))}function TO(t,e){const r=Zt(t),n=r.us.get(e)||Er.min();return r.persistence.runTransaction("Get new document changes","readonly",(s=>r.cs.getAllFromCollectionGroup(s,e,oD(n,-1),Number.MAX_SAFE_INTEGER))).then((s=>(IO(r,e,s),s)))}function IO(t,e,r){let n=t.us.get(e)||Er.min();r.forEach(((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.us.set(e,n)}async function GZ(t,e,r,n){const s=Zt(t);let a=cn(),i=Il();for(const u of r){const d=e.Es(u.metadata.name);u.document&&(a=a.add(d));const p=e.ds(u);p.setReadTime(e.As(u.metadata.readTime)),i=i.insert(d,p)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),l=await S1(s,(function(d){return Xo($1(On.fromString(`__bundle__/docs/${d}`)))})(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",(u=>CO(u,o,i).next((d=>(o.apply(u),d))).next((d=>s.Ur.removeMatchingKeysForTargetId(u,l.targetId).next((()=>s.Ur.addMatchingKeys(u,a,l.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is))).next((()=>d.Ps))))))}async function KZ(t,e,r=cn()){const n=await S1(t,Xo(b7(e.bundledQuery))),s=Zt(t);return s.persistence.runTransaction("Save named query","readwrite",(a=>{const i=Ya(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(a,e);const o=n.withResumeToken(ya.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(a,o).next((()=>s.Ur.removeMatchingKeysForTargetId(a,n.targetId))).next((()=>s.Ur.addMatchingKeys(a,r,n.targetId))).next((()=>s.Gr.saveNamedQuery(a,e)))}))}function yA(t,e){return`firestore_clients_${t}_${e}`}function vA(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function q_(t,e){return`firestore_targets_${t}_${e}`}class S5{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let a,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(a=new Rt(s.error.code,s.error.message))),i?new S5(e,r,s.state,a):(Ka("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rx{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(s=new Rt(n.error.code,n.error.message))),a?new Rx(e,n.state,s):(Ka("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class N5{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,a=h7();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=fD(n.activeTargetIds[i]),a=a.add(n.activeTargetIds[i]);return s?new N5(e,a):(Ka("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class T7{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new T7(r.clientId,r.onlineState):(Ka("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nk{constructor(){this.activeTargetIds=h7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H_{constructor(e,r,n,s,a){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Fs(Qr),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=yA(this.persistenceKey,this.ps),this.vs=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new nk),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this.Os=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(yA(this.persistenceKey,n));if(s){const a=N5.Rs(n,s);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(q_(this.persistenceKey,e));if(s){const a=Rx.Rs(e,s);a&&(n=a.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(q_(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((s=>{this.Qs(s)})),this.currentUser=e,n.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ft("SharedClientState","READ",e,r),r}setItem(e,r){Ft("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Ft("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Ka("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(a){let i=Al.oe;if(a!=null)try{const o=JSON.parse(a);yr(typeof o=="number"),i=o}catch(o){Ka("SharedClientState","Failed to read sequence number from WebStorage",o)}return i})(r.newValue);n!==Al.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((s=>this.syncEngine.eo(s))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new S5(this.currentUser,e,r,n),a=vA(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Vs())}Qs(e){const r=vA(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=q_(this.persistenceKey,e),a=new Rx(e,r,n);this.setItem(s,a.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return N5.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),a=n[2]!==void 0?n[2]:null;return S5.Rs(new Wi(a),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return Rx.Rs(s,r)}Ls(e){return T7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),a=this.ks(n),i=[],o=[];return a.forEach((l=>{s.has(l)||i.push(l)})),s.forEach((l=>{a.has(l)||o.push(l)})),this.syncEngine.io(i,o).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=h7();return e.forEach(((n,s)=>{r=r.unionWith(s.activeTargetIds)})),r}}class PO{constructor(){this.so=new nk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nk,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iv=null;function W_(){return Iv===null?Iv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Iv++,"0x"+Iv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="WebChannelConnection";class JZ extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(r,n,s,a,i){const o=W_(),l=this.xo(r,n.toUriEncodedString());Ft("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,i),this.No(r,l,u,s).then((d=>(Ft("RestConnection",`Received RPC '${r}' ${o}: `,d),d)),(d=>{throw oc("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",l,"request:",s),d}))}Lo(r,n,s,a,i,o){return this.Mo(r,n,s,a,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+z1})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,i)=>r[i]=a)),s&&s.headers.forEach(((a,i)=>r[i]=a))}xo(r,n){const s=XZ[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const a=W_();return new Promise(((i,o)=>{const l=new JF;l.setWithCredentials(!0),l.listenOnce(ZF.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case kw.NO_ERROR:const d=l.getResponseJson();Ft(Fo,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),i(d);break;case kw.TIMEOUT:Ft(Fo,`RPC '${e}' ${a} timed out`),o(new Rt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case kw.HTTP_ERROR:const p=l.getStatus();if(Ft(Fo,`RPC '${e}' ${a} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const m=g?.error;if(m&&m.status&&m.message){const x=(function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(S)>=0?S:ht.UNKNOWN})(m.status);o(new Rt(x,m.message))}else o(new Rt(ht.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Rt(ht.UNAVAILABLE,"Connection failed."));break;default:lr()}}finally{Ft(Fo,`RPC '${e}' ${a} completed.`)}}));const u=JSON.stringify(s);Ft(Fo,`RPC '${e}' ${a} sending request:`,s),l.send(r,"POST",u,n,15)}))}Bo(e,r,n){const s=W_(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=rD(),o=tD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=a.join("");Ft(Fo,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=i.createWebChannel(d,l);let g=!1,m=!1;const x=new QZ({Io:b=>{m?Ft(Fo,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(g||(Ft(Fo,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Ft(Fo,`RPC '${e}' stream ${s} sending:`,b),p.send(b))},To:()=>p.close()}),y=(b,S,P)=>{b.listen(S,(T=>{try{P(T)}catch(O){setTimeout((()=>{throw O}),0)}}))};return y(p,lx.EventType.OPEN,(()=>{m||(Ft(Fo,`RPC '${e}' stream ${s} transport opened.`),x.yo())})),y(p,lx.EventType.CLOSE,(()=>{m||(m=!0,Ft(Fo,`RPC '${e}' stream ${s} transport closed`),x.So())})),y(p,lx.EventType.ERROR,(b=>{m||(m=!0,oc(Fo,`RPC '${e}' stream ${s} transport errored:`,b),x.So(new Rt(ht.UNAVAILABLE,"The operation could not be completed")))})),y(p,lx.EventType.MESSAGE,(b=>{var S;if(!m){const P=b.data[0];yr(!!P);const T=P,O=T.error||((S=T[0])===null||S===void 0?void 0:S.error);if(O){Ft(Fo,`RPC '${e}' stream ${s} received error:`,O);const W=O.status;let Y=(function(N){const D=ci[N];if(D!==void 0)return YD(D)})(W),L=O.message;Y===void 0&&(Y=ht.INTERNAL,L="Unknown error status: "+W+" with message "+O.message),m=!0,x.So(new Rt(Y,L)),p.close()}else Ft(Fo,`RPC '${e}' stream ${s} received:`,P),x.bo(P)}})),y(o,eD.STAT_EVENT,(b=>{b.stat===U6.PROXY?Ft(Fo,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===U6.NOPROXY&&Ft(Fo,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{x.wo()}),0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(){return typeof window<"u"?window:null}function Iw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){return new iZ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,r,n=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Ft("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,r,n,s,a,i,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new I7(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ht.RESOURCE_EXHAUSTED?(Ka(r.toString()),Ka("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.Yo===r&&this.P_(n,s)}),(n=>{e((()=>{const s=new Rt(ht.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{n((()=>this.I_(s)))})),this.stream.onMessage((s=>{n((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZZ extends RO{constructor(e,r,n,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=cZ(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Er.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Er.min():i.readTime?Ya(i.readTime):Er.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=J6(this.serializer),r.addTarget=(function(a,i){let o;const l=i.target;if(o=m5(l)?{documents:aO(a,l)}:{query:Db(a,l)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=ZD(a,i.resumeToken);const u=X6(a,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Er.min())>0){o.readTime=k1(a,i.snapshotVersion.toTimestamp());const u=X6(a,i.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const n=dZ(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=J6(this.serializer),r.removeTarget=e,this.a_(r)}}class eee extends RO{constructor(e,r,n,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return yr(!!e.streamToken),this.lastStreamToken=e.streamToken,yr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){yr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=uZ(e.writeResults,e.commitTime),n=Ya(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=J6(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>g2(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Rt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,i])=>this.connection.Mo(e,Q6(r,n),s,a,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Rt(ht.UNKNOWN,a.toString())}))}Lo(e,r,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Lo(e,Q6(r,n),s,i,o,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Rt(ht.UNKNOWN,i.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class ree{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ka(r),this.D_=!1):Ft("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nee{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((i=>{n.enqueueAndForget((async()=>{Wh(this)&&(Ft("RemoteStore","Restarting streams for network reachability change."),await(async function(l){const u=Zt(l);u.L_.add(4),await W1(u),u.q_.set("Unknown"),u.L_.delete(4),await sy(u)})(this))}))})),this.q_=new ree(n,s)}}async function sy(t){if(Wh(t))for(const e of t.B_)await e(!0)}async function W1(t){for(const e of t.B_)await e(!1)}function Vb(t,e){const r=Zt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),R7(r)?j7(r):K1(r).r_()&&P7(r,e))}function E1(t,e){const r=Zt(t),n=K1(r);r.N_.delete(e),n.r_()&&LO(r,e),r.N_.size===0&&(n.r_()?n.o_():Wh(r)&&r.q_.set("Unknown"))}function P7(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Er.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}K1(t).A_(e)}function LO(t,e){t.Q_.xe(e),K1(t).R_(e)}function j7(t){t.Q_=new rZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),K1(t).start(),t.q_.v_()}function R7(t){return Wh(t)&&!K1(t).n_()&&t.N_.size>0}function Wh(t){return Zt(t).L_.size===0}function FO(t){t.Q_=void 0}async function see(t){t.q_.set("Online")}async function aee(t){t.N_.forEach(((e,r)=>{P7(t,e)}))}async function iee(t,e){FO(t),R7(t)?(t.q_.M_(e),j7(t)):t.q_.set("Unknown")}async function oee(t,e,r){if(t.q_.set("Online"),e instanceof JD&&e.state===2&&e.cause)try{await(async function(s,a){const i=a.cause;for(const o of a.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))})(t,e)}catch(n){Ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await E5(t,n)}else if(e instanceof Tw?t.Q_.Ke(e):e instanceof QD?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Er.min()))try{const n=await EO(t.localStore);r.compareTo(n)>=0&&await(function(a,i){const o=a.Q_.rt(i);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(l.resumeToken,i))}})),o.targetMismatches.forEach(((l,u)=>{const d=a.N_.get(l);if(!d)return;a.N_.set(l,d.withResumeToken(ya.EMPTY_BYTE_STRING,d.snapshotVersion)),LO(a,l);const p=new Ud(d.target,l,u,d.sequenceNumber);P7(a,p)})),a.remoteSyncer.applyRemoteEvent(o)})(t,r)}catch(n){Ft("RemoteStore","Failed to raise snapshot:",n),await E5(t,n)}}async function E5(t,e,r){if(!qh(e))throw e;t.L_.add(1),await W1(t),t.q_.set("Offline"),r||(r=()=>EO(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ft("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await sy(t)}))}function DO(t,e){return e().catch((r=>E5(t,r,e)))}async function G1(t){const e=Zt(t),r=Ah(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lee(e);)try{const s=await WZ(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,cee(e,s)}catch(s){await E5(e,s)}OO(e)&&MO(e)}function lee(t){return Wh(t)&&t.O_.length<10}function cee(t,e){t.O_.push(e);const r=Ah(t);r.r_()&&r.V_&&r.m_(e.mutations)}function OO(t){return Wh(t)&&!Ah(t).n_()&&t.O_.length>0}function MO(t){Ah(t).start()}async function uee(t){Ah(t).p_()}async function dee(t){const e=Ah(t);for(const r of t.O_)e.m_(r.mutations)}async function fee(t,e,r){const n=t.O_.shift(),s=x7.from(n,e,r);await DO(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await G1(t)}async function hee(t,e){e&&Ah(t).V_&&await(async function(n,s){if((function(i){return KD(i)&&i!==ht.ABORTED})(s.code)){const a=n.O_.shift();Ah(n).s_(),await DO(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s))),await G1(n)}})(t,e),OO(t)&&MO(t)}async function bA(t,e){const r=Zt(t);r.asyncQueue.verifyOperationInProgress(),Ft("RemoteStore","RemoteStore received new credentials");const n=Wh(r);r.L_.add(3),await W1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await sy(r)}async function sk(t,e){const r=Zt(t);e?(r.L_.delete(2),await sy(r)):e||(r.L_.add(2),await W1(r),r.q_.set("Unknown"))}function K1(t){return t.K_||(t.K_=(function(r,n,s){const a=Zt(r);return a.w_(),new ZZ(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:see.bind(null,t),Ro:aee.bind(null,t),mo:iee.bind(null,t),d_:oee.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),R7(t)?j7(t):t.q_.set("Unknown")):(await t.K_.stop(),FO(t))}))),t.K_}function Ah(t){return t.U_||(t.U_=(function(r,n,s){const a=Zt(r);return a.w_(),new eee(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uee.bind(null,t),mo:hee.bind(null,t),f_:dee.bind(null,t),g_:fee.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await G1(t)):(await t.U_.stop(),t.O_.length>0&&(Ft("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((i=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const i=Date.now()+n,o=new L7(e,r,i,s,a);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y1(t,e){if(Ka("AsyncQueue",`${e}: ${t}`),qh(t))return new Rt(ht.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.comparator=e?(r,n)=>e(r,n)||rr.comparator(r.key,n.key):(r,n)=>rr.comparator(r.key,n.key),this.keyedMap=cx(),this.sortedSet=new Fs(this.comparator)}static emptySet(e){return new Zm(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Zm)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Zm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.W_=new Fs(rr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):lr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class C1{constructor(e,r,n,s,a,i,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,a){const i=[];return r.forEach((o=>{i.push({type:0,doc:o})})),new C1(e,r,Zm.emptySet(r),i,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&J2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pee{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class mee{constructor(){this.queries=kA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Zt(r),a=s.queries;s.queries=kA(),a.forEach(((i,o)=>{for(const l of o.j_)l.onError(n)}))})(this,new Rt(ht.ABORTED,"Firestore shutting down"))}}function kA(){return new hf((t=>RD(t)),J2)}async function F7(t,e){const r=Zt(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.H_()&&e.J_()&&(n=2):(a=new pee,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(s,!0);break;case 1:a.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const o=Y1(i,`Initialization of query '${Pm(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&O7(r)}async function D7(t,e){const r=Zt(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const i=a.j_.indexOf(e);i>=0&&(a.j_.splice(i,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gee(t,e){const r=Zt(t);let n=!1;for(const s of e){const a=s.query,i=r.queries.get(a);if(i){for(const o of i.j_)o.X_(s)&&(n=!0);i.z_=s}}n&&O7(r)}function xee(t,e,r){const n=Zt(t),s=n.queries.get(e);if(s)for(const a of s.j_)a.onError(r);n.queries.delete(e)}function O7(t){t.Y_.forEach((e=>{e.next()}))}var ak,SA;(SA=ak||(ak={})).ea="default",SA.Cache="cache";class M7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new C1(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=C1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ak.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yee{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.serializer=e}Es(e){return sd(this.serializer,e)}ds(e){return e.metadata.exists?sO(this.serializer,e.document,!1):Vs.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ya(e)}}class vee{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BO(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=On.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new NA(this.serializer);for(const s of e)if(s.metadata.queries){const a=n.Es(s.metadata.name);for(const i of s.metadata.queries){const o=(r.get(i)||cn()).add(a);r.set(i,o)}}return r}async complete(){const e=await GZ(this.localStore,new NA(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await KZ(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function BO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.key=e}}class UO{constructor(e){this.key=e}}class zO{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=cn(),this.mutatedKeys=cn(),this.Aa=FD(e),this.Ra=new Zm(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new _A,s=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const g=s.get(d),m=Z2(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;g&&m?g.data.isEqual(m.data)?x!==y&&(n.track({type:3,doc:m}),b=!0):this.ga(g,m)||(n.track({type:2,doc:m}),b=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(o=!0)):!g&&m?(n.track({type:0,doc:m}),b=!0):g&&!m&&(n.track({type:1,doc:g}),b=!0,(l||u)&&(o=!0)),b&&(m?(i=i.add(m),a=y?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))})),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:o,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort(((d,p)=>(function(m,x){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lr()}};return y(m)-y(x)})(d.type,p.type)||this.Aa(d.doc,p.doc))),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,i.length!==0||u?{snapshot:new C1(this.query,e.Ra,a,i,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _A,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=cn(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new UO(n))})),this.da.forEach((n=>{e.has(n)||r.push(new VO(n))})),r}ba(e){this.Ta=e.Ts,this.da=cn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return C1.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wee{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class bee{constructor(e){this.key=e,this.va=!1}}class _ee{constructor(e,r,n,s,a,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new hf((o=>RD(o)),J2),this.Ma=new Map,this.xa=new Set,this.Oa=new Fs(rr.comparator),this.Na=new Map,this.La=new S7,this.Ba={},this.ka=new Map,this.qa=dp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kee(t,e,r=!0){const n=Ub(t);let s;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await $O(n,e,r,!0),s}async function See(t,e){const r=Ub(t);await $O(r,e,!0,!1)}async function $O(t,e,r,n){const s=await S1(t.localStore,Xo(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await B7(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&Vb(t.remoteStore,s),o}async function B7(t,e,r,n,s){t.Ka=(p,g,m)=>(async function(y,b,S,P){let T=b.view.ma(S);T.ns&&(T=await k5(y.localStore,b.query,!1).then((({documents:L})=>b.view.ma(L,T))));const O=P&&P.targetChanges.get(b.targetId),W=P&&P.targetMismatches.get(b.targetId)!=null,Y=b.view.applyChanges(T,y.isPrimaryClient,O,W);return ik(y,b.targetId,Y.wa),Y.snapshot})(t,p,g,m);const a=await k5(t.localStore,e,!0),i=new zO(e,a.Ts),o=i.ma(a.documents),l=ry.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=i.applyChanges(o,t.isPrimaryClient,l);ik(t,r,u.wa);const d=new wee(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function Nee(t,e,r){const n=Zt(t),s=n.Fa.get(e),a=n.Ma.get(s.targetId);if(a.length>1)return n.Ma.set(s.targetId,a.filter((i=>!J2(i,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await N1(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),r&&E1(n.remoteStore,s.targetId),A1(n,s.targetId)})).catch($h)):(A1(n,s.targetId),await N1(n.localStore,s.targetId,!0))}async function Eee(t,e){const r=Zt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),E1(r.remoteStore,n.targetId))}async function Cee(t,e,r){const n=$7(t);try{const s=await(function(i,o){const l=Zt(i),u=na.now(),d=o.reduce(((m,x)=>m.add(x.key)),cn());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let x=Il(),y=cn();return l.cs.getEntries(m,d).next((b=>{x=b,x.forEach(((S,P)=>{P.isValidDocument()||(y=y.add(S))}))})).next((()=>l.localDocuments.getOverlayedDocuments(m,x))).next((b=>{p=b;const S=[];for(const P of o){const T=ZJ(P,p.get(P.key).overlayedDocument);T!=null&&S.push(new pf(P.key,T,_D(T.value.mapValue),ta.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,S,o)})).next((b=>{g=b;const S=b.applyToLocalDocumentSet(p,y);return l.documentOverlayCache.saveOverlays(m,b.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:OD(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(i,o,l){let u=i.Ba[i.currentUser.toKey()];u||(u=new Fs(Qr)),u=u.insert(o,l),i.Ba[i.currentUser.toKey()]=u})(n,s.batchId,r),await mf(n,s.changes),await G1(n.remoteStore)}catch(s){const a=Y1(s,"Failed to persist write");r.reject(a)}}async function qO(t,e){const r=Zt(t);try{const n=await HZ(r.localStore,e);e.targetChanges.forEach(((s,a)=>{const i=r.Na.get(a);i&&(yr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?yr(i.va):s.removedDocuments.size>0&&(yr(i.va),i.va=!1))})),await mf(r,n,e)}catch(n){await $h(n)}}function EA(t,e,r){const n=Zt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach(((a,i)=>{const o=i.view.Z_(e);o.snapshot&&s.push(o.snapshot)})),(function(i,o){const l=Zt(i);l.onlineState=o;let u=!1;l.queries.forEach(((d,p)=>{for(const g of p.j_)g.Z_(o)&&(u=!0)})),u&&O7(l)})(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Aee(t,e,r){const n=Zt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),a=s&&s.key;if(a){let i=new Fs(rr.comparator);i=i.insert(a,Vs.newNoDocument(a,Er.min()));const o=cn().add(a),l=new ty(Er.min(),new Map,new Fs(Qr),i,o);await qO(n,l),n.Oa=n.Oa.remove(a),n.Na.delete(e),z7(n)}else await N1(n.localStore,e,!1).then((()=>A1(n,e,r))).catch($h)}async function Tee(t,e){const r=Zt(t),n=e.batch.batchId;try{const s=await qZ(r.localStore,e);U7(r,n,null),V7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await mf(r,s)}catch(s){await $h(s)}}async function Iee(t,e,r){const n=Zt(t);try{const s=await(function(i,o){const l=Zt(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next((p=>(yr(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d))).next((()=>l.localDocuments.getDocuments(u,d)))}))})(n.localStore,e);U7(n,e,r),V7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await mf(n,s)}catch(s){await $h(s)}}async function Pee(t,e){const r=Zt(t);Wh(r.remoteStore)||Ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(i){const o=Zt(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l)))})(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=Y1(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function V7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function U7(t,e,r){const n=Zt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function A1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||HO(t,n)}))}function HO(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(E1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),z7(t))}function ik(t,e,r){for(const n of r)n instanceof VO?(t.La.addReference(n.key,e),jee(t,n)):n instanceof UO?(Ft("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||HO(t,n.key)):lr()}function jee(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ft("SyncEngine","New document in limbo: "+r),t.xa.add(n),z7(t))}function z7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new rr(On.fromString(e)),n=t.qa.next();t.Na.set(n,new bee(r)),t.Oa=t.Oa.insert(r,n),Vb(t.remoteStore,new Ud(Xo($1(r.path)),n,"TargetPurposeLimboResolution",Al.oe))}}async function mf(t,e,r){const n=Zt(t),s=[],a=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach(((o,l)=>{i.push(n.Ka(l,e,r).then((u=>{var d;if((u||r)&&n.isPrimaryClient){const p=u?!u.fromCache:(d=r?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){s.push(u);const p=A7.Wi(l.targetId,u);a.push(p)}})))})),await Promise.all(i),n.Ca.d_(s),await(async function(l,u){const d=Zt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>Je.forEach(u,(g=>Je.forEach(g.$i,(m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m))).next((()=>Je.forEach(g.Ui,(m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))))))}catch(p){if(!qh(p))throw p;Ft("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const m=d.os.get(g),x=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(g,y)}}})(n.localStore,a))}async function Ree(t,e){const r=Zt(t);if(!r.currentUser.isEqual(e)){Ft("SyncEngine","User change. New user:",e.toKey());const n=await NO(r.localStore,e);r.currentUser=e,(function(a,i){a.ka.forEach((o=>{o.forEach((l=>{l.reject(new Rt(ht.CANCELLED,i))}))})),a.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await mf(r,n.hs)}}function Lee(t,e){const r=Zt(t),n=r.Na.get(e);if(n&&n.va)return cn().add(n.key);{let s=cn();const a=r.Ma.get(e);if(!a)return s;for(const i of a){const o=r.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}async function Fee(t,e){const r=Zt(t),n=await k5(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&ik(r,e.targetId,s.wa),s}async function Dee(t,e){const r=Zt(t);return TO(r.localStore,e).then((n=>mf(r,n)))}async function Oee(t,e,r,n){const s=Zt(t),a=await(function(o,l){const u=Zt(o),d=Zt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(p=>d.Mn(p,l).next((g=>g?u.localDocuments.getDocuments(p,g):Je.resolve(null)))))})(s.localStore,e);a!==null?(r==="pending"?await G1(s.remoteStore):r==="acknowledged"||r==="rejected"?(U7(s,e,n||null),V7(s,e),(function(o,l){Zt(Zt(o).mutationQueue).On(l)})(s.localStore,e)):lr(),await mf(s,a)):Ft("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Mee(t,e){const r=Zt(t);if(Ub(r),$7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await CA(r,n.toArray());r.Qa=!0,await sk(r.remoteStore,!0);for(const a of s)Vb(r.remoteStore,a)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach(((a,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then((()=>(A1(r,i),N1(r.localStore,i,!0)))),E1(r.remoteStore,i)})),await s,await CA(r,n),(function(i){const o=Zt(i);o.Na.forEach(((l,u)=>{E1(o.remoteStore,u)})),o.La.pr(),o.Na=new Map,o.Oa=new Fs(rr.comparator)})(r),r.Qa=!1,await sk(r.remoteStore,!1)}}async function CA(t,e,r){const n=Zt(t),s=[],a=[];for(const i of e){let o;const l=n.Ma.get(i);if(l&&l.length!==0){o=await S1(n.localStore,Xo(l[0]));for(const u of l){const d=n.Fa.get(u),p=await Fee(n,d);p.snapshot&&a.push(p.snapshot)}}else{const u=await AO(n.localStore,i);o=await S1(n.localStore,u),await B7(n,WO(u),i,!1,o.resumeToken)}s.push(o)}return n.Ca.d_(a),s}function WO(t){return ID(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Bee(t){return(function(r){return Zt(Zt(r).persistence).Qi()})(Zt(t).localStore)}async function Vee(t,e,r,n){const s=Zt(t);if(s.Qa)return void Ft("SyncEngine","Ignoring unexpected query state notification.");const a=s.Ma.get(e);if(a&&a.length>0)switch(r){case"current":case"not-current":{const i=await TO(s.localStore,LD(a[0])),o=ty.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ya.EMPTY_BYTE_STRING);await mf(s,i,o);break}case"rejected":await N1(s.localStore,e,!0),A1(s,e,n);break;default:lr()}}async function Uee(t,e,r){const n=Ub(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){Ft("SyncEngine","Adding an already active target "+s);continue}const a=await AO(n.localStore,s),i=await S1(n.localStore,a);await B7(n,WO(a),i.targetId,!1,i.resumeToken),Vb(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await N1(n.localStore,s,!1).then((()=>{E1(n.remoteStore,s),A1(n,s)})).catch($h)}}function Ub(t){const e=Zt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Aee.bind(null,e),e.Ca.d_=gee.bind(null,e.eventManager),e.Ca.$a=xee.bind(null,e.eventManager),e}function $7(t){const e=Zt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iee.bind(null,e),e}function zee(t,e,r){const n=Zt(t);(async function(a,i,o){try{const l=await i.getMetadata();if(await(function(m,x){const y=Zt(m),b=Ya(x.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",(S=>y.Gr.getBundleMetadata(S,x.id))).then((S=>!!S&&S.createTime.compareTo(b)>=0))})(a.localStore,l))return await i.close(),o._completeWith((function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}})(l)),Promise.resolve(new Set);o._updateProgress(BO(l));const u=new vee(l,a.localStore,i.serializer);let d=await i.Ua();for(;d;){const g=await u.la(d);g&&o._updateProgress(g),d=await i.Ua()}const p=await u.complete();return await mf(a,p.Ia,void 0),await(function(m,x){const y=Zt(m);return y.persistence.runTransaction("Save bundle","readwrite",(b=>y.Gr.saveBundleMetadata(b,x)))})(a.localStore,l),o._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return oc("SyncEngine",`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then((s=>{n.sharedClientState.notifyBundleLoaded(s)}))}class Th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ny(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return SO(this.persistence,new kO,e.initialUser,this.serializer)}Ga(e){return new N7(Bb.Zr,this.serializer)}Wa(e){return new PO}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Th.provider={build:()=>new Th};class $ee extends Th{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){yr(this.persistence.referenceDelegate instanceof _5);const n=this.persistence.referenceDelegate.garbageCollector;return new yO(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new N7((n=>_5.Zr(n,r)),this.serializer)}}class q7 extends Th{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await $7(this.Ja.syncEngine),await G1(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return SO(this.persistence,new kO,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new yO(n,e.asyncQueue,r)}Ha(e,r){const n=new uJ(r,this.persistence);return new cJ(e.asyncQueue,n)}Ga(e){const r=C7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new E7(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,jO(),Iw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new PO}}class GO extends q7{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof H_&&(this.sharedClientState.syncEngine={no:Oee.bind(null,r),ro:Vee.bind(null,r),io:Uee.bind(null,r),Qi:Bee.bind(null,r),eo:Dee.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Mee(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=jO();if(!H_.D(r))throw new Rt(ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=C7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new H_(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Ih{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>EA(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ree.bind(null,this.syncEngine),await sk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mee})()}createDatastore(e){const r=ny(e.databaseInfo.databaseId),n=(function(a){return new JZ(a)})(e.databaseInfo);return(function(a,i,o,l){return new tee(a,i,o,l)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,s,a,i,o){return new nee(n,s,a,i,o)})(this.localStore,this.datastore,e.asyncQueue,(r=>EA(this.syncEngine,r,0)),(function(){return wA.D()?new wA:new YZ})())}createSyncEngine(e,r){return(function(s,a,i,o,l,u,d){const p=new _ee(s,a,i,o,l,u);return d&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(s){const a=Zt(s);Ft("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await W1(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Ih.provider={build:()=>new Ih};function AA(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ka("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qee{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Xi,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.aa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new yee(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Rt(ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(s,a){const i=Zt(s),o={documents:a.map((p=>m2(i.serializer,p)))},l=await i.Lo("BatchGetDocuments",i.serializer.databaseId,On.emptyPath(),o,a.length),u=new Map;l.forEach((p=>{const g=lZ(i.serializer,p);u.set(g.key.toString(),g)}));const d=[];return a.forEach((p=>{const g=u.get(p.toString());yr(!!g),d.push(g)})),d})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new H1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const s=rr.fromPath(n);this.mutations.push(new m7(s,this.precondition(s)))})),await(async function(n,s){const a=Zt(n),i={writes:s.map((o=>g2(a.serializer,o)))};await a.Mo("Commit",a.serializer.databaseId,On.emptyPath(),i)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw lr();r=Er.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Rt(ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Er.min())?ta.exists(!1):ta.updateTime(r):ta.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Er.min()))throw new Rt(ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ta.updateTime(r)}return ta.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wee{constructor(e,r,n,s,a){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=a,this._u=n.maxAttempts,this.t_=new I7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Hee(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((s=>{this.lu(s)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!X2(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!KD(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gee{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Wi.UNAUTHENTICATED,this.clientId=o7.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async i=>{Ft("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i})),this.appCheckCredentials.start(n,(i=>(Ft("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Y1(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function G_(t,e){t.asyncQueue.verifyOperationInProgress(),Ft("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async s=>{n.isEqual(s)||(await NO(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function TA(t,e){t.asyncQueue.verifyOperationInProgress();const r=await H7(t);Ft("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>bA(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,s)=>bA(e.remoteStore,s))),t._onlineComponents=e}async function H7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ft("FirestoreClient","Using user provided OfflineComponentProvider");try{await G_(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ht.FAILED_PRECONDITION||s.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(r))throw r;oc("Error using user provided cache. Falling back to memory cache: "+r),await G_(t,new Th)}}else Ft("FirestoreClient","Using default OfflineComponentProvider"),await G_(t,new Th);return t._offlineComponents}async function $b(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ft("FirestoreClient","Using user provided OnlineComponentProvider"),await TA(t,t._uninitializedComponentsProvider._online)):(Ft("FirestoreClient","Using default OnlineComponentProvider"),await TA(t,new Ih))),t._onlineComponents}function KO(t){return H7(t).then((e=>e.persistence))}function X1(t){return H7(t).then((e=>e.localStore))}function YO(t){return $b(t).then((e=>e.remoteStore))}function W7(t){return $b(t).then((e=>e.syncEngine))}function XO(t){return $b(t).then((e=>e.datastore))}async function T1(t){const e=await $b(t),r=e.eventManager;return r.onListen=kee.bind(null,e.syncEngine),r.onUnlisten=Nee.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=See.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Eee.bind(null,e.syncEngine),r}function Kee(t){return t.asyncQueue.enqueue((async()=>{const e=await KO(t),r=await YO(t);return e.setNetworkEnabled(!0),(function(s){const a=Zt(s);return a.L_.delete(0),sy(a)})(r)}))}function Yee(t){return t.asyncQueue.enqueue((async()=>{const e=await KO(t),r=await YO(t);return e.setNetworkEnabled(!1),(async function(s){const a=Zt(s);a.L_.add(0),await W1(a),a.q_.set("Offline")})(r)}))}function Xee(t,e){const r=new Xi;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,a,i){try{const o=await(function(u,d){const p=Zt(u);return p.persistence.runTransaction("read document","readonly",(g=>p.localDocuments.getDocument(g,d)))})(s,a);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new Rt(ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Y1(o,`Failed to get document '${a} from cache`);i.reject(l)}})(await X1(t),e,r))),r.promise}function QO(t,e,r={}){const n=new Xi;return t.asyncQueue.enqueueAndForget((async()=>(function(a,i,o,l,u){const d=new zb({next:g=>{d.Za(),i.enqueueAndForget((()=>D7(a,p)));const m=g.docs.has(o);!m&&g.fromCache?u.reject(new Rt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?u.reject(new Rt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new M7($1(o.path),d,{includeMetadataChanges:!0,_a:!0});return F7(a,p)})(await T1(t),t.asyncQueue,e,r,n))),n.promise}function Qee(t,e){const r=new Xi;return t.asyncQueue.enqueueAndForget((async()=>(async function(s,a,i){try{const o=await k5(s,a,!0),l=new zO(a,o.Ts),u=l.ma(o.documents),d=l.applyChanges(u,!1);i.resolve(d.snapshot)}catch(o){const l=Y1(o,`Failed to execute query '${a} against cache`);i.reject(l)}})(await X1(t),e,r))),r.promise}function JO(t,e,r={}){const n=new Xi;return t.asyncQueue.enqueueAndForget((async()=>(function(a,i,o,l,u){const d=new zb({next:g=>{d.Za(),i.enqueueAndForget((()=>D7(a,p))),g.fromCache&&l.source==="server"?u.reject(new Rt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new M7(o,d,{includeMetadataChanges:!0,_a:!0});return F7(a,p)})(await T1(t),t.asyncQueue,e,r,n))),n.promise}function Jee(t,e,r){const n=new Xi;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await XO(t);n.resolve((async function(i,o,l){var u;const d=Zt(i),{request:p,ut:g,parent:m}=iO(d.serializer,PD(o),l);d.connection.Fo||delete p.parent;const x=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,p,1)).filter((b=>!!b.result));yr(x.length===1);const y=(u=x[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(y).reduce(((b,S)=>(b[g[S]]=y[S],b)),{})})(s,e,r))}catch(s){n.reject(s)}})),n.promise}function Zee(t,e){const r=new zb(e);return t.asyncQueue.enqueueAndForget((async()=>(function(s,a){Zt(s).Y_.add(a),a.next()})(await T1(t),r))),()=>{r.Za(),t.asyncQueue.enqueueAndForget((async()=>(function(s,a){Zt(s).Y_.delete(a)})(await T1(t),r)))}}function ete(t,e,r,n){const s=(function(i,o){let l;return l=typeof i=="string"?XD().encode(i):i,(function(d,p){return new qee(d,p)})((function(d,p){if(d instanceof Uint8Array)return AA(d,p);if(d instanceof ArrayBuffer)return AA(new Uint8Array(d),p);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(l),o)})(r,ny(e));t.asyncQueue.enqueueAndForget((async()=>{zee(await W7(t),s,n)}))}function tte(t,e){return t.asyncQueue.enqueue((async()=>(function(n,s){const a=Zt(n);return a.persistence.runTransaction("Get named query","readonly",(i=>a.Gr.getNamedQuery(i,s)))})(await X1(t),e)))}function rte(t,e){return t.asyncQueue.enqueue((async()=>(async function(n,s){const a=Zt(n),i=a.indexManager,o=[];return a.persistence.runTransaction("Configure indexes","readwrite",(l=>i.getFieldIndexes(l).next((u=>(function(p,g,m,x,y){p=[...p],g=[...g],p.sort(m),g.sort(m);const b=p.length,S=g.length;let P=0,T=0;for(;P<S&&T<b;){const O=m(p[T],g[P]);O<0?y(p[T++]):O>0?x(g[P++]):(P++,T++)}for(;P<S;)x(g[P++]);for(;T<b;)y(p[T++])})(u,s,aJ,(d=>{o.push(i.addFieldIndex(l,d))}),(d=>{o.push(i.deleteFieldIndex(l,d))})))).next((()=>Je.waitFor(o)))))})(await X1(t),e)))}function nte(t,e){return t.asyncQueue.enqueue((async()=>(function(n,s){Zt(n).ss.zi=s})(await X1(t),e)))}function ste(t){return t.asyncQueue.enqueue((async()=>(function(r){const n=Zt(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",(a=>s.deleteAllFieldIndexes(a)))})(await X1(t))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t,e,r){if(!r)throw new Rt(ht.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eM(t,e,r,n){if(e===!0&&n===!0)throw new Rt(ht.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function PA(t){if(!rr.isDocumentKey(t))throw new Rt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jA(t){if(rr.isDocumentKey(t))throw new Rt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lr()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Rt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qb(t);throw new Rt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function tM(t,e){if(e<=0)throw new Rt(ht.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Rt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Rt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZO((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Rt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Rt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Rt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ay{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Rt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RA(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new sD;switch(n.type){case"firstParty":return new eJ(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Rt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=IA.get(r);n&&(Ft("ComponentProvider","Removing Datastore"),IA.delete(r),n.terminate())})(this),Promise.resolve()}}function rM(t,e,r,n={}){var s;const a=(t=Cn(t,ay))._getSettings(),i=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==i&&oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:i,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Wi.MOCK_USER;else{o=$F(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Rt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Wi(u)}t._authCredentials=new QQ(new nD(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class Ia{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ia(this.firestore,e,this._key)}}class fu extends Qi{constructor(e,r,n){super(e,r,$1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ia(this.firestore,null,new rr(e))}withConverter(e){return new fu(this.firestore,e,this._path)}}function tr(t,e,...r){if(t=Rn(t),G7("collection","path",e),t instanceof ay){const n=On.fromString(e,...r);return jA(n),new fu(t,null,n)}{if(!(t instanceof Ia||t instanceof fu))throw new Rt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(On.fromString(e,...r));return jA(n),new fu(t.firestore,null,n)}}function ate(t,e){if(t=Cn(t,ay),G7("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Rt(ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(t,null,(function(n){return new ff(On.emptyPath(),n)})(e))}function ir(t,e,...r){if(t=Rn(t),arguments.length===1&&(e=o7.newId()),G7("doc","path",e),t instanceof ay){const n=On.fromString(e,...r);return PA(n),new Ia(t,null,new rr(n))}{if(!(t instanceof Ia||t instanceof fu))throw new Rt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(On.fromString(e,...r));return PA(n),new Ia(t.firestore,t instanceof fu?t.converter:null,new rr(n))}}function ite(t,e){return t=Rn(t),e=Rn(e),(t instanceof Ia||t instanceof fu)&&(e instanceof Ia||e instanceof fu)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function K7(t,e){return t=Rn(t),e=Rn(e),t instanceof Qi&&e instanceof Qi&&t.firestore===e.firestore&&J2(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new I7(this,"async_queue_retry"),this.Vu=()=>{const n=Iw();n&&Ft("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Iw();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Iw();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Xi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qh(e))throw e;Ft("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const s=(function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o})(n);throw Ka("INTERNAL UNHANDLED ERROR: ",s),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=L7.createAndSchedule(this,e,r,n,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&lr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function ok(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class nM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote=-1;class ks extends ay{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new LA,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LA(e),this._firestoreClient=void 0,await e}}}function lte(t,e,r){r||(r="(default)");const n=jp(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),a=n.getOptions(r);if(bh(a,e))return s;throw new Rt(ht.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Rt(ht.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Rt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function sM(t,e){const r=typeof t=="object"?t:Tb(),n=typeof t=="string"?t:e||"(default)",s=jp(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=n7("firestore");a&&rM(s,...a)}return s}function sa(t){if(t._terminated)throw new Rt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aM(t),t._firestoreClient}function aM(t){var e,r,n;const s=t._freezeSettings(),a=(function(o,l,u,d){return new jJ(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ZO(d.experimentalLongPollingOptions),d.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Gee(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(t._componentsProvider))}function cte(t,e){oc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return iM(t,Ih.provider,{build:n=>new q7(n,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function ute(t){oc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();iM(t,Ih.provider,{build:r=>new GO(r,e.cacheSizeBytes)})}function iM(t,e,r){if((t=Cn(t,ks))._firestoreClient||t._terminated)throw new Rt(ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Rt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},aM(t)}function dte(t){if(t._initialized&&!t._terminated)throw new Rt(ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!nd.D())return Promise.resolve();const s=n+"main";await nd.delete(s)})(C7(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}})),e.promise}function fte(t){return(function(r){const n=new Xi;return r.asyncQueue.enqueueAndForget((async()=>Pee(await W7(r),n))),n.promise})(sa(t=Cn(t,ks)))}function hte(t){return Kee(sa(t=Cn(t,ks)))}function pte(t){return Yee(sa(t=Cn(t,ks)))}function mte(t){return OQ(t.app,"firestore",t._databaseId.database),t._delete()}function gte(t,e){const r=sa(t=Cn(t,ks)),n=new nM;return ete(r,t._databaseId,e,n),n}function xte(t,e){return tte(sa(t=Cn(t,ks)),e).then((r=>r?new Qi(t,null,r.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class oM{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ph(ya.fromBase64String(e))}catch(r){throw new Rt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ph(ya.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Rt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Us(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function yte(){return new Gh("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Rt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Rt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qr(this._lat,e._lat)||Qr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte=/^__.*__$/;class wte{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new pf(e,this.data,this.fieldMask,r,this.fieldTransforms):new q1(e,this.data,r,this.fieldTransforms)}}class lM{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new pf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function cM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lr()}}class Wb{constructor(e,r,n,s,a,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Wb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return C5(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cM(this.Cu)&&vte.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bte{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||ny(e)}Qu(e,r,n,s=!1){return new Wb({Cu:e,methodName:r,qu:n,path:Us.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lp(t){const e=t._freezeSettings(),r=ny(t._databaseId);return new bte(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Gb(t,e,r,n,s,a={}){const i=t.Qu(a.merge||a.mergeFields?2:0,e,r,s);tS("Data must be an object, but it was:",i,n);const o=fM(n,i);let l,u;if(a.merge)l=new Tl(i.fieldMask),u=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=x2(e,p,r);if(!i.contains(g))throw new Rt(ht.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pM(d,g)||d.push(g)}l=new Tl(d),u=i.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=i.fieldTransforms;return new wte(new yo(o),l,u)}class oy extends Kh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oy}}function uM(t,e,r){return new Wb({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Y7 extends Kh{_toFieldTransform(e){return new ey(e.path,new b1)}isEqual(e){return e instanceof Y7}}class X7 extends Kh{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=uM(this,e,!0),n=this.Ku.map((a=>Fp(a,r))),s=new op(n);return new ey(e.path,s)}isEqual(e){return e instanceof X7&&bh(this.Ku,e.Ku)}}class Q7 extends Kh{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=uM(this,e,!0),n=this.Ku.map((a=>Fp(a,r))),s=new lp(n);return new ey(e.path,s)}isEqual(e){return e instanceof Q7&&bh(this.Ku,e.Ku)}}class J7 extends Kh{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new _1(e.serializer,VD(e.serializer,this.$u));return new ey(e.path,r)}isEqual(e){return e instanceof J7&&this.$u===e.$u}}function Z7(t,e,r,n){const s=t.Qu(1,e,r);tS("Data must be an object, but it was:",s,n);const a=[],i=yo.empty();Hh(n,((l,u)=>{const d=Kb(e,l,r);u=Rn(u);const p=s.Nu(d);if(u instanceof oy)a.push(d);else{const g=Fp(u,p);g!=null&&(a.push(d),i.set(d,g))}}));const o=new Tl(a);return new lM(i,o,s.fieldTransforms)}function eS(t,e,r,n,s,a){const i=t.Qu(1,e,r),o=[x2(e,n,r)],l=[s];if(a.length%2!=0)throw new Rt(ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(x2(e,a[g])),l.push(a[g+1]);const u=[],d=yo.empty();for(let g=o.length-1;g>=0;--g)if(!pM(u,o[g])){const m=o[g];let x=l[g];x=Rn(x);const y=i.Nu(m);if(x instanceof oy)u.push(m);else{const b=Fp(x,y);b!=null&&(u.push(m),d.set(m,b))}}const p=new Tl(u);return new lM(d,p,i.fieldTransforms)}function dM(t,e,r,n=!1){return Fp(r,t.Qu(n?4:3,e))}function Fp(t,e){if(hM(t=Rn(t)))return tS("Unsupported field value:",e,t),fM(t,e);if(t instanceof Kh)return(function(n,s){if(!cM(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,s){const a=[];let i=0;for(const o of n){let l=Fp(o,s.Lu(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}})(t,e)}return(function(n,s){if((n=Rn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return VD(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=na.fromDate(n);return{timestampValue:k1(s.serializer,a)}}if(n instanceof na){const a=new na(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:k1(s.serializer,a)}}if(n instanceof Hb)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ph)return{bytesValue:ZD(s.serializer,n._byteString)};if(n instanceof Ia){const a=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(a))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:w7(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof iy)return(function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map((l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return p7(o.serializer,l)}))}}}}}})(n,s);throw s.Bu(`Unsupported field value: ${qb(n)}`)})(t,e)}function fM(t,e){const r={};return yD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hh(t,((n,s)=>{const a=Fp(s,e.Mu(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function hM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof na||t instanceof Hb||t instanceof Ph||t instanceof Ia||t instanceof Kh||t instanceof iy)}function tS(t,e,r){if(!hM(r)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(r)){const n=qb(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function x2(t,e,r){if((e=Rn(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return Kb(t,e);throw C5("Field path arguments must be of type string or ",t,!1,void 0,r)}const _te=new RegExp("[~\\*/\\[\\]]");function Kb(t,e,r){if(e.search(_te)>=0)throw C5(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Gh(...e.split("."))._internalPath}catch{throw C5(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function C5(t,e,r,n,s){const a=n&&!n.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new Rt(ht.INVALID_ARGUMENT,o+t+l)}function pM(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ia(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Yb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class kte extends y2{data(){return super.data()}}function Yb(t,e){return typeof e=="string"?Kb(t,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Rt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rS{}class Q1 extends rS{}function br(t,e,...r){let n=[];e instanceof rS&&n.push(e),n=n.concat(r),(function(a){const i=a.filter((l=>l instanceof Dp)).length,o=a.filter((l=>l instanceof J1)).length;if(i>1||i>0&&o>0)throw new Rt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)t=s._apply(t);return t}class J1 extends Q1{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new J1(e,r,n)}_apply(e){const r=this._parse(e);return xM(e._query,r),new Qi(e.firestore,e.converter,Y6(e._query,r))}_parse(e){const r=Lp(e.firestore);return(function(a,i,o,l,u,d,p){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Rt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DA(p,d);const m=[];for(const x of p)m.push(FA(l,a,x));g={arrayValue:{values:m}}}else g=FA(l,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DA(p,d),g=dM(o,i,p,d==="in"||d==="not-in");return Mn.create(u,d,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Fr(t,e,r){const n=e,s=Yb("where",t);return J1._create(s,n,r)}class Dp extends rS{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Dp(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:ps.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)xM(i,l),i=Y6(i,l)})(e._query,r),new Qi(e.firestore,e.converter,Y6(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ste(...t){return t.forEach((e=>yM("or",e))),Dp._create("or",t)}function Nte(...t){return t.forEach((e=>yM("and",e))),Dp._create("and",t)}class Xb extends Q1{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Xb(e,r)}_apply(e){const r=(function(s,a,i){if(s.startAt!==null)throw new Rt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Rt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new p2(a,i)})(e._query,this._field,this._direction);return new Qi(e.firestore,e.converter,(function(s,a){const i=s.explicitOrderBy.concat([a]);return new ff(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,r))}}function Qa(t,e="asc"){const r=e,n=Yb("orderBy",t);return Xb._create(n,r)}class ly extends Q1{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new ly(e,r,n)}_apply(e){return new Qi(e.firestore,e.converter,x5(e._query,this._limit,this._limitType))}}function vu(t){return tM("limit",t),ly._create("limit",t,"F")}function Ete(t){return tM("limitToLast",t),ly._create("limitToLast",t,"L")}class cy extends Q1{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new cy(e,r,n)}_apply(e){const r=gM(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(function(s,a){return new ff(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)})(e._query,r))}}function Cte(...t){return cy._create("startAt",t,!0)}function Ate(...t){return cy._create("startAfter",t,!1)}class uy extends Q1{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new uy(e,r,n)}_apply(e){const r=gM(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(function(s,a){return new ff(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)})(e._query,r))}}function Tte(...t){return uy._create("endBefore",t,!1)}function Ite(...t){return uy._create("endAt",t,!0)}function gM(t,e,r,n){if(r[0]=Rn(r[0]),r[0]instanceof y2)return(function(a,i,o,l,u){if(!l)throw new Rt(ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const p of Jm(a))if(p.field.isKeyField())d.push(ap(i,l.key));else{const g=l.data.field(p.field);if(Pb(g))throw new Rt(ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const m=p.field.canonicalString();throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new Ch(d,u)})(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Lp(t.firestore);return(function(i,o,l,u,d,p){const g=i.explicitOrderBy;if(d.length>g.length)throw new Rt(ht.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let x=0;x<d.length;x++){const y=d[x];if(g[x].field.isKeyField()){if(typeof y!="string")throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!f7(i)&&y.indexOf("/")!==-1)throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const b=i.path.child(On.fromString(y));if(!rr.isDocumentKey(b))throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const S=new rr(b);m.push(ap(o,S))}else{const b=dM(l,u,y);m.push(b)}}return new Ch(m,p)})(t._query,t.firestore._databaseId,s,e,r,n)}}function FA(t,e,r){if(typeof(r=Rn(r))=="string"){if(r==="")throw new Rt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f7(e)&&r.indexOf("/")!==-1)throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(On.fromString(r));if(!rr.isDocumentKey(n))throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ap(t,new rr(n))}if(r instanceof Ia)return ap(t,r._key);throw new Rt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qb(r)}.`)}function DA(t,e){if(!Array.isArray(t)||t.length===0)throw new Rt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xM(t,e){const r=(function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new Rt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Rt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function yM(t,e){if(!(e instanceof J1||e instanceof Dp))throw new Rt(ht.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class nS{convertValue(e,r="none"){switch(Nh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ea(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(sf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw lr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Hh(e,((s,a)=>{n[s]=this.convertValue(a,r)})),n}convertVectorValue(e){var r,n,s;const a=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map((i=>ea(i.doubleValue)));return new iy(a)}convertGeoPoint(e){return new Hb(ea(e.latitude),ea(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=jb(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(d2(e));default:return null}}convertTimestamp(e){const r=nf(e);return new na(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=On.fromString(e);yr(uO(n));const s=new Sh(n.get(1),n.get(3)),a=new rr(n.popFirst(5));return s.isEqual(r)||Ka(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Pte extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ph(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ia(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jte(t){return new I1("sum",x2("sum",t))}function Rte(t){return new I1("avg",x2("average",t))}function vM(){return new I1("count")}function Lte(t,e){var r,n;return t instanceof I1&&e instanceof I1&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function Fte(t,e){return K7(t.query,e.query)&&bh(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fp extends y2{constructor(e,r,n,s,a,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Lx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Yb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Lx extends fp{data(e={}){return super.data(e)}}class hp{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new ph(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Lx(this._firestore,this._userDataWriter,n.key,n,new ph(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Rt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map((o=>{const l=new Lx(s._firestore,s._userDataWriter,o.doc.key,o.doc,new ph(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}}))}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const l=new Lx(s._firestore,s._userDataWriter,o.doc.key,o.doc,new ph(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Dte(o.type),doc:l,oldIndex:u,newIndex:d}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Dte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lr()}}function Ote(t,e){return t instanceof fp&&e instanceof fp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hp&&e instanceof hp&&t._firestore===e._firestore&&K7(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){t=Cn(t,Ia);const e=Cn(t.firestore,ks);return QO(sa(e),t._key).then((r=>sS(e,t,r)))}class Yh extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ph(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ia(this.firestore,null,r)}}function Mte(t){t=Cn(t,Ia);const e=Cn(t.firestore,ks),r=sa(e),n=new Yh(e);return Xee(r,t._key).then((s=>new fp(e,n,t._key,s,new ph(s!==null&&s.hasLocalMutations,!0),t.converter)))}function Bte(t){t=Cn(t,Ia);const e=Cn(t.firestore,ks);return QO(sa(e),t._key,{source:"server"}).then((r=>sS(e,t,r)))}function vn(t){t=Cn(t,Qi);const e=Cn(t.firestore,ks),r=sa(e),n=new Yh(e);return mM(t._query),JO(r,t._query).then((s=>new hp(e,n,t,s)))}function Vte(t){t=Cn(t,Qi);const e=Cn(t.firestore,ks),r=sa(e),n=new Yh(e);return Qee(r,t._query).then((s=>new hp(e,n,t,s)))}function Ute(t){t=Cn(t,Qi);const e=Cn(t.firestore,ks),r=sa(e),n=new Yh(e);return JO(r,t._query,{source:"server"}).then((s=>new hp(e,n,t,s)))}function ad(t,e,r){t=Cn(t,Ia);const n=Cn(t.firestore,ks),s=Qb(t.converter,e,r);return Z1(n,[Gb(Lp(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ta.none())])}function ds(t,e,r,...n){t=Cn(t,Ia);const s=Cn(t.firestore,ks),a=Lp(s);let i;return i=typeof(e=Rn(e))=="string"||e instanceof Gh?eS(a,"updateDoc",t._key,e,r,n):Z7(a,"updateDoc",t._key,e),Z1(s,[i.toMutation(t._key,ta.exists(!0))])}function jc(t){return Z1(Cn(t.firestore,ks),[new H1(t._key,ta.none())])}function af(t,e){const r=Cn(t.firestore,ks),n=ir(t),s=Qb(t.converter,e);return Z1(r,[Gb(Lp(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,ta.exists(!1))]).then((()=>n))}function Dn(t,...e){var r,n,s;t=Rn(t);let a={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||ok(e[i])||(a=e[i],i++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ok(e[i])){const p=e[i];e[i]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[i+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[i+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let l,u,d;if(t instanceof Ia)u=Cn(t.firestore,ks),d=$1(t._key.path),l={next:p=>{e[i]&&e[i](sS(u,t,p))},error:e[i+1],complete:e[i+2]};else{const p=Cn(t,Qi);u=Cn(p.firestore,ks),d=p._query;const g=new Yh(u);l={next:m=>{e[i]&&e[i](new hp(u,g,p,m))},error:e[i+1],complete:e[i+2]},mM(t._query)}return(function(g,m,x,y){const b=new zb(y),S=new M7(m,b,x);return g.asyncQueue.enqueueAndForget((async()=>F7(await T1(g),S))),()=>{b.Za(),g.asyncQueue.enqueueAndForget((async()=>D7(await T1(g),S)))}})(sa(u),d,o,l)}function zte(t,e){return Zee(sa(t=Cn(t,ks)),ok(e)?e:{next:e})}function Z1(t,e){return(function(n,s){const a=new Xi;return n.asyncQueue.enqueueAndForget((async()=>Cee(await W7(n),s,a))),a.promise})(sa(t),e)}function sS(t,e,r){const n=r.docs.get(e._key),s=new Yh(t);return new fp(t,s,e._key,n,new ph(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $te(t){return wM(t,{count:vM()})}function wM(t,e){const r=Cn(t.firestore,ks),n=sa(r),s=xD(e,((a,i)=>new GD(i,a.aggregateType,a._internalFieldPath)));return Jee(n,t._query,s).then((a=>(function(o,l,u){const d=new Yh(o);return new oM(l,d,u)})(r,t,a)))}class qte{constructor(e){this.kind="memory",this._onlineComponentProvider=Ih.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Th.provider}toJSON(){return{kind:this.kind}}}class Hte{constructor(e){let r;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=bM(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Wte{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Th.provider}toJSON(){return{kind:this.kind}}}class Gte{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new $ee(e)}}toJSON(){return{kind:this.kind}}}function Kte(){return new Wte}function Yte(t){return new Gte(t?.cacheSizeBytes)}function Xte(t){return new qte(t)}function Qte(t){return new Hte(t)}class Jte{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ih.provider,this._offlineComponentProvider={build:r=>new q7(r,e?.cacheSizeBytes,this.forceOwnership)}}}class Zte{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ih.provider,this._offlineComponentProvider={build:r=>new GO(r,e?.cacheSizeBytes)}}}function bM(t){return new Jte(t?.forceOwnership)}function ere(){return new Zte}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tre={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lp(e)}set(e,r,n){this._verifyNotCommitted();const s=oh(e,this._firestore),a=Qb(s.converter,r,n),i=Gb(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,ta.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const a=oh(e,this._firestore);let i;return i=typeof(r=Rn(r))=="string"||r instanceof Gh?eS(this._dataReader,"WriteBatch.update",a._key,r,n,s):Z7(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(i.toMutation(a._key,ta.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=oh(e,this._firestore);return this._mutations=this._mutations.concat(new H1(r._key,ta.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oh(t,e){if((t=Rn(t)).firestore!==e)throw new Rt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Lp(r)}get(r){const n=oh(r,this._firestore),s=new Pte(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return lr();const i=a[0];if(i.isFoundDocument())return new y2(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new y2(this._firestore,s,n._key,null,n.converter);throw lr()}))}set(r,n,s){const a=oh(r,this._firestore),i=Qb(a.converter,n,s),o=Gb(this._dataReader,"Transaction.set",a._key,i,a.converter!==null,s);return this._transaction.set(a._key,o),this}update(r,n,s,...a){const i=oh(r,this._firestore);let o;return o=typeof(n=Rn(n))=="string"||n instanceof Gh?eS(this._dataReader,"Transaction.update",i._key,n,s,a):Z7(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(r){const n=oh(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=oh(e,this._firestore),n=new Yh(this._firestore);return super.get(e).then((s=>new fp(this._firestore,n,r._key,s._document,new ph(!1,!1),r.converter)))}}function rre(t,e,r){t=Cn(t,ks);const n=Object.assign(Object.assign({},tre),r);return(function(a){if(a.maxAttempts<1)throw new Rt(ht.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,i,o){const l=new Xi;return a.asyncQueue.enqueueAndForget((async()=>{const u=await XO(a);new Wee(a.asyncQueue,u,o,i,l).au()})),l.promise})(sa(t),(s=>e(new kM(t,s))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return new oy("deleteField")}function Is(){return new Y7("serverTimestamp")}function Fx(...t){return new X7("arrayUnion",t)}function nre(...t){return new Q7("arrayRemove",t)}function A5(t){return new J7("increment",t)}function sre(t){return new iy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){return sa(t=Cn(t,ks)),new _M(t,(e=>Z1(t,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function are(t,e){const r=sa(t=Cn(t,ks));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return oc("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=(function(a){const i=typeof a=="string"?(function(u){try{return JSON.parse(u)}catch(d){throw new Rt(ht.INVALID_ARGUMENT,"Failed to parse JSON: "+d?.message)}})(a):a,o=[];if(Array.isArray(i.indexes))for(const l of i.indexes){const u=OA(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const p of l.fields){const g=Kb("setIndexConfiguration",OA(p,"fieldPath"));p.arrayConfig==="CONTAINS"?d.push(new K0(g,2)):p.order==="ASCENDING"?d.push(new K0(g,0)):p.order==="DESCENDING"&&d.push(new K0(g,1))}o.push(new x1(x1.UNKNOWN_ID,u,d,y1.empty()))}return o})(e);return rte(r,n)}function OA(t,e){if(typeof t[e]!="string")throw new Rt(ht.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function ire(t){var e;t=Cn(t,ks);const r=MA.get(t);if(r)return r;if(((e=sa(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new SM(t);return MA.set(t,n),n}function ore(t){NM(t,!0)}function lre(t){NM(t,!1)}function cre(t){ste(sa(t._firestore)).then((e=>Ft("deleting all persistent cache indexes succeeded"))).catch((e=>oc("deleting all persistent cache indexes failed",e)))}function NM(t,e){nte(sa(t._firestore),e).then((r=>Ft(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>oc(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const MA=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ure(t){var e;const r=(e=sa(Cn(t.firestore,ks))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Db(r,Xo(t._query))._t}function dre(t,e){var r;const n=xD(e,((a,i)=>new GD(i,a.aggregateType,a._internalFieldPath))),s=(r=sa(Cn(t.firestore,ks))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:iO(s,PD(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fre{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return iS.instance.onExistenceFilterMismatch(e)}}class iS{constructor(){this.Uu=new Map}static get instance(){return Pv||(Pv=new iS,(function(r){if(y5)throw new Error("a TestingHooksSpi instance is already set");y5=r})(Pv)),Pv}et(e){this.Uu.forEach((r=>r(e)))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Pv=null;(function(e,r=!0){(function(s){z1=s})(Rp),_h(new tf("firestore",((n,{instanceIdentifier:s,options:a})=>{const i=n.getProvider("app").getImmediate(),o=new ks(new JQ(n.getProvider("auth-internal")),new tJ(n.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Rt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sh(u.options.projectId,d)})(i,s),i);return a=Object.assign({useFetchStreams:r},a),o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),Dc(CC,"4.7.3",e),Dc(CC,"4.7.3","esm2017")})();const EM=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:nS,AggregateField:I1,AggregateQuerySnapshot:oM,Bytes:Ph,CACHE_SIZE_UNLIMITED:ote,CollectionReference:fu,DocumentReference:Ia,DocumentSnapshot:fp,FieldPath:Gh,FieldValue:Kh,Firestore:ks,FirestoreError:Rt,GeoPoint:Hb,LoadBundleTask:nM,PersistentCacheIndexManager:SM,Query:Qi,QueryCompositeFilterConstraint:Dp,QueryConstraint:Q1,QueryDocumentSnapshot:Lx,QueryEndAtConstraint:uy,QueryFieldFilterConstraint:J1,QueryLimitConstraint:ly,QueryOrderByConstraint:Xb,QuerySnapshot:hp,QueryStartAtConstraint:cy,SnapshotMetadata:ph,Timestamp:na,Transaction:kM,VectorValue:iy,WriteBatch:_M,_AutoId:o7,_ByteString:ya,_DatabaseId:Sh,_DocumentKey:rr,_EmptyAppCheckTokenProvider:rJ,_EmptyAuthCredentialsProvider:sD,_FieldPath:Us,_TestingHooks:fre,_cast:Cn,_debugAssert:XQ,_internalAggregationQueryToProtoRunAggregationQueryRequest:dre,_internalQueryToProtoQueryTarget:ure,_isBase64Available:IJ,_logWarn:oc,_validateIsNotUsedTogether:eM,addDoc:af,aggregateFieldEqual:Lte,aggregateQuerySnapshotEqual:Fte,and:Nte,arrayRemove:nre,arrayUnion:Fx,average:Rte,clearIndexedDbPersistence:dte,collection:tr,collectionGroup:ate,connectFirestoreEmulator:rM,count:vM,deleteAllPersistentCacheIndexes:cre,deleteDoc:jc,deleteField:lk,disableNetwork:pte,disablePersistentCacheIndexAutoCreation:lre,doc:ir,documentId:yte,enableIndexedDbPersistence:cte,enableMultiTabIndexedDbPersistence:ute,enableNetwork:hte,enablePersistentCacheIndexAutoCreation:ore,endAt:Ite,endBefore:Tte,ensureFirestoreConfigured:sa,executeWrite:Z1,getAggregateFromServer:wM,getCountFromServer:$te,getDoc:Pa,getDocFromCache:Mte,getDocFromServer:Bte,getDocs:vn,getDocsFromCache:Vte,getDocsFromServer:Ute,getFirestore:sM,getPersistentCacheIndexManager:ire,increment:A5,initializeFirestore:lte,limit:vu,limitToLast:Ete,loadBundle:gte,memoryEagerGarbageCollector:Kte,memoryLocalCache:Xte,memoryLruGarbageCollector:Yte,namedQuery:xte,onSnapshot:Dn,onSnapshotsInSync:zte,or:Ste,orderBy:Qa,persistentLocalCache:Qte,persistentMultipleTabManager:ere,persistentSingleTabManager:bM,query:br,queryEqual:K7,refEqual:ite,runTransaction:rre,serverTimestamp:Is,setDoc:ad,setIndexConfiguration:are,setLogLevel:YQ,snapshotEqual:Ote,startAfter:Ate,startAt:Cte,sum:jte,terminate:mte,updateDoc:ds,vector:sre,waitForPendingWrites:fte,where:Fr,writeBatch:aS},Symbol.toStringTag,{value:"Module"}));var hre="firebase",pre="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dc(hre,pre,"app");function oS(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function CM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mre=CM,AM=new K2("auth","Firebase",CM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new s7("@firebase/auth");function gre(t,...e){T5.logLevel<=Fn.WARN&&T5.warn(`Auth (${Rp}): ${t}`,...e)}function Pw(t,...e){T5.logLevel<=Fn.ERROR&&T5.error(`Auth (${Rp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,...e){throw cS(t,...e)}function hu(t,...e){return cS(t,...e)}function lS(t,e,r){const n=Object.assign(Object.assign({},mre()),{[e]:r});return new K2("auth","Firebase",n).create(e,{appName:t.name})}function Kd(t){return lS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xre(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Bc(t,"argument-error"),lS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cS(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return AM.create(t,...e)}function Gr(t,e,...r){if(!t)throw cS(e,...r)}function zd(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pw(e),new Error(e)}function of(t,e){t||zd(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yre(){return BA()==="http:"||BA()==="https:"}function BA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vre(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yre()||IX()||"connection"in navigator)?navigator.onLine:!0}function wre(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,r){this.shortDelay=e,this.longDelay=r,of(r>e,"Short delay should be less than long delay!"),this.isMobile=CX()||PX()}get(){return vre()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){of(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _re=new dy(3e4,6e4);function gf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gd(t,e,r,n,s={}){return IM(t,s,async()=>{let a={},i={};n&&(e==="GET"?i=n:a={body:JSON.stringify(n)});const o=Y2(Object.assign({key:t.config.apiKey},i)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},a);return TX()||(u.referrerPolicy="no-referrer"),TM.fetch()(PM(t,t.config.apiHost,r,o),u)})}async function IM(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},bre),e);try{const s=new Sre(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw jv(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jv(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw jv(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw jv(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lS(t,d,u);Bc(t,d)}}catch(s){if(s instanceof yu)throw s;Bc(t,"network-request-failed",{message:String(s)})}}async function fy(t,e,r,n,s={}){const a=await gd(t,e,r,n,s);return"mfaPendingCredential"in a&&Bc(t,"multi-factor-auth-required",{_serverResponse:a}),a}function PM(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?uS(t.config,s):`${t.config.apiScheme}://${s}`}function kre(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sre{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(hu(this.auth,"network-request-failed")),_re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jv(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=hu(t,e,n);return s.customData._tokenResponse=r,s}function VA(t){return t!==void 0&&t.enterprise!==void 0}class Nre{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return kre(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ere(t,e){return gd(t,"GET","/v2/recaptchaConfig",gf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cre(t,e){return gd(t,"POST","/v1/accounts:delete",e)}async function jM(t,e){return gd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Are(t,e=!1){const r=Rn(t),n=await r.getIdToken(e),s=dS(n);Gr(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a?.sign_in_provider;return{claims:s,token:n,authTime:Dx(K_(s.auth_time)),issuedAtTime:Dx(K_(s.iat)),expirationTime:Dx(K_(s.exp)),signInProvider:i||null,signInSecondFactor:a?.sign_in_second_factor||null}}function K_(t){return Number(t)*1e3}function dS(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Pw("JWT malformed, contained fewer than 3 sections"),null;try{const s=BF(r);return s?JSON.parse(s):(Pw("Failed to decode base64 JWT payload"),null)}catch(s){return Pw("Caught error parsing JWT payload as JSON",s?.toString()),null}}function UA(t){const e=dS(t);return Gr(e,"internal-error"),Gr(typeof e.exp<"u","internal-error"),Gr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof yu&&Tre(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Tre({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ire{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dx(this.lastLoginAt),this.creationTime=Dx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(t){var e;const r=t.auth,n=await t.getIdToken(),s=await P1(t,jM(r,{idToken:n}));Gr(s?.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const i=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?RM(a.providerUserInfo):[],o=jre(t.providerData,i),l=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!o?.length,d=l?u:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new uk(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function Pre(t){const e=Rn(t);await I5(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jre(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function RM(t){return t.map(e=>{var{providerId:r}=e,n=oS(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rre(t,e){const r=await IM(t,{},async()=>{const n=Y2({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=PM(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",TM.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Lre(t,e){return gd(t,"POST","/v2/accounts:revokeToken",gf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gr(e.idToken,"internal-error"),Gr(typeof e.idToken<"u","internal-error"),Gr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Gr(e.length!==0,"internal-error");const r=UA(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Gr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await Rre(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,i=new e1;return n&&(Gr(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(Gr(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(Gr(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e1,this.toJSON())}_performRefresh(){return zd("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){Gr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $d{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,a=oS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ire(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new uk(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await P1(this,this.stsTokenManager.getToken(this.auth,e));return Gr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Are(this,e)}reload(){return Pre(this)}_assign(e){this!==e&&(Gr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new $d(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Gr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await I5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cu(this.auth.app))return Promise.reject(Kd(this.auth));const e=await this.getIdToken();return await P1(this,Cre(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,a,i,o,l,u,d;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(s=r.email)!==null&&s!==void 0?s:void 0,m=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,x=(i=r.photoURL)!==null&&i!==void 0?i:void 0,y=(o=r.tenantId)!==null&&o!==void 0?o:void 0,b=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,S=(u=r.createdAt)!==null&&u!==void 0?u:void 0,P=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:O,isAnonymous:W,providerData:Y,stsTokenManager:L}=r;Gr(T&&L,e,"internal-error");const A=e1.fromJSON(this.name,L);Gr(typeof T=="string",e,"internal-error"),Qf(p,e.name),Qf(g,e.name),Gr(typeof O=="boolean",e,"internal-error"),Gr(typeof W=="boolean",e,"internal-error"),Qf(m,e.name),Qf(x,e.name),Qf(y,e.name),Qf(b,e.name),Qf(S,e.name),Qf(P,e.name);const N=new $d({uid:T,auth:e,email:g,emailVerified:O,displayName:p,isAnonymous:W,photoURL:x,phoneNumber:m,tenantId:y,stsTokenManager:A,createdAt:S,lastLoginAt:P});return Y&&Array.isArray(Y)&&(N.providerData=Y.map(D=>Object.assign({},D))),b&&(N._redirectEventId=b),N}static async _fromIdTokenResponse(e,r,n=!1){const s=new e1;s.updateFromServerResponse(r);const a=new $d({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await I5(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Gr(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?RM(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!a?.length,o=new e1;o.updateFromIdToken(n);const l=new $d({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uk(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Map;function qd(t){of(t instanceof Function,"Expected a class definition");let e=zA.get(t);return e?(of(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}LM.type="NONE";const $A=LM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e,r){return`firebase:${t}:${e}:${r}`}class t1{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=jw(this.userKey,s.apiKey,a),this.fullPersistenceKey=jw("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$d._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new t1(qd($A),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||qd($A);const i=jw(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){const p=$d._fromJSON(e,d);u!==a&&(o=p),a=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new t1(a,e,n):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(i)}catch{}})),new t1(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VM(e))return"Blackberry";if(UM(e))return"Webos";if(DM(e))return"Safari";if((e.includes("chrome/")||OM(e))&&!e.includes("edge/"))return"Chrome";if(BM(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function FM(t=Ti()){return/firefox\//i.test(t)}function DM(t=Ti()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OM(t=Ti()){return/crios\//i.test(t)}function MM(t=Ti()){return/iemobile/i.test(t)}function BM(t=Ti()){return/android/i.test(t)}function VM(t=Ti()){return/blackberry/i.test(t)}function UM(t=Ti()){return/webos/i.test(t)}function fS(t=Ti()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Fre(t=Ti()){var e;return fS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Dre(){return jX()&&document.documentMode===10}function zM(t=Ti()){return fS(t)||BM(t)||UM(t)||VM(t)||/windows phone/i.test(t)||MM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t,e=[]){let r;switch(t){case"Browser":r=qA(Ti());break;case"Worker":r=`${qA(Ti())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Rp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mre(t,e={}){return gd(t,"GET","/v2/passwordPolicy",gf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bre=6;class Vre{constructor(e){var r,n,s,a;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Bre,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,a,i,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(i=l.containsNumericCharacter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ure{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HA(this),this.idTokenSubscription=new HA(this),this.beforeStateQueue=new Ore(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=qd(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await t1.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await jM(this,{idToken:e}),n=await $d._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(cu(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Gr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await I5(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cu(this.app))return Promise.reject(Kd(this));const r=e?Rn(e):null;return r&&Gr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Gr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cu(this.app)?Promise.reject(Kd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cu(this.app)?Promise.reject(Kd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qd(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mre(this),r=new Vre(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new K2("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Lre(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&qd(e)||this._popupRedirectResolver;Gr(r,this,"argument-error"),this.redirectPersistenceManager=await t1.create(this,[qd(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gr(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$M(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&gre(`Error while retrieving App Check token: ${r.error}`),r?.token}}function xf(t){return Rn(t)}class HA{constructor(e){this.auth=e,this.observer=null,this.addObserver=MX(r=>this.observer=r)}get next(){return Gr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zre(t){Jb=t}function qM(t){return Jb.loadJS(t)}function $re(){return Jb.recaptchaEnterpriseScript}function qre(){return Jb.gapiScript}function Hre(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Wre="recaptcha-enterprise",Gre="NO_RECAPTCHA";class Kre{constructor(e){this.type=Wre,this.auth=xf(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{Ere(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Nre(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;VA(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{i(u)}).catch(()=>{i(Gre)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,i)=>{n(this.auth).then(o=>{if(!r&&VA(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=$re();l.length!==0&&(l+=o),qM(l).then(()=>{s(o,a,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function WA(t,e,r,n=!1){const s=new Kre(t);let a;try{a=await s.verify(r)}catch{a=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:a}):Object.assign(i,{captchaResponse:a}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function P5(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await WA(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await WA(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yre(t,e){const r=jp(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(bh(a,e??{}))return s;Bc(s,"already-initialized")}return r.initialize({options:e})}function Xre(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(qd);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function Qre(t,e,r){const n=xf(t);Gr(n._canInitEmulator,n,"emulator-config-failed"),Gr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=HM(e),{host:i,port:o}=Jre(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${a}//${i}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),Zre()}function HM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Jre(t){const e=HM(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:GA(n.substr(a.length+1))}}else{const[a,i]=n.split(":");return{host:a,port:GA(i)}}}function GA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Zre(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return zd("not implemented")}_getIdTokenResponse(e){return zd("not implemented")}_linkToIdToken(e,r){return zd("not implemented")}_getReauthenticationResolver(e){return zd("not implemented")}}async function ene(t,e){return gd(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tne(t,e){return fy(t,"POST","/v1/accounts:signInWithPassword",gf(t,e))}async function WM(t,e){return gd(t,"POST","/v1/accounts:sendOobCode",gf(t,e))}async function rne(t,e){return WM(t,e)}async function nne(t,e){return WM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sne(t,e){return fy(t,"POST","/v1/accounts:signInWithEmailLink",gf(t,e))}async function ane(t,e){return fy(t,"POST","/v1/accounts:signInWithEmailLink",gf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2 extends hS{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new v2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new v2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P5(e,r,"signInWithPassword",tne);case"emailLink":return sne(e,{email:this._email,oobCode:this._password});default:Bc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P5(e,n,"signUpPassword",ene);case"emailLink":return ane(e,{idToken:r,email:this._email,oobCode:this._password});default:Bc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e){return fy(t,"POST","/v1/accounts:signInWithIdp",gf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ine="http://localhost";class pp extends hS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new pp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Bc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,a=oS(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new pp(n,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return r1(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,r1(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,r1(e,r)}buildRequest(){const e={requestUri:ine,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Y2(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function one(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lne(t){const e=ix(ox(t)).link,r=e?ix(ox(e)).deep_link_id:null,n=ix(ox(t)).deep_link_id;return(n?ix(ox(n)).link:null)||n||r||e||t}class pS{constructor(e){var r,n,s,a,i,o;const l=ix(ox(e)),u=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,p=one((s=l.mode)!==null&&s!==void 0?s:null);Gr(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(i=l.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=lne(e);try{return new pS(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.providerId=Op.PROVIDER_ID}static credential(e,r){return v2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=pS.parseLink(r);return Gr(n,"argument-error"),v2._fromEmailAndCode(e,n.code,n.tenantId)}}Op.PROVIDER_ID="password";Op.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Op.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends mS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends hy{constructor(){super("facebook.com")}static credential(e){return pp._fromParams({providerId:lh.PROVIDER_ID,signInMethod:lh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lh.credentialFromTaggedObject(e)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lh.credential(e.oauthAccessToken)}catch{return null}}}lh.FACEBOOK_SIGN_IN_METHOD="facebook.com";lh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends hy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return pp._fromParams({providerId:Yu.PROVIDER_ID,signInMethod:Yu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Yu.credentialFromTaggedObject(e)}static credentialFromError(e){return Yu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Yu.credential(r,n)}catch{return null}}}Yu.GOOGLE_SIGN_IN_METHOD="google.com";Yu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends hy{constructor(){super("github.com")}static credential(e){return pp._fromParams({providerId:ch.PROVIDER_ID,signInMethod:ch.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ch.credentialFromTaggedObject(e)}static credentialFromError(e){return ch.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ch.credential(e.oauthAccessToken)}catch{return null}}}ch.GITHUB_SIGN_IN_METHOD="github.com";ch.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends hy{constructor(){super("twitter.com")}static credential(e,r){return pp._fromParams({providerId:uh.PROVIDER_ID,signInMethod:uh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return uh.credentialFromTaggedObject(e)}static credentialFromError(e){return uh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return uh.credential(r,n)}catch{return null}}}uh.TWITTER_SIGN_IN_METHOD="twitter.com";uh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cne(t,e){return fy(t,"POST","/v1/accounts:signUp",gf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await $d._fromIdTokenResponse(e,n,s),i=KA(n);return new mp({user:a,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=KA(n);return new mp({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function KA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5 extends yu{constructor(e,r,n,s){var a;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,j5.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new j5(e,r,n,s)}}function GM(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?j5._fromErrorAndOperation(t,a,e,n):a})}async function une(t,e,r=!1){const n=await P1(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return mp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e,r=!1){const{auth:n}=t;if(cu(n.app))return Promise.reject(Kd(n));const s="reauthenticate";try{const a=await P1(t,GM(n,s,e,t),r);Gr(a.idToken,n,"internal-error");const i=dS(a.idToken);Gr(i,n,"internal-error");const{sub:o}=i;return Gr(t.uid===o,n,"user-mismatch"),mp._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Bc(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e,r=!1){if(cu(t.app))return Promise.reject(Kd(t));const n="signIn",s=await GM(t,n,e),a=await mp._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function dne(t,e){return YM(xf(t),e)}async function fne(t,e){return KM(Rn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t){const e=xf(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hne(t,e,r){const n=xf(t);await P5(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",nne)}async function QM(t,e,r){if(cu(t.app))return Promise.reject(Kd(t));const n=xf(t),i=await P5(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cne).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&XM(t),l}),o=await mp._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(o.user),o}function pne(t,e,r){return cu(t.app)?Promise.reject(Kd(t)):dne(Rn(t),Op.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&XM(t),n})}async function mne(t,e){const r=Rn(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await rne(r.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gne(t,e){return gd(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Rn(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},i=await P1(n,gne(n.auth,a));n.displayName=i.displayName||null,n.photoURL=i.photoUrl||null;const o=n.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(i)}function xne(t,e,r,n){return Rn(t).onIdTokenChanged(e,r,n)}function yne(t,e,r){return Rn(t).beforeAuthStateChanged(e,r)}function vne(t,e,r,n){return Rn(t).onAuthStateChanged(e,r,n)}function wne(t){return Rn(t).signOut()}const R5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(R5,"1"),this.storage.removeItem(R5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bne=1e3,_ne=10;class eB extends ZM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},a=this.storage.getItem(n);Dre()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,_ne):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},bne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}eB.type="LOCAL";const kne=eB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB extends ZM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}tB.type="SESSION";const rB=tB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sne(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Zb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,i=this.handlersMap[s];if(!i?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map(async u=>u(r.origin,a)),l=await Sne(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nne{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const u=gS("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(){return window}function Ene(t){id().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(){return typeof id().WorkerGlobalScope<"u"&&typeof id().importScripts=="function"}async function Cne(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ane(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Tne(){return nB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="firebaseLocalStorageDb",Ine=1,L5="firebaseLocalStorage",aB="fbase_key";class py{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function e4(t,e){return t.transaction([L5],e?"readwrite":"readonly").objectStore(L5)}function Pne(){const t=indexedDB.deleteDatabase(sB);return new py(t).toPromise()}function dk(){const t=indexedDB.open(sB,Ine);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(L5,{keyPath:aB})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(L5)?e(n):(n.close(),await Pne(),e(await dk()))})})}async function YA(t,e,r){const n=e4(t,!0).put({[aB]:e,value:r});return new py(n).toPromise()}async function jne(t,e){const r=e4(t,!1).get(e),n=await new py(r).toPromise();return n===void 0?null:n.value}function XA(t,e){const r=e4(t,!0).delete(e);return new py(r).toPromise()}const Rne=800,Lne=3;class iB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dk(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Lne)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zb._getInstance(Tne()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Cne(),!this.activeServiceWorker)return;this.sender=new Nne(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ane()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dk();return await YA(e,R5,"1"),await XA(e,R5),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>YA(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>jne(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>XA(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=e4(s,!1).getAll();return new py(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iB.type="LOCAL";const Fne=iB;new dy(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t,e){return e?qd(e):(Gr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends hS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return r1(e,this._buildIdpRequest())}_linkToIdToken(e,r){return r1(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return r1(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Dne(t){return YM(t.auth,new xS(t),t.bypassAuthState)}function One(t){const{auth:e,user:r}=t;return Gr(r,e,"internal-error"),KM(r,new xS(t),t.bypassAuthState)}async function Mne(t){const{auth:e,user:r}=t;return Gr(r,e,"internal-error"),une(r,new xS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dne;case"linkViaPopup":case"linkViaRedirect":return Mne;case"reauthViaPopup":case"reauthViaRedirect":return One;default:Bc(this.auth,"internal-error")}}resolve(e){of(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){of(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bne=new dy(2e3,1e4);async function QA(t,e,r){if(cu(t.app))return Promise.reject(hu(t,"operation-not-supported-in-this-environment"));const n=xf(t);xre(t,e,mS);const s=oB(n,r);return new O0(n,"signInViaPopup",e,s).executeNotNull()}class O0 extends lB{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,O0.currentPopupAction&&O0.currentPopupAction.cancel(),O0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gr(e,this.auth,"internal-error"),e}async onExecution(){of(this.filter.length===1,"Popup operations only handle one event");const e=gS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(hu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bne.get())};e()}}O0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne="pendingRedirect",Rw=new Map;class Une extends lB{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Rw.get(this.auth._key());if(!e){try{const n=await zne(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Rw.set(this.auth._key(),e)}return this.bypassAuthState||Rw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zne(t,e){const r=Hne(e),n=qne(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function $ne(t,e){Rw.set(t._key(),e)}function qne(t){return qd(t._redirectPersistence)}function Hne(t){return jw(Vne,t.config.apiKey,t.name)}async function Wne(t,e,r=!1){if(cu(t.app))return Promise.reject(Kd(t));const n=xf(t),s=oB(n,e),i=await new Une(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gne=600*1e3;class Kne{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yne(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!cB(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(hu(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gne&&this.cachedEventUids.clear(),this.cachedEventUids.has(JA(e))}saveEventToCache(e){this.cachedEventUids.add(JA(e)),this.lastProcessedEventTime=Date.now()}}function JA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cB({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Yne(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xne(t,e={}){return gd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qne=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jne=/^https?/;async function Zne(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xne(t);for(const r of e)try{if(ese(r))return}catch{}Bc(t,"unauthorized-domain")}function ese(t){const e=ck(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Jne.test(r))return!1;if(Qne.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tse=new dy(3e4,6e4);function ZA(){const t=id().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rse(t){return new Promise((e,r)=>{var n,s,a;function i(){ZA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZA(),r(hu(t,"network-request-failed"))},timeout:tse.get()})}if(!((s=(n=id().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=id().gapi)===null||a===void 0)&&a.load)i();else{const o=Hre("iframefcb");return id()[o]=()=>{gapi.load?i():r(hu(t,"network-request-failed"))},qM(`${qre()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Lw=null,e})}let Lw=null;function nse(t){return Lw=Lw||rse(t),Lw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sse=new dy(5e3,15e3),ase="__/auth/iframe",ise="emulator/auth/iframe",ose={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cse(t){const e=t.config;Gr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?uS(e,ise):`https://${t.config.authDomain}/${ase}`,n={apiKey:e.apiKey,appName:t.name,v:Rp},s=lse.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Y2(n).slice(1)}`}async function use(t){const e=await nse(t),r=id().gapi;return Gr(r,t,"internal-error"),e.open({where:document.body,url:cse(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ose,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const i=hu(t,"network-request-failed"),o=id().setTimeout(()=>{a(i)},sse.get());function l(){id().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fse=500,hse=600,pse="_blank",mse="http://localhost";class eT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gse(t,e,r,n=fse,s=hse){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},dse),{width:n.toString(),height:s.toString(),top:a,left:i}),u=Ti().toLowerCase();r&&(o=OM(u)?pse:r),FM(u)&&(e=e||mse,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[m,x])=>`${g}${m}=${x},`,"");if(Fre(u)&&o!=="_self")return xse(e||"",o),new eT(null);const p=window.open(e||"",o,d);Gr(p,t,"popup-blocked");try{p.focus()}catch{}return new eT(p)}function xse(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yse="__/auth/handler",vse="emulator/auth/handler",wse=encodeURIComponent("fac");async function tT(t,e,r,n,s,a){Gr(t.config.authDomain,t,"auth-domain-config-required"),Gr(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Rp,eventId:s};if(e instanceof mS){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",OX(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))i[d]=p}if(e instanceof hy){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${wse}=${encodeURIComponent(l)}`:"";return`${bse(t)}?${Y2(o).slice(1)}${u}`}function bse({config:t}){return t.emulator?uS(t,vse):`https://${t.authDomain}/${yse}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="webStorageSupport";class _se{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rB,this._completeRedirectFn=Wne,this._overrideRedirectResult=$ne}async _openPopup(e,r,n,s){var a;of((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await tT(e,r,n,ck(),s);return gse(e,i,gS())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await tT(e,r,n,ck(),s);return Ene(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(of(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await use(e),n=new Kne(e);return r.register("authEvent",s=>(Gr(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Y_,{type:Y_},s=>{var a;const i=(a=s?.[0])===null||a===void 0?void 0:a[Y_];i!==void 0&&r(!!i),Bc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Zne(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return zM()||DM()||fS()}}const kse=_se;var rT="@firebase/auth",nT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sse{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Gr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ese(t){_h(new tf("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Gr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$M(t)},u=new Ure(n,s,a,l);return Xre(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),_h(new tf("auth-internal",e=>{const r=xf(e.getProvider("auth").getImmediate());return(n=>new Sse(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dc(rT,nT,Nse(t)),Dc(rT,nT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cse=300,Ase=zF("authIdTokenMaxAge")||Cse;let sT=null;const Tse=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Ase)return;const s=r?.token;sT!==s&&(sT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uB(t=Tb()){const e=jp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Yre(t,{popupRedirectResolver:kse,persistence:[Fne,kne,rB]}),n=zF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const i=Tse(a.toString());yne(r,i,()=>i(r.currentUser)),xne(r,o=>i(o))}}const s=VF("auth");return s&&Qre(r,`http://${s}`),r}function Ise(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zre({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=hu("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",Ise().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ese("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB="firebasestorage.googleapis.com",fB="storageBucket",Pse=120*1e3,jse=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends yu{constructor(e,r,n=0){super(X_(e),`Firebase Storage: ${r} (${X_(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return X_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ra;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ra||(Ra={}));function X_(t){return"storage/"+t}function yS(){const t="An unknown error occurred, please check the error payload for server response.";return new Fa(Ra.UNKNOWN,t)}function Rse(t){return new Fa(Ra.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Lse(t){return new Fa(Ra.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Fse(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fa(Ra.UNAUTHENTICATED,t)}function Dse(){return new Fa(Ra.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ose(t){return new Fa(Ra.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Mse(){return new Fa(Ra.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bse(){return new Fa(Ra.CANCELED,"User canceled the upload/download.")}function Vse(t){return new Fa(Ra.INVALID_URL,"Invalid URL '"+t+"'.")}function Use(t){return new Fa(Ra.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zse(){return new Fa(Ra.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fB+"' property when initializing the app?")}function $se(){return new Fa(Ra.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qse(){return new Fa(Ra.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Hse(t){return new Fa(Ra.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fk(t){return new Fa(Ra.INVALID_ARGUMENT,t)}function hB(){return new Fa(Ra.APP_DELETED,"The Firebase app was deleted.")}function Wse(t){return new Fa(Ra.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ox(t,e){return new Fa(Ra.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qg(t){throw new Fa(Ra.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=sc.makeFromUrl(e,r)}catch{return new sc(e,"")}if(n.path==="")return n;throw Use(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+s+i,"i"),l={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${s}/o${g}`,"i"),x={bucket:1,path:3},y=r===dB?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",S=new RegExp(`^https?://${y}/${s}/${b}`,"i"),T=[{regex:o,indices:l,postModify:a},{regex:m,indices:x,postModify:u},{regex:S,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<T.length;O++){const W=T[O],Y=W.regex.exec(e);if(Y){const L=Y[W.indices.bucket];let A=Y[W.indices.path];A||(A=""),n=new sc(L,A),W.postModify(n);break}}if(n==null)throw Vse(e);return n}}class Gse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kse(t,e,r){let n=1,s=null,a=null,i=!1,o=0;function l(){return o===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function p(b){s=setTimeout(()=>{s=null,t(m,l())},b)}function g(){a&&clearTimeout(a)}function m(b,...S){if(u){g();return}if(b){g(),d.call(null,b,...S);return}if(l()||i){g(),d.call(null,b,...S);return}n<64&&(n*=2);let T;o===1?(o=2,T=0):T=(n+Math.random())*1e3,p(T)}let x=!1;function y(b){x||(x=!0,g(),!u&&(s!==null?(b||(o=2),clearTimeout(s),p(0)):b||(o=1)))}return p(0),a=setTimeout(()=>{i=!0,y(!0)},r),y}function Yse(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xse(t){return t!==void 0}function Qse(t){return typeof t=="object"&&!Array.isArray(t)}function vS(t){return typeof t=="string"||t instanceof String}function aT(t){return wS()&&t instanceof Blob}function wS(){return typeof Blob<"u"}function iT(t,e,r,n){if(n<e)throw fk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw fk(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function pB(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Y0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Y0||(Y0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jse(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zse{constructor(e,r,n,s,a,i,o,l,u,d,p,g=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,x)=>{this.resolve_=m,this.reject_=x,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Rv(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const i=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&a.addUploadProgressListener(i),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(i),this.pendingConnection_=null;const o=a.getErrorCode()===Y0.NO_ERROR,l=a.getStatus();if(!o||Jse(l,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Y0.ABORT;n(!1,new Rv(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new Rv(u,a))})},r=(n,s)=>{const a=this.resolve_,i=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Xse(l)?a(l):a()}catch(l){i(l)}else if(o!==null){const l=yS();l.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,l)):i(l)}else if(s.canceled){const l=this.appDelete_?hB():Bse();i(l)}else{const l=Mse();i(l)}};this.canceled_?r(!1,new Rv(!1,null,!0)):this.backoffId_=Kse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Yse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function eae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function tae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sae(t,e,r,n,s,a,i=!0){const o=pB(t.urlParams),l=t.url+o,u=Object.assign({},t.headers);return rae(u,e),eae(u,r),tae(u,a),nae(u,n),new Zse(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iae(...t){const e=aae();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(wS())return new Blob(t);throw new Fa(Ra.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oae(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(t){if(typeof atob>"u")throw Hse("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Q_{constructor(e,r){this.data=e,this.contentType=r||null}}function cae(t,e){switch(t){case Ju.RAW:return new Q_(mB(e));case Ju.BASE64:case Ju.BASE64URL:return new Q_(gB(t,e));case Ju.DATA_URL:return new Q_(dae(e),fae(e))}throw yS()}function mB(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,i=t.charCodeAt(++r);n=65536|(a&1023)<<10|i&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function uae(t){let e;try{e=decodeURIComponent(t)}catch{throw Ox(Ju.DATA_URL,"Malformed data URL.")}return mB(e)}function gB(t,e){switch(t){case Ju.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Ox(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ju.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Ox(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=lae(e)}catch(s){throw s.message.includes("polyfill")?s:Ox(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class xB{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Ox(Ju.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=hae(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function dae(t){const e=new xB(t);return e.base64?gB(Ju.BASE64,e.rest):uae(e.rest)}function fae(t){return new xB(t).contentType}function hae(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,r){let n=0,s="";aT(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(aT(this.data_)){const n=this.data_,s=oae(n,e,r);return s===null?null:new dh(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new dh(n,!0)}}static getBlob(...e){if(wS()){const r=e.map(n=>n instanceof dh?n.data_:n);return new dh(iae.apply(null,r))}else{const r=e.map(i=>vS(i)?cae(Ju.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const s=new Uint8Array(n);let a=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)s[a++]=i[o]}),new dh(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t){let e;try{e=JSON.parse(t)}catch{return null}return Qse(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mae(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function vB(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gae(t,e){return e}class il{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||gae}}let Lv=null;function xae(t){return!vS(t)||t.length<2?t:vB(t)}function wB(){if(Lv)return Lv;const t=[];t.push(new il("bucket")),t.push(new il("generation")),t.push(new il("metageneration")),t.push(new il("name","fullPath",!0));function e(a,i){return xae(i)}const r=new il("name");r.xform=e,t.push(r);function n(a,i){return i!==void 0?Number(i):i}const s=new il("size");return s.xform=n,t.push(s),t.push(new il("timeCreated")),t.push(new il("updated")),t.push(new il("md5Hash",null,!0)),t.push(new il("cacheControl",null,!0)),t.push(new il("contentDisposition",null,!0)),t.push(new il("contentEncoding",null,!0)),t.push(new il("contentLanguage",null,!0)),t.push(new il("contentType",null,!0)),t.push(new il("metadata","customMetadata",!0)),Lv=t,Lv}function yae(t,e){function r(){const n=t.bucket,s=t.fullPath,a=new sc(n,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function vae(t,e,r){const n={};n.type="file";const s=r.length;for(let a=0;a<s;a++){const i=r[a];n[i.local]=i.xform(n,e[i.server])}return yae(n,t),n}function bB(t,e,r){const n=yB(e);return n===null?null:vae(t,n,r)}function wae(t,e,r,n){const s=yB(e);if(s===null||!vS(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const i=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,p=t.fullPath,g="/b/"+i(d)+"/o/"+i(p),m=bS(g,r,n),x=pB({alt:"media",token:u});return m+x})[0]}function bae(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const a=e[s];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class _B{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(t){if(!t)throw yS()}function _ae(t,e){function r(n,s){const a=bB(t,s,e);return kB(a!==null),a}return r}function kae(t,e){function r(n,s){const a=bB(t,s,e);return kB(a!==null),wae(a,s,t.host,t._protocol)}return r}function SB(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=Dse():s=Fse():r.getStatus()===402?s=Lse(t.bucket):r.getStatus()===403?s=Ose(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function Sae(t){const e=SB(t);function r(n,s){let a=e(n,s);return n.getStatus()===404&&(a=Rse(t.path)),a.serverResponse=s.serverResponse,a}return r}function Nae(t,e,r){const n=e.fullServerUrl(),s=bS(n,t.host,t._protocol),a="GET",i=t.maxOperationRetryTime,o=new _B(s,a,kae(t,r),i);return o.errorHandler=Sae(e),o}function Eae(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Cae(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Eae(null,e)),n}function Aae(t,e,r,n,s){const a=e.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let T="";for(let O=0;O<2;O++)T=T+Math.random().toString().slice(2);return T}const l=o();i["Content-Type"]="multipart/related; boundary="+l;const u=Cae(e,n,s),d=bae(u,r),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=dh.getBlob(p,n,g);if(m===null)throw $se();const x={name:u.fullPath},y=bS(a,t.host,t._protocol),b="POST",S=t.maxUploadRetryTime,P=new _B(y,b,_ae(t,r),S);return P.urlParams=x,P.headers=i,P.body=m.uploadData(),P.errorHandler=SB(e),P}class Tae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Y0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Y0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Y0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Qg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Iae extends Tae{initXhr(){this.xhr_.responseType="text"}}function NB(){return new Iae}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,r){this._service=e,r instanceof sc?this._location=r:this._location=sc.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new gp(e,r)}get root(){const e=new sc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vB(this._location.path)}get storage(){return this._service}get parent(){const e=pae(this._location.path);if(e===null)return null;const r=new sc(this._location.bucket,e);return new gp(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Wse(e)}}function Pae(t,e,r){t._throwIfRoot("uploadBytes");const n=Aae(t.storage,t._location,wB(),new dh(e,!0),r);return t.storage.makeRequestWithTokens(n,NB).then(s=>({metadata:s,ref:t}))}function jae(t){t._throwIfRoot("getDownloadURL");const e=Nae(t.storage,t._location,wB());return t.storage.makeRequestWithTokens(e,NB).then(r=>{if(r===null)throw qse();return r})}function Rae(t,e){const r=mae(t._location.path,e),n=new sc(t._location.bucket,r);return new gp(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lae(t){return/^[A-Za-z]+:\/\//.test(t)}function Fae(t,e){return new gp(t,e)}function EB(t,e){if(t instanceof _S){const r=t;if(r._bucket==null)throw zse();const n=new gp(r,r._bucket);return e!=null?EB(n,e):n}else return e!==void 0?Rae(t,e):t}function Dae(t,e){if(e&&Lae(e)){if(t instanceof _S)return Fae(t,e);throw fk("To use ref(service, url), the first argument must be a Storage instance.")}else return EB(t,e)}function oT(t,e){const r=e?.[fB];return r==null?null:sc.makeFromBucketSpec(r,t)}function Oae(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:$F(s,t.app.options.projectId))}class _S{constructor(e,r,n,s,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=dB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pse,this._maxUploadRetryTime=jse,this._requests=new Set,s!=null?this._bucket=sc.makeFromBucketSpec(s,this._host):this._bucket=oT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sc.makeFromBucketSpec(this._url,e):this._bucket=oT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gp(this,e)}_makeRequest(e,r,n,s,a=!0){if(this._deleted)return new Gse(hB());{const i=sae(e,this._appId,n,s,r,this._firebaseVersion,a);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const lT="@firebase/storage",cT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB="storage";function kS(t,e,r){return t=Rn(t),Pae(t,e,r)}function SS(t){return t=Rn(t),jae(t)}function NS(t,e){return t=Rn(t),Dae(t,e)}function Mae(t=Tb(),e){t=Rn(t);const n=jp(t,CB).getImmediate({identifier:e}),s=n7("storage");return s&&Bae(n,...s),n}function Bae(t,e,r,n={}){Oae(t,e,r,n)}function Vae(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new _S(r,n,s,e,Rp)}function Uae(){_h(new tf(CB,Vae,"PUBLIC").setMultipleInstances(!0)),Dc(lT,cT,""),Dc(lT,cT,"esm2017")}Uae();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zae="type.googleapis.com/google.protobuf.Int64Value",$ae="type.googleapis.com/google.protobuf.UInt64Value";function AB(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function hk(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>hk(e));if(typeof t=="function"||typeof t=="object")return AB(t,e=>hk(e));throw new Error("Data cannot be encoded in JSON: "+t)}function F5(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case zae:case $ae:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>F5(e)):typeof t=="function"||typeof t=="object"?AB(t,e=>F5(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class n1 extends yu{constructor(e,r,n){super(`${ES}/${e}`,r||""),this.details=n}}function qae(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Hae(t,e){let r=qae(t),n=r,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!uT[i])return new n1("internal","internal");r=uT[i],n=i}const o=a.message;typeof o=="string"&&(n=o),s=a.details,s!==void 0&&(s=F5(s))}}catch{}return r==="ok"?null:new n1(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wae{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="us-central1";function Gae(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new n1("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Kae{constructor(e,r,n,s,a=pk,i){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Wae(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=pk}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Yae(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Xae(t,e,r){return(n=>Jae(t,e,n,{}))}async function Qae(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}function Jae(t,e,r,n){const s=t._url(e);return Zae(t,s,r,n)}async function Zae(t,e,r,n){r=hk(r);const s={data:r},a={},i=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);i.authToken&&(a.Authorization="Bearer "+i.authToken),i.messagingToken&&(a["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=i.appCheckToken);const o=n.timeout||7e4,l=Gae(o),u=await Promise.race([Qae(e,s,a,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!u)throw new n1("cancelled","Firebase Functions instance was deleted.");const d=Hae(u.status,u.json);if(d)throw d;if(!u.json)throw new n1("internal","Response is not valid JSON object.");let p=u.json.data;if(typeof p>"u"&&(p=u.json.result),typeof p>"u")throw new n1("internal","Response is missing data field.");return{data:F5(p)}}const dT="@firebase/functions",fT="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eie="auth-internal",tie="app-check-internal",rie="messaging-internal";function nie(t,e){const r=(n,{instanceIdentifier:s})=>{const a=n.getProvider("app").getImmediate(),i=n.getProvider(eie),o=n.getProvider(rie),l=n.getProvider(tie);return new Kae(a,i,o,l,s,t)};_h(new tf(ES,r,"PUBLIC").setMultipleInstances(!0)),Dc(dT,fT,e),Dc(dT,fT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t=Tb(),e=pk){const n=jp(Rn(t),ES).getImmediate({identifier:e}),s=n7("functions");return s&&sie(n,...s),n}function sie(t,e,r){Yae(Rn(t),e,r)}function aie(t,e,r){return Xae(Rn(t),e)}nie(fetch.bind(self));const iie={apiKey:"AIzaSyB1GNt6gatBiZyVDj9wZP4TSnefXsohCho",authDomain:"healthapp-f4173.firebaseapp.com",projectId:"healthapp-f4173",storageBucket:"healthapp-f4173.firebasestorage.app",messagingSenderId:"169032569236",appId:"1:169032569236:web:38585fcf19c35ba1737f81"},t4=KF(iie),sh=uB(t4),ct=sM(t4),CS=Mae(t4);TB(t4);function mk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function IB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LB(n.key),n)}}function PB(t,e,r){return e&&hT(t.prototype,e),r&&hT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function jB(t,e,r){return(e=LB(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.push.apply(r,n)}return r}function Aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(r),!0).forEach((function(n){jB(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pT(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function gk(t,e){if(t==null)return{};var r,n,s=(function(i,o){if(i==null)return{};var l={};for(var u in i)if({}.hasOwnProperty.call(i,u)){if(o.indexOf(u)!==-1)continue;l[u]=i[u]}return l})(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function oie(t,e){return(function(r){if(Array.isArray(r))return r})(t)||(function(r,n){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var a,i,o,l,u=[],d=!0,p=!1;try{if(o=(s=s.call(r)).next,n!==0)for(;!(d=(a=o.call(s)).done)&&(u.push(a.value),u.length!==n);d=!0);}catch(g){p=!0,i=g}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(p)throw i}}return u}})(t,e)||FB(t,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function RB(t){return(function(e){if(Array.isArray(e))return mk(e)})(t)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(t)||FB(t)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function LB(t){var e=(function(r,n){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,n);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)})(t,"string");return typeof e=="symbol"?e:e+""}function xp(t){return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function FB(t,e){if(t){if(typeof t=="string")return mk(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mk(t,e):void 0}}var AS={cookieTestUrl:"https://legacy-staging.paystack.co/test-iframe/start.html",publishableKey:"uFmz/uE/SDT6GupOrSEXIZXGByjQ0zFkPyc9LqKHFqnTI0WPN3JS5kQPo/j9or0TOXlqMQj2lzHn/UGsQT4XeQ==",publicKey:`-----BEGIN PUBLIC KEY-----\r
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALhZs/7hP0g0+hrqTq0hFyGVxgco0NMx\r
ZD8nPS6ihxap0yNFjzdyUuZED6P4/aK9Ezl5ajEI9pcx5/1BrEE+F3kCAwEAAQ==\r
-----END PUBLIC KEY-----`,applePayVersion:6,applePayValidateSessionPath:"applepay/validate-session/",applePayChargePath:"applepay/charge"};Aa(Aa({},AS),{},{checkoutUrl:"http://localhost:8081/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"http://localhost:8081/static/vendor/pusher.min.js"});var lie=Aa(Aa({},AS),{},{checkoutUrl:"https://checkout-studio.paystack.com/",paymentBaseUrl:"https://legacy-staging.paystack.co/",paystackApiUrl:"https://studio-api.paystack.co/",siteUrl:"https://beta.paystack.com",pusherKey:"1c7b262ee18455815893",pusherUrl:"https://checkout-studio.paystack.com/static/vendor/pusher.min.js"}),El={production:Aa(Aa({},AS),{},{checkoutUrl:"https://checkout.paystack.com/",paymentBaseUrl:"https://standard.paystack.co/",paystackApiUrl:"https://api.paystack.co/",siteUrl:"https://paystack.com",pusherKey:"8e4b9b7ca3418bd5cdc8",pusherUrl:"https://checkout.paystack.com/static/vendor/pusher.min.js"})}.production||lie;function DB(t,e){var r=[];return Object.keys(t).forEach((function(n){var s=e?"".concat(e,"[").concat(n,"]"):n,a=t[s];r.push(a!==null&&(typeof v>"u"?"undefined":xp(v))==="object"?DB(a,s):"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(a)))})),r.join("&")}function Lm(){return document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1];var t}function mT(){var t=[],e=Lm();if(e){var r=Array.prototype.slice.call(e.attributes);t=Object.keys(r).filter((function(n){var s=r[n].nodeName;return s&&s.indexOf("data")>-1})).map((function(n){return r[n].nodeName}))}return t}var OB=`
  <svg id="inline-button-wordmark--white" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#ffffff"/>
  </svg>
`,cie=`
<svg id="inline-button-wordmark--grey" width="166" height="16" viewBox="0 0 166 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M0.564068 6.26985L1.86515 6.10375C1.85184 5.15143 1.83489 3.71187 1.84942 3.45964C1.95955 1.67927 3.39982 0.16589 5.13056 0.0170127C5.23949 0.00839996 5.34842 0.0034784 5.45371 0.00101762C6.36645 -0.0209585 7.25272 0.313716 7.93 0.936113C8.62472 1.56238 9.07979 2.4864 9.14999 3.4055C9.16815 3.64174 9.1621 5.24002 9.1621 6.18249L10.4886 6.38305L10.4438 14.0767L5.47308 14.7657L0.519287 13.961L0.564068 6.26985ZM5.53359 5.63743L7.62016 5.95241C7.61169 4.80446 7.55965 3.12867 7.30548 2.68696C6.91939 2.0164 6.28156 1.62021 5.55901 1.60421H5.48276C4.7481 1.61406 4.10543 2.0004 3.71813 2.66727C3.44944 3.13236 3.39619 4.70972 3.3974 5.91181L5.53359 5.63743ZM22.5808 12.4378C21.8836 12.4378 21.293 12.3492 20.8089 12.172C20.372 12.0088 19.9719 11.7577 19.6325 11.4338C19.3256 11.1331 19.0833 10.7712 18.9208 10.3707C18.7637 9.95815 18.6612 9.52621 18.6158 9.08621H19.8358C19.8745 9.40119 19.9423 9.70141 20.0391 9.98686C20.136 10.2625 20.286 10.5085 20.4894 10.7251C20.6927 10.9318 20.959 11.0991 21.2882 11.2271C21.6271 11.3452 22.0579 11.4043 22.5808 11.4043C22.9197 11.4043 23.2295 11.36 23.5103 11.2714C23.8008 11.173 24.0525 11.0351 24.2655 10.858C24.4785 10.6808 24.6431 10.4692 24.7593 10.2231C24.8852 9.97701 24.9481 9.70633 24.9481 9.41103C24.9481 9.11574 24.9094 8.85982 24.8319 8.64327C24.7536 8.41559 24.6125 8.21568 24.4253 8.06745C24.196 7.88594 23.9347 7.75064 23.6555 7.6688C23.257 7.54201 22.849 7.4482 22.4355 7.38828C21.9393 7.31041 21.4491 7.19693 20.9686 7.04869C20.5808 6.92967 20.2133 6.75038 19.8794 6.51716C19.5939 6.29685 19.3607 6.01432 19.1968 5.69034C19.0418 5.35567 18.9644 4.9521 18.9644 4.47963C18.9644 4.07607 19.0467 3.70203 19.2113 3.35752C19.3759 3.00317 19.6034 2.69803 19.8939 2.44211C20.194 2.18619 20.5475 1.98441 20.9541 1.83676C21.3608 1.68911 21.811 1.61529 22.3048 1.61529C23.3505 1.61529 24.1784 1.86629 24.7884 2.36829C25.4081 2.86044 25.7711 3.57899 25.8777 4.52393H24.7448C24.6189 3.8546 24.3624 3.37721 23.9751 3.09176C23.5878 2.79646 23.031 2.64882 22.3048 2.64882C21.5883 2.64882 21.0461 2.81123 20.6782 3.13605C20.5037 3.28606 20.3648 3.47417 20.2717 3.68635C20.1787 3.89853 20.1339 4.12931 20.1408 4.36152C20.1408 4.61744 20.1698 4.84875 20.2279 5.05546C20.2957 5.25232 20.4167 5.42457 20.591 5.57222C20.775 5.71987 21.0267 5.85275 21.3463 5.97087C21.7689 6.09987 22.2012 6.19369 22.6389 6.25139C23.2198 6.33998 23.7281 6.4581 24.1639 6.60575C24.5996 6.75339 24.9675 6.94533 25.2677 7.18157C25.5678 7.4178 25.7905 7.70818 25.9358 8.05268C26.0907 8.39719 26.1681 8.82045 26.1681 9.32245C26.1681 9.76539 26.0761 10.1788 25.8922 10.5627C25.7149 10.9408 25.4627 11.2775 25.1515 11.5519C24.8319 11.8275 24.4495 12.0441 24.0041 12.2016C23.5684 12.359 23.094 12.4378 22.5808 12.4378ZM31.2066 12.4378C30.6741 12.4378 30.1803 12.3443 29.7252 12.1573C29.2906 11.9775 28.8956 11.7115 28.5633 11.3747C28.2268 11.0185 27.965 10.5966 27.7936 10.1345C27.6136 9.61796 27.5251 9.07309 27.5321 8.52515V8.40704C27.5321 7.82629 27.6193 7.29476 27.7936 6.81245C27.9679 6.3203 28.2099 5.90196 28.5198 5.55746C28.8393 5.2031 29.2169 4.93242 29.6526 4.7454C30.0883 4.54854 30.5676 4.45011 31.0905 4.45011C31.5262 4.45011 31.9473 4.52393 32.354 4.67158C32.7704 4.80938 33.1383 5.03085 33.4578 5.33599C33.7773 5.64112 34.0291 6.03977 34.213 6.53192C34.4067 7.01424 34.5035 7.5999 34.5035 8.28892V8.68756H28.7812C28.8102 9.57345 29.0281 10.2526 29.4348 10.7251C29.8414 11.1877 30.4369 11.419 31.2212 11.419C32.4121 11.419 33.085 10.9712 33.24 10.0754H34.4454C34.3099 10.8531 33.9516 11.4436 33.3707 11.8472C32.7897 12.2409 32.0684 12.4378 31.2066 12.4378ZM33.269 7.69833C33.2109 6.90104 32.9882 6.33014 32.6009 5.98563C32.2233 5.64112 31.7198 5.46887 31.0905 5.46887C30.4708 5.46887 29.9624 5.67065 29.5655 6.07422C29.1782 6.46794 28.9313 7.00932 28.8248 7.69833H33.269ZM39.3593 12.4378C38.8267 12.4378 38.3329 12.3492 37.8779 12.172C37.4401 11.9901 37.0407 11.7245 36.7014 11.3895C36.3636 11.0315 36.0973 10.6103 35.9172 10.1493C35.7268 9.63002 35.6332 9.07925 35.6412 8.52515V8.40704C35.6412 7.81645 35.738 7.28 35.9317 6.79769C36.1253 6.30553 36.3868 5.8872 36.716 5.54269C37.0548 5.19818 37.447 4.93242 37.8924 4.7454C38.3475 4.54854 38.8267 4.45011 39.3302 4.45011C39.7272 4.45011 40.1097 4.49932 40.4776 4.59775C40.8552 4.69618 41.1893 4.85367 41.4797 5.07022C41.7799 5.27693 42.0316 5.55253 42.235 5.89704C42.4383 6.24155 42.569 6.65988 42.6271 7.15204H41.4362C41.3393 6.54177 41.0924 6.10867 40.6955 5.85275C40.3082 5.59683 39.8531 5.46887 39.3302 5.46887C38.995 5.46599 38.6632 5.53649 38.3571 5.67557C38.0667 5.81338 37.8101 6.01024 37.5874 6.26616C37.3615 6.53514 37.1889 6.84598 37.0791 7.18157C36.9484 7.57626 36.8845 7.99063 36.8902 8.40704V8.52515C36.8902 9.47994 37.1178 10.2034 37.5729 10.6956C38.0376 11.1779 38.6379 11.419 39.3738 11.419C39.6449 11.419 39.9015 11.3797 40.1436 11.3009C40.6361 11.1497 41.0523 10.8113 41.3055 10.356C41.441 10.1197 41.5233 9.84413 41.5524 9.52915H42.6707C42.6338 9.9361 42.5204 10.3321 42.3366 10.6956C42.1663 11.0447 41.9293 11.3559 41.6395 11.611C41.349 11.8669 41.0101 12.0687 40.6228 12.2163C40.2355 12.364 39.8144 12.4378 39.3593 12.4378ZM46.9164 12.4378C46.5568 12.4406 46.199 12.3858 45.8562 12.2754C45.5441 12.1717 45.2605 11.9947 45.0284 11.7586C44.7829 11.4908 44.595 11.1741 44.4765 10.8284C44.3409 10.4544 44.2731 10.0016 44.2731 9.47009V4.58299H45.4786V9.41103C45.4786 10.0902 45.619 10.5873 45.8998 10.9023C46.1903 11.2172 46.6356 11.3747 47.236 11.3747C47.5071 11.3747 47.7685 11.3304 48.0202 11.2419C48.272 11.1533 48.4947 11.0204 48.6883 10.8432C48.882 10.666 49.0369 10.4446 49.1531 10.1788C49.2693 9.91303 49.3274 9.6079 49.3274 9.26339V4.58299H50.5328V12.3049H49.3274V11.0794C49.1531 11.4436 48.8578 11.7635 48.4414 12.0391C48.0348 12.3049 47.5264 12.4378 46.9164 12.4378ZM52.8239 4.58299H54.0294V5.97087C54.2715 5.53777 54.5765 5.18342 54.9444 4.90781C55.322 4.62236 55.8497 4.46979 56.5275 4.45011V5.60175C56.1799 5.61707 55.8346 5.66652 55.4963 5.7494C55.2039 5.81939 54.9308 5.95567 54.6975 6.14804C54.4729 6.35252 54.303 6.6116 54.2037 6.90104C54.0875 7.20618 54.0294 7.59498 54.0294 8.06745V12.3049H52.8239V4.58299ZM61.0347 12.4378C60.5021 12.4378 60.0083 12.3443 59.5533 12.1573C59.1186 11.9775 58.7236 11.7115 58.3914 11.3747C58.0549 11.0185 57.793 10.5966 57.6216 10.1345C57.4416 9.61796 57.3531 9.07309 57.3602 8.52515V8.40704C57.3602 7.82629 57.4473 7.29476 57.6216 6.81245C57.7959 6.3203 58.038 5.90196 58.3478 5.55746C58.6673 5.2031 59.0449 4.93242 59.4806 4.7454C59.9164 4.54854 60.3956 4.45011 60.9185 4.45011C61.3542 4.45011 61.7754 4.52393 62.1821 4.67158C62.5984 4.80938 62.9663 5.03085 63.2859 5.33599C63.6054 5.64112 63.8571 6.03977 64.0411 6.53192C64.2347 7.01424 64.3316 7.5999 64.3316 8.28892V8.68756H58.6092C58.6383 9.57345 58.8561 10.2526 59.2628 10.7251C59.6695 11.1877 60.2649 11.419 61.0492 11.419C62.2401 11.419 62.9131 10.9712 63.068 10.0754H64.2735C64.1379 10.8531 63.7797 11.4436 63.1987 11.8472C62.6178 12.2409 61.8964 12.4378 61.0347 12.4378ZM63.097 7.69833C63.0389 6.90104 62.8162 6.33014 62.429 5.98563C62.0513 5.64112 61.5478 5.46887 60.9185 5.46887C60.2988 5.46887 59.7905 5.67065 59.3935 6.07422C59.0062 6.46794 58.7593 7.00932 58.6528 7.69833H63.097ZM68.8968 12.4378C68.403 12.4378 67.9431 12.3541 67.5171 12.1868C67.1072 12.0141 66.7365 11.7578 66.4278 11.4338C66.1165 11.0803 65.8749 10.6693 65.7161 10.2231C65.5451 9.69956 65.4617 9.15057 65.4692 8.59898V8.48086C65.4692 7.89027 65.5564 7.3489 65.7307 6.85675C65.905 6.36459 66.147 5.94134 66.4569 5.58698C66.7667 5.22279 67.1395 4.94226 67.5752 4.7454C68.0109 4.54854 68.4902 4.45011 69.013 4.45011C69.6521 4.45011 70.1701 4.58791 70.5671 4.86352C70.964 5.12928 71.2739 5.44918 71.4966 5.82322V0.891819H72.702V12.3049H71.4966V10.9761C71.3901 11.1631 71.2448 11.3452 71.0609 11.5224C70.8713 11.7038 70.6617 11.8623 70.4363 11.9949C70.2066 12.1258 69.963 12.2298 69.7102 12.3049C69.4487 12.3935 69.1776 12.4378 68.8968 12.4378ZM69.0275 11.419C69.3761 11.419 69.7053 11.36 70.0152 11.2419C70.325 11.1237 70.5913 10.9466 70.814 10.7103C71.0367 10.4642 71.2109 10.1591 71.3368 9.79492C71.4724 9.42088 71.5401 8.98778 71.5401 8.49562V8.37751C71.5401 7.38335 71.3223 6.65004 70.8866 6.17757C70.4606 5.7051 69.8748 5.46887 69.1292 5.46887C68.374 5.46887 67.7834 5.72479 67.3573 6.23663C66.9313 6.74847 66.7183 7.47686 66.7183 8.4218V8.53992C66.7183 9.02223 66.7764 9.44549 66.8926 9.80968C67.0184 10.1739 67.183 10.4741 67.3864 10.7103C67.5994 10.9466 67.8463 11.1237 68.1271 11.2419C68.4079 11.36 68.708 11.419 69.0275 11.419ZM82.4716 12.4378C81.852 12.4378 81.3243 12.3 80.8886 12.0244C80.485 11.7813 80.146 11.4417 79.901 11.0351V12.3049H78.6955V0.891819H79.901V5.88228C80.0153 5.68531 80.1572 5.50626 80.3221 5.35075C80.5061 5.17357 80.7094 5.02101 80.9321 4.89305C81.1645 4.75524 81.4114 4.64697 81.6729 4.56822C81.9343 4.48948 82.2005 4.45011 82.4716 4.45011C82.9655 4.45011 83.4254 4.53869 83.8514 4.71587C84.2774 4.89305 84.6405 5.14897 84.9407 5.48363C85.2505 5.8183 85.4926 6.22679 85.6669 6.7091C85.8411 7.19141 85.9283 7.73278 85.9283 8.33321V8.45133C85.9283 9.04192 85.846 9.58329 85.6814 10.0754C85.5295 10.535 85.2929 10.9609 84.9843 11.3304C84.6852 11.6839 84.3133 11.9662 83.895 12.1573C83.4445 12.3492 82.96 12.4447 82.4716 12.4378ZM82.3555 11.419C83.1107 11.419 83.6868 11.173 84.0838 10.6808C84.4808 10.1788 84.6793 9.45533 84.6793 8.51039V8.39227C84.6793 7.90012 84.6163 7.47194 84.4904 7.10775C84.3829 6.77559 84.2099 6.46915 83.9821 6.2071C83.7841 5.96487 83.5294 5.77704 83.2414 5.66081C82.9581 5.53232 82.6511 5.46687 82.3409 5.46887C81.9924 5.46887 81.6632 5.52793 81.3533 5.64604C81.0537 5.7638 80.7852 5.95084 80.569 6.19234C80.3464 6.42857 80.1721 6.73371 80.0462 7.10775C79.9127 7.52209 79.8488 7.95635 79.8574 8.39227V8.51039C79.8574 9.4947 80.0898 10.228 80.5545 10.7103C81.0193 11.1828 81.6196 11.419 82.3555 11.419ZM89.6342 11.5076L86.6569 4.58299H87.9495L90.2733 10.1197L92.3792 4.58299H93.6137L89.4164 14.9921H88.1964L89.6342 11.5076ZM105.97 4.51532C105.618 4.13844 105.195 3.83755 104.727 3.63067C104.257 3.42601 103.751 3.32132 103.241 3.32307C102.698 3.32307 102.214 3.42888 101.804 3.64297C101.501 3.7934 101.229 4.00091 101.003 4.25447V4.01947C101.003 3.93064 100.979 3.84347 100.933 3.76781C100.888 3.69214 100.822 3.631 100.744 3.59129C100.691 3.56626 100.633 3.55364 100.574 3.55438H98.9827C98.9241 3.55245 98.8658 3.56433 98.8125 3.58909C98.7592 3.61385 98.7122 3.65082 98.6753 3.69711C98.5956 3.78474 98.5523 3.90019 98.5542 4.01947V15.0561C98.5542 15.1791 98.5954 15.2874 98.6753 15.3735C98.715 15.4152 98.7629 15.4479 98.8158 15.4698C98.8688 15.4916 98.9256 15.502 98.9827 15.5002H100.606C100.661 15.5001 100.715 15.4889 100.766 15.4671C100.817 15.4453 100.863 15.4135 100.901 15.3735C100.945 15.3333 100.979 15.284 101.002 15.229C101.025 15.174 101.036 15.1146 101.034 15.0548V11.2898C101.25 11.5384 101.539 11.7291 101.884 11.8607C102.307 12.0256 102.755 12.1105 103.207 12.1105C103.727 12.1105 104.233 12.0096 104.71 11.8054C105.185 11.599 105.613 11.2958 105.969 10.9146C106.338 10.5135 106.628 10.0422 106.824 9.52669C107.044 8.94733 107.152 8.33033 107.143 7.70941C107.143 7.045 107.038 6.43349 106.824 5.89212C106.631 5.38011 106.341 4.91182 105.97 4.51409V4.51532ZM104.513 8.50178C104.424 8.73555 104.295 8.94718 104.131 9.12928C103.969 9.31219 103.77 9.45789 103.547 9.55674C103.325 9.65558 103.085 9.70531 102.842 9.70264C102.6 9.70387 102.358 9.65342 102.136 9.55499C101.911 9.4556 101.71 9.31074 101.542 9.12928C101.375 8.94704 101.244 8.73407 101.155 8.50178C101.062 8.25439 101.015 7.99155 101.016 7.72663C101.016 7.45102 101.064 7.19141 101.155 6.95026C101.332 6.48635 101.682 6.1122 102.128 5.90935C102.352 5.80353 102.595 5.7494 102.842 5.75063C103.103 5.75063 103.343 5.80476 103.56 5.91058C103.774 6.0127 103.969 6.15542 104.134 6.33014C104.476 6.71058 104.661 7.21105 104.648 7.72663C104.648 8.00347 104.603 8.26308 104.513 8.50178ZM115.859 3.55684H114.249C114.193 3.55751 114.138 3.56987 114.087 3.59315C114.036 3.61643 113.99 3.65013 113.952 3.69219C113.868 3.78 113.821 3.8973 113.821 4.01947V4.22371C113.62 3.9808 113.372 3.78302 113.092 3.64297C112.654 3.42397 112.17 3.31511 111.681 3.32553C111.166 3.32821 110.657 3.43439 110.183 3.63795C109.708 3.84151 109.278 4.13843 108.917 4.51162C108.537 4.91069 108.236 5.37962 108.029 5.89335C107.801 6.47081 107.687 7.08847 107.696 7.71064C107.696 8.37505 107.807 8.98655 108.029 9.52792C108.251 10.0619 108.545 10.5331 108.91 10.9158C109.265 11.2945 109.693 11.5958 110.167 11.8016C110.641 12.0074 111.15 12.1133 111.665 12.113C112.194 12.113 112.675 12.0047 113.085 11.7943C113.388 11.6343 113.637 11.4412 113.821 11.2148V11.4326C113.82 11.4923 113.831 11.5516 113.854 11.6066C113.877 11.6615 113.911 11.7109 113.954 11.7512C113.993 11.7915 114.038 11.8236 114.089 11.8456C114.14 11.8676 114.194 11.879 114.249 11.8792H115.859C115.916 11.8812 115.972 11.8706 116.024 11.8483C116.077 11.826 116.124 11.7925 116.162 11.75C116.203 11.7085 116.235 11.6589 116.256 11.6043C116.277 11.5497 116.287 11.4912 116.285 11.4326V4.0207C116.287 3.90142 116.244 3.78597 116.164 3.69834C116.127 3.65337 116.08 3.61736 116.027 3.5929C115.975 3.56844 115.917 3.55613 115.859 3.55684ZM113.685 8.4907C113.601 8.72324 113.473 8.9368 113.308 9.11943C113.143 9.29538 112.95 9.43933 112.735 9.54269C112.52 9.64727 112.275 9.70141 112.014 9.70141C111.764 9.70141 111.521 9.64727 111.3 9.54146C111.079 9.4398 110.881 9.29437 110.717 9.11372C110.552 8.93306 110.425 8.72082 110.343 8.48947C110.253 8.24551 110.207 7.98712 110.207 7.72663C110.207 7.44979 110.253 7.19018 110.343 6.94903C110.433 6.71156 110.562 6.50116 110.723 6.32891C110.888 6.15296 111.086 6.00901 111.301 5.90812C111.521 5.80353 111.764 5.7494 112.015 5.7494C112.275 5.7494 112.52 5.80353 112.735 5.90935C112.951 6.01393 113.144 6.15542 113.308 6.32891C113.65 6.70961 113.834 7.21001 113.821 7.7254C113.821 7.98993 113.776 8.24709 113.685 8.4907ZM131.919 7.49901C131.685 7.28955 131.417 7.12228 131.127 7.00439C130.828 6.88012 130.511 6.78169 130.177 6.71525L128.95 6.46425C128.635 6.40273 128.416 6.3203 128.293 6.21448C128.242 6.17732 128.201 6.12853 128.172 6.07209C128.144 6.01565 128.128 5.95315 128.128 5.88966C128.128 5.75432 128.204 5.64358 128.357 5.54269C128.523 5.43688 128.755 5.38274 129.042 5.38274C129.357 5.38274 129.669 5.44795 129.958 5.57591C130.252 5.70633 130.528 5.85398 130.769 6.01885C131.126 6.24893 131.43 6.21817 131.649 5.95364L132.238 5.25232C132.351 5.13393 132.416 4.97752 132.422 4.81307C132.422 4.65558 132.345 4.51162 132.198 4.3812C131.948 4.15481 131.553 3.91612 131.023 3.68234C130.494 3.44611 129.829 3.32553 129.042 3.32553C128.525 3.32553 128.049 3.39689 127.628 3.53716C127.205 3.67988 126.842 3.87674 126.547 4.12036C126.251 4.37136 126.017 4.66173 125.858 4.99763C125.699 5.33341 125.617 5.70154 125.618 6.07422C125.618 6.76324 125.82 7.32552 126.218 7.74509C126.615 8.15481 127.145 8.43411 127.796 8.56945L129.072 8.8549C129.435 8.93118 129.711 9.01731 129.889 9.11328C130.045 9.19572 130.119 9.31383 130.119 9.47871C130.119 9.62635 130.045 9.758 129.892 9.87735C129.731 10.0053 129.478 10.0681 129.139 10.0681C128.79 10.0717 128.445 9.99161 128.133 9.83429C127.836 9.68469 127.56 9.49515 127.312 9.27077C127.202 9.17922 127.076 9.1084 126.941 9.0616C126.788 9.01608 126.616 9.0653 126.419 9.22155L125.714 9.78876C125.509 9.96717 125.423 10.1825 125.461 10.431C125.496 10.6697 125.691 10.9158 126.055 11.1939C126.38 11.4313 126.798 11.6467 127.3 11.8312C127.803 12.017 128.391 12.113 129.059 12.113C129.596 12.113 130.092 12.0416 130.529 11.9013C130.967 11.7549 131.354 11.5593 131.668 11.3108C131.98 11.0724 132.231 10.7631 132.404 10.4077C132.576 10.0523 132.663 9.66076 132.659 9.26462C132.659 8.87212 132.595 8.52638 132.46 8.23601C132.331 7.95492 132.147 7.70366 131.919 7.49778V7.49901ZM138.958 9.51193C138.923 9.445 138.872 9.3882 138.809 9.34687C138.747 9.30555 138.675 9.28105 138.601 9.27569C138.451 9.27322 138.305 9.3222 138.186 9.41473C138.071 9.49101 137.946 9.55007 137.815 9.58821C137.649 9.64412 137.47 9.64967 137.3 9.60421C137.219 9.58443 137.144 9.54519 137.081 9.48978C137.005 9.42056 136.946 9.33472 136.908 9.23878C136.855 9.09669 136.83 8.94521 136.836 8.79338V5.76662H138.931C139.051 5.76662 139.159 5.71741 139.253 5.62267C139.295 5.58108 139.329 5.5314 139.352 5.4765C139.376 5.42159 139.388 5.36254 139.389 5.30276V4.02193C139.389 3.96024 139.377 3.89918 139.353 3.84249C139.329 3.78579 139.294 3.73465 139.25 3.69219C139.165 3.60724 139.05 3.55916 138.931 3.55807H136.835V1.49717C136.838 1.43555 136.827 1.37406 136.805 1.31679C136.782 1.25952 136.748 1.20777 136.704 1.16497C136.627 1.08454 136.521 1.03854 136.41 1.03701H134.784C134.695 1.03555 134.609 1.06135 134.535 1.11101C134.462 1.16066 134.405 1.23182 134.372 1.31507C134.349 1.37287 134.338 1.43484 134.339 1.49717V3.55684H133.411C133.353 3.55549 133.294 3.5675 133.241 3.59199C133.188 3.61647 133.14 3.65281 133.102 3.69834C133.025 3.78687 132.982 3.90193 132.984 4.0207V5.304C132.985 5.39177 133.01 5.47753 133.055 5.55238C133.1 5.62724 133.164 5.68846 133.24 5.72971C133.294 5.75555 133.352 5.76908 133.41 5.76662H134.339V9.36551C134.339 9.84536 134.423 10.2588 134.581 10.5996C134.741 10.9367 134.951 11.2197 135.204 11.4313C135.466 11.6503 135.766 11.8128 136.088 11.9087C136.415 12.0121 136.755 12.0638 137.096 12.0638C137.562 12.0638 138.004 11.9887 138.421 11.8423C138.817 11.7053 139.175 11.4722 139.463 11.1631C139.647 10.9404 139.668 10.6943 139.518 10.4483L138.958 9.51316V9.51193ZM147.78 3.55684H146.171C146.116 3.55785 146.061 3.57036 146.01 3.59363C145.959 3.6169 145.914 3.65043 145.876 3.69219C145.835 3.73558 145.802 3.78651 145.779 3.84229C145.758 3.89876 145.746 3.95885 145.747 4.01947V4.22371C145.544 3.98167 145.295 3.78409 145.014 3.64297C144.609 3.43011 144.136 3.32553 143.601 3.32553C143.092 3.32553 142.591 3.42765 142.117 3.6319C141.638 3.83631 141.204 4.13534 140.84 4.51162C140.46 4.9102 140.158 5.37925 139.952 5.89335C139.722 6.47038 139.608 7.08828 139.618 7.71064C139.618 8.37505 139.729 8.98655 139.95 9.52792C140.173 10.0619 140.468 10.5331 140.833 10.9158C141.188 11.2943 141.614 11.5956 142.087 11.8014C142.56 12.0072 143.069 12.1132 143.584 12.113C144.076 12.1217 144.563 12.0125 145.006 11.7943C145.314 11.6343 145.559 11.4412 145.747 11.2148V11.4326C145.745 11.4921 145.756 11.5513 145.778 11.6062C145.801 11.6612 145.834 11.7106 145.877 11.7512C145.916 11.7913 145.961 11.8232 146.012 11.8452C146.062 11.8671 146.116 11.8787 146.171 11.8792H147.78C147.837 11.8806 147.893 11.8699 147.946 11.8476C147.998 11.8254 148.046 11.7921 148.085 11.75C148.166 11.6649 148.21 11.5508 148.208 11.4326V4.0207C148.21 3.90149 148.167 3.78617 148.087 3.69834C148.049 3.65272 148.002 3.61618 147.948 3.59129C147.895 3.56679 147.838 3.555 147.78 3.55684ZM145.606 8.4907C145.437 8.95456 145.095 9.33232 144.655 9.54269C144.43 9.64997 144.184 9.70423 143.936 9.70141C143.685 9.70141 143.446 9.64727 143.224 9.54146C143.004 9.43906 142.806 9.2934 142.642 9.11285C142.477 8.9323 142.349 8.72044 142.266 8.48947C142.175 8.24565 142.129 7.98721 142.129 7.72663C142.129 7.44979 142.174 7.19018 142.264 6.94903C142.353 6.71894 142.481 6.50855 142.645 6.32891C142.812 6.15296 143.008 6.00901 143.224 5.90812C143.447 5.8023 143.69 5.74817 143.936 5.7494C144.199 5.7494 144.438 5.80353 144.655 5.90935C144.874 6.01393 145.066 6.15542 145.226 6.32891C145.388 6.50486 145.517 6.71402 145.606 6.94903C145.796 7.44486 145.796 7.99486 145.606 8.4907ZM156.622 9.40119L155.699 8.67157C155.522 8.52638 155.355 8.48701 155.21 8.54853C155.079 8.60436 154.964 8.69079 154.872 8.80076C154.673 9.05649 154.434 9.27863 154.167 9.45902C153.934 9.60913 153.629 9.68418 153.269 9.68418C153.004 9.68418 152.76 9.63496 152.542 9.53407C152.327 9.43495 152.134 9.2917 151.975 9.11328C151.812 8.93013 151.686 8.71715 151.602 8.48578C151.515 8.24262 151.471 7.98546 151.474 7.72663C151.474 7.4461 151.515 7.18772 151.602 6.94903C151.687 6.71279 151.811 6.50239 151.975 6.33014C152.138 6.15296 152.332 6.01024 152.546 5.90935C152.772 5.80107 153.019 5.74694 153.269 5.7494C153.629 5.7494 153.931 5.82814 154.167 5.97948C154.406 6.13451 154.646 6.35598 154.873 6.63651C154.968 6.7497 155.079 6.83337 155.21 6.88997C155.358 6.94903 155.523 6.90965 155.695 6.7657L156.618 6.03485C156.732 5.95424 156.817 5.83809 156.861 5.70387C156.886 5.63045 156.896 5.55227 156.889 5.47473C156.882 5.39719 156.858 5.32214 156.82 5.25478C156.464 4.67928 155.973 4.20275 155.391 3.86813C154.781 3.51009 154.05 3.32553 153.232 3.32553C152.668 3.32238 152.109 3.43311 151.588 3.65129C151.066 3.86947 150.593 4.19076 150.194 4.59652C149.805 4.99271 149.497 5.4701 149.29 5.99547C149.07 6.54494 148.957 7.13314 148.96 7.72663C148.96 8.33567 149.072 8.91765 149.29 9.45164C149.5 9.97332 149.807 10.4458 150.194 10.8395C150.593 11.2451 151.067 11.5663 151.588 11.7846C152.11 12.003 152.668 12.1142 153.232 12.1117C154.05 12.1117 154.781 11.9284 155.391 11.5654C155.976 11.232 156.468 10.7537 156.822 10.1751C156.86 10.1101 156.882 10.0374 156.889 9.96225C156.896 9.88643 156.886 9.80992 156.861 9.73832C156.813 9.60626 156.731 9.49007 156.622 9.40242V9.40119ZM165.194 11.1299L162.647 7.26277L164.827 4.29138C164.941 4.12036 164.971 3.95672 164.918 3.80292C164.88 3.69219 164.777 3.55684 164.514 3.55684H162.789C162.69 3.55775 162.593 3.58219 162.506 3.62821C162.398 3.68359 162.309 3.77173 162.253 3.88043L160.511 6.39904H160.089V0.447649C160.091 0.329229 160.048 0.214475 159.969 0.127748C159.929 0.0869473 159.881 0.0547186 159.828 0.0329554C159.776 0.0111921 159.719 0.000333517 159.663 0.00101762H158.051C157.964 0.00131009 157.88 0.0270233 157.807 0.0750545C157.735 0.123086 157.678 0.191382 157.643 0.271703C157.62 0.327334 157.608 0.387308 157.61 0.447649V11.4313C157.61 11.5581 157.656 11.6688 157.743 11.75C157.783 11.7911 157.831 11.8236 157.884 11.8456C157.937 11.8676 157.993 11.8786 158.051 11.878H159.664C159.721 11.8798 159.777 11.8692 159.83 11.8469C159.882 11.8246 159.929 11.7912 159.968 11.7488C160.007 11.7068 160.038 11.657 160.058 11.6024C160.08 11.5477 160.09 11.489 160.087 11.4301V8.52392H160.555L162.456 11.5335C162.592 11.7635 162.779 11.8792 163.013 11.8792H164.817C165.091 11.8792 165.205 11.7439 165.251 11.6307C165.316 11.4707 165.297 11.3083 165.194 11.1311V11.1299ZM125.015 3.55684H123.213C123.146 3.55424 123.079 3.56628 123.017 3.59218C122.954 3.61807 122.898 3.6572 122.852 3.70695C122.774 3.79331 122.72 3.89895 122.695 4.01332L121.365 9.14035H121.041L119.61 4.01332C119.586 3.90347 119.539 3.79998 119.473 3.70941C119.435 3.66072 119.386 3.62162 119.331 3.59516C119.276 3.5687 119.215 3.55559 119.154 3.55684H117.285C117.044 3.55684 116.892 3.63805 116.835 3.79431C116.786 3.94184 116.785 4.10149 116.832 4.24955L119.116 11.4658C119.152 11.5802 119.213 11.675 119.292 11.7512C119.337 11.7944 119.391 11.828 119.449 11.8499C119.507 11.8719 119.57 11.8818 119.632 11.8792H120.598L120.518 12.113L120.288 12.786C120.225 12.9927 120.103 13.1754 119.937 13.3101C119.784 13.4312 119.595 13.4954 119.402 13.4922C119.234 13.4914 119.069 13.4536 118.918 13.3815C118.768 13.312 118.625 13.2257 118.494 13.1243C118.375 13.0381 118.234 12.9889 118.089 12.9829H118.069C117.912 12.9829 117.775 13.0739 117.665 13.2486L117.091 14.1197C116.858 14.4938 116.987 14.7399 117.139 14.8764C117.422 15.152 117.778 15.3673 118.198 15.5211C118.614 15.6749 119.073 15.75 119.56 15.75C120.386 15.75 121.076 15.5199 121.605 15.0548C122.131 14.5922 122.52 13.9635 122.757 13.1797L125.405 4.24955C125.465 4.05884 125.465 3.90012 125.411 3.77093C125.366 3.6725 125.26 3.55684 125.015 3.55684Z"
  fill="#838383"
/>
</svg>
`,uie=`
  <button type="button" id="apple-pay-close-button">
    <svg width="10" height="9" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M5.572 4.033L8.89.71a.4.4 0 0 0-.566-.566L5.003 3.459 1.681.145a.4.4 0 0 0-.566.566L4.44 4.033
      1.115 7.354a.398.398 0 0 0 0 .566.4.4 0 0 0 .566 0l3.322-3.33 3.322 3.33a.4.4 0 0 0 .566-.566L5.57 4.033z"
        fill="white"
      />
    </svg>
  </button>
`,die=`
<svg width="74" height="19" viewBox="0 0 74 19" fill="none" xmlns="http://www.w3.org/2000/svg" id="vault-logo">
  <g clip-path="url(#clip0_9910_9664)">
    <path
      d="M32.1273 15.8163H28.9432C28.6448 15.8163 28.4481 15.6622 28.3497 15.3507L25.1886 6.20188C25.1165 6.01825 25.1296 5.85101 25.2214 5.70345C25.3132 5.55589 25.451 5.48047 25.6346 5.48047H27.9693C28.2513 5.48047 28.435 5.63787 28.5202 5.94611L30.6648 12.9077L32.5536 5.94611C32.6388 5.63459 32.829 5.48047 33.1274 5.48047H35.4195C35.6031 5.48047 35.7441 5.55589 35.8425 5.70345C35.9409 5.85101 35.954 6.01825 35.8851 6.20188L32.7241 15.3507C32.6257 15.6622 32.4257 15.8163 32.1305 15.8163H32.1273Z"
      fill="#343C43" />
    <path
      d="M37.6361 14.5842C36.6097 13.5644 36.0981 12.2495 36.0981 10.6362C36.0981 9.02283 36.6097 7.71118 37.6361 6.69792C38.6624 5.68795 39.8757 5.17969 41.2759 5.17969C41.9416 5.17969 42.5384 5.31085 43.0696 5.57318C43.6008 5.83551 43.9943 6.16998 44.2468 6.57988V5.94373C44.2468 5.81584 44.2927 5.70763 44.3845 5.61581C44.4763 5.524 44.578 5.47809 44.6927 5.47809H46.8373C46.9652 5.47809 47.0701 5.524 47.1554 5.61581C47.2406 5.70763 47.2833 5.81584 47.2833 5.94373V15.3679C47.2833 15.4958 47.2406 15.6008 47.1554 15.686C47.0701 15.7713 46.9652 15.8139 46.8373 15.8139H44.6927C44.578 15.8139 44.4763 15.7713 44.3845 15.686C44.2927 15.6008 44.2468 15.4958 44.2468 15.3679V14.7088C43.991 15.1187 43.6008 15.4565 43.0696 15.7155C42.5384 15.9779 41.935 16.109 41.2562 16.109C39.8691 16.109 38.6624 15.6008 37.6361 14.581V14.5842ZM39.9151 8.79985C39.433 9.31795 39.1936 9.93443 39.1936 10.6558C39.1936 11.3772 39.433 11.997 39.9151 12.5118C40.3971 13.0299 40.9972 13.2857 41.7186 13.2857C42.44 13.2857 43.0401 13.0266 43.5221 12.5118C44.0041 11.997 44.2435 11.3772 44.2435 10.6558C44.2435 9.93443 44.0041 9.31467 43.5221 8.79985C43.0401 8.28502 42.44 8.02597 41.7186 8.02597C40.9972 8.02597 40.3938 8.28502 39.9151 8.79985Z"
      fill="#343C43" />
    <path
      d="M51.6315 5.9016V11.2302C51.6315 11.9385 51.8086 12.4959 52.1627 12.9058C52.5169 13.3157 53.0415 13.5223 53.7334 13.5223C54.4253 13.5223 54.9401 13.319 55.3139 12.9058C55.6878 12.4959 55.878 11.9516 55.878 11.2728V5.9016C55.878 5.78683 55.9239 5.68845 56.0157 5.60319C56.1075 5.51794 56.2092 5.47531 56.3239 5.47531H58.4685C58.6095 5.47531 58.7242 5.52122 58.8095 5.61303C58.8948 5.70485 58.9374 5.81306 58.9374 5.94094V15.3652C58.9374 15.4931 58.8948 15.598 58.8095 15.6832C58.7242 15.7685 58.6128 15.8111 58.4685 15.8111H56.3239C56.196 15.8111 56.0911 15.7718 56.0058 15.6931C55.9206 15.6144 55.878 15.5127 55.878 15.3848V14.7257C55.1139 15.6472 54.081 16.1062 52.7792 16.1062C51.4774 16.1062 50.4707 15.7062 49.7132 14.9061C48.9557 14.106 48.5786 13.0501 48.5786 11.7319V5.89504C48.5786 5.78027 48.6278 5.68189 48.7262 5.59664C48.8246 5.51138 48.9295 5.46875 49.0442 5.46875H51.1658C51.2937 5.46875 51.4019 5.51138 51.4938 5.59664C51.5856 5.68189 51.6315 5.78027 51.6315 5.89504V5.9016Z"
      fill="#343C43" />
    <path
      d="M62.9872 15.8148C62.0658 15.8148 61.387 15.582 60.9509 15.113C60.5115 14.6474 60.2917 14.0178 60.2917 13.2243V1.42267C60.2917 1.29478 60.3344 1.18657 60.4196 1.09475C60.5049 1.00294 60.6164 0.957031 60.7607 0.957031H62.8823C63.0233 0.957031 63.138 1.00294 63.2233 1.09475C63.3085 1.18657 63.3512 1.29478 63.3512 1.42267V12.6078C63.3512 12.8045 63.4069 12.9652 63.5217 13.0865C63.6332 13.2079 63.7906 13.2669 63.9873 13.2669H64.6464C64.9448 13.2669 65.0924 13.4144 65.0924 13.7129V15.2409C65.0924 15.6246 64.8956 15.8148 64.4989 15.8148H62.9905H62.9872Z"
      fill="#343C43" />
    <path
      d="M66.722 12.7378V8.04861H65.3644C65.2365 8.04861 65.1316 8.00271 65.0463 7.91089C64.9611 7.81907 64.9185 7.71086 64.9185 7.58298V5.94997C64.9185 5.82208 64.9611 5.71387 65.0463 5.62206C65.1316 5.53024 65.2365 5.48433 65.3644 5.48433H66.722V2.74626C66.722 2.60526 66.7679 2.49049 66.8597 2.40523C66.9515 2.31997 67.0597 2.27734 67.1876 2.27734H69.3518C69.4666 2.27734 69.5683 2.31997 69.6601 2.40523C69.7519 2.49049 69.7978 2.60198 69.7978 2.74626V5.48433H72.7064C72.8343 5.48433 72.9458 5.53024 73.0474 5.62206C73.1458 5.71387 73.195 5.82208 73.195 5.94997V7.58298C73.195 7.69775 73.1458 7.80268 73.0474 7.90105C72.949 7.99943 72.8343 8.04861 72.7064 8.04861H69.7978V12.0164C69.7978 12.4689 69.9027 12.7804 70.1159 12.9509C70.329 13.1214 70.5684 13.2067 70.8373 13.2067C71.1193 13.2067 71.4308 13.1083 71.7718 12.9083C72.1555 12.6689 72.4441 12.6951 72.6408 12.9935L73.3852 14.1806C73.5557 14.4495 73.5327 14.7052 73.3229 14.9446C72.6146 15.6792 71.5948 16.0497 70.2667 16.0497C69.2764 16.0497 68.437 15.7742 67.7516 15.2234C67.0663 14.6725 66.722 13.8428 66.722 12.741V12.7378Z"
      fill="#343C43" />
    <path
      d="M15.2266 0H4.43496C2.26089 0 0.5 1.76089 0.5 3.93496V14.7266C0.5 16.9006 2.26089 18.6615 4.43496 18.6615H15.2266C17.4006 18.6615 19.1615 16.9006 19.1615 14.7266V3.93496C19.1615 1.76089 17.4006 0 15.2266 0ZM15.079 12.2312L12.1442 14.6118C11.9114 14.8086 11.5507 14.6807 11.4949 14.379L10.8161 11.8934C10.7702 11.6934 10.8489 11.4868 11.0096 11.3589C11.4425 11.0113 11.7179 10.4801 11.7179 9.8833C11.7179 8.44048 10.098 7.37476 8.5765 8.40113C8.48468 8.46344 8.40598 8.54214 8.34368 8.63723C7.63539 9.68983 7.92723 10.7883 8.65192 11.3655C8.8126 11.4934 8.88474 11.6967 8.84211 11.8967L8.22891 14.3823C8.17317 14.6839 7.81246 14.8118 7.57964 14.6151L4.57924 12.2344C4.47431 12.1262 4.41856 11.9787 4.4284 11.8278L4.77271 6.69271C4.78582 6.49268 4.91371 6.31561 5.09734 6.23691L9.41924 4.03661C9.68157 3.9284 9.97341 3.9284 10.2357 4.03661L14.5576 6.23691C14.7445 6.31561 14.8691 6.49268 14.8855 6.69271L15.2299 11.8278C15.2397 11.9787 15.1839 12.1262 15.079 12.2344V12.2312Z"
      fill="#343C43" />
  </g>
  <defs>
    <clipPath id="clip0_9910_9664">
      <rect width="73" height="18.6615" fill="white" transform="translate(0.5)" />
    </clipPath>
  </defs>
</svg>
`,J_={height:"50px",width:"auto",borderRadius:"3px",padding:"10px",locale:"en",type:"pay"},gT=function(t){return t&&xp(t)==="object"?Object.keys(J_).reduce((function(e,r){return Aa(Aa({},e),{},jB({},r,t[r]||J_[r]))}),{}):J_},fie=`
  .pre-checkout-modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.75);
    transition: all 0.2s ease;
  }

  .pre-checkout-modal.show {
    display: block;
  }

  .pre-checkout-modal__content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    background-color: #fefefe;
    padding: 20px;
    padding-bottom: max(30px, env(safe-area-inset-bottom));
    width: 100%;
    border-radius: 6px 6px 0 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 350px;

    box-sizing: border-box;
    transform: translateY(238px);
    transition: transform 0.3s cubic-bezier(.16,.81,.32,1);
  }

  .modal-wrapper {
    width: 100%;
  }

  .payment-info {
    position: relative;
    padding-bottom: 15px;
    border-bottom: solid 1px whitesmoke;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .customer-email {
    color: #737373;
    font-size: 13px;
    line-height: 16px;
  }

  .customer-info {
    flex: 1;
    text-align: right;
  }

  .merchant-logo {
    display: flex;
    align-items: center;
    height: 30px;
  }
  .transaction-amount {
    margin-top: 5px;
    font-size: 13px;
    line-height: 16px;
    color: #737373;
  }

  .amount {
    color: #29b263;
    font-weight: bold;
  }

  @media only screen and (min-width: 500px) {
    .pre-checkout-modal__content {
      bottom: 0;
      top: 0;
      margin: auto;
      border-radius: 6px;
      height: fit-content;
    }
  }

  .pre-checkout-modal__content.show {
    transform: translateY(0);
    margin: 0 auto;
    margin-top: 100px;
  }

  .pre-checkout-modal__content > * {
    margin-top: 0;
    margin-bottom: 40px;
  }
  .pre-checkout-modal__content > *:last-child {
    margin-bottom: 0;
  }

  .pre-checkout-modal__content svg {
    margin: auto;
    width: 100%;
  }

  #inline-button-wordmark--white {
    position: absolute;
    bottom: -50px;
    margin: auto;
    left: 0;
    right: 0;
    width: fit-content;
  }

  #inline-button-wordmark--grey {
    display: none;
  }

  .pre-checkout-modal__content #apple-pay-mark--light {
    margin-bottom: 16px;
  }

  .pre-checkout-modal p {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
    color: #4E4E4E;
    line-height: 140%;
    font-size: 14px;
    font-weight: 500;
    margin: 0;
    padding: 0 20px;
    text-align: center;
    letter-spacing: -0.3px;
  }

  .pre-checkout-modal button {
    height: 42px;
    width: 100%;
    
    box-sizing: border-box;
    border-radius: 3px;
    font-size: 14px;
    line-height: 24px;
    cursor: pointer;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
      "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  }

  .pre-checkout-modal .open-paystack-pop-button {
    background: #FAFAFA;
    border: 1px solid #F2F3F3;
    color: #4E4E4E;
    font-weight: 500;
  }

  .pre-checkout-modal .open-paystack-pop-button:hover, 
  .pre-checkout-modal .open-paystack-pop-button:active, 
  .pre-checkout-modal .open-paystack-pop-button:focus {
    background: #F2F3F3;
  }

  .pre-checkout-modal .pay-with-vault-button {
    font-weight: 700;
    background: #44b669;
    background: linear-gradient(to bottom, #44b669 0%, #40ad57 100%);
    border: solid 1px #49a861;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    outline: none;
    color: white;
    transition: all 300ms;
  }

  .pre-checkout-modal .vault-instruction {
    color: #2f3d4d;
    font-size: 14px;
    letter-spacing: normal;
    line-height: 1.4;
    margin: 0 auto 24px;
    padding: 0;
  }
  .vault-logo-container {
    width: 74px;
    height: 20px;
    margin: 0 auto 24px
  }
  .vault-logo-container img {
    height: 100%;
    width: 100%;
    border-radius: 8px;
  }
  .vault-divider {
    margin-bottom: 16px;
    margin-top: 24px;
    position: relative;
  }
  .vault-divider__container {
    align-items: center;
    bottom: 0;
    display: flex;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .vault-divider__line {
    border: 1px dashed #ccced0;
    width: 100%;
  }
  .vault-divider__text-container {
    display: flex;
    justify-content: center;
    position: relative;
  }
  .vault-divider__text {
    background-color: #fff;
    color: #999da1;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -.3px;
    line-height: 19.6px;
    margin-bottom: 2px;
    padding: 0 8px;
  }

  #payment-request-button {
    width: 100%;
    height: fit-content;
    margin: 24px 0 16px 0;
  }

  #paystackpop-button {
    padding: 0 16px;
  }

  #apple-pay-close-button {
    position: absolute;
    text-align: center;
    top: 0;
    right: -26px;
    height: 16px;
    width: 16px;
    padding: 0;
    display: inline-block;
    z-index: 3;
    border-radius: 50%;
    background: transparent;
    transition: all 300ms;
    outline: none;
    cursor: pointer;
    border: none;
  }

  #apple-pay-close-button svg {
    width: initial;
  }
  
  #apple-pay-close-button:hover {
    background-color: #e22b28;
  }

  @media only screen and (max-width: 500px) {
    .pre-checkout-modal__content {
      max-width: 500px;
      border-radius: 0;
      padding-bottom: 0;
    }

    .modal-wrapper {
      padding: 0;
    }

    .vault-logo-container {
      width: 74px;
      height: 20px;
    }

    #inline-button-wordmark--white {
      display: none
    }
    
    #inline-button-wordmark--grey {
      display: block;
      width: 100%;
      margin: 16px 0;
      height: 13px;
    }

    #apple-pay-close-button {
      display: none;
    }
  }
`,xT=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Number(parseFloat(t/100).toFixed(2))},yT={headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en-US;q=0.9,en;q=0.8","content-type":"application/x-www-form-urlencoded","sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site"},referrerPolicy:"no-referrer-when-downgrade",method:"POST",mode:"cors",credentials:"omit"};function vT(t){return Object.keys(t).reduce((function(e,r){var n=encodeURIComponent(r),s=encodeURIComponent(t[r]),a="".concat(n,"=").concat(s);return[].concat(RB(e),[a])}),[]).join("&")}var hie=function(t){return{biannually:"BIANNUAL PLAN",annually:"ANNUAL PLAN"}[t]||"".concat(t.toUpperCase()," PLAN")},MB=function(){try{return window.location&&window.location.protocol==="https:"&&window.ApplePaySession&&window.ApplePaySession.supportsVersion(El.applePayVersion)}catch{return!1}},xk=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return MB()&&t.includes("apple_pay")};function pie(){var t=0;return Array.from(document.querySelectorAll("body *")).forEach((function(e){var r=window.getComputedStyle(e),n=parseFloat(r.zIndex);!Number.isNaN(n)&&n>t&&(t=n)})),t}function Z_(t){var e=document.createElement("iframe");return e.setAttribute("frameBorder","0"),e.setAttribute("allowtransparency","true"),e.id=t,e.style.display="none",e}function Fw(t){return t.querySelector("apple-pay-button")||t.querySelector("#apple-pay-button")}function Fv(t){return document.querySelector("#".concat(t))}function wT(t,e,r){var n=e.channels,s=n===void 0?[]:n,a=e.styles,i=a===void 0?{}:a,o={applePay:!1};return new Promise((function(l,u){if(t)if(xk(s)){if(Fw(t))return o.applePay=!0,void l(o);(function(d,p){var g=p.container,m=p.integrity;return new Promise((function(x,y){var b=document.createElement("script");b.src=d,b.crossOrigin="anonymous",m&&(b.integrity=m),b.addEventListener("load",(function(){x(!0)})),b.addEventListener("error",(function(){b.remove(),y(!1)})),g?g.appendChild(b):document.head.appendChild(b)}))})("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{container:t,integrity:"sha384-z/6BVHCcSypLSykOVpaT1PQWHOOgU45uOOlMkgi/bElX4yFqmChNMb7qiv80wFav"}).then((function(){if(r&&r!==1077497&&window&&!Array.isArray(window.webpackJsonp))throw new Error("Incorrect data type for 'webpackJsonp', expected array, got ".concat(xp(window.webpackJsonp),". Switching to fallback apple pay button"));(function(d,p){var g,m,x,y,b,S=p.styles,P=p.theme,T=document.createElement("style"),O=(m=(g=S).height,x=g.width,y=g.borderRadius,b=g.padding,`
  apple-pay-button {
    --apple-pay-button-width: `.concat(x,`;
    --apple-pay-button-height: `).concat(m,`;
    --apple-pay-button-border-radius: `).concat(y,`;
    --apple-pay-button-padding: `).concat(b,`;
    --apple-pay-button-box-sizing: border-box;
    width: `).concat(x,`;
  }
`));T.type="text/css",T.styleSheet?T.styleSheet.cssText=O:T.appendChild(document.createTextNode(O)),d.appendChild(T);var W=document.createElement("apple-pay-button");W.setAttribute("buttonstyle",P==="light"?"white":"black"),W.setAttribute("type",S.type),W.setAttribute("locale",S.locale),d.appendChild(W)})(t,{styles:gT(i.applePay),theme:i.theme}),o.applePay=!0,l(o)})).catch((function(){(function(d,p){var g,m,x,y,b,S,P,T=p.styles,O=p.theme,W=document.createElement("style"),Y=(m=(g=T).height,x=g.width,y=g.borderRadius,b=g.padding,S=g.type,P=g.locale,`
  @supports (-webkit-appearance: -apple-pay-button) { 
    .apple-pay-button {
        display: inline-block;
        -webkit-appearance: -apple-pay-button;
        width: `.concat(x,`;
        height: `).concat(m,`;
        border-radius: `).concat(y,`;
        padding: `).concat(b,`;
        -apple-pay-button-type: `).concat(S,`;
        -webkit-locale: `).concat(P,`;
    }
    .apple-pay-button-black {
        -apple-pay-button-style: black;
    }
    .apple-pay-button-white {
        -apple-pay-button-style: white;
    }
    .apple-pay-button-white-with-line {
        -apple-pay-button-style: white-outline;
    }
  }

  @supports not (-webkit-appearance: -apple-pay-button) {
    .apple-pay-button {
        display: inline-block;
        background-size: 100% 60%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        border-radius: 5px;
        padding: 0px;
        box-sizing: border-box;
        min-width: 200px;
        min-height: 32px;
        max-height: 64px;
    }
    .apple-pay-button-black {
        background-image: -webkit-named-image(apple-pay-logo-white);
        background-color: black;
    }
    .apple-pay-button-white {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
    }
    .apple-pay-button-white-with-line {
        background-image: -webkit-named-image(apple-pay-logo-black);
        background-color: white;
        border: .5px solid black;
    }
  }
`));W.type="text/css",W.styleSheet?W.styleSheet.cssText=Y:W.appendChild(document.createTextNode(Y)),d.appendChild(W);var L=document.createElement("button");L.classList.add("apple-pay-button",O==="light"?"apple-pay-button-white":"apple-pay-button-black"),L.id="apple-pay-button";var A=document.createElement("span");A.classList.add("logo"),L.appendChild(A),d.appendChild(L)})(t,{styles:gT(i.applePay),theme:i.theme}),o.applePay=!0,l(o)}))}else u("No wallet payment method is available on this device");else u("Container to mount elements was not provided")}))}function mie(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var BB="payment-request-button",VB="paystackpop-button",UB="pay-with-vault-button";function zB(t){var e=document.createElement("button");return e.id=VB,e.className="open-paystack-pop-button",e.innerText=t,e}function bT(t){return t.querySelector("#".concat(VB))}function $B(){var t=document.createElement("div");return t.id=BB,t}function e3(t){return t.querySelector("#".concat(BB))}function gie(){var t=document.createElement("button");return t.className="pay-with-vault-button",t.id=UB,t.innerText="Pay with Vault",t}function xie(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=document.createElement("div");r.className="vault-logo-container",r.innerHTML=die,t.appendChild(r);var n=document.createElement("p");n.id="instruction",n.className="vault-instruction",n.innerHTML="Access your saved cards and bank details for faster, more secure payments",t.appendChild(n);var s=gie();t.appendChild(s);var a=document.createElement("div");if(a.className="vault-divider",a.innerHTML='<div id="vault-divider" class="vault-divider__container"><div class="vault-divider__line"></div></div><div class="vault-divider__text-container"><span class="vault-divider__text">or</span></div>',t.appendChild(a),e.canPayWithApplePay){var i=$B();t.appendChild(i)}if(e.hasOtherPaymentMethods){var o=zB("Use other payment methods");t.appendChild(o)}}function yie(t,e){var r=e.hasOtherPaymentMethods,n=document.createElement("div");n.innerHTML=`
  <svg width="51" height="32" viewBox="0 0 51 32" fill="none" xmlns="http://www.w3.org/2000/svg" id="apple-pay-mark--light">
    <g>
    <path d="M46.0162 0H4.98386C4.81297 0 4.64177 0 4.47118 0.000996555C4.32698 0.00202331 4.18311 0.00362383 4.03925 0.00754966C3.72548 0.0160355 3.40903 0.0345472 3.09919 0.0902335C2.7844 0.146886 2.49148 0.239294 2.20571 0.384791C1.92477 0.52766 1.66757 0.71453 1.44468 0.937516C1.22169 1.1605 1.03482 1.41728 0.891977 1.69852C0.74645 1.98429 0.653982 2.27731 0.597722 2.59234C0.541737 2.90227 0.523101 3.21866 0.514645 3.53209C0.51078 3.67596 0.509122 3.81982 0.508183 3.96366C0.507186 4.13461 0.507519 4.30545 0.507519 4.4767V27.5236C0.507519 27.6949 0.507186 27.8654 0.508183 28.0367C0.509122 28.1805 0.51078 28.3244 0.514645 28.4683C0.523101 28.7814 0.541737 29.0978 0.597722 29.4077C0.653982 29.7228 0.74645 30.0157 0.891977 30.3015C1.03482 30.5827 1.22169 30.8399 1.44468 31.0625C1.66757 31.2859 1.92477 31.4727 2.20571 31.6152C2.49148 31.7611 2.7844 31.8535 3.09919 31.9102C3.40903 31.9655 3.72548 31.9843 4.03925 31.9928C4.18311 31.9961 4.32698 31.998 4.47118 31.9987C4.64177 32 4.81297 32 4.98386 32H46.0162C46.1868 32 46.358 32 46.5286 31.9987C46.6724 31.998 46.8163 31.9961 46.9608 31.9928C47.2739 31.9843 47.5903 31.9655 47.9009 31.9102C48.2153 31.8535 48.5083 31.7611 48.7941 31.6152C49.0753 31.4727 49.3317 31.2859 49.5551 31.0625C49.7777 30.8399 49.9646 30.5827 50.1078 30.3015C50.2537 30.0157 50.346 29.7228 50.402 29.4077C50.458 29.0978 50.4762 28.7814 50.4847 28.4683C50.4886 28.3244 50.4906 28.1805 50.4912 28.0367C50.4925 27.8654 50.4926 27.6949 50.4926 27.5236V4.4767C50.4926 4.30545 50.4925 4.13461 50.4912 3.96366C50.4906 3.81982 50.4886 3.67596 50.4847 3.53209C50.4762 3.21866 50.458 2.90227 50.402 2.59234C50.346 2.27731 50.2537 1.98429 50.1078 1.69852C49.9646 1.41728 49.7777 1.1605 49.5551 0.937516C49.3317 0.71453 49.0753 0.52766 48.7941 0.384791C48.5083 0.239294 48.2153 0.146886 47.9009 0.0902335C47.5903 0.0345472 47.2739 0.0160355 46.9608 0.00754966C46.8163 0.00362383 46.6724 0.00202331 46.5286 0.000996555C46.358 0 46.1868 0 46.0162 0Z" fill="black"/>
    <path d="M46.0162 1.06662L46.521 1.06759C46.6577 1.06855 46.7945 1.07003 46.932 1.07378C47.1711 1.08024 47.4509 1.09319 47.7117 1.13994C47.9384 1.18077 48.1285 1.24286 48.311 1.33575C48.4911 1.42728 48.6562 1.54723 48.8003 1.69113C48.9449 1.83599 49.065 2.0013 49.1578 2.18343C49.2501 2.36447 49.3118 2.55369 49.3524 2.78205C49.3991 3.04001 49.412 3.32055 49.4185 3.56121C49.4222 3.69704 49.424 3.83287 49.4247 3.97194C49.426 4.14012 49.4259 4.3082 49.4259 4.47671V27.5236C49.4259 27.6921 49.426 27.8599 49.4246 28.0317C49.424 28.1675 49.4222 28.3033 49.4185 28.4394C49.4119 28.6797 49.3991 28.9601 49.3519 29.2211C49.3118 29.4463 49.2502 29.6356 49.1573 29.8175C49.0648 29.9992 48.9449 30.1643 48.8009 30.3083C48.656 30.4532 48.4915 30.5728 48.3092 30.6652C48.1281 30.7576 47.9383 30.8197 47.7138 30.8601C47.4477 30.9075 47.1562 30.9205 46.9367 30.9265C46.7986 30.9296 46.6611 30.9315 46.5203 30.9321C46.3525 30.9334 46.1841 30.9334 46.0162 30.9334H4.98386C4.98162 30.9334 4.97945 30.9334 4.97718 30.9334C4.81127 30.9334 4.64503 30.9334 4.4761 30.9321C4.33836 30.9315 4.20093 30.9296 4.06805 30.9266C3.8435 30.9205 3.55181 30.9075 3.2879 30.8604C3.06151 30.8197 2.87171 30.7576 2.68822 30.664C2.50766 30.5724 2.34329 30.453 2.19831 30.3077C2.05444 30.1641 1.93488 29.9995 1.84245 29.8176C1.74992 29.6358 1.68801 29.446 1.64731 29.218C1.60025 28.9576 1.58733 28.6783 1.58087 28.4396C1.57718 28.303 1.57564 28.1664 1.57476 28.0305L1.5741 27.6295L1.57413 27.5236V4.47671L1.5741 4.37083L1.57473 3.97067C1.57564 3.83402 1.57718 3.6974 1.58087 3.56088C1.58733 3.32197 1.60025 3.04258 1.64769 2.77991C1.68804 2.55405 1.74992 2.36422 1.84293 2.18155C1.93464 2.001 2.05441 1.83617 2.19903 1.69158C2.34308 1.54747 2.50799 1.42767 2.6897 1.33527C2.87122 1.24283 3.06138 1.18077 3.28778 1.14003C3.54864 1.09316 3.82861 1.08024 4.06839 1.07375C4.20507 1.07003 4.34174 1.06855 4.4774 1.06762L4.98386 1.06662H46.0162Z" fill="white"/>
    <path d="M14.1531 10.7629C14.5811 10.2276 14.8715 9.50886 14.7949 8.77435C14.1684 8.80551 13.4038 9.18768 12.9612 9.72342C12.5638 10.1822 12.212 10.9311 12.3037 11.6348C13.007 11.6958 13.7097 11.2832 14.1531 10.7629Z" fill="black"/>
    <path d="M14.7869 11.7722C13.7655 11.7114 12.8972 12.3519 12.4094 12.3519C11.9214 12.3519 11.1745 11.8029 10.3667 11.8177C9.31521 11.8331 8.33959 12.4276 7.80602 13.3731C6.70857 15.2646 7.51641 18.0704 8.58362 19.611C9.10188 20.3731 9.72648 21.2123 10.5495 21.1822C11.3271 21.1517 11.6319 20.6787 12.5771 20.6787C13.5216 20.6787 13.7961 21.1822 14.6192 21.1669C15.4729 21.1516 16.0065 20.4044 16.5248 19.6415C17.1193 18.7727 17.3627 17.9338 17.378 17.8877C17.3627 17.8725 15.732 17.2469 15.7169 15.3711C15.7015 13.8004 16.9972 13.0534 17.0581 13.007C16.3265 11.9249 15.1832 11.8029 14.7869 11.7722Z" fill="black"/>
    <path d="M23.68 9.64661C25.8999 9.64661 27.4457 11.1768 27.4457 13.4046C27.4457 15.6404 25.8681 17.1786 23.6244 17.1786H21.1665V21.0872H19.3907V9.64661H23.68V9.64661ZM21.1665 15.688H23.2041C24.7502 15.688 25.6302 14.8556 25.6302 13.4126C25.6302 11.9697 24.7502 11.1451 23.2121 11.1451H21.1665V15.688Z" fill="black"/>
    <path d="M27.9097 18.7167C27.9097 17.2578 29.0276 16.3619 31.0098 16.2509L33.293 16.1162V15.474C33.293 14.5464 32.6666 13.9914 31.6203 13.9914C30.629 13.9914 30.0106 14.467 29.8601 15.2124H28.2428C28.3379 13.7059 29.6222 12.5959 31.6836 12.5959C33.7053 12.5959 34.9976 13.6663 34.9976 15.3392V21.0872H33.3563V19.7156H33.3169C32.8333 20.6433 31.7787 21.2299 30.6847 21.2299C29.0514 21.2299 27.9097 20.2151 27.9097 18.7167ZM33.293 17.9635V17.3055L31.2395 17.4323C30.2167 17.5037 29.6381 17.9556 29.6381 18.6691C29.6381 19.3985 30.2406 19.8742 31.1603 19.8742C32.3574 19.8742 33.293 19.0496 33.293 17.9635Z" fill="black"/>
    <path d="M36.547 24.1556V22.768C36.6736 22.7997 36.959 22.7997 37.1018 22.7997C37.8946 22.7997 38.3228 22.4668 38.5843 21.6105C38.5843 21.5946 38.7351 21.1031 38.7351 21.0952L35.7224 12.7466H37.5774L39.6866 19.5333H39.7181L41.8273 12.7466H43.6349L40.5109 21.5232C39.7976 23.5451 38.973 24.1952 37.2447 24.1952C37.1018 24.1952 36.6736 24.1793 36.547 24.1556Z" fill="black"/>
    </g>
    <defs>
    <clipPath id="clip0">
    <rect width="49.9851" height="32" fill="white" transform="translate(0.507462)"/>
    </clipPath>
    </defs>
  </svg>
`,t.appendChild(n);var s=document.createElement("p");s.id="apple-pay-description",s.innerHTML="Pay with Apple Pay to complete your purchase without filling a form",t.appendChild(s);var a=$B();if(t.appendChild(a),r){var i=zB("More payment options");t.appendChild(i)}}function _T(t){return t.some((function(e){return e!=="apple_pay"}))}var Dv=[{value:"key",required:!0,types:["string"]},{value:"amount",required:!0,or:["plan","planCode"],types:["string","number"]},{value:"currency",required:!1,types:["string"]},{value:"email",required:!0,or:["customerCode"],types:["string"]},{value:"label",required:!1,types:["string"]},{value:"firstName",required:!1,types:["string"]},{value:"lastName",required:!1,types:["string"]},{value:"reference",required:!1,types:["string"]},{value:"phone",required:!1,types:["string"]},{value:"customerCode",required:!1,override:"email",types:["string"]},{value:"channels",required:!1,types:["array"]},{value:"paymentRequest",required:!1,types:["string","number"]},{value:"paymentPage",required:!1,types:["string"]},{value:"hash",required:!1,types:["string"]},{value:"container",required:!1,types:["string"]},{value:"metadata",required:!1,types:["object"]},{value:"subaccountCode",required:!1,types:["string"]},{value:"bearer",required:!1,types:["string"]},{value:"transactionCharge",required:!1,types:["string","number"]},{value:"planCode",required:!1,override:"amount",types:["string"]},{value:"subscriptionCount",required:!1,types:["number"]},{value:"planInterval",required:!1,types:["string"]},{value:"subscriptionLimit",required:!1,types:["number"]},{value:"subscriptionStartDate",required:!1,types:["string"]},{value:"accessCode",required:!1,types:["string"]},{value:"onError",required:!1,types:["function"]},{value:"onLoad",required:!1,types:["function"]},{value:"onSuccess",required:!1,types:["function"]},{value:"onCancel",required:!1,types:["function"]},{value:"callback",required:!1,types:["function"]},{value:"onClose",required:!1,types:["function"]},{value:"onBankTransferConfirmationPending",required:!1,types:["function"]},{value:"firstname",required:!1,types:["string"]},{value:"lastname",required:!1,types:["string"]},{value:"customer_code",required:!1,types:["string"]},{value:"payment_request",required:!1,types:["string","number"]},{value:"subaccount",required:!1,types:["string"]},{value:"transaction_charge",required:!1,types:["number","string"]},{value:"plan",required:!1,types:["string"]},{value:"quantity",required:!1,types:["number"]},{value:"interval",required:!1,types:["string"]},{value:"invoice_limit",required:!1,types:["number","string"]},{value:"start_date",required:!1,types:["string"]},{value:"payment_page",required:!1,types:["number","string"]},{value:"order_id",required:!1,types:["number"]},{value:"ref",required:!1,types:["string"]},{value:"card",required:!1,types:["string"]},{value:"bank",required:!1,types:["string"]},{value:"split",required:!1,types:["object"]},{value:"split_code",required:!1,types:["string"]},{value:"transaction_type",required:!1,types:["string"]},{value:"subscription",required:!1,types:["number"]},{value:"language",required:!1,types:["string"]},{value:"connect_account",required:!1,types:["string"]},{value:"connect_split",required:!1,types:["array"]}];function vie(t){return t?.length>500?t.split("?")[0]:t}function wie(t){var e,r,n,s,a=Aa({},t);return a.metadata=t.metadata||{},a.metadata.referrer=(e=window.location,r=e.href,n=r===void 0?"":r,s=e.ancestorOrigins,[n].concat(RB(s===void 0?[]:s)).map(vie).join(",")),a.metadata=JSON.stringify(a.metadata),a.mode="popup",t.split&&typeof t.split!="string"&&(a.split=JSON.stringify(a.split)),a.card!==void 0&&["false",!1].indexOf(a.card)>-1&&(a.channels=["bank"],delete a.card),a.bank!==void 0&&["false",!1].indexOf(a.bank)>-1&&(a.channels=["card"],delete a.bank),[{to:"firstname",from:"firstName"},{to:"lastname",from:"lastName"},{to:"customer_code",from:"customerCode"},{to:"payment_request",from:"paymentRequest"},{to:"subaccount",from:"subaccountCode"},{to:"transaction_charge",from:"transactionCharge"},{to:"plan",from:"planCode"},{to:"quantity",from:"subscriptionCount"},{to:"interval",from:"planInterval"},{to:"invoice_limit",from:"subscriptionLimit"},{to:"start_date",from:"subscriptionStartDate"},{to:"ref",from:"reference"}].forEach((function(i){a[i.from]&&(a[i.to]=a[i.from],delete a[i.from])})),Object.values(t).forEach((function(i,o){if(typeof i=="function"){var l=Object.keys(t)[o];delete a[l]}})),a}var bie=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],qB=window&&window.navigator&&(window.navigator.platform||window.navigator.userAgentData&&window.navigator.userAgentData.platform),HB=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.platform,r=t.userAgent,n=r===void 0?window&&window.navigator&&window.navigator.userAgent:r,s=e||qB;return bie.includes(s)||n.includes("Mac")&&"ontouchend"in document},_ie=function(t,e,r){var n="".concat(El.paystackApiUrl,"transaction/update_log/").concat(t),s={Authorization:"Bearer ".concat(e)};return fetch(n,{method:"POST",body:JSON.stringify({payload:JSON.stringify(r)}),headers:s})},kie=function(t,e){var r="".concat(El.paystackApiUrl,"transaction/set_ip/").concat(t),n={Authorization:"Bearer ".concat(e)};return fetch(r,{method:"POST",headers:n})},Sie={initializeLog:function(t){var e=t||{},r=e.attempts,n=e.authentication,s=e.errors,a=e.history;this.log={start_time:Math.round(Date.now()/1e3),time_spent:0,attempts:r||0,authentication:n,errors:s||0,success:!1,mobile:HB(),input:[],history:a||[]}},getTimeSpent:function(){var t=Math.round(Date.now()/1e3);return this.log.time_spent=t-this.log.start_time,this.log.time_spent},logAPIResponse:function(t,e){switch(t.status){case"success":return this.logApiSuccess(e);case"failed":return this.logApiError(t.message);default:return!1}},logValidationResponse:function(t){return this.log.history.push({type:"action",message:t,time:this.getTimeSpent()}),this.saveLog()},logAttempt:function(t){var e="Attempted to pay";return t&&(e+=" with ".concat(t)),this.log.attempts+=1,this.log.history.push({type:"action",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiError:function(t){var e="Error";return t&&(e+=": ".concat(t)),this.log.errors+=1,this.log.history.push({type:"error",message:e,time:this.getTimeSpent()}),this.saveLog()},logApiSuccess:function(t){var e="Successfully paid";return t&&(e+=" with ".concat(t)),this.log.success=!0,this.log.history.push({type:"success",message:e,time:this.getTimeSpent()}),this.saveLog()},saveLog:function(){try{if(this.response)return _ie(this.id,this.response.merchant_key,this.log)}catch{}},saveIpAddress:function(){try{if(this.response)return kie(this.id,this.response.merchant_key)}catch{}}},Nie=["language","connect_account"],Eie={requestInline:function(){var t=this,e=this.urlParameters,r=e.language,n=e.connect_account,s=gk(e,Nie),a=Aa({"Content-Type":"application/json"},r&&{"Accept-Language":r});return(this.accessCode?fetch(new URL("transaction/verify_access_code/".concat(this.accessCode),El.paystackApiUrl).toString(),{headers:a}):fetch(new URL("/checkout/request_inline",El.paystackApiUrl).toString(),{method:"POST",body:JSON.stringify(s),headers:Aa(Aa({},a),n&&{"x-connect-account":n})})).then((function(i){return i.json()})).then((function(i){if(i.status===!1)throw new Error(i.message);return t.response=i.data,t.id=i.data.id,t.status=i.data.transaction_status,t.accessCode=i.data.access_code,t.log=null,Object.assign(t,Sie),t.initializeLog(i.data.log),t.saveIpAddress(),i.data}))}},t3=(function(){function t(e){IB(this,t),(function(u){function d(x,y){this.message=x,this.issues=y||[]}if(!u||xp(u)!=="object")throw new d("Transaction parameters should be a non-empty object");var p=u;if("accessCode"in p)return{accessCode:p.accessCode};Object.keys(p).forEach((function(x){Dv.find((function(y){return y.value===x}))!==void 0||delete p[x]}));var g=Object.keys(p),m=[];if(Dv.filter((function(x){return x.required})).forEach((function(x){var y=!p[x.value],b=x.or?x.or.some((function(S){return p[S]})):null;y&&!b&&m.push({message:"Required parameter missing: ".concat(x.value)})})),g.forEach((function(x){var y=p[x],b=Dv.find((function(P){return P.value===x})),S=xp(y);S==="object"&&Array.isArray(y)&&(S="array"),b.types.indexOf(S)<=-1&&m.push({message:"Invalid parameter type: ".concat(x),validTypes:b.types})})),g.forEach((function(x){var y=Dv.find((function(b){return b.value===x}));y.override&&delete p[y.override]})),m.length)throw new d("Invalid transaction parameters",m)})(e),this.parameters=e,this.urlParameters=wie(e),this.id=null,this.status=null,this.accessCode=e.accessCode||null,this.authorizationUrl=null,this.errors=[],this.response=null,this.isActive=!0;var r=e.onError,n=e.onLoad,s=e.onSuccess,a=e.onCancel,i=e.callback,o=e.onClose,l=e.onBankTransferConfirmationPending;this.callbacks={onError:r,onLoad:n,onSuccess:s,onCancel:a,onBankTransferConfirmationPending:l},this.deprecatedCallbacks={callback:i,onClose:o},Object.assign(this,Eie)}return PB(t,[{key:"onSetupError",value:function(e){this.logError(e),this.callbacks.onError&&this.callbacks.onError(e)}},{key:"onLoad",value:function(e){var r=e.id,n=e.customer,s=e.accessCode;Object.assign(this,{id:r,customer:n,accessCode:s}),this.authorizationUrl="".concat(El.checkoutUrl).concat(s),this.callbacks.onLoad&&this.callbacks.onLoad({id:r,customer:n,accessCode:s})}},{key:"onSuccess",value:function(e){this.isActive=!1,this.response=e,this.status=e.status,this.callbacks.onSuccess&&this.callbacks.onSuccess(e),this.deprecatedCallbacks.callback&&this.deprecatedCallbacks.callback(e)}},{key:"setStatus",value:function(e){this.status=e}},{key:"onCancel",value:function(){this.callbacks.onCancel&&this.callbacks.onCancel(),this.deprecatedCallbacks.onClose&&this.deprecatedCallbacks.onClose()}},{key:"cancel",value:function(){this.isActive=!1,this.onCancel()}},{key:"onBankTransferConfirmationPending",value:function(){this.cancel(),this.callbacks.onBankTransferConfirmationPending&&this.callbacks.onBankTransferConfirmationPending()}},{key:"logError",value:function(e){this.errors.push(e)}}]),t})(),TS=console?console.warn||console.log:function(){};function kT(t,e,r){TS('"'.concat(t,'" has been deprecated, please use "').concat(e,'". ').concat(r))}var xn,Cie=["preload","inlineTransaction","transactionData"],Aie=["container","styles","onElementsMount"];function r3(t,e){if(!t.length)return null;var r=t.filter((function(n){var s,a,i,o,l=!n.status||n.status==="abandoned",u=(s=n.parameters,a=e,i=Object.keys(s).sort().join("")===Object.keys(a).sort().join(""),o=Object.values(s).sort().join("")===Object.values(a).sort().join(""),i&&o);return l&&u}));return r.length?r[r.length-1]:null}function ST(t){var e=t.checkoutIframe,r=t.urlParameters;e&&r&&e.contentWindow.postMessage({type:"inline:url",path:"newTransaction",params:r},"*")}var Tie="trackCheckoutClosed",NT="trackPaymentError",Iie="trackPaymentAttempt",Pie="trackPaymentCompletion";function n3(t){throw TS(t),new Error(t)}var ET,CT,WB=(function(){function t(e){var r,n;IB(this,t),this.id=(function(){for(var s="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i+=1)s+=a.charAt(Math.floor(Math.random()*a.length));return s})(),this.transactions=[],this.isOpen=!1,this.isLoaded=!1,this.isDeprecatedApi=e&&e.isDeprecatedApi,e&&e.isEmbed?this.isEmbed=!0:e&&e.isPaymentRequest&&(e.container&&Fv(e.container)||n3("A container is required to mount the payment request button"),this.paymentRequestContainer=Fv(e.container),this.paymentRequestTransaction=null),this.preCheckoutModal=null,this.backgroundIframe=(function(s){var a=Z_("inline-background-".concat(s));a.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  background: rgba(0, 0, 0, 0.75);    
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  transition: opacity 0.3s;
  -webkit-transition: opacity 0.3s;
  visibility: hidden;
  display: none;
`,document.body.appendChild(a);var i=a.contentWindow.document;return i.open(),i.write(`
  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Paystack Popup Loader</title>
    <style>
      .app-loader {
        margin: 200px 0;
        text-align: center;
        color: white;
      }      
      @keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @-webkit-keyframes app-loader__spinner {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      .app-loader__spinner {
        position: relative;
        display: inline-block;
      }
      .app-loader__spinner div {
        left: 95px;
        top: 35px;
        position: absolute;
        -webkit-animation: app-loader__spinner linear 1s infinite;
        animation: app-loader__spinner linear 1s infinite;
        background: white;
        width: 10px;
        height: 30px;
        border-radius: 40%;
        -webkit-transform-origin: 5px 65px;
        transform-origin: 5px 65px;
      }
      .app-loader__spinner div:nth-child(1) {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-animation-delay: -0.916666666666667s;
        animation-delay: -0.916666666666667s;
      }
      .app-loader__spinner div:nth-child(2) {
        -webkit-transform: rotate(30deg);
        transform: rotate(30deg);
        -webkit-animation-delay: -0.833333333333333s;
        animation-delay: -0.833333333333333s;
      }
      .app-loader__spinner div:nth-child(3) {
        -webkit-transform: rotate(60deg);
        transform: rotate(60deg);
        -webkit-animation-delay: -0.75s;
        animation-delay: -0.75s;
      }
      .app-loader__spinner div:nth-child(4) {
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
        -webkit-animation-delay: -0.666666666666667s;
        animation-delay: -0.666666666666667s;
      }
      .app-loader__spinner div:nth-child(5) {
        -webkit-transform: rotate(120deg);
        transform: rotate(120deg);
        -webkit-animation-delay: -0.583333333333333s;
        animation-delay: -0.583333333333333s;
      }
      .app-loader__spinner div:nth-child(6) {
        -webkit-transform: rotate(150deg);
        transform: rotate(150deg);
        -webkit-animation-delay: -0.5s;
        animation-delay: -0.5s;
      }
      .app-loader__spinner div:nth-child(7) {
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
        -webkit-animation-delay: -0.416666666666667s;
        animation-delay: -0.416666666666667s;
      }
      .app-loader__spinner div:nth-child(8) {
        -webkit-transform: rotate(210deg);
        transform: rotate(210deg);
        -webkit-animation-delay: -0.333333333333333s;
        animation-delay: -0.333333333333333s;
      }
      .app-loader__spinner div:nth-child(9) {
        -webkit-transform: rotate(240deg);
        transform: rotate(240deg);
        -webkit-animation-delay: -0.25s;
        animation-delay: -0.25s;
      }
      .app-loader__spinner div:nth-child(10) {
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg);
        -webkit-animation-delay: -0.166666666666667s;
        animation-delay: -0.166666666666667s;
      }
      .app-loader__spinner div:nth-child(11) {
        -webkit-transform: rotate(300deg);
        transform: rotate(300deg);
        -webkit-animation-delay: -0.083333333333333s;
        animation-delay: -0.083333333333333s;
      }
      .app-loader__spinner div:nth-child(12) {
        -webkit-transform: rotate(330deg);
        transform: rotate(330deg);
        -webkit-animation-delay: 0s;
        animation-delay: 0s;
      }
      .app-loader__spinner {
        width: 40px;
        height: 40px;
        -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
        transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);
      }
    </style>
  </head>

  <body>
    <div id="app-loader" class="app-loader">
      <div id="spinner" class="app-loader__spinner">
        <div></div><div></div><div></div><div></div><div></div><div></div><div>
        </div><div></div><div></div><div></div><div></div><div></div>
      </div>
    </div>
  </body>

  </html>
`),i.close(),a})(this.id),this.checkoutIframe=(r=this.id,(n=Z_("inline-checkout-".concat(r))).src="".concat(El.checkoutUrl,"popup"),n.style.cssText=`
  z-index: 999999999999999;
  background: transparent;
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  visibility: hidden;
  display: none;
  height: 100%;
`,n.setAttribute("allowpaymentrequest","true"),n.setAttribute("allow","payment; clipboard-read; clipboard-write"),document.body.appendChild(n),n),this.registerListeners()}return PB(t,[{key:"registerListeners",value:function(){var e=this;window.addEventListener("message",(function(r){var n="".concat(r.origin,"/")===El.checkoutUrl,s=e.checkoutIframe&&e.checkoutIframe.contentWindow===r.source,a=e.isEmbed;n||s?e.respondToEvent(r):a&&e.respondToEmbedEvents(r)}))}},{key:"sendAnalyticsEventToCheckout",value:function(e,r){this.checkoutIframe.contentWindow.postMessage({type:"analytics",action:e,params:r},"*")}},{key:"checkout",value:function(e){this.activeTransaction()&&this.activeTransaction().cancel(),xn=this;var r=r3(this.transactions,e)||new t3(e);return new Promise((function(n,s){r.requestInline().then((function(a){var i=(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.platform,d=l.userAgent,p=d===void 0?window&&window.navigator&&window.navigator.userAgent:d,g=u||qB,m=p&&!!p.match(/Version\/[\d.]+.*Safari/),x=g&&/(Mac)/i.test(g);return HB()||x&&m})()&&xk(a.channels),o=(function(){var l,u,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!((l=d.link_config)===null||l===void 0||!l.enabled||(u=d.link_config)===null||u===void 0||!u.has_payment_instruments)})(a);o||i?(xn.preloadTransaction({inlineTransaction:r,transactionData:a}),xn.preCheckoutModal=(function(l,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=document.querySelector("#pre-checkout-modal-".concat(l));if(p){if(bT(p)&&e3(p))return p;p.remove()}var g=document.createElement("div");g.classList.add("pre-checkout-modal"),g.id="pre-checkout-modal-".concat(l),g.style.zIndex=pie()+1;var m=document.createElement("div");m.classList.add("pre-checkout-modal__content"),g.appendChild(m);var x=u||{},y=x.merchant_logo,b=x.merchant_name,S=x.email,P=x.amount,T=x.currency,O=x.label,W=x.channels,Y=new Intl.NumberFormat("en",{style:"currency",currency:T,currencyDisplay:"code",maximumFractionDigits:2,minimumFractionDigits:0}).format(P/100),L=document.createElement("div");L.classList.add("payment-info"),L.innerHTML='<img class="merchant-logo" src="'.concat(y,'" alt="').concat(b,` Logo">
    <div class="customer-info">
      <div class="customer-email">`).concat(O||S,`</div>
      <div class="transaction-amount">Pay <span class="amount">`).concat(Y,`</span></div>
    </div>`),m.appendChild(L),m.innerHTML+=uie;var A=document.createElement("div");A.classList.add("modal-wrapper"),d.canPayWithVault?xie(A,{canPayWithApplePay:d.canPayWithApplePay,hasOtherPaymentMethods:_T(W)}):yie(A,{hasOtherPaymentMethods:_T(W)}),A.innerHTML=A.innerHTML+OB+cie,m.appendChild(A);var N=document.createElement("style");return N.textContent=fie,document.body.appendChild(N),document.body.appendChild(g),g})(xn.id,a,{canPayWithVault:o,canPayWithApplePay:i}),i?(xn.paymentRequestContainer=e3(xn.preCheckoutModal),wT(xn.paymentRequestContainer,{channels:a.channels,styles:{applePay:{width:"100%",type:"pay",height:"42px",padding:"15px",borderRadius:"5px"}}},a.merchant_id).then((function(){xn.registerPaymentRequestEventListeners()})).catch((function(){o?e3(xn.preCheckoutModal).remove():(xn.closePreCheckoutModal(),xn.animateCheckoutIn())})).finally((function(){n(r)}))):n(r)):(xn.newTransaction({inlineTransaction:r,transactionData:a}),n(r))})).catch((function(a){r.onSetupError({status:!1,message:a.message}),s(a)}))}))}},{key:"openPreCheckoutModal",value:function(){var e;this.registerPreCheckoutModalEventListeners(),e=this.preCheckoutModal,new Promise((function(r,n){try{var s=e.querySelector(".pre-checkout-modal__content");e.classList.add("show"),setTimeout((function(){s.classList.add("show"),r(!0)}),50)}catch(a){n(a)}}))}},{key:"registerPreCheckoutModalEventListeners",value:function(){var e,r=this,n=!1,s=this.activeTransaction();document.addEventListener("touchstart",(function(l){l.preventDefault(),n||(n=!0,e=setTimeout((function(){n=!1}),125))}),!0),document.addEventListener("touchend",(function(l){l.target&&l.target.isSameNode(xn.preCheckoutModal)&&n&&(clearTimeout(e),xn.closePreCheckoutModal(),s&&s.cancel()),n=!1}),!0);var a=bT(this.preCheckoutModal);a&&(a.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn()});var i=this.preCheckoutModal.querySelector("#".concat(UB));i&&(i.onclick=function(){r.closePreCheckoutModal(),r.animateCheckoutIn(),r.checkoutIframe.contentWindow.postMessage({type:"inline:pay-with-vault"},"*")});var o=(function(l){return l.querySelector("#apple-pay-close-button")})(this.preCheckoutModal);o.onclick=function(){r.sendAnalyticsEventToCheckout(Tie),r.closePreCheckoutModalAndCancelTransaction()}}},{key:"closePreCheckoutModal",value:function(e){var r;this.preCheckoutModal&&(e==="failed"?(r=this.preCheckoutModal)&&(r.querySelector("#apple-pay-mark--light").innerHTML=`<svg width="50" height="30" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="error-icon">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="error" fill-rule="nonzero">
            <path d="M9.14672,0.47855 L0.14829,15.47855 C-0.0403320234,15.7872042 -0.0475647902,16.1736607 0.129375884,16.4891566 C0.306316558,16.8046526 0.639843999,16.9999993 1.00157,17 L19.43546,17 C19.797186,16.9999993 20.1307134,16.8046526 20.3076541,16.4891566 C20.4845948,16.1736607 20.477362,15.7872042 20.28874,15.47855 L10.85328,0.47855 C10.671624,0.181297031 10.3483651,3.00996351e-06 10,3.00996351e-06 C9.6516349,3.00996351e-06 9.32837603,0.181297031 9.14672,0.47855 Z" id="Shape" fill="#FFAA22"></path>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="6" width="2" height="5"></rect>
            <rect id="Rectangle-path" fill="#FFFFFF" x="9" y="12" width="2" height="2"></rect>
        </g>
    </g>
</svg>`,r.querySelector("#apple-pay-description").textContent="An error occurred while paying with Apple Pay. Please try again or use another payment method."):((function(n){n&&(n.querySelector(".pre-checkout-modal__content").classList.remove("show"),n.classList.remove("show"))})(this.preCheckoutModal),this.preCheckoutModal.remove(),this.preCheckoutModal=null))}},{key:"closePreCheckoutModalAndCancelTransaction",value:function(){this.preCheckoutModal&&(this.cancelTransaction(),this.checkoutIframe&&this.checkoutIframe.contentWindow&&this.checkoutIframe.contentWindow.postMessage("close","*"),this.closePreCheckoutModal())}},{key:"newTransaction",value:function(e){var r=e.preload,n=e.inlineTransaction,s=e.transactionData,a=gk(e,Cie),i=this.paymentRequestContainer&&Fw(this.paymentRequestContainer);if(this.activeTransaction()&&!i&&this.activeTransaction().cancel(),n&&s)return this.transactions.push(n),this.isDeprecatedApi||this.open({accessCode:s.access_code,language:n.urlParameters.language},r),n;var o=r3(this.transactions,n?n.parameters:a);if(o)return o.isActive=!0,this.isDeprecatedApi||this.open({accessCode:o.accessCode,language:o.urlParameters.language},r),o;var l=n||new t3(a),u=l.accessCode?{accessCode:l.accessCode,language:l.urlParameters.language}:l.urlParameters;return this.transactions.push(l),this.isDeprecatedApi||this.open(u,r),l}},{key:"preloadTransaction",value:function(e){var r=this;return this.newTransaction(Aa(Aa({},e),{},{preload:!0})),function(){return r.animateCheckoutIn()}}},{key:"paymentRequest",value:function(e){var r=e.container,n=e.styles,s=e.onElementsMount,a=gk(e,Aie);return xn=this,new Promise((function(i,o){var l=document.querySelector("#".concat(e.loadPaystackCheckoutButton));if(MB()){xn.activeTransaction()&&xn.activeTransaction().cancel(),r&&Fv(r)||n3("A container is required to mount the payment request button"),xn.paymentRequestContainer=Fv(r);var u=r3(xn.transactions,a),d=u||new t3(a);d.requestInline().then((function(m){wT(xn.paymentRequestContainer,{channels:m.channels,styles:n},m.merchant_id).then((function(x){s&&s(x)})).catch((function(){s&&s(null)})).finally((function(){if(u?d.isActive=!0:xn.transactions.push(d),xn.registerPaymentRequestEventListeners(),l){var x=xn.preloadTransaction({inlineTransaction:d,transactionData:m});l.onclick=x}i(d)}))})).catch((function(m){d.onSetupError({status:!1,message:m.message}),o(m)}))}else{if(e&&e.loadPaystackCheckoutButton)if(l){var p=xn.preloadTransaction(a);l.onclick=p}else TS("This device does not support any payment request wallet options. Please consult our documentation at https://developers.paystack.co/docs/paystack-inline to see how to load alternative payment options using 'loadPaystackCheckoutButton'");s&&s(null);var g=xn.activeTransaction();i(g)}}))}},{key:"registerApplePayEventListener",value:function(){var e=this;Fw(this.paymentRequestContainer).onclick=function(){return e.startApplePay()}}},{key:"registerPaymentRequestEventListeners",value:function(){var e=this.activeTransaction();e&&xk(e.response.channels)?this.registerApplePayEventListener():mie(this.paymentRequestContainer)}},{key:"startApplePay",value:function(){var e,r,n,s,a,i=this,o="apple pay",l=this.activeTransaction();if(l){var u={channel:"apple_pay",paymentMethod:o,currency:l.currency,amount:l.amount},d={channel:"apple_pay",currency:l.currency,amount:l.amount,timeSpent:l.getTimeSpent()};try{l.logAttempt(o),this.sendAnalyticsEventToCheckout(Iie,u);var p=(e={currency:l.response.currency,amount:l.response.amount,merchantName:l.response.merchant_name,interval:l.response.plan_details&&l.response.plan_details.interval},r=e.currency,n=e.amount,s=e.merchantName,a=e.interval,Aa({countryCode:"NG",currencyCode:r,merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],supportedNetworks:["visa","masterCard"],requiredBillingContactFields:["postalAddress","name","phone","email"],total:{label:"".concat(s," - Paystack"),type:"final",amount:String(xT(n))}},typeof a=="string"&&a.trim()!==""&&{lineItems:[{label:hie(a),amount:String(xT(n))}]})),g=new window.ApplePaySession(El.applePayVersion,p);g.onvalidatemerchant=function(m){var x=(function(y){var b=y.transactionId,S=y.validationURL,P=y.merchantName,T=y.domainName,O=T===void 0?window&&window.location&&window.location.hostname:T,W="".concat(El.paymentBaseUrl).concat(El.applePayValidateSessionPath),Y=vT({transaction:b,sessionUrl:S,displayName:P,domainName:O});return fetch(W,Aa(Aa({},yT),{},{body:Y})).then((function(L){return L.json()}))})({validationURL:m.validationURL,transactionId:l.id,merchantName:l.response.merchant_name});x.then((function(y){y.status!=="success"?l.onSetupError(y):g.completeMerchantValidation(y.data),l.logValidationResponse(y.message)})).catch((function(y){l.onSetupError(y)}))},g.oncancel=function(){xn.preCheckoutModal||l.onCancel()},g.onpaymentauthorized=function(m){var x=m.payment,y=(function(b){var S=b.transactionId,P=b.payment,T="".concat(El.paymentBaseUrl).concat(El.applePayChargePath),O=vT({transaction:S,paymentObject:JSON.stringify(P)});return fetch(T,Aa(Aa({},yT),{},{body:O})).then((function(W){return W.json()}))})({transactionId:l.id,payment:x});y.then((function(b){l.logAPIResponse(b,o),b.status==="success"?(g.completePayment(g.STATUS_SUCCESS),l.onSuccess(b),i.sendAnalyticsEventToCheckout(Pie,d)):(g.completePayment(g.STATUS_FAILURE),l.onSetupError(b),i.sendAnalyticsEventToCheckout(NT,{channel:"apple_pay",message:b&&b.message||"Transaction attempt failed"})),xn.closePreCheckoutModal(b.status)})).catch((function(b){g.completePayment(g.STATUS_FAILURE),l.onSetupError(b),i.sendAnalyticsEventToCheckout(NT,{channel:"apple_pay",message:b&&b.message||"Error occurred"}),xn.closePreCheckoutModal("failed")}))},g.begin()}catch(m){l.onSetupError(m)}}else n3("Could not initiate apple pay transaction")}},{key:"resumeTransaction",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.onSuccess,s=r.onCancel,a=r.onLoad,i=r.onError;return this.newTransaction({accessCode:e,onSuccess:n,onCancel:s,onLoad:a,onError:i})}},{key:"activeTransaction",value:function(){var e=this.transactions.filter((function(n){return n.isActive})),r=e.length?e[e.length-1]:null;return r}},{key:"cancelTransaction",value:function(e){var r=this.transactions.find((function(n){return n.id===e}))||this.activeTransaction();r&&(r.cancel(),this.close())}},{key:"respondToEvent",value:function(e){if(e){var r,n,s=this.activeTransaction();try{var a=e.data||e.message,i=a.event,o=a.data;if(i)switch(i){case"loaded:checkout":if(this.isLoaded=!0,s){var l=this.checkoutIframe,u=s.urlParameters,d=s.response;ST({checkoutIframe:l,urlParameters:d?{accessCode:d.access_code,language:u?.language}:u})}break;case"loaded:transaction":r=this.backgroundIframe,(n=r.contentWindow.document)&&(n.getElementById("app-loader").style.display="none"),this.preCheckoutModal&&this.openPreCheckoutModal(),s.onLoad(o);break;case"error":o.type==="setup"?s.onSetupError(o):s.logError(o);break;case"cancel":case"close":this.close();var p=o&&o.status;p&&s.setStatus(p),!(this.paymentRequestContainer&&Fw(this.paymentRequestContainer)&&!this.preCheckoutModal)&&(s.isActive=!1),s.onCancel();break;case"transfer:pending":this.close();var g=o&&o.status;g&&s.setStatus(g),s.onBankTransferConfirmationPending();break;case"success":this.close(),s.onSuccess(o)}}catch{}}}},{key:"respondToEmbedEvents",value:function(e){var r,n,s=this.activeTransaction(),a=e.data||e.message;if(a&&(typeof a=="string"||a instanceof String)){var i={action:n=(r=a)&&typeof r=="string"?r.split(" ")[0]:null,data:n?r.split(" ").slice(2).join(" "):null};i&&i.action==="PaystackClose"&&i.data&&s.onSuccess(a),i.action==="PaystackTLSClose"&&s.cancel()}}},{key:"animateCheckoutIn",value:function(){var e,r=this;if(!this.isOpen){var n=this.checkoutIframe,s=this.backgroundIframe;(e={checkoutIframe:n,backgroundIframe:s},new Promise((function(a,i){e||i("No dom element provided");var o=e.checkoutIframe,l=e.backgroundIframe;o&&l||i("No dom element provided"),o.style.display="",o.style.visibility="visible",l.style.display="",l.style.visibility="visible",a()}))).then((function(){r.checkoutIframe.contentWindow.postMessage("render","*")})),this.isOpen=!0}}},{key:"open",value:function(e,r){e&&(ST({checkoutIframe:this.checkoutIframe,urlParameters:e}),r||this.animateCheckoutIn())}},{key:"close",value:function(){var e=this;if(this.isOpen){var r,n=this.checkoutIframe,s=this.backgroundIframe;(r={checkoutIframe:n,backgroundIframe:s},new Promise((function(a,i){r||i("No dom element provided");var o=r.checkoutIframe,l=r.backgroundIframe;o&&l||i("No dom element provided"),l.style.opacity=0,o.style.display="none",o.style.visibility="hidden",setTimeout((function(){l.style.display="none",l.style.visibility="hidden",l.style.opacity=1,a()}),300)}))).then((function(){e.checkoutIframe.contentWindow.postMessage("close","*")})),this.isOpen=!1}}},{key:"isLoaded",value:function(){return this.isLoaded}}],[{key:"setup",value:function(e){var r=e&&e.container;xn||(xn=new t({isDeprecatedApi:!0,isEmbed:r})),kT("PaystackPop.setup()","new PaystackPop()","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline");var n=xn.newTransaction(e,"deprecated"),s=n.urlParameters;if(r){var a="".concat(El.siteUrl,"/assets/payment/production/inline.html?").concat(DB(s)),i=(function(o,l){var u=Z_("embed-checkout-".concat(o));return u.style.cssText=`
  background: transparent;
  background: rgba(0,0,0,0);
  border: 0px none transparent;
  overflow-x: hidden;
  overflow-y: hidden;
  nmargin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
  display: none;
`,u.src=l,u.id=o,u.name=o,u})(xn.id,a);(function(o,l){var u=document.getElementById(o);u.innerHTML="",u.removeAttribute("style"),u.className="paystack-embed-container",u.style.position="relative",u.style.width="100%",u.appendChild(l)})(e.container,i),i.onload=function(){var o;i.contentWindow.postMessage("PaystackOpen ".concat(xn.id),"*"),o=i,new Promise((function(l,u){o||u("No dom element provided"),o.style.display="",o.style.visibility="visible",l()}))}}else n.openIframe=function(){kT("openIframe","open","Please consult our documentation at https://developers.paystack.co/docs/paystack-inline"),xn.open(s)};return n}}]),t})();if(ET=mT().length>0,CT=Lm()&&Lm().parentElement.tagName==="FORM",ET&&CT){var s3,_0=(function(){var t={},e=Lm();return mT().forEach((function(r){var n=e.getAttribute(r),s=r.split("data-")[1].replace(/-([a-z])/g,(function(a){return a[1].toUpperCase()}));t[s]=n})),(function(r){if(r.buttonId&&!document.getElementById(r.buttonId))throw new Error("Please make sure the buttonId is an element available in the DOM");var n=Aa({},r);n.buttonText=r.buttonText||"Pay",n.buttonVariant="normal",n.buttonWordmarkVariant="normal";var s=["normal","light"];return r.buttonVariant&&s.indexOf(r.buttonVariant)>-1&&(n.buttonVariant=r.buttonVariant),r.buttonWordmarkVariant&&s.indexOf(r.buttonWordmarkVariant)>-1&&(n.buttonWordmarkVariant=r.buttonWordmarkVariant),n})(t)})(),AT=Lm().parentElement;xn||(xn=new WB),(function(t){var e;if(t.id)(e=document.getElementById(t.id)).setAttribute("data-inline-id",t.id);else{var r=document.createElement("div");r.id="inline-button-".concat(t.inlineId),r.innerHTML=(function(n){var s,a,i={normal:`
  <svg id="inline-button-wordmark" width="137" height="13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M.037 5.095l1.075-.135c-.011-.774-.025-1.944-.013-2.149C1.19 1.364 2.38.134 3.81.013 3.9.006 3.99.002 4.077 0a2.947 2.947 0 0 1 2.046.76c.574.509.95 1.26 1.008 2.007.015.192.01 1.491.01 2.257l1.096.163L8.2 11.44 4.093 12 0 11.346l.037-6.251zm4.106-.514l1.724.256c-.007-.933-.05-2.295-.26-2.654-.319-.545-.846-.867-1.443-.88h-.063c-.607.008-1.138.322-1.458.864-.222.378-.266 1.66-.265 2.637l1.765-.223zM18.228 10.108c-.576 0-1.064-.072-1.464-.216a2.864 2.864 0 0 1-.972-.6 2.552 2.552 0 0 1-.588-.864 4.067 4.067 0 0 1-.252-1.044h1.008c.032.256.088.5.168.732.08.224.204.424.372.6.168.168.388.304.66.408.28.096.636.144 1.068.144.28 0 .536-.036.768-.108.24-.08.448-.192.624-.336.176-.144.312-.316.408-.516.104-.2.156-.42.156-.66 0-.24-.032-.448-.096-.624a1.02 1.02 0 0 0-.336-.468 1.885 1.885 0 0 0-.636-.324 6.4 6.4 0 0 0-1.008-.228 8.79 8.79 0 0 1-1.212-.276 3.246 3.246 0 0 1-.9-.432 1.982 1.982 0 0 1-.564-.672c-.128-.272-.192-.6-.192-.984 0-.328.068-.632.204-.912.136-.288.324-.536.564-.744.248-.208.54-.372.876-.492.336-.12.708-.18 1.116-.18.864 0 1.548.204 2.052.612.512.4.812.984.9 1.752h-.936c-.104-.544-.316-.932-.636-1.164-.32-.24-.78-.36-1.38-.36-.592 0-1.04.132-1.344.396a1.255 1.255 0 0 0-.444.996c0 .208.024.396.072.564.056.16.156.3.3.42.152.12.36.228.624.324a6.72 6.72 0 0 0 1.068.228c.48.072.9.168 1.26.288.36.12.664.276.912.468s.432.428.552.708c.128.28.192.624.192 1.032 0 .36-.076.696-.228 1.008a2.472 2.472 0 0 1-.612.804c-.264.224-.58.4-.948.528-.36.128-.752.192-1.176.192zM25.355 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM32.091 10.108c-.44 0-.848-.072-1.224-.216a3.054 3.054 0 0 1-.972-.636 3.12 3.12 0 0 1-.648-1.008 3.626 3.626 0 0 1-.228-1.32v-.096c0-.48.08-.916.24-1.308.16-.4.376-.74.648-1.02.28-.28.604-.496.972-.648.376-.16.772-.24 1.188-.24.328 0 .644.04.948.12.312.08.588.208.828.384.248.168.456.392.624.672.168.28.276.62.324 1.02h-.984c-.08-.496-.284-.848-.612-1.056-.32-.208-.696-.312-1.128-.312a1.93 1.93 0 0 0-.804.168c-.24.112-.452.272-.636.48a2.23 2.23 0 0 0-.42.744 2.991 2.991 0 0 0-.156.996v.096c0 .776.188 1.364.564 1.764.384.392.88.588 1.488.588.224 0 .436-.032.636-.096a1.651 1.651 0 0 0 .96-.768c.112-.192.18-.416.204-.672h.924a2.595 2.595 0 0 1-.276.948 2.386 2.386 0 0 1-.576.744c-.24.208-.52.372-.84.492-.32.12-.668.18-1.044.18zM38.335 10.108a2.83 2.83 0 0 1-.876-.132 1.724 1.724 0 0 1-.684-.42 2.145 2.145 0 0 1-.456-.756c-.112-.304-.168-.672-.168-1.104V3.724h.996v3.924c0 .552.116.956.348 1.212.24.256.608.384 1.104.384.224 0 .44-.036.648-.108.208-.072.392-.18.552-.324.16-.144.288-.324.384-.54.096-.216.144-.464.144-.744V3.724h.996V10h-.996v-.996c-.144.296-.388.556-.732.78-.336.216-.756.324-1.26.324zM43.216 3.724h.996v1.128c.2-.352.452-.64.756-.864.312-.232.748-.356 1.308-.372v.936a4.461 4.461 0 0 0-.852.12 1.647 1.647 0 0 0-.66.324 1.472 1.472 0 0 0-.408.612c-.096.248-.144.564-.144.948V10h-.996V3.724zM50 10.108c-.44 0-.848-.076-1.224-.228a2.916 2.916 0 0 1-.96-.636 2.966 2.966 0 0 1-.636-1.008 3.77 3.77 0 0 1-.216-1.308v-.096c0-.472.072-.904.216-1.296.144-.4.344-.74.6-1.02.264-.288.576-.508.936-.66.36-.16.756-.24 1.188-.24.36 0 .708.06 1.044.18.344.112.648.292.912.54.264.248.472.572.624.972.16.392.24.868.24 1.428v.324h-4.728c.024.72.204 1.272.54 1.656.336.376.828.564 1.476.564.984 0 1.54-.364 1.668-1.092h.996c-.112.632-.408 1.112-.888 1.44-.48.32-1.076.48-1.788.48zm1.704-3.852c-.048-.648-.232-1.112-.552-1.392-.312-.28-.728-.42-1.248-.42-.512 0-.932.164-1.26.492-.32.32-.524.76-.612 1.32h3.672zM56.496 10.108c-.408 0-.788-.068-1.14-.204a2.683 2.683 0 0 1-.9-.612 3.01 3.01 0 0 1-.588-.984 4.01 4.01 0 0 1-.204-1.32v-.096c0-.48.072-.92.216-1.32.144-.4.344-.744.6-1.032.256-.296.564-.524.924-.684.36-.16.756-.24 1.188-.24.528 0 .956.112 1.284.336.328.216.584.476.768.78V.724h.996V10h-.996V8.92c-.088.152-.208.3-.36.444a2.792 2.792 0 0 1-.516.384 2.874 2.874 0 0 1-.6.252c-.216.072-.44.108-.672.108zm.108-.828c.288 0 .56-.048.816-.144.256-.096.476-.24.66-.432.184-.2.328-.448.432-.744.112-.304.168-.656.168-1.056v-.096c0-.808-.18-1.404-.54-1.788-.352-.384-.836-.576-1.452-.576-.624 0-1.112.208-1.464.624-.352.416-.528 1.008-.528 1.776v.096c0 .392.048.736.144 1.032.104.296.24.54.408.732.176.192.38.336.612.432.232.096.48.144.744.144zM67.712 10.108c-.512 0-.948-.112-1.308-.336a2.38 2.38 0 0 1-.816-.804V10h-.996V.724h.996V4.78a1.92 1.92 0 0 1 .348-.432c.152-.144.32-.268.504-.372.192-.112.396-.2.612-.264.216-.064.436-.096.66-.096.408 0 .788.072 1.14.216.352.144.652.352.9.624.256.272.456.604.6.996.144.392.216.832.216 1.32v.096c0 .48-.068.92-.204 1.32a3.103 3.103 0 0 1-.576 1.02 2.583 2.583 0 0 1-.9.672 2.937 2.937 0 0 1-1.176.228zm-.096-.828c.624 0 1.1-.2 1.428-.6.328-.408.492-.996.492-1.764V6.82c0-.4-.052-.748-.156-1.044a2.095 2.095 0 0 0-.42-.732 1.53 1.53 0 0 0-.612-.444 1.798 1.798 0 0 0-.744-.156c-.288 0-.56.048-.816.144a1.71 1.71 0 0 0-.648.444c-.184.192-.328.44-.432.744a3.152 3.152 0 0 0-.156 1.044v.096c0 .8.192 1.396.576 1.788.384.384.88.576 1.488.576zM73.63 9.352l-2.46-5.628h1.068l1.92 4.5 1.74-4.5h1.02l-3.468 8.46h-1.008l1.188-2.832zM87.127 3.669A3.138 3.138 0 0 0 86.1 2.95a3.09 3.09 0 0 0-1.228-.25c-.448 0-.848.086-1.187.26a2.199 2.199 0 0 0-.662.497v-.191a.387.387 0 0 0-.214-.348.323.323 0 0 0-.14-.03h-1.315a.314.314 0 0 0-.254.116.377.377 0 0 0-.1.262v8.97c0 .1.034.188.1.258a.34.34 0 0 0 .254.103h1.341a.342.342 0 0 0 .244-.103.336.336 0 0 0 .11-.259v-3.06c.178.202.417.357.702.464.35.134.72.203 1.093.203.43 0 .848-.082 1.242-.248a3.124 3.124 0 0 0 1.04-.724c.305-.326.545-.709.707-1.128a3.93 3.93 0 0 0 .263-1.477c0-.54-.086-1.037-.263-1.477a3.387 3.387 0 0 0-.706-1.12zm-1.204 3.24c-.073.19-.18.362-.315.51a1.415 1.415 0 0 1-1.065.466c-.2.001-.4-.04-.584-.12a1.484 1.484 0 0 1-.49-.346 1.593 1.593 0 0 1-.32-.51 1.738 1.738 0 0 1-.115-.63c0-.224.04-.435.115-.631a1.532 1.532 0 0 1 .804-.846c.185-.086.386-.13.59-.129.215 0 .414.044.593.13.177.083.338.199.474.341a1.622 1.622 0 0 1 .425 1.135c0 .225-.037.436-.112.63zM95.298 2.89h-1.33a.339.339 0 0 0-.246.11.384.384 0 0 0-.108.266v.166a1.856 1.856 0 0 0-.602-.472 2.525 2.525 0 0 0-1.166-.258 3.227 3.227 0 0 0-2.284.964 3.554 3.554 0 0 0-.734 1.123 3.827 3.827 0 0 0-.275 1.477c0 .54.092 1.037.275 1.477.184.434.427.817.728 1.128a3.146 3.146 0 0 0 2.277.973c.437 0 .834-.088 1.173-.259.25-.13.456-.287.608-.471v.177a.34.34 0 0 0 .11.259.341.341 0 0 0 .244.104h1.33a.324.324 0 0 0 .25-.105.349.349 0 0 0 .102-.258V3.267a.377.377 0 0 0-.1-.262.325.325 0 0 0-.252-.115zM93.502 6.9a1.55 1.55 0 0 1-.312.511c-.136.143-.296.26-.473.344-.178.085-.38.129-.596.129-.207 0-.407-.044-.59-.13a1.501 1.501 0 0 1-.791-.855 1.766 1.766 0 0 1-.112-.62c0-.225.038-.436.112-.632.075-.193.181-.364.314-.504.137-.143.3-.26.478-.342.182-.085.382-.129.59-.129.215 0 .417.044.595.13.178.085.338.2.473.341a1.623 1.623 0 0 1 .424 1.135c0 .215-.037.424-.112.622zM108.567 6.094a2.265 2.265 0 0 0-.654-.402c-.247-.101-.509-.181-.785-.235l-1.014-.204c-.26-.05-.441-.117-.543-.203a.328.328 0 0 1-.136-.264c0-.11.063-.2.189-.282.137-.086.329-.13.566-.13.26 0 .518.053.757.157.243.106.471.226.67.36.295.187.546.162.727-.053l.487-.57a.543.543 0 0 0 .152-.357c0-.128-.064-.245-.185-.351-.207-.184-.533-.378-.971-.568-.437-.192-.987-.29-1.637-.29-.427 0-.82.058-1.168.172-.35.116-.65.276-.893.474-.245.204-.438.44-.57.713a2 2 0 0 0-.198.875c0 .56.167 1.017.496 1.358.328.333.766.56 1.304.67l1.054.232c.3.062.528.132.675.21.129.067.19.163.19.297 0 .12-.061.227-.188.324-.133.104-.342.155-.622.155a1.83 1.83 0 0 1-.831-.19 3.056 3.056 0 0 1-.678-.458.995.995 0 0 0-.307-.17c-.126-.037-.268.003-.431.13l-.583.461c-.169.145-.24.32-.209.522.029.194.19.394.491.62.269.193.614.368 1.029.518.415.151.901.229 1.453.229.444 0 .854-.058 1.215-.172.362-.119.681-.278.941-.48a2.056 2.056 0 0 0 .819-1.663c0-.319-.053-.6-.165-.836a1.843 1.843 0 0 0-.447-.6zM114.383 7.73a.363.363 0 0 0-.295-.192.55.55 0 0 0-.343.113c-.095.062-.198.11-.306.141a.75.75 0 0 1-.426.013.43.43 0 0 1-.181-.093.554.554 0 0 1-.143-.204.92.92 0 0 1-.059-.362v-2.46h1.731c.099 0 .188-.04.266-.117a.368.368 0 0 0 .112-.26V3.268a.369.369 0 0 0-.115-.268.38.38 0 0 0-.263-.109h-1.732V1.216a.354.354 0 0 0-.108-.27.347.347 0 0 0-.243-.104h-1.344a.36.36 0 0 0-.34.226.371.371 0 0 0-.027.148V2.89h-.767a.324.324 0 0 0-.255.115.385.385 0 0 0-.098.262V4.31a.4.4 0 0 0 .212.346c.044.021.092.032.14.03h.768v2.925c0 .39.069.726.2 1.003.132.274.305.504.514.676.217.178.465.31.731.388.27.084.551.126.833.126.385 0 .75-.061 1.094-.18a2.13 2.13 0 0 0 .861-.552c.152-.181.17-.381.046-.581l-.463-.76zM121.672 2.89h-1.329a.339.339 0 0 0-.244.11.39.39 0 0 0-.08.122.394.394 0 0 0-.027.144v.166a1.906 1.906 0 0 0-.605-.472c-.335-.173-.726-.258-1.168-.258-.42 0-.834.083-1.226.249a3.24 3.24 0 0 0-1.055.715 3.528 3.528 0 0 0-.734 1.123 3.79 3.79 0 0 0-.276 1.477c0 .54.092 1.037.275 1.477.184.434.428.817.729 1.128a3.138 3.138 0 0 0 2.273.973 2.59 2.59 0 0 0 1.175-.259c.255-.13.457-.287.612-.471v.177a.34.34 0 0 0 .108.259.343.343 0 0 0 .243.104h1.329a.335.335 0 0 0 .252-.105.364.364 0 0 0 .102-.258V3.267a.38.38 0 0 0-.1-.262.332.332 0 0 0-.115-.087.311.311 0 0 0-.139-.028zM119.876 6.9a1.534 1.534 0 0 1-.786.855 1.362 1.362 0 0 1-.594.129c-.207 0-.405-.044-.588-.13a1.516 1.516 0 0 1-.792-.855 1.757 1.757 0 0 1-.113-.62c0-.225.037-.436.112-.632.073-.187.179-.358.314-.504.138-.143.3-.26.479-.342.184-.086.385-.13.588-.129.217 0 .415.044.594.13.181.085.34.2.472.341.134.143.24.313.314.504a1.73 1.73 0 0 1 0 1.253zM128.978 7.64l-.763-.593c-.146-.118-.284-.15-.404-.1a.742.742 0 0 0-.279.205 2.527 2.527 0 0 1-.583.535c-.192.122-.444.183-.742.183-.219 0-.42-.04-.6-.122a1.423 1.423 0 0 1-.469-.342 1.575 1.575 0 0 1-.308-.51 1.751 1.751 0 0 1-.106-.617c0-.228.034-.438.106-.632.07-.192.173-.363.308-.503.135-.144.295-.26.472-.342.187-.088.391-.132.597-.13.298 0 .547.064.742.187.198.126.396.306.584.534.078.092.17.16.278.206.122.048.259.016.401-.101l.762-.594a.53.53 0 0 0 .201-.269.437.437 0 0 0-.034-.365 3.329 3.329 0 0 0-1.18-1.127c-.504-.291-1.108-.441-1.784-.441a3.519 3.519 0 0 0-2.51 1.033c-.322.322-.576.71-.747 1.137a3.68 3.68 0 0 0-.273 1.407c0 .495.093.968.273 1.402.173.424.427.808.747 1.128a3.527 3.527 0 0 0 2.51 1.034c.676 0 1.28-.149 1.784-.444a3.286 3.286 0 0 0 1.182-1.13.411.411 0 0 0 .055-.173.415.415 0 0 0-.023-.182.624.624 0 0 0-.197-.273zM136.06 9.045l-2.104-3.143 1.801-2.415c.094-.139.119-.272.075-.397-.031-.09-.116-.2-.334-.2h-1.425a.52.52 0 0 0-.234.058.482.482 0 0 0-.209.205L132.191 5.2h-.349V.363a.37.37 0 0 0-.099-.26.352.352 0 0 0-.253-.103h-1.332a.37.37 0 0 0-.337.22.346.346 0 0 0-.027.143V9.29c0 .103.038.193.11.259a.353.353 0 0 0 .254.104h1.333a.328.328 0 0 0 .251-.105.346.346 0 0 0 .075-.119.333.333 0 0 0 .024-.14V6.927h.386l1.571 2.446c.112.187.267.281.46.281h1.491c.226 0 .32-.11.358-.202.054-.13.038-.262-.047-.406zM102.863 2.89h-1.489a.389.389 0 0 0-.298.122.544.544 0 0 0-.13.249l-1.099 4.167h-.268l-1.182-4.167a.66.66 0 0 0-.113-.247.329.329 0 0 0-.264-.124h-1.544c-.199 0-.325.066-.372.193a.588.588 0 0 0-.002.37l1.887 5.865c.03.093.08.17.145.232a.388.388 0 0 0 .281.104h.798l-.066.19-.19.547a.872.872 0 0 1-.29.426.7.7 0 0 1-.442.148.956.956 0 0 1-.4-.09 1.842 1.842 0 0 1-.35-.209.62.62 0 0 0-.335-.115h-.016c-.13 0-.243.074-.334.216l-.474.708c-.193.304-.086.504.039.615.234.224.528.399.875.524.344.125.723.186 1.126.186.682 0 1.252-.187 1.689-.565.435-.376.756-.887.952-1.524l2.188-7.258c.05-.155.05-.284.005-.389-.037-.08-.125-.174-.327-.174z" fill="#011B33"/>
    </svg>`,light:OB};return`
    <style>
      #inline-button-`.concat(n.inlineId,` {
        position: relative;
        text-align: center;
        display: inline-block;
      }
      #inline-button-`).concat(n.inlineId,`__trigger {
        `).concat((s=n.variant||"normal",a={normal:`
    background: linear-gradient(180deg,#44b669 0,#40ad57);
    text-shadow: 1px 1px 1px rgba(0,0,0,.1);
    color: #ffffff;
  `,light:`
    background: white;
    text-shadow: none;
    color: #011b33;
  `},"".concat(`
    box-sizing: border-box;
    display: inline-block;
    line-height: 1;
    white-space: nowrap;
    margin: 0 0 10px;
    text-align: center;
    -webkit-appearance: none;
    outline: none;
    font-size: 14px;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    padding: 16px 24px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.15);
    transition: all .3s ease;
    border: none;
    min-width: 190px;
  `).concat(a[s])),`
      }
      #inline-button-`).concat(n.inlineId,`__trigger:hover {
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      }
      #inline-button-`).concat(n.inlineId,`__trigger:active {
        transform: translateY(3px);
      }
    </style>
    <button id="inline-button-`).concat(n.inlineId,'__trigger" data-inline-id="').concat(n.inlineId,'">').concat(n.text||"Pay"," ").concat(n.currency||"NGN"," ").concat(n.amount,`</button>
    <div id="inline-button-`).concat(n.inlineId,`__wordmark">
      `).concat(i[n.wordmarkVariant||"normal"],`
    </div>
  `)})(t),t.parent.parentNode.insertBefore(r,t.parent.nextSibling),e=oie(r.getElementsByTagName("button"),1)[0]}return e})({inlineId:xn.id,amount:_0.amount/100,currency:_0.currency,id:_0.buttonId,text:_0.buttonText,variant:_0.buttonVariant,wordmarkVariant:_0.buttonWordmarkVariant,parent:Lm()}).addEventListener("click",(function(t){t.preventDefault(),s3?xn.resumeTransaction(s3.accessCode):s3=xn.newTransaction(Aa(Aa({},_0),{},{onSuccess:function(e){var r,n,s,a,i,o;r={type:"hidden",name:"reference",value:e.reference,parent:AT},n=r.type,s=r.value,a=r.name,i=r.parent,(o=document.createElement("input")).type=n,o.value=s,o.name=a,i.appendChild(o),AT.submit()}}))}))}function GB(t,e){return function(){return t.apply(e,arguments)}}const{toString:jie}=Object.prototype,{getPrototypeOf:IS}=Object,{iterator:r4,toStringTag:KB}=Symbol,n4=(t=>e=>{const r=jie.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),wu=t=>(t=t.toLowerCase(),e=>n4(e)===t),s4=t=>e=>typeof e===t,{isArray:eg}=Array,j1=s4("undefined");function my(t){return t!==null&&!j1(t)&&t.constructor!==null&&!j1(t.constructor)&&jl(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const YB=wu("ArrayBuffer");function Rie(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&YB(t.buffer),e}const Lie=s4("string"),jl=s4("function"),XB=s4("number"),gy=t=>t!==null&&typeof t=="object",Fie=t=>t===!0||t===!1,Dw=t=>{if(n4(t)!=="object")return!1;const e=IS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(KB in t)&&!(r4 in t)},Die=t=>{if(!gy(t)||my(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Oie=wu("Date"),Mie=wu("File"),Bie=wu("Blob"),Vie=wu("FileList"),Uie=t=>gy(t)&&jl(t.pipe),zie=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||jl(t.append)&&((e=n4(t))==="formdata"||e==="object"&&jl(t.toString)&&t.toString()==="[object FormData]"))},$ie=wu("URLSearchParams"),[qie,Hie,Wie,Gie]=["ReadableStream","Request","Response","Headers"].map(wu),Kie=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xy(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),eg(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(my(t))return;const a=r?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let o;for(n=0;n<i;n++)o=a[n],e.call(null,t[o],o,t)}}function QB(t,e){if(my(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const M0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,JB=t=>!j1(t)&&t!==M0;function yk(){const{caseless:t,skipUndefined:e}=JB(this)&&this||{},r={},n=(s,a)=>{const i=t&&QB(r,a)||a;Dw(r[i])&&Dw(s)?r[i]=yk(r[i],s):Dw(s)?r[i]=yk({},s):eg(s)?r[i]=s.slice():(!e||!j1(s))&&(r[i]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&xy(arguments[s],n);return r}const Yie=(t,e,r,{allOwnKeys:n}={})=>(xy(e,(s,a)=>{r&&jl(s)?t[a]=GB(s,r):t[a]=s},{allOwnKeys:n}),t),Xie=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Qie=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Jie=(t,e,r,n)=>{let s,a,i;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)i=s[a],(!n||n(i,t,e))&&!o[i]&&(e[i]=t[i],o[i]=!0);t=r!==!1&&IS(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Zie=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},eoe=t=>{if(!t)return null;if(eg(t))return t;let e=t.length;if(!XB(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},toe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&IS(Uint8Array)),roe=(t,e)=>{const n=(t&&t[r4]).call(t);let s;for(;(s=n.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},noe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},soe=wu("HTMLFormElement"),aoe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),TT=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ioe=wu("RegExp"),ZB=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};xy(r,(s,a)=>{let i;(i=e(s,a,t))!==!1&&(n[a]=i||s)}),Object.defineProperties(t,n)},ooe=t=>{ZB(t,(e,r)=>{if(jl(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(jl(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},loe=(t,e)=>{const r={},n=s=>{s.forEach(a=>{r[a]=!0})};return eg(t)?n(t):n(String(t).split(e)),r},coe=()=>{},uoe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function doe(t){return!!(t&&jl(t.append)&&t[KB]==="FormData"&&t[r4])}const foe=t=>{const e=new Array(10),r=(n,s)=>{if(gy(n)){if(e.indexOf(n)>=0)return;if(my(n))return n;if(!("toJSON"in n)){e[s]=n;const a=eg(n)?[]:{};return xy(n,(i,o)=>{const l=r(i,s+1);!j1(l)&&(a[o]=l)}),e[s]=void 0,a}}return n};return r(t,0)},hoe=wu("AsyncFunction"),poe=t=>t&&(gy(t)||jl(t))&&jl(t.then)&&jl(t.catch),eV=((t,e)=>t?setImmediate:e?((r,n)=>(M0.addEventListener("message",({source:s,data:a})=>{s===M0&&a===r&&n.length&&n.shift()()},!1),s=>{n.push(s),M0.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",jl(M0.postMessage)),moe=typeof queueMicrotask<"u"?queueMicrotask.bind(M0):typeof process<"u"&&process.nextTick||eV,goe=t=>t!=null&&jl(t[r4]),gt={isArray:eg,isArrayBuffer:YB,isBuffer:my,isFormData:zie,isArrayBufferView:Rie,isString:Lie,isNumber:XB,isBoolean:Fie,isObject:gy,isPlainObject:Dw,isEmptyObject:Die,isReadableStream:qie,isRequest:Hie,isResponse:Wie,isHeaders:Gie,isUndefined:j1,isDate:Oie,isFile:Mie,isBlob:Bie,isRegExp:ioe,isFunction:jl,isStream:Uie,isURLSearchParams:$ie,isTypedArray:toe,isFileList:Vie,forEach:xy,merge:yk,extend:Yie,trim:Kie,stripBOM:Xie,inherits:Qie,toFlatObject:Jie,kindOf:n4,kindOfTest:wu,endsWith:Zie,toArray:eoe,forEachEntry:roe,matchAll:noe,isHTMLForm:soe,hasOwnProperty:TT,hasOwnProp:TT,reduceDescriptors:ZB,freezeMethods:ooe,toObjectSet:loe,toCamelCase:aoe,noop:coe,toFiniteNumber:uoe,findKey:QB,global:M0,isContextDefined:JB,isSpecCompliantForm:doe,toJSONObject:foe,isAsyncFn:hoe,isThenable:poe,setImmediate:eV,asap:moe,isIterable:goe};function ln(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}gt.inherits(ln,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:gt.toJSONObject(this.config),code:this.code,status:this.status}}});const tV=ln.prototype,rV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{rV[t]={value:t}});Object.defineProperties(ln,rV);Object.defineProperty(tV,"isAxiosError",{value:!0});ln.from=(t,e,r,n,s,a)=>{const i=Object.create(tV);gt.toFlatObject(t,i,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return ln.call(i,o,l,r,n,s),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",a&&Object.assign(i,a),i};const xoe=null;function vk(t){return gt.isPlainObject(t)||gt.isArray(t)}function nV(t){return gt.endsWith(t,"[]")?t.slice(0,-2):t}function IT(t,e,r){return t?t.concat(e).map(function(s,a){return s=nV(s),!r&&a?"["+s+"]":s}).join(r?".":""):e}function yoe(t){return gt.isArray(t)&&!t.some(vk)}const voe=gt.toFlatObject(gt,{},null,function(e){return/^is[A-Z]/.test(e)});function a4(t,e,r){if(!gt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=gt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!gt.isUndefined(b[y])});const n=r.metaTokens,s=r.visitor||d,a=r.dots,i=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&gt.isSpecCompliantForm(e);if(!gt.isFunction(s))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(gt.isDate(x))return x.toISOString();if(gt.isBoolean(x))return x.toString();if(!l&&gt.isBlob(x))throw new ln("Blob is not supported. Use a Buffer instead.");return gt.isArrayBuffer(x)||gt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,y,b){let S=x;if(x&&!b&&typeof x=="object"){if(gt.endsWith(y,"{}"))y=n?y:y.slice(0,-2),x=JSON.stringify(x);else if(gt.isArray(x)&&yoe(x)||(gt.isFileList(x)||gt.endsWith(y,"[]"))&&(S=gt.toArray(x)))return y=nV(y),S.forEach(function(T,O){!(gt.isUndefined(T)||T===null)&&e.append(i===!0?IT([y],O,a):i===null?y:y+"[]",u(T))}),!1}return vk(x)?!0:(e.append(IT(b,y,a),u(x)),!1)}const p=[],g=Object.assign(voe,{defaultVisitor:d,convertValue:u,isVisitable:vk});function m(x,y){if(!gt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(x),gt.forEach(x,function(S,P){(!(gt.isUndefined(S)||S===null)&&s.call(e,S,gt.isString(P)?P.trim():P,y,g))===!0&&m(S,y?y.concat(P):[P])}),p.pop()}}if(!gt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function PT(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function PS(t,e){this._pairs=[],t&&a4(t,this,e)}const sV=PS.prototype;sV.append=function(e,r){this._pairs.push([e,r])};sV.toString=function(e){const r=e?function(n){return e.call(this,n,PT)}:PT;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function woe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function aV(t,e,r){if(!e)return t;const n=r&&r.encode||woe;gt.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(s?a=s(e,r):a=gt.isURLSearchParams(e)?e.toString():new PS(e,r).toString(n),a){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class jT{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){gt.forEach(this.handlers,function(n){n!==null&&e(n)})}}const iV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},boe=typeof URLSearchParams<"u"?URLSearchParams:PS,_oe=typeof FormData<"u"?FormData:null,koe=typeof Blob<"u"?Blob:null,Soe={isBrowser:!0,classes:{URLSearchParams:boe,FormData:_oe,Blob:koe},protocols:["http","https","file","blob","url","data"]},jS=typeof window<"u"&&typeof document<"u",wk=typeof navigator=="object"&&navigator||void 0,Noe=jS&&(!wk||["ReactNative","NativeScript","NS"].indexOf(wk.product)<0),Eoe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Coe=jS&&window.location.href||"http://localhost",Aoe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jS,hasStandardBrowserEnv:Noe,hasStandardBrowserWebWorkerEnv:Eoe,navigator:wk,origin:Coe},Symbol.toStringTag,{value:"Module"})),Wo={...Aoe,...Soe};function Toe(t,e){return a4(t,new Wo.classes.URLSearchParams,{visitor:function(r,n,s,a){return Wo.isNode&&gt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function Ioe(t){return gt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Poe(t){const e={},r=Object.keys(t);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],e[a]=t[a];return e}function oV(t){function e(r,n,s,a){let i=r[a++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),l=a>=r.length;return i=!i&&gt.isArray(s)?s.length:i,l?(gt.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!o):((!s[i]||!gt.isObject(s[i]))&&(s[i]=[]),e(r,n,s[i],a)&&gt.isArray(s[i])&&(s[i]=Poe(s[i])),!o)}if(gt.isFormData(t)&&gt.isFunction(t.entries)){const r={};return gt.forEachEntry(t,(n,s)=>{e(Ioe(n),s,r,0)}),r}return null}function joe(t,e,r){if(gt.isString(t))try{return(e||JSON.parse)(t),gt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const yy={transitional:iV,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,a=gt.isObject(e);if(a&&gt.isHTMLForm(e)&&(e=new FormData(e)),gt.isFormData(e))return s?JSON.stringify(oV(e)):e;if(gt.isArrayBuffer(e)||gt.isBuffer(e)||gt.isStream(e)||gt.isFile(e)||gt.isBlob(e)||gt.isReadableStream(e))return e;if(gt.isArrayBufferView(e))return e.buffer;if(gt.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Toe(e,this.formSerializer).toString();if((o=gt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return a4(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||s?(r.setContentType("application/json",!1),joe(e)):e}],transformResponse:[function(e){const r=this.transitional||yy.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(gt.isResponse(e)||gt.isReadableStream(e))return e;if(e&&gt.isString(e)&&(n&&!this.responseType||s)){const i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?ln.from(o,ln.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wo.classes.FormData,Blob:Wo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};gt.forEach(["delete","get","head","post","put","patch"],t=>{yy.headers[t]={}});const Roe=gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Loe=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||e[r]&&Roe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},RT=Symbol("internals");function Jg(t){return t&&String(t).trim().toLowerCase()}function Ow(t){return t===!1||t==null?t:gt.isArray(t)?t.map(Ow):String(t)}function Foe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Doe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function a3(t,e,r,n,s){if(gt.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!gt.isString(e)){if(gt.isString(n))return e.indexOf(n)!==-1;if(gt.isRegExp(n))return n.test(e)}}function Ooe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Moe(t,e){const r=gt.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,a,i){return this[n].call(this,e,s,a,i)},configurable:!0})})}let Rl=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function a(o,l,u){const d=Jg(l);if(!d)throw new Error("header name must be a non-empty string");const p=gt.findKey(s,d);(!p||s[p]===void 0||u===!0||u===void 0&&s[p]!==!1)&&(s[p||l]=Ow(o))}const i=(o,l)=>gt.forEach(o,(u,d)=>a(u,d,l));if(gt.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(gt.isString(e)&&(e=e.trim())&&!Doe(e))i(Loe(e),r);else if(gt.isObject(e)&&gt.isIterable(e)){let o={},l,u;for(const d of e){if(!gt.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(l=o[u])?gt.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}i(o,r)}else e!=null&&a(r,e,n);return this}get(e,r){if(e=Jg(e),e){const n=gt.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Foe(s);if(gt.isFunction(r))return r.call(this,s,n);if(gt.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Jg(e),e){const n=gt.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||a3(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function a(i){if(i=Jg(i),i){const o=gt.findKey(n,i);o&&(!r||a3(n,n[o],o,r))&&(delete n[o],s=!0)}}return gt.isArray(e)?e.forEach(a):a(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const a=r[n];(!e||a3(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const r=this,n={};return gt.forEach(this,(s,a)=>{const i=gt.findKey(n,a);if(i){r[i]=Ow(s),delete r[a];return}const o=e?Ooe(a):String(a).trim();o!==a&&delete r[a],r[o]=Ow(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return gt.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&gt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[RT]=this[RT]={accessors:{}}).accessors,s=this.prototype;function a(i){const o=Jg(i);n[o]||(Moe(s,i),n[o]=!0)}return gt.isArray(e)?e.forEach(a):a(e),this}};Rl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);gt.reduceDescriptors(Rl.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});gt.freezeMethods(Rl);function i3(t,e){const r=this||yy,n=e||r,s=Rl.from(n.headers);let a=n.data;return gt.forEach(t,function(o){a=o.call(r,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function lV(t){return!!(t&&t.__CANCEL__)}function tg(t,e,r){ln.call(this,t??"canceled",ln.ERR_CANCELED,e,r),this.name="CanceledError"}gt.inherits(tg,ln,{__CANCEL__:!0});function cV(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ln("Request failed with status code "+r.status,[ln.ERR_BAD_REQUEST,ln.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Boe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Voe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,a=0,i;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=n[a];i||(i=u),r[s]=l,n[s]=u;let p=a,g=0;for(;p!==s;)g+=r[p++],p=p%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),u-i<e)return;const m=d&&u-d;return m?Math.round(g*1e3/m):void 0}}function Uoe(t,e){let r=0,n=1e3/e,s,a;const i=(u,d=Date.now())=>{r=d,s=null,a&&(clearTimeout(a),a=null),t(...u)};return[(...u)=>{const d=Date.now(),p=d-r;p>=n?i(u,d):(s=u,a||(a=setTimeout(()=>{a=null,i(s)},n-p)))},()=>s&&i(s)]}const D5=(t,e,r=3)=>{let n=0;const s=Voe(50,250);return Uoe(a=>{const i=a.loaded,o=a.lengthComputable?a.total:void 0,l=i-n,u=s(l),d=i<=o;n=i;const p={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&d?(o-i)/u:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(p)},r)},LT=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},FT=t=>(...e)=>gt.asap(()=>t(...e)),zoe=Wo.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Wo.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Wo.origin),Wo.navigator&&/(msie|trident)/i.test(Wo.navigator.userAgent)):()=>!0,$oe=Wo.hasStandardBrowserEnv?{write(t,e,r,n,s,a){const i=[t+"="+encodeURIComponent(e)];gt.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),gt.isString(n)&&i.push("path="+n),gt.isString(s)&&i.push("domain="+s),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qoe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Hoe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function uV(t,e,r){let n=!qoe(e);return t&&(n||r==!1)?Hoe(t,e):e}const DT=t=>t instanceof Rl?{...t}:t;function yp(t,e){e=e||{};const r={};function n(u,d,p,g){return gt.isPlainObject(u)&&gt.isPlainObject(d)?gt.merge.call({caseless:g},u,d):gt.isPlainObject(d)?gt.merge({},d):gt.isArray(d)?d.slice():d}function s(u,d,p,g){if(gt.isUndefined(d)){if(!gt.isUndefined(u))return n(void 0,u,p,g)}else return n(u,d,p,g)}function a(u,d){if(!gt.isUndefined(d))return n(void 0,d)}function i(u,d){if(gt.isUndefined(d)){if(!gt.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function o(u,d,p){if(p in e)return n(u,d);if(p in t)return n(void 0,u)}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(u,d,p)=>s(DT(u),DT(d),p,!0)};return gt.forEach(Object.keys({...t,...e}),function(d){const p=l[d]||s,g=p(t[d],e[d],d);gt.isUndefined(g)&&p!==o||(r[d]=g)}),r}const dV=t=>{const e=yp({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:o}=e;if(e.headers=i=Rl.from(i),e.url=aV(uV(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),gt.isFormData(r)){if(Wo.hasStandardBrowserEnv||Wo.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(gt.isFunction(r.getHeaders)){const l=r.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,p])=>{u.includes(d.toLowerCase())&&i.set(d,p)})}}if(Wo.hasStandardBrowserEnv&&(n&&gt.isFunction(n)&&(n=n(e)),n||n!==!1&&zoe(e.url))){const l=s&&a&&$oe.read(a);l&&i.set(s,l)}return e},Woe=typeof XMLHttpRequest<"u",Goe=Woe&&function(t){return new Promise(function(r,n){const s=dV(t);let a=s.data;const i=Rl.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=s,d,p,g,m,x;function y(){m&&m(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function S(){if(!b)return;const T=Rl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),W={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:T,config:t,request:b};cV(function(L){r(L),y()},function(L){n(L),y()},W),b=null}"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(S)},b.onabort=function(){b&&(n(new ln("Request aborted",ln.ECONNABORTED,t,b)),b=null)},b.onerror=function(O){const W=O&&O.message?O.message:"Network Error",Y=new ln(W,ln.ERR_NETWORK,t,b);Y.event=O||null,n(Y),b=null},b.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const W=s.transitional||iV;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),n(new ln(O,W.clarifyTimeoutError?ln.ETIMEDOUT:ln.ECONNABORTED,t,b)),b=null},a===void 0&&i.setContentType(null),"setRequestHeader"in b&&gt.forEach(i.toJSON(),function(O,W){b.setRequestHeader(W,O)}),gt.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),o&&o!=="json"&&(b.responseType=s.responseType),u&&([g,x]=D5(u,!0),b.addEventListener("progress",g)),l&&b.upload&&([p,m]=D5(l),b.upload.addEventListener("progress",p),b.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(d=T=>{b&&(n(!T||T.type?new tg(null,t,b):T),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const P=Boe(s.url);if(P&&Wo.protocols.indexOf(P)===-1){n(new ln("Unsupported protocol "+P+":",ln.ERR_BAD_REQUEST,t));return}b.send(a||null)})},Koe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const a=function(u){if(!s){s=!0,o();const d=u instanceof Error?u:this.reason;n.abort(d instanceof ln?d:new tg(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,a(new ln(`timeout ${e} of ms exceeded`,ln.ETIMEDOUT))},e);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>gt.asap(o),l}},Yoe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Xoe=async function*(t,e){for await(const r of Qoe(t))yield*Yoe(r,e)},Qoe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},OT=(t,e,r,n)=>{const s=Xoe(t,e);let a=0,i,o=l=>{i||(i=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await s.next();if(u){o(),l.close();return}let p=d.byteLength;if(r){let g=a+=p;r(g)}l.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},MT=64*1024,{isFunction:Ov}=gt,Joe=(({Request:t,Response:e})=>({Request:t,Response:e}))(gt.global),{ReadableStream:BT,TextEncoder:VT}=gt.global,UT=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Zoe=t=>{t=gt.merge.call({skipUndefined:!0},Joe,t);const{fetch:e,Request:r,Response:n}=t,s=e?Ov(e):typeof fetch=="function",a=Ov(r),i=Ov(n);if(!s)return!1;const o=s&&Ov(BT),l=s&&(typeof VT=="function"?(x=>y=>x.encode(y))(new VT):async x=>new Uint8Array(await new r(x).arrayBuffer())),u=a&&o&&UT(()=>{let x=!1;const y=new r(Wo.origin,{body:new BT,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!y}),d=i&&o&&UT(()=>gt.isReadableStream(new n("").body)),p={stream:d&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!p[x]&&(p[x]=(y,b)=>{let S=y&&y[x];if(S)return S.call(y);throw new ln(`Response type '${x}' is not supported`,ln.ERR_NOT_SUPPORT,b)})});const g=async x=>{if(x==null)return 0;if(gt.isBlob(x))return x.size;if(gt.isSpecCompliantForm(x))return(await new r(Wo.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(gt.isArrayBufferView(x)||gt.isArrayBuffer(x))return x.byteLength;if(gt.isURLSearchParams(x)&&(x=x+""),gt.isString(x))return(await l(x)).byteLength},m=async(x,y)=>{const b=gt.toFiniteNumber(x.getContentLength());return b??g(y)};return async x=>{let{url:y,method:b,data:S,signal:P,cancelToken:T,timeout:O,onDownloadProgress:W,onUploadProgress:Y,responseType:L,headers:A,withCredentials:N="same-origin",fetchOptions:D}=dV(x),j=e||fetch;L=L?(L+"").toLowerCase():"text";let F=Koe([P,T&&T.toAbortSignal()],O),M=null;const Z=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let ue;try{if(Y&&u&&b!=="get"&&b!=="head"&&(ue=await m(A,S))!==0){let K=new r(y,{method:"POST",body:S,duplex:"half"}),I;if(gt.isFormData(S)&&(I=K.headers.get("content-type"))&&A.setContentType(I),K.body){const[z,X]=LT(ue,D5(FT(Y)));S=OT(K.body,MT,z,X)}}gt.isString(N)||(N=N?"include":"omit");const pe=a&&"credentials"in r.prototype,fe={...D,signal:F,method:b.toUpperCase(),headers:A.normalize().toJSON(),body:S,duplex:"half",credentials:pe?N:void 0};M=a&&new r(y,fe);let te=await(a?j(M,D):j(y,fe));const H=d&&(L==="stream"||L==="response");if(d&&(W||H&&Z)){const K={};["status","statusText","headers"].forEach(J=>{K[J]=te[J]});const I=gt.toFiniteNumber(te.headers.get("content-length")),[z,X]=W&&LT(I,D5(FT(W),!0))||[];te=new n(OT(te.body,MT,z,()=>{X&&X(),Z&&Z()}),K)}L=L||"text";let ie=await p[gt.findKey(p,L)||"text"](te,x);return!H&&Z&&Z(),await new Promise((K,I)=>{cV(K,I,{data:ie,headers:Rl.from(te.headers),status:te.status,statusText:te.statusText,config:x,request:M})})}catch(pe){throw Z&&Z(),pe&&pe.name==="TypeError"&&/Load failed|fetch/i.test(pe.message)?Object.assign(new ln("Network Error",ln.ERR_NETWORK,x,M),{cause:pe.cause||pe}):ln.from(pe,pe&&pe.code,x,M)}}},ele=new Map,fV=t=>{let e=t?t.env:{};const{fetch:r,Request:n,Response:s}=e,a=[n,s,r];let i=a.length,o=i,l,u,d=ele;for(;o--;)l=a[o],u=d.get(l),u===void 0&&d.set(l,u=o?new Map:Zoe(e)),d=u;return u};fV();const bk={http:xoe,xhr:Goe,fetch:{get:fV}};gt.forEach(bk,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zT=t=>`- ${t}`,tle=t=>gt.isFunction(t)||t===null||t===!1,hV={getAdapter:(t,e)=>{t=gt.isArray(t)?t:[t];const{length:r}=t;let n,s;const a={};for(let i=0;i<r;i++){n=t[i];let o;if(s=n,!tle(n)&&(s=bk[(o=String(n)).toLowerCase()],s===void 0))throw new ln(`Unknown adapter '${o}'`);if(s&&(gt.isFunction(s)||(s=s.get(e))))break;a[o||"#"+i]=s}if(!s){const i=Object.entries(a).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=r?i.length>1?`since :
`+i.map(zT).join(`
`):" "+zT(i[0]):"as no adapter specified";throw new ln("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:bk};function o3(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tg(null,t)}function $T(t){return o3(t),t.headers=Rl.from(t.headers),t.data=i3.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),hV.getAdapter(t.adapter||yy.adapter,t)(t).then(function(n){return o3(t),n.data=i3.call(t,t.transformResponse,n),n.headers=Rl.from(n.headers),n},function(n){return lV(n)||(o3(t),n&&n.response&&(n.response.data=i3.call(t,t.transformResponse,n.response),n.response.headers=Rl.from(n.response.headers))),Promise.reject(n)})}const pV="1.12.2",i4={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{i4[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const qT={};i4.transitional=function(e,r,n){function s(a,i){return"[Axios v"+pV+"] Transitional option '"+a+"'"+i+(n?". "+n:"")}return(a,i,o)=>{if(e===!1)throw new ln(s(i," has been removed"+(r?" in "+r:"")),ln.ERR_DEPRECATED);return r&&!qT[i]&&(qT[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,i,o):!0}};i4.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function rle(t,e,r){if(typeof t!="object")throw new ln("options must be an object",ln.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const a=n[s],i=e[a];if(i){const o=t[a],l=o===void 0||i(o,a,t);if(l!==!0)throw new ln("option "+a+" must be "+l,ln.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ln("Unknown option "+a,ln.ERR_BAD_OPTION)}}const Mw={assertOptions:rle,validators:i4},Mu=Mw.validators;let X0=class{constructor(e){this.defaults=e||{},this.interceptors={request:new jT,response:new jT}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=yp(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:a}=r;n!==void 0&&Mw.assertOptions(n,{silentJSONParsing:Mu.transitional(Mu.boolean),forcedJSONParsing:Mu.transitional(Mu.boolean),clarifyTimeoutError:Mu.transitional(Mu.boolean)},!1),s!=null&&(gt.isFunction(s)?r.paramsSerializer={serialize:s}:Mw.assertOptions(s,{encode:Mu.function,serialize:Mu.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Mw.assertOptions(r,{baseUrl:Mu.spelling("baseURL"),withXsrfToken:Mu.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=a&&gt.merge(a.common,a[r.method]);a&&gt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),r.headers=Rl.concat(i,a);const o=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,p=0,g;if(!l){const x=[$T.bind(this),void 0];for(x.unshift(...o),x.push(...u),g=x.length,d=Promise.resolve(r);p<g;)d=d.then(x[p++],x[p++]);return d}g=o.length;let m=r;for(;p<g;){const x=o[p++],y=o[p++];try{m=x(m)}catch(b){y.call(this,b);break}}try{d=$T.call(this,m)}catch(x){return Promise.reject(x)}for(p=0,g=u.length;p<g;)d=d.then(u[p++],u[p++]);return d}getUri(e){e=yp(this.defaults,e);const r=uV(e.baseURL,e.url,e.allowAbsoluteUrls);return aV(r,e.params,e.paramsSerializer)}};gt.forEach(["delete","get","head","options"],function(e){X0.prototype[e]=function(r,n){return this.request(yp(n||{},{method:e,url:r,data:(n||{}).data}))}});gt.forEach(["post","put","patch"],function(e){function r(n){return function(a,i,o){return this.request(yp(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}X0.prototype[e]=r(),X0.prototype[e+"Form"]=r(!0)});let nle=class mV{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const i=new Promise(o=>{n.subscribe(o),a=o}).then(s);return i.cancel=function(){n.unsubscribe(a)},i},e(function(a,i,o){n.reason||(n.reason=new tg(a,i,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new mV(function(s){e=s}),cancel:e}}};function sle(t){return function(r){return t.apply(null,r)}}function ale(t){return gt.isObject(t)&&t.isAxiosError===!0}const _k={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_k).forEach(([t,e])=>{_k[e]=t});function gV(t){const e=new X0(t),r=GB(X0.prototype.request,e);return gt.extend(r,X0.prototype,e,{allOwnKeys:!0}),gt.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return gV(yp(t,s))},r}const Ja=gV(yy);Ja.Axios=X0;Ja.CanceledError=tg;Ja.CancelToken=nle;Ja.isCancel=lV;Ja.VERSION=pV;Ja.toFormData=a4;Ja.AxiosError=ln;Ja.Cancel=Ja.CanceledError;Ja.all=function(e){return Promise.all(e)};Ja.spread=sle;Ja.isAxiosError=ale;Ja.mergeConfig=yp;Ja.AxiosHeaders=Rl;Ja.formToJSON=t=>oV(gt.isHTMLForm(t)?new FormData(t):t);Ja.getAdapter=hV.getAdapter;Ja.HttpStatusCode=_k;Ja.default=Ja;const{Axios:H9e,AxiosError:W9e,CanceledError:G9e,isCancel:K9e,CancelToken:Y9e,VERSION:X9e,all:Q9e,Cancel:J9e,isAxiosError:Z9e,spread:eCe,toFormData:tCe,AxiosHeaders:rCe,HttpStatusCode:nCe,formToJSON:sCe,getAdapter:aCe,mergeConfig:iCe}=Ja,ile=TB();async function ole(t){const r=await aie(ile,"initOrder")({total:t}),{checkoutUrl:n,accessCode:s,orderId:a,paystackReference:i}=r.data;return new Promise((o,l)=>{new WB().resumeTransaction(s,{onSuccess:()=>{console.log("Payment successful"),o({status:!0,message:"Payment successful",data:{checkoutUrl:n,orderId:a,paystackReference:i}})},onCancel:()=>{console.log("User cancelled"),o({status:!1,message:"Payment cancelled"})},onError:()=>{console.log("Payment failed"),o({status:!1,message:"Payment cancelled"})},onLoad:()=>{console.log("Page is loaded")}})})}const O5=async()=>{const t=await vn(tr(ct,"pharmacies"));return await Promise.all(t.docs.map(async r=>{const n={id:r.id,...r.data()};if(n.lat&&n.lon)n.coordinates={latitude:Number(n.lat),longitude:Number(n.lon)};else if(n.address)try{const a=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.address)}&limit=1`)).json();a&&a[0]&&(n.coordinates={latitude:Number(a[0].lat),longitude:Number(a[0].lon)})}catch{}return n}))},xV=async({vendorId:t,customerId:e,role:r})=>{const n=`${t}__${e}`,s=ir(ct,"threads",n);if(!(await Pa(s)).exists()){const[i,o]=await Promise.all([Pa(ir(ct,"pharmacies",t)),Pa(ir(ct,"users",e))]),l=i.exists()?i.data():{},u=o.exists()?o.data():{},d=l.name||"Pharmacy",p=l.address||"",g=!!l.isVerified,m=u.displayName||"Customer";await ad(s,{id:n,vendorId:t,customerId:e,vendorName:d,vendorAddress:p,vendorIsVerified:g,customerName:m,lastMessage:"",lastBy:null,lastAt:Is(),unread:{[t]:0,[e]:0},createdAt:Is()})}return n},kk=async(t,{senderId:e,to:r,text:n,imageUrl:s=null},a=null)=>{const i=tr(ct,"threads",t,"messages"),o=await af(i,{senderId:e,to:r,text:n||"",imageUrl:s,createdAt:Is(),read:!1,status:"sent",deliveredAt:null,readAt:null,prescriptionId:a});return await ds(ir(ct,"threads",t),{lastMessage:s?"📷 Image":n||"…",lastBy:e,lastAt:Is(),[`unread.${r}`]:A5(1)}),setTimeout(async()=>{await ds(o,{status:"delivered",deliveredAt:Is()})},1e3),o.id},yV=async(t,e,r)=>{const n=NS(CS,`chat-images/${e}/${Date.now()}_${t.name}`),s=await kS(n,t);return await SS(s.ref)},M5=async(t,e)=>{await ds(ir(ct,"threads",t),{[`unread.${e}`]:0});const r=br(tr(ct,"threads",t,"messages"),Fr("to","==",e),Fr("read","==",!1),Qa("createdAt","desc"),vu(50)),n=await vn(r);if(!n.empty){const s=aS(ct),a=Is();n.docs.forEach(i=>{s.update(i.ref,{read:!0,status:"read",readAt:a})}),await s.commit()}},vV=async(t,e)=>{const r=ir(ct,"threads",t,"messages",e);await ds(r,{status:"delivered",deliveredAt:Is()})},wV=(t,e,r,n=50)=>{const s=br(tr(ct,"threads",t,"messages"),Qa("createdAt","desc"),vu(n));return Dn(s,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()})).reverse();e(i)},a=>r?.(a))},o4=(t,e,r,n={})=>{if(!t?.uid||!t?.role)return()=>{};const s=tr(ct,"threads"),a=t.role==="customer"?br(s,Fr("customerId","==",t.uid)):br(s,Fr("vendorId","==",t.uid)),i=n.noSort?a:br(a,Qa("lastAt","desc"));return Dn(i,o=>e(o.docs.map(l=>({id:l.id,...l.data()}))),o=>r?.(o))},RS=(t,e=null)=>{const r=tr(ct,"products"),n=e?br(r,Fr("pharmacyId","==",e),Qa("createdAt","desc")):br(r,Qa("createdAt","desc"));return Dn(n,s=>t(s.docs.map(a=>({id:a.id,...a.data()}))),s=>console.error("listenProducts error:",s))},LS=(t,e=12)=>{const r=tr(ct,"products"),n=br(r,Qa("createdAt","desc"),vu(e));return Dn(n,s=>t(s.docs.map(a=>({id:a.id,...a.data()}))),s=>console.error("listenNewProducts error:",s))},bV=async t=>{const e=tr(ct,"products");await af(e,{...t,createdAt:Is()})},_V=async(t,e)=>{const r=aS(ct);t.forEach(n=>{const s=ir(tr(ct,"products"));r.set(s,{...n,pharmacyId:e,price:Number(n.price),stock:Number(n.stock||0),createdAt:Is()})}),await r.commit()},R1=async(t,e,r=1)=>{const n=ir(tr(ct,"users",t,"cart"));await ad(n,{productId:e,qty:r})},Bw=(t,e)=>jc(ir(ct,"users",t,"cart",e)),w2=async t=>{const{customerId:e,items:r,total:n,prescription:s=!1}=t,a=await ole(n),{data:i,status:o}=a;return o&&ad(ir(ct,"orders",i.orderId),{customerId:e,customerEmail:t.customerEmail,items:r.map(l=>({productId:l.productId,pharmacyId:l.pharmacyId,price:l.price,quantity:l.quantity||1,status:"pending",paid:!!s,transferReference:null,transferStatus:null})),total:n,subtotal:t.subtotal,paystackReference:i.paystackReference,status:"paid",paymentMethod:t.paymentMethod,deliveryFee:t.deliveryFee,deliveryAddress:t.deliveryAddress,prescriptionId:s||null,paidAt:Is(),createdAt:Is()}),o},kV=async(t=5,e)=>{if(!e)return[];const n=(await vn(br(tr(ct,"products"),Fr("pharmacyId","==",e)))).docs.map(o=>({id:o.id,...o.data()}));if(n.length===0)return[];const s=await vn(br(tr(ct,"orders"),Fr("pharmacyId","==",e))),a={};s.forEach(o=>{(o.data().items||[]).forEach(u=>{a[u.productId]||(a[u.productId]=0),a[u.productId]+=u.quantity||1})});const i=n.map(o=>({...o,sold:a[o.id]||0}));return i.sort((o,l)=>l.sold!==o.sold?l.sold-o.sold:(l.dateAdded?.toMillis?.()||0)-(o.dateAdded?.toMillis?.()||0)),i.slice(0,t).map(o=>({id:o.id,name:o.name,sold:o.sold,dateAdded:o.dateAdded}))};async function SV({pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:s,duration:a,notes:i}){return await af(tr(ct,"prescriptions"),{pharmacyId:t,customerId:e,chatThreadId:r,drugs:n,startDate:s,duration:a,notes:i,status:"active",createdAt:Is(),updatedAt:Is()})}async function NV(t){const e=br(tr(ct,"prescriptions"),Fr("chatThreadId","==",t));return(await vn(e)).docs.map(n=>({id:n.id,...n.data()}))}async function EV({customerId:t}){const r=(await vn(br(tr(ct,"prescriptions"),Fr("customerId","==",t),Fr("requirePurchase","==",!0),Fr("fulfilled","!=",!0)))).docs.map(a=>({id:a.id,...a.data()}));if(!r.length)return;const n=await vn(br(tr(ct,"orders"),Fr("customerId","==",t),Fr("status","==","fulfilled"))),s=[];n.forEach(a=>{(a.data().items||[]).forEach(o=>{s.push(o.productId)})});for(const a of r)a.drugs.every(o=>o.productId&&s.includes(o.productId))&&await ds(ir(ct,"prescriptions",a.id),{fulfilled:!0})}const CV=async(t,e,r)=>{const n=ir(ct,"wishlists",`${t}_${e}`);await ad(n,{userId:t,productId:e,productData:r,createdAt:Is()})},AV=async(t,e)=>{const r=ir(ct,"wishlists",`${t}_${e}`);await jc(r)},TV=async(t,e)=>{const r=ir(ct,"wishlists",`${t}_${e}`);return(await Pa(r)).exists()},IV=(t,e,r=console.error)=>{const n=br(tr(ct,"wishlists"),Fr("userId","==",t),Qa("createdAt","desc"));return Dn(n,s=>{const a=s.docs.map(i=>({id:i.id,...i.data()}));e(a)},r)},PV=(t,e,r=console.error)=>{const n=br(tr(ct,"vendorBookmarks"),Fr("userId","==",t),Qa("createdAt","desc"));return Dn(n,s=>{const a=s.docs.map(i=>({id:i.id,...i.data()}));e(a)},r)},lle=Object.freeze(Object.defineProperty({__proto__:null,addProduct:bV,addToCart:R1,addToWishlist:CV,bulkAddProducts:_V,createPrescription:SV,fulfillPrescriptionIfOrdered:EV,getAllPharmacies:O5,getBestSellingProducts:kV,getOrCreateThread:xV,getPrescriptionsForThread:NV,isInWishlist:TV,listenNewProducts:LS,listenProducts:RS,listenThreadMessagesPaginated:wV,listenUserBookmarkedVendors:PV,listenUserThreads:o4,listenUserWishlist:IV,markMessageDelivered:vV,markThreadRead:M5,placeOrder:w2,removeFromCart:Bw,removeFromWishlist:AV,sendChatMessage:kk,uploadChatImage:yV},Symbol.toStringTag,{value:"Module"}));async function jV(t){t&&await mne(t)}async function cle(t){await hne(sh,t)}const RV=R.createContext(),Vn=()=>R.useContext(RV);function ule({children:t}){const[e,r]=R.useState(null),[n,s]=R.useState(null),[a,i]=R.useState(!0);R.useEffect(()=>{let g;const m=vne(sh,x=>{if(r(x),g&&(g(),g=void 0),x){const y=ir(ct,"users",x.uid);g=Dn(y,b=>{b.exists()&&s(b.data())})}else s(null);i(!1)});return()=>{g&&g(),m()}},[]);const o=(g,m)=>pne(sh,g,m),l=async({email:g,password:m,displayName:x,role:y,address:b,lat:S,lon:P,phone:T})=>{const{user:O}=await QM(sh,g,m);x&&await JM(O,{displayName:x});const W={uid:O.uid,email:g,displayName:x,role:y};return b&&(W.address=b),S&&(W.lat=S),P&&(W.lon=P),T&&(W.phoneNumber=T),await ad(ir(ct,"users",O.uid),W),y==="pharmacy"&&await ad(ir(ct,"pharmacies",O.uid),{id:O.uid,name:x||"Pharmacy",email:g,address:b||"",etaMins:30,phone:""}),await jV(O),{user:O,verificationSent:!0}},u=async()=>{const g=new Yu;g.addScope("email"),g.addScope("profile"),g.setCustomParameters({prompt:"select_account"});try{console.log("Attempting Google sign-in...");const m=await QA(sh,g);return console.log("Google sign-in successful:",m.user.email),m}catch(m){throw console.error("Google sign-in error:",m),m.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):m.code==="auth/popup-blocked"?new Error("Pop-up was blocked by your browser. Please allow pop-ups and try again."):m.code==="auth/network-request-failed"?new Error("Network error. Please check your connection and try again."):m.code==="auth/internal-error"?new Error("Google sign-in is not properly configured. Please contact support."):m.code==="auth/configuration-not-found"?new Error("Google sign-in configuration missing. Please contact support."):m}},d=async g=>{const m=new Yu;m.addScope("email"),m.addScope("profile"),m.setCustomParameters({prompt:"select_account"});try{console.log("Attempting Google registration/sign-in...");const x=await QA(sh,m),{user:y}=x;console.log("Google auth successful for:",y.email);const b=ir(ct,"users",y.uid),S=await Pa(b);if(S.exists()){if(console.log("Existing user found:",y.email),S.data().role!=="customer")throw new Error("This email is associated with a pharmacy account. Please use pharmacy sign-in instead.");return{user:y,verificationSent:!1,isNewUser:!1,existingCustomer:!0}}else{console.log("Creating new customer profile for:",y.email);const P={uid:y.uid,email:y.email,displayName:y.displayName||"Google User",role:"customer",address:g?.address||"Location not available",lat:g?.latitude,lon:g?.longitude,createdAt:new Date().toISOString(),authMethod:"google"};return await ad(b,P),console.log("New customer profile created successfully"),{user:y,verificationSent:!1,isNewUser:!0}}}catch(x){throw console.error("Google registration/sign-in error:",x),x.code==="auth/account-exists-with-different-credential"?new Error('An account with this email already exists. Please sign in with your email and password instead, or use the "Sign In with Google" option.'):x.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):x.code==="auth/popup-blocked"?new Error("Pop-up was blocked by your browser. Please allow pop-ups and try again."):x.code==="auth/network-request-failed"?new Error("Network error. Please check your connection and try again."):x.code==="auth/internal-error"?new Error("Google sign-in is not properly configured. Please contact support."):x.code==="auth/configuration-not-found"?new Error("Google sign-in configuration missing. Please contact support."):x}},p=()=>wne(sh);return c.jsx(RV.Provider,{value:{user:e,profile:n,loading:a,signIn:o,signUp:l,signInWithGoogle:u,signUpWithGoogle:d,logout:p},children:t})}const dle="modulepreload",fle=function(t){return"/"+t},HT={},Yd=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");s=l(r.map(u=>{if(u=fle(u),u in HT)return;HT[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":dle,d||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((m,x)=>{g.addEventListener("load",m),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function WT(t){return c.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:c.jsx("path",{d:"M6.66683 0C8.34653 0 9.95744 0.66726 11.1452 1.85499C12.3329 3.04272 13.0002 4.65363 13.0002 6.33333C13.0002 8.01304 12.3329 9.62395 11.1452 10.8117C9.95744 11.9994 8.34653 12.6667 6.66683 12.6667C4.98712 12.6667 3.37622 11.9994 2.18849 10.8117C1.00076 9.62395 0.333496 8.01304 0.333496 6.33333C0.333496 4.65363 1.00076 3.04272 2.18849 1.85499C3.37622 0.66726 4.98712 0 6.66683 0ZM6.66683 0.666667C5.16394 0.666667 3.7226 1.26369 2.65989 2.3264C1.59719 3.3891 1.00016 4.83044 1.00016 6.33333C1.00016 7.83623 1.59719 9.27757 2.65989 10.3403C3.7226 11.403 5.16394 12 6.66683 12C7.41099 12 8.14786 11.8534 8.83537 11.5687C9.52288 11.2839 10.1476 10.8665 10.6738 10.3403C11.2 9.81407 11.6174 9.18939 11.9021 8.50187C12.1869 7.81436 12.3335 7.07749 12.3335 6.33333C12.3335 4.83044 11.7365 3.3891 10.6738 2.3264C9.61106 1.26369 8.16972 0.666667 6.66683 0.666667ZM6.3335 2.66667H7.00016V6.28L10.1335 8.08667L9.80016 8.66667L6.3335 6.66667V2.66667Z",fill:"#848484"})})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LV=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ple={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},l)=>R.createElement("svg",{ref:l,...ple,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:LV("lucide",s),...o},[...i.map(([u,d])=>R.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=(t,e)=>{const r=R.forwardRef(({className:n,...s},a)=>R.createElement(mle,{ref:a,iconNode:e,className:LV(`lucide-${hle(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Zr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=Zr("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=Zr("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Zr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=Zr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=Zr("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=Zr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=Zr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=Zr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=Zr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=Zr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Zr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=Zr("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Zr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=Zr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=Zr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=Zr("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=Zr("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Zr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=Zr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=Zr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=Zr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=Zr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=Zr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Zr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Zr("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=Zr("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=Zr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=Zr("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=Zr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=Zr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=Zr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=Zr("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Zr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=Zr("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=Zr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=Zr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=Zr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=Zr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=Zr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=Zr("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=Zr("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=Zr("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=Zr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Zr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Fle({className:t="",children:e,...r}){return c.jsx("div",{className:`rounded-3xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-gray-800 ${t}`,...r,children:e})}function hd({name:t,image:e,category:r,size:n=64,className:s="",alt:a,style:i={},imgClassName:o="",roundedClass:l="rounded-xl"}){const[u,d]=R.useState(!1),p=(r||"")?.toString().toLowerCase().trim();let g=null;p&&(p.includes("prescription")?g="PrescriptionDrugs.svg":p.includes("over")?g="Over-the-counter Icon.svg":p.includes("syrup")?g="Syrup.svg":p.includes("therapeutic")?g="Therapeutic.svg":p.includes("control")?g="ControlledSubstances.svg":p.includes("target")&&(g="TargetSystem.svg"));const m="GeneralPill.svg",x=g||m,y={width:n,height:n,...i};return e&&!u?c.jsx("img",{src:e,alt:a||t||"Product image",className:`${l} object-cover ${o}`.trim(),style:y,onError:()=>d(!0)}):c.jsx("div",{className:`${s}`,style:y,children:c.jsx("img",{src:`/${encodeURIComponent(x)}`,alt:a||(r?`${r} icon`:"product icon"),className:`${l} object-contain w-full h-full`,onError:b=>{if(x!==m){b.currentTarget.src=`/${encodeURIComponent(m)}`;return}}})})}function Ek({product:t,vendorName:e,vendorDistanceKm:r,vendorEtaMins:n,onOpen:s,onAdd:a,cardWidth:i="172px",cardHeight:o="199px",nameSize:l="15.54px",nameWeight:u="medium",priceSize:d="14.43px",priceColor:p="#BDBDBD",priceWeight:g="medium",addColor:m="#36A5FF",borderRadius:x}){const[y,b]=R.useState(!1),[S,P]=R.useState(!1),[T,O]=R.useState(!1),W=t?.image&&!y;return c.jsxs(Fle,{className:`p-3 cursor-pointer relative flex flex-col justify-between overflow-hidden card-interactive group transition-all duration-200 ${S?"scale-95":"hover:scale-105"}`,onClick:s,onMouseDown:()=>P(!0),onMouseUp:()=>P(!1),onMouseLeave:()=>P(!1),style:{width:i,height:o,borderRadius:x||"10px"},children:[c.jsx("div",{className:"overflow-hidden flex items-center justify-center bg-white dark:bg-gray-800 transition-all duration-200 group-hover:bg-gradient-to-br group-hover:from-blue-50 group-hover:to-sky-50 dark:group-hover:from-blue-900/20 dark:group-hover:to-sky-900/20",style:{height:`calc(${o} * 0.6)`,borderRadius:x||"3px"},children:W?c.jsx("img",{src:t.image,alt:t.name||"product image",className:"object-contain h-full w-full transition-transform duration-200 group-hover:scale-110",onError:()=>b(!0),style:{maxWidth:"100%"}}):c.jsx("div",{className:"flex items-center justify-center w-full h-full transition-transform duration-200 group-hover:scale-110",style:{padding:8},children:c.jsx(hd,{name:t.name,image:t.image,category:t.category,size:Math.min(30,Math.max(48,parseInt(o,10)/2))})})}),c.jsxs("div",{className:"mt-1 text-xs text-zinc-500 font-poppins font-light truncate flex items-center gap-2 transition-colors duration-200 group-hover:text-zinc-600",style:{fontSize:"10px",maxWidth:"100%"},children:[c.jsx("span",{className:"truncate",children:e}),(typeof r=="number"||typeof n=="number")&&c.jsxs("span",{className:"text-[9px] text-zinc-400 whitespace-nowrap transition-colors duration-200 group-hover:text-sky-500",children:[typeof r=="number"?`${r.toFixed(1)} km`:"",typeof r=="number"&&typeof n=="number"?" · ":"",typeof n=="number"?`${n} min`:""]})]}),c.jsx("div",{className:"mt-1 font-poppins transition-colors duration-200 group-hover:text-zinc-800 dark:group-hover:text-white",style:{fontSize:l,fontWeight:u,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.name,children:t.name}),c.jsxs("div",{className:"font-poppins transition-colors duration-200 group-hover:text-sky-600",style:{fontSize:d,color:p,fontWeight:g,overflow:"hidden"},children:["₦",Number(t.price).toLocaleString()]}),c.jsx("button",{onClick:Y=>{Y.stopPropagation(),O(!0),setTimeout(()=>O(!1),150),a()},className:`absolute bottom-0 right-0 z-10 h-8 w-8 flex items-center justify-center border-l border-t bg-inherit border-solid btn-interactive transition-all duration-200 hover:scale-110 hover:shadow-lg ${T?"scale-90 shadow-inner":"active:scale-95"}`,style:{borderColor:m,borderRadius:x||"6px",background:T?m:"transparent",boxShadow:T?`inset 0 2px 4px rgba(0,0,0,0.2), 0 0 0 2px ${m}40`:void 0},onMouseEnter:Y=>{if(!T){Y.target.style.backgroundColor=m;const L=Y.target.querySelector("svg");L&&(L.style.color="white")}},onMouseLeave:Y=>{if(!T){Y.target.style.backgroundColor="transparent";const L=Y.target.querySelector("svg");L&&(L.style.color=m)}},children:c.jsx(Ple,{color:T?"white":m,size:16,className:`transition-all duration-200 ${T?"animate-pulse":""}`})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{borderRadius:x||"10px"}})]})}function Dle(){return c.jsxs("div",{className:"flex flex-col gap-6 animate-pulse",children:[c.jsxs("section",{className:"flex flex-col gap-4 rounded-3xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-100/80 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-4 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]})]}),c.jsx("div",{className:"h-11 rounded-2xl bg-sky-50/80 dark:bg-slate-800/70"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-24 flex-1 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60"}),c.jsx("div",{className:"h-24 flex-1 rounded-3xl bg-sky-50/50 dark:bg-slate-800/50"})]})]}),c.jsx("section",{className:"flex gap-3",children:Array.from({length:3}).map((t,e)=>c.jsx("div",{className:"h-10 flex-1 rounded-full bg-sky-50/70 dark:bg-slate-800/70"},e))}),c.jsx("section",{className:"flex flex-col gap-4",children:Array.from({length:2}).map((t,e)=>c.jsxs("div",{className:"space-y-3 rounded-3xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"flex gap-3",children:Array.from({length:2}).map((r,n)=>c.jsxs("div",{className:"flex flex-1 flex-col gap-3 rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"aspect-video w-full rounded-2xl bg-sky-100/60 dark:bg-slate-700/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]}),c.jsx("div",{className:"h-9 rounded-full bg-sky-100/70 dark:bg-slate-700/70"})]},n))})]},e))}),c.jsxs("section",{className:"flex flex-col gap-3",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"flex gap-3 overflow-hidden",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"flex w-48 flex-col gap-3 rounded-3xl border border-sky-100 bg-white/90 dark:bg-slate-900/80 dark:border-slate-700/70 p-3 shadow-sm",children:[c.jsx("div",{className:"h-20 rounded-2xl bg-sky-50/70 dark:bg-slate-800/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-8 flex-1 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-8 w-16 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]})]},e))})]})]})}function Ole(){return c.jsxs("div",{className:"animate-pulse space-y-10",children:[c.jsxs("section",{className:"grid grid-cols-[1.2fr_0.8fr] gap-6 rounded-4xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex flex-col gap-5",children:[c.jsx("div",{className:"h-10 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-12 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-12 w-36 rounded-full bg-sky-50 dark:bg-slate-800/70"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-4",children:[c.jsx("div",{className:"h-16 rounded-2xl bg-sky-100/60 dark:bg-slate-700/70"}),c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]},e))})]}),c.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-sky-50 via-white to-sky-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-6",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.3),_transparent_65%)] dark:bg-[radial-gradient(circle_at_top,_rgba(129,140,248,0.25),_transparent_60%)]"}),c.jsxs("div",{className:"relative flex h-full flex-col justify-between",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 w-40 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-56 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/60 dark:bg-slate-600/60"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/40"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("span",{className:"h-10 flex-1 rounded-full bg-sky-100/70 dark:bg-slate-700/70"}),c.jsx("span",{className:"h-10 w-36 rounded-full bg-sky-100/70 dark:bg-slate-700/70"})]})]})]})]}),c.jsxs("section",{className:"grid grid-cols-12 gap-6",children:[c.jsxs("div",{className:"col-span-8 space-y-4 rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-5 shadow-sm",children:[c.jsx("div",{className:"h-4 w-44 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"grid grid-cols-3 gap-4",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"flex flex-col gap-4 rounded-3xl bg-sky-50/40 dark:bg-slate-800/60 p-4",children:[c.jsx("div",{className:"aspect-video w-full rounded-3xl bg-sky-100/60 dark:bg-slate-700/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-10 flex-1 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-10 w-24 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]},e))})]}),c.jsxs("aside",{className:"col-span-4 space-y-4 rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-5 shadow-sm",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl bg-sky-50/40 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-100/60 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-8 w-16 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]},e))})]})]}),c.jsxs("section",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 w-36 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"flex flex-col gap-3 rounded-3xl border border-sky-100 bg-white/90 dark:bg-slate-900/85 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-40 rounded-3xl bg-sky-50/70 dark:bg-slate-800/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-9 flex-1 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-20 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]},e))})]})]})}function rg(){const[t,e]=R.useState(null),[r,n]=R.useState("Fetching location..."),[s,a]=R.useState(null),[i,o]=R.useState(!0);return R.useEffect(()=>{if(!navigator.geolocation){n("Location not supported"),a("Geolocation is not supported by this browser"),o(!1);return}const l={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition(async u=>{const{latitude:d,longitude:p}=u.coords;e({latitude:d,longitude:p}),a(null);try{const m=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${p}`,{timeout:5e3})).json();n(m.display_name||"Location unavailable")}catch(g){console.warn("Failed to fetch address:",g),n("Location detected")}finally{o(!1)}},u=>{switch(console.warn("Geolocation error:",u),a(u.message),o(!1),u.code){case u.PERMISSION_DENIED:n("Location permission denied");break;case u.POSITION_UNAVAILABLE:n("Location unavailable");break;case u.TIMEOUT:n("Location request timeout");break;default:n("Location error occurred");break}},l)},[]),{userCoords:t,location:r,locationError:s,isLoading:i}}function BV(t){if(!t)return null;if(t.coordinates&&typeof t.coordinates=="object"){if(t.coordinates.latitude&&t.coordinates.longitude)return{latitude:Number(t.coordinates.latitude),longitude:Number(t.coordinates.longitude)};if(t.coordinates.lat&&t.coordinates.lng)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lng)};if(t.coordinates.lat&&t.coordinates.lon)return{latitude:Number(t.coordinates.lat),longitude:Number(t.coordinates.lon)}}if(t.latitude&&t.longitude)return{latitude:Number(t.latitude),longitude:Number(t.longitude)};if(t.lat&&t.lng)return{latitude:Number(t.lat),longitude:Number(t.lng)};if(t.lat&&t.lon)return{latitude:Number(t.lat),longitude:Number(t.lon)};if(t.location&&typeof t.location=="object"){if(t.location.latitude&&t.location.longitude)return{latitude:Number(t.location.latitude),longitude:Number(t.location.longitude)};if(t.location.lat&&t.location.lng)return{latitude:Number(t.location.lat),longitude:Number(t.location.lng)}}if(t.coords&&typeof t.coords=="object"){if(t.coords.latitude&&t.coords.longitude)return{latitude:Number(t.coords.latitude),longitude:Number(t.coords.longitude)};if(t.coords.lat&&t.coords.lng)return{latitude:Number(t.coords.lat),longitude:Number(t.coords.lng)}}return null}function u4(t,e,r,n){const a=(r-t)*Math.PI/180,i=(n-e)*Math.PI/180,o=Math.sin(a/2)**2+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(i/2)**2;return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function VV(t,e="driving"){if(!Number.isFinite(t)||t<=0)return null;const r={walking:5,cycling:15,driving:30},n=r[e]||r.driving,s=t/n,a=Math.round(s*60);let i;if(a<1)i="< 1 min";else if(a<60)i=`${a} min${a!==1?"s":""}`;else{const o=Math.floor(a/60),l=a%60;l===0?i=`${o} hr${o!==1?"s":""}`:i=`${o}h ${l}m`}return{minutes:a,formatted:i,distance:t,mode:e}}function Mle(t,e,r="driving"){if(!t||t.length===0||!e)return null;let n=null,s=1/0,a=null;return t.forEach(i=>{const o=BV(i);if(o){const l=u4(e.latitude,e.longitude,o.latitude,o.longitude);l<s&&(s=l,n=i,a=VV(l,r))}}),n?{pharmacy:n,eta:a,distance:s}:null}function UV(t,e,r="driving"){const n=BV(t);if(!n||!e)return null;const s=u4(e.latitude,e.longitude,n.latitude,n.longitude);return VV(s,r)}const zV=R.createContext(),wy=()=>{const t=R.useContext(zV);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},Mr={SWIPE_NAVIGATION:"swipe_navigation_enabled",THEME_MODE:"theme_mode",LANGUAGE:"language",FONT_SIZE:"font_size",BIOMETRIC_LOGIN:"biometric_login_enabled",AUTO_LOCK:"auto_lock_timeout",LOCATION_PRECISION:"location_precision",MESSAGE_READ_RECEIPTS:"message_read_receipts",ORDER_NOTIFICATIONS:"order_notifications_enabled",PRESCRIPTION_REMINDERS:"prescription_reminders_enabled",DATA_SAVER_MODE:"data_saver_mode_enabled",HIGH_CONTRAST:"high_contrast_enabled",REDUCE_MOTION:"reduce_motion_enabled"},c3={[Mr.SWIPE_NAVIGATION]:!1,[Mr.THEME_MODE]:"light",[Mr.LANGUAGE]:"en",[Mr.FONT_SIZE]:"small",[Mr.BIOMETRIC_LOGIN]:!1,[Mr.AUTO_LOCK]:"5min",[Mr.LOCATION_PRECISION]:"precise",[Mr.MESSAGE_READ_RECEIPTS]:!0,[Mr.ORDER_NOTIFICATIONS]:!0,[Mr.PRESCRIPTION_REMINDERS]:!0,[Mr.DATA_SAVER_MODE]:!1,[Mr.HIGH_CONTRAST]:!1,[Mr.REDUCE_MOTION]:!1},Ble=({children:t})=>{const[e,r]=R.useState(c3),[n,s]=R.useState(!0);R.useEffect(()=>{try{const u=localStorage.getItem("app_settings");if(u){const d=JSON.parse(u);r(p=>({...p,...d}))}}catch(u){console.error("Error loading settings:",u)}finally{s(!1)}},[]),R.useEffect(()=>{if(!n)try{localStorage.setItem("app_settings",JSON.stringify(e))}catch(u){console.error("Error saving settings:",u)}},[e,n]);const l={settings:e,updateSetting:(u,d)=>{r(p=>({...p,[u]:d}))},getSetting:u=>e[u]??c3[u],resetSettings:()=>{r(c3)},isLoading:n};return c.jsx(zV.Provider,{value:l,children:t})},Vle=R.createContext(),QT={en:{home:"Home",cart:"Cart",messages:"Messages",orders:"Orders",settings:"Settings",notifications:"Notifications",search:"Search",back:"Back",continue:"Continue",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",loading:"Loading...",ai_chat:"AI Chat",welcome_to_pharmai:"Welcome to PharmAI!",ai_assistant_description:"I'm here to help with general health information, product questions, and pharmacy services. Remember, I'm not a substitute for professional medical advice.",typing:"Typing...",online:"Online",clear_chat:"Clear Chat",ai_error_message:"Sorry, I'm having trouble connecting. Please try again later.",ai_disclaimer:"⚠️ PharmAI provides general information only. Not medical advice. Consult professionals for health concerns.",message:"Message",sent:"Sent",delivered:"Delivered",read:"Read",type_message:"Type a message...",send:"Send",add_to_cart:"Add to Cart",buy_now:"Buy Now",price:"Price",out_of_stock:"Out of Stock",in_stock:"In Stock",product_description:"Product Description",product_unavailable:"Product unavailable. Please try again.",hello:"Hello",friend:"Friend",search_placeholder:"Search drugs, pharmacies",new_arrivals:"New Arrivals",popular_products:"Popular Products",all_new_products:"All New Products",load_more:"Load more",new:"New",close:"Close",please_sign_in:"Please sign in",your_pharmacy_location:"Your pharmacy location",location_services:"Location services",calculating_eta:"Calculating ETA...",fetching_location:"Fetching location...",nearest_pharmacy:"nearest pharmacy",to:"to",welcome_message:"Welcome to PharmaSeA",find_medicines:"Find medicines near you",fast_delivery:"Fast & reliable delivery",learn_more:"Learn more",get_started:"Get started",shop_now:"Shop now",order_now:"Order now",browse_catalog:"Browse catalog",special_offer:"Special Offer",limited_time:"Limited time offer",orders_page_orders:"Orders",orders_all:"All",orders_pending:"Pending",orders_processing:"Processing",orders_fulfilled:"Fulfilled",orders_cancelled:"Cancelled",no_orders_yet:"No orders yet.",order_number:"Order #",orders_customer:"Customer",orders_items:"Items",orders_total:"Total",orders_status:"Status",orders_see_more:"See more",more_items:"more",reveal_number:"Reveal Number",please_sign_in_continue:"Please sign in to continue",sign_in_sign_up:"Sign In / Sign Up",qty:"Qty",my_conversations:`My
Conversations`,search_chats:"Search chats",no_conversations_yet:"No conversations yet.",no_messages_yet:"No messages yet.",cart_page_cart:"Cart",your_cart_is_empty:"Your cart is empty.",cart_remove:"Remove",subtotal:"Subtotal",delivery_fee:"Delivery Fee",cart_page_total:"Total",proceed_to_checkout:"Proceed to Checkout",order_summary:"Order Summary",cart_items:"Items",delivery_details:"Delivery Details",delivery_address:"Delivery Address",phone_number:"Phone Number",email_optional:"Email (Optional)",enter_delivery_address:"Enter delivery address",enter_phone_number:"Enter phone number",enter_email_address:"Enter email address",use_current_location:"Use current location",continue_to_payment:"Continue to Payment",payment_method:"Payment Method",pay_on_delivery:"Pay on Delivery",pay_with_cash_delivery:"Pay with cash when order arrives",online_payment:"Online Payment",pay_with_card:"Pay with card, bank transfer, or USSD",pay_with_card_bank_ussd:"Pay with card, bank transfer, or USSD",pay_with_cash_on_delivery:"Pay with cash when order arrives",use_your_health_insurance:"Use your health insurance",pay_with_insurance:"Pay with Insurance",use_health_insurance:"Use your health insurance",coming_soon:"Coming Soon",total_amount:"Total Amount",pay_now:"Pay Now",place_order:"Place Order",decrease_quantity:"Decrease quantity",increase_quantity:"Increase quantity",order_placement_failed:"Order placement failed",order_placed_delivery:"Order placed successfully! You'll pay on delivery.",payment_successful:"Payment successful! Your order has been placed.",checkout_failed:"Checkout failed. Please try again.",my_profile:"My Profile",pharmacy_profile:"Pharmacy Profile",edit_profile:"Edit Profile",profile_edit:"Edit",profile_save:"Save",profile_cancel:"Cancel",profile_close:"Close",view:"View",open:"Open",name:"Name",phone_number_profile:"Phone Number",address_profile:"Address",password:"Password",items_in_cart:"Items in Cart",profile_page_active_chats:"Active Chats",saved_items:"Saved Items",drugs_bought:"Drugs Bought",all_drugs_bought:"All Drugs Bought",my_saved_items:"My Saved Items",saved_products:"Products",saved_vendors:"Vendors",no_products_saved:"No products saved",start_adding_products:"Start adding products you like!",no_vendors_bookmarked:"No vendors bookmarked",bookmark_vendors:"Bookmark vendors you like!",log_out:"Log Out",search_placeholder_profile:"Search prescriptions, orders, drugs...",prescriptions:"Prescriptions",orders_profile:"Orders",drugs:"Drugs",all_results:"All",times:"times",bought:"bought",no_search_results:"No results found",profile_try_different_search:"Try a different search term",add_product:"Add Product",bulk_upload:"Bulk Upload",download_report:"Download report",download_csv:"Download CSV",download_excel:"Download Excel",inventory:"Inventory",pharmacy_edit_product:"Edit Product",delete_product:"Delete Product",products_sold:"Products Sold",pharmacy_active_chats:"Active Chats",reviews:"Reviews",products_no_products_yet:"No products yet. Use the buttons above to add or bulk‑upload.",products_edit_product:"Edit Product",product_image:"Product Image",image_url_placeholder:"Image URL (or choose file below)",products_product_description:"Product Description",enter_product_description:"Enter product description",confirm_delete_product:"Are you sure you want to delete this item?",yes_delete:"Yes, Delete",products_delete:"Delete",products_log_out:"Log Out",customer_reviews:"Customer Reviews",detail_no_reviews_yet:"No reviews yet. Be the first to review!",pharmacy_response:"{pharmacyName} Response",detail_message_vendor:"Message Vendor",detail_call_to_order:"Call to Order",detail_your_name:"Your Name",detail_your_review_optional:"Your review... (optional)",detail_back:"Back",detail_page_call_to_order:"Call to Order",detail_get_directions:"Get Directions",detail_category:"Category",detail_add_to_cart:"Add to Cart",detail_page_message_vendor:"Message Vendor",share_product:"Share Product",detail_close:"Close",detail_loading:"Loading…",detail_no_products_found:"No products found.",leave_a_review:"Leave a Review",detail_page_your_name:"Your Name",detail_page_your_review_optional:"Your review... (optional)",submit_review:"Submit Review",submitting:"Submitting…",detail_see_more:"See more",show_less:"Show less",products_in_category:'Products in "{category}"',eta_to_pharmacy:"{time} to {pharmacy}",detail_calculating_eta:"Calculating ETA...",detail_fetching_location:"Fetching location...",shareable_link_copied:"Shareable link copied to clipboard!",copy_this_link:"Copy this link:",please_sign_in_wishlist:"Please sign in to add items to your wishlist",failed_update_wishlist:"Failed to update wishlist. Please try again.",detail_please_sign_in:"Please sign in",detail_product_unavailable:"Product unavailable. Please try again.",failed_add_to_cart:"Failed to add to cart.",reviews_section:"Reviews",detail_page_no_reviews_yet:"No reviews yet. Be the first to review!",helpful:"Helpful",vendor_profile:"Vendor Profile",products_by:"Products by",vendor:"Vendor",of:"of",no_products_found_search:"No products found matching your search.",vendor_no_products_yet:"No products yet.",customers_only_chat:"Only customers can start a chat with a pharmacy.",could_not_start_chat:"Could not start chat thread.",pharmacy_report:"Pharmacy Report",field:"Field",value:"Value",report_pharmacy:"Pharmacy",report_email:"Email",report_address:"Address",report_phone:"Phone",product_name:"Product Name",report_category:"Category",report_stock:"Stock",report_sku:"SKU",report_price:"Price",order_id:"Order ID",report_customer:"Customer",report_status:"Status",report_date:"Date",report_products:"Products",add_to_bookmarks:"Add to bookmarks",remove_from_bookmarks:"Remove from bookmarks",search_by_name_category_sku:"Search by name, category, or SKU...",view_results:"View Results",clear:"Clear",nearby_pharmacies:"Nearby Pharmacies",pharmacies_found_near_you:"{count} found near you",loading_location:"Loading location...",filter_pharmacies:"Filter pharmacies",pharmacies_found_near_you_detailed:"{count} pharmacies found near you",your_location:"Your location",getting_your_location:"Getting your location...",location_access_needed:"Location access needed",allow_location_access_etas:"Please allow location access for accurate ETAs",enable_location_services:"Enable location services to see nearby pharmacies",search_pharmacies:"Search pharmacies...",no_pharmacies_found:"No pharmacies found",map_try_different_search:"Try a different search term",map_name:"Name",map_address:"Address",keyboard_navigation_hint:"Use ↑↓ arrow keys to navigate, Enter to select, Esc to close",distance:"Distance",map_all:"All",within_5km:"Within 5km",within_10km:"Within 10km",within_20km:"Within 20km",you_are_here:"You are here",pharmacy_locations:"Pharmacy Locations",pharmacies_sorted_by_distance:"{count} pharmacies • Sorted by distance",map_pharmacy:"Pharmacy",selected:"Selected",calculating:"Calculating...",closest:"Closest",get_directions:"Get Directions",call_pharmacy:"Call pharmacy",view_products:"View Products",search_results:"Search Results",all_pharmacies:"All Pharmacies",pharmacies_found_count:"{count} found",no_pharmacies_found_search:"No pharmacies found matching your search",no_pharmacies_found_general:"No pharmacies found",try_adjusting_search:"Try adjusting your search terms",try_adjusting_location:"Try adjusting your location or check back later",clear_search:"Clear search",today:"Today",yesterday:"Yesterday",chat_sent:"Sent",chat_delivered:"Delivered",chat_read:"Read",chat_customer:"Customer",chat_pharmacy:"Pharmacy",prescription_created:"A new prescription has been created.",drug_inquiry:"I want to know more about this drug {productName}{priceText}.",chat_call:"Call",call_pharmacy_title:"Call {pharmacy}",no_phone_number:"No phone number",actions:"Actions",create_prescription:"Create Prescription",view_prescription_history:"View Prescription History",load_more_messages:"Load {count} more messages",start_conversation:"Start your conversation",message_placeholder:"Message",attachments_coming_soon:"Attachments coming soon",my_dashboard:"My Dashboard",overview:"Overview",top_products:"Top Products",best_sellers:"Best Sellers",no_sales_data:"No sales data yet",start_selling_message:"Start selling products to see your top performers",units_sold:"{count} units sold",units:"units",total_products:"Total Products",total_orders:"Total Orders",total_revenue:"Total Revenue",active_customers:"Active Customers",this_month:"This Month",avg_order_value:"Avg Order Value",pending_orders:"Pending Orders",awaiting:"Awaiting",low_stock_items:"Low Stock Items",need_restock:"Need Restock",orders_this_month:"Orders This Month",no_comparison:"No comparison",pending_reviews:"Pending Reviews",need_response:"Need Response",recent_reviews:"Recent Reviews",last_24h:"Last 24h",low_stock_alert:"Low Stock Alert",items_need_restocking:"{count} item{plural} need restocking",inventory_tip:"Check your inventory to avoid running out of popular products",recent_messages:"Recent Messages",no_recent_messages:"No recent messages.",no_recent_reviews:"No recent reviews",new_reviews_appear_here:"New customer reviews will appear here",dashboard_view_all:"View All",by_customer:"by {customerName}",needs_response:"Needs Response",view_more_reviews:"View {count} more review{plural}",revenue_analytics:"Revenue Analytics",by_month:"By Month",by_year:"By Year",month_number:"Month {number}",no_revenue_data:"No revenue data available",start_selling_revenue:"Start making sales to see your revenue analytics",best_performing_period:"Best Performing {period}",month_label:"Month",year_label:"Year",sales_trends:"Sales Trends",last_6_months:"Last 6 months",no_sales_trend_data:"No sales trend data.",orders_count:"{count} order{plural}",reviews_management:"Reviews Management",filters_sort:"Filters & Sort",total_reviews:"Total Reviews",responded:"Responded",avg_rating:"Avg Rating",positive_reviews:"Positive (4+ ⭐)",reviews_product:"Product",all_products:"All Products",sort_by:"Sort By",newest_first:"Newest First",oldest_first:"Oldest First",highest_rating:"Highest Rating",lowest_rating:"Lowest Rating",filter_by:"Filter By",all_reviews:"All Reviews",positive_4_stars:"Positive (4+ stars)",negative_1_2_stars:"Negative (1-2 stars)",no_reviews_found:"No reviews found",no_reviews_yet_message:"You don't have any reviews yet. Encourage customers to leave reviews by providing excellent service and follow-up communication!",no_reviews_match_filters:"No reviews match your current filters. Try adjusting your search criteria.",medicine:"Medicine",reviewed_by:"Reviewed by",verified:"Verified",people_found_helpful:"{count} people found this helpful",your_response:"Your Response",cancel_response:"Cancel Response",respond_to_review:"Respond to Review",write_thoughtful_response:"Write a thoughtful response to this review...",submit_response:"Submit Response",response_submitted_success:"Response submitted successfully!",response_submit_failed:"Failed to submit response. Please try again.",reviews_loading_reviews:"Loading your reviews...",loading_please_wait:"Please wait while we fetch your data",my_prescriptions:"My Prescriptions",add_to_calendar:"Add to Calendar",prescriptions_no_prescriptions_found:"No prescriptions found.",prescriptions_see_more_count:"See more ({count})",prescriptions_see_less:"See less",time_to_take_medicine:"Time to take {drugName}",take_medicine:"Take {drugName}",dosage_frequency:"Dosage: {dosage} ({frequency})",my_activity:"My Activity",profile_active_chats:"Active Chats",storefront_preview:"Storefront Preview",profile_inventory:"Inventory",profile_products_sold:"Products Sold",settings_general:"General",settings_appearance:"Appearance",settings_language_region:"Language & Region",settings_privacy_security:"Privacy & Security",settings_accessibility:"Accessibility",swipe_navigation:"Swipe Navigation",data_saver_mode:"Data Saver Mode",read_receipts:"Read Receipts",theme:"Theme",font_size:"Font Size",app_language:"App Language"},yo:{home:"Ile",yo_cart:"Agolo",messages:"Ifiranše",yo_orders:"Awọn ibere",settings:"Eto",notifications:"Iwifun",search:"Wa",back:"Pada",continue:"Tẹsiwaju",yo_save:"Tọju",yo_cancel:"Fagile",yo_delete:"Pa rẹ",yo_edit:"Ṣatunkọ",yo_loading:"N gbe...",profile:"Profaili",message:"Ifiranşe",sent:"Ti fi ranşe",delivered:"Ti gba",read:"Ti ka",type_message:"Kọ ifiranše...",send:"Fi ranše",hello:"Bawo",friend:"Ore",search_placeholder:"Wa oogun, ile oogun",new_arrivals:"Awọn tuntun",yo_view_all:"wo gbogbo",popular_products:"Awọn oogun olokiki",all_new_products:"Gbogbo oogun tuntun",load_more:"Gbe siwaju",new:"Tuntun",yo_close:"Ti",yo_please_sign_in:"Jọwọ wọle",your_pharmacy_location:"Ipo ile oogun rẹ",location_services:"Awọn iṣẹ ipo",yo_calculating_eta:"N ṣe iṣiro akoko...",yo_fetching_location:"N gba ipo...",nearest_pharmacy:"ile oogun to sunmọ",to:"si",welcome_message:"Kaabo si PharmaSeA",find_medicines:"Wa awọn oogun to wa nitosi rẹ",fast_delivery:"Ifijiṣẹ to yara ati to gbẹkẹle",learn_more:"Kọ siwaju si",get_started:"Bẹrẹ",shop_now:"Ra ni bayi",order_now:"Bere ni bayi",browse_catalog:"Wo awọn oogun wa",special_offer:"Ipese Pataki",limited_time:"Ipese akoko die",orders:"Awọn ibere",all:"Gbogbo",pending:"Ti nduro",processing:"N ṣiṣẹ",fulfilled:"Ti pari",cancelled:"Ti fagile",no_orders_yet:"Ko si ibere kankan sibẹ.",order_number:"Ibere #",orders_customer:"Onibara",orders_items:"Awọn nkan",orders_total:"Lapapọ",orders_status:"Ipo",orders_see_more:"Wo siwaju si",orders_see_less:"Wo diẹ kere si",more_items:"siwaju si",reveal_number:"Fi nọmba han",please_sign_in_continue:"Jọwọ wọle lati tẹsiwaju",sign_in_sign_up:"Wọle / Forukọsilẹ",qty:"Iye",my_conversations:`Awọn
Iforọranṣẹ Mi`,search_chats:"Wa awọn iforọranṣẹ",no_conversations_yet:"Ko si iforọranṣẹ kankan sibẹ.",no_messages_yet:"Ko si ifiranṣẹ kankan sibẹ.",cart:"Agolo",your_cart_is_empty:"Agolo rẹ ko ni nkankan.",remove:"Yo kuro",cart_subtotal:"Apapọ kekere",delivery_fee:"Owo ifijiṣẹ",cart_total:"Lapapọ",proceed_to_checkout:"Tẹsiwaju si isanwo",order_summary:"Akopọ ibere",cart_items:"Awọn nkan",delivery_details:"Awọn alaye ifijiṣẹ",delivery_address:"Adiresi ifijiṣẹ",phone_number:"Nọmba foonu",email_optional:"Imeeli (Ti o ba fẹ)",enter_delivery_address:"Tẹ adiresi ifijiṣẹ",enter_phone_number:"Tẹ nọmba foonu",enter_email_address:"Tẹ adiresi imeeli",use_current_location:"Lo ipo oni bayi",continue_to_payment:"Tẹsiwaju si isanwo",payment_method:"Ona isanwo",pay_on_delivery:"San nigba ifijiṣẹ",pay_with_cash_delivery:"San pẹlu owo nigba ti ibere ba de",online_payment:"Isanwo ori ayelujara",pay_with_card:"San pẹlu kaadi, gbigbe owo banki, tabi USSD",pay_with_card_bank_ussd:"San pẹlu kaadi, gbigbe owo banki, tabi USSD",pay_with_cash_on_delivery:"San pẹlu owo nigba ti ibere ba de",use_your_health_insurance:"Lo idaabobo ilera rẹ",pay_with_insurance:"San pẹlu idaabobo",use_health_insurance:"Lo idaabobo ilera rẹ",coming_soon:"O nbọ laipẹ",total_amount:"Iye lapapọ",pay_now:"San ni bayi",place_order:"Gbe ibere kalẹ",decrease_quantity:"Din iye ku",increase_quantity:"Pọ si iye",order_placement_failed:"Gbigbe ibere kalẹ kuna",order_placed_delivery:"A ti gbe ibere kalẹ ni aṣeyọri! O ma san nigba ifijiṣẹ.",payment_successful:"Isanwo aṣeyọri! A ti gbe ibere rẹ kalẹ.",checkout_failed:"Isanwo kuna. Jọwọ gbiyanju lẹẹkansi.",my_profile:"Profaili Mi",pharmacy_profile:"Profaili Ile-oogun",edit_profile:"Ṣatunṣe Profaili",profile_edit:"Ṣatunṣe",profile_save:"Fi pamọ",profile_cancel:"Fagilee",profile_close:"Ti",view:"Wo",open:"Ṣi",name:"Orukọ",phone_number_profile:"Nọmba Foonu",address_profile:"Adiresi",password:"Ọrọ aṣina",items_in_cart:"Awọn nkan ninu agolo",profile_active_chats:"Awọn ibaraẹnisọrọ ti nṣiṣẹ",saved_items:"Awọn nkan ti a fi pamọ",drugs_bought:"Awọn oogun ti a ra",all_drugs_bought:"Gbogbo awọn oogun ti a ra",my_saved_items:"Awọn nkan ti mo fi pamọ",products:"Awọn ọja",vendors:"Awọn olutaja",no_products_saved:"Ko si ọja ti a fi pamọ",start_adding_products:"Bẹrẹ fifi awọn ọja ti o fẹran si!",no_vendors_bookmarked:"Ko si olutaja ti a ṣaami",bookmark_vendors:"Ṣe aami awọn olutaja ti o fẹran!",log_out:"Jade",search_placeholder_profile:"Wa awọn atọrọ, awọn ibere, oogun...",prescriptions:"Awọn atọrọ",orders_profile:"Awọn ibere",drugs:"Awọn oogun",all_results:"Gbogbo",times:"igba",bought:"ti a ra",no_search_results:"Ko si abajade",try_different_search:"Gbiyanju ọrọ wiwa miiran",detail_back:"Pada",detail_call_to_order:"Pe lati gbe ibere",detail_get_directions:"Gba itọsọna",detail_category:"Isọri",detail_add_to_cart:"Fi si agolo",detail_message_vendor:"Firanṣẹ si olutaja",share_product:"Pin ọja",detail_close:"Ti",detail_loading:"Ngbigba...",no_products_found:"Ko si ọja ti a ri.",leave_a_review:"Fi atunyẹwo silẹ",detail_your_name:"Orukọ rẹ",detail_your_review_optional:"Atunyẹwo rẹ... (ti o ba fẹ)",submit_review:"Fi atunyẹwo ranṣẹ",submitting:"Nfiranṣẹ...",see_more:"Wo siwaju si",show_less:"Fi diẹ han",products_in_category:'Awọn ọja ninu "{category}"',eta_to_pharmacy:"{time} si {pharmacy}",calculating_eta:"Nṣiro akoko...",fetching_location:"Ngba ipo...",shareable_link_copied:"A ti daakọ ọna asopọ pinpin si clipboard!",copy_this_link:"Daakọ ọna asopọ yii:",please_sign_in_wishlist:"Jọwọ wọle lati fi awọn nkan si atokọ ifẹ rẹ",failed_update_wishlist:"Kuna lati ṣe imudojuiwọn atokọ ifẹ. Jọwọ gbiyanju lẹẹkansi.",please_sign_in:"Jọwọ wọle",product_unavailable:"Ọja ko si. Jọwọ gbiyanju lẹẹkansi.",failed_add_to_cart:"Kuna lati fi si agolo.",reviews_section:"Awọn atunyẹwo",no_reviews_yet:"Ko si atunyẹwo sibẹ. Jẹ ẹni akọkọ lati ṣe atunyẹwo!",helpful:"To wulo",vendor_profile:"Profaili Olutaja",products_by:"Awọn ọja nipasẹ",vendor:"Olutaja",of:"ninu",no_products_found_search:"Ko si ọja ti a ri ti o baamu wiwa rẹ.",vendor_no_products_yet:"Ko si ọja sibẹ.",customers_only_chat:"Awọn alabara nikan lo le bẹrẹ ibaraẹnisọrọ pẹlu ile-oogun.",could_not_start_chat:"Ko le bẹrẹ okun ibaraẹnisọrọ.",pharmacy_report:"Ijabọ ile-oogun",field:"Aaye",value:"Iye",pharmacy:"Ile-oogun",email:"Imeeli",address:"Adiresi",phone:"Foonu",product_name:"Orukọ ọja",category:"Isọri",stock:"Ipamọ",sku:"SKU",price:"Idiyele",order_id:"ID ibere",vendor_customer:"Alabara",vendor_status:"Ipo",date:"Ọjọ",vendor_products:"Awọn ọja",add_to_bookmarks:"Fi si awọn aami iwe",remove_from_bookmarks:"Yo kuro ninu awọn aami iwe",search_by_name_category_sku:"Wa nipasẹ orukọ, isọri, tabi SKU...",view_results:"Wo awọn abajade",clear:"Nu",nearby_pharmacies:"Awọn Ile-oogun Nitosi",pharmacies_found_near_you:"{count} ti a ri nitosi rẹ",loading_location:"N gba ipo...",filter_pharmacies:"Ṣe ajọ awọn ile-oogun",pharmacies_found_near_you_detailed:"Awọn ile-oogun {count} ti a ri nitosi rẹ",your_location:"Ipo rẹ",getting_your_location:"N gba ipo rẹ...",location_access_needed:"A nilo iwọle si ipo",allow_location_access_etas:"Jọwọ gba iwọle si ipo fun awọn akoko to peye",enable_location_services:"Mu awọn iṣẹ ipo ṣiṣẹ lati ri awọn ile-oogun nitosi",search_pharmacies:"Wa awọn ile-oogun...",no_pharmacies_found:"Ko ri ile-oogun kankan",map_try_different_search:"Gbiyanju ọrọ wiwa miiran",map_name:"Orukọ",map_address:"Adiresi",keyboard_navigation_hint:"Lo awọn bọtini ↑↓ lati lilọ, Enter lati yan, Esc lati ti",distance:"Ijinna",map_all:"Gbogbo",within_5km:"Laarin 5km",within_10km:"Laarin 10km",within_20km:"Laarin 20km",you_are_here:"O wa nibi",pharmacy_locations:"Awọn Ipo Ile-oogun",pharmacies_sorted_by_distance:"Awọn ile-oogun {count} • Ti a to ni ọna ijinna",map_pharmacy:"Ile-oogun",selected:"Ti a yan",calculating:"N ṣe iṣiro...",closest:"Ti o sunmọ julọ",get_directions:"Gba Itọsọna",map_call:"Pe",call_pharmacy:"Pe ile-oogun",view_products:"Wo Awọn Ọja",search_results:"Awọn Abajade Wiwa",all_pharmacies:"Gbogbo Awọn Ile-oogun",pharmacies_found_count:"{count} ti a ri",no_pharmacies_found_search:"Ko ri ile-oogun ti o baamu wiwa rẹ",no_pharmacies_found_general:"Ko ri ile-oogun kankan",try_adjusting_search:"Gbiyanju ṣe atunṣe awọn ọrọ wiwa rẹ",try_adjusting_location:"Gbiyanju ṣe atunṣe ipo rẹ tabi padanu nigbamii",clear_search:"Nu wiwa",today:"Oni",yesterday:"Ana",chat_sent:"Ti fi ranṣẹ",chat_delivered:"Ti gba",chat_read:"Ti ka",chat_customer:"Alabara",chat_pharmacy:"Ile-oogun",prescription_created:"A ti ṣe iwe-aṣẹ oogun tuntun.",drug_inquiry:"Mo fẹ mọ diẹ sii nipa oogun yii {productName}{priceText}.",chat_call:"Pe",call_pharmacy_title:"Pe {pharmacy}",no_phone_number:"Ko si nọmba foonu",actions:"Awọn iṣe",create_prescription:"Ṣe Iwe-aṣẹ Oogun",view_prescription_history:"Wo Itan Iwe-aṣẹ Oogun",load_more_messages:"Gbe awọn ifiranṣẹ {count} sii",start_conversation:"Bẹrẹ ibaraẹnisọrọ rẹ",message_placeholder:"Ifiranṣẹ",attachments_coming_soon:"Awọn aṣopọ n bọ laipe",my_dashboard:"Pátákó Mi",overview:"Akopọ",top_products:"Awọn Ọja Giga",best_sellers:"Awọn Ti O Ta Julọ",no_sales_data:"Ko si data tita sibẹ",start_selling_message:"Bẹrẹ tita awọn ọja lati ri awọn ti o ṣe daradara",units_sold:"Awọn ẹya {count} ti a ta",units:"awọn ẹya",total_products:"Lapapọ Awọn Ọja",total_orders:"Lapapọ Awọn Ibere",total_revenue:"Lapapọ Owo Wiwọle",active_customers:"Awọn Alabara Ti Nṣiṣẹ",this_month:"Oṣu Yii",avg_order_value:"Idiye Ibere Aarin",pending_orders:"Awọn Ibere Ti Nduro",awaiting:"N duro",low_stock_items:"Awọn Ọja Ti Ko To",need_restock:"Nilo Ṣe Ipamọ",orders_this_month:"Awọn Ibere Oṣu Yii",no_comparison:"Ko si afiwe",pending_reviews:"Awọn Atunyẹwo Ti Nduro",need_response:"Nilo Idahun",recent_reviews:"Awọn Atunyẹwo Aipẹ",last_24h:"Wakati 24 sẹhin",low_stock_alert:"Ikilọ Ipamọ Kekere",items_need_restocking:"Awọn nkan {count} nilo atunkọ ipamọ",inventory_tip:"Ṣayẹwo ipamọ rẹ lati yago fun sisọnu awọn ọja olokiki",recent_messages:"Awọn Ifiranṣẹ Aipẹ",no_recent_messages:"Ko si awọn ifiranṣẹ aipẹ.",no_recent_reviews:"Ko si awọn atunyẹwo aipẹ",new_reviews_appear_here:"Awọn atunyẹwo alabara tuntun yoo han nibi",view_all:"Wo Gbogbo",by_customer:"nipasẹ {customerName}",needs_response:"Nilo Idahun",view_more_reviews:"Wo awọn atunyẹwo {count} sii",revenue_analytics:"Itupalẹ Owo Wiwọle",dashboard_total:"Lapapọ",by_month:"Nipasẹ Oṣu",by_year:"Nipasẹ Ọdun",month_number:"Oṣu {number}",no_revenue_data:"Ko si data owo wiwọle",start_selling_revenue:"Bẹrẹ tita lati ri itupalẹ owo wiwọle rẹ",best_performing_period:"Asiko Ti O Ṣe Daradara Julọ {period}",month_label:"Oṣu",year_label:"Ọdun",sales_trends:"Awọn Ilọsiwaju Tita",last_6_months:"Oṣu 6 sẹhin",no_sales_trend_data:"Ko si data ilọsiwaju tita.",orders_count:"Awọn ibere {count}",reviews_management:"Iṣakoso Awọn Atunyẹwo",filters_sort:"Awọn Àṣẹ ati Tito",total_reviews:"Lapapọ Awọn Atunyẹwo",responded:"Ti Dahun",avg_rating:"Iwọn Aarin",positive_reviews:"Rere (4+ ⭐)",product:"Ọja",all_products:"Gbogbo Awọn Ọja",sort_by:"To Nipasẹ",newest_first:"Tuntun Ni Akọkọ",oldest_first:"Atijọ Ni Akọkọ",highest_rating:"Iwọn Giga Julọ",lowest_rating:"Iwọn Kekere Julọ",filter_by:"Àṣẹ Nipasẹ",all_reviews:"Gbogbo Awọn Atunyẹwo",positive_4_stars:"Rere (4+ irawo)",negative_1_2_stars:"Buburu (1-2 irawo)",no_reviews_found:"Ko ri atunyẹwo kankan",no_reviews_yet_message:"O ko ni awọn atunyẹwo sibẹ. Gba awọn alabara niyanju lati fi awọn atunyẹwo silẹ nipa ipese iṣẹ to dara ati ibaraẹnisọrọ atẹle!",no_reviews_match_filters:"Ko si atunyẹwo ti o baamu awọn àṣẹ rẹ lọwọlọwọ. Gbiyanju ṣatunṣe awọn ami wiwa rẹ.",medicine:"Oogun",reviewed_by:"Ti a ṣe atunyẹwo nipasẹ",verified:"Ti a Ṣe Idaniloju",people_found_helpful:"Awọn eniyan {count} ri eyi ni iranlọwọ",your_response:"Idahun Rẹ",cancel_response:"Pa Idahun Rẹ",respond_to_review:"Dahun si Atunyẹwo",write_thoughtful_response:"Kọ idahun ti o ni ero si atunyẹwo yii...",submit_response:"Fi Idahun Ranṣẹ",response_submitted_success:"Idahun ti fi ranṣẹ ni aṣeyọri!",response_submit_failed:"Kuna lati fi idahun ranṣẹ. Jọwọ gbiyanju lẹẹkansi.",loading_reviews:"Ngba awọn atunyẹwo rẹ...",loading_please_wait:"Jọwọ duro nigba ti a n gba data rẹ",my_prescriptions:"Awọn Iwe-aṣẹ Oogun Mi",add_to_calendar:"Fi si Kalenda",prescriptions_no_prescriptions_found:"Ko ri iwe-aṣẹ oogun kankan.",prescriptions_see_more_count:"Wo sii ({count})",prescriptions_see_less:"Wo kere",time_to_take_medicine:"Akoko lati mu {drugName}",take_medicine:"Mu {drugName}",dosage_frequency:"Iwọn: {dosage} ({frequency})",my_activity:"Iṣẹ Mi",profile_active_chats:"Awọn Ibaraẹnisọrọ Ti Nṣiṣẹ",storefront_preview:"Iwoye Ile-itaja",profile_inventory:"Ipamọ",profile_products_sold:"Awọn Ọja Ti A Ta",add_product:"Fi ọja kun",bulk_upload:"Gbigbe ọpọlọpọ",download_report:"Gba ijabọ",download_csv:"Gba CSV",download_excel:"Gba Excel",inventory:"Ibi ipamọ ọja",edit_product:"Ṣatunṣe ọja",delete_product:"Pa ọja rẹ",products_sold:"Awọn ọja ti a ta",active_chats:"Awọn ibaraẹnisọrọ ti nṣiṣẹ",reviews:"Awọn atunyẹwo",products_no_products_yet:"Ko si ọja sibẹsibẹ. Lo awọn bọtini ti o wa loke lati ṣafikun tabi gbé-gbe soke.",products_edit_product:"Ṣatunṣe Ọja",product_image:"Aworan Ọja",image_url_placeholder:"URL aworan (tabi yan faili ti o wa nisalẹ)",products_product_description:"Apejuwe Ọja",enter_product_description:"Tẹ apejuwe ọja sii",confirm_delete_product:"Ṣe o da ọ loju pe o fẹ pa nkan yii rẹ?",customer_reviews:"Awọn Atunyẹwo Alabara",loading_reviews:"N gba awọn atunyẹwo…",no_reviews_yet:"Ko si atunyẹwo sibẹ. Jẹ ki o jẹ ọkọ akoko lati ṣe atunyẹwo!",pharmacy_response:"Idahun {pharmacyName}",detail_message_vendor:"Ranṣẹ si Olutasọja",detail_call_to_order:"Pe lati Bẹẹrẹ",your_name:"Oruko Rẹ",language_region:"Ede & Agbegbe",privacy_security:"Aṣiri & Aabo",accessibility:"Iwọle",swipe_navigation:"Lilọ pẹlu fifọ",data_saver_mode:"Ipo itọju data",read_receipts:"Iwe eriwo kika",theme:"Koko",font_size:"Iwọn lẹta",app_language:"Ede ohun elo"},ha:{home:"Gida",cart:"Kaya",messages:"Saƙonni",orders:"Oda",settings:"Saiti",notifications:"Sanarwa",search:"Nema",back:"Baya",continue:"Ci gaba",save:"Ajiye",cancel:"Soke",delete:"Share",edit:"Gyara",loading:"Ana lodawa...",profile:"Bayanan martaba",add_to_cart:"Saka cikin kaya",buy_now:"Saya yanzu",shopping_price:"Farashi",out_of_stock:"Ba a kantin ba",in_stock:"A wanzu",product_description:"Bayanin kaya",product_unavailable:"Kaya ba ya samuwa. Ka sake gwadawa.",hello:"Sannu",friend:"Aboki",search_placeholder:"Nema magunguna, kantin magani",new_arrivals:"Sababbin abubuwa",view_all:"dubi duka",popular_products:"Shahararrun magunguna",all_new_products:"Dukan sababbin magunguna",load_more:"Dauko kari",new:"Sabon",close:"Rufe",please_sign_in:"Ka shigar da sunan",your_pharmacy_location:"Wurin kantin maganin ku",location_services:"Sabis na wuri",calculating_eta:"Ana lissafa lokaci...",fetching_location:"Ana samun wuri...",nearest_pharmacy:"kantin magani mafi kusa",to:"zuwa",welcome_message:"Barka da zuwa PharmaSeA",find_medicines:"Nemo magunguna a kusa da ku",fast_delivery:"Isar da sauri da aminci",learn_more:"Koyi karin bayani",get_started:"Fara",shop_now:"Sayi yanzu",order_now:"Yi oda yanzu",browse_catalog:"Duba magunguna",special_offer:"Tayin na musamman",limited_time:"Tayin na ɗan lokaci",orders_page_orders:"Oda",orders_all:"Duka",pending:"Ana jira",processing:"Ana aiki",fulfilled:"An gama",cancelled:"An soke",no_orders_yet:"Babu oda tukuna.",order_number:"Oda #",orders_customer:"Abokin ciniki",orders_items:"Abubuwa",orders_total:"Duka",orders_status:"Matsayi",orders_see_more:"Duba karin",orders_see_less:"Duba kadan",more_items:"kari",reveal_number:"Nuna lambar",please_sign_in_continue:"Ka shigar da sunan don ci gaba",sign_in_sign_up:"Shiga / Yi rajista",qty:"Adadi",my_conversations:`Tattaunawa
Na`,search_chats:"Nemo tattaunawa",no_conversations_yet:"Babu tattaunawa tukuna.",no_messages_yet:"Babu saƙonni tukuna.",your_cart_is_empty:"Kayar ku babu komai.",remove:"Cire",subtotal:"Ƙaramin jimla",delivery_fee:"Kuɗin isar da kaya",proceed_to_checkout:"Ci gaba zuwa biyan kuɗi",order_summary:"Taƙaitaccen oda",delivery_details:"Bayanan isar da kaya",delivery_address:"Adireshin isar da kaya",phone_number:"Lambar waya",email_optional:"Imel (Ba dole ba)",enter_delivery_address:"Shigar da adireshin isar da kaya",enter_phone_number:"Shigar da lambar waya",enter_email_address:"Shigar da adireshin imel",use_current_location:"Yi amfani da wurin yanzu",continue_to_payment:"Ci gaba zuwa biyan kuɗi",payment_method:"Hanyar biyan kuɗi",pay_on_delivery:"Biya lokacin isar da kaya",pay_with_cash_delivery:"Biya da kuɗi lokacin da oda ya zo",online_payment:"Biyan kuɗi a yanar gizo",pay_with_card:"Biya da kati, canja wurin banki, ko USSD",pay_with_card_bank_ussd:"Biya da kati, canja wurin banki, ko USSD",pay_with_cash_on_delivery:"Biya da kuɗi lokacin da oda ya zo",use_your_health_insurance:"Yi amfani da inshorar lafiya",pay_with_insurance:"Biya da inshora",use_health_insurance:"Yi amfani da inshorar lafiya",coming_soon:"Yana zuwa nan ba da jimawa ba",total_amount:"Dukkanin adadin",pay_now:"Biya yanzu",place_order:"Yi oda",decrease_quantity:"Rage yawan",increase_quantity:"Ƙara yawan",order_placement_failed:"Yin oda ya kasa",order_placed_delivery:"An yi oda cikin nasara! Za ku biya lokacin isar da kaya.",payment_successful:"Biyan kuɗi ya yi nasara! An yi odar ku.",checkout_failed:"Biyan kuɗi ya kasa. Da fatan za a sake gwadawa.",my_profile:"Bayanin Kaina",pharmacy_profile:"Bayanin Kantin Magani",edit_profile:"Gyara Bayanin",view:"Duba",open:"Buɗe",name:"Suna",phone_number_profile:"Lambar Waya",address_profile:"Adireshi",password:"Kalmar sirri",items_in_cart:"Abubuwa a cikin kaya",profile_active_chats:"Tattaunawa masu aiki",saved_items:"Abubuwa da aka ajiye",drugs_bought:"Magungunan da aka saya",all_drugs_bought:"Dukan magungunan da aka saya",my_saved_items:"Abubuwan da na ajiye",profile_products:"Kayayyaki",vendors:"Masu sayarwa",no_products_saved:"Babu kayayyaki da aka ajiye",start_adding_products:"Fara ƙara kayayyakin da kuke so!",no_vendors_bookmarked:"Babu masu sayarwa da aka yi alamar",bookmark_vendors:"Yi alamar masu sayarwan da kuke so!",log_out:"Fita",search_placeholder_profile:"Nemi takardar likita, oda, magunguna...",prescriptions:"Takardar likita",orders_profile:"Oda",drugs:"Magunguna",all_results:"Duka",times:"lokuta",bought:"da aka saya",no_search_results:"Babu sakamakon",try_different_search:"Gwada kalmar nema daban",general:"Gabaɗaya",appearance:"Bayyanar",language_region:"Harshe da Yanki",privacy_security:"Sirri da Tsaro",accessibility:"Samun dama",app_language:"Harshen app",vendor_profile:"Bayanin Mai sayarwa",products_by:"Kayayyaki da",vendor:"Mai sayarwa",of:"daga",no_products_found_search:"Babu kayayyakin da aka samu da suka dace da binciken ku.",no_products_yet:"Babu kayayyaki tukuna.",customers_only_chat:"Abokan ciniki ne kawai za su iya fara tattaunawa da kantin magani.",could_not_start_chat:"Ba za a iya fara zaren tattaunawa ba.",pharmacy_report:"Rahoton kantin magani",field:"Fili",value:"Kima",pharmacy:"Kantin magani",email:"Imel",address:"Adireshi",phone:"Waya",product_name:"Sunan kaya",category:"Nau'i",stock:"Ajiya",sku:"SKU",vendor_price:"Farashi",order_id:"ID oda",customer:"Abokin ciniki",status:"Matsayi",date:"Kwanan wata",vendor_products:"Kayayyaki",add_to_bookmarks:"Saka a cikin alamomi",remove_from_bookmarks:"Cire daga alamomi",search_by_name_category_sku:"Nema da suna, nau'i, ko SKU...",view_results:"Duba sakamakon",clear:"Share",nearby_pharmacies:"Kantunan Magani Kusa",pharmacies_found_near_you:"{count} an samu kusa da kai",loading_location:"Ana samun wuri...",filter_pharmacies:"Tace kantunan magani",pharmacies_found_near_you_detailed:"Kantunan magani {count} an samu kusa da kai",your_location:"Wurin ka",getting_your_location:"Ana samun wurin ka...",location_access_needed:"Ana bukatar samun dama ga wuri",allow_location_access_etas:"Ka ba da izinin samun wuri don daidaitaccen lokaci",enable_location_services:"Kunna sabis na wuri don ganin kantunan magani kusa",search_pharmacies:"Nemi kantunan magani...",no_pharmacies_found:"Ba a sami kantunan magani ba",keyboard_navigation_hint:"Yi amfani da ↑↓ maballin tuƙi, Enter don zaɓa, Esc don rufewa",distance:"Nisa",within_5km:"A cikin 5km",within_10km:"A cikin 10km",within_20km:"A cikin 20km",you_are_here:"Kana nan",pharmacy_locations:"Wuraren Kantunan Magani",pharmacies_sorted_by_distance:"Kantunan magani {count} • An jera bisa nisa",selected:"An zaɓa",calculating:"Ana lissafi...",closest:"Mafi kusa",get_directions:"Samu Jagora",call:"Kira",call_pharmacy:"Kira kantin magani",view_products:"Duba Kayayyaki",search_results:"Sakamakon Bincike",all_pharmacies:"Dukan Kantunan Magani",pharmacies_found_count:"{count} an samu",no_pharmacies_found_search:"Ba a sami kantunan magani da suka dace da binciken ku ba",no_pharmacies_found_general:"Ba a sami kantunan magani ba",try_adjusting_search:"Gwada gyara kalmomin binciken ku",try_adjusting_location:"Gwada gyara wurin ku ko ku sake dubawa daga baya",clear_search:"Share bincike",today:"Yau",yesterday:"Jiya",sent:"An aiko",delivered:"An kai",read:"An karanta",prescription_created:"An ƙirƙiri sabon takardar magani.",drug_inquiry:"Ina son sanin ƙarin game da wannan magani {productName}{priceText}.",call_pharmacy_title:"Kira {pharmacy}",no_phone_number:"Babu lambar waya",actions:"Ayyuka",create_prescription:"Ƙirƙiri Takardar Magani",view_prescription_history:"Duba Tarihin Takardar Magani",load_more_messages:"Ɗauko ƙarin saƙonnin {count}",start_conversation:"Fara tattaunawar ku",message_placeholder:"Saƙo",attachments_coming_soon:"Abubuwan haɗi suna zuwa nan ba da jimawa ba",my_dashboard:"Dashboard Na",overview:"Taƙaitaccen Bayani",top_products:"Manyan Kayayyaki",best_sellers:"Mafi Sayarwa",no_sales_data:"Babu bayanan tallace-tallace har yanzu",start_selling_message:"Fara sayar da kayayyaki don ganin mafi kyawun ku",units_sold:"Raka'o {count} da aka sayar",units:"raka'o",total_products:"Jimillar Kayayyaki",total_orders:"Jimillar Oda",total_revenue:"Jimillar Kudaden Shiga",active_customers:"Abokan Ciniki Masu Aiki",this_month:"Wannan Wata",avg_order_value:"Matsakaicin Darajar Oda",pending_orders:"Oda Da Ake Jira",awaiting:"Ana jira",low_stock_items:"Kayayyakin Da Suka Rage",need_restock:"Bukata Sake Cikawa",orders_this_month:"Oda Na Wannan Wata",no_comparison:"Babu kwatance",pending_reviews:"Sharhi Da Ake Jira",need_response:"Bukatar Amsa",recent_reviews:"Sharhi Na Baya-bayan Nan",last_24h:"Sa'o 24 da suka gabata",low_stock_alert:"Sanarwar Karancin Kaya",items_need_restocking:"Kaya {count} na bukatar sake cikawa",inventory_tip:"Duba ajiyar ku don guje wa rashin shahararru kayayyaki",recent_messages:"Saƙonnin Baya-bayan Nan",no_recent_messages:"Babu saƙonnin baya-bayan nan.",no_recent_reviews:"Babu sharhi na baya-bayan nan",new_reviews_appear_here:"Sabbin sharhin abokan ciniki za su bayyana a nan",by_customer:"ta {customerName}",needs_response:"Bukatar Amsa",view_more_reviews:"Duba ƙarin sharhi {count}",revenue_analytics:"Nazarin Kudaden Shiga",by_month:"Ta Wata",by_year:"Ta Shekara",month_number:"Wata {number}",no_revenue_data:"Babu bayanan kudaden shiga",start_selling_revenue:"Fara sayarwa don ganin nazarin kudaden shiga",best_performing_period:"Lokaci Mafi Kyau {period}",month_label:"Wata",year_label:"Shekara",sales_trends:"Hanyoyin Tallace-tallace",last_6_months:"Watannin 6 da suka gabata",no_sales_trend_data:"Babu bayanan hanyoyin tallace-tallace.",orders_count:"Oda {count}",reviews_management:"Gudanar da Sharhi",filters_sort:"Tacewa da Jeri",total_reviews:"Jimillar Sharhi",responded:"An Amsa",avg_rating:"Matsakaicin Daraja",positive_reviews:"Mai Kyau (4+ ⭐)",product:"Kaya",all_products:"Dukan Kayayyaki",sort_by:"Jera Ta",newest_first:"Sabo Da Farko",oldest_first:"Tsoho Da Farko",highest_rating:"Mafi Girman Daraja",lowest_rating:"Mafi Ƙarancin Daraja",filter_by:"Tacewa Ta",all_reviews:"Dukan Sharhi",positive_4_stars:"Mai Kyau (4+ tauraro)",negative_1_2_stars:"Marar Kyau (1-2 tauraro)",no_reviews_found:"Ba a sami sharhi ba",no_reviews_yet_message:"Har yanzu ba ku da sharhi. Ƙarfafa abokan ciniki su bar sharhi ta hanyar samar da kyakkyawan sabis da bin diddigin sadarwa!",no_reviews_match_filters:"Babu sharhi da ya dace da taushirinku na yanzu. Gwada daidaita ka'idodin binciken ku.",medicine:"Magani",reviewed_by:"An yi sharhi ta",verified:"An Tabbatar",people_found_helpful:"Mutane {count} sun sami wannan yana da amfani",your_response:"Amsarku",cancel_response:"Soke Amsa",respond_to_review:"Amsa ga Sharhi",write_thoughtful_response:"Rubuta amsa mai tunani ga wannan sharhi...",submit_response:"Tura Amsa",response_submitted_success:"An tura amsa cikin nasara!",response_submit_failed:"An kasa tura amsa. Da fatan za a sake gwadawa.",loading_reviews:"Ana ɗaukar sharhinku...",loading_please_wait:"Da fatan ku jira yayin da muke ɗaukar bayananku",my_prescriptions:"Takardun Magani Na",add_to_calendar:"Saka a Kalanda",no_prescriptions_found:"Ba a sami takardar magani ba.",see_more_count:"Duba ƙari ({count})",see_less:"Duba kaɗan",time_to_take_medicine:"Lokaci ya yi na shan {drugName}",take_medicine:"Sha {drugName}",dosage_frequency:"Adadin: {dosage} ({frequency})",my_activity:"Ayyukan Na",profile_sections_active_chats:"Tattaunawa Masu Aiki",storefront_preview:"Kallaren Kantin",inventory:"Ajiya",products_sold:"Kayayyaki Da Aka Sayar",no_products_yet:"Har yanzu babu kayayyaki. Yi amfani da maballin da ke sama don ƙara ko loda da yawa.",edit_product:"Gyara Kayayyaki",product_image:"Hoton Kayayyaki",image_url_placeholder:"URL hoto (ko zaɓi fayil da ke ƙasa)",product_description:"Bayanin Kayayyaki",enter_product_description:"Shigar da bayanin kayayyaki",confirm_delete_product:"Kana da tabbas kana son share wannan abu?",customer_reviews:"Sharhin Abokan Ciniki",loading_reviews:"Ana loda sharhi…",no_reviews_yet:"Har yanzu babu sharhi. Ka zama na farko da ya ba da sharhi!",pharmacy_response:"Amsar {pharmacyName}",message_vendor:"Aika Saƙo zuwa Dillali",call_to_order:"Kira don Yin Oda",your_name:"Sunan Ka",swipe_navigation:"Kewayawa ta Shafawa",data_saver_mode:"Yanayin Adana Bayanai",read_receipts:"Takardar Karatu",theme:"Jigo",font_size:"Girman Rubutu",app_language:"Harshen Manhaja"},ig:{home:"Ụlọ",cart:"Ngwa ahịa",messages:"Ozi",orders:"Ịtụ",settings:"Nhazi",notifications:"Ọkwa",search:"Chọọ",back:"Laghachi azụ",continue:"Gaa n'ihu",save:"Chekwaa",cancel:"Kagbuo",delete:"Hichapụ",edit:"Dezie",loading:"Na-ebu...",profile:"Profaili",add_to_cart:"Tinye na ngwa ahịa",buy_now:"Zụọ ugbu a",price:"Ọnụ ahịa",out_of_stock:"Agwụla",in_stock:"Dị n'ụlọ ahịa",product_description:"Nkọwa ngwaahịa",product_unavailable:"Ngwaahịa adịghị. Biko nwaa ọzọ.",hello:"Ndewo",friend:"Enyi",search_placeholder:"Chọọ ọgwụ, ụlọ ọgwụ",new_arrivals:"Ndị ọhụrụ",view_all:"lee niile",popular_products:"Ọgwụ ndị ama ama",all_new_products:"Ọgwụ ọhụrụ niile",load_more:"Buo karịa",new:"Ọhụrụ",close:"Mechie",please_sign_in:"Biko banye",your_pharmacy_location:"Ọnọdụ ụlọ ọgwụ gị",location_services:"Ọrụ ọnọdụ",calculating_eta:"Na-agbako oge...",fetching_location:"Na-eweta ọnọdụ...",nearest_pharmacy:"ụlọ ọgwụ kacha nso",to:"gaa",welcome_message:"Nnọọ na PharmaSeA",find_medicines:"Chọta ọgwụ ndị dị gị nso",fast_delivery:"Nnyefe ọsọ ọsọ na ntụkwasị obi",learn_more:"Mụtakwuo ihe",get_started:"Malite",shop_now:"Zụọ ugbu a",order_now:"Nye ọtụtụ ugbu a",browse_catalog:"Lelee ọgwụ ndị anyị nwere",special_offer:"Onyinye pụrụ iche",limited_time:"Onyinye nwa oge",orders:"Ịtụ",all:"Niile",pending:"Na-echere",processing:"Na-arụ ọrụ",fulfilled:"Emezula",cancelled:"Akagbuola",no_orders_yet:"Enwebeghị ịtụ ọ bụla.",order_number:"Ịtụ #",customer:"Onye ahịa",items:"Ihe ndị",total:"Mkpokọta",status:"Ọnọdụ",see_more:"Hụkwuo",see_less:"Hụ nke nta",more_items:"karịa",reveal_number:"Gosi nọmba",please_sign_in_continue:"Biko banye ịga n'ihu",sign_in_sign_up:"Banye / Debanye aha",qty:"Ọnụọgụgụ",my_conversations:`Mkparịta ụka
M`,search_chats:"Chọọ mkparịta ụka",no_conversations_yet:"Enwebeghị mkparịta ụka ọ bụla.",no_messages_yet:"Enwebeghị ozi ọ bụla.",your_cart_is_empty:"Ngwa ahịa gị adịghị.",remove:"Wepụ",subtotal:"Obere mkpokọta",delivery_fee:"Ego nnyefe",proceed_to_checkout:"Gaa n'ịkwụ ụgwọ",order_summary:"Nchịkọta ịtụ",delivery_details:"Nkọwa nnyefe",delivery_address:"Adress nnyefe",phone_number:"Nọmba ekwentị",email_optional:"Ịmeelụ (Nhọrọ)",enter_delivery_address:"Tinye adreesị nnyefe",enter_phone_number:"Tinye nọmba ekwentị",enter_email_address:"Tinye adreesị ịmeelụ",use_current_location:"Jiri ebe dị ugbu a",continue_to_payment:"Gaa n'ịkwụ ụgwọ",payment_method:"Ụzọ ịkwụ ụgwọ",pay_on_delivery:"Kwụọ mgbe nnyefe",pay_with_cash_delivery:"Kwụọ ego mgbe ịtụ ruru",online_payment:"Ịkwụ ụgwọ n'ịntanetị",pay_with_card:"Kwụọ na kaadị, mbufe ego banki, ma ọ bụ USSD",pay_with_card_bank_ussd:"Kwụọ na kaadị, mbufe ego banki, ma ọ bụ USSD",pay_with_cash_on_delivery:"Kwụọ ego mgbe ịtụ ruru",use_your_health_insurance:"Jiri mkpuchi ahụ ike gị",pay_with_insurance:"Kwụọ na mkpuchi",use_health_insurance:"Jiri mkpuchi ahụ ike gị",coming_soon:"Na-abịa n'oge na-adịghị anya",total_amount:"Mkpokọta ego",pay_now:"Kwụọ ugbu a",place_order:"Nye ịtụ",decrease_quantity:"Belata ọnụọgụgụ",increase_quantity:"Mee ka ọnụọgụgụ mụbaa",order_placement_failed:"Inyefe ịtụ dara",order_placed_delivery:"Enyela ịtụ nke ọma! Ị ga-akwụ ụgwọ mgbe nnyefe.",payment_successful:"Ịkwụ ụgwọ gara nke ọma! Enyela ịtụ gị.",checkout_failed:"Ịkwụ ụgwọ dara. Biko nwaa ọzọ.",my_profile:"Profaịlụ M",pharmacy_profile:"Profaịlụ Ụlọ Ọgwụ",edit_profile:"Dezie Profaịlụ",view:"Lee",open:"Meghe",phone_number_profile:"Nọmba Ekwentị",address_profile:"Adrees",password:"Okwu nzuzo",items_in_cart:"Ihe ndị dị na ngwa ahịa",active_chats:"Mkparịta ụka na-arụ ọrụ",saved_items:"Ihe ndị echekwala",drugs_bought:"Ọgwụ ndị azụtala",all_drugs_bought:"Ọgwụ niile ezutala",my_saved_items:"Ihe ndị m chekwara",products:"Ngwaahịa",vendors:"Ndị na-ere",no_products_saved:"Enweghị ngwaahịa echekwara",start_adding_products:"Malite itinye ngwaahịa ị hụrụ n'anya!",no_vendors_bookmarked:"Enweghị ndị na-ere akara akara",bookmark_vendors:"Kaa ndị na-ere ị hụrụ n'anya akara!",search_placeholder_profile:"Chọọ ọgwụ, ịtụ, ọgwụ...",prescriptions:"Ọgwụ",orders_profile:"Ịtụ",drugs:"Ọgwụ",all_results:"Niile",times:"ugboro",bought:"azụtara",no_search_results:"Enweghị nsonaazụ",app_language:"Asụsụ ngwa",vendor_profile:"Profaịlụ Onye na-ere",products_by:"Ngwaahịa site na",vendor:"Onye na-ere",of:"n'ime",no_products_found_search:"Achọtaghị ngwaahịa ọ bụla dakọtara na nchọgharị gị.",no_products_yet:"Enwebeghị ngwaahịa ọ bụla.",customers_only_chat:"Ọ bụ naanị ndị ahịa nwere ike ịmalite mkparịta ụka na ụlọ ọgwụ.",could_not_start_chat:"Enweghị ike ịmalite mkparịta ụka.",pharmacy_report:"Akụkọ ụlọ ọgwụ",field:"Ogige",value:"Uru",pharmacy:"Ụlọ ọgwụ",email:"Email",address:"Adrees",phone:"Ekwentị",product_name:"Aha ngwaahịa",category:"Ụdị",stock:"Nchekwa",sku:"SKU",order_id:"ID nyere",search_by_name_category_sku:"Chọọ site na aha, ụdị, ma ọ bụ SKU...",view_results:"Lee nsonaazụ",clear:"Hichapụ",nearby_pharmacies:"Ụlọ Ọgwụ Ndị Dị Nso",pharmacies_found_near_you:"{count} achọtara nso gị",loading_location:"Na-ebu ebe...",filter_pharmacies:"Họrọ ụlọ ọgwụ",pharmacies_found_near_you_detailed:"Ụlọ ọgwụ {count} achọtara nso gị",your_location:"Ebe gị",getting_your_location:"Na-enweta ebe gị...",location_access_needed:"A chọrọ ohere ebe",allow_location_access_etas:"Biko kwere ka a nweta ebe maka oge ziri ezi",enable_location_services:"Mee ka ọrụ ebe rụọ ọrụ ka ị hụ ụlọ ọgwụ ndị dị nso",search_pharmacies:"Chọọ ụlọ ọgwụ...",no_pharmacies_found:"Achọtaghị ụlọ ọgwụ ọ bụla",keyboard_navigation_hint:"Jiri ↑↓ mkpịsị aka ịga ebe, Enter ịhọrọ, Esc imechi",distance:"Anya",within_5km:"N'ime 5km",within_10km:"N'ime 10km",within_20km:"N'ime 20km",you_are_here:"Ị nọ ebe a",pharmacy_locations:"Ebe Ụlọ Ọgwụ Dị",pharmacies_sorted_by_distance:"Ụlọ ọgwụ {count} • Edobere site na anya",selected:"Ahọrọla",calculating:"Na-agbako...",closest:"Nke kacha nso",get_directions:"Nweta Nduzi",call_pharmacy:"Kpọọ ụlọ ọgwụ",view_products:"Lee Ngwaahịa",search_results:"Nsonaazụ Ọchụchọ",all_pharmacies:"Ụlọ Ọgwụ Niile",pharmacies_found_count:"{count} achọtara",no_pharmacies_found_search:"Achọtaghị ụlọ ọgwụ ọ bụla dakọtara na ọchụchọ gị",no_pharmacies_found_general:"Achọtaghị ụlọ ọgwụ ọ bụla",try_adjusting_search:"Gbalịa imezigharị okwu ọchụchọ gị",try_adjusting_location:"Gbalịa imezigharị ebe gị ma ọ bụ lọghachi azụ mgbe ọzọ",clear_search:"Hichapụ ọchụchọ",today:"Taa",yesterday:"Ụnyaahụ",sent:"Ezigala",delivered:"Enyela",read:"Agụla",prescription_created:"Emepụtala akwụkwọ ọgwụ ọhụrụ.",drug_inquiry:"Achọrọ m ịmata karịa gbasara ọgwụ a {productName}{priceText}.",call_pharmacy_title:"Kpọọ {pharmacy}",no_phone_number:"Enweghị nọmba ekwentị",actions:"Omume",create_prescription:"Mepụta Akwụkwọ Ọgwụ",view_prescription_history:"Lee Akụkọ Akwụkwọ Ọgwụ",load_more_messages:"Bulie ozi {count} ọzọ",start_conversation:"Malite mkparịta ụka gị",message_placeholder:"Ozi",attachments_coming_soon:"Ihe ndị agbakwunyere na-abịa ngwa ngwa",my_dashboard:"Dashboard M",overview:"Nchikọta",top_products:"Ngwaahịa Kachasị Elu",best_sellers:"Ndị Na-ere Kacha Mma",no_sales_data:"Enwebeghị data ire ere",start_selling_message:"Malite ire ngwaahịa iji hụ ndị kacha arụ ọrụ",units_sold:"Nkeji {count} erere",units:"nkeji",total_products:"Mkpokọta Ngwaahịa",total_orders:"Mkpokọta Ọrder",total_revenue:"Mkpokọta Ego Mbata",active_customers:"Ndị Ahịa Na-arụ Ọrụ",this_month:"Ọnwa A",avg_order_value:"Uru Ọrder Nkezi",pending_orders:"Ọrder Na-echere",awaiting:"Na-echere",low_stock_items:"Ngwaahịa Dị Ntakịrị",need_restock:"Kwesịrị Itinyeghachi",orders_this_month:"Ọrder Ọnwa A",no_comparison:"Enweghị ntụnyere",pending_reviews:"Nyocha Na-echere",need_response:"Kwesịrị Nzaghachi",recent_reviews:"Nyocha Nso Nso A",last_24h:"Awa 24 gara aga",low_stock_alert:"Ọkwa Ngwaahịa Dị Ntakịrị",items_need_restocking:"Ihe {count} kwesịrị itinyeghachi",inventory_tip:"Lelee ngwaahịa gị iji zere ịgwụ ngwaahịa ndị a ma ama",recent_messages:"Ozi Nso Nso A",no_recent_messages:"Enweghị ozi nso nso a.",no_recent_reviews:"Enweghị nyocha nso nso a",new_reviews_appear_here:"Nyocha ndị ahịa ọhụrụ ga-apụta ebe a",by_customer:"site n'aka {customerName}",needs_response:"Kwesịrị Nzaghachi",view_more_reviews:"Lee nyocha {count} ọzọ",revenue_analytics:"Nyocha Ego Mbata",by_month:"Site n'Ọnwa",by_year:"Site n'Afọ",month_number:"Ọnwa {number}",no_revenue_data:"Enweghị data ego mbata",start_selling_revenue:"Malite ire iji hụ nyocha ego mbata gị",best_performing_period:"Oge Kacha Mma {period}",month_label:"Ọnwa",year_label:"Afọ",sales_trends:"Ụzọ Ire Ahịa",last_6_months:"Ọnwa 6 gara aga",no_sales_trend_data:"Enweghị data ụzọ ire ahịa.",orders_count:"Ọrder {count}",reviews_management:"Nlekọta Nyocha",filters_sort:"Nzacha na Nhazi",total_reviews:"Mkpokọta Nyocha",responded:"Azaghachila",avg_rating:"Nkezi Ogo",positive_reviews:"Nke Ọma (4+ ⭐)",product:"Ngwaahịa",all_products:"Ngwaahịa Niile",sort_by:"Hazie Site Na",newest_first:"Ọhụrụ Mbụ",oldest_first:"Ochie Mbụ",highest_rating:"Ogo Kacha Elu",lowest_rating:"Ogo Kacha Ala",filter_by:"Zọpụta Site Na",all_reviews:"Nyocha Niile",positive_4_stars:"Nke Ọma (4+ kpakpando)",negative_1_2_stars:"Nke Ọjọọ (1-2 kpakpando)",no_reviews_found:"Achọtaghị nyocha ọ bụla",no_reviews_yet_message:"I nwebeghị nyocha ọ bụla. Gbaa ndị ahịa ume ka ha hapụ nyocha site n'inye ọrụ magburu onwe ya na nkwurịta okwu na-esote!",no_reviews_match_filters:"Enweghị nyocha dabara na nzacha gị ugbu a. Gbalịa ime mgbanwe na njirisi ọchụchọ gị.",medicine:"Ọgwụ",reviewed_by:"Nyochara site na",verified:"Enyochala",people_found_helpful:"Ndị mmadụ {count} chọpụtara na nke a bara uru",your_response:"Nzaghachi Gị",cancel_response:"Kagbuo Nzaghachi",respond_to_review:"Zaghachi na Nyocha",write_thoughtful_response:"Dee nzaghachi nwere uche na nyocha a...",submit_response:"Ziga Nzaghachi",response_submitted_success:"E zigara nzaghachi nke ọma!",response_submit_failed:"E nweghị ike izipu nzaghachi. Biko nwaghachi ọzọ.",loading_reviews:"Na-ebu nyocha gị...",loading_please_wait:"Biko chere ka anyị na-eweta data gị",my_prescriptions:"Akwụkwọ Ọgwụ M",add_to_calendar:"Tinye na Kalenda",no_prescriptions_found:"Achọtaghị akwụkwọ ọgwụ ọ bụla.",see_more_count:"Lee ọzọ ({count})",see_less:"Lee ntakịrị",time_to_take_medicine:"Oge ịṅụ {drugName}",take_medicine:"Ṅụọ {drugName}",dosage_frequency:"Ọnụọgụgụ: {dosage} ({frequency})",my_activity:"Ọrụ M",active_chats:"Mkparịta Ụka Na-arụ Ọrụ",storefront_preview:"Nlele Ụlọ Ahịa",inventory:"Nchekwa Ngwaahịa",products_sold:"Ngwaahịa E Rere",no_products_yet:"Enwebeghị ngwaahịa. Jiri bọtịnụ ndị dị n'elu tinye ma ọ bụ bulite ọtụtụ.",edit_product:"Dezie Ngwaahịa",product_image:"Foto Ngwaahịa",image_url_placeholder:"URL foto (ma ọ bụ họrọ faịlụ n'okpuru)",product_description:"Nkọwa Ngwaahịa",enter_product_description:"Tinye nkọwa ngwaahịa",confirm_delete_product:"Ị ji n'ezie chọọ ihichapụ ihe a?",customer_reviews:"Nyocha Ndị Ahịa",loading_reviews:"Na-ebu nyocha…",no_reviews_yet:"Enwebeghị nyocha. Bụrụ onye mbụ nyochaa!",pharmacy_response:"Nzaghachi {pharmacyName}",message_vendor:"Zigara Onye Na-ere Ahịa Ozi",call_to_order:"Kpọọ Maka Ịzọ",your_name:"Aha Gị",swipe_navigation:"Ịgagharị Site na Ifufe",data_saver_mode:"Ọnọdụ Nchekwa Data",read_receipts:"Akwụkwọ Nnata Ọgụgụ",theme:"Isiokwu",font_size:"Nha Mkpụrụedemede",app_language:"Asụsụ Ngwa"},fr:{home:"Accueil",cart:"Panier",messages:"Messages",orders:"Commandes",settings:"Paramètres",notifications:"Notifications",search:"Rechercher",back:"Retour",continue:"Continuer",save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",loading:"Chargement...",profile:"Profil",add_to_cart:"Ajouter au panier",buy_now:"Acheter maintenant",price:"Prix",out_of_stock:"Rupture de stock",in_stock:"En stock",product_description:"Description du produit",product_unavailable:"Produit indisponible. Veuillez réessayer.",hello:"Bonjour",friend:"Ami",search_placeholder:"Rechercher médicaments, pharmacies",new_arrivals:"Nouveautés",view_all:"voir tout",popular_products:"Produits populaires",all_new_products:"Tous les nouveaux produits",load_more:"Charger plus",new:"Nouveau",close:"Fermer",please_sign_in:"Veuillez vous connecter",your_pharmacy_location:"Emplacement de votre pharmacie",location_services:"Services de localisation",calculating_eta:"Calcul du temps...",fetching_location:"Obtention de la localisation...",nearest_pharmacy:"pharmacie la plus proche",to:"vers",welcome_message:"Bienvenue à PharmaSeA",find_medicines:"Trouvez des médicaments près de chez vous",fast_delivery:"Livraison rapide et fiable",learn_more:"En savoir plus",get_started:"Commencer",shop_now:"Acheter maintenant",order_now:"Commander maintenant",browse_catalog:"Parcourir le catalogue",special_offer:"Offre spéciale",limited_time:"Offre à durée limitée",orders:"Commandes",all:"Tout",pending:"En attente",processing:"En cours",fulfilled:"Livré",cancelled:"Annulé",no_orders_yet:"Aucune commande pour le moment.",order_number:"Commande #",customer:"Client",items:"Articles",total:"Total",status:"Statut",see_more:"Voir plus",see_less:"Voir moins",more_items:"de plus",reveal_number:"Révéler le numéro",please_sign_in_continue:"Veuillez vous connecter pour continuer",sign_in_sign_up:"Se connecter / S'inscrire",qty:"Qté",my_conversations:`Mes
Conversations`,search_chats:"Rechercher des conversations",no_conversations_yet:"Aucune conversation pour le moment.",no_messages_yet:"Aucun message pour le moment.",cart:"Panier",your_cart_is_empty:"Votre panier est vide.",remove:"Supprimer",subtotal:"Sous-total",delivery_fee:"Frais de livraison",total:"Total",proceed_to_checkout:"Procéder au paiement",order_summary:"Résumé de commande",items:"Articles",delivery_details:"Détails de livraison",delivery_address:"Adresse de livraison",phone_number:"Numéro de téléphone",email_optional:"E-mail (Facultatif)",enter_delivery_address:"Entrer l'adresse de livraison",enter_phone_number:"Entrer le numéro de téléphone",enter_email_address:"Entrer l'adresse e-mail",use_current_location:"Utiliser la localisation actuelle",continue_to_payment:"Continuer vers le paiement",payment_method:"Mode de paiement",pay_on_delivery:"Payer à la livraison",pay_with_cash_delivery:"Payer en espèces à la livraison",online_payment:"Paiement en ligne",pay_with_card:"Payer par carte, virement bancaire, ou USSD",pay_with_card_bank_ussd:"Payer par carte, virement bancaire, ou USSD",pay_with_cash_on_delivery:"Payer en espèces à la livraison",use_your_health_insurance:"Utiliser votre assurance santé",pay_with_insurance:"Payer avec l'assurance",use_health_insurance:"Utiliser votre assurance santé",coming_soon:"Bientôt disponible",total_amount:"Montant total",pay_now:"Payer maintenant",place_order:"Passer commande",decrease_quantity:"Diminuer la quantité",increase_quantity:"Augmenter la quantité",order_placement_failed:"Échec de la commande",order_placed_delivery:"Commande passée avec succès! Vous paierez à la livraison.",payment_successful:"Paiement réussi! Votre commande a été passée.",checkout_failed:"Paiement échoué. Veuillez réessayer.",my_profile:"Mon Profil",pharmacy_profile:"Profil de la Pharmacie",edit_profile:"Modifier le Profil",edit:"Modifier",save:"Enregistrer",cancel:"Annuler",close:"Fermer",view:"Voir",open:"Ouvrir",name:"Nom",phone_number_profile:"Numéro de Téléphone",address_profile:"Adresse",password:"Mot de passe",items_in_cart:"Articles dans le panier",active_chats:"Conversations actives",saved_items:"Articles sauvegardés",drugs_bought:"Médicaments achetés",all_drugs_bought:"Tous les médicaments achetés",my_saved_items:"Mes articles sauvegardés",products:"Produits",vendors:"Vendeurs",no_products_saved:"Aucun produit sauvegardé",start_adding_products:"Commencez à ajouter des produits que vous aimez!",no_vendors_bookmarked:"Aucun vendeur mis en signet",bookmark_vendors:"Mettez en signet les vendeurs que vous aimez!",log_out:"Déconnexion",search_placeholder_profile:"Rechercher prescriptions, commandes, médicaments...",prescriptions:"Prescriptions",orders_profile:"Commandes",drugs:"Médicaments",all_results:"Tous",times:"fois",bought:"acheté",no_search_results:"Aucun résultat trouvé",try_different_search:"Essayez un terme de recherche différent",general:"Général",appearance:"Apparence",language_region:"Langue et Région",privacy_security:"Confidentialité et Sécurité",accessibility:"Accessibilité",app_language:"Langue de l'application",vendor_profile:"Profil du Vendeur",products_by:"Produits par",vendor:"Vendeur",of:"sur",no_products_found_search:"Aucun produit trouvé correspondant à votre recherche.",no_products_yet:"Aucun produit pour le moment.",customers_only_chat:"Seuls les clients peuvent entamer une conversation avec une pharmacie.",could_not_start_chat:"Impossible de démarrer le fil de discussion.",pharmacy_report:"Rapport de pharmacie",field:"Champ",value:"Valeur",pharmacy:"Pharmacie",email:"Email",address:"Adresse",phone:"Téléphone",product_name:"Nom du produit",category:"Catégorie",stock:"Stock",sku:"SKU",price:"Prix",order_id:"ID commande",customer:"Client",status:"Statut",date:"Date",products:"Produits",add_to_bookmarks:"Ajouter aux favoris",remove_from_bookmarks:"Supprimer des favoris",search_by_name_category_sku:"Rechercher par nom, catégorie ou SKU...",view_results:"Voir les résultats",clear:"Effacer",nearby_pharmacies:"Pharmacies à Proximité",pharmacies_found_near_you:"{count} trouvées près de vous",loading_location:"Chargement de la localisation...",filter_pharmacies:"Filtrer les pharmacies",pharmacies_found_near_you_detailed:"{count} pharmacies trouvées près de vous",your_location:"Votre localisation",getting_your_location:"Obtention de votre localisation...",location_access_needed:"Accès à la localisation nécessaire",allow_location_access_etas:"Veuillez autoriser l'accès à la localisation pour des horaires précis",enable_location_services:"Activez les services de localisation pour voir les pharmacies à proximité",search_pharmacies:"Rechercher des pharmacies...",no_pharmacies_found:"Aucune pharmacie trouvée",try_different_search:"Essayez un terme de recherche différent",name:"Nom",address:"Adresse",keyboard_navigation_hint:"Utilisez ↑↓ pour naviguer, Entrée pour sélectionner, Échap pour fermer",distance:"Distance",all:"Tout",within_5km:"Dans les 5km",within_10km:"Dans les 10km",within_20km:"Dans les 20km",you_are_here:"Vous êtes ici",pharmacy_locations:"Emplacements des Pharmacies",pharmacies_sorted_by_distance:"{count} pharmacies • Triées par distance",pharmacy:"Pharmacie",selected:"Sélectionné",calculating:"Calcul en cours...",closest:"Le plus proche",get_directions:"Obtenir un Itinéraire",call:"Appeler",call_pharmacy:"Appeler la pharmacie",view_products:"Voir les Produits",search_results:"Résultats de Recherche",all_pharmacies:"Toutes les Pharmacies",pharmacies_found_count:"{count} trouvées",no_pharmacies_found_search:"Aucune pharmacie trouvée correspondant à votre recherche",no_pharmacies_found_general:"Aucune pharmacie trouvée",try_adjusting_search:"Essayez d'ajuster vos termes de recherche",try_adjusting_location:"Essayez d'ajuster votre localisation ou revenez plus tard",clear_search:"Effacer la recherche",today:"Aujourd'hui",yesterday:"Hier",sent:"Envoyé",delivered:"Livré",read:"Lu",customer:"Client",pharmacy:"Pharmacie",prescription_created:"Une nouvelle ordonnance a été créée.",drug_inquiry:"Je souhaiterais en savoir plus sur ce médicament {productName}{priceText}.",call:"Appeler",call_pharmacy_title:"Appeler {pharmacy}",no_phone_number:"Pas de numéro de téléphone",actions:"Actions",create_prescription:"Créer une Ordonnance",view_prescription_history:"Voir l'Historique des Ordonnances",load_more_messages:"Charger {count} messages de plus",start_conversation:"Commencez votre conversation",message_placeholder:"Message",attachments_coming_soon:"Pièces jointes bientôt disponibles",my_dashboard:"Mon Tableau de Bord",overview:"Aperçu",top_products:"Produits Populaires",best_sellers:"Meilleures Ventes",no_sales_data:"Aucune donnée de vente pour le moment",start_selling_message:"Commencez à vendre des produits pour voir vos meilleures performances",units_sold:"{count} unités vendues",units:"unités",total_products:"Total Produits",total_orders:"Total Commandes",total_revenue:"Chiffre d'Affaires Total",active_customers:"Clients Actifs",this_month:"Ce Mois",avg_order_value:"Valeur Moyenne Commande",pending_orders:"Commandes En Attente",awaiting:"En attente",low_stock_items:"Articles En Rupture",need_restock:"À Réapprovisionner",orders_this_month:"Commandes Ce Mois",no_comparison:"Pas de comparaison",pending_reviews:"Avis En Attente",need_response:"Nécessitent Réponse",recent_reviews:"Avis Récents",last_24h:"Dernières 24h",low_stock_alert:"Alerte Stock Faible",items_need_restocking:"{count} article{plural} nécessitent un réapprovisionnement",inventory_tip:"Vérifiez votre inventaire pour éviter les ruptures de produits populaires",recent_messages:"Messages Récents",no_recent_messages:"Aucun message récent.",no_recent_reviews:"Aucun avis récent",new_reviews_appear_here:"Les nouveaux avis clients apparaîtront ici",view_all:"Voir Tout",by_customer:"par {customerName}",needs_response:"Nécessitent Réponse",view_more_reviews:"Voir {count} avis de plus",revenue_analytics:"Analyse des Revenus",total:"Total",by_month:"Par Mois",by_year:"Par Année",month_number:"Mois {number}",no_revenue_data:"Aucune donnée de revenus disponible",start_selling_revenue:"Commencez à vendre pour voir vos analyses de revenus",best_performing_period:"Meilleure Période {period}",month_label:"Mois",year_label:"Année",sales_trends:"Tendances des Ventes",last_6_months:"6 derniers mois",no_sales_trend_data:"Aucune donnée de tendance des ventes.",orders_count:"{count} commande{plural}",reviews_management:"Gestion des Avis",filters_sort:"Filtres et Tri",total_reviews:"Total des Avis",responded:"Répondu",avg_rating:"Note Moyenne",positive_reviews:"Positifs (4+ ⭐)",product:"Produit",all_products:"Tous les Produits",sort_by:"Trier par",newest_first:"Plus Récents d'Abord",oldest_first:"Plus Anciens d'Abord",highest_rating:"Note la Plus Haute",lowest_rating:"Note la Plus Basse",filter_by:"Filtrer par",all_reviews:"Tous les Avis",positive_4_stars:"Positifs (4+ étoiles)",negative_1_2_stars:"Négatifs (1-2 étoiles)",no_reviews_found:"Aucun avis trouvé",no_reviews_yet_message:"Vous n'avez pas encore d'avis. Encouragez les clients à laisser des avis en fournissant un excellent service et une communication de suivi !",no_reviews_match_filters:"Aucun avis ne correspond à vos filtres actuels. Essayez d'ajuster vos critères de recherche.",medicine:"Médicament",reviewed_by:"Avis par",verified:"Vérifié",people_found_helpful:"{count} personnes ont trouvé cela utile",your_response:"Votre Réponse",cancel_response:"Annuler la Réponse",respond_to_review:"Répondre à l'Avis",write_thoughtful_response:"Rédigez une réponse réfléchie à cet avis...",submit_response:"Envoyer la Réponse",response_submitted_success:"Réponse envoyée avec succès !",response_submit_failed:"Échec de l'envoi de la réponse. Veuillez réessayer.",loading_reviews:"Chargement de vos avis...",loading_please_wait:"Veuillez patienter pendant que nous récupérons vos données",my_prescriptions:"Mes Ordonnances",add_to_calendar:"Ajouter au Calendrier",no_prescriptions_found:"Aucune ordonnance trouvée.",see_more_count:"Voir plus ({count})",see_less:"Voir moins",time_to_take_medicine:"Il est temps de prendre {drugName}",take_medicine:"Prendre {drugName}",dosage_frequency:"Dosage: {dosage} ({frequency})",my_activity:"Mon Activité",active_chats:"Chats Actifs",storefront_preview:"Aperçu de la Vitrine",inventory:"Inventaire",products_sold:"Produits Vendus",no_products_yet:"Pas encore de produits. Utilisez les boutons ci-dessus pour ajouter ou télécharger en masse.",edit_product:"Modifier le Produit",product_image:"Image du Produit",image_url_placeholder:"URL de l'image (ou choisissez un fichier ci-dessous)",product_description:"Description du Produit",enter_product_description:"Entrez la description du produit",confirm_delete_product:"Êtes-vous sûr de vouloir supprimer cet élément ?",yes_delete:"Oui, Supprimer",log_out:"Se Déconnecter",customer_reviews:"Avis Clients",loading_reviews:"Chargement des avis…",no_reviews_yet:"Pas encore d'avis. Soyez le premier à donner votre avis !",pharmacy_response:"Réponse de {pharmacyName}",message_vendor:"Contacter le Vendeur",call_to_order:"Appeler pour Commander",your_name:"Votre Nom",your_review_optional:"Votre avis... (optionnel)",general:"Général",appearance:"Apparence",language_region:"Langue et Région",privacy_security:"Confidentialité et Sécurité",accessibility:"Accessibilité",swipe_navigation:"Navigation par Balayage",data_saver_mode:"Mode Économie de Données",read_receipts:"Accusés de Lecture",theme:"Thème",font_size:"Taille de Police",app_language:"Langue de l'Application"}},Ds=()=>{const{getSetting:t}=wy(),e=t(Mr.LANGUAGE)||"en";return{t:R.useMemo(()=>(n,s=n,a={})=>{const i=QT[e]?.[n]||QT.en?.[n]||s;return!i||typeof i!="string"?i:i.replace(/\{(\w+)\}/g,(o,l)=>a&&Object.prototype.hasOwnProperty.call(a,l)?String(a[l]):`{${l}}`)},[e]),currentLanguage:e}},Ule=({children:t})=>{const{t:e,currentLanguage:r}=Ds();return c.jsx(Vle.Provider,{value:{t:e,currentLanguage:r},children:t})},zle=({user:t,profile:e,location:r,navigate:n,etaInfo:s,closestPharmacy:a,vendors:i,userCoords:o,t:l})=>mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] w-full bg-white dark:bg-gray-900 border-b dark:border-gray-700 flex-shrink-0 px-2",children:c.jsx("div",{className:"w-full mx-auto pt-8 pb-4",children:c.jsx("div",{className:"pt-4 pb-2 w-full",children:c.jsxs("div",{className:"w-full mx-auto px-0",children:[c.jsxs("div",{className:"flex justify-between items-center w-full h-[14px] md:h-[14px] lg:h-[20px]",children:[c.jsxs("div",{className:"flex flex-col justify-center",children:[c.jsxs("div",{className:"text-[17px] md:text-[26px] lg:text-[20px] font-regular font-poppins text-gray-900 dark:text-white",children:[l("hello","Hello"),t?`, ${t.displayName?.split(" ")[0]||l("friend","Friend")}`:""]}),c.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 text-[10px] md:text-[12px] lg:text-[14px] font-light font-poppins truncate max-w-xs md:max-w-md lg:max-w-lg",title:r,children:r})]}),e?.role==="customer"?c.jsxs("button",{onClick:()=>n("/pharmacy-map"),className:"flex flex-col justify-center items-end hover:bg-blue-50 transition-colors rounded-lg p-2 -m-2 group",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(WT,{className:"h-4 w-4 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5 text-sky-500"}),c.jsx(FV,{className:"h-4 w-4 md:h-3 md:w-3 lg:h-4 lg:w-4 text-sky-500 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-300 animate-pulse"})]}),c.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-light text-right leading-tight mt-1.5 group-hover:text-blue-600 transition-colors",children:s&&a?`${s.formatted} ${l("to","to")} ${i[a.vendorId]?.name||l("nearest_pharmacy","nearest pharmacy")}`:o?l("calculating_eta","Calculating ETA..."):l("fetching_location","Fetching location...")})]}):c.jsxs("div",{className:"flex flex-col justify-center items-end",children:[c.jsx("div",{className:"flex items-center gap-1",children:c.jsx(WT,{className:"h-3 w-3 md:h-5 md:w-5 lg:h-6 lg:w-6 mb-0.5 mt-0.5 text-sky-500"})}),c.jsx("span",{className:"text-[10px] md:text-[12px] lg:text-[14px] font-poppins font-thin text-right leading-tight mt-1.5 text-gray-800",children:e?.role==="pharmacy"?l("your_pharmacy_location","Your pharmacy location"):l("location_services","Location services")})]})]}),c.jsx("div",{className:"w-full"})]})})})}),document.body);function Ck(){const[t,e]=R.useState([]),[r,n]=R.useState([]),[s,a]=R.useState({}),[i,o]=R.useState([]),[l,u]=R.useState(!1),[d,p]=R.useState(-1),[g,m]=R.useState(null),[x,y]=R.useState(!1),[b,S]=R.useState(""),{user:P,profile:T}=Vn(),{t:O}=Ds(),W=Jn(),{userCoords:Y,location:L}=rg(),[A,N]=R.useState(null),[D,j]=R.useState(null),F=R.useRef(null),[M,Z]=R.useState(!1),[ue,pe]=R.useState([]),fe=R.useRef(null),[te,H]=R.useState(0),ie=R.useRef([]),K=ye=>Ae=>{ie.current[ye]=Ae||null},[I,z]=R.useState(1),X=R.useMemo(()=>{let ye=t;const Ae=b.trim().toLowerCase();Ae&&g?.products&&Array.isArray(g.products)&&(ye=g.products);let Be=ye;return selectedCategory&&selectedCategory!=="All"&&(Be=ye.filter(Oe=>{const pt=Oe.category||"";return selectedCategory==="Over-the-counter"?pt.toLowerCase().includes("over"):selectedCategory==="Controlled"?pt.toLowerCase().includes("control"):pt===selectedCategory})),Ae?Be.filter(Oe=>{const pt=(Oe.name||"").toLowerCase(),nt=(Oe.category||"").toLowerCase(),Lt=Array.isArray(Oe.tags)?Oe.tags.join(" ").toLowerCase():"",Ct=Oe.vendorId?s[Oe.vendorId]||{}:{},Nt=(Ct.name||"").toLowerCase(),_t=(Ct.location||"").toLowerCase(),ot=[Oe.price,Oe.mrp,Oe.cost,Oe.listPrice].map(st=>st==null?"":String(st)).join(" ").toLowerCase(),Bt=pt.includes(Ae)||nt.includes(Ae)||Lt.includes(Ae)||Nt.includes(Ae)||_t.includes(Ae)||ot.includes(Ae),Ot=Ae.replace(/[^0-9.]/g,""),ft=Ot&&(ot.includes(Ot)||Oe.price&&String(Oe.price).includes(Ot));return Bt||!!ft}):Be},[t,b,selectedCategory,s,g]),J=R.useMemo(()=>{const ye=b.trim().toLowerCase();return ye?g?.pharmacies&&Array.isArray(g.pharmacies)?g.pharmacies.slice(0,6):i.filter(Ae=>{const Be=(Ae.name||Ae.displayName||"").toLowerCase(),Oe=(Ae.address||Ae.city||Ae.location||"").toLowerCase();return Be.includes(ye)||Oe.includes(ye)}).slice(0,6):[]},[i,b,g]);R.useEffect(()=>RS(e),[]),R.useEffect(()=>LS(n,12),[]),R.useEffect(()=>{async function ye(){if(!Y)return;let Ae=i;if(Ae.length===0&&(Ae=await O5(),!Ae||Ae.length===0))return;const Be=Mle(Ae,Y,"driving");Be?(N(Be.pharmacy),j(Be.eta)):(N(null),j(null))}ye()},[Y,i]),R.useEffect(()=>{if(!F.current)return;let ye,Ae;const Be=()=>{Z(!0),clearTimeout(Ae),Ae=setTimeout(()=>Z(!1),2e3)},Oe=F.current;return Oe.addEventListener("scroll",Be),ye=setInterval(()=>{!M&&Oe&&(Oe.scrollBy({left:120,behavior:"smooth"}),Oe.scrollLeft+Oe.offsetWidth>=Oe.scrollWidth-5&&Oe.scrollTo({left:0,behavior:"smooth"}))},2500),()=>{clearInterval(ye),Oe.removeEventListener("scroll",Be),Ae&&clearTimeout(Ae)}},[M,X.length]),R.useEffect(()=>{async function ye(){const Ae=Array.from(new Set(t.map(Oe=>Oe.vendorId).filter(Boolean))),Be={};await Promise.all(Ae.map(async Oe=>{try{const pt=await Pa(ir(ct,"pharmacies",Oe));if(pt.exists()){const nt=pt.data()||{};Be[Oe]={name:nt.name||"Pharmacy",location:nt.address||nt.city||nt.location||"",coords:nt.coordinates||null}}}catch{}})),a(Be)}t.length&&ye()},[t]),R.useEffect(()=>{let ye=!0;return(async()=>{try{const Ae=await O5();if(!ye)return;o(Array.isArray(Ae)?Ae:[])}catch{}})(),()=>{ye=!1}},[]),R.useEffect(()=>{const ye=b.trim();if(!ye){m(null),y(!1);return}const Ae=new AbortController,Be=setTimeout(async()=>{y(!0);try{const Oe=await fetch(`/.netlify/functions/search?q=${encodeURIComponent(ye)}`,{signal:Ae.signal,headers:{Accept:"application/json"}});if(!Oe.ok)throw new Error("server search failed");const pt=await Oe.json();m(pt||null)}catch{m(null)}finally{y(!1)}},300);return()=>{Ae.abort(),clearTimeout(Be)}},[b]),R.useEffect(()=>{const ye=Dn(tr(ct,"infoCards"),Ae=>{pe(Ae.docs.map(Be=>({id:Be.id,...Be.data()})))});return()=>ye()},[]);const se=R.useMemo(()=>[...X].filter(ye=>ye.stock===void 0||ye.stock>0).sort((ye,Ae)=>(Ae.viewCount||0)+(Ae.sold||0)-((ye.viewCount||0)+(ye.sold||0))),[X]),le=R.useMemo(()=>[...t].filter(ye=>ye.createdAt).sort((ye,Ae)=>(Ae.createdAt?.seconds||0)-(ye.createdAt?.seconds||0)).slice(0,12),[t]);R.useMemo(()=>[...r],[r]);const ve=30,xe=Math.max(1,Math.ceil(se.length/ve)),Ee=se.slice(0,I*ve);R.useEffect(()=>z(1),[se.length]);const ke=ye=>{if(!ye)return ye;if(ye.startsWith("t:")){const Be=ye.substring(2);return O(Be,ye)}const Ae=ye.match(/^\{(.+)\}$/);return Ae?O(Ae[1],ye):ye},oe=ye=>{if(!ye)return"";const Ae=String(ye).trim();return/^(https?:)?\/\//i.test(Ae)||/^mailto:/i.test(Ae)||/^tel:/i.test(Ae)||Ae.startsWith("/")?Ae:`https://${Ae}`},Fe=ye=>ye?/^(https?:)?\/\//i.test(ye)||/^mailto:/i.test(ye)||/^tel:/i.test(ye):!1,Pe=async ye=>{W(`/product/${ye}`),e(Ae=>Ae.map(Be=>Be.id===ye?{...Be,viewCount:(Be.viewCount||0)+1}:Be));try{const{doc:Ae,updateDoc:Be,increment:Oe}=await Yd(async()=>{const{doc:pt,updateDoc:nt,increment:Lt}=await Promise.resolve().then(()=>EM);return{doc:pt,updateDoc:nt,increment:Lt}},void 0);await Be(Ae(ct,"products",ye),{viewCount:Oe(1)})}catch{}};R.useEffect(()=>{const ye=fe.current;if(!ye)return;let Ae=0;const Be=()=>{cancelAnimationFrame(Ae),Ae=requestAnimationFrame(()=>{const Oe=ye.scrollLeft+ye.clientWidth/2;let pt=0,nt=1/0;ie.current.forEach((Lt,Ct)=>{if(!Lt)return;const Nt=Lt.getBoundingClientRect(),_t=ye.getBoundingClientRect(),ot=Nt.left-_t.left+Nt.width/2+ye.scrollLeft,Bt=Math.abs(ot-Oe);Bt<nt&&(nt=Bt,pt=Ct)}),H(pt)})};return ye.addEventListener("scroll",Be,{passive:!0}),Be(),()=>{ye.removeEventListener("scroll",Be),cancelAnimationFrame(Ae)}},[ue.length]),R.useEffect(()=>{const ye=fe.current;if(!ye||ie.current.length===0||window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)return;let Ae=!1,Be;const Oe=()=>{Ae=!0,clearTimeout(Be),Be=setTimeout(()=>{Ae=!1},1800)};ye.addEventListener("pointerdown",Oe),ye.addEventListener("wheel",Oe,{passive:!0}),ye.addEventListener("touchstart",Oe,{passive:!0});const pt=setInterval(()=>{if(Ae)return;const nt=(te+1)%ie.current.length,Lt=ie.current[nt];if(Lt&&ye){const Ct=Lt.offsetLeft,Nt=Math.max(0,Math.round(Ct-(ye.clientWidth-Lt.clientWidth)/2));ye.scrollTo({left:Nt,behavior:"smooth"})}},3e3);return()=>{clearInterval(pt),ye.removeEventListener("pointerdown",Oe),ye.removeEventListener("wheel",Oe),ye.removeEventListener("touchstart",Oe),clearTimeout(Be)}},[te,ue.length]),P&&P.role;const ne={Prescription:"PrescriptionDrugs.svg","Over-the-counter":"Over-the-counter Icon.svg",Syrup:"Syrup.svg",Therapeutic:"Therapeutic.svg",Controlled:"ControlledSubstances.svg","Target System":"TargetSystem.svg"};return t.length?c.jsxs(c.Fragment,{children:[c.jsx(zle,{user:P,profile:T,location:L,navigate:W,etaInfo:D,closestPharmacy:A,vendors:s,userCoords:Y,t:O}),c.jsx("div",{className:"min-h-screen w-full px-0 pb-20 pt-32 bg-white dark:bg-gray-900",children:c.jsxs("div",{className:"flex-1 overflow-y-auto w-full mx-auto flex flex-col pb-28 px-0",children:[c.jsxs("div",{className:"flex items-center gap-3 border-b border-zinc-300 dark:border-gray-600 dark:border-zinc-600 pb-2",children:[c.jsx(jh,{className:"h-5 w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-zinc-400 dark:text-zinc-500"}),c.jsx("input",{value:b,onChange:ye=>{S(ye.target.value),u(!0),p(-1)},onKeyDown:ye=>{if(!(!l||J.length===0))switch(ye.key){case"ArrowDown":ye.preventDefault(),p(Ae=>Ae<J.length-1?Ae+1:0);break;case"ArrowUp":ye.preventDefault(),p(Ae=>Ae>0?Ae-1:J.length-1);break;case"Enter":if(ye.preventDefault(),d>=0&&d<J.length){const Ae=J[d];S(Ae.name||Ae.displayName||""),u(!1);const Be=Ae.id||Ae.vendorId;Be&&W(`/vendor/${Be}`)}break;case"Escape":u(!1),p(-1);break}},onBlur:()=>{setTimeout(()=>{u(!1),p(-1)},200)},placeholder:O("search_placeholder","Search drugs, pharmacies"),className:"w-full outline-none bg-transparent text-gray-900 dark:text-white placeholder:text-[12px] md:placeholder:text-[14px] lg:placeholder:text-[16px] placeholder:text-[#888888] dark:placeholder:text-[#aaaaaa] placeholder:font-light"})]}),l&&b.trim().length>0&&J.length>0&&c.jsxs("div",{className:"mt-2 left-0 right-0 md:left-6 md:right-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg divide-y dark:divide-gray-700 max-h-56 overflow-auto animate-fade-in",children:[J.map((ye,Ae)=>c.jsx("button",{onClick:()=>{S(ye.name||ye.displayName||""),u(!1);const Be=ye.id||ye.vendorId;if(Be)try{W(`/vendor/${Be}`)}catch{window.location.href=`/vendor/${Be}`}},onKeyDown:Be=>{if(Be.key==="Enter"||Be.key===" "){Be.preventDefault();const Oe=ye.id||ye.vendorId;Oe&&W(`/vendor/${Oe}`)}},className:`w-full text-left px-4 py-3 focus:outline-none transition-all duration-200 animate-fadeInUp border-b border-gray-100 last:border-b-0 ${Ae===d?"bg-blue-100 border-blue-200":"hover:bg-zinc-50 focus:bg-zinc-100"}`,style:{animationDelay:`${Ae*.05}s`},role:"option",tabIndex:0,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-100 flex-shrink-0",children:c.jsxs("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:b.trim()&&(ye.name||ye.displayName||"").toLowerCase().includes(b.toLowerCase())?c.jsx("span",{children:(ye.name||ye.displayName||"").split(new RegExp(`(${b})`,"gi")).map((Be,Oe)=>Be.toLowerCase()===b.toLowerCase()?c.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:Be},Oe):Be)}):ye.name||ye.displayName}),c.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",children:b.trim()&&(ye.address||ye.city||ye.location||"").toLowerCase().includes(b.toLowerCase())?c.jsx("span",{children:(ye.address||ye.city||ye.location||"").split(new RegExp(`(${b})`,"gi")).map((Be,Oe)=>Be.toLowerCase()===b.toLowerCase()?c.jsx("span",{className:"bg-yellow-200 px-1 rounded",children:Be},Oe):Be)}):ye.address||ye.city||ye.location||""})]}),c.jsx("div",{className:"text-xs text-blue-600 font-medium flex-shrink-0",children:"Pharmacy"})]})},ye.id||ye.vendorId||ye.name)),J.length>0&&c.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 text-center bg-gray-50 border-t animate-fade-in",children:"Use ↑↓ arrow keys to navigate, Enter to select, Esc to close"})]}),c.jsx("div",{className:"mt-3 mb-2 w-full overflow-x-auto scrollbar-hide",children:c.jsx("div",{className:"flex gap-3 min-w-max",children:["All","Prescription","Over-the-counter","Syrup","Therapeutic","Controlled","Target System"].map((ye,Ae)=>{const Be=ne[ye],Oe=selectedCategory===ye;return c.jsx("button",{className:`flex items-center px-4 py-2 md:px-6 md:py-2.5 lg:px-8 lg:py-3 rounded-full text-[9px] md:text-[12px] lg:text-[14px] font-poppins font-light whitespace-nowrap border transition-all duration-200 btn-interactive animate-fadeInUp ${Oe?"bg-sky-100 dark:bg-sky-900 border-sky-400 dark:border-gray-600 dark:border-sky-500 text-sky-700 dark:text-sky-300 shadow-md scale-105":"bg-zinc-100 dark:bg-gray-700 text-zinc-700 dark:text-zinc-300 border-zinc-200 dark:border-gray-600 hover:bg-sky-50 dark:hover:bg-sky-800 hover:border-sky-300 dark:border-gray-600 dark:hover:border-sky-500 hover:shadow-sm"}`,style:{animationDelay:`${Ae*.1}s`},onClick:()=>setSelectedCategory(ye),children:Be?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:`/${encodeURIComponent(Be)}`,alt:`${ye} icon`,className:`h-4 w-4 md:h-5 md:w-5 mr-2 object-contain flex-shrink-0 transition-transform duration-200 dark:invert dark:brightness-0 dark:contrast-100 ${Oe?"scale-110":""}`}),c.jsx("span",{className:"truncate",children:ye})]}):c.jsx("span",{className:"truncate",children:ye})},ye)})})}),ue.length>0&&c.jsx("div",{className:"w-full mt-6 mb-4 overflow-x-auto scrollbar-hide snap-x snap-mandatory scroll-smooth",ref:fe,role:"region","aria-label":"Announcements",style:{height:140},children:c.jsx("div",{className:"flex gap-4 md:gap-6 min-w-max h-full",children:ue.map((ye,Ae)=>{const Be=ye.bgColor||"#3BA3FF",Oe=ye.headerColor||"#ffffff",pt=ye.previewColor||(ye.headerColor?ye.headerColor+"cc":"#ffffffcc"),nt=ye.linkColor||ye.linkTextColor||"#ffffff",Lt=ye.headerFontSize||20,Ct=ye.previewFontSize||13,Nt=ye.linkTextFontSize||ye.linkFontSize||13;return c.jsxs("div",{ref:K(Ae),className:"relative flex-shrink-0 snap-center rounded-2xl overflow-hidden",style:{width:"90vw",maxWidth:700,minWidth:260,height:"100%",background:Be,position:"relative"},children:[ye.fullImage&&c.jsx("img",{src:ye.fullImage,alt:ye.header||"Info",className:"w-full h-full object-cover",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}}),ye.image&&!ye.fullImage&&c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pointer-events-none",children:c.jsx("img",{src:ye.image,alt:"",className:"object-cover",style:{height:"100%",maxWidth:"100%",borderRadius:"0 16px 16px 0"}})}),c.jsx("div",{className:"absolute inset-y-0 right-0",style:{width:"55%",background:"linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 60%, rgba(0,0,0,0.10) 100%)",pointerEvents:"none"}}),c.jsx("div",{className:"relative z-10 h-full flex items-center",children:c.jsxs("div",{className:"px-4 md:px-6 py-5 min-w-0 max-w-[65%] md:max-w-[60%] lg:max-w-[60%]",children:[c.jsx("div",{style:{color:Oe,fontSize:Lt+"px",lineHeight:1,fontWeight:300,letterSpacing:"-0.02em"},children:ke(ye.header)||"—"}),ye.preview&&c.jsx("div",{style:{marginTop:8,color:pt,fontSize:Ct+"px",lineHeight:1.2},children:ke(ye.preview)}),ye.link&&ye.linkText&&(()=>{const _t=oe(ye.link),ot=Fe(_t);return c.jsx("a",{href:_t,onClick:Bt=>{if(!ot){Bt.preventDefault();try{W(_t)}catch{window.location.href=_t}}},...ot?{target:"_blank",rel:"noopener noreferrer"}:{},style:{display:"inline-block",marginTop:12,textDecoration:"underline",color:nt,fontSize:Nt+"px",fontWeight:500},children:ke(ye.linkText)})})()]})})]},ye.id)})})}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins",children:O("new_arrivals","New Arrivals")}),c.jsx("button",{className:"text-[13px] md:text-[15px] lg:text-[17px] font-normal font-poppins text-sky-600",onClick:()=>W("/new-arrivals"),children:O("view_all","view all")})]}),c.jsx("div",{ref:F,className:"w-full overflow-x-auto scrollbar-hide cursor-grab active:cursor-grabbing",style:{overflowX:"auto"},onMouseDown:ye=>{const Ae=F.current;if(!Ae)return;let Be=ye.pageX-Ae.offsetLeft,Oe=Ae.scrollLeft;function pt(Lt){Ae.scrollLeft=Oe-(Lt.pageX-Ae.offsetLeft-Be)}function nt(){window.removeEventListener("mousemove",pt),window.removeEventListener("mouseup",nt)}window.addEventListener("mousemove",pt),window.addEventListener("mouseup",nt)},children:c.jsx("div",{className:"flex gap-3 md:gap-4 lg:gap-6 min-w-max pb-2",children:le.map(ye=>c.jsxs("div",{className:"relative",children:[c.jsx(Ek,{product:ye,onOpen:()=>Pe(ye.id),onAdd:()=>P?R1(P.uid,ye.id,1):alert(O("please_sign_in","Please sign in")),cardWidth:"110px",cardHeight:"128px",nameSize:"11px",nameWeight:"medium",nameTracking:"-0.5px",priceSize:"9px",priceColor:"#BDBDBD",priceWeight:"medium",addColor:"#36A5FF",addSize:"9px"}),c.jsx("span",{className:"absolute top-1 left-1 bg-sky-500 text-white text-[9px] font-semibold px-2 py-0.5 rounded-full shadow-sm select-none pointer-events-none",children:O("new","New")})]},ye.id||ye.sku))})})]}),c.jsxs("div",{className:"mt-10",children:[c.jsx("div",{className:"text-[15px] md:text-[18px] lg:text-[22px] font-medium font-poppins mb-3",children:O("popular_products","Popular Products")}),c.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 lg:gap-8",children:Ee.map(ye=>c.jsx("div",{className:"flex justify-center relative",children:c.jsx(Ek,{product:ye,onOpen:()=>Pe(ye.id),onAdd:()=>P?R1(P.uid,ye.id,1):alert("Please sign in"),cardWidth:"128px",cardHeight:"120px",nameSize:"12px",nameWeight:"semi-bold",nameTracking:"-0.5px",nameLineHeight:"-1.1",priceSize:"11px",priceColor:"#BDBDBD",priceWeight:"medium",priceLineHeight:"1.1",addColor:"#36A5FF",addSize:"9px",borderRadius:"10px"},ye.id||ye.sku)},(ye.id||ye.sku)+"-wrapper"))}),xe>1&&I<xe&&c.jsx("div",{className:"flex items-center justify-center gap-4 mt-4",children:c.jsx("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>z(ye=>Math.min(xe,ye+1)),"aria-label":O("load_more","Load more")+" "+O("popular_products","popular products"),children:O("load_more","Load more")})})]})]})})]}):c.jsxs("div",{className:"px-4 md:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"md:hidden",children:c.jsx(Dle,{})}),c.jsx("div",{className:"hidden md:block",children:c.jsx(Ole,{})})]})}function d4({open:t,onClose:e,children:r}){const[n,s]=R.useState(!1),[a,i]=R.useState(!1);return R.useEffect(()=>{t?(i(!0),setTimeout(()=>s(!0),10)):(s(!1),setTimeout(()=>i(!1),300))},[t]),R.useEffect(()=>{if(!t)return;const o=l=>{(l.key==="Escape"||l.key==="Esc")&&typeof e=="function"&&e()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e]),a?c.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-4 transition-all duration-300 ${n?"bg-black/30 dark:bg-white/10":"bg-black/0"}`,onClick:()=>{typeof e=="function"&&e()},children:c.jsxs("div",{className:`bg-white dark:bg-gray-800 text-black dark:text-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative max-h-[90vh] overflow-y-auto border transition-all duration-300 transform ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{borderWidth:1,borderColor:"#36A5FF"},onClick:o=>o.stopPropagation(),children:[c.jsx("button",{type:"button",onClick:()=>{typeof e=="function"&&e()},className:"absolute top-3 right-3 text-zinc-400 dark:text-white hover:text-zinc-700 dark:hover:text-white text-xl font-bold focus:outline-none transition-all duration-200 hover:scale-110 hover:bg-zinc-100 dark:hover:bg-gray-700 rounded-full w-8 h-8 flex items-center justify-center","aria-label":"Close",children:"×"}),c.jsx("div",{className:"animate-fadeInUp",children:r})]})}):null}const JT=["pending","processing","fulfilled","cancelled"],$le=({title:t,t:e})=>mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full mx-auto",children:c.jsx("h1",{className:"mt-8 text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins text-gray-900 dark:text-white",children:e("orders","Orders")})})}),document.body);function $V(){const{user:t,profile:e}=Vn(),{t:r}=Ds(),[n,s]=R.useState([]),[a,i]=R.useState("all"),[o,l]=R.useState({}),[u,d]=R.useState({}),[p,g]=R.useState(null),[m,x]=R.useState([]),y=Jn(),b=hl(),[S,P]=R.useState(null),[T,O]=R.useState(5),W=e?.role==="pharmacy",Y=R.useMemo(()=>{if(!n||n.length===0)return{totalRevenue:0,pendingCount:0,topMonth:null};const le=n.reduce((ke,oe)=>ke+Number(oe.total||0),0),ve=n.reduce((ke,oe)=>ke+((oe.status||"pending")==="pending"?1:0),0),xe=n.reduce((ke,oe)=>{let Fe=null;const Pe=oe.createdAt?.toDate?.();if(Pe instanceof Date&&!Number.isNaN(Pe.getTime()))Fe=Pe;else if(oe.createdAt){const ye=new Date(oe.createdAt);Number.isNaN(ye.getTime())||(Fe=ye)}if(!Fe)return ke;const ne=`${Fe.getFullYear()}-${Fe.getMonth()}`;return ke[ne]||(ke[ne]={total:0,count:0,year:Fe.getFullYear(),month:Fe.getMonth()}),ke[ne].total+=Number(oe.total||0),ke[ne].count+=1,ke},{}),Ee=Object.values(xe).sort((ke,oe)=>oe.total!==ke.total?oe.total-ke.total:oe.count-ke.count)[0]||null;return{totalRevenue:le,pendingCount:ve,topMonth:Ee}},[n]),{totalRevenue:L,pendingCount:A,topMonth:N}=Y,D=N?new Intl.DateTimeFormat(void 0,{month:"long",year:"numeric"}).format(new Date(N.year,N.month,1)):r("no_data","No data");R.useEffect(()=>{if(!t||!e)return;const le=e.uid||t.uid;let ve;return e.role==="pharmacy"?ve=br(tr(ct,"orders"),Fr("pharmacyId","==",le),Qa("createdAt","desc")):ve=br(tr(ct,"orders"),Fr("customerId","==",le),Qa("createdAt","desc")),Dn(ve,Ee=>{s(Ee.docs.map(ke=>({id:ke.id,...ke.data()})))})},[t,e]),R.useEffect(()=>{const le=b?.state?.highlightOrderId,ve=new URLSearchParams(b.search).get("highlight");le?P(le):ve&&P(ve)},[b]),R.useEffect(()=>{if(!S||n.length===0)return;const le=S,ve=setTimeout(()=>{const Ee=document.getElementById(`order-${le}`);Ee&&Ee.scrollIntoView({behavior:"smooth",block:"center"})},250),xe=setTimeout(()=>P(null),5e3);return y(b.pathname,{replace:!0,state:{}}),()=>{clearTimeout(ve),clearTimeout(xe)}},[S,n]);const j=async(le,ve)=>{await ds(ir(ct,"orders",le),{status:ve})},F=R.useMemo(()=>a==="all"?n:n.filter(le=>(le.status||"pending")===a),[n,a]),M=F.slice(0,T),Z=le=>{i(le),O(5)},ue=(le=0)=>`₦${Number(le||0).toLocaleString()}`,pe=T<F.length,fe=T>5,te=n.length===1?r("order","Order"):r("orders","Orders"),H=A===1?r("pending_order","Pending Order"):r("pending_orders","Pending Orders"),ie=n.length?`${n.length} ${te}`:r("no_orders_yet","No orders yet."),K=A?`${A} ${H}`:r("no_pending_orders","No pending orders."),I=N?`${ue(N.total)} • ${N.count} ${N.count===1?r("order","Order"):r("orders","Orders")}`:r("not_enough_data","Not enough data yet"),z=[{key:"total",title:W?r("total_revenue","Total Revenue"):r("total_order_value","Total Order Value"),value:ue(L),helper:ie},{key:"pending",title:r("pending_orders","Pending Orders"),value:A.toLocaleString(),helper:K},{key:"month",title:W?r("top_selling_month","Top Selling Month"):r("top_buying_month","Top Buying Month"),value:D,helper:I}],X=["all",...JT],J=le=>{l(ve=>({...ve,[le]:!ve[le]}))};R.useEffect(()=>{async function le(){if(!p||!p.items)return x([]);const xe=p.items.map(ke=>ke.productId).map(ke=>Pa(ir(ct,"products",ke))),Ee=await Promise.all(xe);x(Ee.map(ke=>ke.exists()?{id:ke.id,...ke.data()}:null))}le()},[p]);function se(le){const ve={};return le.forEach(xe=>{const Ee=xe.productId;ve[Ee]?ve[Ee].qty+=Number(xe.qty||xe.quantity||1):ve[Ee]={...xe,qty:Number(xe.qty||xe.quantity||1)}}),Object.values(ve)}return t?c.jsxs(c.Fragment,{children:[c.jsx($le,{title:"Orders",t:r}),c.jsx("div",{className:"pt-28 sm:pt-32 md:pt-36 lg:pt-40 pb-24 sm:pb-28 w-full mx-auto px-0 sm:px-4 md:px-8 lg:px-12 xl:px-16 min-h-screen",children:c.jsxs("div",{className:"max-w-[1200px] mx-auto flex flex-col gap-4 sm:gap-6 md:gap-8",children:[c.jsx("div",{className:"lg:hidden sticky top-[7rem] z-40 -mx-0 px-0 py-3 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700",children:c.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:X.map(le=>{const ve=a===le,xe=le==="all"?r("all","All"):r(le,le.charAt(0).toUpperCase()+le.slice(1));return c.jsx("button",{type:"button",onClick:()=>Z(le),className:`flex-shrink-0 rounded-full border px-4 py-2 text-xs font-normal transition ${ve?"bg-sky-600 text-white border-sky-600 dark:border-sky-500":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:border-sky-400/70"}`,children:xe},le)})})}),c.jsx("section",{className:"mt-1 flex gap-4 overflow-x-auto scrollbar-hide pb-1 sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 sm:overflow-x-visible",children:z.map(le=>c.jsxs("div",{className:"rounded-2xl border border-sky-200 dark:border-sky-200 bg-white dark:bg-gray-900 p-4 sm:p-6 min-w-0 flex-shrink-0 w-48 sm:w-auto flex flex-col justify-center min-h-[120px] sm:min-h-[140px]",children:[c.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400 truncate",children:le.title}),c.jsx("div",{className:"mt-2 sm:mt-3 text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white",children:le.value}),c.jsx("div",{className:"mt-1 sm:mt-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400 line-clamp-2",children:le.helper})]},le.key))}),c.jsxs("section",{className:"grid gap-4 sm:gap-6 lg:grid-cols-[280px,1fr] lg:gap-6 xl:grid-cols-[320px,1fr]",children:[c.jsxs("div",{className:"hidden space-y-4 sm:space-y-6 lg:block",children:[c.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 sm:p-5",children:[c.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:r("order_filters","Order Filters")}),c.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:r("filter_description","Narrow down by status to focus on specific orders.")}),c.jsx("div",{className:"mt-3 sm:mt-4 grid grid-cols-2 gap-2",children:X.map(le=>{const ve=a===le,xe=le==="all"?r("all","All"):r(le,le.charAt(0).toUpperCase()+le.slice(1));return c.jsx("button",{type:"button",onClick:()=>Z(le),className:`w-full rounded-full border px-3 py-2 text-xs sm:text-sm transition ${ve?"bg-sky-600 text-white border-sky-600 dark:border-sky-500":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:border-sky-400/70"}`,children:xe},le)})})]}),c.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 sm:p-5",children:[c.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:r("contact_support","Contact Support")}),c.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:r("contact_support_description","Need help with an order? Reach out to our support team for assistance.")}),c.jsx("div",{className:"mt-3 sm:mt-4",children:c.jsx("button",{type:"button",onClick:()=>y("/support"),className:"text-xs sm:text-sm font-medium text-sky-600 hover:underline",children:r("get_support","Get support")})})]})]}),c.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r("orders","Orders")}),c.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:ie})]}),c.jsx("div",{className:"mt-6 space-y-4",children:M.length===0?c.jsx("div",{className:"py-12 text-center text-sm text-gray-500 dark:text-gray-400",children:r("no_orders_yet","No orders yet.")}):M.map((le,ve)=>{const xe=le.items||[],Ee=o[le.id],ke=xe.length>4,oe=Ee?xe:xe.slice(0,4),Fe=le.customerPhone||le.customer_phone||le.phone||"",Pe=u[le.id];return c.jsxs("div",{id:`order-${le.id}`,className:`relative flex flex-col gap-3 rounded-xl border border-gray-200 bg-white p-4 transition duration-200 hover:border-sky-400/70 hover:shadow-sm dark:border-gray-600 dark:bg-gray-900 ${S===le.id?"ring-4 ring-sky-200 dark:ring-sky-800 bg-sky-50/70 dark:bg-sky-900/30":""} animate-fadeInUp`,style:{cursor:"pointer",animationDelay:`${ve*.08}s`},onClick:ne=>{ne.target.closest(".order-see-more-btn")||e?.role==="pharmacy"&&ne.target.closest(".order-status-dropdown")||g(le)},children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-white truncate",children:[r("order_number","Order #"),le.id.slice(0,6)]}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:le.createdAt?.toDate?.().toLocaleString?.()||""})]}),c.jsx("div",{className:"text-sm sm:text-base font-semibold text-sky-700 dark:text-sky-400 flex-shrink-0",children:ue(le.total)})]}),e?.role==="pharmacy"&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[c.jsxs("span",{className:"flex-shrink-0",children:[r("customer","Customer"),":"]}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200 truncate min-w-0",children:le.customerName||le.customerId||le.customer_id||"N/A"})]}),c.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 truncate",children:le.customerEmail||""}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("items","Items")}),c.jsx("ul",{className:"ml-3 sm:ml-4 list-disc space-y-1 text-xs sm:text-sm text-gray-700 dark:text-gray-300 max-h-20 overflow-y-auto",children:oe.map((ne,ye)=>c.jsxs("li",{className:"truncate",children:[c.jsx("span",{className:"truncate",children:ne.name||ne.productId}),c.jsxs("span",{className:"ml-1 flex-shrink-0",children:["×",ne.qty||ne.quantity||1]})]},ye))}),ke&&c.jsx("button",{className:"order-see-more-btn mt-1 ml-3 sm:ml-4 text-xs font-normal text-sky-600 hover:underline flex-shrink-0",onClick:ne=>{ne.stopPropagation(),J(le.id)},children:Ee?r("see_less","See less"):`${r("see_more","See more")} (${xe.length-4} ${r("more_items","more")})`})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-start sm:items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r("status","Status"),":"]}),c.jsx("select",{className:"order-status-dropdown rounded border border-gray-200 bg-white px-2 py-1 text-xs dark:border-gray-600 dark:bg-gray-900 min-w-0",value:le.status||"pending",onChange:ne=>j(le.id,ne.target.value),children:JT.map(ne=>c.jsx("option",{value:ne,children:r(ne,ne.charAt(0).toUpperCase()+ne.slice(1))},ne))})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2 min-w-0",children:[Fe&&!Pe&&c.jsx("button",{className:"rounded-full bg-sky-600 px-2 sm:px-3 py-1 text-xs font-medium text-white flex-shrink-0",onClick:ne=>{ne.stopPropagation(),d(ye=>({...ye,[le.id]:!0}))},children:r("reveal_number","Reveal Number")}),Fe&&Pe&&c.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200 truncate min-w-0",children:Fe})]})]})]})]},le.id)})}),F.length>5&&(pe||fe)&&c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx("button",{type:"button",className:"text-sm font-medium text-sky-600 hover:underline",onClick:()=>O(pe?le=>Math.min(le+5,F.length):5),children:pe?r("see_more","See more"):r("see_less","See less")})})]})]}),c.jsx("div",{className:"lg:hidden",children:c.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-5",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r("contact_support","Contact Support")}),c.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:r("contact_support_description","Need help with an order? Reach out to our support team for assistance.")}),c.jsx("div",{className:"mt-4",children:c.jsx("button",{type:"button",onClick:()=>y("/support"),className:"text-sm font-medium text-sky-600 hover:underline",children:r("get_support","Get support")})})]})})]})}),c.jsx(d4,{open:!!p,onClose:()=>g(null),children:p&&c.jsxs("div",{className:"max-w-md mx-auto",children:[c.jsxs("div",{className:"text-base sm:text-lg font-medium mb-2 truncate",children:[r("order_number","Order #"),p.id.slice(0,6)]}),c.jsx("div",{className:"text-zinc-500 text-xs sm:text-sm mb-4 truncate",children:p.createdAt?.toDate?.().toLocaleString?.()||""}),c.jsxs("div",{className:"mb-2 text-sm sm:text-[15px] font-medium",children:[r("items","Items"),":"]}),c.jsx("div",{className:"max-h-60 overflow-y-auto mb-4",children:c.jsx("ul",{className:"space-y-2",children:se(p.items).map((le,ve)=>{const xe=m.find(Ee=>Ee&&Ee.id===le.productId);return c.jsxs("li",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[xe?c.jsx(hd,{name:xe.name,image:xe.image,category:xe.category,size:32,roundedClass:"rounded-lg flex-shrink-0"}):null,c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-poppins font-medium text-xs sm:text-sm truncate",children:xe?xe.name:le.productId}),c.jsxs("div",{className:"text-zinc-500 text-xs",children:[r("qty","Qty"),": ",le.qty]})]}),c.jsxs("div",{className:"text-xs sm:text-sm font-medium text-sky-600 flex-shrink-0 whitespace-nowrap",children:["₦",Number(le.price||xe?.price||0).toLocaleString()]})]},le.productId)})})}),c.jsxs("div",{className:"flex justify-between items-center border-t pt-3 mt-2 min-w-0",children:[c.jsxs("div",{className:"text-sm sm:text-[15px] font-medium flex-shrink-0",children:[r("total","Total"),":"]}),c.jsxs("div",{className:"text-sm sm:text-[15px] font-bold text-sky-700 truncate ml-2",children:["₦",Number(p.total).toLocaleString()]})]}),c.jsxs("div",{className:"mt-2 text-xs text-zinc-400 truncate",children:[r("status","Status"),": ",r(p.status||"pending",p.status||"pending")]})]})})]}):c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:r("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium hover:bg-sky-700 transition",onClick:()=>y("/auth/landing"),children:r("sign_in_sign_up","Sign In / Sign Up")})]})}function U5({className:t="",style:e={},lines:r=3,desktopAlign:n="center"}){const s=n==="left"?"lg:justify-start lg:pl-12":"lg:justify-center";return c.jsxs("div",{className:`w-screen h-screen flex items-center justify-center ${s} bg-white dark:bg-gray-900 ${t}`,style:e,role:"status","aria-live":"polite",children:[c.jsx("div",{className:"animate-fadeInScale",children:c.jsxs("picture",{children:[c.jsx("source",{media:"(min-width: 1024px)",srcSet:"/DesktopLoading.svg"}),c.jsx("img",{src:"/Loading.svg",alt:"Loading",className:"w-full h-full object-contain lg:object-cover lg:w-screen lg:h-screen animate-pulse-gentle"})]})}),c.jsx("span",{className:"sr-only",children:"Loading"})]})}function Qd({name:t,isVerified:e,className:r="",nameClassName:n="",iconClassName:s="h-4 w-4 text-sky-500",label:a="Verified pharmacy"}){return t?c.jsxs("span",{className:`inline-flex items-center gap-1 ${r}`.trim(),title:e?a:void 0,children:[c.jsx("span",{className:n,children:t}),e&&c.jsx(gle,{"aria-label":a,role:"img",className:s})]}):null}const qle=({title:t,t:e})=>mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full mt-8 max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:c.jsx("h1",{className:"text-[25px] font-light leading-none text-gray-900 dark:text-white whitespace-pre-line",children:e("my_conversations",`My
Conversations`)})})}),document.body);function Hle(t=1024){const[e,r]=R.useState(()=>typeof window>"u"||!window.matchMedia?!1:window.matchMedia(`(min-width: ${t}px)`).matches);return R.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const n=window.matchMedia(`(min-width: ${t}px)`),s=a=>r(a.matches);return n.addEventListener?n.addEventListener("change",s):n.addListener(s),r(n.matches),()=>{n.removeEventListener?n.removeEventListener("change",s):n.removeListener(s)}},[t]),e}function OS({variant:t="page",selectedThreadId:e=null,onThreadSelect:r}={}){const{user:n,profile:s}=Vn(),{t:a}=Ds(),[i,o]=R.useState([]),[l,u]=R.useState(""),[d,p]=R.useState({}),g=hl(),m=Jn(),x=t==="sidebar",y=R.useRef(!1),b=Hle();R.useEffect(()=>{if(!(!n||!s?.role))return o4({uid:n.uid,role:s.role},o,N=>console.error("listenUserThreads error:",N))},[n?.uid,s?.role]);const S=N=>{const D=W(N),j={thread:N};typeof r=="function"&&r(N),s?.role==="customer"&&D?m(`/chat/${D}`,{state:j,replace:x}):m(`/thread/${N.id}`,{state:j,replace:x}),M5(N.id,n.uid).catch(F=>console.error("markThreadRead error:",F))};if(!n)return x?null:c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:a("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>m("/auth/landing"),children:a("sign_in_sign_up","Sign In / Sign Up")})]});const P=n?.uid,T=N=>N?.unread?.[P]||0,O=N=>(s?.role==="customer"?N.vendorName:N.customerName)||"",W=N=>N.vendorId||(N.id&&N.id.includes("__")?N.id.split("__")[0]:null),Y=N=>{if(s?.role!=="customer")return!1;if(typeof N.vendorIsVerified=="boolean")return N.vendorIsVerified;if(typeof N.vendorVerificationStatus=="string")return N.vendorVerificationStatus==="approved";const D=W(N);return D?!!d[D]:!1},L=N=>N.lastAt?.seconds?new Date(N.lastAt.seconds*1e3):null,A=i.filter(N=>{const D=O(N).toLowerCase(),j=l.toLowerCase();return!j||D.includes(j)||(N.lastMessage||"").toLowerCase().includes(j)});return R.useEffect(()=>{if(x||!b||!i.length||y.current||g.pathname!=="/messages")return;const N=i[0];if(!N)return;const D={thread:N};if(y.current=!0,s?.role==="customer"){const j=W(N);if(j){m(`/chat/${j}`,{state:D,replace:!0});return}}m(`/thread/${N.id}`,{state:D,replace:!0})},[x,b,i,g.pathname,m,s?.role]),R.useEffect(()=>{if(s?.role!=="customer"||!i.length)return;const N={},D=new Set;i.forEach(Z=>{const ue=W(Z);ue&&(D.add(ue),typeof Z.vendorIsVerified=="boolean"?N[ue]=Z.vendorIsVerified:typeof Z.vendorVerificationStatus=="string"&&(N[ue]=Z.vendorVerificationStatus==="approved"))}),Object.entries(N).some(([Z,ue])=>d[Z]!==ue)&&p(Z=>({...Z,...N}));const F=Array.from(D).filter(Z=>N[Z]===void 0&&d[Z]===void 0);if(!F.length)return;let M=!1;return(async()=>{const Z=await Promise.all(F.map(async ue=>{try{const pe=await Pa(ir(ct,"pharmacies",ue));return[ue,pe.exists()?!!pe.data()?.isVerified:!1]}catch(pe){return console.error("[Messages] Failed to fetch pharmacy verification status",pe),[ue,!1]}}));M||p(ue=>{const pe={...ue};return Z.forEach(([fe,te])=>{pe[fe]===void 0&&(pe[fe]=te)}),pe})})(),()=>{M=!0}},[i,s?.role,d]),x?c.jsxs("div",{className:"flex h-full w-full flex-col bg-white dark:bg-gray-950",children:[c.jsxs("div",{className:"border-b border-gray-200 px-4 pb-4 pt-6 dark:border-gray-800",children:[c.jsx("h2",{className:"text-lg font-light text-gray-900 dark:text-white",children:a("my_conversations","My Conversations")}),c.jsxs("div",{className:"mt-3 flex items-center gap-2 rounded-full bg-gray-100 px-3 py-2 focus-within:ring-1 focus-within:ring-sky-400 dark:bg-gray-800",children:[c.jsx(jh,{className:"h-4 w-4 text-zinc-400"}),c.jsx("input",{placeholder:a("search_chats","Search chats"),value:l,onChange:N=>u(N.target.value),className:"w-full bg-transparent text-sm outline-none placeholder:text-zinc-400"})]})]}),c.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto px-2 py-4",children:[A.map(N=>{const D=e===N.id;return c.jsxs("button",{onClick:()=>S(N),className:`flex h-[62px] w-full items-center gap-3 rounded-[12px] px-3 text-left transition-colors duration-150 ${D?"bg-sky-50 border border-sky-200 text-gray-900 dark:border-sky-700 dark:bg-sky-900/30 dark:text-white":"border border-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800/80"}`,children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-zinc-200",children:c.jsx("span",{className:"text-xs font-semibold text-zinc-500",children:(O(N)||"U")[0]})}),c.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[c.jsx(Qd,{name:O(N)||a("conversation_partner","Conversation"),isVerified:Y(N),className:"text-sm truncate inline-flex items-center gap-1",nameClassName:"truncate",iconClassName:"h-3.5 w-3.5 text-sky-500"}),c.jsx("div",{className:"truncate text-[10px] text-zinc-500 dark:text-zinc-400",children:N.lastMessage||a("no_messages_yet","No messages yet.")})]}),c.jsxs("div",{className:"flex h-full min-w-[48px] flex-col items-end justify-between",children:[T(N)>0&&c.jsx("span",{className:"rounded-full bg-sky-500 px-2 py-0.5 text-[10px] font-semibold text-white",children:T(N)}),c.jsx("span",{className:"text-[10px] text-zinc-400",children:L(N)?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||""})]})]},N.id)}),A.length===0&&c.jsx("div",{className:"px-3 py-2 text-sm text-zinc-500 dark:text-zinc-400",children:a("no_conversations_yet","No conversations yet.")})]})]}):c.jsxs(c.Fragment,{children:[c.jsx(qle,{title:"My Conversations",t:a}),c.jsxs("div",{className:"min-h-screen w-full px-4 pb-28 pt-24 sm:px-5 md:px-8 lg:px-12 xl:px-16",children:[c.jsxs("div",{className:"mt-14 flex items-center gap-3 border-b border-zinc-300 pb-2 dark:border-gray-600",children:[c.jsx(jh,{className:"h-4 w-4 text-zinc-400"}),c.jsx("input",{placeholder:a("search_chats","Search chats"),value:l,onChange:N=>u(N.target.value),className:"w-full bg-transparent outline-none placeholder:text-sm placeholder:text-zinc-400"})]}),c.jsxs("div",{className:"mt-8 w-full space-y-4",children:[A.map((N,D)=>c.jsx("div",{className:"-mx-4 sm:mx-0",children:c.jsxs("button",{onClick:()=>S(N),className:"card-interactive flex h-[62px] w-full items-center gap-3 rounded-[10px] border border-gray-300 bg-white px-4 py-3 text-left transition-all duration-200 hover:bg-zinc-50 dark:border-gray-600",style:{animationDelay:`${D*.1}s`},children:[c.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-zinc-200",children:c.jsx("span",{className:"text-xs font-semibold text-zinc-500",children:(O(N)||"U")[0]})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx(Qd,{name:O(N)||a("conversation_partner","Conversation"),isVerified:Y(N),className:"text-sm truncate inline-flex items-center gap-1",nameClassName:"truncate",iconClassName:"h-3.5 w-3.5 text-sky-500"}),c.jsx("div",{className:"truncate text-[10px] text-zinc-500",children:N.lastMessage||a("no_messages_yet","No messages yet.")})]}),c.jsxs("div",{className:"flex h-full min-w-[48px] flex-col items-end justify-between",children:[T(N)>0&&c.jsx("span",{className:"mb-1 rounded-full bg-sky-500 px-2 py-0.5 text-[10px] font-semibold text-white",children:T(N)}),c.jsx("span",{className:"text-[10px] text-zinc-400",children:L(N)?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||""})]})]})},N.id)),A.length===0&&c.jsx("div",{className:"text-zinc-500",children:a("no_conversations_yet","No conversations yet.")})]})]})]})}function Wle(t){return c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:c.jsxs("g",{children:[c.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"#fd9292"}),c.jsx("path",{d:"M5.5 5.5L10.5 10.5M10.5 5.5L5.5 10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]})})}const Gle=({title:t,itemCount:e,t:r})=>mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:c.jsx("div",{className:"flex mt-8 items-center justify-between",children:c.jsx("h1",{className:"text-[28px] sm:text-[35px] md:text-[42px] lg:text-[48px] font-light font-poppins text-gray-900 dark:text-white",children:r("cart","Cart")})})})}),document.body);function qV(){const{user:t}=Vn(),{t:e}=Ds(),r=Jn(),{userCoords:n,location:s}=rg(),[a,i]=R.useState([]),[o,l]=R.useState(!1),[u,d]=R.useState(!1),[p,g]=R.useState(""),[m,x]=R.useState(""),[y,b]=R.useState(""),[S,P]=R.useState([]),[T,O]=R.useState(!1),[W,Y]=R.useState(""),[L,A]=R.useState(0);R.useEffect(()=>{if(!t)return;const H=br(tr(ct,"users",t.uid,"cart"));return Dn(H,async ie=>{const K=await Promise.all(ie.docs.map(async I=>{const z=I.data(),X=await Pa(ir(ct,"products",z.productId));return{id:I.id,...z,product:{id:X.id,...X.data()}}}));i(K)})},[t]),R.useEffect(()=>{t&&!p&&(b(t.email||""),x(t.phoneNumber||""),g(s||"Current location"))},[t,s,p]),R.useEffect(()=>{a.length>0&&n&&j()},[a,n]);const N=R.useMemo(()=>a.reduce((H,ie)=>H+(ie.product?.price+0||0)*ie.qty,0),[a]),D=R.useMemo(()=>N+L,[N,L]),j=async()=>{if(!n||a.length===0){A(0);return}try{const H=[...new Set(a.map(I=>I.product?.pharmacyId).filter(Boolean))];let ie=0;for(const I of H){const X=(await Pa(ir(ct,"pharmacies",I))).data();if(X){let J,se;if(X.coordinates?.latitude&&X.coordinates?.longitude?(J=X.coordinates.latitude,se=X.coordinates.longitude):X.lat&&X.lon?(J=X.lat,se=X.lon):X.latitude&&X.longitude&&(J=X.latitude,se=X.longitude),J&&se){const le=u4(n.latitude,n.longitude,J,se);ie+=le}}}const K=Math.round(ie*300);A(K)}catch(H){console.error("Error calculating delivery fee:",H),A(300)}},F=async H=>{if(H.length<3){P([]);return}O(!0);try{const K=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(H)}&limit=5&countrycodes=ng`)).json();P(K.map(I=>I.display_name))}catch(ie){console.error("Error searching addresses:",ie),P([])}O(!1)},M=()=>{s&&n&&(g(s),P([]))},Z=()=>{l(!0)},ue=()=>{l(!1),d(!0)},pe=async()=>{if(!(!t||!a.length||!W))try{const ie=a[0].product?.pharmacyId,K=fe(),I={customerId:t.uid,pharmacyId:ie,items:K.map(X=>({productId:X.productId,quantity:X.qty,price:X.product.price,pharmacyId:X.product.pharmacyId})),total:D,subtotal:N,deliveryFee:L,deliveryAddress:p,customerPhone:m,customerEmail:y||t.email,paymentMethod:W};let z;if(W==="online"?(console.log("Checkout totals - subtotal:",N,"deliveryFee:",L,"totalWithDelivery:",D),z=await w2({customerId:I.customerId,pharmacyId:I.pharmacyId,items:I.items,total:I.total,email:I.customerEmail})):z=await w2({...I,paymentStatus:"pending",orderStatus:"confirmed"}),console.log(`OrderStatus: ${z}`),z===!1){alert(e("order_placement_failed","Order placement failed"));return}for(const X of a)await Bw(t.uid,X.id);d(!1),l(!1),alert(W==="cash"?e("order_placed_delivery","Order placed successfully! You'll pay on delivery."):e("payment_successful","Payment successful! Your order has been placed.")),r("/customer/orders")}catch(H){console.error("Checkout error:",H),alert(e("checkout_failed","Checkout failed. Please try again."))}},fe=()=>{const H=new Map;for(const ie of a){const K=ie.product?.id;if(K)if(H.has(K)){const I=H.get(K);H.set(K,{...I,qty:I.qty+ie.qty,ids:[...I.ids||[I.id],ie.id]})}else H.set(K,{...ie,ids:[ie.id]})}return Array.from(H.values())},te=R.useMemo(()=>{const H=new Map;for(const ie of a){const K=ie.product?.id;if(K)if(H.has(K)){const I=H.get(K);H.set(K,{...I,qty:I.qty+ie.qty,ids:[...I.ids||[I.id],ie.id]})}else H.set(K,{...ie,ids:[ie.id]})}return Array.from(H.values())},[a]);return t?t&&a.length===0?c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:c.jsx("div",{className:"text-zinc-500 font-extralight text-[14px]",children:e("your_cart_is_empty","Your cart is empty.")})}):c.jsxs(c.Fragment,{children:[c.jsx(Gle,{title:"Cart",itemCount:a.length,t:e}),c.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col",children:[c.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-3",children:[te.map((H,ie)=>c.jsxs("div",{className:"relative rounded-xl border border-zinc-200 p-2 flex flex-col items-center gap-2 min-w-0 card-interactive animate-fadeInUp",style:{animationDelay:`${ie*.1}s`},children:[c.jsx("button",{onClick:()=>H.ids.forEach(K=>Bw(t.uid,K)),className:"absolute top-2 right-2 z-10 p-0.5 rounded-full hover:scale-110 transition-all duration-200 hover:bg-red-50 icon-interactive","aria-label":e("remove","Remove"),children:c.jsx(Wle,{className:"w-5 h-5 text-red-500"})}),c.jsx(hd,{name:H.product?.name,image:H.product?.image,category:H.product?.category,size:35,roundedClass:"rounded-xl"}),c.jsxs("div",{className:"flex-1 w-full text-center",children:[c.jsx("div",{className:"font-semibold text-[12px] sm:text-[13px] md:text-[14px] lg:text-[15px] truncate",children:H.product?.name}),c.jsxs("div",{className:"text-zinc-500 text-[10px] sm:text-[11px] md:text-[12px] lg:text-[13px]",children:["₦",Number(H.product?.price||0).toLocaleString()]})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 dark:border-gray-600 flex items-center justify-center text-[18px] font-light disabled:opacity-40 btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{H.qty>1&&await Bw(t.uid,H.ids[0])},disabled:H.qty<=1,"aria-label":e("decrease_quantity","Decrease quantity"),children:"-"}),c.jsx("span",{className:"text-[13px] font-poppins w-6 text-center font-medium",children:H.qty}),c.jsx("button",{className:"w-6 h-6 rounded-full border border-zinc-300 dark:border-gray-600 flex items-center justify-center text-[18px] font-light btn-interactive transition-all duration-200 hover:border-sky-500 hover:text-sky-600",onClick:async()=>{if(H.product?.id){const{addToCart:K}=await Yd(async()=>{const{addToCart:I}=await Promise.resolve().then(()=>lle);return{addToCart:I}},void 0);await K(t.uid,H.product.id,1)}},"aria-label":e("increase_quantity","Increase quantity"),children:"+"})]})]},H.product?.id)),te.length===0&&c.jsx("div",{className:"text-zinc-500 font-extralight text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] col-span-2",children:e("your_cart_is_empty","Your cart is empty.")})]}),te.length>0&&c.jsxs("div",{className:"mt-6 rounded-xl border border-sky-400 dark:border-gray-600 p-3",children:[c.jsxs("div",{className:"flex flex-col gap-2 text-[13px] sm:text-[15px] md:text-[18px] lg:text-[22px] font-regular",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:e("subtotal","Subtotal")}),c.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["₦",Number(N).toLocaleString()]})]}),L>0&&c.jsxs("div",{className:"flex items-center justify-between text-[11px] sm:text-[13px] text-gray-600",children:[c.jsx("span",{children:e("delivery_fee","Delivery Fee")}),c.jsxs("span",{children:["₦",Number(L).toLocaleString()]})]}),c.jsxs("div",{className:"flex items-center justify-between border-t pt-2 font-medium",children:[c.jsx("span",{children:e("total","Total")}),c.jsxs("span",{className:"font-semibold text-[12px] sm:text-[15px]",children:["₦",Number(D).toLocaleString()]})]})]}),c.jsx("button",{onClick:Z,className:"mt-4 w-full rounded-full border bg-sky-400 text-white py-2 text-[12px] sm:text-[14px] lg:text-[16px] font-light",children:e("proceed_to_checkout","Proceed to Checkout")})]})]}),o&&c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 dark:bg-black/50 p-4",children:c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600 dark:text-sky-400",children:e("order_summary","Order Summary")}),c.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:c.jsx(L1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-[16px] font-medium mb-3 text-gray-900 dark:text-white",children:[e("items","Items")," (",te.length,")"]}),c.jsx("div",{className:"space-y-3",children:te.map(H=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx(hd,{name:H.product?.name,image:H.product?.image,category:H.product?.category,size:40,roundedClass:"rounded-lg"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-[14px] font-medium truncate text-gray-900 dark:text-white",children:H.product?.name}),c.jsxs("div",{className:"text-[12px] text-gray-600 dark:text-gray-300",children:[e("qty","Qty"),": ",H.qty]})]}),c.jsxs("div",{className:"text-[14px] font-medium text-sky-600 dark:text-sky-400",children:["₦",Number((H.product?.price||0)*H.qty).toLocaleString()]})]},H.product?.id))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-[16px] font-medium mb-3 text-gray-900 dark:text-white",children:e("delivery_details","Delivery Details")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("delivery_address","Delivery Address")," *"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:p,onChange:H=>{g(H.target.value),F(H.target.value)},placeholder:e("enter_delivery_address","Enter delivery address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px] pr-10"}),c.jsx("button",{onClick:M,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-sky-600 hover:bg-sky-50 rounded-full transition-colors",title:e("use_current_location","Use current location"),children:c.jsx(B5,{className:"w-4 h-4"})})]}),S.length>0&&c.jsx("div",{className:"mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto relative z-[10000]",children:S.map((H,ie)=>c.jsx("button",{onClick:()=>{g(H),P([])},className:"w-full text-left p-3 hover:bg-gray-50 dark:hover:bg-gray-600 text-[13px] border-b last:border-b-0 text-gray-900 dark:text-white",children:H},ie))})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("phone_number","Phone Number")," *"]}),c.jsx("input",{type:"tel",value:m,onChange:H=>x(H.target.value),placeholder:e("enter_phone_number","Enter phone number"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("email_optional","Email (Optional)")}),c.jsx("input",{type:"email",value:y,onChange:H=>b(H.target.value),placeholder:e("enter_email_address","Enter email address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]})]})]})]}),c.jsxs("div",{className:"mb-6 p-4 bg-sky-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-[14px] text-gray-700 dark:text-gray-300",children:e("subtotal","Subtotal")}),c.jsxs("span",{className:"text-[14px] font-medium text-gray-900 dark:text-white",children:["₦",Number(N).toLocaleString()]})]}),L>0&&c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-[14px] text-gray-700 dark:text-gray-300",children:e("delivery_fee","Delivery Fee")}),c.jsxs("span",{className:"text-[14px] text-gray-900 dark:text-white",children:["₦",Number(L).toLocaleString()]})]}),c.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-sky-200 dark:border-gray-600",children:[c.jsx("span",{className:"text-[16px] font-medium text-gray-900 dark:text-white",children:e("total","Total")}),c.jsxs("span",{className:"text-[16px] font-bold text-sky-600 dark:text-sky-400",children:["₦",Number(D).toLocaleString()]})]})]}),c.jsx("button",{onClick:ue,disabled:!p.trim()||!m.trim(),className:"w-full bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:e("continue_to_payment","Continue to Payment")})]})})}),u&&c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600 dark:text-white",children:e("payment_method","Payment Method")}),c.jsx("button",{onClick:()=>d(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:c.jsx(L1,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>Y("cash"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${W==="cash"?"border-sky-500 bg-sky-50 dark:bg-gray-700":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(MV,{className:"w-6 h-6 text-sky-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[16px] font-medium",children:e("pay_on_delivery","Pay on Delivery")}),c.jsx("div",{className:"text-[13px] text-gray-600 dark:text-gray-300",children:e("pay_with_cash_on_delivery","Pay with cash when order arrives")})]})]})}),c.jsx("button",{onClick:()=>Y("online"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${W==="online"?"border-sky-500 bg-sky-50 dark:bg-gray-700":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(DV,{className:"w-6 h-6 text-sky-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[16px] font-medium",children:e("online_payment","Online Payment")}),c.jsx("div",{className:"text-[13px] text-gray-600 dark:text-gray-300",children:e("pay_with_card_bank_ussd","Pay with card, bank transfer, or USSD")})]})]})}),c.jsx("button",{disabled:!0,className:"w-full p-4 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-left cursor-not-allowed opacity-60",children:c.jsxs("div",{className:"flex items-center gap-3 justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(DS,{className:"w-6 h-6 text-gray-400"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[16px] font-medium text-gray-500",children:e("pay_with_insurance","Pay with Insurance")}),c.jsx("div",{className:"text-[13px] text-gray-400",children:e("use_your_health_insurance","Use your health insurance")})]})]}),c.jsx("span",{className:"text-[12px] text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:e("coming_soon","Coming Soon")})]})})]}),c.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[16px] font-medium",children:e("total_amount","Total Amount")}),c.jsxs("span",{className:"text-[18px] font-bold text-sky-600",children:["₦",Number(D).toLocaleString()]})]})}),c.jsx("button",{onClick:pe,disabled:!W,className:"w-full mt-6 bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:W==="online"?e("pay_now","Pay Now"):e("place_order","Place Order")})]})})})]}):c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:e("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>r("/auth/landing"),children:e("sign_in_sign_up","Sign In / Sign Up")})]})}function HV({chatThreadId:t,prescriptions:e,userId:r}){const[n,s]=R.useState(e||[]),[a,i]=R.useState({});R.useEffect(()=>{if(e&&e.length>0){s(e);const d={};e.forEach(p=>{d[p.id]={},p.drugs.forEach((g,m)=>{d[p.id][m]=g.quantity})}),i(d);return}t&&NV(t).then(d=>{s(d);const p={};d.forEach(g=>{p[g.id]={},g.drugs.forEach((m,x)=>{p[g.id][x]=m.quantity})}),i(p)})},[t,e]);function o(d,p,g){const m=new Date(p.startDate),y=Math.floor((new Date-m)/(1e3*60*60*24)),b=Math.max(0,Number(d.duration||p.duration)-y),S=a[p.id]?.[g]??d.quantity;return{daysLeft:b,quantityLeft:S}}function l(d){if(!d)return 1;const p=d.match(/(\d+(?:\.\d+)?)/);return p?Number(p[1]):1}async function u(d,p){i(b=>{const S={...b},P=n.find(Y=>Y.id===d);if(!P)return b;const T=P.drugs[p],O=l(T.dosage),W=S[d]?.[p]??T.quantity;return S[d]={...S[d],[p]:Math.max(0,W-O)},S});const g=n.find(b=>b.id===d);if(!g)return;const m=g.drugs[p],x=l(m.dosage),y=g.drugs.map((b,S)=>S===p?{...b,quantity:Math.max(0,b.quantity-x)}:b);await ds(ir(ct,"prescriptions",d),{drugs:y}),s(b=>b.map(S=>S.id===d?{...S,drugs:y}:S))}return c.jsxs("div",{className:"mt-4",children:[c.jsx("div",{className:"text-lg font-light mb-2 text-black dark:text-white",children:"Prescriptions"}),n.length===0&&c.jsx("div",{className:"text-zinc-400 text-sm",children:"No prescriptions yet."}),n.map(d=>c.jsxs("div",{className:"mb-4 border rounded-2xl p-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600 shadow-sm relative",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"font-thin text-[14px] mb-1 text-black dark:text-white",children:["Created: ",new Date(d.startDate).toLocaleDateString()]}),c.jsxs("div",{className:"mb-1 text-xs text-zinc-500 font-light",children:["Status: ",d.status]})]}),c.jsx("div",{className:"flex flex-col gap-2",children:d.drugs.map((p,g)=>{const{quantityLeft:m}=o(p,d,g),x=d.requirePurchase&&!d.fulfilled||m<=0;return c.jsx("button",{className:"rounded-full bg-sky-600 text-white text-[10px] px-2 py-0.5 ml-auto disabled:opacity-40 mb-1 shadow-sm",style:{minWidth:70,height:24,lineHeight:"16px"},disabled:x,onClick:()=>u(d.id,g),children:"Mark Dose"},g)})})]}),c.jsx("ul",{className:"mb-2 text-[13px]",children:d.drugs.map((p,g)=>{const{daysLeft:m,quantityLeft:x}=o(p,d,g);return c.jsxs("li",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[c.jsx("span",{className:"font-medium text-sky-700",children:p.name}),c.jsxs("span",{className:"text-zinc-500",children:["Qty: ",x]}),c.jsxs("span",{className:"text-zinc-500",children:["Dosage: ",p.dosage]}),c.jsxs("span",{className:"text-zinc-500",children:["Freq: ",p.frequency]}),c.jsxs("span",{className:m<=2?"text-red-500":"text-green-600",children:["Days left: ",m]}),c.jsxs("span",{className:x<=2?"text-red-500":"text-green-600",children:["Qty left: ",x]}),p.notes&&c.jsxs("span",{className:"block text-xs text-zinc-400",children:["Notes: ",p.notes]}),p.productId&&d.requirePurchase&&c.jsx("a",{href:`/product/${p.productId}`,className:"mt-1 inline-block text-xs text-sky-600 underline hover:text-sky-800 transition",children:"View & Buy"})]},g)})}),c.jsxs("div",{className:"text-xs text-zinc-400",children:["Duration: ",d.duration," days"]})]},d.id))]})}const Kle=Object.freeze(Object.defineProperty({__proto__:null,default:HV},Symbol.toStringTag,{value:"Module"}));function WV(t){if(!t)return 1;const e=t.match(/(\d+)x\s*\/\s*day/i);return e?Number(e[1]):1}function Yle(t,e){if(!("Notification"in window)||Notification.permission!=="granted")return;const{drugs:r,startDate:n,duration:s}=t,a=new Date(n),i=new Date,o=Number(s)||1;r.forEach(l=>{const u=WV(l.frequency);for(let d=0;d<o;d++)for(let p=0;p<u;p++){const g=new Date(a.getTime()+d*24*60*60*1e3+p*(24/u)*60*60*1e3);if(g>i){const m=g.getTime()-i.getTime();setTimeout(()=>{new Notification(e("time_to_take_medicine",`Time to take ${l.name}`),{body:e("dosage_frequency",`Dosage: ${l.dosage||""} (${l.frequency||""})`,{dosage:l.dosage||"",frequency:l.frequency||""})})},m)}}})}function Xle(t,e){const{drugs:r,startDate:n,duration:s}=t,a=new Date(n),i=Number(s)||1;let o=`BEGIN:VCALENDAR
VERSION:2.0
`;r.forEach(p=>{const g=WV(p.frequency);for(let m=0;m<i;m++)for(let x=0;x<g;x++){const b=new Date(a.getTime()+m*24*60*60*1e3+x*(24/g)*60*60*1e3).toISOString().replace(/[-:]/g,"").replace(/\..+/,"");o+=`BEGIN:VEVENT
SUMMARY:${e("take_medicine","Take {drugName}",{drugName:p.name})}
DESCRIPTION:${e("dosage_frequency","Dosage: {dosage} ({frequency})",{dosage:p.dosage||"",frequency:p.frequency||""})}
DTSTART:${b}
DTEND:${b}
END:VEVENT
`}}),o+="END:VCALENDAR";const l=new Blob([o],{type:"text/calendar"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u,d.download="prescription.ics",d.click(),URL.revokeObjectURL(u)}function Qle(t){if(localStorage.setItem("prescriptionAlarms",JSON.stringify(t)),"indexedDB"in window){const e=indexedDB.open("HealthAppDB",1);e.onupgradeneeded=r=>{const n=r.target.result;n.objectStoreNames.contains("alarms")||n.createObjectStore("alarms",{keyPath:"id"})},e.onsuccess=r=>{const a=r.target.result.transaction("alarms","readwrite").objectStore("alarms");t.forEach(i=>a.put(i))}}}function Jle(){const{user:t}=Vn(),{t:e}=Ds(),[r,n]=R.useState([]),[s,a]=R.useState(!1);if(R.useEffect(()=>{if(!t)return;async function l(){await EV({customerId:t.uid});const u=br(tr(ct,"prescriptions"),Fr("customerId","==",t.uid));let p=(await vn(u)).docs.map(g=>({id:g.id,...g.data()}));p=p.sort((g,m)=>new Date(m.startDate)-new Date(g.startDate)),n(p),Notification.permission==="granted"&&p.forEach(g=>Yle(g,e)),Qle(p)}l()},[t]),R.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),!t)return null;const i=r.length,o=s?r:r.slice(0,1);return c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[c.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white tracking-tight",children:e("my_prescriptions","My Prescriptions")}),r.length>0&&c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-normal dark:bg-green-900 dark:text-green-200",onClick:()=>r.forEach(l=>Xle(l,e)),children:e("add_to_calendar","Add to Calendar")})})]}),r.length===0?c.jsx("div",{className:"text-zinc-400 text-[12px] font-light",children:e("no_prescriptions_found","No prescriptions found.")}):c.jsxs(c.Fragment,{children:[c.jsx(HV,{prescriptions:o,userId:t.uid,chatThreadId:null}),i>1&&!s&&c.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-700 text-xs font-normal",onClick:()=>a(!0),children:e("see_more","See more")}),s&&i>1&&c.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-zinc-100 text-zinc-700 text-xs font-normal dark:text-black/90 dark:bg-black/50",onClick:()=>a(!1),children:e("see_less","See less")})]})]})}function Zle(){return c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsxs("section",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"h-16 w-16 rounded-3xl bg-sky-100 dark:bg-slate-700/80"}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx("div",{className:"h-4 w-3/5 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-4/5 rounded-full bg-sky-100/50 dark:bg-slate-600/60"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-3 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-3 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"})]})]})]}),c.jsxs("div",{className:"mt-5 flex gap-3",children:[c.jsx("div",{className:"h-11 flex-1 rounded-2xl bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-11 w-12 rounded-2xl bg-sky-50 dark:bg-slate-800/70"})]})]}),c.jsx("section",{className:"grid grid-cols-2 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70 mb-3"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]})]},e))}),c.jsxs("section",{className:"space-y-4 rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-100 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]}),c.jsx("div",{className:"h-8 w-16 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]},e))})]}),c.jsxs("section",{className:"space-y-3 rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),Array.from({length:2}).map((t,e)=>c.jsxs("div",{className:"space-y-3 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-100/80 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/5 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/40 dark:bg-slate-600/40"}),c.jsx("div",{className:"h-3 w-5/6 rounded-full bg-sky-100/40 dark:bg-slate-600/40"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-9 flex-1 rounded-full bg-sky-100/70 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-20 rounded-full bg-sky-100/70 dark:bg-slate-700/70"})]})]},e))]})]})}function ece(){return c.jsxs("div",{className:"animate-pulse space-y-8",children:[c.jsxs("section",{className:"grid grid-cols-[0.9fr_1.1fr] gap-6 rounded-4xl border border-sky-100 bg-white/80 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-5",children:[c.jsx("div",{className:"h-20 w-20 rounded-[32px] bg-sky-100 dark:bg-slate-700/80"}),c.jsxs("div",{className:"flex-1 space-y-4",children:[c.jsx("div",{className:"h-6 w-2/3 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-3/4 rounded-full bg-sky-100/50 dark:bg-slate-600/60"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-4 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-4 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"})]})]})]}),c.jsxs("div",{className:"flex flex-col justify-center gap-4",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-14 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-14 w-40 rounded-full bg-sky-50 dark:bg-slate-800/70"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-4",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/70 dark:bg-slate-600/70 mb-3"}),c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/50 dark:bg-slate-600/60 mb-2"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]},e))})]})]}),c.jsxs("div",{className:"grid grid-cols-[0.45fr_0.55fr] gap-6",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-4 space-y-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-100/60 dark:bg-slate-700/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]},e))})]}),c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsx("div",{className:"h-4 w-36 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-100 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-9 w-20 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]},e))})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"space-y-3 rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-11 w-11 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/40 dark:bg-slate-600/40"}),c.jsx("div",{className:"h-3 w-5/6 rounded-full bg-sky-100/40 dark:bg-slate-600/40"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-9 flex-1 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]})]},e))})]}),c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/80 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsx("div",{className:"h-4 w-40 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"h-11 w-11 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-8 w-20 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]},e))})]})]})]})]})}const tce=({title:t,onSearchClick:e,onSettingsClick:r})=>{const{t:n}=Ds();return mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:c.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[c.jsx("h1",{className:"text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:n("my_profile",`My
Profile`).replace("\\n",`
`)}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:e,"aria-label":"Open search",className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:c.jsx(jh,{className:"h-5 w-5 text-sky-600"})}),c.jsx("button",{onClick:r,"aria-label":"Open settings",className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:c.jsx(V5,{className:"h-5 w-5 text-sky-600"})})]})]})})}),document.body)};function GV(){const{user:t,logout:e}=Vn(),{t:r}=Ds(),[n,s]=R.useState(!1),[a,i]=R.useState(""),[o,l]=R.useState(""),[u,d]=R.useState(""),[p,g]=R.useState(""),[m,x]=R.useState(!1),[y,b]=R.useState(0),[S,P]=R.useState(0),[T,O]=R.useState([]),[W,Y]=R.useState(!1),[L,A]=R.useState([]),[N,D]=R.useState("products"),[j,F]=R.useState([]),[M,Z]=R.useState({displayName:t?.displayName||"Customer",address:"Kuje, Abuja, Nigeria",phone:t?.phoneNumber||"",email:t?.email||""}),[ue,pe]=R.useState(""),[fe,te]=R.useState(!1),[H,ie]=R.useState("all"),[K,I]=R.useState([]),[z,X]=R.useState(null),[J,se]=R.useState(null),le=Jn(),[ve,xe]=R.useState(!0);R.useEffect(()=>{if(!t){xe(!1);return}let ke=!0;const oe=async()=>{xe(!0);try{const[Ae,Be,Oe]=await Promise.all([vn(tr(ct,"users",t.uid,"cart")),vn(br(tr(ct,"threads"),Fr("customerId","==",t.uid))),vn(br(tr(ct,"orders"),Fr("customerId","==",t.uid)))]);if(!ke)return;b(Ae.size),P(Be.size);const pt={};for(const Lt of Oe.docs){const Ct=Lt.data(),Nt=Ct.createdAt?.toDate?.()||null;for(const _t of Ct.items||[]){const ot=_t.productId;if(ot){if(!pt[ot]){let Bt=_t.name;if(!Bt)try{const Ot=await Pa(ir(ct,"products",ot));Bt=Ot.exists()?Ot.data().name:ot}catch(Ot){console.error("Error fetching product:",Ot),Bt=ot}pt[ot]={id:ot,name:Bt,count:0,date:Nt}}pt[ot].count+=Number(_t.qty||_t.quantity||1),Nt&&(!pt[ot].date||Nt>pt[ot].date)&&(pt[ot].date=Nt)}}}const nt=Object.values(pt).sort((Lt,Ct)=>(Ct.date?.getTime?.()||0)-(Lt.date?.getTime?.()||0));ke&&F(nt)}catch(Ae){console.error("Error loading customer profile data:",Ae),ke&&F([])}finally{ke&&xe(!1)}},Fe=IV(t.uid,Ae=>{ke&&O(Ae)}),Pe=PV(t.uid,Ae=>{ke&&A(Ae)}),ne=ir(ct,"users",t.uid),ye=Dn(ne,Ae=>{if(!ke||!Ae?.exists())return;const Be=Ae.data();Z(Oe=>{let pt=Be.phoneNumber??Be.phone??Oe.phone??"";return typeof pt=="string"&&pt.includes("@")&&(pt=Oe.phone??""),{displayName:Be.displayName||t.displayName||Oe.displayName,address:Be.address||Oe.address||"",phone:pt,email:Be.email||t.email||Oe.email||""}})},()=>{});return oe(),()=>{ke=!1,Fe?.(),Pe?.(),ye?.()}},[t]),R.useEffect(()=>{!n&&M&&(i(M.displayName||""),l(M.phone||""),d(M.address||"Kuje, Abuja, Nigeria"))},[M,n]);async function Ee(){const ke=(ue||"").trim().toLowerCase();if(!ke){I([]);return}const oe=[];if((H==="drugs"||H==="all")&&(j||[]).forEach(Fe=>{`${Fe.name||""}`.toLowerCase().includes(ke)&&oe.push({type:"drug",title:Fe.name,subtitle:`Bought ${Fe.count||0} times`,item:Fe})}),H==="orders"||H==="all"){let Fe=z;Fe||(Fe=(await vn(br(tr(ct,"orders"),Fr("customerId","==",t.uid)))).docs.map(ne=>({id:ne.id,...ne.data()})),X(Fe)),(Fe||[]).forEach(Pe=>{`${Pe.id} ${(Pe.items||[]).map(ye=>ye.name).join(" ")} ${Pe.total||""}`.toLowerCase().includes(ke)&&oe.push({type:"order",title:`Order ${Pe.id}`,subtitle:`${Pe.items?.length||0} items — ₦${Number(Pe.total||0).toLocaleString()}`,item:Pe})})}if(H==="prescriptions"||H==="all"){let Fe=J;Fe||(Fe=(await vn(br(tr(ct,"prescriptions"),Fr("customerId","==",t.uid)))).docs.map(ne=>({id:ne.id,...ne.data()})),se(Fe)),(Fe||[]).forEach(Pe=>{const ne=(Pe.medicines||[]).join(" ");`${Pe.id} ${ne} ${Pe.note||""} ${Pe.pharmacyName||""}`.toLowerCase().includes(ke)&&oe.push({type:"prescription",title:`Prescription ${Pe.id}`,subtitle:Pe.note||"",item:Pe})})}I(oe)}return R.useEffect(()=>{if(!fe)return;function ke(oe){oe.key==="Escape"&&(te(!1),pe(""),I([]))}return window.addEventListener("keydown",ke),()=>window.removeEventListener("keydown",ke)},[fe]),R.useEffect(()=>{if(!fe)return;if(!(ue||"").trim()){I([]);return}const oe=setTimeout(()=>{Ee()},300);return()=>clearTimeout(oe)},[ue,H,fe]),t?ve?c.jsxs("div",{className:"px-4 md:px-6 lg:px-12 py-8",children:[c.jsx("div",{className:"md:hidden",children:c.jsx(Zle,{})}),c.jsx("div",{className:"hidden md:block",children:c.jsx(ece,{})})]}):c.jsxs(c.Fragment,{children:[c.jsx(tce,{title:"My Profile",onSearchClick:()=>te(!0),onSettingsClick:()=>le("/settings")}),c.jsxs("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:[fe&&c.jsx("div",{onClick:()=>{te(!1),pe(""),I([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/50 animate-fadeInScale",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:c.jsxs("div",{onClick:ke=>ke.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] dark:border-gray-600 max-h-[80vh] overflow-hidden modal-backdrop animate-bounceIn",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-center bg-[#F0FAFF] dark:bg-gray-700 border border-[#9ED3FF] dark:border-gray-600 rounded-full px-3 py-2 w-full overflow-hidden input-interactive",children:[c.jsx(jh,{className:"h-4 w-4 text-sky-600 mr-2 flex-shrink-0"}),c.jsx("input",{autoFocus:!0,value:ue,onChange:ke=>pe(ke.target.value),onKeyDown:ke=>{ke.key==="Enter"&&Ee()},placeholder:r("search_placeholder_profile","Search prescriptions, orders, drugs..."),className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate dark:text-white dark:placeholder:text-gray-400","aria-label":"Search query"})]})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("select",{value:H,onChange:ke=>ie(ke.target.value),className:"rounded-full border border-[#9ED3FF] dark:border-gray-600 px-3 py-2 text-sm bg-white dark:bg-gray-700 dark:text-white w-36 input-interactive",children:[c.jsx("option",{value:"prescriptions",children:r("prescriptions","Prescriptions")}),c.jsx("option",{value:"orders",children:r("orders_profile","Orders")}),c.jsx("option",{value:"drugs",children:r("drugs","Drugs")}),c.jsx("option",{value:"all",children:r("all_results","All")})]})})]}),c.jsx("div",{className:"border-t",style:{borderColor:"#E6F7FF"}}),c.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:K.length===0?c.jsx("div",{className:"text-zinc-500 dark:text-gray-300 p-4",children:"No results yet. Enter a query."}):c.jsx("ul",{className:"space-y-2",children:K.map((ke,oe)=>c.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${oe*.05}s`},children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${ke.type==="order"?"bg-green-100":ke.type==="prescription"?"bg-blue-100":"bg-purple-100"}`,children:ke.type==="order"?c.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}):ke.type==="prescription"?c.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}):c.jsx("svg",{className:"h-4 w-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-semibold text-sm text-black dark:text-white truncate",children:ke.title}),c.jsx("div",{className:"text-xs text-zinc-500 dark:text-gray-300 truncate",children:ke.subtitle})]})]}),c.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:ke.type==="order"?c.jsx("button",{onClick:()=>{le("/orders",{state:{highlightOrderId:ke.item.id}}),te(!1),pe(""),I([])},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Open"}):ke.type==="prescription"?c.jsx("button",{onClick:()=>{le(`/prescriptions/${ke.item.id}`),te(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Open"}):c.jsx("button",{onClick:()=>{te(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"View"})})]},oe))})})]})}),c.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center mb-3 overflow-hidden",children:t?.photoURL?c.jsx("img",{src:t.photoURL,alt:"avatar",className:"w-full h-full object-cover rounded-full"}):c.jsx("span",{className:"text-3xl text-zinc-400 font-light",children:M.displayName&&M.displayName[0]||"C"})}),c.jsxs("div",{className:"w-full flex items-center justify-between mt-1",children:[c.jsx("div",{className:"text-[20px] font-medium text-sky-600 tracking-tighter",children:M.displayName||"Customer"}),c.jsxs("button",{className:"ml-2 px-3 py-1 rounded-full border border-sky-200 dark:border-gray-600 text-sky-600 text-xs flex items-center gap-1 hover:bg-sky-50",onClick:()=>s(!0),children:[c.jsx(Ale,{className:"h-4 w-4"})," ",r("edit","Edit")]})]}),n&&c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-fadeInScale",role:"dialog","aria-modal":"true",children:[c.jsx("div",{onClick:()=>s(!1),className:"absolute inset-0 bg-black/30 dark:bg-black/90","aria-hidden":"true"}),c.jsxs("div",{onClick:ke=>ke.stopPropagation(),className:"relative bg-white dark:bg-gray-900 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl modal-backdrop animate-bounceIn",children:[c.jsx("div",{className:"text-[22px] font-light font-poppins text-sky-600 mb-2 tracking-tight animate-slideInLeft",children:r("edit_profile","Edit Profile")}),c.jsxs("form",{className:"flex flex-col gap-4",onSubmit:async ke=>{if(ke.preventDefault(),a!==(M?.displayName||t?.displayName)||o!==(M?.phone||t?.phoneNumber)||u!==(M?.address||"Address missing")){if(!p){alert("Please enter your account password to save changes.");return}try{const oe=Op.credential(t.email,p);await fne(t,oe),await JM(t,{displayName:a}),await ds(ir(ct,"users",t.uid),{displayName:a,phoneNumber:o,address:u}),s(!1),window.location.reload()}catch(oe){alert("Failed to update profile: "+oe.message)}}else s(!1)},children:[c.jsx("label",{className:"text-[12px] text-zinc-500 font-light animate-fadeInUp",style:{animationDelay:"0.1s"}}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all input-interactive animate-fadeInUp",style:{animationDelay:"0.2s",boxShadow:"none"},value:a,placeholder:"Name",onChange:ke=>i(ke.target.value)}),c.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",value:o,placeholder:r("phone_number_profile","Phone Number"),onChange:ke=>l(ke.target.value),style:{boxShadow:"none"}}),c.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",value:u,placeholder:r("address_profile","Address"),onChange:ke=>d(ke.target.value),style:{boxShadow:"none"}}),c.jsx("label",{className:"text-[12px] text-zinc-500 font-light"}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] bg-transparent px-1 py-2 text-[12px] font-light outline-none focus:border-sky-400 dark:border-gray-600 transition-all",type:"password",placeholder:r("password","Account Password (required to save)"),onChange:ke=>g(ke.target.value),required:!0,style:{boxShadow:"none"}}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-zinc-100 text-[12px] dark:text-white dark:bg-zinc-800 font-light",onClick:()=>s(!1),children:r("cancel","Cancel")}),c.jsx("button",{type:"submit",className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light",children:r("save","Save")})]})]})]})]}),c.jsx("div",{className:"text-zinc-500 mt-1 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:M.email}),c.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-2 text-[12px] font-light w-full pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx(Wu,{className:"h-2.5 w-2.5"})," ",M.address||"Kuje, Abuja, Nigeria"]}),c.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 mt-1 text-[12px] font-light w-full",children:[c.jsx(b2,{className:"h-2.5 w-2.5"})," ",M.phone||"phone number missing"]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:[c.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:r("my_activity","My Activity")}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:r("items_in_cart","Items in Cart")}),c.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:y??0})]}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:r("active_chats","Active Chats")}),c.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:S??0})]}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-sky-500 font-light",children:r("saved_items","Saved Items")}),c.jsx("button",{className:"text-[12px] text-sky-600 font-medium hover:underline",onClick:()=>Y(!0),children:(T?.length??0)+(L?.length??0)})]}),c.jsxs("div",{className:"w-full flex items-center justify-between mt-3 mb-1",children:[c.jsx("span",{className:"text-[14px] font-light text-zinc-800 dark:text-zinc-200",children:r("drugs_bought","Drugs Bought")}),c.jsx("button",{className:"text-[12px] text-sky-600 font-light px-2 py-1 rounded-full hover:bg-sky-50",onClick:()=>x(!0),children:r("see_more","See more")})]}),c.jsx("div",{className:"w-full flex flex-col gap-2",children:j.length>0?j.slice(0,3).map((ke,oe)=>c.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-left",children:ke.name}),c.jsx("span",{className:"text-[12px] text-zinc-400 font-light w-1/3 flex justify-center",children:ke.date?ke.date.toLocaleDateString():"N/A"}),c.jsx("span",{className:"text-[12px] text-zinc-500 font-light w-1/3 text-right",children:ke.count??1})]},ke.id||oe)):c.jsx("div",{className:"w-full text-center py-4",children:c.jsx("span",{className:"text-[12px] text-zinc-400 font-light",children:r("no_drugs_bought_yet","No drugs bought yet")})})}),m&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-sm shadow-xl",children:[c.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 dark:text-white mb-2 tracking-tight",children:r("all_drugs_bought","All Drugs Bought")}),c.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:j.length>0?j.map((ke,oe)=>c.jsxs("div",{className:"w-full flex items-center pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-gray-300 font-light w-1/3 text-left",children:ke.name}),c.jsx("span",{className:"text-[12px] text-zinc-400 dark:text-gray-400 font-light w-1/3 flex justify-center",children:ke.date?ke.date.toLocaleDateString():"N/A"}),c.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-gray-300 font-light w-1/3 text-right",children:ke.count??1})]},ke.id||oe)):c.jsx("div",{className:"w-full text-center py-8",children:c.jsx("span",{className:"text-[14px] text-zinc-400 dark:text-gray-400 font-light",children:r("no_drugs_bought_yet","No drugs bought yet")})})}),c.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full hover:bg-sky-700 dark:hover:bg-gray-700 transition-colors",onClick:()=>x(!1),children:r("close","Close")})]})}),W&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-[#36A5FF] dark:border-gray-600 rounded-3xl p-5 w-[90vw] max-w-md shadow-xl",children:[c.jsx("div",{className:"text-[18px] font-light font-poppins text-sky-600 dark:text-sky-400 mb-4 tracking-tight",children:r("my_saved_items","My Saved Items")}),c.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-600 dark:border-gray-600 mb-4",children:[c.jsxs("button",{className:`px-4 py-2 text-[14px] font-medium transition-colors ${N==="products"?"text-sky-600 border-b-2 border-sky-600 dark:border-gray-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>D("products"),children:[r("products","Products")," (",T?.length??0,")"]}),c.jsxs("button",{className:`px-4 py-2 text-[14px] font-medium transition-colors ${N==="vendors"?"text-sky-600 border-b-2 border-sky-600 dark:border-gray-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>D("vendors"),children:[r("vendors","Vendors")," (",L?.length??0,")"]})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:N==="products"?T?.length>0?T.map(ke=>c.jsx("div",{className:"w-full flex items-center pb-3 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:c.jsxs("div",{className:"flex items-center gap-3 w-full",children:[c.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:ke.productData?.image?c.jsx("img",{src:ke.productData.image,alt:ke.productData?.name,className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-gray-400 text-xs font-medium",children:ke.productData?.name?.[0]||"P"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-[13px] font-medium text-gray-800 truncate",children:ke.productData?.name||"Unknown Product"}),c.jsx("div",{className:"text-[11px] text-gray-500",children:ke.productData?.pharmacyName||"Unknown Pharmacy"}),c.jsxs("div",{className:"text-[12px] text-sky-600 font-medium",children:["₦",ke.productData?.price||"0"]})]}),c.jsx("button",{className:"px-3 py-1 bg-sky-100 text-sky-600 rounded-full text-[10px] font-medium hover:bg-sky-200 transition-colors",onClick:()=>{le(`/product/${ke.productId}`),Y(!1)},children:r("view","View")})]})},ke.id)):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-2",children:"💝"}),c.jsx("div",{className:"text-[14px] font-light",children:r("no_products_saved","No products saved")}),c.jsx("div",{className:"text-[12px] text-gray-400 mt-1",children:r("start_adding_products","Start adding products you like!")})]}):L?.length>0?L.map(ke=>c.jsx("div",{className:"w-full flex items-center pb-3 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:c.jsxs("div",{className:"flex items-center gap-3 w-full",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-sky-100 flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-sky-600 text-lg font-medium",children:ke.vendorData?.name?.[0]||"V"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-[13px] font-medium text-gray-800 truncate",children:ke.vendorData?.name||"Unknown Vendor"}),c.jsx("div",{className:"text-[11px] text-gray-500 truncate",children:ke.vendorData?.address||"Address not available"}),c.jsx("div",{className:"text-[11px] text-gray-500",children:ke.vendorData?.phone||""})]}),c.jsx("button",{className:"px-3 py-1 bg-sky-100 text-sky-600 rounded-full text-[10px] font-medium hover:bg-sky-200 transition-colors",onClick:()=>{le(`/vendor/${ke.vendorId}`),Y(!1)},children:"Visit"})]})},ke.id)):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-2",children:"🔖"}),c.jsx("div",{className:"text-[14px] font-light",children:r("no_vendors_bookmarked","No vendors bookmarked")}),c.jsx("div",{className:"text-[12px] text-gray-400 mt-1",children:r("bookmark_vendors","Bookmark vendors you like!")})]})}),c.jsx("button",{className:"mt-4 px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light w-full",onClick:()=>{Y(!1),D("products")},children:r("close","Close")})]})})]}),c.jsx("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start",children:c.jsx(Jle,{})})]})]}),c.jsx("div",{children:c.jsxs("button",{onClick:()=>{e(),window.location.href="/auth/onboarding"},className:"mt-10 rounded-full border border-red-300 dark:border-gray-600 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[c.jsx(Nk,{className:"h-4 w-4"})," ",r("log_out","Log Out")]})})]})]}):c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-900",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:r("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>le("/auth/landing"),children:r("sign_in_sign_up","Sign In / Sign Up")})]})}var Vw={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var rce=Vw.exports,ZT;function nce(){return ZT||(ZT=1,(function(t,e){((r,n)=>{t.exports=n()})(rce,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,a=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,o={},l=0,u={};function d(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(N){var D=W(N);D.chunkSize=parseInt(D.chunkSize),N.step||N.chunk||(D.chunkSize=null),this._handle=new y(D),(this._handle.streamer=this)._config=D}).call(this,A),this.parseChunk=function(N,D){var j=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<j){let M=this._config.newline;M||(F=this._config.quoteChar||'"',M=this._handle.guessLineEndings(N,F)),N=[...N.split(M).slice(j)].join(M)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(F=this._config.beforeFirstChunk(N))!==void 0&&(N=F),this.isFirstChunk=!1,this._halted=!1;var j=this._partialLine+N,F=(this._partialLine="",this._handle.parse(j,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(N=F.meta.cursor,j=(this._finished||(this._partialLine=j.substring(N-this._baseIndex),this._baseIndex=N),F&&F.data&&(this._rowCount+=F.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)n.postMessage({results:F,workerId:u.WORKER_ID,finished:j});else if(L(this._config.chunk)&&!D){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=F=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!j||!L(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(N){L(this._config.error)?this._config.error(N):i&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:N,finished:!1})}}function p(A){var N;(A=A||{}).chunkSize||(A.chunkSize=u.RemoteChunkSize),d.call(this,A),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),a||(N.onload=Y(this._chunkLoaded,this),N.onerror=Y(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var D,j=this._config.downloadRequestHeaders;for(D in j)N.setRequestHeader(D,j[D])}var F;this._config.chunkSize&&(F=this._start+this._config.chunkSize-1,N.setRequestHeader("Range","bytes="+this._start+"-"+F));try{N.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}a&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize||N.responseText.length,this._finished=!this._config.chunkSize||this._start>=(D=>(D=D.getResponseHeader("Content-Range"))!==null?parseInt(D.substring(D.lastIndexOf("/")+1)):-1)(N),this.parseChunk(N.responseText)))},this._chunkError=function(D){D=N.statusText||D,this._sendError(new Error(D))}}function g(A){(A=A||{}).chunkSize||(A.chunkSize=u.LocalChunkSize),d.call(this,A);var N,D,j=typeof FileReader<"u";this.stream=function(F){this._input=F,D=F.slice||F.webkitSlice||F.mozSlice,j?((N=new FileReader).onload=Y(this._chunkLoaded,this),N.onerror=Y(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),F=D.call(F,this._start,M)),N.readAsText(F,this._config.encoding));j||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(N.error)}}function m(A){var N;d.call(this,A=A||{}),this.stream=function(D){return N=D,this._nextChunk()},this._nextChunk=function(){var D,j;if(!this._finished)return D=this._config.chunkSize,N=D?(j=N.substring(0,D),N.substring(D)):(j=N,""),this._finished=!N,this.parseChunk(j)}}function x(A){d.call(this,A=A||{});var N=[],D=!0,j=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){j&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):D=!0},this._streamData=Y(function(F){try{N.push(typeof F=="string"?F:F.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(M){this._streamError(M)}},this),this._streamError=Y(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=Y(function(){this._streamCleanUp(),j=!0,this._streamData("")},this),this._streamCleanUp=Y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(A){var N,D,j,F,M=Math.pow(2,53),Z=-M,ue=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,pe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,fe=this,te=0,H=0,ie=!1,K=!1,I=[],z={data:[],errors:[],meta:{}};function X(ve){return A.skipEmptyLines==="greedy"?ve.join("").trim()==="":ve.length===1&&ve[0].length===0}function J(){if(z&&j&&(le("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),j=!1),A.skipEmptyLines&&(z.data=z.data.filter(function(ke){return!X(ke)})),se()){let ke=function(oe,Fe){L(A.transformHeader)&&(oe=A.transformHeader(oe,Fe)),I.push(oe)};if(z)if(Array.isArray(z.data[0])){for(var ve=0;se()&&ve<z.data.length;ve++)z.data[ve].forEach(ke);z.data.splice(0,1)}else z.data.forEach(ke)}function xe(ke,oe){for(var Fe=A.header?{}:[],Pe=0;Pe<ke.length;Pe++){var ne=Pe,ye=ke[Pe],ye=((Ae,Be)=>(Oe=>(A.dynamicTypingFunction&&A.dynamicTyping[Oe]===void 0&&(A.dynamicTyping[Oe]=A.dynamicTypingFunction(Oe)),(A.dynamicTyping[Oe]||A.dynamicTyping)===!0))(Ae)?Be==="true"||Be==="TRUE"||Be!=="false"&&Be!=="FALSE"&&((Oe=>{if(ue.test(Oe)&&(Oe=parseFloat(Oe),Z<Oe&&Oe<M))return 1})(Be)?parseFloat(Be):pe.test(Be)?new Date(Be):Be===""?null:Be):Be)(ne=A.header?Pe>=I.length?"__parsed_extra":I[Pe]:ne,ye=A.transform?A.transform(ye,ne):ye);ne==="__parsed_extra"?(Fe[ne]=Fe[ne]||[],Fe[ne].push(ye)):Fe[ne]=ye}return A.header&&(Pe>I.length?le("FieldMismatch","TooManyFields","Too many fields: expected "+I.length+" fields but parsed "+Pe,H+oe):Pe<I.length&&le("FieldMismatch","TooFewFields","Too few fields: expected "+I.length+" fields but parsed "+Pe,H+oe)),Fe}var Ee;z&&(A.header||A.dynamicTyping||A.transform)&&(Ee=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(xe),Ee=z.data.length):z.data=xe(z.data,0),A.header&&z.meta&&(z.meta.fields=I),H+=Ee)}function se(){return A.header&&I.length===0}function le(ve,xe,Ee,ke){ve={type:ve,code:xe,message:Ee},ke!==void 0&&(ve.row=ke),z.errors.push(ve)}L(A.step)&&(F=A.step,A.step=function(ve){z=ve,se()?J():(J(),z.data.length!==0&&(te+=ve.data.length,A.preview&&te>A.preview?D.abort():(z.data=z.data[0],F(z,fe))))}),this.parse=function(ve,xe,Ee){var ke=A.quoteChar||'"',ke=(A.newline||(A.newline=this.guessLineEndings(ve,ke)),j=!1,A.delimiter?L(A.delimiter)&&(A.delimiter=A.delimiter(ve),z.meta.delimiter=A.delimiter):((ke=((oe,Fe,Pe,ne,ye)=>{var Ae,Be,Oe,pt;ye=ye||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var nt=0;nt<ye.length;nt++){for(var Lt,Ct=ye[nt],Nt=0,_t=0,ot=0,Bt=(Oe=void 0,new S({comments:ne,delimiter:Ct,newline:Fe,preview:10}).parse(oe)),Ot=0;Ot<Bt.data.length;Ot++)Pe&&X(Bt.data[Ot])?ot++:(Lt=Bt.data[Ot].length,_t+=Lt,Oe===void 0?Oe=Lt:0<Lt&&(Nt+=Math.abs(Lt-Oe),Oe=Lt));0<Bt.data.length&&(_t/=Bt.data.length-ot),(Be===void 0||Nt<=Be)&&(pt===void 0||pt<_t)&&1.99<_t&&(Be=Nt,Ae=Ct,pt=_t)}return{successful:!!(A.delimiter=Ae),bestDelimiter:Ae}})(ve,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=ke.bestDelimiter:(j=!0,A.delimiter=u.DefaultDelimiter),z.meta.delimiter=A.delimiter),W(A));return A.preview&&A.header&&ke.preview++,N=ve,D=new S(ke),z=D.parse(N,xe,Ee),J(),ie?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return ie},this.pause=function(){ie=!0,D.abort(),N=L(A.chunk)?"":N.substring(D.getCharIndex())},this.resume=function(){fe.streamer._halted?(ie=!1,fe.streamer.parseChunk(N,!0)):setTimeout(fe.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,D.abort(),z.meta.aborted=!0,L(A.complete)&&A.complete(z),N=""},this.guessLineEndings=function(oe,ke){oe=oe.substring(0,1048576);var ke=new RegExp(b(ke)+"([^]*?)"+b(ke),"gm"),Ee=(oe=oe.replace(ke,"")).split("\r"),ke=oe.split(`
`),oe=1<ke.length&&ke[0].length<Ee[0].length;if(Ee.length===1||oe)return`
`;for(var Fe=0,Pe=0;Pe<Ee.length;Pe++)Ee[Pe][0]===`
`&&Fe++;return Fe>=Ee.length/2?`\r
`:"\r"}}function b(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(A){var N=(A=A||{}).delimiter,D=A.newline,j=A.comments,F=A.step,M=A.preview,Z=A.fastMode,ue=null,pe=!1,fe=A.quoteChar==null?'"':A.quoteChar,te=fe;if(A.escapeChar!==void 0&&(te=A.escapeChar),(typeof N!="string"||-1<u.BAD_DELIMITERS.indexOf(N))&&(N=","),j===N)throw new Error("Comment character same as delimiter");j===!0?j="#":(typeof j!="string"||-1<u.BAD_DELIMITERS.indexOf(j))&&(j=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var H=0,ie=!1;this.parse=function(K,I,z){if(typeof K!="string")throw new Error("Input must be a string");var X=K.length,J=N.length,se=D.length,le=j.length,ve=L(F),xe=[],Ee=[],ke=[],oe=H=0;if(!K)return Nt();if(Z||Z!==!1&&K.indexOf(fe)===-1){for(var Fe=K.split(D),Pe=0;Pe<Fe.length;Pe++){if(ke=Fe[Pe],H+=ke.length,Pe!==Fe.length-1)H+=D.length;else if(z)return Nt();if(!j||ke.substring(0,le)!==j){if(ve){if(xe=[],pt(ke.split(N)),_t(),ie)return Nt()}else pt(ke.split(N));if(M&&M<=Pe)return xe=xe.slice(0,M),Nt(!0)}}return Nt()}for(var ne=K.indexOf(N,H),ye=K.indexOf(D,H),Ae=new RegExp(b(te)+b(fe),"g"),Be=K.indexOf(fe,H);;)if(K[H]===fe)for(Be=H,H++;;){if((Be=K.indexOf(fe,Be+1))===-1)return z||Ee.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:H}),Lt();if(Be===X-1)return Lt(K.substring(H,Be).replace(Ae,fe));if(fe===te&&K[Be+1]===te)Be++;else if(fe===te||Be===0||K[Be-1]!==te){ne!==-1&&ne<Be+1&&(ne=K.indexOf(N,Be+1));var Oe=nt((ye=ye!==-1&&ye<Be+1?K.indexOf(D,Be+1):ye)===-1?ne:Math.min(ne,ye));if(K.substr(Be+1+Oe,J)===N){ke.push(K.substring(H,Be).replace(Ae,fe)),K[H=Be+1+Oe+J]!==fe&&(Be=K.indexOf(fe,H)),ne=K.indexOf(N,H),ye=K.indexOf(D,H);break}if(Oe=nt(ye),K.substring(Be+1+Oe,Be+1+Oe+se)===D){if(ke.push(K.substring(H,Be).replace(Ae,fe)),Ct(Be+1+Oe+se),ne=K.indexOf(N,H),Be=K.indexOf(fe,H),ve&&(_t(),ie))return Nt();if(M&&xe.length>=M)return Nt(!0);break}Ee.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:H}),Be++}}else if(j&&ke.length===0&&K.substring(H,H+le)===j){if(ye===-1)return Nt();H=ye+se,ye=K.indexOf(D,H),ne=K.indexOf(N,H)}else if(ne!==-1&&(ne<ye||ye===-1))ke.push(K.substring(H,ne)),H=ne+J,ne=K.indexOf(N,H);else{if(ye===-1)break;if(ke.push(K.substring(H,ye)),Ct(ye+se),ve&&(_t(),ie))return Nt();if(M&&xe.length>=M)return Nt(!0)}return Lt();function pt(ot){xe.push(ot),oe=H}function nt(ot){var Bt=0;return Bt=ot!==-1&&(ot=K.substring(Be+1,ot))&&ot.trim()===""?ot.length:Bt}function Lt(ot){return z||(ot===void 0&&(ot=K.substring(H)),ke.push(ot),H=X,pt(ke),ve&&_t()),Nt()}function Ct(ot){H=ot,pt(ke),ke=[],ye=K.indexOf(D,H)}function Nt(ot){if(A.header&&!I&&xe.length&&!pe){var Bt=xe[0],Ot=Object.create(null),ft=new Set(Bt);let st=!1;for(let wt=0;wt<Bt.length;wt++){let me=Bt[wt];if(Ot[me=L(A.transformHeader)?A.transformHeader(me,wt):me]){let Ue,ut=Ot[me];for(;Ue=me+"_"+ut,ut++,ft.has(Ue););ft.add(Ue),Bt[wt]=Ue,Ot[me]++,st=!0,(ue=ue===null?{}:ue)[Ue]=me}else Ot[me]=1,Bt[wt]=me;ft.add(me)}st&&console.warn("Duplicate headers found and renamed."),pe=!0}return{data:xe,errors:Ee,meta:{delimiter:N,linebreak:D,aborted:ie,truncated:!!ot,cursor:oe+(I||0),renamedHeaders:ue}}}function _t(){F(Nt()),xe=[],Ee=[]}},this.abort=function(){ie=!0},this.getCharIndex=function(){return H}}function P(A){var N=A.data,D=o[N.workerId],j=!1;if(N.error)D.userError(N.error,N.file);else if(N.results&&N.results.data){var F={abort:function(){j=!0,T(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:O,resume:O};if(L(D.userStep)){for(var M=0;M<N.results.data.length&&(D.userStep({data:N.results.data[M],errors:N.results.errors,meta:N.results.meta},F),!j);M++);delete N.results}else L(D.userChunk)&&(D.userChunk(N.results,F,N.file),delete N.results)}N.finished&&!j&&T(N.workerId,N.results)}function T(A,N){var D=o[A];L(D.userComplete)&&D.userComplete(N),D.terminate(),delete o[A]}function O(){throw new Error("Not implemented.")}function W(A){if(typeof A!="object"||A===null)return A;var N,D=Array.isArray(A)?[]:{};for(N in A)D[N]=W(A[N]);return D}function Y(A,N){return function(){A.apply(N,arguments)}}function L(A){return typeof A=="function"}return u.parse=function(A,N){var D=(N=N||{}).dynamicTyping||!1;if(L(D)&&(N.dynamicTypingFunction=D,D={}),N.dynamicTyping=D,N.transform=!!L(N.transform)&&N.transform,!N.worker||!u.WORKERS_SUPPORTED)return D=null,u.NODE_STREAM_INPUT,typeof A=="string"?(A=(j=>j.charCodeAt(0)!==65279?j:j.slice(1))(A),D=new(N.download?p:m)(N)):A.readable===!0&&L(A.read)&&L(A.on)?D=new x(N):(n.File&&A instanceof File||A instanceof Object)&&(D=new g(N)),D.stream(A);(D=(()=>{var j;return!!u.WORKERS_SUPPORTED&&(j=(()=>{var F=n.URL||n.webkitURL||null,M=r.toString();return u.BLOB_URL||(u.BLOB_URL=F.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(j=new n.Worker(j)).onmessage=P,j.id=l++,o[j.id]=j)})()).userStep=N.step,D.userChunk=N.chunk,D.userComplete=N.complete,D.userError=N.error,N.step=L(N.step),N.chunk=L(N.chunk),N.complete=L(N.complete),N.error=L(N.error),delete N.worker,D.postMessage({input:A,config:N,workerId:D.id})},u.unparse=function(A,N){var D=!1,j=!0,F=",",M=`\r
`,Z='"',ue=Z+Z,pe=!1,fe=null,te=!1,H=((()=>{if(typeof N=="object"){if(typeof N.delimiter!="string"||u.BAD_DELIMITERS.filter(function(I){return N.delimiter.indexOf(I)!==-1}).length||(F=N.delimiter),typeof N.quotes!="boolean"&&typeof N.quotes!="function"&&!Array.isArray(N.quotes)||(D=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(pe=N.skipEmptyLines),typeof N.newline=="string"&&(M=N.newline),typeof N.quoteChar=="string"&&(Z=N.quoteChar),typeof N.header=="boolean"&&(j=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");fe=N.columns}N.escapeChar!==void 0&&(ue=N.escapeChar+Z),N.escapeFormulae instanceof RegExp?te=N.escapeFormulae:typeof N.escapeFormulae=="boolean"&&N.escapeFormulae&&(te=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(Z),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return ie(null,A,pe);if(typeof A[0]=="object")return ie(fe||Object.keys(A[0]),A,pe)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||fe),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),ie(A.fields||[],A.data||[],pe);throw new Error("Unable to serialize unrecognized input");function ie(I,z,X){var J="",se=(typeof I=="string"&&(I=JSON.parse(I)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(I)&&0<I.length),le=!Array.isArray(z[0]);if(se&&j){for(var ve=0;ve<I.length;ve++)0<ve&&(J+=F),J+=K(I[ve],ve);0<z.length&&(J+=M)}for(var xe=0;xe<z.length;xe++){var Ee=(se?I:z[xe]).length,ke=!1,oe=se?Object.keys(z[xe]).length===0:z[xe].length===0;if(X&&!se&&(ke=X==="greedy"?z[xe].join("").trim()==="":z[xe].length===1&&z[xe][0].length===0),X==="greedy"&&se){for(var Fe=[],Pe=0;Pe<Ee;Pe++){var ne=le?I[Pe]:Pe;Fe.push(z[xe][ne])}ke=Fe.join("").trim()===""}if(!ke){for(var ye=0;ye<Ee;ye++){0<ye&&!oe&&(J+=F);var Ae=se&&le?I[ye]:ye;J+=K(z[xe][Ae],ye)}xe<z.length-1&&(!X||0<Ee&&!oe)&&(J+=M)}}return J}function K(I,z){var X,J;return I==null?"":I.constructor===Date?JSON.stringify(I).slice(1,25):(J=!1,te&&typeof I=="string"&&te.test(I)&&(I="'"+I,J=!0),X=I.toString().replace(H,ue),(J=J||D===!0||typeof D=="function"&&D(I,z)||Array.isArray(D)&&D[z]||((se,le)=>{for(var ve=0;ve<le.length;ve++)if(-1<se.indexOf(le[ve]))return!0;return!1})(X,u.BAD_DELIMITERS)||-1<X.indexOf(F)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?Z+X+Z:X)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!a&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=S,u.ParserHandle=y,u.NetworkStreamer=p,u.FileStreamer=g,u.StringStreamer=m,u.ReadableStreamStreamer=x,n.jQuery&&((s=n.jQuery).fn.parse=function(A){var N=A.config||{},D=[];return this.each(function(M){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)D.push({file:this.files[Z],inputElem:this,instanceConfig:s.extend({},N)})}),j(),this;function j(){if(D.length===0)L(A.complete)&&A.complete();else{var M,Z,ue,pe,fe=D[0];if(L(A.before)){var te=A.before(fe.file,fe.inputElem);if(typeof te=="object"){if(te.action==="abort")return M="AbortError",Z=fe.file,ue=fe.inputElem,pe=te.reason,void(L(A.error)&&A.error({name:M},Z,ue,pe));if(te.action==="skip")return void F();typeof te.config=="object"&&(fe.instanceConfig=s.extend(fe.instanceConfig,te.config))}else if(te==="skip")return void F()}var H=fe.instanceConfig.complete;fe.instanceConfig.complete=function(ie){L(H)&&H(ie,fe.file,fe.inputElem),F()},u.parse(fe.file,fe.instanceConfig)}}function F(){D.splice(0,1),j()}}),i&&(n.onmessage=function(A){A=A.data,u.WORKER_ID===void 0&&A&&(u.WORKER_ID=A.workerId),typeof A.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(A.input,A.config),finished:!0}):(n.File&&A.input instanceof File||A.input instanceof Object)&&(A=u.parse(A.input,A.config))&&n.postMessage({workerId:u.WORKER_ID,results:A,finished:!0})}),(p.prototype=Object.create(d.prototype)).constructor=p,(g.prototype=Object.create(d.prototype)).constructor=g,(m.prototype=Object.create(m.prototype)).constructor=m,(x.prototype=Object.create(d.prototype)).constructor=x,u})})(Vw)),Vw.exports}var sce=nce();const KV=kF(sce);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var z5={};z5.version="0.18.5";var YV=1252,ace=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],MS={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},BS=function(t){ace.indexOf(t)!=-1&&(YV=MS[0]=t)};function ice(){BS(1252)}var uu=function(t){BS(t)};function VS(){uu(1200),ice()}function eI(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function oce(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function XV(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var hx=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?oce(t.slice(2)):e==254&&r==255?XV(t.slice(2)):e==65279?t.slice(1):t},Mv=function(e){return String.fromCharCode(e)},tI=function(e){return String.fromCharCode(e)},_2,mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function k2(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),a=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,s=t.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=mh.charAt(a)+mh.charAt(i)+mh.charAt(o)+mh.charAt(l);return e}function cc(t){var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=mh.indexOf(t.charAt(u++)),i=mh.indexOf(t.charAt(u++)),r=a<<2|i>>4,e+=String.fromCharCode(r),o=mh.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=mh.indexOf(t.charAt(u++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var yn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),yf=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Rh(t){return yn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function rI(t){return yn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var rc=function(e){return yn?yf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function f4(t){if(typeof ArrayBuffer>"u")return rc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Xh(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function lce(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function US(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return US(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Ki=yn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:yf(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function cce(t){for(var e=[],r=0,n=t.length+250,s=Rh(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Rh(65535),n=65530)}return e.push(s.slice(0,r)),Ki(e)}var fl=/\u0000/g,px=/[\u0001-\u0006]/g;function s1(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function du(t,e){var r=""+t;return r.length>=e?r:Ca("0",e-r.length)+r}function zS(t,e){var r=""+t;return r.length>=e?r:Ca(" ",e-r.length)+r}function $5(t,e){var r=""+t;return r.length>=e?r:r+Ca(" ",e-r.length)}function uce(t,e){var r=""+Math.round(t);return r.length>=e?r:Ca("0",e-r.length)+r}function dce(t,e){var r=""+t;return r.length>=e?r:Ca("0",e-r.length)+r}var nI=Math.pow(2,32);function wm(t,e){if(t>nI||t<-nI)return uce(t,e);var r=Math.round(t);return dce(r,e)}function q5(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var sI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],u3=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function fce(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var Br={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},aI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},hce={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function H5(t,e,r){for(var n=t<0?-1:1,s=t*n,a=0,i=1,o=0,l=1,u=0,d=0,p=Math.floor(s);u<e&&(p=Math.floor(s),o=p*i+a,d=p*u+l,!(s-p<5e-8));)s=1/(s-p),a=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var g=Math.floor(n*o/d);return[g,n*o-g*d,d]}function B0(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),a=0,i=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=vce(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var QV=new Date(1899,11,31,0,0,0),pce=QV.getTime(),mce=new Date(1900,2,1,0,0,0);function JV(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=mce&&(r+=1440*60*1e3),(r-(pce+(t.getTimezoneOffset()-QV.getTimezoneOffset())*6e4))/(1440*60*1e3)}function $S(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function gce(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function xce(t){var e=t<0?12:11,r=$S(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function yce(t){var e=$S(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function S2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=xce(t):e===10?r=t.toFixed(10).substr(0,12):r=yce(t),$S(gce(r.toUpperCase()))}function vp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):S2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Vc(14,JV(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function vce(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function wce(t,e,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return u3[r.m-1][1];case 5:return u3[r.m-1][0];default:return u3[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return sI[r.q][0];default:return sI[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?du(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=du(a,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?du(l,u):"";return d}function gh(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var ZV=/%/g;function bce(t,e,r){var n=e.replace(ZV,""),s=e.length-n.length;return Jd(t,n,r*Math.pow(10,2*s))+Ca("%",s)}function _ce(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Jd(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function eU(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+eU(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var tU=/# (\?+)( ?)\/( ?)(\d+)/;function kce(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?Ca(" ",t[1].length+1+t[4].length):zS(i,t[1].length)+t[2]+"/"+t[3]+du(o,t[4].length))}function Sce(t,e,r){return r+(e===0?"":""+e)+Ca(" ",t[1].length+2+t[4].length)}var rU=/^#*0*\.([0#]+)/,nU=/\).*[0#]/,sU=/\(###\) ###\\?-####/;function ll(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function iI(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function oI(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Nce(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Ece(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Cc(t,e,r){if(t.charCodeAt(0)===40&&!e.match(nU)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cc("n",n,r):"("+Cc("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return _ce(t,e,r);if(e.indexOf("%")!==-1)return bce(t,e,r);if(e.indexOf("E")!==-1)return eU(e,r);if(e.charCodeAt(0)===36)return"$"+Cc(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+wm(l,e.length);if(e.match(/^[#?]+$/))return s=wm(r,0),s==="0"&&(s=""),s.length>e.length?s:ll(e.substr(0,e.length-s.length))+s;if(a=e.match(tU))return kce(a,l,u);if(e.match(/^#+0+$/))return u+wm(l,e.length-e.indexOf("0"));if(a=e.match(rU))return s=iI(r,a[1].length).replace(/^([^\.]+)$/,"$1."+ll(a[1])).replace(/\.$/,"."+ll(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+Ca("0",ll(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+iI(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+gh(wm(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cc(t,e,-r):gh(""+(Math.floor(r)+Nce(r,a[1].length)))+"."+du(oI(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return Cc(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=s1(Cc(t,e.replace(/[\\-]/g,""),r)),i=0,s1(s1(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(e.match(sU))return s=Cc(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=H5(l,Math.pow(10,i)-1,!1),s=""+u,d=Jd("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=$5(o[2],i),d.length<a[4].length&&(d=ll(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=H5(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?zS(o[1],i)+a[2]+"/"+a[3]+$5(o[2],i):Ca(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=wm(r,0),e.length<=s.length?s:ll(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var p=e.indexOf(".")-i,g=e.length-s.length-p;return ll(e.substr(0,p)+s+e.substr(e.length-g))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=oI(r,a[1].length),r<0?"-"+Cc(t,e,-r):gh(Ece(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?du(0,3-x.length):"")+x})+"."+du(i,a[1].length);switch(e){case"###,##0.00":return Cc(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=gh(wm(l,0));return m!=="0"?u+m:"";case"###,###.00":return Cc(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Cc(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Cce(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Jd(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Ace(t,e,r){var n=e.replace(ZV,""),s=e.length-n.length;return Jd(t,n,r*Math.pow(10,2*s))+Ca("%",s)}function aU(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+aU(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function zu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(nU)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?zu("n",n,r):"("+zu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Cce(t,e,r);if(e.indexOf("%")!==-1)return Ace(t,e,r);if(e.indexOf("E")!==-1)return aU(e,r);if(e.charCodeAt(0)===36)return"$"+zu(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+du(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:ll(e.substr(0,e.length-s.length))+s;if(a=e.match(tU))return Sce(a,l,u);if(e.match(/^#+0+$/))return u+du(l,e.length-e.indexOf("0"));if(a=e.match(rU))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ll(a[1])).replace(/\.$/,"."+ll(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+Ca("0",ll(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+gh(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+zu(t,e,-r):gh(""+r)+"."+Ca("0",a[1].length);if(a=e.match(/^#,#*,#0/))return zu(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=s1(zu(t,e.replace(/[\\-]/g,""),r)),i=0,s1(s1(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(e.match(sU))return s=zu(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=H5(l,Math.pow(10,i)-1,!1),s=""+u,d=Jd("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=$5(o[2],i),d.length<a[4].length&&(d=ll(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=H5(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?zS(o[1],i)+a[2]+"/"+a[3]+$5(o[2],i):Ca(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:ll(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var p=e.indexOf(".")-i,g=e.length-s.length-p;return ll(e.substr(0,p)+s+e.substr(e.length-g))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+zu(t,e,-r):gh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?du(0,3-x.length):"")+x})+"."+du(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=gh(""+l);return m!=="0"?u+m:"";default:if(e.match(/\.[0#?]*$/))return zu(t,e.slice(0,e.lastIndexOf(".")),r)+ll(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Jd(t,e,r){return(r|0)===r?zu(t,e,r):Cc(t,e,r)}function Tce(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var iU=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ng(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":q5(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(iU))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Ice(t,e,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,p,g="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!q5(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(p=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(p);s[s.length]={t:"t",v:a},++i;break;case"\\":var m=t.charAt(++i),x=m==="("||m===")"?m:"t";s[s.length]={t:x,v:m},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=B0(e,r,t.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=B0(e,r),u==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var y={t:o,v:o};if(u==null&&(u=B0(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",g="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,g="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(y.v=u.H>=12?"下午":"上午"),y.t="T",i+=5,g="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(iU)){if(u==null&&(u=B0(e,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",ng(t)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var b=0,S=0,P;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=g,l="h",b<1&&(b=1);break;case"s":(P=s[i].v.match(/\.0+$/))&&(S=Math.max(S,P[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[i].v.match(/[Hh]/)&&(b=1),b<2&&s[i].v.match(/[Mm]/)&&(b=2),b<3&&s[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var T="",O;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=wce(s[i].t.charCodeAt(0),s[i].v,u,S),s[i].t="t";break;case"n":case"?":for(O=i+1;s[O]!=null&&((o=s[O].t)==="?"||o==="D"||(o===" "||o==="t")&&s[O+1]!=null&&(s[O+1].t==="?"||s[O+1].t==="t"&&s[O+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[O].v==="/"||s[O].v===" "&&s[O+1]!=null&&s[O+1].t=="?"));)s[i].v+=s[O].v,s[O]={v:"",t:";"},++O;T+=s[i].v,i=O-1;break;case"G":s[i].t="t",s[i].v=vp(e,r);break}var W="",Y,L;if(T.length>0){T.charCodeAt(0)==40?(Y=e<0&&T.charCodeAt(0)===45?-e:e,L=Jd("n",T,Y)):(Y=e<0&&n>1?-e:e,L=Jd("n",T,Y),Y<0&&s[0]&&s[0].t=="t"&&(L=L.substr(1),s[0].v="-"+s[0].v)),O=L.length-1;var A=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){A=i;break}var N=s.length;if(A===s.length&&L.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(O>=s[i].v.length-1?(O-=s[i].v.length,s[i].v=L.substr(O+1,s[i].v.length)):O<0?s[i].v="":(s[i].v=L.substr(0,O+1),O=-1),s[i].t="t",N=i);O>=0&&N<s.length&&(s[N].v=L.substr(0,O+1)+s[N].v)}else if(A!==s.length&&L.indexOf("E")===-1){for(O=L.indexOf(".")-1,i=A;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===A?s[i].v.indexOf(".")-1:s[i].v.length-1,W=s[i].v.substr(d+1);d>=0;--d)O>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(W=L.charAt(O--)+W);s[i].v=W,s[i].t="t",N=i}for(O>=0&&N<s.length&&(s[N].v=L.substr(0,O+1)+s[N].v),O=L.indexOf(".")+1,i=A;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==A)){for(d=s[i].v.indexOf(".")>-1&&i===A?s[i].v.indexOf(".")+1:0,W=s[i].v.substr(0,d);d<s[i].v.length;++d)O<L.length&&(W+=L.charAt(O++));s[i].v=W,s[i].t="t",N=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(Y=n>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=Jd(s[i].t,s[i].v,Y),s[i].t="t");var D="";for(i=0;i!==s.length;++i)s[i]!=null&&(D+=s[i].v);return D}var lI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function cI(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Pce(t,e){var r=Tce(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(lI),o=r[1].match(lI);return cI(e,i)?[n,r[0]]:cI(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Vc(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Br)[t],n==null&&(n=r.table&&r.table[aI[t]]||Br[aI[t]]),n==null&&(n=hce[t]||"General");break}if(q5(n,0))return vp(e,r);e instanceof Date&&(e=JV(e,r.date1904));var s=Pce(n,e);if(q5(s[1]))return vp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Ice(s[1],e,r,s[0])}function Zd(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Br[r]==null){e<0&&(e=r);continue}if(Br[r]==t){e=r;break}}e<0&&(e=391)}return Br[e]=t,e}function h4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Zd(t[e],e)}function sg(){Br=fce()}var jce={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},oU=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Rce(t){var e=typeof t=="number"?Br[t]:t;return e=e.replace(oU,"(\\d+)"),new RegExp("^"+e+"$")}function Lce(t,e,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(oU)||[]).forEach(function(p,g){var m=parseInt(r[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":i=m;break;case"s":l=m;break;case"m":i>=0?o=m:s=m;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Fce=(function(){var t={};t.version="1.2.0";function e(){for(var L=0,A=new Array(256),N=0;N!=256;++N)L=N,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,A[N]=L;return typeof Int32Array<"u"?new Int32Array(A):A}var r=e();function n(L){var A=0,N=0,D=0,j=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)j[D]=L[D];for(D=0;D!=256;++D)for(N=L[D],A=256+D;A<4096;A+=256)N=j[A]=N>>>8^L[N&255];var F=[];for(D=1;D!=16;++D)F[D-1]=typeof Int32Array<"u"?j.subarray(D*256,D*256+256):j.slice(D*256,D*256+256);return F}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],p=s[6],g=s[7],m=s[8],x=s[9],y=s[10],b=s[11],S=s[12],P=s[13],T=s[14];function O(L,A){for(var N=A^-1,D=0,j=L.length;D<j;)N=N>>>8^r[(N^L.charCodeAt(D++))&255];return~N}function W(L,A){for(var N=A^-1,D=L.length-15,j=0;j<D;)N=T[L[j++]^N&255]^P[L[j++]^N>>8&255]^S[L[j++]^N>>16&255]^b[L[j++]^N>>>24]^y[L[j++]]^x[L[j++]]^m[L[j++]]^g[L[j++]]^p[L[j++]]^d[L[j++]]^u[L[j++]]^l[L[j++]]^o[L[j++]]^i[L[j++]]^a[L[j++]]^r[L[j++]];for(D+=15;j<D;)N=N>>>8^r[(N^L[j++])&255];return~N}function Y(L,A){for(var N=A^-1,D=0,j=L.length,F=0,M=0;D<j;)F=L.charCodeAt(D++),F<128?N=N>>>8^r[(N^F)&255]:F<2048?(N=N>>>8^r[(N^(192|F>>6&31))&255],N=N>>>8^r[(N^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,M=L.charCodeAt(D++)&1023,N=N>>>8^r[(N^(240|F>>8&7))&255],N=N>>>8^r[(N^(128|F>>2&63))&255],N=N>>>8^r[(N^(128|M>>6&15|(F&3)<<4))&255],N=N>>>8^r[(N^(128|M&63))&255]):(N=N>>>8^r[(N^(224|F>>12&15))&255],N=N>>>8^r[(N^(128|F>>6&63))&255],N=N>>>8^r[(N^(128|F&63))&255]);return~N}return t.table=r,t.bstr=O,t.buf=W,t.str=Y,t})(),Rr=(function(){var e={};e.version="1.2.1";function r(ce,je){for(var Se=ce.split("/"),Ne=je.split("/"),Re=0,Le=0,Ge=Math.min(Se.length,Ne.length);Re<Ge;++Re){if(Le=Se[Re].length-Ne[Re].length)return Le;if(Se[Re]!=Ne[Re])return Se[Re]<Ne[Re]?-1:1}return Se.length-Ne.length}function n(ce){if(ce.charAt(ce.length-1)=="/")return ce.slice(0,-1).indexOf("/")===-1?ce:n(ce.slice(0,-1));var je=ce.lastIndexOf("/");return je===-1?ce:ce.slice(0,je+1)}function s(ce){if(ce.charAt(ce.length-1)=="/")return s(ce.slice(0,-1));var je=ce.lastIndexOf("/");return je===-1?ce:ce.slice(je+1)}function a(ce,je){typeof je=="string"&&(je=new Date(je));var Se=je.getHours();Se=Se<<6|je.getMinutes(),Se=Se<<5|je.getSeconds()>>>1,ce.write_shift(2,Se);var Ne=je.getFullYear()-1980;Ne=Ne<<4|je.getMonth()+1,Ne=Ne<<5|je.getDate(),ce.write_shift(2,Ne)}function i(ce){var je=ce.read_shift(2)&65535,Se=ce.read_shift(2)&65535,Ne=new Date,Re=Se&31;Se>>>=5;var Le=Se&15;Se>>>=4,Ne.setMilliseconds(0),Ne.setFullYear(Se+1980),Ne.setMonth(Le-1),Ne.setDate(Re);var Ge=je&31;je>>>=5;var lt=je&63;return je>>>=6,Ne.setHours(je),Ne.setMinutes(lt),Ne.setSeconds(Ge<<1),Ne}function o(ce){xo(ce,0);for(var je={},Se=0;ce.l<=ce.length-4;){var Ne=ce.read_shift(2),Re=ce.read_shift(2),Le=ce.l+Re,Ge={};switch(Ne){case 21589:Se=ce.read_shift(1),Se&1&&(Ge.mtime=ce.read_shift(4)),Re>5&&(Se&2&&(Ge.atime=ce.read_shift(4)),Se&4&&(Ge.ctime=ce.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}ce.l=Le,je[Ne]=Ge}return je}var l;function u(){return l||(l={})}function d(ce,je){if(ce[0]==80&&ce[1]==75)return pr(ce,je);if((ce[0]|32)==109&&(ce[1]|32)==105)return vr(ce,je);if(ce.length<512)throw new Error("CFB file size "+ce.length+" < 512");var Se=3,Ne=512,Re=0,Le=0,Ge=0,lt=0,Xe=0,Qe=[],rt=ce.slice(0,512);xo(rt,0);var At=p(rt);switch(Se=At[0],Se){case 3:Ne=512;break;case 4:Ne=4096;break;case 0:if(At[1]==0)return pr(ce,je);default:throw new Error("Major Version: Expected 3 or 4 saw "+Se)}Ne!==512&&(rt=ce.slice(0,Ne),xo(rt,28));var Gt=ce.slice(0,Ne);g(rt,Se);var er=rt.read_shift(4,"i");if(Se===3&&er!==0)throw new Error("# Directory Sectors: Expected 0 saw "+er);rt.l+=4,Ge=rt.read_shift(4,"i"),rt.l+=4,rt.chk("00100000","Mini Stream Cutoff Size: "),lt=rt.read_shift(4,"i"),Re=rt.read_shift(4,"i"),Xe=rt.read_shift(4,"i"),Le=rt.read_shift(4,"i");for(var qt=-1,It=0;It<109&&(qt=rt.read_shift(4,"i"),!(qt<0));++It)Qe[It]=qt;var Ar=m(ce,Ne);b(Xe,Le,Ar,Ne,Qe);var bn=P(Ar,Ge,Qe,Ne);bn[Ge].name="!Directory",Re>0&&lt!==M&&(bn[lt].name="!MiniFAT"),bn[Qe[0]].name="!FAT",bn.fat_addrs=Qe,bn.ssz=Ne;var Kr={},tn=[],xi=[],ji=[];T(Ge,bn,Ar,tn,Re,Kr,xi,lt),x(xi,ji,tn),tn.shift();var ti={FileIndex:xi,FullPaths:ji};return je&&je.raw&&(ti.raw={header:Gt,sectors:Ar}),ti}function p(ce){if(ce[ce.l]==80&&ce[ce.l+1]==75)return[0,0];ce.chk(Z,"Header Signature: "),ce.l+=16;var je=ce.read_shift(2,"u");return[ce.read_shift(2,"u"),je]}function g(ce,je){var Se=9;switch(ce.l+=2,Se=ce.read_shift(2)){case 9:if(je!=3)throw new Error("Sector Shift: Expected 9 saw "+Se);break;case 12:if(je!=4)throw new Error("Sector Shift: Expected 12 saw "+Se);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Se)}ce.chk("0600","Mini Sector Shift: "),ce.chk("000000000000","Reserved: ")}function m(ce,je){for(var Se=Math.ceil(ce.length/je)-1,Ne=[],Re=1;Re<Se;++Re)Ne[Re-1]=ce.slice(Re*je,(Re+1)*je);return Ne[Se-1]=ce.slice(Se*je),Ne}function x(ce,je,Se){for(var Ne=0,Re=0,Le=0,Ge=0,lt=0,Xe=Se.length,Qe=[],rt=[];Ne<Xe;++Ne)Qe[Ne]=rt[Ne]=Ne,je[Ne]=Se[Ne];for(;lt<rt.length;++lt)Ne=rt[lt],Re=ce[Ne].L,Le=ce[Ne].R,Ge=ce[Ne].C,Qe[Ne]===Ne&&(Re!==-1&&Qe[Re]!==Re&&(Qe[Ne]=Qe[Re]),Le!==-1&&Qe[Le]!==Le&&(Qe[Ne]=Qe[Le])),Ge!==-1&&(Qe[Ge]=Ne),Re!==-1&&Ne!=Qe[Ne]&&(Qe[Re]=Qe[Ne],rt.lastIndexOf(Re)<lt&&rt.push(Re)),Le!==-1&&Ne!=Qe[Ne]&&(Qe[Le]=Qe[Ne],rt.lastIndexOf(Le)<lt&&rt.push(Le));for(Ne=1;Ne<Xe;++Ne)Qe[Ne]===Ne&&(Le!==-1&&Qe[Le]!==Le?Qe[Ne]=Qe[Le]:Re!==-1&&Qe[Re]!==Re&&(Qe[Ne]=Qe[Re]));for(Ne=1;Ne<Xe;++Ne)if(ce[Ne].type!==0){if(lt=Ne,lt!=Qe[lt])do lt=Qe[lt],je[Ne]=je[lt]+"/"+je[Ne];while(lt!==0&&Qe[lt]!==-1&&lt!=Qe[lt]);Qe[Ne]=-1}for(je[0]+="/",Ne=1;Ne<Xe;++Ne)ce[Ne].type!==2&&(je[Ne]+="/")}function y(ce,je,Se){for(var Ne=ce.start,Re=ce.size,Le=[],Ge=Ne;Se&&Re>0&&Ge>=0;)Le.push(je.slice(Ge*F,Ge*F+F)),Re-=F,Ge=L0(Se,Ge*4);return Le.length===0?bt(0):Ki(Le).slice(0,ce.size)}function b(ce,je,Se,Ne,Re){var Le=M;if(ce===M){if(je!==0)throw new Error("DIFAT chain shorter than expected")}else if(ce!==-1){var Ge=Se[ce],lt=(Ne>>>2)-1;if(!Ge)return;for(var Xe=0;Xe<lt&&(Le=L0(Ge,Xe*4))!==M;++Xe)Re.push(Le);b(L0(Ge,Ne-4),je-1,Se,Ne,Re)}}function S(ce,je,Se,Ne,Re){var Le=[],Ge=[];Re||(Re=[]);var lt=Ne-1,Xe=0,Qe=0;for(Xe=je;Xe>=0;){Re[Xe]=!0,Le[Le.length]=Xe,Ge.push(ce[Xe]);var rt=Se[Math.floor(Xe*4/Ne)];if(Qe=Xe*4&lt,Ne<4+Qe)throw new Error("FAT boundary crossed: "+Xe+" 4 "+Ne);if(!ce[rt])break;Xe=L0(ce[rt],Qe)}return{nodes:Le,data:bI([Ge])}}function P(ce,je,Se,Ne){var Re=ce.length,Le=[],Ge=[],lt=[],Xe=[],Qe=Ne-1,rt=0,At=0,Gt=0,er=0;for(rt=0;rt<Re;++rt)if(lt=[],Gt=rt+je,Gt>=Re&&(Gt-=Re),!Ge[Gt]){Xe=[];var qt=[];for(At=Gt;At>=0;){qt[At]=!0,Ge[At]=!0,lt[lt.length]=At,Xe.push(ce[At]);var It=Se[Math.floor(At*4/Ne)];if(er=At*4&Qe,Ne<4+er)throw new Error("FAT boundary crossed: "+At+" 4 "+Ne);if(!ce[It]||(At=L0(ce[It],er),qt[At]))break}Le[Gt]={nodes:lt,data:bI([Xe])}}return Le}function T(ce,je,Se,Ne,Re,Le,Ge,lt){for(var Xe=0,Qe=Ne.length?2:0,rt=je[ce].data,At=0,Gt=0,er;At<rt.length;At+=128){var qt=rt.slice(At,At+128);xo(qt,64),Gt=qt.read_shift(2),er=XS(qt,0,Gt-Qe),Ne.push(er);var It={name:er,type:qt.read_shift(1),color:qt.read_shift(1),L:qt.read_shift(4,"i"),R:qt.read_shift(4,"i"),C:qt.read_shift(4,"i"),clsid:qt.read_shift(16),state:qt.read_shift(4,"i"),start:0,size:0},Ar=qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2);Ar!==0&&(It.ct=O(qt,qt.l-8));var bn=qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2);bn!==0&&(It.mt=O(qt,qt.l-8)),It.start=qt.read_shift(4,"i"),It.size=qt.read_shift(4,"i"),It.size<0&&It.start<0&&(It.size=It.type=0,It.start=M,It.name=""),It.type===5?(Xe=It.start,Re>0&&Xe!==M&&(je[Xe].name="!StreamData")):It.size>=4096?(It.storage="fat",je[It.start]===void 0&&(je[It.start]=S(Se,It.start,je.fat_addrs,je.ssz)),je[It.start].name=It.name,It.content=je[It.start].data.slice(0,It.size)):(It.storage="minifat",It.size<0?It.size=0:Xe!==M&&It.start!==M&&je[Xe]&&(It.content=y(It,je[Xe].data,(je[lt]||{}).data))),It.content&&xo(It.content,0),Le[er]=It,Ge.push(It)}}function O(ce,je){return new Date((tc(ce,je+4)/1e7*Math.pow(2,32)+tc(ce,je)/1e7-11644473600)*1e3)}function W(ce,je){return u(),d(l.readFileSync(ce),je)}function Y(ce,je){var Se=je&&je.type;switch(Se||yn&&Buffer.isBuffer(ce)&&(Se="buffer"),Se||"base64"){case"file":return W(ce,je);case"base64":return d(rc(cc(ce)),je);case"binary":return d(rc(ce),je)}return d(ce,je)}function L(ce,je){var Se=je||{},Ne=Se.root||"Root Entry";if(ce.FullPaths||(ce.FullPaths=[]),ce.FileIndex||(ce.FileIndex=[]),ce.FullPaths.length!==ce.FileIndex.length)throw new Error("inconsistent CFB structure");ce.FullPaths.length===0&&(ce.FullPaths[0]=Ne+"/",ce.FileIndex[0]={name:Ne,type:5}),Se.CLSID&&(ce.FileIndex[0].clsid=Se.CLSID),A(ce)}function A(ce){var je="Sh33tJ5";if(!Rr.find(ce,"/"+je)){var Se=bt(4);Se[0]=55,Se[1]=Se[3]=50,Se[2]=54,ce.FileIndex.push({name:je,type:2,content:Se,size:4,L:69,R:69,C:69}),ce.FullPaths.push(ce.FullPaths[0]+je),N(ce)}}function N(ce,je){L(ce);for(var Se=!1,Ne=!1,Re=ce.FullPaths.length-1;Re>=0;--Re){var Le=ce.FileIndex[Re];switch(Le.type){case 0:Ne?Se=!0:(ce.FileIndex.pop(),ce.FullPaths.pop());break;case 1:case 2:case 5:Ne=!0,isNaN(Le.R*Le.L*Le.C)&&(Se=!0),Le.R>-1&&Le.L>-1&&Le.R==Le.L&&(Se=!0);break;default:Se=!0;break}}if(!(!Se&&!je)){var Ge=new Date(1987,1,19),lt=0,Xe=Object.create?Object.create(null):{},Qe=[];for(Re=0;Re<ce.FullPaths.length;++Re)Xe[ce.FullPaths[Re]]=!0,ce.FileIndex[Re].type!==0&&Qe.push([ce.FullPaths[Re],ce.FileIndex[Re]]);for(Re=0;Re<Qe.length;++Re){var rt=n(Qe[Re][0]);Ne=Xe[rt],Ne||(Qe.push([rt,{name:s(rt).replace("/",""),type:1,clsid:pe,ct:Ge,mt:Ge,content:null}]),Xe[rt]=!0)}for(Qe.sort(function(er,qt){return r(er[0],qt[0])}),ce.FullPaths=[],ce.FileIndex=[],Re=0;Re<Qe.length;++Re)ce.FullPaths[Re]=Qe[Re][0],ce.FileIndex[Re]=Qe[Re][1];for(Re=0;Re<Qe.length;++Re){var At=ce.FileIndex[Re],Gt=ce.FullPaths[Re];if(At.name=s(Gt).replace("/",""),At.L=At.R=At.C=-(At.color=1),At.size=At.content?At.content.length:0,At.start=0,At.clsid=At.clsid||pe,Re===0)At.C=Qe.length>1?1:-1,At.size=0,At.type=5;else if(Gt.slice(-1)=="/"){for(lt=Re+1;lt<Qe.length&&n(ce.FullPaths[lt])!=Gt;++lt);for(At.C=lt>=Qe.length?-1:lt,lt=Re+1;lt<Qe.length&&n(ce.FullPaths[lt])!=n(Gt);++lt);At.R=lt>=Qe.length?-1:lt,At.type=1}else n(ce.FullPaths[Re+1]||"")==n(Gt)&&(At.R=Re+1),At.type=2}}}function D(ce,je){var Se=je||{};if(Se.fileType=="mad")return pn(ce,Se);switch(N(ce),Se.fileType){case"zip":return an(ce,Se)}var Ne=(function(er){for(var qt=0,It=0,Ar=0;Ar<er.FileIndex.length;++Ar){var bn=er.FileIndex[Ar];if(bn.content){var Kr=bn.content.length;Kr>0&&(Kr<4096?qt+=Kr+63>>6:It+=Kr+511>>9)}}for(var tn=er.FullPaths.length+3>>2,xi=qt+7>>3,ji=qt+127>>7,ti=xi+It+tn+ji,gs=ti+127>>7,el=gs<=109?0:Math.ceil((gs-109)/127);ti+gs+el+127>>7>gs;)el=++gs<=109?0:Math.ceil((gs-109)/127);var De=[1,el,gs,ji,tn,It,qt,0];return er.FileIndex[0].size=qt<<6,De[7]=(er.FileIndex[0].start=De[0]+De[1]+De[2]+De[3]+De[4]+De[5])+(De[6]+7>>3),De})(ce),Re=bt(Ne[7]<<9),Le=0,Ge=0;{for(Le=0;Le<8;++Le)Re.write_shift(1,ue[Le]);for(Le=0;Le<8;++Le)Re.write_shift(2,0);for(Re.write_shift(2,62),Re.write_shift(2,3),Re.write_shift(2,65534),Re.write_shift(2,9),Re.write_shift(2,6),Le=0;Le<3;++Le)Re.write_shift(2,0);for(Re.write_shift(4,0),Re.write_shift(4,Ne[2]),Re.write_shift(4,Ne[0]+Ne[1]+Ne[2]+Ne[3]-1),Re.write_shift(4,0),Re.write_shift(4,4096),Re.write_shift(4,Ne[3]?Ne[0]+Ne[1]+Ne[2]-1:M),Re.write_shift(4,Ne[3]),Re.write_shift(-4,Ne[1]?Ne[0]-1:M),Re.write_shift(4,Ne[1]),Le=0;Le<109;++Le)Re.write_shift(-4,Le<Ne[2]?Ne[1]+Le:-1)}if(Ne[1])for(Ge=0;Ge<Ne[1];++Ge){for(;Le<236+Ge*127;++Le)Re.write_shift(-4,Le<Ne[2]?Ne[1]+Le:-1);Re.write_shift(-4,Ge===Ne[1]-1?M:Ge+1)}var lt=function(er){for(Ge+=er;Le<Ge-1;++Le)Re.write_shift(-4,Le+1);er&&(++Le,Re.write_shift(-4,M))};for(Ge=Le=0,Ge+=Ne[1];Le<Ge;++Le)Re.write_shift(-4,fe.DIFSECT);for(Ge+=Ne[2];Le<Ge;++Le)Re.write_shift(-4,fe.FATSECT);lt(Ne[3]),lt(Ne[4]);for(var Xe=0,Qe=0,rt=ce.FileIndex[0];Xe<ce.FileIndex.length;++Xe)rt=ce.FileIndex[Xe],rt.content&&(Qe=rt.content.length,!(Qe<4096)&&(rt.start=Ge,lt(Qe+511>>9)));for(lt(Ne[6]+7>>3);Re.l&511;)Re.write_shift(-4,fe.ENDOFCHAIN);for(Ge=Le=0,Xe=0;Xe<ce.FileIndex.length;++Xe)rt=ce.FileIndex[Xe],rt.content&&(Qe=rt.content.length,!(!Qe||Qe>=4096)&&(rt.start=Ge,lt(Qe+63>>6)));for(;Re.l&511;)Re.write_shift(-4,fe.ENDOFCHAIN);for(Le=0;Le<Ne[4]<<2;++Le){var At=ce.FullPaths[Le];if(!At||At.length===0){for(Xe=0;Xe<17;++Xe)Re.write_shift(4,0);for(Xe=0;Xe<3;++Xe)Re.write_shift(4,-1);for(Xe=0;Xe<12;++Xe)Re.write_shift(4,0);continue}rt=ce.FileIndex[Le],Le===0&&(rt.start=rt.size?rt.start-1:M);var Gt=Le===0&&Se.root||rt.name;if(Qe=2*(Gt.length+1),Re.write_shift(64,Gt,"utf16le"),Re.write_shift(2,Qe),Re.write_shift(1,rt.type),Re.write_shift(1,rt.color),Re.write_shift(-4,rt.L),Re.write_shift(-4,rt.R),Re.write_shift(-4,rt.C),rt.clsid)Re.write_shift(16,rt.clsid,"hex");else for(Xe=0;Xe<4;++Xe)Re.write_shift(4,0);Re.write_shift(4,rt.state||0),Re.write_shift(4,0),Re.write_shift(4,0),Re.write_shift(4,0),Re.write_shift(4,0),Re.write_shift(4,rt.start),Re.write_shift(4,rt.size),Re.write_shift(4,0)}for(Le=1;Le<ce.FileIndex.length;++Le)if(rt=ce.FileIndex[Le],rt.size>=4096)if(Re.l=rt.start+1<<9,yn&&Buffer.isBuffer(rt.content))rt.content.copy(Re,Re.l,0,rt.size),Re.l+=rt.size+511&-512;else{for(Xe=0;Xe<rt.size;++Xe)Re.write_shift(1,rt.content[Xe]);for(;Xe&511;++Xe)Re.write_shift(1,0)}for(Le=1;Le<ce.FileIndex.length;++Le)if(rt=ce.FileIndex[Le],rt.size>0&&rt.size<4096)if(yn&&Buffer.isBuffer(rt.content))rt.content.copy(Re,Re.l,0,rt.size),Re.l+=rt.size+63&-64;else{for(Xe=0;Xe<rt.size;++Xe)Re.write_shift(1,rt.content[Xe]);for(;Xe&63;++Xe)Re.write_shift(1,0)}if(yn)Re.l=Re.length;else for(;Re.l<Re.length;)Re.write_shift(1,0);return Re}function j(ce,je){var Se=ce.FullPaths.map(function(Xe){return Xe.toUpperCase()}),Ne=Se.map(function(Xe){var Qe=Xe.split("/");return Qe[Qe.length-(Xe.slice(-1)=="/"?2:1)]}),Re=!1;je.charCodeAt(0)===47?(Re=!0,je=Se[0].slice(0,-1)+je):Re=je.indexOf("/")!==-1;var Le=je.toUpperCase(),Ge=Re===!0?Se.indexOf(Le):Ne.indexOf(Le);if(Ge!==-1)return ce.FileIndex[Ge];var lt=!Le.match(px);for(Le=Le.replace(fl,""),lt&&(Le=Le.replace(px,"!")),Ge=0;Ge<Se.length;++Ge)if((lt?Se[Ge].replace(px,"!"):Se[Ge]).replace(fl,"")==Le||(lt?Ne[Ge].replace(px,"!"):Ne[Ge]).replace(fl,"")==Le)return ce.FileIndex[Ge];return null}var F=64,M=-2,Z="d0cf11e0a1b11ae1",ue=[208,207,17,224,161,177,26,225],pe="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:Z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:pe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function te(ce,je,Se){u();var Ne=D(ce,Se);l.writeFileSync(je,Ne)}function H(ce){for(var je=new Array(ce.length),Se=0;Se<ce.length;++Se)je[Se]=String.fromCharCode(ce[Se]);return je.join("")}function ie(ce,je){var Se=D(ce,je);switch(je&&je.type||"buffer"){case"file":return u(),l.writeFileSync(je.filename,Se),Se;case"binary":return typeof Se=="string"?Se:H(Se);case"base64":return k2(typeof Se=="string"?Se:H(Se));case"buffer":if(yn)return Buffer.isBuffer(Se)?Se:yf(Se);case"array":return typeof Se=="string"?rc(Se):Se}return Se}var K;function I(ce){try{var je=ce.InflateRaw,Se=new je;if(Se._processChunk(new Uint8Array([3,0]),Se._finishFlushFlag),Se.bytesRead)K=ce;else throw new Error("zlib does not expose bytesRead")}catch(Ne){console.error("cannot use native zlib: "+(Ne.message||Ne))}}function z(ce,je){if(!K)return $t(ce,je);var Se=K.InflateRaw,Ne=new Se,Re=Ne._processChunk(ce.slice(ce.l),Ne._finishFlushFlag);return ce.l+=Ne.bytesRead,Re}function X(ce){return K?K.deflateRawSync(ce):st(ce)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ve(ce){var je=(ce<<1|ce<<11)&139536|(ce<<5|ce<<15)&558144;return(je>>16|je>>8|je)&255}for(var xe=typeof Uint8Array<"u",Ee=xe?new Uint8Array(256):[],ke=0;ke<256;++ke)Ee[ke]=ve(ke);function oe(ce,je){var Se=Ee[ce&255];return je<=8?Se>>>8-je:(Se=Se<<8|Ee[ce>>8&255],je<=16?Se>>>16-je:(Se=Se<<8|Ee[ce>>16&255],Se>>>24-je))}function Fe(ce,je){var Se=je&7,Ne=je>>>3;return(ce[Ne]|(Se<=6?0:ce[Ne+1]<<8))>>>Se&3}function Pe(ce,je){var Se=je&7,Ne=je>>>3;return(ce[Ne]|(Se<=5?0:ce[Ne+1]<<8))>>>Se&7}function ne(ce,je){var Se=je&7,Ne=je>>>3;return(ce[Ne]|(Se<=4?0:ce[Ne+1]<<8))>>>Se&15}function ye(ce,je){var Se=je&7,Ne=je>>>3;return(ce[Ne]|(Se<=3?0:ce[Ne+1]<<8))>>>Se&31}function Ae(ce,je){var Se=je&7,Ne=je>>>3;return(ce[Ne]|(Se<=1?0:ce[Ne+1]<<8))>>>Se&127}function Be(ce,je,Se){var Ne=je&7,Re=je>>>3,Le=(1<<Se)-1,Ge=ce[Re]>>>Ne;return Se<8-Ne||(Ge|=ce[Re+1]<<8-Ne,Se<16-Ne)||(Ge|=ce[Re+2]<<16-Ne,Se<24-Ne)||(Ge|=ce[Re+3]<<24-Ne),Ge&Le}function Oe(ce,je,Se){var Ne=je&7,Re=je>>>3;return Ne<=5?ce[Re]|=(Se&7)<<Ne:(ce[Re]|=Se<<Ne&255,ce[Re+1]=(Se&7)>>8-Ne),je+3}function pt(ce,je,Se){var Ne=je&7,Re=je>>>3;return Se=(Se&1)<<Ne,ce[Re]|=Se,je+1}function nt(ce,je,Se){var Ne=je&7,Re=je>>>3;return Se<<=Ne,ce[Re]|=Se&255,Se>>>=8,ce[Re+1]=Se,je+8}function Lt(ce,je,Se){var Ne=je&7,Re=je>>>3;return Se<<=Ne,ce[Re]|=Se&255,Se>>>=8,ce[Re+1]=Se&255,ce[Re+2]=Se>>>8,je+16}function Ct(ce,je){var Se=ce.length,Ne=2*Se>je?2*Se:je+5,Re=0;if(Se>=je)return ce;if(yn){var Le=rI(Ne);if(ce.copy)ce.copy(Le);else for(;Re<ce.length;++Re)Le[Re]=ce[Re];return Le}else if(xe){var Ge=new Uint8Array(Ne);if(Ge.set)Ge.set(ce);else for(;Re<Se;++Re)Ge[Re]=ce[Re];return Ge}return ce.length=Ne,ce}function Nt(ce){for(var je=new Array(ce),Se=0;Se<ce;++Se)je[Se]=0;return je}function _t(ce,je,Se){var Ne=1,Re=0,Le=0,Ge=0,lt=0,Xe=ce.length,Qe=xe?new Uint16Array(32):Nt(32);for(Le=0;Le<32;++Le)Qe[Le]=0;for(Le=Xe;Le<Se;++Le)ce[Le]=0;Xe=ce.length;var rt=xe?new Uint16Array(Xe):Nt(Xe);for(Le=0;Le<Xe;++Le)Qe[Re=ce[Le]]++,Ne<Re&&(Ne=Re),rt[Le]=0;for(Qe[0]=0,Le=1;Le<=Ne;++Le)Qe[Le+16]=lt=lt+Qe[Le-1]<<1;for(Le=0;Le<Xe;++Le)lt=ce[Le],lt!=0&&(rt[Le]=Qe[lt+16]++);var At=0;for(Le=0;Le<Xe;++Le)if(At=ce[Le],At!=0)for(lt=oe(rt[Le],Ne)>>Ne-At,Ge=(1<<Ne+4-At)-1;Ge>=0;--Ge)je[lt|Ge<<At]=At&15|Le<<4;return Ne}var ot=xe?new Uint16Array(512):Nt(512),Bt=xe?new Uint16Array(32):Nt(32);if(!xe){for(var Ot=0;Ot<512;++Ot)ot[Ot]=0;for(Ot=0;Ot<32;++Ot)Bt[Ot]=0}(function(){for(var ce=[],je=0;je<32;je++)ce.push(5);_t(ce,Bt,32);var Se=[];for(je=0;je<=143;je++)Se.push(8);for(;je<=255;je++)Se.push(9);for(;je<=279;je++)Se.push(7);for(;je<=287;je++)Se.push(8);_t(Se,ot,288)})();var ft=(function(){for(var je=xe?new Uint8Array(32768):[],Se=0,Ne=0;Se<le.length-1;++Se)for(;Ne<le[Se+1];++Ne)je[Ne]=Se;for(;Ne<32768;++Ne)je[Ne]=29;var Re=xe?new Uint8Array(259):[];for(Se=0,Ne=0;Se<se.length-1;++Se)for(;Ne<se[Se+1];++Ne)Re[Ne]=Se;function Le(lt,Xe){for(var Qe=0;Qe<lt.length;){var rt=Math.min(65535,lt.length-Qe),At=Qe+rt==lt.length;for(Xe.write_shift(1,+At),Xe.write_shift(2,rt),Xe.write_shift(2,~rt&65535);rt-- >0;)Xe[Xe.l++]=lt[Qe++]}return Xe.l}function Ge(lt,Xe){for(var Qe=0,rt=0,At=xe?new Uint16Array(32768):[];rt<lt.length;){var Gt=Math.min(65535,lt.length-rt);if(Gt<10){for(Qe=Oe(Xe,Qe,+(rt+Gt==lt.length)),Qe&7&&(Qe+=8-(Qe&7)),Xe.l=Qe/8|0,Xe.write_shift(2,Gt),Xe.write_shift(2,~Gt&65535);Gt-- >0;)Xe[Xe.l++]=lt[rt++];Qe=Xe.l*8;continue}Qe=Oe(Xe,Qe,+(rt+Gt==lt.length)+2);for(var er=0;Gt-- >0;){var qt=lt[rt];er=(er<<5^qt)&32767;var It=-1,Ar=0;if((It=At[er])&&(It|=rt&-32768,It>rt&&(It-=32768),It<rt))for(;lt[It+Ar]==lt[rt+Ar]&&Ar<250;)++Ar;if(Ar>2){qt=Re[Ar],qt<=22?Qe=nt(Xe,Qe,Ee[qt+1]>>1)-1:(nt(Xe,Qe,3),Qe+=5,nt(Xe,Qe,Ee[qt-23]>>5),Qe+=3);var bn=qt<8?0:qt-4>>2;bn>0&&(Lt(Xe,Qe,Ar-se[qt]),Qe+=bn),qt=je[rt-It],Qe=nt(Xe,Qe,Ee[qt]>>3),Qe-=3;var Kr=qt<4?0:qt-2>>1;Kr>0&&(Lt(Xe,Qe,rt-It-le[qt]),Qe+=Kr);for(var tn=0;tn<Ar;++tn)At[er]=rt&32767,er=(er<<5^lt[rt])&32767,++rt;Gt-=Ar-1}else qt<=143?qt=qt+48:Qe=pt(Xe,Qe,1),Qe=nt(Xe,Qe,Ee[qt]),At[er]=rt&32767,++rt}Qe=nt(Xe,Qe,0)-1}return Xe.l=(Qe+7)/8|0,Xe.l}return function(Xe,Qe){return Xe.length<8?Le(Xe,Qe):Ge(Xe,Qe)}})();function st(ce){var je=bt(50+Math.floor(ce.length*1.1)),Se=ft(ce,je);return je.slice(0,Se)}var wt=xe?new Uint16Array(32768):Nt(32768),me=xe?new Uint16Array(32768):Nt(32768),Ue=xe?new Uint16Array(128):Nt(128),ut=1,Ut=1;function nr(ce,je){var Se=ye(ce,je)+257;je+=5;var Ne=ye(ce,je)+1;je+=5;var Re=ne(ce,je)+4;je+=4;for(var Le=0,Ge=xe?new Uint8Array(19):Nt(19),lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Xe=1,Qe=xe?new Uint8Array(8):Nt(8),rt=xe?new Uint8Array(8):Nt(8),At=Ge.length,Gt=0;Gt<Re;++Gt)Ge[J[Gt]]=Le=Pe(ce,je),Xe<Le&&(Xe=Le),Qe[Le]++,je+=3;var er=0;for(Qe[0]=0,Gt=1;Gt<=Xe;++Gt)rt[Gt]=er=er+Qe[Gt-1]<<1;for(Gt=0;Gt<At;++Gt)(er=Ge[Gt])!=0&&(lt[Gt]=rt[er]++);var qt=0;for(Gt=0;Gt<At;++Gt)if(qt=Ge[Gt],qt!=0){er=Ee[lt[Gt]]>>8-qt;for(var It=(1<<7-qt)-1;It>=0;--It)Ue[er|It<<qt]=qt&7|Gt<<3}var Ar=[];for(Xe=1;Ar.length<Se+Ne;)switch(er=Ue[Ae(ce,je)],je+=er&7,er>>>=3){case 16:for(Le=3+Fe(ce,je),je+=2,er=Ar[Ar.length-1];Le-- >0;)Ar.push(er);break;case 17:for(Le=3+Pe(ce,je),je+=3;Le-- >0;)Ar.push(0);break;case 18:for(Le=11+Ae(ce,je),je+=7;Le-- >0;)Ar.push(0);break;default:Ar.push(er),Xe<er&&(Xe=er);break}var bn=Ar.slice(0,Se),Kr=Ar.slice(Se);for(Gt=Se;Gt<286;++Gt)bn[Gt]=0;for(Gt=Ne;Gt<30;++Gt)Kr[Gt]=0;return ut=_t(bn,wt,286),Ut=_t(Kr,me,30),je}function Dt(ce,je){if(ce[0]==3&&!(ce[1]&3))return[Rh(je),2];for(var Se=0,Ne=0,Re=rI(je||1<<18),Le=0,Ge=Re.length>>>0,lt=0,Xe=0;(Ne&1)==0;){if(Ne=Pe(ce,Se),Se+=3,Ne>>>1)Ne>>1==1?(lt=9,Xe=5):(Se=nr(ce,Se),lt=ut,Xe=Ut);else{Se&7&&(Se+=8-(Se&7));var Qe=ce[Se>>>3]|ce[(Se>>>3)+1]<<8;if(Se+=32,Qe>0)for(!je&&Ge<Le+Qe&&(Re=Ct(Re,Le+Qe),Ge=Re.length);Qe-- >0;)Re[Le++]=ce[Se>>>3],Se+=8;continue}for(;;){!je&&Ge<Le+32767&&(Re=Ct(Re,Le+32767),Ge=Re.length);var rt=Be(ce,Se,lt),At=Ne>>>1==1?ot[rt]:wt[rt];if(Se+=At&15,At>>>=4,(At>>>8&255)===0)Re[Le++]=At;else{if(At==256)break;At-=257;var Gt=At<8?0:At-4>>2;Gt>5&&(Gt=0);var er=Le+se[At];Gt>0&&(er+=Be(ce,Se,Gt),Se+=Gt),rt=Be(ce,Se,Xe),At=Ne>>>1==1?Bt[rt]:me[rt],Se+=At&15,At>>>=4;var qt=At<4?0:At-2>>1,It=le[At];for(qt>0&&(It+=Be(ce,Se,qt),Se+=qt),!je&&Ge<er&&(Re=Ct(Re,er+100),Ge=Re.length);Le<er;)Re[Le]=Re[Le-It],++Le}}}return je?[Re,Se+7>>>3]:[Re.slice(0,Le),Se+7>>>3]}function $t(ce,je){var Se=ce.slice(ce.l||0),Ne=Dt(Se,je);return ce.l+=Ne[1],Ne[0]}function jt(ce,je){if(ce)typeof console<"u"&&console.error(je);else throw new Error(je)}function pr(ce,je){var Se=ce;xo(Se,0);var Ne=[],Re=[],Le={FileIndex:Ne,FullPaths:Re};L(Le,{root:je.root});for(var Ge=Se.length-4;(Se[Ge]!=80||Se[Ge+1]!=75||Se[Ge+2]!=5||Se[Ge+3]!=6)&&Ge>=0;)--Ge;Se.l=Ge+4,Se.l+=4;var lt=Se.read_shift(2);Se.l+=6;var Xe=Se.read_shift(4);for(Se.l=Xe,Ge=0;Ge<lt;++Ge){Se.l+=20;var Qe=Se.read_shift(4),rt=Se.read_shift(4),At=Se.read_shift(2),Gt=Se.read_shift(2),er=Se.read_shift(2);Se.l+=8;var qt=Se.read_shift(4),It=o(Se.slice(Se.l+At,Se.l+At+Gt));Se.l+=At+Gt+er;var Ar=Se.l;Se.l=qt+4,hn(Se,Qe,rt,Le,It),Se.l=Ar}return Le}function hn(ce,je,Se,Ne,Re){ce.l+=2;var Le=ce.read_shift(2),Ge=ce.read_shift(2),lt=i(ce);if(Le&8257)throw new Error("Unsupported ZIP encryption");for(var Xe=ce.read_shift(4),Qe=ce.read_shift(4),rt=ce.read_shift(4),At=ce.read_shift(2),Gt=ce.read_shift(2),er="",qt=0;qt<At;++qt)er+=String.fromCharCode(ce[ce.l++]);if(Gt){var It=o(ce.slice(ce.l,ce.l+Gt));(It[21589]||{}).mt&&(lt=It[21589].mt),((Re||{})[21589]||{}).mt&&(lt=Re[21589].mt)}ce.l+=Gt;var Ar=ce.slice(ce.l,ce.l+Qe);switch(Ge){case 8:Ar=z(ce,rt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var bn=!1;Le&8&&(Xe=ce.read_shift(4),Xe==134695760&&(Xe=ce.read_shift(4),bn=!0),Qe=ce.read_shift(4),rt=ce.read_shift(4)),Qe!=je&&jt(bn,"Bad compressed size: "+je+" != "+Qe),rt!=Se&&jt(bn,"Bad uncompressed size: "+Se+" != "+rt),Zn(Ne,er,Ar,{unsafe:!0,mt:lt})}function an(ce,je){var Se=je||{},Ne=[],Re=[],Le=bt(1),Ge=Se.compression?8:0,lt=0,Xe=0,Qe=0,rt=0,At=0,Gt=ce.FullPaths[0],er=Gt,qt=ce.FileIndex[0],It=[],Ar=0;for(Xe=1;Xe<ce.FullPaths.length;++Xe)if(er=ce.FullPaths[Xe].slice(Gt.length),qt=ce.FileIndex[Xe],!(!qt.size||!qt.content||er=="Sh33tJ5")){var bn=rt,Kr=bt(er.length);for(Qe=0;Qe<er.length;++Qe)Kr.write_shift(1,er.charCodeAt(Qe)&127);Kr=Kr.slice(0,Kr.l),It[At]=Fce.buf(qt.content,0);var tn=qt.content;Ge==8&&(tn=X(tn)),Le=bt(30),Le.write_shift(4,67324752),Le.write_shift(2,20),Le.write_shift(2,lt),Le.write_shift(2,Ge),qt.mt?a(Le,qt.mt):Le.write_shift(4,0),Le.write_shift(-4,It[At]),Le.write_shift(4,tn.length),Le.write_shift(4,qt.content.length),Le.write_shift(2,Kr.length),Le.write_shift(2,0),rt+=Le.length,Ne.push(Le),rt+=Kr.length,Ne.push(Kr),rt+=tn.length,Ne.push(tn),Le=bt(46),Le.write_shift(4,33639248),Le.write_shift(2,0),Le.write_shift(2,20),Le.write_shift(2,lt),Le.write_shift(2,Ge),Le.write_shift(4,0),Le.write_shift(-4,It[At]),Le.write_shift(4,tn.length),Le.write_shift(4,qt.content.length),Le.write_shift(2,Kr.length),Le.write_shift(2,0),Le.write_shift(2,0),Le.write_shift(2,0),Le.write_shift(2,0),Le.write_shift(4,0),Le.write_shift(4,bn),Ar+=Le.l,Re.push(Le),Ar+=Kr.length,Re.push(Kr),++At}return Le=bt(22),Le.write_shift(4,101010256),Le.write_shift(2,0),Le.write_shift(2,0),Le.write_shift(2,At),Le.write_shift(2,At),Le.write_shift(4,Ar),Le.write_shift(4,rt),Le.write_shift(2,0),Ki([Ki(Ne),Ki(Re),Le])}var kr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Vr(ce,je){if(ce.ctype)return ce.ctype;var Se=ce.name||"",Ne=Se.match(/\.([^\.]+)$/);return Ne&&kr[Ne[1]]||je&&(Ne=(Se=je).match(/[\.\\]([^\.\\])+$/),Ne&&kr[Ne[1]])?kr[Ne[1]]:"application/octet-stream"}function va(ce){for(var je=k2(ce),Se=[],Ne=0;Ne<je.length;Ne+=76)Se.push(je.slice(Ne,Ne+76));return Se.join(`\r
`)+`\r
`}function Ss(ce){var je=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Qe){var rt=Qe.charCodeAt(0).toString(16).toUpperCase();return"="+(rt.length==1?"0"+rt:rt)});je=je.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),je.charAt(0)==`
`&&(je="=0D"+je.slice(1)),je=je.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Se=[],Ne=je.split(`\r
`),Re=0;Re<Ne.length;++Re){var Le=Ne[Re];if(Le.length==0){Se.push("");continue}for(var Ge=0;Ge<Le.length;){var lt=76,Xe=Le.slice(Ge,Ge+lt);Xe.charAt(lt-1)=="="?lt--:Xe.charAt(lt-2)=="="?lt-=2:Xe.charAt(lt-3)=="="&&(lt-=3),Xe=Le.slice(Ge,Ge+lt),Ge+=lt,Ge<Le.length&&(Xe+="="),Se.push(Xe)}}return Se.join(`\r
`)}function Da(ce){for(var je=[],Se=0;Se<ce.length;++Se){for(var Ne=ce[Se];Se<=ce.length&&Ne.charAt(Ne.length-1)=="=";)Ne=Ne.slice(0,Ne.length-1)+ce[++Se];je.push(Ne)}for(var Re=0;Re<je.length;++Re)je[Re]=je[Re].replace(/[=][0-9A-Fa-f]{2}/g,function(Le){return String.fromCharCode(parseInt(Le.slice(1),16))});return rc(je.join(`\r
`))}function Hs(ce,je,Se){for(var Ne="",Re="",Le="",Ge,lt=0;lt<10;++lt){var Xe=je[lt];if(!Xe||Xe.match(/^\s*$/))break;var Qe=Xe.match(/^(.*?):\s*([^\s].*)$/);if(Qe)switch(Qe[1].toLowerCase()){case"content-location":Ne=Qe[2].trim();break;case"content-type":Le=Qe[2].trim();break;case"content-transfer-encoding":Re=Qe[2].trim();break}}switch(++lt,Re.toLowerCase()){case"base64":Ge=rc(cc(je.slice(lt).join("")));break;case"quoted-printable":Ge=Da(je.slice(lt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Re)}var rt=Zn(ce,Ne.slice(Se.length),Ge,{unsafe:!0});Le&&(rt.ctype=Le)}function vr(ce,je){if(H(ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Se=je&&je.root||"",Ne=(yn&&Buffer.isBuffer(ce)?ce.toString("binary"):H(ce)).split(`\r
`),Re=0,Le="";for(Re=0;Re<Ne.length;++Re)if(Le=Ne[Re],!!/^Content-Location:/i.test(Le)&&(Le=Le.slice(Le.indexOf("file")),Se||(Se=Le.slice(0,Le.lastIndexOf("/")+1)),Le.slice(0,Se.length)!=Se))for(;Se.length>0&&(Se=Se.slice(0,Se.length-1),Se=Se.slice(0,Se.lastIndexOf("/")+1),Le.slice(0,Se.length)!=Se););var Ge=(Ne[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var lt="--"+(Ge[1]||""),Xe=[],Qe=[],rt={FileIndex:Xe,FullPaths:Qe};L(rt);var At,Gt=0;for(Re=0;Re<Ne.length;++Re){var er=Ne[Re];er!==lt&&er!==lt+"--"||(Gt++&&Hs(rt,Ne.slice(At,Re),Se),At=Re)}return rt}function pn(ce,je){var Se=je||{},Ne=Se.boundary||"SheetJS";Ne="------="+Ne;for(var Re=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ne.slice(2)+'"',"","",""],Le=ce.FullPaths[0],Ge=Le,lt=ce.FileIndex[0],Xe=1;Xe<ce.FullPaths.length;++Xe)if(Ge=ce.FullPaths[Xe].slice(Le.length),lt=ce.FileIndex[Xe],!(!lt.size||!lt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ar){return"_x"+Ar.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ar){return"_u"+Ar.charCodeAt(0).toString(16)+"_"});for(var Qe=lt.content,rt=yn&&Buffer.isBuffer(Qe)?Qe.toString("binary"):H(Qe),At=0,Gt=Math.min(1024,rt.length),er=0,qt=0;qt<=Gt;++qt)(er=rt.charCodeAt(qt))>=32&&er<128&&++At;var It=At>=Gt*4/5;Re.push(Ne),Re.push("Content-Location: "+(Se.root||"file:///C:/SheetJS/")+Ge),Re.push("Content-Transfer-Encoding: "+(It?"quoted-printable":"base64")),Re.push("Content-Type: "+Vr(lt,Ge)),Re.push(""),Re.push(It?Ss(rt):va(rt))}return Re.push(Ne+`--\r
`),Re.join(`\r
`)}function ei(ce){var je={};return L(je,ce),je}function Zn(ce,je,Se,Ne){var Re=Ne&&Ne.unsafe;Re||L(ce);var Le=!Re&&Rr.find(ce,je);if(!Le){var Ge=ce.FullPaths[0];je.slice(0,Ge.length)==Ge?Ge=je:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+je).replace("//","/")),Le={name:s(je),type:2},ce.FileIndex.push(Le),ce.FullPaths.push(Ge),Re||Rr.utils.cfb_gc(ce)}return Le.content=Se,Le.size=Se?Se.length:0,Ne&&(Ne.CLSID&&(Le.clsid=Ne.CLSID),Ne.mt&&(Le.mt=Ne.mt),Ne.ct&&(Le.ct=Ne.ct)),Le}function Os(ce,je){L(ce);var Se=Rr.find(ce,je);if(Se){for(var Ne=0;Ne<ce.FileIndex.length;++Ne)if(ce.FileIndex[Ne]==Se)return ce.FileIndex.splice(Ne,1),ce.FullPaths.splice(Ne,1),!0}return!1}function Ln(ce,je,Se){L(ce);var Ne=Rr.find(ce,je);if(Ne){for(var Re=0;Re<ce.FileIndex.length;++Re)if(ce.FileIndex[Re]==Ne)return ce.FileIndex[Re].name=s(Se),ce.FullPaths[Re]=Se,!0}return!1}function en(ce){N(ce,!0)}return e.find=j,e.read=Y,e.parse=d,e.write=ie,e.writeFile=te,e.utils={cfb_new:ei,cfb_add:Zn,cfb_del:Os,cfb_mov:Ln,cfb_gc:en,ReadShift:Mx,CheckField:TU,prep_blob:xo,bconcat:Ki,use_zlib:I,_deflateRaw:st,_inflateRaw:$t,consts:fe},e})();function Dce(t){return typeof t=="string"?f4(t):Array.isArray(t)?lce(t):t}function by(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=f4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Zu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([Dce(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Xh(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Oce(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function La(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function uI(t,e){for(var r=[],n=La(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function p4(t){for(var e=[],r=La(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function m4(t){for(var e=[],r=La(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Mce(t){for(var e=[],r=La(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var W5=new Date(1899,11,30,0,0,0);function Ii(t,e){var r=t.getTime(),n=W5.getTime()+(t.getTimezoneOffset()-W5.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var lU=new Date,Bce=W5.getTime()+(lU.getTimezoneOffset()-W5.getTimezoneOffset())*6e4,dI=lU.getTimezoneOffset();function g4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Bce),e.getTimezoneOffset()!==dI&&e.setTime(e.getTime()+(e.getTimezoneOffset()-dI)*6e4),e}function Vce(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[a],10)}return e}var fI=new Date("2017-02-19T19:06:09.000Z"),cU=isNaN(fI.getFullYear())?new Date("2/19/17"):fI,Uce=cU.getFullYear()==2017;function $s(t,e){var r=new Date(t);if(Uce)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(cU.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function wp(t,e){if(yn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Zu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Zu(XV(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Zu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Zu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function qs(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=qs(t[r]));return e}function Ca(t,e){for(var r="";r.length<e;)r+=t;return r}function pu(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var zce=["january","february","march","april","may","june","july","august","september","october","november","december"];function F1(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&zce.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var $ce=(function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function uU(t){return t?t.content&&t.type?wp(t.content,!0):t.data?hx(t.data):t.asNodeBuffer&&yn?hx(t.asNodeBuffer().toString("binary")):t.asBinary?hx(t.asBinary()):t._data&&t._data.getContent?hx(wp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function dU(t){if(!t)return null;if(t.data)return eI(t.data);if(t.asNodeBuffer&&yn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?eI(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function qce(t){return t&&t.name.slice(-4)===".bin"?dU(t):uU(t)}function Pc(t,e){for(var r=t.FullPaths||La(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return t.files?t.files[r[a]]:t.FileIndex[a]}return null}function qS(t,e){var r=Pc(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function ui(t,e,r){if(!r)return qce(qS(t,e));if(!e)return null;try{return ui(t,e)}catch{return null}}function nc(t,e,r){if(!r)return uU(qS(t,e));if(!e)return null;try{return nc(t,e)}catch{return null}}function Hce(t,e,r){return dU(qS(t,e))}function hI(t){for(var e=t.FullPaths||La(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function fn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return yn?n=yf(r):n=cce(r),Rr.utils.cfb_add(t,e,n)}Rr.utils.cfb_add(t,e,r)}else t.file(e,r)}function HS(){return Rr.utils.cfb_new()}function fU(t,e){switch(e.type){case"base64":return Rr.read(t,{type:"base64"});case"binary":return Rr.read(t,{type:"binary"});case"buffer":case"array":return Rr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function mx(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Za=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Wce=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,pI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Gce=/<[^>]*>/g,Zo=Za.match(pI)?pI:Gce,Kce=/<\w*:/,Yce=/<(\/?)\w+:/;function Wr(t,e,r){for(var n={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var i=t.match(Wce),o=0,l="",u=0,d="",p="",g=1;if(i)for(u=0;u!=i.length;++u){for(p=i[u],a=0;a!=p.length&&p.charCodeAt(a)!==61;++a);for(d=p.slice(0,a).trim();p.charCodeAt(a+1)==32;)++a;for(g=(s=p.charCodeAt(a+1))==34||s==39?1:0,l=p.slice(a+1+g,p.length-g),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function xd(t){return t.replace(Yce,"<$1")}var hU={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},WS=p4(hU),Gn=(function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return hU[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),GS=/[&<>'"]/g,Xce=/[\u0000-\u0008\u000b-\u001f]/g;function ms(t){var e=t+"";return e.replace(GS,function(r){return WS[r]}).replace(Xce,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function mI(t){return ms(t).replace(/ /g,"_x0020_")}var pU=/[\u0000-\u001f]/g;function KS(t){var e=t+"";return e.replace(GS,function(r){return WS[r]}).replace(/\n/g,"<br/>").replace(pU,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Qce(t){var e=t+"";return e.replace(GS,function(r){return WS[r]}).replace(pU,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var gI=(function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}})();function Jce(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Bs(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function d3(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function xI(t){var e=Rh(2*t.length),r,n,s=1,a=0,i=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function yI(t){return yf(t,"binary").toString("utf8")}var Bv="foo bar bazâð£",bs=yn&&(yI(Bv)==d3(Bv)&&yI||xI(Bv)==d3(Bv)&&xI)||d3,Zu=yn?function(t){return yf(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},N2=(function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),mU=(function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}})(),Zce=(function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),eue=/<\/?(?:vt:)?variant>/g,tue=/<(?:vt:)([^>]*)>([\s\S]*)</;function vI(t,e){var r=Wr(t),n=t.match(Zce(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(eue,"").match(tue);i&&s.push({v:bs(i[2]),t:i[1]})}),s}var gU=/(^\s|\s$|\n)/;function vo(t,e){return"<"+t+(e.match(gU)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function E2(t){return La(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Xt(t,e,r){return"<"+t+(r!=null?E2(r):"")+(e!=null?(e.match(gU)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Ak(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function rue(t,e){switch(typeof t){case"string":var r=Xt("vt:lpwstr",ms(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Xt((t|0)==t?"vt:i4":"vt:r8",ms(String(t)));case"boolean":return Xt("vt:bool",t?"true":"false")}if(t instanceof Date)return Xt("vt:filetime",Ak(t));throw new Error("Unable to serialize "+t)}function YS(t){if(yn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return bs(Xh(US(t)));throw new Error("Bad input format: expected Buffer or string")}var C2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ai={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Mp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ec={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function nue(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function sue(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=n?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[r+o]=a&255;t[r+6]=(s&15)<<4|a&15,t[r+7]=s>>4|n}var wI=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,a=t[0][n].length;s<a;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},bI=yn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:yf(e)})):wI(t)}:wI,_I=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(Hd(t,s)));return n.join("").replace(fl,"")},XS=yn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(fl,""):_I(t,e,r)}:_I,kI=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},xU=yn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):kI(t,e,r)}:kI,SI=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Fm(t,s)));return n.join("")},_y=yn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):SI(e,r,n)}:SI,yU=function(t,e){var r=tc(t,e);return r>0?_y(t,e+4,e+4+r-1):""},vU=yU,wU=function(t,e){var r=tc(t,e);return r>0?_y(t,e+4,e+4+r-1):""},bU=wU,_U=function(t,e){var r=2*tc(t,e);return r>0?_y(t,e+4,e+4+r-1):""},kU=_U,SU=function(e,r){var n=tc(e,r);return n>0?XS(e,r+4,r+4+n):""},NU=SU,EU=function(t,e){var r=tc(t,e);return r>0?_y(t,e+4,e+4+r):""},CU=EU,AU=function(t,e){return nue(t,e)},G5=AU,QS=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};yn&&(vU=function(e,r){if(!Buffer.isBuffer(e))return yU(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},bU=function(e,r){if(!Buffer.isBuffer(e))return wU(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},kU=function(e,r){if(!Buffer.isBuffer(e))return _U(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},NU=function(e,r){if(!Buffer.isBuffer(e))return SU(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},CU=function(e,r){if(!Buffer.isBuffer(e))return EU(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},G5=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):AU(e,r)},QS=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Fm=function(t,e){return t[e]},Hd=function(t,e){return t[e+1]*256+t[e]},aue=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},tc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},L0=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},iue=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Mx(t,e){var r="",n,s,a=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,yn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Hd(this,u)),u+=2;t*=2;break;case"utf8":r=_y(this,this.l,this.l+t);break;case"utf16le":t*=2,r=XS(this,this.l,this.l+t);break;case"wstr":return Mx.call(this,t,"dbcs");case"lpstr-ansi":r=vU(this,this.l),t=4+tc(this,this.l);break;case"lpstr-cp":r=bU(this,this.l),t=4+tc(this,this.l);break;case"lpwstr":r=kU(this,this.l),t=4+2*tc(this,this.l);break;case"lpp4":t=4+tc(this,this.l),r=NU(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+tc(this,this.l),r=CU(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=Fm(this,this.l+t++))!==0;)a.push(Mv(i));r=a.join("");break;case"_wstr":for(t=0,r="";(i=Hd(this,this.l+t))!==0;)a.push(Mv(i)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Fm(this,u),this.l=u+1,o=Mx.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Mv(Hd(this,u))),u+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Fm(this,u),this.l=u+1,o=Mx.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Mv(Fm(this,u))),u+=1}r=a.join("");break;default:switch(t){case 1:return n=Fm(this,this.l),this.l++,n;case 2:return n=(e==="i"?aue:Hd)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?L0:iue)(this,this.l),this.l+=4,n):(s=tc(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=G5(this,this.l):s=G5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=xU(this,this.l,t);break}}return this.l+=t,r}var oue=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},lue=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},cue=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function uue(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)cue(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,oue(this,e,this.l);break;case 8:if(n=8,r==="f"){sue(this,e,this.l);break}case 16:break;case-4:n=4,lue(this,e,this.l);break}return this.l+=n,this}function TU(t,e){var r=xU(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function xo(t,e){t.l=e,t.read_shift=Mx,t.chk=TU,t.write_shift=uue}function Jo(t,e){t.l+=e}function bt(t){var e=Rh(t);return xo(e,0),e}function vf(t,e,r){if(t){var n,s,a;xo(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=R2[o]||R2[65535];for(n=t.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=u.f&&u.f(t,a,r);if(t.l=l,e(d,u,o))return}}}function Ll(){var t=[],e=yn?256:2048,r=function(u){var d=bt(u);return xo(d,0),d},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,e)))},i=function(){return s(),Ki(t)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Pt(t,e,r,n){var s=+e,a;if(!isNaN(s)){n||(n=R2[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&QS(r)&&t.push(r)}}function Bx(t,e,r){var n=qs(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function NI(t,e,r){var n=qs(t);return n.s=Bx(n.s,e.s,r),n.e=Bx(n.e,e.s,r),n}function Vx(t,e){if(t.cRel&&t.c<0)for(t=qs(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=qs(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=$r(t);return!t.cRel&&t.cRel!=null&&(r=hue(r)),!t.rRel&&t.rRel!=null&&(r=due(r)),r}function f3(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ga(t.s.c)+":"+(t.e.cRel?"":"$")+ga(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Xa(t.s.r)+":"+(t.e.rRel?"":"$")+Xa(t.e.r):Vx(t.s,e.biff)+":"+Vx(t.e,e.biff)}function JS(t){return parseInt(fue(t),10)-1}function Xa(t){return""+(t+1)}function due(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function fue(t){return t.replace(/\$(\d+)$/,"$1")}function ZS(t){for(var e=pue(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ga(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function hue(t){return t.replace(/^([A-Z])/,"$$$1")}function pue(t){return t.replace(/^\$([A-Z])/,"$1")}function mue(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function xa(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function $r(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Fl(t){var e=t.indexOf(":");return e==-1?{s:xa(t),e:xa(t)}:{s:xa(t.slice(0,e)),e:xa(t.slice(e+1))}}function un(t,e){return typeof e>"u"||typeof e=="number"?un(t.s,t.e):(typeof t!="string"&&(t=$r(t)),typeof e!="string"&&(e=$r(e)),t==e?t:t+":"+e)}function Kn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=t.length;for(r=0;n<a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function EI(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Vc(t.z,r?Ii(e):e)}catch{}try{return t.w=Vc((t.XF||{}).numFmtId||(r?14:0),r?Ii(e):e)}catch{return""+e}}function lf(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?wf[t.v]||t.v:e==null?EI(t,t.v):EI(t,e))}function Qh(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function IU(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?xa(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Kn(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[p].length;++g)if(!(typeof e[p][g]>"u")){var m={v:e[p][g]},x=i+p,y=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>y&&(u.s.c=y),u.e.r<x&&(u.e.r=x),u.e.c<y&&(u.e.c=y),e[p][g]&&typeof e[p][g]=="object"&&!Array.isArray(e[p][g])&&!(e[p][g]instanceof Date))m=e[p][g];else if(Array.isArray(m.v)&&(m.f=e[p][g][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Br[14],n.cellDates?(m.t="d",m.w=Vc(m.z,Ii(m.v))):(m.t="n",m.v=Ii(m.v),m.w=Vc(m.z,m.v))):m.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(m.z=a[x][y].z),a[x][y]=m;else{var b=$r({c:y,r:x});a[b]&&a[b].z&&(m.z=a[b].z),a[b]=m}}}return u.s.c<1e7&&(a["!ref"]=un(u)),a}function ag(t,e){return IU(null,t,e)}function gue(t){return t.read_shift(4,"i")}function mu(t,e){return e||(e=bt(4)),e.write_shift(4,t),e}function Qo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Yi(t,e){var r=!1;return e==null&&(r=!0,e=bt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function xue(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function yue(t,e){return e||(e=bt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function eN(t,e){var r=t.l,n=t.read_shift(1),s=Qo(t),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(xue(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function vue(t,e){var r=!1;return e==null&&(r=!0,e=bt(15+4*t.t.length)),e.write_shift(1,0),Yi(t.t,e),r?e.slice(0,e.l):e}var wue=eN;function bue(t,e){var r=!1;return e==null&&(r=!0,e=bt(23+4*t.t.length)),e.write_shift(1,1),Yi(t.t,e),e.write_shift(4,1),yue({},e),r?e.slice(0,e.l):e}function zc(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Bp(t,e){return e==null&&(e=bt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Vp(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Up(t,e){return e==null&&(e=bt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var _ue=Qo,PU=Yi;function tN(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function K5(t,e){var r=!1;return e==null&&(r=!0,e=bt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var kue=Qo,Tk=tN,rN=K5;function nN(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?G5([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):L0(e,0)>>2;return r?s/100:s}function jU(t,e){e==null&&(e=bt(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function RU(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Sue(t,e){return e||(e=bt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var zp=RU,ig=Sue;function Go(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function bp(t,e){return(e||bt(8)).write_shift(8,t,"f")}function Nue(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var u=Q0[s];u&&(e.rgb=T2(u));break;case 2:e.rgb=T2([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Y5(t,e){if(e||(e=bt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function Eue(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function Cue(t,e){e||(e=bt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function LU(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Aue(t){return LU(t,1)}function Tue(t){return LU(t,2)}var sN=2,Nl=3,Vv=11,CI=12,X5=19,Uv=64,Iue=65,Pue=71,jue=4108,Rue=4126,qi=80,FU=81,Lue=[qi,FU],Ik={1:{n:"CodePage",t:sN},2:{n:"Category",t:qi},3:{n:"PresentationFormat",t:qi},4:{n:"ByteCount",t:Nl},5:{n:"LineCount",t:Nl},6:{n:"ParagraphCount",t:Nl},7:{n:"SlideCount",t:Nl},8:{n:"NoteCount",t:Nl},9:{n:"HiddenCount",t:Nl},10:{n:"MultimediaClipCount",t:Nl},11:{n:"ScaleCrop",t:Vv},12:{n:"HeadingPairs",t:jue},13:{n:"TitlesOfParts",t:Rue},14:{n:"Manager",t:qi},15:{n:"Company",t:qi},16:{n:"LinksUpToDate",t:Vv},17:{n:"CharacterCount",t:Nl},19:{n:"SharedDoc",t:Vv},22:{n:"HyperlinksChanged",t:Vv},23:{n:"AppVersion",t:Nl,p:"version"},24:{n:"DigSig",t:Iue},26:{n:"ContentType",t:qi},27:{n:"ContentStatus",t:qi},28:{n:"Language",t:qi},29:{n:"Version",t:qi},255:{},2147483648:{n:"Locale",t:X5},2147483651:{n:"Behavior",t:X5},1919054434:{}},Pk={1:{n:"CodePage",t:sN},2:{n:"Title",t:qi},3:{n:"Subject",t:qi},4:{n:"Author",t:qi},5:{n:"Keywords",t:qi},6:{n:"Comments",t:qi},7:{n:"Template",t:qi},8:{n:"LastAuthor",t:qi},9:{n:"RevNumber",t:qi},10:{n:"EditTime",t:Uv},11:{n:"LastPrinted",t:Uv},12:{n:"CreatedDate",t:Uv},13:{n:"ModifiedDate",t:Uv},14:{n:"PageCount",t:Nl},15:{n:"WordCount",t:Nl},16:{n:"CharCount",t:Nl},17:{n:"Thumbnail",t:Pue},18:{n:"Application",t:qi},19:{n:"DocSecurity",t:Nl},255:{},2147483648:{n:"Locale",t:X5},2147483651:{n:"Behavior",t:X5},1919054434:{}},AI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Fue=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Due(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Oue=Due([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Q0=qs(Oue),wf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},DU={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},jk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},zv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function aN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Mue(t){var e=aN();if(!t||!t.match)return e;var r={};if((t.match(Zo)||[]).forEach(function(n){var s=Wr(n);switch(s[0].replace(Kce,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[jk[s.ContentType]]!==void 0&&e[jk[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Ai.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function OU(t,e){var r=Mce(jk),n=[],s;n[n.length]=Za,n[n.length]=Xt("Types",null,{xmlns:Ai.CT,"xmlns:xsd":Ai.xsd,"xmlns:xsi":Ai.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Xt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=Xt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:zv[l][e.bookType]||zv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Xt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:zv[l][e.bookType]||zv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Xt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function A2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Ux(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Zo)||[]).forEach(function(s){var a=Wr(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:mx(a.Target,e);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function a1(t){var e=[Za,Xt("Relationships",null,{xmlns:Ai.RELS})];return La(t["!id"]).forEach(function(r){e[e.length]=Xt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function fs(t,e,r,n,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var Bue="application/vnd.oasis.opendocument.spreadsheet";function Vue(t,e){for(var r=YS(t),n,s;n=C2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Wr(n[0],!1),s.path=="/"&&s.type!==Bue)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function Uue(t){var e=[Za];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function TI(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function zue(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function $ue(t){var e=[Za];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(TI(t[r][0],t[r][1])),e.push(zue("",t[r][0]));return e.push(TI("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function MU(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+z5.version+"</meta:generator></office:meta></office:document-meta>"}var Oc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],que=(function(){for(var t=new Array(Oc.length),e=0;e<Oc.length;++e){var r=Oc[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t})();function BU(t){var e={};t=bs(t);for(var r=0;r<Oc.length;++r){var n=Oc[r],s=t.match(que[r]);s!=null&&s.length>0&&(e[n[1]]=Gn(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=$s(e[n[1]]))}return e}function h3(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=ms(e),n[n.length]=r?Xt(t,e,r):vo(t,e))}function VU(t,e){var r=e||{},n=[Za,Xt("cp:coreProperties",null,{"xmlns:cp":Ai.CORE_PROPS,"xmlns:dc":Ai.dc,"xmlns:dcterms":Ai.dcterms,"xmlns:dcmitype":Ai.dcmitype,"xmlns:xsi":Ai.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&h3("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Ak(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&h3("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Ak(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Oc.length;++a){var i=Oc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&h3(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var J0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],UU=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function zU(t,e,r,n){var s=[];if(typeof t=="string")s=vI(t,n);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?vI(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Hue(t,e,r){var n={};return e||(e={}),t=bs(t),J0.forEach(function(s){var a=(t.match(N2(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=Gn(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&zU(n.HeadingPairs,n.TitlesOfParts,e,r),e}function $U(t){var e=[],r=Xt;return t||(t={}),t.Application="SheetJS",e[e.length]=Za,e[e.length]=Xt("Properties",null,{xmlns:Ai.EXT_PROPS,"xmlns:vt":Ai.vt}),J0.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ms(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ms(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Wue=/<[^>]+>[^<]*/g;function Gue(t,e){var r={},n="",s=t.match(Wue);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Wr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Gn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Gn(d);break;case"bool":r[n]=Bs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=$s(d);break;case"cy":case"error":r[n]=Gn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function qU(t){var e=[Za,Xt("Properties",null,{xmlns:Ai.CUST_PROPS,"xmlns:vt":Ai.vt})];if(!t)return e.join("");var r=1;return La(t).forEach(function(s){++r,e[e.length]=Xt("property",rue(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ms(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Rk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},p3;function Kue(t,e,r){p3||(p3=p4(Rk)),e=p3[e]||e,t[e]=r}function Yue(t,e){var r=[];return La(Rk).map(function(n){for(var s=0;s<Oc.length;++s)if(Oc[s][1]==n)return Oc[s];for(s=0;s<J0.length;++s)if(J0[s][1]==n)return J0[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(vo(Rk[n[1]]||n[1],s))}}),Xt("DocumentProperties",r.join(""),{xmlns:ec.o})}function Xue(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&La(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<Oc.length;++i)if(a==Oc[i][1])return;for(i=0;i<J0.length;++i)if(a==J0[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Xt(mI(a),o,{"dt:dt":l}))}}),e&&La(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Xt(mI(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ec.o+'">'+s.join("")+"</"+n+">"}function iN(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Que(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=bt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function HU(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function WU(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function GU(t,e,r){return e===31?WU(t):HU(t,e,r)}function Lk(t,e,r){return GU(t,e,r===!1?0:4)}function Jue(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return GU(t,e,0)}function Zue(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(fl,""),t.l-s&2&&(t.l+=2)}return r}function ede(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(fl,"");return r}function tde(t){var e=t.l,r=Q5(t,FU);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Q5(t,Nl);return[r,n]}function rde(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(tde(t));return r}function II(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var a=t.read_shift(4),i=t.read_shift(4);n[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(fl,"").replace(px,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function KU(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function nde(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Q5(t,e,r){var n=t.read_shift(2),s,a=r||{};if(t.l+=2,e!==CI&&n!==e&&Lue.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===CI?n:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return HU(t,n,4).replace(fl,"");case 31:return WU(t);case 64:return iN(t);case 65:return KU(t);case 71:return nde(t);case 80:return Lk(t,n,!a.raw).replace(fl,"");case 81:return Jue(t,n).replace(fl,"");case 4108:return rde(t);case 4126:case 4127:return n==4127?Zue(t):ede(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function PI(t,e){var r=bt(4),n=bt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=bt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Que(e);break;case 31:case 80:for(n=bt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Ki([r,n])}function jI(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=t.read_shift(4),p=t.read_shift(4);a[i]=[d,p+r]}a.sort(function(P,T){return P[1]-T[1]});var g={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var m=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,m=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],m=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],m=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(m=!1,t.l=a[i][1]),m)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var x=e[a[i][0]];if(g[x.n]=Q5(t,x.t,{raw:!0}),x.p==="version"&&(g[x.n]=String(g[x.n]>>16)+"."+("0000"+String(g[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(g[x.n]){case 0:g[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:uu(o=g[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[x.n])}}else if(a[i][0]===1){if(o=g.CodePage=Q5(t,sN),uu(o),l!==-1){var y=t.l;t.l=a[l][1],u=II(t,o),t.l=y}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}u=II(t,o)}else{var b=u[a[i][0]],S;switch(t[t.l]){case 65:t.l+=4,S=KU(t);break;case 30:t.l+=4,S=Lk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,S=Lk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,S=t.read_shift(4,"i");break;case 19:t.l+=4,S=t.read_shift(4);break;case 5:t.l+=4,S=t.read_shift(8,"f");break;case 11:t.l+=4,S=$a(t,4);break;case 64:t.l+=4,S=$s(iN(t));break;default:throw new Error("unparsed value: "+t[t.l])}g[b]=S}}return t.l=r+n,g}var YU=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function sde(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function RI(t,e,r){var n=bt(8),s=[],a=[],i=8,o=0,l=bt(8),u=bt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!e){u=bt(8),u.write_shift(4,0),s.unshift(u);var d=[bt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var p=t[o][0];for(l=bt(8+2*(p.length+1)+(p.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,p.length+1),l.write_shift(0,p,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ki(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(YU.indexOf(t[o][0])>-1||UU.indexOf(t[o][0])>-1)&&t[o][1]!=null){var g=t[o][1],m=0;if(e){m=+e[t[o][0]];var x=r[m];if(x.p=="version"&&typeof g=="string"){var y=g.split(".");g=(+y[0]<<16)+(+y[1]||0)}l=PI(x.t,g)}else{var b=sde(g);b==-1&&(b=31,g=String(g)),l=PI(b,g)}a.push(l),u=bt(8),u.write_shift(4,e?m:2+o),s.push(u),i+=8+l.length}var S=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,S),S+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),Ki([n].concat(s).concat(a))}function LI(t,e,r){var n=t.content;if(!n)return{};xo(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Rr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var p=jI(n,e),g={SystemIdentifier:u};for(var m in p)g[m]=p[m];if(g.FMTID=a,s===1)return g;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=jI(n,null)}catch{}for(m in x)g[m]=x[m];return g.FMTID=[a,i],g}function FI(t,e,r,n,s,a){var i=bt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Rr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=RI(t,r,n);if(o.push(l),s){var u=RI(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Ki(o)}function Jf(t,e){return t.read_shift(e),null}function ade(t,e){e||(e=bt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function ide(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function $a(t,e){return t.read_shift(e)===1}function cl(t,e){return e||(e=bt(2)),e.write_shift(2,+!!t),e}function di(t){return t.read_shift(2,"u")}function Rc(t,e){return e||(e=bt(2)),e.write_shift(2,t),e}function XU(t,e){return ide(t,e,di)}function ode(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function QU(t,e,r){return r||(r=bt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function ky(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?t.read_shift(n,s):"";return i}function lde(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return s&&(t.l+=4*i),n&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function cde(t){var e=t.t||"",r=bt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=bt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return Ki(s)}function _p(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Sy(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):_p(t,n,r)}function $p(t,e,r){if(r.biff>5)return Sy(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function JU(t,e,r){return r||(r=bt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function ude(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function dde(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(fl,"");return n&&(t.l+=24),s}function fde(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(fl,"");return r+i}function hde(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return dde(t);case"0303000000000000c000000000000046":return fde(t);default:throw new Error("Unsupported Moniker "+r)}}function $v(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(fl,""):"";return r}function DI(t,e){e||(e=bt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function pde(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var a,i,o,l,u="",d,p;s&16&&(a=$v(t,r-t.l)),s&128&&(i=$v(t,r-t.l)),(s&257)===257&&(o=$v(t,r-t.l)),(s&257)===1&&(l=hde(t,r-t.l)),s&8&&(u=$v(t,r-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(p=iN(t)),t.l=r;var g=i||o||l||"";g&&u&&(g+="#"+u),g||(g="#"+u),s&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var m={Target:g};return d&&(m.guid=d),p&&(m.time=p),a&&(m.Tooltip=a),m}function mde(t){var e=bt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(a==28)n=n.slice(1),DI(n,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),a&8&&DI(s>-1?n.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function ZU(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function ez(t,e){var r=ZU(t);return r[3]=0,r}function yd(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function kp(t,e,r,n){return n||(n=bt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function gde(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function xde(t,e,r){return e===0?"":$p(t,e,r)}function yde(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),a=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[s,a,i]}function tz(t){var e=t.read_shift(2),r=nN(t);return[e,r]}function vde(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=ky(t,e,r),a=t.read_shift(2);if(n-=t.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return t.l+=a,s}function x4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function rz(t,e){return e||(e=bt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function nz(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var wde=nz;function sz(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function bde(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function _de(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Do(t){t.l+=2,t.l+=t.read_shift(2)}var kde={0:Do,4:Do,5:Do,6:Do,7:_de,8:Do,9:Do,10:Do,11:Do,12:Do,13:bde,14:Do,15:Do,16:Do,17:Do,18:Do,19:Do,20:Do,21:sz};function Sde(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(kde[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function qv(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function oN(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=bt(s);return a.write_shift(2,n),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Nde(t,e){return e===0||t.read_shift(2),1200}function Ede(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=$p(t,0,r);return t.read_shift(e+n-t.l),s}function Cde(t,e){var r=!e||e.biff==8,n=bt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Ade(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Tde(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=ky(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function Ide(t,e){var r=!e||e.biff>=8?2:1,n=bt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Pde(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<r;++i)a.push(lde(t));return a.Count=n,a.Unique=s,a}function jde(t,e){var r=bt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=cde(t[s]);var a=Ki([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Rde(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Lde(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Fde(t){var e=gde(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Dde(t){return t.read_shift(2),t.read_shift(4)}function OI(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Ode(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Mde(){var t=bt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Bde(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Vde(t){var e=bt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Ude(){}function zde(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=ky(t,0,r),n}function $de(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,a=bt(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function qde(t){var e=yd(t);return e.isst=t.read_shift(4),e}function Hde(t,e,r,n){var s=bt(10);return kp(t,e,n,s),s.write_shift(4,r),s}function Wde(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=yd(t);r.biff==2&&t.l++;var a=Sy(t,n-t.l,r);return s.val=a,s}function Gde(t,e,r,n,s){var a=!s||s.biff==8,i=bt(8+ +a+(1+a)*r.length);return kp(t,e,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Kde(t,e,r){var n=t.read_shift(2),s=$p(t,0,r);return[n,s]}function Yde(t,e,r,n){var s=r&&r.biff==5;n||(n=bt(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Xde=$p;function MI(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function Qde(t,e){var r=e.biff==8||!e.biff?4:2,n=bt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Jde(t){var e=t.read_shift(2),r=t.read_shift(2),n=tz(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Zde(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(tz(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function efe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function tfe(t,e,r,n){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=Fue[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function rfe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=tfe(t,e,n.fStyle,r),n}function BI(t,e,r,n){var s=r&&r.biff==5;n||(n=bt(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function nfe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function sfe(t){var e=bt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function VI(t,e,r){var n=yd(t);(r.biff==2||e==9)&&++t.l;var s=ode(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function afe(t,e,r,n,s,a){var i=bt(8);return kp(t,e,n,i),QU(r,a,i),i}function ife(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=yd(t),s=Go(t);return n.val=s,n}function ofe(t,e,r,n){var s=bt(14);return kp(t,e,n,s),bp(r,s),s}var UI=xde;function lfe(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=_p(t,a),o=[];n>t.l;)o.push(Sy(t));return[a,s,i,o]}function zI(t,e,r){var n=t.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=vde(t,e-2,r)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var cfe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function $I(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=_p(t,i,r);s&32&&(u=cfe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var p=n==t.l||o===0||!(d>0)?[]:Sme(t,d,r,o);return{chKey:a,Name:u,itab:l,rgce:p}}function az(t,e,r){if(r.biff<8)return ufe(t,e,r);for(var n=[],s=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(yde(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function ufe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=ky(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function dfe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),a=_p(t,n,r),i=_p(t,s,r);return[a,i]}function ffe(t,e,r){var n=nz(t);t.l++;var s=t.read_shift(1);return e-=8,[Nme(t,e,r),s,n]}function qI(t,e,r){var n=wde(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,_me(t,e,r)]}function hfe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function pfe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=$p(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,i,a]}}function mfe(t,e,r){return pfe(t,e,r)}function gfe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(x4(t));return r}function xfe(t){var e=bt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)rz(t[r],e);return e}function yfe(t,e,r){if(r&&r.biff<8)return wfe(t,e,r);var n=sz(t),s=Sde(t,e-22,n[1]);return{cmo:n,ft:s}}var vfe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function wfe(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((vfe[n]||Jo)(t,e,r)),{cmo:[s,n,a],ft:i}}function bfe(t,e,r){var n=t.l,s="";try{t.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=ude(t,6,r);var o=t.read_shift(2);t.read_shift(2),di(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],p=_p(t,t.lens[u+1]-t.lens[u]-1);if(s+=p,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function _fe(t,e){var r=x4(t);t.l+=16;var n=pde(t,e-24);return[r,n]}function kfe(t){var e=bt(24),r=xa(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return Ki([e,mde(t[1])])}function Sfe(t,e){t.read_shift(2);var r=x4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(fl,""),[r,n]}function Nfe(t){var e=t[1].Tooltip,r=bt(10+2*(e.length+1));r.write_shift(2,2048);var n=xa(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function Efe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=AI[r]||r,r=t.read_shift(2),e[1]=AI[r]||r,e}function Cfe(t){return t||(t=bt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Afe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(ez(t));return r}function Tfe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(ez(t));return r}function Ife(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function iz(t,e,r){if(!r.cellStyles)return Jo(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),a=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function Pfe(t,e){var r=bt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function jfe(t,e){var r={};return e<32||(t.l+=16,r.header=Go(t),r.footer=Go(t),t.l+=2),r}function Rfe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function Lfe(t){for(var e=bt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var Ffe=yd,Dfe=XU,Ofe=Sy;function Mfe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function Bfe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=yd(t);++t.l;var s=$p(t,e-7,r);return n.t="str",n.val=s,n}function Vfe(t){var e=yd(t);++t.l;var r=Go(t);return e.t="n",e.val=r,e}function Ufe(t,e,r){var n=bt(15);return Ay(n,t,e),n.write_shift(8,r,"f"),n}function zfe(t){var e=yd(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function $fe(t,e,r){var n=bt(9);return Ay(n,t,e),n.write_shift(2,r),n}function qfe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Hfe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Wfe(t,e,r){var n=t.l+e,s=yd(t),a=t.read_shift(2),i=_p(t,a,r);return t.l=n,s.t="str",s.val=i,s}var Gfe=[2,3,48,49,131,139,140,245],Fk=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=p4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=Rh(1);switch(l.type){case"base64":d=rc(cc(o));break;case"binary":d=rc(o);break;case"buffer":case"array":d=o;break}xo(d,0);var p=d.read_shift(1),g=!!(p&136),m=!1,x=!1;switch(p){case 2:break;case 3:break;case 48:m=!0,g=!0;break;case 49:m=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var y=0,b=521;p==2&&(y=d.read_shift(2)),d.l+=3,p!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),p!=2&&(b=d.read_shift(2));var S=d.read_shift(2),P=l.codepage||1252;p!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(P=t[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var T=[],O={},W=Math.min(d.length,p==2?521:b-10-(m?264:0)),Y=x?32:11;d.l<W&&d[d.l]!=13;)switch(O={},O.name=_2.utils.decode(P,d.slice(d.l,d.l+Y)).replace(/[\u0000\r\n].*$/g,""),d.l+=Y,O.type=String.fromCharCode(d.read_shift(1)),p!=2&&!x&&(O.offset=d.read_shift(4)),O.len=d.read_shift(1),p==2&&(O.offset=d.read_shift(2)),O.dec=d.read_shift(1),O.name.length&&T.push(O),p!=2&&(d.l+=x?13:14),O.type){case"B":(!m||O.len!=8)&&l.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var L=0,A=0;for(u[0]=[],A=0;A!=T.length;++A)u[0][A]=T[A].name;for(;y-- >0;){if(d[d.l]===42){d.l+=S;continue}for(++d.l,u[++L]=[],A=0,A=0;A!=T.length;++A){var N=d.slice(d.l,d.l+T[A].len);d.l+=T[A].len,xo(N,0);var D=_2.utils.decode(P,N);switch(T[A].type){case"C":D.trim().length&&(u[L][A]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[L][A]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[L][A]=D;break;case"F":u[L][A]=parseFloat(D.trim());break;case"+":case"I":u[L][A]=x?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[L][A]=!0;break;case"N":case"F":u[L][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));u[L][A]="##MEMO##"+(x?parseInt(D.trim(),10):N.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[L][A]=+D||0);break;case"@":u[L][A]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[L][A]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[L][A]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[L][A]=-N.read_shift(-8,"f");break;case"B":if(m&&T[A].len==8){u[L][A]=N.read_shift(8,"f");break}case"G":case"P":N.l+=T[A].len;break;case"0":if(T[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[A].type)}}}if(p!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=T,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ag(r(o,u),u);return d["!cols"]=u.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete u.DBF,d}function s(o,l){try{return Qh(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&uu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ll(),p=eb(o,{header:1,raw:!0,cellDates:!0}),g=p[0],m=p.slice(1),x=o["!cols"]||[],y=0,b=0,S=0,P=1;for(y=0;y<g.length;++y){if(((x[y]||{}).DBF||{}).name){g[y]=x[y].DBF.name,++S;continue}if(g[y]!=null){if(++S,typeof g[y]=="number"&&(g[y]=g[y].toString(10)),typeof g[y]!="string")throw new Error("DBF Invalid column name "+g[y]+" |"+typeof g[y]+"|");if(g.indexOf(g[y])!==y){for(b=0;b<1024;++b)if(g.indexOf(g[y]+"_"+b)==-1){g[y]+="_"+b;break}}}}var T=Kn(o["!ref"]),O=[],W=[],Y=[];for(y=0;y<=T.e.c-T.s.c;++y){var L="",A="",N=0,D=[];for(b=0;b<m.length;++b)m[b][y]!=null&&D.push(m[b][y]);if(D.length==0||g[y]==null){O[y]="?";continue}for(b=0;b<D.length;++b){switch(typeof D[b]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=D[b]instanceof Date?"D":"C";break;default:A="C"}N=Math.max(N,String(D[b]).length),L=L&&L!=A?"C":A}N>250&&(N=250),A=((x[y]||{}).DBF||{}).type,A=="C"&&x[y].DBF.len>N&&(N=x[y].DBF.len),L=="B"&&A=="N"&&(L="N",Y[y]=x[y].DBF.dec,N=x[y].DBF.len),W[y]=L=="C"||A=="N"?N:a[L]||0,P+=W[y],O[y]=L}var j=d.next(32);for(j.write_shift(4,318902576),j.write_shift(4,m.length),j.write_shift(2,296+32*S),j.write_shift(2,P),y=0;y<4;++y)j.write_shift(4,0);for(j.write_shift(4,0|(+e[YV]||3)<<8),y=0,b=0;y<g.length;++y)if(g[y]!=null){var F=d.next(32),M=(g[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,M,"sbcs"),F.write_shift(1,O[y]=="?"?"C":O[y],"sbcs"),F.write_shift(4,b),F.write_shift(1,W[y]||a[O[y]]||0),F.write_shift(1,Y[y]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),b+=W[y]||a[O[y]]||0}var Z=d.next(264);for(Z.write_shift(4,13),y=0;y<65;++y)Z.write_shift(4,0);for(y=0;y<m.length;++y){var ue=d.next(P);for(ue.write_shift(1,0),b=0;b<g.length;++b)if(g[b]!=null)switch(O[b]){case"L":ue.write_shift(1,m[y][b]==null?63:m[y][b]?84:70);break;case"B":ue.write_shift(8,m[y][b]||0,"f");break;case"N":var pe="0";for(typeof m[y][b]=="number"&&(pe=m[y][b].toFixed(Y[b]||0)),S=0;S<W[b]-pe.length;++S)ue.write_shift(1,32);ue.write_shift(1,pe,"sbcs");break;case"D":m[y][b]?(ue.write_shift(4,("0000"+m[y][b].getFullYear()).slice(-4),"sbcs"),ue.write_shift(2,("00"+(m[y][b].getMonth()+1)).slice(-2),"sbcs"),ue.write_shift(2,("00"+m[y][b].getDate()).slice(-2),"sbcs")):ue.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(m[y][b]!=null?m[y][b]:"").slice(0,W[b]);for(ue.write_shift(1,fe,"sbcs"),S=0;S<W[b]-fe.length;++S)ue.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),oz=(function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+La(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,m){var x=t[m];return typeof x=="number"?tI(x):x},n=function(g,m,x){var y=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?g:tI(y)};t["|"]=254;function s(g,m){switch(m.type){case"base64":return a(cc(g),m);case"binary":return a(g,m);case"buffer":return a(yn&&Buffer.isBuffer(g)?g.toString("binary"):Xh(g),m);case"array":return a(wp(g),m)}throw new Error("Unrecognized type "+m.type)}function a(g,m){var x=g.split(/[\n\r]+/),y=-1,b=-1,S=0,P=0,T=[],O=[],W=null,Y={},L=[],A=[],N=[],D=0,j;for(+m.codepage>=0&&uu(+m.codepage);S!==x.length;++S){D=0;var F=x[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),M=F.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),Z=M[0],ue;if(F.length>0)switch(Z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&O.push(F.slice(3).replace(/;;/g,";"));break;case"C":var pe=!1,fe=!1,te=!1,H=!1,ie=-1,K=-1;for(P=1;P<M.length;++P)switch(M[P].charAt(0)){case"A":break;case"X":b=parseInt(M[P].slice(1))-1,fe=!0;break;case"Y":for(y=parseInt(M[P].slice(1))-1,fe||(b=0),j=T.length;j<=y;++j)T[j]=[];break;case"K":ue=M[P].slice(1),ue.charAt(0)==='"'?ue=ue.slice(1,ue.length-1):ue==="TRUE"?ue=!0:ue==="FALSE"?ue=!1:isNaN(pu(ue))?isNaN(F1(ue).getDate())||(ue=$s(ue)):(ue=pu(ue),W!==null&&ng(W)&&(ue=g4(ue))),pe=!0;break;case"E":H=!0;var I=i1(M[P].slice(1),{r:y,c:b});T[y][b]=[T[y][b],I];break;case"S":te=!0,T[y][b]=[T[y][b],"S5S"];break;case"G":break;case"R":ie=parseInt(M[P].slice(1))-1;break;case"C":K=parseInt(M[P].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}if(pe&&(T[y][b]&&T[y][b].length==2?T[y][b][0]=ue:T[y][b]=ue,W=null),te){if(H)throw new Error("SYLK shared formula cannot have own formula");var z=ie>-1&&T[ie][K];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");T[y][b][1]=Nz(z[1],{r:y-ie,c:b-K})}break;case"F":var X=0;for(P=1;P<M.length;++P)switch(M[P].charAt(0)){case"X":b=parseInt(M[P].slice(1))-1,++X;break;case"Y":for(y=parseInt(M[P].slice(1))-1,j=T.length;j<=y;++j)T[j]=[];break;case"M":D=parseInt(M[P].slice(1))/20;break;case"F":break;case"G":break;case"P":W=O[parseInt(M[P].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=M[P].slice(1).split(" "),j=parseInt(N[0],10);j<=parseInt(N[1],10);++j)D=parseInt(N[2],10),A[j-1]=D===0?{hidden:!0}:{wch:D},Lh(A[j-1]);break;case"C":b=parseInt(M[P].slice(1))-1,A[b]||(A[b]={});break;case"R":y=parseInt(M[P].slice(1))-1,L[y]||(L[y]={}),D>0?(L[y].hpt=D,L[y].hpx=O1(D)):D===0&&(L[y].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}X<1&&(W=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+F)}}return L.length>0&&(Y["!rows"]=L),A.length>0&&(Y["!cols"]=A),m&&m.sheetRows&&(T=T.slice(0,m.sheetRows)),[T,Y]}function i(g,m){var x=s(g,m),y=x[0],b=x[1],S=ag(y,m);return La(b).forEach(function(P){S[P]=b[P]}),S}function o(g,m){return Qh(i(g,m),m)}function l(g,m,x,y){var b="C;Y"+(x+1)+";X"+(y+1)+";K";switch(g.t){case"n":b+=g.v||0,g.f&&!g.F&&(b+=";E"+hN(g.f,{r:x,c:y}));break;case"b":b+=g.v?"TRUE":"FALSE";break;case"e":b+=g.w||g.v;break;case"d":b+='"'+(g.w||g.v)+'"';break;case"s":b+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(g,m){m.forEach(function(x,y){var b="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=I2(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=P2(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&g.push(b)})}function d(g,m){m.forEach(function(x,y){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*j2(x.hpx)+";"),b.length>2&&g.push(b+"R"+(y+1))})}function p(g,m){var x=["ID;PWXL;N;E"],y=[],b=Kn(g["!ref"]),S,P=Array.isArray(g),T=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&d(x,g["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var O=b.s.r;O<=b.e.r;++O)for(var W=b.s.c;W<=b.e.c;++W){var Y=$r({r:O,c:W});S=P?(g[O]||[])[W]:g[Y],!(!S||S.v==null&&(!S.f||S.F))&&y.push(l(S,g,O,W))}return x.join(T)+T+y.join(T)+T+"E"+T}return{to_workbook:o,to_sheet:i,from_sheet:p}})(),lz=(function(){function t(a,i){switch(i.type){case"base64":return e(cc(a),i);case"binary":return e(a,i);case"buffer":return e(yn&&Buffer.isBuffer(a)?a.toString("binary"):Xh(a),i);case"array":return e(wp(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,p=[];d!==o.length;++d){if(o[d].trim()==="BOT"){p[++l]=[],u=0;continue}if(!(l<0)){var g=o[d].trim().split(","),m=g[0],x=g[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+m){case-1:if(y==="BOT"){p[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?p[l][u]=!0:y==="FALSE"?p[l][u]=!1:isNaN(pu(x))?isNaN(F1(x).getDate())?p[l][u]=x:p[l][u]=$s(x):p[l][u]=pu(x),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),p[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(p=p.slice(0,i.sheetRows)),p}function r(a,i){return ag(t(a,i),i)}function n(a,i){return Qh(r(a,i),i)}var s=(function(){var a=function(l,u,d,p,g){l.push(u),l.push(d+","+p),l.push('"'+g.replace(/"/g,'""')+'"')},i=function(l,u,d,p){l.push(u+","+d),l.push(u==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(l){var u=[],d=Kn(l["!ref"]),p,g=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=$r({r:m,c:x});if(p=g?(l[m]||[])[x]:l[y],!p){i(u,1,0,"");continue}switch(p.t){case"n":var b=p.w;!b&&p.v!=null&&(b=p.v),b==null?p.f&&!p.F?i(u,1,0,"="+p.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Vc(p.z||Br[14],Ii($s(p.v)))),i(u,0,p.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var S=`\r
`,P=u.join(S);return P}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),cz=(function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,g){for(var m=p.split(`
`),x=-1,y=-1,b=0,S=[];b!==m.length;++b){var P=m[b].trim().split(":");if(P[0]==="cell"){var T=xa(P[1]);if(S.length<=T.r)for(x=S.length;x<=T.r;++x)S[x]||(S[x]=[]);switch(x=T.r,y=T.c,P[2]){case"t":S[x][y]=t(P[3]);break;case"v":S[x][y]=+P[3];break;case"vtf":var O=P[P.length-1];case"vtc":switch(P[3]){case"nl":S[x][y]=!!+P[4];break;default:S[x][y]=+P[4];break}P[2]=="vtf"&&(S[x][y]=[S[x][y],O])}}}return g&&g.sheetRows&&(S=S.slice(0,g.sheetRows)),S}function n(p,g){return ag(r(p,g),g)}function s(p,g){return Qh(n(p,g),g)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(p){if(!p||!p["!ref"])return"";for(var g=[],m=[],x,y="",b=Fl(p["!ref"]),S=Array.isArray(p),P=b.s.r;P<=b.e.r;++P)for(var T=b.s.c;T<=b.e.c;++T)if(y=$r({r:P,c:T}),x=S?(p[P]||[])[T]:p[y],!(!x||x.v==null||x.t==="z")){switch(m=["cell",y,"t"],x.t){case"s":case"str":m.push(e(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=e(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var O=Ii($s(x.v));m[2]="vtc",m[3]="nd",m[4]=""+O,m[5]=x.w||Vc(x.z||Br[14],O);break;case"e":continue}g.push(m.join(":"))}return g.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function d(p){return[a,i,o,i,u(p),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),D1=(function(){function t(d,p,g,m,x){x.raw?p[g][m]=d:d===""||(d==="TRUE"?p[g][m]=!0:d==="FALSE"?p[g][m]=!1:isNaN(pu(d))?isNaN(F1(d).getDate())?p[g][m]=d:p[g][m]=$s(d):p[g][m]=pu(d))}function e(d,p){var g=p||{},m=[];if(!d||d.length===0)return m;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var b=10,S=0,P=0;P<=y;++P)S=x[P].indexOf(" "),S==-1?S=x[P].length:S++,b=Math.max(b,S);for(P=0;P<=y;++P){m[P]=[];var T=0;for(t(x[P].slice(0,b).trim(),m,P,T,g),T=1;T<=(x[P].length-b)/10+1;++T)t(x[P].slice(b+(T-1)*10,b+T*10).trim(),m,P,T,g)}return g.sheetRows&&(m=m.slice(0,g.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var p={},g=!1,m=0,x=0;m<d.length;++m)(x=d.charCodeAt(m))==34?g=!g:!g&&x in r&&(p[x]=(p[x]||0)+1);x=[];for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&x.push([p[m],m]);if(!x.length){p=n;for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&x.push([p[m],m])}return x.sort(function(y,b){return y[0]-b[0]||n[y[1]]-n[b[1]]}),r[x.pop()[1]]||44}function a(d,p){var g=p||{},m="",x=g.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=s(d.slice(0,1024)):g&&g.FS?m=g.FS:m=s(d.slice(0,1024));var b=0,S=0,P=0,T=0,O=0,W=m.charCodeAt(0),Y=!1,L=0,A=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=g.dateNF!=null?Rce(g.dateNF):null;function D(){var j=d.slice(T,O),F={};if(j.charAt(0)=='"'&&j.charAt(j.length-1)=='"'&&(j=j.slice(1,-1).replace(/""/g,'"')),j.length===0)F.t="z";else if(g.raw)F.t="s",F.v=j;else if(j.trim().length===0)F.t="s",F.v=j;else if(j.charCodeAt(0)==61)j.charCodeAt(1)==34&&j.charCodeAt(j.length-1)==34?(F.t="s",F.v=j.slice(2,-1).replace(/""/g,'"')):lpe(j)?(F.t="n",F.f=j.slice(1)):(F.t="s",F.v=j);else if(j=="TRUE")F.t="b",F.v=!0;else if(j=="FALSE")F.t="b",F.v=!1;else if(!isNaN(P=pu(j)))F.t="n",g.cellText!==!1&&(F.w=j),F.v=P;else if(!isNaN(F1(j).getDate())||N&&j.match(N)){F.z=g.dateNF||Br[14];var M=0;N&&j.match(N)&&(j=Lce(j,g.dateNF,j.match(N)||[]),M=1),g.cellDates?(F.t="d",F.v=$s(j,M)):(F.t="n",F.v=Ii($s(j,M))),g.cellText!==!1&&(F.w=Vc(F.z,F.v instanceof Date?Ii(F.v):F.v)),g.cellNF||delete F.z}else F.t="s",F.v=j;if(F.t=="z"||(g.dense?(x[b]||(x[b]=[]),x[b][S]=F):x[$r({c:S,r:b})]=F),T=O+1,A=d.charCodeAt(T),y.e.c<S&&(y.e.c=S),y.e.r<b&&(y.e.r=b),L==W)++S;else if(S=0,++b,g.sheetRows&&g.sheetRows<=b)return!0}e:for(;O<d.length;++O)switch(L=d.charCodeAt(O)){case 34:A===34&&(Y=!Y);break;case W:case 10:case 13:if(!Y&&D())break e;break}return O-T>0&&D(),x["!ref"]=un(y),x}function i(d,p){return!(p&&p.PRN)||p.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,p):ag(e(d,p),p)}function o(d,p){var g="",m=p.type=="string"?[0,0,0,0]:bN(d,p);switch(p.type){case"base64":g=cc(d);break;case"binary":g=d;break;case"buffer":p.codepage==65001?g=d.toString("utf8"):p.codepage&&typeof _2<"u"||(g=yn&&Buffer.isBuffer(d)?d.toString("binary"):Xh(d));break;case"array":g=wp(d);break;case"string":g=d;break;default:throw new Error("Unrecognized type "+p.type)}return m[0]==239&&m[1]==187&&m[2]==191?g=bs(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=bs(g):p.type=="binary"&&typeof _2<"u",g.slice(0,19)=="socialcalc:version:"?cz.to_sheet(p.type=="string"?g:bs(g),p):i(g,p)}function l(d,p){return Qh(o(d,p),p)}function u(d){for(var p=[],g=Kn(d["!ref"]),m,x=Array.isArray(d),y=g.s.r;y<=g.e.r;++y){for(var b=[],S=g.s.c;S<=g.e.c;++S){var P=$r({r:y,c:S});if(m=x?(d[y]||[])[S]:d[P],!m||m.v==null){b.push("          ");continue}for(var T=(m.w||(lf(m),m.w)||"").slice(0,10);T.length<10;)T+=" ";b.push(T+(S===0?" ":""))}p.push(b.join(""))}return p.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})();function Kfe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=oz.to_workbook(t,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return D1.to_workbook(t,e)}}var Z0=(function(){function t(I,z,X){if(I){xo(I,I.l||0);for(var J=X.Enum||ie;I.l<I.length;){var se=I.read_shift(2),le=J[se]||J[65535],ve=I.read_shift(2),xe=I.l+ve,Ee=le.f&&le.f(I,ve,X);if(I.l=xe,z(Ee,le,se))return}}}function e(I,z){switch(z.type){case"base64":return r(rc(cc(I)),z);case"binary":return r(rc(I),z);case"buffer":case"array":return r(I,z)}throw"Unsupported type "+z.type}function r(I,z){if(!I)return I;var X=z||{},J=X.dense?[]:{},se="Sheet1",le="",ve=0,xe={},Ee=[],ke=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Fe=X.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)X.Enum=ie,t(I,function(Ae,Be,Oe){switch(Oe){case 0:X.vers=Ae,Ae>=4096&&(X.qpro=!0);break;case 6:oe=Ae;break;case 204:Ae&&(le=Ae);break;case 222:le=Ae;break;case 15:case 51:X.qpro||(Ae[1].v=Ae[1].v.slice(1));case 13:case 14:case 16:Oe==14&&(Ae[2]&112)==112&&(Ae[2]&15)>1&&(Ae[2]&15)<15&&(Ae[1].z=X.dateNF||Br[14],X.cellDates&&(Ae[1].t="d",Ae[1].v=g4(Ae[1].v))),X.qpro&&Ae[3]>ve&&(J["!ref"]=un(oe),xe[se]=J,Ee.push(se),J=X.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},ve=Ae[3],se=le||"Sheet"+(ve+1),le="");var pt=X.dense?(J[Ae[0].r]||[])[Ae[0].c]:J[$r(Ae[0])];if(pt){pt.t=Ae[1].t,pt.v=Ae[1].v,Ae[1].z!=null&&(pt.z=Ae[1].z),Ae[1].f!=null&&(pt.f=Ae[1].f);break}X.dense?(J[Ae[0].r]||(J[Ae[0].r]=[]),J[Ae[0].r][Ae[0].c]=Ae[1]):J[$r(Ae[0])]=Ae[1];break}},X);else if(I[2]==26||I[2]==14)X.Enum=K,I[2]==14&&(X.qpro=!0,I.l=0),t(I,function(Ae,Be,Oe){switch(Oe){case 204:se=Ae;break;case 22:Ae[1].v=Ae[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ae[3]>ve&&(J["!ref"]=un(oe),xe[se]=J,Ee.push(se),J=X.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},ve=Ae[3],se="Sheet"+(ve+1)),Fe>0&&Ae[0].r>=Fe)break;X.dense?(J[Ae[0].r]||(J[Ae[0].r]=[]),J[Ae[0].r][Ae[0].c]=Ae[1]):J[$r(Ae[0])]=Ae[1],oe.e.c<Ae[0].c&&(oe.e.c=Ae[0].c),oe.e.r<Ae[0].r&&(oe.e.r=Ae[0].r);break;case 27:Ae[14e3]&&(ke[Ae[14e3][0]]=Ae[14e3][1]);break;case 1537:ke[Ae[0]]=Ae[1],Ae[0]==ve&&(se=Ae[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(J["!ref"]=un(oe),xe[le||se]=J,Ee.push(le||se),!ke.length)return{SheetNames:Ee,Sheets:xe};for(var Pe={},ne=[],ye=0;ye<ke.length;++ye)xe[Ee[ye]]?(ne.push(ke[ye]||Ee[ye]),Pe[ke[ye]]=xe[ke[ye]]||xe[Ee[ye]]):(ne.push(ke[ye]),Pe[ke[ye]]={"!ref":"A1"});return{SheetNames:ne,Sheets:Pe}}function n(I,z){var X=z||{};if(+X.codepage>=0&&uu(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Ll(),se=Kn(I["!ref"]),le=Array.isArray(I),ve=[];Qt(J,0,a(1030)),Qt(J,6,l(se));for(var xe=Math.min(se.e.r,8191),Ee=se.s.r;Ee<=xe;++Ee)for(var ke=Xa(Ee),oe=se.s.c;oe<=se.e.c;++oe){Ee===se.s.r&&(ve[oe]=ga(oe));var Fe=ve[oe]+ke,Pe=le?(I[Ee]||[])[oe]:I[Fe];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")(Pe.v|0)==Pe.v&&Pe.v>=-32768&&Pe.v<=32767?Qt(J,13,m(Ee,oe,Pe.v)):Qt(J,14,y(Ee,oe,Pe.v));else{var ne=lf(Pe);Qt(J,15,p(Ee,oe,ne.slice(0,239)))}}return Qt(J,1),J.end()}function s(I,z){var X=z||{};if(+X.codepage>=0&&uu(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Ll();Qt(J,0,i(I));for(var se=0,le=0;se<I.SheetNames.length;++se)(I.Sheets[I.SheetNames[se]]||{})["!ref"]&&Qt(J,27,H(I.SheetNames[se],le++));var ve=0;for(se=0;se<I.SheetNames.length;++se){var xe=I.Sheets[I.SheetNames[se]];if(!(!xe||!xe["!ref"])){for(var Ee=Kn(xe["!ref"]),ke=Array.isArray(xe),oe=[],Fe=Math.min(Ee.e.r,8191),Pe=Ee.s.r;Pe<=Fe;++Pe)for(var ne=Xa(Pe),ye=Ee.s.c;ye<=Ee.e.c;++ye){Pe===Ee.s.r&&(oe[ye]=ga(ye));var Ae=oe[ye]+ne,Be=ke?(xe[Pe]||[])[ye]:xe[Ae];if(!(!Be||Be.t=="z"))if(Be.t=="n")Qt(J,23,D(Pe,ye,ve,Be.v));else{var Oe=lf(Be);Qt(J,22,L(Pe,ye,ve,Oe.slice(0,239)))}}++ve}}return Qt(J,1),J.end()}function a(I){var z=bt(2);return z.write_shift(2,I),z}function i(I){var z=bt(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var X=0,J=0,se=0,le=0;le<I.SheetNames.length;++le){var ve=I.SheetNames[le],xe=I.Sheets[ve];if(!(!xe||!xe["!ref"])){++se;var Ee=Fl(xe["!ref"]);X<Ee.e.r&&(X=Ee.e.r),J<Ee.e.c&&(J=Ee.e.c)}}return X>8191&&(X=8191),z.write_shift(2,X),z.write_shift(1,se),z.write_shift(1,J),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(I,z,X){var J={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&X.qpro?(J.s.c=I.read_shift(1),I.l++,J.s.r=I.read_shift(2),J.e.c=I.read_shift(1),I.l++,J.e.r=I.read_shift(2),J):(J.s.c=I.read_shift(2),J.s.r=I.read_shift(2),z==12&&X.qpro&&(I.l+=2),J.e.c=I.read_shift(2),J.e.r=I.read_shift(2),z==12&&X.qpro&&(I.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function l(I){var z=bt(8);return z.write_shift(2,I.s.c),z.write_shift(2,I.s.r),z.write_shift(2,I.e.c),z.write_shift(2,I.e.r),z}function u(I,z,X){var J=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(J[0].c=I.read_shift(1),J[3]=I.read_shift(1),J[0].r=I.read_shift(2),I.l+=2):(J[2]=I.read_shift(1),J[0].c=I.read_shift(2),J[0].r=I.read_shift(2)),J}function d(I,z,X){var J=I.l+z,se=u(I,z,X);if(se[1].t="s",X.vers==20768){I.l++;var le=I.read_shift(1);return se[1].v=I.read_shift(le,"utf8"),se}return X.qpro&&I.l++,se[1].v=I.read_shift(J-I.l,"cstr"),se}function p(I,z,X){var J=bt(7+X.length);J.write_shift(1,255),J.write_shift(2,z),J.write_shift(2,I),J.write_shift(1,39);for(var se=0;se<J.length;++se){var le=X.charCodeAt(se);J.write_shift(1,le>=128?95:le)}return J.write_shift(1,0),J}function g(I,z,X){var J=u(I,z,X);return J[1].v=I.read_shift(2,"i"),J}function m(I,z,X){var J=bt(7);return J.write_shift(1,255),J.write_shift(2,z),J.write_shift(2,I),J.write_shift(2,X,"i"),J}function x(I,z,X){var J=u(I,z,X);return J[1].v=I.read_shift(8,"f"),J}function y(I,z,X){var J=bt(13);return J.write_shift(1,255),J.write_shift(2,z),J.write_shift(2,I),J.write_shift(8,X,"f"),J}function b(I,z,X){var J=I.l+z,se=u(I,z,X);if(se[1].v=I.read_shift(8,"f"),X.qpro)I.l=J;else{var le=I.read_shift(2);O(I.slice(I.l,I.l+le),se),I.l+=le}return se}function S(I,z,X){var J=z&32768;return z&=-32769,z=(J?I:0)+(z>=8192?z-16384:z),(J?"":"$")+(X?ga(z):Xa(z))}var P={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(I,z){xo(I,0);for(var X=[],J=0,se="",le="",ve="",xe="";I.l<I.length;){var Ee=I[I.l++];switch(Ee){case 0:X.push(I.read_shift(8,"f"));break;case 1:le=S(z[0].c,I.read_shift(2),!0),se=S(z[0].r,I.read_shift(2),!1),X.push(le+se);break;case 2:{var ke=S(z[0].c,I.read_shift(2),!0),oe=S(z[0].r,I.read_shift(2),!1);le=S(z[0].c,I.read_shift(2),!0),se=S(z[0].r,I.read_shift(2),!1),X.push(ke+oe+":"+le+se)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(I.read_shift(2));break;case 6:{for(var Fe="";Ee=I[I.l++];)Fe+=String.fromCharCode(Ee);X.push('"'+Fe.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:xe=X.pop(),ve=X.pop(),X.push(["AND","OR"][Ee-20]+"("+ve+","+xe+")");break;default:if(Ee<32&&T[Ee])xe=X.pop(),ve=X.pop(),X.push(ve+T[Ee]+xe);else if(P[Ee]){if(J=P[Ee][1],J==69&&(J=I[I.l++]),J>X.length){console.error("WK1 bad formula parse 0x"+Ee.toString(16)+":|"+X.join("|")+"|");return}var Pe=X.slice(-J);X.length-=J,X.push(P[Ee][0]+"("+Pe.join(",")+")")}else return Ee<=7?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=24?console.error("WK1 unsupported op "+Ee.toString(16)):Ee<=30?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=115?console.error("WK1 unsupported function opcode "+Ee.toString(16)):console.error("WK1 unrecognized opcode "+Ee.toString(16))}}X.length==1?z[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function W(I){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=I.read_shift(2),z[3]=I[I.l++],z[0].c=I[I.l++],z}function Y(I,z){var X=W(I);return X[1].t="s",X[1].v=I.read_shift(z-4,"cstr"),X}function L(I,z,X,J){var se=bt(6+J.length);se.write_shift(2,I),se.write_shift(1,X),se.write_shift(1,z),se.write_shift(1,39);for(var le=0;le<J.length;++le){var ve=J.charCodeAt(le);se.write_shift(1,ve>=128?95:ve)}return se.write_shift(1,0),se}function A(I,z){var X=W(I);X[1].v=I.read_shift(2);var J=X[1].v>>1;if(X[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return X[1].v=J,X}function N(I,z){var X=W(I),J=I.read_shift(4),se=I.read_shift(4),le=I.read_shift(2);if(le==65535)return J===0&&se===3221225472?(X[1].t="e",X[1].v=15):J===0&&se===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var ve=le&32768;return le=(le&32767)-16446,X[1].v=(1-ve*2)*(se*Math.pow(2,le+32)+J*Math.pow(2,le)),X}function D(I,z,X,J){var se=bt(14);if(se.write_shift(2,I),se.write_shift(1,X),se.write_shift(1,z),J==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var le=0,ve=0,xe=0,Ee=0;return J<0&&(le=1,J=-J),ve=Math.log2(J)|0,J/=Math.pow(2,ve-31),Ee=J>>>0,(Ee&2147483648)==0&&(J/=2,++ve,Ee=J>>>0),J-=Ee,Ee|=2147483648,Ee>>>=0,J*=Math.pow(2,32),xe=J>>>0,se.write_shift(4,xe),se.write_shift(4,Ee),ve+=16383+(le?32768:0),se.write_shift(2,ve),se}function j(I,z){var X=N(I);return I.l+=z-14,X}function F(I,z){var X=W(I),J=I.read_shift(4);return X[1].v=J>>6,X}function M(I,z){var X=W(I),J=I.read_shift(8,"f");return X[1].v=J,X}function Z(I,z){var X=M(I);return I.l+=z-10,X}function ue(I,z){return I[I.l+z-1]==0?I.read_shift(z,"cstr"):""}function pe(I,z){var X=I[I.l++];X>z-1&&(X=z-1);for(var J="";J.length<X;)J+=String.fromCharCode(I[I.l++]);return J}function fe(I,z,X){if(!(!X.qpro||z<21)){var J=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var se=I.read_shift(z-21,"cstr");return[J,se]}}function te(I,z){for(var X={},J=I.l+z;I.l<J;){var se=I.read_shift(2);if(se==14e3){for(X[se]=[0,""],X[se][0]=I.read_shift(2);I[I.l];)X[se][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return X}function H(I,z){var X=bt(5+I.length);X.write_shift(2,14e3),X.write_shift(2,z);for(var J=0;J<I.length;++J){var se=I.charCodeAt(J);X[X.l++]=se>127?95:se}return X[X.l++]=0,X}var ie={0:{n:"BOF",f:di},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ue},222:{n:"SHEETNAMELP",f:pe},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:Y},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:j},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:Z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ue},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}})();function Yfe(t){var e={},r=t.match(Zo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=Wr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=MS[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var Xfe=(function(){var t=N2("t"),e=N2("rPr");function r(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:Gn(i[1])},l=a.match(e);return l&&(o.s=Yfe(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),Qfe=(function(){var e=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),Jfe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Zfe=/<(?:\w+:)?r>/,ehe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function lN(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Gn(bs(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=bs(t),r&&(n.h=KS(n.t))):t.match(Zfe)&&(n.r=bs(t),n.t=Gn(bs((t.replace(ehe,"").match(Jfe)||[]).join("").replace(Zo,""))),r&&(n.h=Qfe(Xfe(n.r)))),n):{t:""}}var the=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,rhe=/<(?:\w+:)?(?:si|sstItem)>/g,nhe=/<\/(?:\w+:)?(?:si|sstItem)>/;function she(t,e){var r=[],n="";if(!t)return r;var s=t.match(the);if(s){n=s[2].replace(rhe,"").split(nhe);for(var a=0;a!=n.length;++a){var i=lN(n[a].trim(),e);i!=null&&(r[r.length]=i)}s=Wr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var ahe=/^\s|\s$|[\t\n\r]/;function uz(t,e){if(!e.bookSST)return"";var r=[Za];r[r.length]=Xt("sst",null,{xmlns:Mp[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(ahe)&&(a+=' xml:space="preserve"'),a+=">"+ms(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function ihe(t){return[t.read_shift(4),t.read_shift(4)]}function ohe(t,e){var r=[],n=!1;return vf(t,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function lhe(t,e){return e||(e=bt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var che=vue;function uhe(t){var e=Ll();Pt(e,159,lhe(t));for(var r=0;r<t.length;++r)Pt(e,19,che(t[r]));return Pt(e,160),e.end()}function dz(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function ef(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function dhe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=ef(t,4),e.U=ef(t,4),e.W=ef(t,4),e}function fhe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=a,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function hhe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(fhe(t));return e}function phe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function mhe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=ef(t,4),e.U=ef(t,4),e.W=ef(t,4),e}function ghe(t){var e=mhe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function fz(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function hz(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function xhe(t){var e=ef(t);switch(e.Minor){case 2:return[e.Minor,yhe(t)];case 3:return[e.Minor,vhe()];case 4:return[e.Minor,whe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function yhe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=fz(t,r),s=hz(t,t.length-t.l);return{t:"Std",h:n,v:s}}function vhe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function whe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Zo,function(a){var i=Wr(a);switch(xd(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function bhe(t,e){var r={},n=r.EncryptionVersionInfo=ef(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=fz(t,s),e-=s,r.EncryptionVerifier=hz(t,e),r}function _he(t){var e={},r=e.EncryptionVersionInfo=ef(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function cN(t){var e=0,r,n=dz(t),s=n.length+1,a,i,o,l,u;for(r=Rh(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var pz=(function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],p=0;p!=7;++p)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=dz(i),l=a(o),u=o.length,d=Rh(16),p=0;p!=16;++p)d[p]=0;var g,m,x;for((u&1)===1&&(g=l>>8,d[u]=s(t[0],g),--u,g=l&255,m=o[o.length-1],d[u]=s(m,g));u>0;)--u,g=l>>8,d[u]=s(o[u],g),--u,g=l&255,d[u]=s(o[u],g);for(u=15,x=15-o.length;x>0;)g=l>>8,d[u]=s(t[x],g),--u,--x,g=l&255,d[u]=s(o[u],g),--u,--x;return d}})(),khe=function(t,e,r,n,s){s||(s=e),n||(n=pz(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},She=function(t){var e=0,r=pz(t);return function(n){var s=khe("",n,e,r);return e=s[1],s[0]}};function Nhe(t,e,r,n){var s={key:di(t),verificationBytes:di(t)};return r.password&&(s.verifier=cN(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=She(r.password)),s}function Ehe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=_he(t):n.Data=bhe(t,e),n}function Che(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Ehe(t,e-2,n):Nhe(t,r.biff>=8?e:e-2,r,n),n}var mz=(function(){function t(s,a){switch(a.type){case"base64":return e(cc(s),a);case"binary":return e(s,a);case"buffer":return e(yn&&Buffer.isBuffer(s)?s.toString("binary"):Xh(s),a);case"array":return e(wp(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,p){Array.isArray(o)&&(o[p]=[]);for(var g=/\\\w+\b/g,m=0,x,y=-1;x=g.exec(d);){switch(x[0]){case"\\cell":var b=d.slice(m,g.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++y,b.length){var S={v:b,t:"s"};Array.isArray(o)?o[p][y]=S:o[$r({r:p,c:y})]=S}break}m=g.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=un(u),o}function r(s,a){return Qh(t(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Kn(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var p=$r({r:u,c:d});o=l?(s[u]||[])[d]:s[p],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(lf(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}})();function Ahe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function T2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function The(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),a=Math.min(e,r,n),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,u/2]}function Ihe(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function J5(t,e){if(e===0)return t;var r=The(Ahe(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),T2(Ihe(r))}var gz=6,Phe=15,jhe=1,qo=gz;function I2(t){return Math.floor((t+Math.round(128/qo)/256)*qo)}function P2(t){return Math.floor((t-5)/qo*100+.5)/100}function Z5(t){return Math.round((t*qo+5)/qo*256)/256}function m3(t){return Z5(P2(I2(t)))}function uN(t){var e=Math.abs(t-m3(t)),r=qo;if(e>.005)for(qo=jhe;qo<Phe;++qo)Math.abs(t-m3(t))<=e&&(e=Math.abs(t-m3(t)),r=qo);qo=r}function Lh(t){t.width?(t.wpx=I2(t.width),t.wch=P2(t.wpx),t.MDW=qo):t.wpx?(t.wch=P2(t.wpx),t.width=Z5(t.wch),t.MDW=qo):typeof t.wch=="number"&&(t.width=Z5(t.wch),t.wpx=I2(t.width),t.MDW=qo),t.customWidth&&delete t.customWidth}var Rhe=96,xz=Rhe;function j2(t){return t*96/xz}function O1(t){return t*xz/96}var Lhe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Fhe(t,e,r,n){e.Borders=[];var s={},a=!1;(t[0].match(Zo)||[]).forEach(function(i){var o=Wr(i);switch(xd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Bs(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Bs(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Dhe(t,e,r,n){e.Fills=[];var s={},a=!1;(t[0].match(Zo)||[]).forEach(function(i){var o=Wr(i);switch(xd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Ohe(t,e,r,n){e.Fonts=[];var s={},a=!1;(t[0].match(Zo)||[]).forEach(function(i){var o=Wr(i);switch(xd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=bs(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Bs(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Bs(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Bs(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Bs(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Bs(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Bs(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Bs(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=MS[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Bs(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Q0[s.color.index];s.color.index==81&&(l=Q0[1]),l||(l=Q0[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=J5(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Mhe(t,e,r){e.NumberFmt=[];for(var n=La(Br),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Br[n[s]];var a=t[0].match(Zo);if(a)for(s=0;s<a.length;++s){var i=Wr(a[s]);switch(xd(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Gn(bs(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Zd(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Bhe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Xt("numFmt",null,{numFmtId:n,formatCode:ms(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Xt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Hv=["numFmtId","fillId","fontId","borderId","xfId"],Wv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Vhe(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Zo)||[]).forEach(function(a){var i=Wr(a),o=0;switch(xd(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Hv.length;++o)n[Hv[o]]&&(n[Hv[o]]=parseInt(n[Hv[o]],10));for(o=0;o<Wv.length;++o)n[Wv[o]]&&(n[Wv[o]]=Bs(n[Wv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Bs(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Uhe(t){var e=[];return e[e.length]=Xt("cellXfs",null),t.forEach(function(r){e[e.length]=Xt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Xt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var zhe=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(e))&&Mhe(p,d,u),(p=o.match(s))&&Ohe(p,d,l,u),(p=o.match(n))&&Dhe(p,d,l,u),(p=o.match(a))&&Fhe(p,d,l,u),(p=o.match(r))&&Vhe(p,d,u),d}})();function yz(t,e){var r=[Za,Xt("styleSheet",null,{xmlns:Mp[0],"xmlns:vt":Ai.vt})],n;return t.SSF&&(n=Bhe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Uhe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function $he(t,e){var r=t.read_shift(2),n=Qo(t);return[r,n]}function qhe(t,e,r){r||(r=bt(6+4*e.length)),r.write_shift(2,t),Yi(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Hhe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=Eue(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=Nue(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Qo(t),n}function Whe(t,e){e||(e=bt(153)),e.write_shift(2,t.sz*20),Cue(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Y5(t.color,e);var n=0;return n=2,e.write_shift(1,n),Yi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Ghe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],g3,Khe=Jo;function HI(t,e){e||(e=bt(84)),g3||(g3=p4(Ghe));var r=g3[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Y5({auto:1},e),Y5({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Yhe(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function vz(t,e,r){r||(r=bt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Zg(t,e){return e||(e=bt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Xhe=Jo;function Qhe(t,e){return e||(e=bt(51)),e.write_shift(1,0),Zg(null,e),Zg(null,e),Zg(null,e),Zg(null,e),Zg(null,e),e.length>e.l?e.slice(0,e.l):e}function Jhe(t,e){return e||(e=bt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),K5(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Zhe(t,e,r){var n=bt(2052);return n.write_shift(4,t),K5(e,n),K5(r,n),n.length>n.l?n.slice(0,n.l):n}function e0e(t,e,r){var n={};n.NumberFmt=[];for(var s in Br)n.NumberFmt[s]=Br[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return vf(t,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Zd(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=J5(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function t0e(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(Pt(t,615,mu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Pt(t,44,qhe(s,e[s]))}),Pt(t,616))}}function r0e(t){var e=1;Pt(t,611,mu(e)),Pt(t,43,Whe({sz:12,color:{theme:1},name:"Calibri",family:2})),Pt(t,612)}function n0e(t){var e=2;Pt(t,603,mu(e)),Pt(t,45,HI({patternType:"none"})),Pt(t,45,HI({patternType:"gray125"})),Pt(t,604)}function s0e(t){var e=1;Pt(t,613,mu(e)),Pt(t,46,Qhe()),Pt(t,614)}function a0e(t){var e=1;Pt(t,626,mu(e)),Pt(t,47,vz({numFmtId:0},65535)),Pt(t,627)}function i0e(t,e){Pt(t,617,mu(e.length)),e.forEach(function(r){Pt(t,47,vz(r,0))}),Pt(t,618)}function o0e(t){var e=1;Pt(t,619,mu(e)),Pt(t,48,Jhe({xfId:0,name:"Normal"})),Pt(t,620)}function l0e(t){var e=0;Pt(t,505,mu(e)),Pt(t,506)}function c0e(t){var e=0;Pt(t,508,Zhe(e,"TableStyleMedium9","PivotStyleMedium4")),Pt(t,509)}function u0e(t,e){var r=Ll();return Pt(r,278),t0e(r,t.SSF),r0e(r),n0e(r),s0e(r),a0e(r),i0e(r,e.cellXfs),o0e(r),l0e(r),c0e(r),Pt(r,279),r.end()}var d0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function f0e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Zo)||[]).forEach(function(s){var a=Wr(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[d0e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function h0e(){}function p0e(){}var m0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,g0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,x0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function y0e(t,e,r){e.themeElements={};var n;[["clrScheme",m0e,f0e],["fontScheme",g0e,h0e],["fmtScheme",x0e,p0e]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var v0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function wz(t,e){(!t||t.length===0)&&(t=dN());var r,n={};if(!(r=t.match(v0e)))throw new Error("themeElements not found in theme");return y0e(r[0],n,e),n.raw=t,n}function dN(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Za];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function w0e(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var a=t.slice(t.l);t.l=n;var i;try{i=fU(a,{type:"array"})}catch{return}var o=nc(i,"theme/theme/theme1.xml",!0);if(o)return wz(o,r)}}function b0e(t){return t.read_shift(4)}function _0e(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=k0e(t,4);break;case 2:e.xclrValue=ZU(t);break;case 3:e.xclrValue=b0e(t);break;case 4:t.l+=4;break}return t.l+=8,e}function k0e(t,e){return Jo(t,e)}function S0e(t,e){return Jo(t,e)}function N0e(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=_0e(t);break;case 6:n[1]=S0e(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function E0e(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(N0e(t,r-t.l));return{ixfe:n,ext:a}}function C0e(t,e){e.forEach(function(r){r[0]})}function A0e(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Qo(t)}}function T0e(t){var e=bt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Yi(t.name,e),e.slice(0,e.l)}function I0e(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function P0e(t){var e=bt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function j0e(t,e){var r=bt(8+2*e.length);return r.write_shift(4,t),Yi(e,r),r.slice(0,r.l)}function R0e(t){return t.l+=4,t.read_shift(4)!=0}function L0e(t,e){var r=bt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function F0e(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return vf(t,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(p){o==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):o==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function D0e(){var t=Ll();return Pt(t,332),Pt(t,334,mu(1)),Pt(t,335,T0e({name:"XLDAPR",version:12e4,flags:3496657072})),Pt(t,336),Pt(t,339,j0e(1,"XLDAPR")),Pt(t,52),Pt(t,35,mu(514)),Pt(t,4096,mu(0)),Pt(t,4097,Rc(1)),Pt(t,36),Pt(t,53),Pt(t,340),Pt(t,337,L0e(1)),Pt(t,51,P0e([[1,0]])),Pt(t,338),Pt(t,333),t.end()}function O0e(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,a=2,i;return t.replace(Zo,function(o){var l=Wr(o);switch(xd(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function bz(){var t=[Za];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function M0e(t){var e=[];if(!t)return e;var r=1;return(t.match(Zo)||[]).forEach(function(n){var s=Wr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function B0e(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=$r(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function V0e(t,e,r){var n=[];return vf(t,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function U0e(t,e,r,n){if(!t)return t;var s=n||{},a=!1;vf(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function z0e(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var zm=1024;function _z(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Xt("xml",null,{"xmlns:v":ec.v,"xmlns:o":ec.o,"xmlns:x":ec.x,"xmlns:mv":ec.mv}).replace(/\/>/,">"),Xt("o:shapelayout",Xt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Xt("v:shapetype",[Xt("v:stroke",null,{joinstyle:"miter"}),Xt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];zm<t*1e3;)zm+=1e3;return e.forEach(function(a){var i=xa(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Xt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Xt("v:fill",l,o),d={on:"t",obscured:"t"};++zm,s=s.concat(["<v:shape"+E2({id:"_x0000_s"+zm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Xt("v:shadow",null,d),Xt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",vo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),vo("x:AutoFill","False"),vo("x:Row",String(i.r)),vo("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function WI(t,e,r,n){var s=Array.isArray(t),a;e.forEach(function(i){var o=xa(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=Kn(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=un(l);u!==t["!ref"]&&(t["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var p=a.c.length-1;p>=0;--p){if(!r&&a.c[p].T)return;r&&!a.c[p].T&&a.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(d.a==n[p].id){d.a=n[p].name||d.a;break}}a.c.push(d)})}function $0e(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Wr(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=xa(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var p=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!p&&!!p[1]&&lN(p[1])||{r:"",t:"",h:""};u.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),u.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=g.h),n.push(u)}}}}),n}function kz(t){var e=[Za,Xt("comments",null,{xmlns:Mp[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var a=ms(s.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(ms(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(vo("t",ms(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(vo("t",ms(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function q0e(t,e){var r=[],n=!1,s={},a=0;return t.replace(Zo,function(o,l){var u=Wr(o);switch(xd(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function H0e(t,e,r){var n=[Za,Xt("ThreadedComments",null,{xmlns:Ai.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Xt("threadedComment",vo("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function W0e(t,e){var r=[],n=!1;return t.replace(Zo,function(a){var i=Wr(a);switch(xd(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function G0e(t){var e=[Za,Xt("personList",null,{xmlns:Ai.TCMNT,"xmlns:x":Mp[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Xt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function K0e(t){var e={};e.iauthor=t.read_shift(4);var r=zp(t);return e.rfx=r.s,e.ref=$r(r.s),t.l+=16,e}function Y0e(t,e){return e==null&&(e=bt(36)),e.write_shift(4,t[1].iauthor),ig(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var X0e=Qo;function Q0e(t){return Yi(t.slice(0,54))}function J0e(t,e){var r=[],n=[],s={},a=!1;return vf(t,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function Z0e(t){var e=Ll(),r=[];return Pt(e,628),Pt(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Pt(e,632,Q0e(s.a)))})}),Pt(e,631),Pt(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:xa(n[0]),e:xa(n[0])};Pt(e,635,Y0e([a,s])),s.t&&s.t.length>0&&Pt(e,637,bue(s)),Pt(e,636),delete s.iauthor})}),Pt(e,634),Pt(e,629),e.end()}var epe="application/vnd.ms-office.vbaProject";function tpe(t){var e=Rr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Rr.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Rr.write(e)}function rpe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Rr.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var Sz=["xlsb","xlsm","xlam","biff8","xla"];function npe(){return{"!type":"dialog"}}function spe(){return{"!type":"dialog"}}function ape(){return{"!type":"macro"}}function ipe(){return{"!type":"macro"}}var i1=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,s+(o?"":"$")+ga(d)+(l?"":"$")+Xa(u)}return function(s,a){return e=a,s.replace(t,r)}})(),fN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,hN=(function(){return function(e,r){return e.replace(fN,function(n,s,a,i,o,l){var u=ZS(i)-(a?0:r.c),d=JS(l)-(o?0:r.r),p=d==0?"":o?d+1:"["+d+"]",g=u==0?"":a?u+1:"["+u+"]";return s+"R"+p+"C"+g})}})();function Nz(t,e){return t.replace(fN,function(r,n,s,a,i,o){return n+(s=="$"?s+a:ga(ZS(a)+e.c))+(i=="$"?i+o:Xa(JS(o)+e.r))})}function ope(t,e,r){var n=Fl(e),s=n.s,a=xa(r),i={r:a.r-s.r,c:a.c-s.c};return Nz(t,i)}function lpe(t){return t.length!=1}function GI(t){return t.replace(/_xlfn\./g,"")}function li(t){t.l+=1}function Fh(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Ez(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Cz(t);r.biff==12&&(n=4)}var s=t.read_shift(n),a=t.read_shift(n),i=Fh(t),o=Fh(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Cz(t){var e=Fh(t),r=Fh(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function cpe(t,e,r){if(r.biff<8)return Cz(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),a=Fh(t),i=Fh(t);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function Az(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return upe(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Fh(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function upe(t){var e=Fh(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function dpe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function fpe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return hpe(t);var s=t.read_shift(n>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function hpe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function ppe(t,e,r){var n=(t[t.l++]&96)>>5,s=Ez(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function mpe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=Ez(t,a,r);return[n,s,i]}function gpe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function xpe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,s]}function ype(t,e,r){var n=(t[t.l++]&96)>>5,s=cpe(t,e-1,r);return[n,s]}function vpe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function KI(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function wpe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function bpe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function _pe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function kpe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Spe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Tz(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Npe(t){return t.read_shift(2),Tz(t)}function Epe(t){return t.read_shift(2),Tz(t)}function Cpe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=Az(t,0,r);return[n,s]}function Ape(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=fpe(t,0,r);return[n,s]}function Tpe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=Az(t,0,r);return[n,s,a]}function Ipe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Rme[s],jz[s],n]}function Ppe(t,e,r){var n=t[t.l++],s=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:jpe(t);return[s,(a[0]===0?jz:jme)[a[1]]]}function jpe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Rpe(t,e,r){t.l+=r&&r.biff==2?3:4}function Lpe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Fpe(t){return t.l++,wf[t.read_shift(1)]}function Dpe(t){return t.l++,t.read_shift(2)}function Ope(t){return t.l++,t.read_shift(1)!==0}function Mpe(t){return t.l++,Go(t)}function Bpe(t,e,r){return t.l++,ky(t,e-1,r)}function Vpe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=$a(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=wf[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Go(t);break;case 2:r[1]=$p(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Upe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?zp:x4)(t));return s}function zpe(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Vpe(t,r.biff);return i}function $pe(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function qpe(t,e,r){if(r.biff==5)return Hpe(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[n,s,a]}function Hpe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Wpe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Gpe(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Kpe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Ype(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,s]}var Xpe=Jo,Qpe=Jo,Jpe=Jo;function Ny(t,e,r){return t.l+=2,[dpe(t)]}function pN(t){return t.l+=6,[]}var Zpe=Ny,eme=pN,tme=pN,rme=Ny;function Iz(t){return t.l+=2,[di(t),t.read_shift(2)&1]}var nme=Ny,sme=Iz,ame=pN,ime=Ny,ome=Ny,lme=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function cme(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=lme[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:s,C:a}}function ume(t){return t.l+=2,[t.read_shift(4)]}function dme(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function fme(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function hme(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function pme(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function mme(t){return t.l+=4,[0,0]}var YI={1:{n:"PtgExp",f:Lpe},2:{n:"PtgTbl",f:Jpe},3:{n:"PtgAdd",f:li},4:{n:"PtgSub",f:li},5:{n:"PtgMul",f:li},6:{n:"PtgDiv",f:li},7:{n:"PtgPower",f:li},8:{n:"PtgConcat",f:li},9:{n:"PtgLt",f:li},10:{n:"PtgLe",f:li},11:{n:"PtgEq",f:li},12:{n:"PtgGe",f:li},13:{n:"PtgGt",f:li},14:{n:"PtgNe",f:li},15:{n:"PtgIsect",f:li},16:{n:"PtgUnion",f:li},17:{n:"PtgRange",f:li},18:{n:"PtgUplus",f:li},19:{n:"PtgUminus",f:li},20:{n:"PtgPercent",f:li},21:{n:"PtgParen",f:li},22:{n:"PtgMissArg",f:li},23:{n:"PtgStr",f:Bpe},26:{n:"PtgSheet",f:dme},27:{n:"PtgEndSheet",f:fme},28:{n:"PtgErr",f:Fpe},29:{n:"PtgBool",f:Ope},30:{n:"PtgInt",f:Dpe},31:{n:"PtgNum",f:Mpe},32:{n:"PtgArray",f:vpe},33:{n:"PtgFunc",f:Ipe},34:{n:"PtgFuncVar",f:Ppe},35:{n:"PtgName",f:$pe},36:{n:"PtgRef",f:Cpe},37:{n:"PtgArea",f:ppe},38:{n:"PtgMemArea",f:Wpe},39:{n:"PtgMemErr",f:Xpe},40:{n:"PtgMemNoMem",f:Qpe},41:{n:"PtgMemFunc",f:Gpe},42:{n:"PtgRefErr",f:Kpe},43:{n:"PtgAreaErr",f:gpe},44:{n:"PtgRefN",f:Ape},45:{n:"PtgAreaN",f:ype},46:{n:"PtgMemAreaN",f:hme},47:{n:"PtgMemNoMemN",f:pme},57:{n:"PtgNameX",f:qpe},58:{n:"PtgRef3d",f:Tpe},59:{n:"PtgArea3d",f:mpe},60:{n:"PtgRefErr3d",f:Ype},61:{n:"PtgAreaErr3d",f:xpe},255:{}},gme={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},xme={1:{n:"PtgElfLel",f:Iz},2:{n:"PtgElfRw",f:ime},3:{n:"PtgElfCol",f:Zpe},6:{n:"PtgElfRwV",f:ome},7:{n:"PtgElfColV",f:rme},10:{n:"PtgElfRadical",f:nme},11:{n:"PtgElfRadicalS",f:ame},13:{n:"PtgElfColS",f:eme},15:{n:"PtgElfColSV",f:tme},16:{n:"PtgElfRadicalLel",f:sme},25:{n:"PtgList",f:cme},29:{n:"PtgSxName",f:ume},255:{}},yme={0:{n:"PtgAttrNoop",f:mme},1:{n:"PtgAttrSemi",f:Spe},2:{n:"PtgAttrIf",f:_pe},4:{n:"PtgAttrChoose",f:wpe},8:{n:"PtgAttrGoto",f:bpe},16:{n:"PtgAttrSum",f:Rpe},32:{n:"PtgAttrBaxcel",f:KI},33:{n:"PtgAttrBaxcel",f:KI},64:{n:"PtgAttrSpace",f:Npe},65:{n:"PtgAttrSpaceSemi",f:Epe},128:{n:"PtgAttrIfError",f:kpe},255:{}};function Ey(t,e,r,n){if(n.biff<8)return Jo(t,e);for(var s=t.l+e,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=zpe(t,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Upe(t,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=s-t.l,e!==0&&a.push(Jo(t,e)),a}function Cy(t,e,r){for(var n=t.l+e,s,a,i=[];n!=t.l;)e=n-t.l,a=t[t.l],s=YI[a]||YI[gme[a]],(a===24||a===25)&&(s=(a===24?xme:yme)[t[t.l+1]]),!s||!s.f?Jo(t,e):i.push([s.n,s.f(t,e,r)]);return i}function vme(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var wme={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function bme(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Pz(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function XI(t,e,r){var n=Pz(t,e,r);return n=="#REF"?n:bme(n,r)}function $o(t,e,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,p=0,g=0,m,x="";if(!t[0]||!t[0][0])return"";for(var y=-1,b="",S=0,P=t[0].length;S<P;++S){var T=t[0][S];switch(T[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:b=Ca(" ",t[0][y][1][1]);break;case 1:b=Ca("\r",t[0][y][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+b,y=-1}o.push(u+wme[T[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Bx(T[1][1],i,s),o.push(Vx(d,a));break;case"PtgRefN":d=r?Bx(T[1][1],r,s):T[1][1],o.push(Vx(d,a));break;case"PtgRef3d":p=T[1][1],d=Bx(T[1][2],i,s),x=XI(n,p,s),o.push(x+"!"+Vx(d,a));break;case"PtgFunc":case"PtgFuncVar":var O=T[1][0],W=T[1][1];O||(O=0),O&=127;var Y=O==0?[]:o.slice(-O);o.length-=O,W==="User"&&(W=Y.shift()),o.push(W+"("+Y.join(",")+")");break;case"PtgBool":o.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(T[1]);break;case"PtgNum":o.push(String(T[1]));break;case"PtgStr":o.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(T[1]);break;case"PtgAreaN":m=NI(T[1][1],r?{s:r}:i,s),o.push(f3(m,s));break;case"PtgArea":m=NI(T[1][1],i,s),o.push(f3(m,s));break;case"PtgArea3d":p=T[1][1],m=T[1][2],x=XI(n,p,s),o.push(x+"!"+f3(m,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=T[1][2];var L=(n.names||[])[g-1]||(n[0]||[])[g],A=L?L.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var N=T[1][1];g=T[1][2];var D;if(s.biff<=5)N<0&&(N=-N),n[N]&&(D=n[N][g]);else{var j="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][g]&&n[N][g].itab>0&&(j=n.SheetNames[n[N][g].itab-1]+"!"):j=n.SheetNames[g-1]+"!"),n[N]&&n[N][g])j+=n[N][g].Name;else if(n[0]&&n[0][g])j+=n[0][g].Name;else{var F=(Pz(n,N,s)||"").split(";;");F[g-1]?j=F[g-1]:j+="SH33TJSERRX"}o.push(j);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var M="(",Z=")";if(y>=0){switch(b="",t[0][y][1][0]){case 2:M=Ca(" ",t[0][y][1][1])+M;break;case 3:M=Ca("\r",t[0][y][1][1])+M;break;case 4:Z=Ca(" ",t[0][y][1][1])+Z;break;case 5:Z=Ca("\r",t[0][y][1][1])+Z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(M+o.pop()+Z);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:T[1][1],r:T[1][0]};var ue={c:r.c,r:r.r};if(n.sharedf[$r(d)]){var pe=n.sharedf[$r(d)];o.push($o(pe,i,ue,n,s))}else{var fe=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push($o(u[1],i,ue,n,s)),fe=!0;break}fe||o.push(T[1])}break;case"PtgArray":o.push("{"+vme(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var te=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&te.indexOf(t[0][S][0])==-1){T=t[0][y];var H=!0;switch(T[1][0]){case 4:H=!1;case 0:b=Ca(" ",T[1][1]);break;case 5:H=!1;case 1:b=Ca("\r",T[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}o.push((H?b:"")+o.pop()+(H?"":b)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function _me(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Jo(t,e-2)];var o=Cy(t,i,r);return e!==i+s&&(a=Ey(t,e-i-s,o,r)),t.l=n,[o,a]}function kme(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Jo(t,e-2)];var o=Cy(t,i,r);return e!==i+s&&(a=Ey(t,e-i-s,o,r)),t.l=n,[o,a]}function Sme(t,e,r,n){var s=t.l+e,a=Cy(t,n,r),i;return s!==t.l&&(i=Ey(t,s-t.l,a,r)),[a,i]}function Nme(t,e,r){var n=t.l+e,s,a=t.read_shift(2),i=Cy(t,a,r);return a==65535?[[],Jo(t,e-2)]:(e!==a+2&&(s=Ey(t,n-a-2,i,r)),[i,s])}function Eme(t){var e;if(Hd(t,t.l+6)!==65535)return[Go(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Cme(t){if(t==null){var e=bt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return bp(t);return bp(0)}function x3(t,e,r){var n=t.l+e,s=yd(t);r.biff==2&&++t.l;var a=Eme(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=kme(t,n-t.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function Ame(t,e,r,n,s){var a=kp(e,r,s),i=Cme(t.v),o=bt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=bt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var p=Ki([a,i,o,u]);return p}function y4(t,e,r){var n=t.read_shift(4),s=Cy(t,n,r),a=t.read_shift(4),i=a>0?Ey(t,a,s,r):null;return[s,i]}var Tme=y4,v4=y4,Ime=y4,Pme=y4,jme={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},jz={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Rme={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function QI(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Lme(t){var e="of:="+t.replace(fN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function y3(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Fme(t){return t.replace(/\./,"!")}var zx={},o1={},$x=typeof Map<"u";function mN(t,e,r){var n=0,s=t.length;if(r){if($x?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=$x?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&($x?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function w4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(qo=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=P2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=Z5(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function ep(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Jh(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Zd(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===n)return s;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function Rz(t,e,r,n,s,a){try{n.cellNF&&(t.z=Br[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=$s(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Br[e]==null&&Zd(jce[e]||"General",e),t.t==="e")t.w=t.w||wf[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=S2(t.v);else if(t.t==="d"){var i=Ii(t.v);(i|0)===i?t.w=i.toString(10):t.w=S2(i)}else{if(t.v===void 0)return"";t.w=vp(t.v,o1)}else t.t==="d"?t.w=Vc(e,Ii(t.v),o1):t.w=Vc(e,t.v,o1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=a.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=J5(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=J5(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Dme(t,e,r){if(t&&t["!ref"]){var n=Kn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Ome(t,e){var r=Kn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=un(r))}var Mme=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Bme=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Vme=/<(?:\w:)?hyperlink [^>]*>/mg,Ume=/"(\w*:\w*)"/,zme=/<(?:\w:)?col\b[^>]*[\/]?>/g,$me=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,qme=/<(?:\w:)?pageMargins[^>]*\/>/g,Lz=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Hme=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Wme=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Gme(t,e,r,n,s,a,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",p=t.match(Bme);p?(u=t.slice(0,p.index),d=t.slice(p.index+p[0].length)):u=d=t;var g=u.match(Lz);g?gN(g[0],o,s,r):(g=u.match(Hme))&&Yme(g[0],g[1]||"",o,s,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var x=u.slice(m,m+50).match(Ume);x&&Ome(o,x[1])}var y=u.match(Wme);y&&y[1]&&l1e(y[1],s);var b=[];if(e.cellStyles){var S=u.match(zme);S&&n1e(b,S)}p&&d1e(p[1],o,e,l,a,i);var P=d.match($me);P&&(o["!autofilter"]=a1e(P[0]));var T=[],O=d.match(Mme);if(O)for(m=0;m!=O.length;++m)T[m]=Kn(O[m].slice(O[m].indexOf('"')+1));var W=d.match(Vme);W&&e1e(o,W,n);var Y=d.match(qme);if(Y&&(o["!margins"]=t1e(Wr(Y[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=un(l)),e.sheetRows>0&&o["!ref"]){var L=Kn(o["!ref"]);e.sheetRows<=+L.e.r&&(L.e.r=e.sheetRows-1,L.e.r>l.e.r&&(L.e.r=l.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>l.e.c&&(L.e.c=l.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),o["!fullref"]=o["!ref"],o["!ref"]=un(L))}return b.length>0&&(o["!cols"]=b),T.length>0&&(o["!merges"]=T),o}function Kme(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+un(t[r])+'"/>';return e+"</mergeCells>"}function gN(t,e,r,n){var s=Wr(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Gn(bs(s.codeName)))}function Yme(t,e,r,n,s){gN(t.slice(0,t.indexOf(">")),r,n,s)}function Xme(t,e,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Zu(ms(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Xt("outlinePr",null,u)}!a&&!o||(s[s.length]=Xt("sheetPr",o,i))}var Qme=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Jme=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Zme(t){var e={sheet:1};return Qme.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Jme.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=cN(t.password).toString(16).toUpperCase()),Xt("sheetProtection",null,e)}function e1e(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var a=Wr(bs(e[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Gn(a.location))):(a.Target="#"+Gn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Kn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=$r({c:u,r:l});n?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function t1e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function r1e(t){return ep(t),Xt("pageMargins",null,t)}function n1e(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Wr(e[n],!0);s.hidden&&(s.hidden=Bs(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,uN(s.width)),Lh(s);a<=i;)t[a++]=qs(s)}}function s1e(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=Xt("col",null,w4(s,n)));return r[r.length]="</cols>",r.join("")}function a1e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function i1e(t,e,r,n){var s=typeof t.ref=="string"?t.ref:un(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=Fl(s);i.s.r==i.e.r&&(i.e.r=Fl(e["!ref"]).e.r,s=un(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Xt("autoFilter",null,{ref:s})}var o1e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function l1e(t,e){e.Views||(e.Views=[{}]),(t.match(o1e)||[]).forEach(function(r,n){var s=Wr(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Bs(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function c1e(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Xt("sheetViews",Xt("sheetView",null,s),{})}function u1e(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=wf[t.v];break;case"d":n&&n.cellDates?s=$s(t.v,-1).toISOString():(t=qs(t),t.t="n",s=""+(t.v=Ii($s(t.v)))),typeof t.z>"u"&&(t.z=Br[14]);break;default:s=t.v;break}var o=vo("v",ms(s)),l={r:e},u=Jh(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=vo("v",""+mN(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Xt("f",ms(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Xt("c",o,l)}var d1e=(function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=N2("v"),i=N2("f");return function(l,u,d,p,g,m){for(var x=0,y="",b=[],S=[],P=0,T=0,O=0,W="",Y,L,A=0,N=0,D,j,F=0,M=0,Z=Array.isArray(m.CellXf),ue,pe=[],fe=[],te=Array.isArray(u),H=[],ie={},K=!1,I=!!d.sheetStubs,z=l.split(e),X=0,J=z.length;X!=J;++X){y=z[X].trim();var se=y.length;if(se!==0){var le=0;e:for(x=0;x<se;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(L=Wr(y.slice(le,x),!0),A=L.r!=null?parseInt(L.r,10):A+1,N=-1,d.sheetRows&&d.sheetRows<A)continue;ie={},K=!1,L.ht&&(K=!0,ie.hpt=parseFloat(L.ht),ie.hpx=O1(ie.hpt)),L.hidden=="1"&&(K=!0,ie.hidden=!0),L.outlineLevel!=null&&(K=!0,ie.level=+L.outlineLevel),K&&(H[A-1]=ie)}break;case"<":le=x;break}if(le>=x)break;if(L=Wr(y.slice(le,x),!0),A=L.r!=null?parseInt(L.r,10):A+1,N=-1,!(d.sheetRows&&d.sheetRows<A)){p.s.r>A-1&&(p.s.r=A-1),p.e.r<A-1&&(p.e.r=A-1),d&&d.cellStyles&&(ie={},K=!1,L.ht&&(K=!0,ie.hpt=parseFloat(L.ht),ie.hpx=O1(ie.hpt)),L.hidden=="1"&&(K=!0,ie.hidden=!0),L.outlineLevel!=null&&(K=!0,ie.level=+L.outlineLevel),K&&(H[A-1]=ie)),b=y.slice(x).split(t);for(var ve=0;ve!=b.length&&b[ve].trim().charAt(0)=="<";++ve);for(b=b.slice(ve),x=0;x!=b.length;++x)if(y=b[x].trim(),y.length!==0){if(S=y.match(r),P=x,T=0,O=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,S!=null&&S.length===2){for(P=0,W=S[1],T=0;T!=W.length&&!((O=W.charCodeAt(T)-64)<1||O>26);++T)P=26*P+O;--P,N=P}else++N;for(T=0;T!=y.length&&y.charCodeAt(T)!==62;++T);if(++T,L=Wr(y.slice(0,T),!0),L.r||(L.r=$r({r:A-1,c:N})),W=y.slice(T),Y={t:""},(S=W.match(a))!=null&&S[1]!==""&&(Y.v=Gn(S[1])),d.cellFormula){if((S=W.match(i))!=null&&S[1]!==""){if(Y.f=Gn(bs(S[1])).replace(/\r\n/g,`
`),d.xlfn||(Y.f=GI(Y.f)),S[0].indexOf('t="array"')>-1)Y.F=(W.match(s)||[])[1],Y.F.indexOf(":")>-1&&pe.push([Kn(Y.F),Y.F]);else if(S[0].indexOf('t="shared"')>-1){j=Wr(S[0]);var xe=Gn(bs(S[1]));d.xlfn||(xe=GI(xe)),fe[parseInt(j.si,10)]=[j,xe,L.r]}}else(S=W.match(/<f[^>]*\/>/))&&(j=Wr(S[0]),fe[j.si]&&(Y.f=ope(fe[j.si][1],fe[j.si][2],L.r)));var Ee=xa(L.r);for(T=0;T<pe.length;++T)Ee.r>=pe[T][0].s.r&&Ee.r<=pe[T][0].e.r&&Ee.c>=pe[T][0].s.c&&Ee.c<=pe[T][0].e.c&&(Y.F=pe[T][1])}if(L.t==null&&Y.v===void 0)if(Y.f||Y.F)Y.v=0,Y.t="n";else if(I)Y.t="z";else continue;else Y.t=L.t||"n";switch(p.s.c>N&&(p.s.c=N),p.e.c<N&&(p.e.c=N),Y.t){case"n":if(Y.v==""||Y.v==null){if(!I)continue;Y.t="z"}else Y.v=parseFloat(Y.v);break;case"s":if(typeof Y.v>"u"){if(!I)continue;Y.t="z"}else D=zx[parseInt(Y.v,10)],Y.v=D.t,Y.r=D.r,d.cellHTML&&(Y.h=D.h);break;case"str":Y.t="s",Y.v=Y.v!=null?bs(Y.v):"",d.cellHTML&&(Y.h=KS(Y.v));break;case"inlineStr":S=W.match(n),Y.t="s",S!=null&&(D=lN(S[1]))?(Y.v=D.t,d.cellHTML&&(Y.h=D.h)):Y.v="";break;case"b":Y.v=Bs(Y.v);break;case"d":d.cellDates?Y.v=$s(Y.v,1):(Y.v=Ii($s(Y.v,1)),Y.t="n");break;case"e":(!d||d.cellText!==!1)&&(Y.w=Y.v),Y.v=DU[Y.v];break}if(F=M=0,ue=null,Z&&L.s!==void 0&&(ue=m.CellXf[L.s],ue!=null&&(ue.numFmtId!=null&&(F=ue.numFmtId),d.cellStyles&&ue.fillId!=null&&(M=ue.fillId))),Rz(Y,F,M,d,g,m),d.cellDates&&Z&&Y.t=="n"&&ng(Br[F])&&(Y.t="d",Y.v=g4(Y.v)),L.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+L.cm-1];ke&&ke.type=="XLDAPR"&&(Y.D=!0)}if(te){var oe=xa(L.r);u[oe.r]||(u[oe.r]=[]),u[oe.r][oe.c]=Y}else u[L.r]=Y}}}}H.length>0&&(u["!rows"]=H)}})();function f1e(t,e,r,n){var s=[],a=[],i=Kn(t["!ref"]),o="",l,u="",d=[],p=0,g=0,m=t["!rows"],x=Array.isArray(t),y={r:u},b,S=-1;for(g=i.s.c;g<=i.e.c;++g)d[g]=ga(g);for(p=i.s.r;p<=i.e.r;++p){for(a=[],u=Xa(p),g=i.s.c;g<=i.e.c;++g){l=d[g]+u;var P=x?(t[p]||[])[g]:t[l];P!==void 0&&(o=u1e(P,l,t,e))!=null&&a.push(o)}(a.length>0||m&&m[p])&&(y={r:u},m&&m[p]&&(b=m[p],b.hidden&&(y.hidden=1),S=-1,b.hpx?S=j2(b.hpx):b.hpt&&(S=b.hpt),S>-1&&(y.ht=S,y.customHeight=1),b.level&&(y.outlineLevel=b.level)),s[s.length]=Xt("row",a.join(""),y))}if(m)for(;p<m.length;++p)m&&m[p]&&(y={r:p+1},b=m[p],b.hidden&&(y.hidden=1),S=-1,b.hpx?S=j2(b.hpx):b.hpt&&(S=b.hpt),S>-1&&(y.ht=S,y.customHeight=1),b.level&&(y.outlineLevel=b.level),s[s.length]=Xt("row","",y));return s.join("")}function Fz(t,e,r,n){var s=[Za,Xt("worksheet",null,{xmlns:Mp[0],"xmlns:r":Ai.r})],a=r.SheetNames[t],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=Kn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=un(d)}n||(n={}),l["!comments"]=[];var p=[];Xme(l,r,t,e,s),s[s.length]=Xt("dimension",null,{ref:u}),s[s.length]=c1e(l,e,t,r),e.sheetFormat&&(s[s.length]=Xt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=s1e(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=f1e(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=Zme(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=i1e(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Kme(l["!merges"]));var g=-1,m,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(m={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=fs(n,-1,ms(y[1].Target).replace(/#.*$/,""),En.HLINK),m["r:id"]="rId"+x),(g=y[1].Target.indexOf("#"))>-1&&(m.location=ms(y[1].Target.slice(g+1))),y[1].Tooltip&&(m.tooltip=ms(y[1].Tooltip)),s[s.length]=Xt("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=r1e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=vo("ignoredErrors",Xt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),p.length>0&&(x=fs(n,-1,"../drawings/drawing"+(t+1)+".xml",En.DRAW),s[s.length]=Xt("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=p),l["!comments"].length>0&&(x=fs(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",En.VML),s[s.length]=Xt("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function h1e(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function p1e(t,e,r){var n=bt(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;s.hpx?a=j2(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var p=-1,g=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[$r(u)];x&&(p<0&&(p=m),g=m)}p<0||(++o,n.write_shift(4,p),n.write_shift(4,g))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function m1e(t,e,r,n){var s=p1e(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&Pt(t,0,s)}var g1e=zp,x1e=ig;function y1e(){}function v1e(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=_ue(t),r}function w1e(t,e,r){r==null&&(r=bt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Y5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),PU(t,r),r.slice(0,r.l)}function b1e(t){var e=zc(t);return[e]}function _1e(t,e,r){return r==null&&(r=bt(8)),Bp(e,r)}function k1e(t){var e=Vp(t);return[e]}function S1e(t,e,r){return r==null&&(r=bt(4)),Up(e,r)}function N1e(t){var e=zc(t),r=t.read_shift(1);return[e,r,"b"]}function E1e(t,e,r){return r==null&&(r=bt(9)),Bp(e,r),r.write_shift(1,t.v?1:0),r}function C1e(t){var e=Vp(t),r=t.read_shift(1);return[e,r,"b"]}function A1e(t,e,r){return r==null&&(r=bt(5)),Up(e,r),r.write_shift(1,t.v?1:0),r}function T1e(t){var e=zc(t),r=t.read_shift(1);return[e,r,"e"]}function I1e(t,e,r){return r==null&&(r=bt(9)),Bp(e,r),r.write_shift(1,t.v),r}function P1e(t){var e=Vp(t),r=t.read_shift(1);return[e,r,"e"]}function j1e(t,e,r){return r==null&&(r=bt(8)),Up(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function R1e(t){var e=zc(t),r=t.read_shift(4);return[e,r,"s"]}function L1e(t,e,r){return r==null&&(r=bt(12)),Bp(e,r),r.write_shift(4,e.v),r}function F1e(t){var e=Vp(t),r=t.read_shift(4);return[e,r,"s"]}function D1e(t,e,r){return r==null&&(r=bt(8)),Up(e,r),r.write_shift(4,e.v),r}function O1e(t){var e=zc(t),r=Go(t);return[e,r,"n"]}function M1e(t,e,r){return r==null&&(r=bt(16)),Bp(e,r),bp(t.v,r),r}function Dz(t){var e=Vp(t),r=Go(t);return[e,r,"n"]}function B1e(t,e,r){return r==null&&(r=bt(12)),Up(e,r),bp(t.v,r),r}function V1e(t){var e=zc(t),r=nN(t);return[e,r,"n"]}function U1e(t,e,r){return r==null&&(r=bt(12)),Bp(e,r),jU(t.v,r),r}function z1e(t){var e=Vp(t),r=nN(t);return[e,r,"n"]}function $1e(t,e,r){return r==null&&(r=bt(8)),Up(e,r),jU(t.v,r),r}function q1e(t){var e=zc(t),r=eN(t);return[e,r,"is"]}function H1e(t){var e=zc(t),r=Qo(t);return[e,r,"str"]}function W1e(t,e,r){return r==null&&(r=bt(12+4*t.v.length)),Bp(e,r),Yi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function G1e(t){var e=Vp(t),r=Qo(t);return[e,r,"str"]}function K1e(t,e,r){return r==null&&(r=bt(8+4*t.v.length)),Up(e,r),Yi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Y1e(t,e,r){var n=t.l+e,s=zc(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(r.cellFormula){t.l+=2;var o=v4(t,n-t.l,r);i[3]=$o(o,null,s,r.supbooks,r)}else t.l=n;return i}function X1e(t,e,r){var n=t.l+e,s=zc(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(r.cellFormula){t.l+=2;var o=v4(t,n-t.l,r);i[3]=$o(o,null,s,r.supbooks,r)}else t.l=n;return i}function Q1e(t,e,r){var n=t.l+e,s=zc(t);s.r=r["!row"];var a=Go(t),i=[s,a,"n"];if(r.cellFormula){t.l+=2;var o=v4(t,n-t.l,r);i[3]=$o(o,null,s,r.supbooks,r)}else t.l=n;return i}function J1e(t,e,r){var n=t.l+e,s=zc(t);s.r=r["!row"];var a=Qo(t),i=[s,a,"str"];if(r.cellFormula){t.l+=2;var o=v4(t,n-t.l,r);i[3]=$o(o,null,s,r.supbooks,r)}else t.l=n;return i}var Z1e=zp,ege=ig;function tge(t,e){return e==null&&(e=bt(4)),e.write_shift(4,t),e}function rge(t,e){var r=t.l+e,n=zp(t),s=tN(t),a=Qo(t),i=Qo(t),o=Qo(t);t.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function nge(t,e){var r=bt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));ig({s:xa(t[0]),e:xa(t[0])},r),rN("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Yi(s||"",r),Yi(t[1].Tooltip||"",r),Yi("",r),r.slice(0,r.l)}function sge(){}function age(t,e,r){var n=t.l+e,s=RU(t),a=t.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=Tme(t,n-t.l,r);i[1]=o}else t.l=n;return i}function ige(t,e,r){var n=t.l+e,s=zp(t),a=[s];if(r.cellFormula){var i=Pme(t,n-t.l,r);a[1]=i,t.l=n}else t.l=n;return a}function oge(t,e,r){r==null&&(r=bt(18));var n=w4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var Oz=["left","right","top","bottom","header","footer"];function lge(t){var e={};return Oz.forEach(function(r){e[r]=Go(t)}),e}function cge(t,e){return e==null&&(e=bt(48)),ep(t),Oz.forEach(function(r){bp(t[r],e)}),e}function uge(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function dge(t,e,r){r==null&&(r=bt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function fge(t){var e=bt(24);return e.write_shift(4,4),e.write_shift(4,1),ig(t,e),e}function hge(t,e){return e==null&&(e=bt(66)),e.write_shift(2,t.password?cN(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function pge(){}function mge(){}function gge(t,e,r,n,s,a,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,g=!1,m,x,y,b,S,P,T,O,W,Y=[];o.biff=12,o["!row"]=0;var L=0,A=!1,N=[],D={},j=o.supbooks||s.supbooks||[[]];if(j.sharedf=D,j.arrayf=N,j.SheetNames=s.SheetNames||s.Sheets.map(function(te){return te.name}),!o.supbooks&&(o.supbooks=j,s.Names))for(var F=0;F<s.Names.length;++F)j[0][F+1]=s.Names[F];var M=[],Z=[],ue=!1;R2[16]={n:"BrtShortReal",f:Dz};var pe;if(vf(t,function(H,ie,K){if(!g)switch(K){case 148:u=H;break;case 0:m=H,o.sheetRows&&o.sheetRows<=m.r&&(g=!0),O=Xa(b=m.r),o["!row"]=m.r,(H.hidden||H.hpt||H.level!=null)&&(H.hpt&&(H.hpx=O1(H.hpt)),Z[H.r]=H);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:H[2]},H[2]){case"n":x.v=H[1];break;case"s":T=zx[H[1]],x.v=T.t,x.r=T.r;break;case"b":x.v=!!H[1];break;case"e":x.v=H[1],o.cellText!==!1&&(x.w=wf[x.v]);break;case"str":x.t="s",x.v=H[1];break;case"is":x.t="s",x.v=H[1].t;break}if((y=i.CellXf[H[0].iStyleRef])&&Rz(x,y.numFmtId,null,o,a,i),S=H[0].c==-1?S+1:H[0].c,o.dense?(l[b]||(l[b]=[]),l[b][S]=x):l[ga(S)+O]=x,o.cellFormula){for(A=!1,L=0;L<N.length;++L){var I=N[L];m.r>=I[0].s.r&&m.r<=I[0].e.r&&S>=I[0].s.c&&S<=I[0].e.c&&(x.F=un(I[0]),A=!0)}!A&&H.length>3&&(x.f=H[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),o.cellDates&&y&&x.t=="n"&&ng(Br[y.numFmtId])){var z=B0(x.v);z&&(x.t="d",x.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}pe&&(pe.type=="XLDAPR"&&(x.D=!0),pe=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;x={t:"z",v:void 0},S=H[0].c==-1?S+1:H[0].c,o.dense?(l[b]||(l[b]=[]),l[b][S]=x):l[ga(S)+O]=x,d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),pe&&(pe.type=="XLDAPR"&&(x.D=!0),pe=void 0);break;case 176:Y.push(H);break;case 49:pe=((o.xlmeta||{}).Cell||[])[H-1];break;case 494:var X=n["!id"][H.relId];for(X?(H.Target=X.Target,H.loc&&(H.Target+="#"+H.loc),H.Rel=X):H.relId==""&&(H.Target="#"+H.loc),b=H.rfx.s.r;b<=H.rfx.e.r;++b)for(S=H.rfx.s.c;S<=H.rfx.e.c;++S)o.dense?(l[b]||(l[b]=[]),l[b][S]||(l[b][S]={t:"z",v:void 0}),l[b][S].l=H):(P=$r({c:S,r:b}),l[P]||(l[P]={t:"z",v:void 0}),l[P].l=H);break;case 426:if(!o.cellFormula)break;N.push(H),W=o.dense?l[b][S]:l[ga(S)+O],W.f=$o(H[1],d,{r:m.r,c:S},j,o),W.F=un(H[0]);break;case 427:if(!o.cellFormula)break;D[$r(H[0].s)]=H[1],W=o.dense?l[b][S]:l[ga(S)+O],W.f=$o(H[1],d,{r:m.r,c:S},j,o);break;case 60:if(!o.cellStyles)break;for(;H.e>=H.s;)M[H.e--]={width:H.w/256,hidden:!!(H.flags&1),level:H.level},ue||(ue=!0,uN(H.w/256)),Lh(M[H.e+1]);break;case 161:l["!autofilter"]={ref:un(H)};break;case 476:l["!margins"]=H;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),H.name&&(s.Sheets[r].CodeName=H.name),(H.above||H.left)&&(l["!outline"]={above:H.above,left:H.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),H.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!ie.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+K.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=un(u||d)),o.sheetRows&&l["!ref"]){var fe=Kn(l["!ref"]);o.sheetRows<=+fe.e.r&&(fe.e.r=o.sheetRows-1,fe.e.r>d.e.r&&(fe.e.r=d.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>d.e.c&&(fe.e.c=d.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),l["!fullref"]=l["!ref"],l["!ref"]=un(fe))}return Y.length>0&&(l["!merges"]=Y),M.length>0&&(l["!cols"]=M),Z.length>0&&(l["!rows"]=Z),l}function xge(t,e,r,n,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=qs(e),e.z=e.z||Br[14],e.v=Ii($s(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Jh(s.cellXfs,e,s),e.l&&a["!links"].push([$r(l),e.l]),e.c&&a["!comments"].push([$r(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=mN(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Pt(t,18,D1e(e,l)):Pt(t,7,L1e(e,l))):(l.t="str",i?Pt(t,17,K1e(e,l)):Pt(t,6,W1e(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Pt(t,13,$1e(e,l)):Pt(t,2,U1e(e,l)):i?Pt(t,16,B1e(e,l)):Pt(t,5,M1e(e,l)),!0;case"b":return l.t="b",i?Pt(t,15,A1e(e,l)):Pt(t,4,E1e(e,l)),!0;case"e":return l.t="e",i?Pt(t,14,j1e(e,l)):Pt(t,3,I1e(e,l)),!0}return i?Pt(t,12,S1e(e,l)):Pt(t,1,_1e(e,l)),!0}function yge(t,e,r,n){var s=Kn(e["!ref"]||"A1"),a,i="",o=[];Pt(t,145);var l=Array.isArray(e),u=s.e.r;e["!rows"]&&(u=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Xa(d),m1e(t,e,s,d);var p=!1;if(d<=s.e.r)for(var g=s.s.c;g<=s.e.c;++g){d===s.s.r&&(o[g]=ga(g)),a=o[g]+i;var m=l?(e[d]||[])[g]:e[a];if(!m){p=!1;continue}p=xge(t,m,d,g,n,e,p)}}Pt(t,146)}function vge(t,e){!e||!e["!merges"]||(Pt(t,177,tge(e["!merges"].length)),e["!merges"].forEach(function(r){Pt(t,176,ege(r))}),Pt(t,178))}function wge(t,e){!e||!e["!cols"]||(Pt(t,390),e["!cols"].forEach(function(r,n){r&&Pt(t,60,oge(n,r))}),Pt(t,391))}function bge(t,e){!e||!e["!ref"]||(Pt(t,648),Pt(t,649,fge(Kn(e["!ref"]))),Pt(t,650))}function _ge(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=fs(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Pt(t,494,nge(n,s))}}),delete e["!links"]}function kge(t,e,r,n){if(e["!comments"].length>0){var s=fs(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Pt(t,551,rN("rId"+s)),e["!legacy"]=s}}function Sge(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:un(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Fl(a);o.s.r==o.e.r&&(o.e.r=Fl(e["!ref"]).e.r,a=un(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Pt(t,161,ig(Kn(a))),Pt(t,162)}}function Nge(t,e,r){Pt(t,133),Pt(t,137,dge(e,r)),Pt(t,138),Pt(t,134)}function Ege(t,e){e["!protect"]&&Pt(t,535,hge(e["!protect"]))}function Cge(t,e,r,n){var s=Ll(),a=r.SheetNames[t],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Kn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Pt(s,129),(r.vbaraw||i["!outline"])&&Pt(s,147,w1e(o,i["!outline"])),Pt(s,148,x1e(l)),Nge(s,i,r.Workbook),wge(s,i),yge(s,i,t,e),Ege(s,i),Sge(s,i,r,t),vge(s,i),_ge(s,i,n),i["!margins"]&&Pt(s,476,cge(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&bge(s,i),kge(s,i,t,n),Pt(s,130),s.end()}function Age(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var s=Gn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[e,s,n]}function Tge(t,e,r,n,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var g=Age(p);d.s.r=d.s.c=0,d.e.c=o,u=ga(o),g[0].forEach(function(m,x){i[u+Xa(x)]={t:"n",v:m,z:g[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=un(d)),i}function Ige(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(Lz);return o&&gN(o[0],a,s,r),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function Pge(t,e){t.l+=10;var r=Qo(t);return{name:r}}function jge(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return vf(t,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var xN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Rge=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Lge=[],Fge=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function JI(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var a=e[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Bs(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function ZI(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Bs(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Mz(t){ZI(t.WBProps,xN),ZI(t.CalcPr,Fge),JI(t.WBView,Rge),JI(t.Sheets,Lge),o1.date1904=Bs(t.WBProps.date1904)}function Dge(t){return!t.Workbook||!t.Workbook.WBProps?"false":Bs(t.Workbook.WBProps.date1904)?"true":"false"}var Oge="][*?/\\".split("");function Bz(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Oge.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Mge(t,e,r){t.forEach(function(n,s){Bz(n);for(var a=0;a<s;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[s]&&e[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Bge(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Mge(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Dme(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Vge=/<\w+:workbook/;function Uge(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(t.replace(Zo,function(l,u){var d=Wr(l);switch(xd(d[0])){case"<?xml":break;case"<workbook":l.match(Vge)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":xN.forEach(function(p){if(d[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Bs(d[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(d[p[0]],10);break;default:r.WBProps[p[0]]=d[p[0]]}}),d.codeName&&(r.WBProps.CodeName=bs(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Gn(bs(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=bs(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Bs(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=Gn(bs(t.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Mp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Mz(r),r}function Vz(t){var e=[Za];e[e.length]=Xt("workbook",null,{xmlns:Mp[0],"xmlns:r":Ai.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(xN.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Xt("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:ms(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Xt("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Xt("definedName",ms(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function zge(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Tk(t),r.name=Qo(t),r}function $ge(t,e){return e||(e=bt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),rN(t.strRelID,e),Yi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function qge(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Qo(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Hge(t,e){e||(e=bt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),PU(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Wge(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Gge(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=kue(t),i=Ime(t,0,r),o=tN(t);t.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Kge(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],R2[16]={n:"BrtFRTArchID$",f:Wge},vf(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=$o(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Mz(r),r.Names=a,r.supbooks=i,r}function Yge(t,e){Pt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Pt(t,156,$ge(s))}Pt(t,144)}function Xge(t,e){e||(e=bt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Yi("SheetJS",e),Yi(z5.version,e),Yi(z5.version,e),Yi("7262",e),e.length>e.l?e.slice(0,e.l):e}function Qge(t,e){e||(e=bt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Jge(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Pt(t,135),Pt(t,158,Qge(s)),Pt(t,136))}}function Zge(t,e){var r=Ll();return Pt(r,131),Pt(r,128,Xge()),Pt(r,153,Hge(t.Workbook&&t.Workbook.WBProps||null)),Jge(r,t),Yge(r,t),Pt(r,132),r.end()}function exe(t,e,r){return e.slice(-4)===".bin"?Kge(t,r):Uge(t,r)}function txe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?gge(t,n,r,s,a,i,o):Gme(t,n,r,s,a,i,o)}function rxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?jge(t,n,r,s,a):Ige(t,n,r,s,a)}function nxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?ape():ipe()}function sxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?npe():spe()}function axe(t,e,r,n){return e.slice(-4)===".bin"?e0e(t,r,n):zhe(t,r,n)}function ixe(t,e,r){return wz(t,r)}function oxe(t,e,r){return e.slice(-4)===".bin"?ohe(t,r):she(t,r)}function lxe(t,e,r){return e.slice(-4)===".bin"?J0e(t,r):$0e(t,r)}function cxe(t,e,r){return e.slice(-4)===".bin"?V0e(t):M0e(t)}function uxe(t,e,r,n){return r.slice(-4)===".bin"?U0e(t,e,r,n):void 0}function dxe(t,e,r){return e.slice(-4)===".bin"?F0e(t,e,r):O0e(t,e,r)}function fxe(t,e,r){return(e.slice(-4)===".bin"?Zge:Vz)(t)}function hxe(t,e,r,n,s){return(e.slice(-4)===".bin"?Cge:Fz)(t,r,n,s)}function pxe(t,e,r){return(e.slice(-4)===".bin"?u0e:yz)(t,r)}function mxe(t,e,r){return(e.slice(-4)===".bin"?uhe:uz)(t,r)}function gxe(t,e,r){return(e.slice(-4)===".bin"?Z0e:kz)(t)}function xxe(t){return(t.slice(-4)===".bin"?D0e:bz)()}var Uz=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,zz=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function au(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(Uz),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(zz),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function yxe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Uz),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(zz),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var qx;function vxe(t,e){var r=qx[t]||Gn(t);return r==="General"?vp(e):Vc(r,e)}function wxe(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Bs(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=$s(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Gn(e)]=s}function bxe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||wf[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=S2(t.v):t.w=vp(t.v):t.w=vxe(e||"General",t.v)}catch(a){if(r.WTF)throw a}try{var n=qx[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&ng(n)){var s=B0(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function _xe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Lhe[n.Pattern]||n.Pattern)}t[e.ID]=e}function kxe(t,e,r,n,s,a,i,o,l,u){var d="General",p=n.StyleID,g={};u=u||{};var m=[],x=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&i&&(p=i.StyleID);a[p]!==void 0&&(a[p].nf&&(d=a[p].nf),a[p].Interior&&m.push(a[p].Interior),!!a[p].Parent);)p=a[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Bs(t);break;case"String":n.t="s",n.r=gI(Gn(t)),n.v=t.indexOf("<")>-1?Gn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=($s(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Gn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=DU[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=gI(e||t));break}if(bxe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Gn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=i1(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=i1("RC:RC",s):n.ArrayRange&&(n.F=i1(n.ArrayRange,s),l.push([Kn(n.F),n.F]))}else for(x=0;x<l.length;++x)s.r>=l[x][0].s.r&&s.r<=l[x][0].e.r&&s.c>=l[x][0].s.c&&s.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(m.forEach(function(b){!g.patternType&&b.patternType&&(g.patternType=b.patternType)}),n.s=g),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Sxe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function v3(t,e){var r=e||{};sg();var n=hx(YS(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=bs(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=qs(r);return i.type="string",D1.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Be){s.indexOf("<"+Be)>=0&&(a=!0)}),a)return c2e(n,r);qx={"General Number":"General","General Date":Br[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Br[15],"Short Date":Br[14],"Long Time":Br[19],"Medium Time":Br[18],"Short Time":Br[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Br[2],Standard:Br[4],Percent:Br[10],Scientific:Br[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},p=[],g=r.dense?[]:{},m="",x={},y={},b=au('<Data ss:Type="String">'),S=0,P=0,T=0,O={s:{r:2e6,c:2e6},e:{r:0,c:0}},W={},Y={},L="",A=0,N=[],D={},j={},F=0,M=[],Z=[],ue={},pe=[],fe,te=!1,H=[],ie=[],K={},I=0,z=0,X={Sheets:[],WBProps:{date1904:!1}},J={};C2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var se="";o=C2.exec(n);)switch(o[3]=(se=o[3]).toLowerCase()){case"data":if(se=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?kxe(n.slice(S,o.index),L,b,l[l.length-1][0]=="comment"?ue:x,{c:P,r:T},W,pe[P],y,H,r):(L="",b=au(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Z.length>0&&(x.c=Z),(!r.sheetRows||r.sheetRows>T)&&x.v!==void 0&&(r.dense?(g[T]||(g[T]=[]),g[T][P]=x):g[ga(P)+Xa(T)]=x),x.HRef&&(x.l={Target:Gn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(I=P+(parseInt(x.MergeAcross,10)|0),z=T+(parseInt(x.MergeDown,10)|0),N.push({s:{c:P,r:T},e:{c:I,r:z}})),!r.sheetStubs)x.MergeAcross?P=I+1:++P;else if(x.MergeAcross||x.MergeDown){for(var le=P;le<=I;++le)for(var ve=T;ve<=z;++ve)(le>P||ve>T)&&(r.dense?(g[ve]||(g[ve]=[]),g[ve][le]={t:"z"}):g[ga(le)+Xa(ve)]={t:"z"});P=I+1}else++P;else x=yxe(o[0]),x.Index&&(P=+x.Index-1),P<O.s.c&&(O.s.c=P),P>O.e.c&&(O.e.c=P),o[0].slice(-2)==="/>"&&++P,Z=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(T<O.s.r&&(O.s.r=T),T>O.e.r&&(O.e.r=T),o[0].slice(-2)==="/>"&&(y=au(o[0]),y.Index&&(T=+y.Index-1)),P=0,++T):(y=au(o[0]),y.Index&&(T=+y.Index-1),K={},(y.AutoFitHeight=="0"||y.Height)&&(K.hpx=parseInt(y.Height,10),K.hpt=j2(K.hpx),ie[T]=K),y.Hidden=="1"&&(K.hidden=!0,ie[T]=K));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));p.push(m),O.s.r<=O.e.r&&O.s.c<=O.e.c&&(g["!ref"]=un(O),r.sheetRows&&r.sheetRows<=O.e.r&&(g["!fullref"]=g["!ref"],O.e.r=r.sheetRows-1,g["!ref"]=un(O))),N.length&&(g["!merges"]=N),pe.length>0&&(g["!cols"]=pe),ie.length>0&&(g["!rows"]=ie),d[m]=g}else O={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=P=0,l.push([o[3],!1]),u=au(o[0]),m=Gn(u.Name),g=r.dense?[]:{},N=[],H=[],ie=[],J={name:m,Hidden:0},X.Sheets.push(J);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),pe=[],te=!1}break;case"style":o[1]==="/"?_xe(W,Y,r):Y=au(o[0]);break;case"numberformat":Y.nf=Gn(au(o[0]).Format||"General"),qx[Y.nf]&&(Y.nf=qx[Y.nf]);for(var xe=0;xe!=392&&Br[xe]!=Y.nf;++xe);if(xe==392){for(xe=57;xe!=392;++xe)if(Br[xe]==null){Zd(Y.nf,xe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(fe=au(o[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!te&&fe.wpx>10){te=!0,qo=gz;for(var Ee=0;Ee<pe.length;++Ee)pe[Ee]&&Lh(pe[Ee])}te&&Lh(fe),pe[fe.Index-1||pe.length]=fe;for(var ke=0;ke<+fe.Span;++ke)pe[pe.length]=qs(fe);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var oe=Wr(o[0]),Fe={Name:oe.Name,Ref:i1(oe.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(Fe.Sheet=X.Sheets.length-1),X.Names.push(Fe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?L+=n.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;Y.Interior=au(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Kue(D,se,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Sxe(ue),Z.push(ue)}else l.push([o[3],!1]),u=au(o[0]),ue={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Pe=au(o[0]);g["!autofilter"]={ref:i1(Pe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return sP(n,r);var ne=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ne=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ne=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ne=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ne=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else F=o.index+o[0].length;break;case"header":g["!margins"]||ep(g["!margins"]={},"xlml"),isNaN(+Wr(o[0]).Margin)||(g["!margins"].header=+Wr(o[0]).Margin);break;case"footer":g["!margins"]||ep(g["!margins"]={},"xlml"),isNaN(+Wr(o[0]).Margin)||(g["!margins"].footer=+Wr(o[0]).Margin);break;case"pagemargins":var ye=Wr(o[0]);g["!margins"]||ep(g["!margins"]={},"xlml"),isNaN(+ye.Top)||(g["!margins"].top=+ye.Top),isNaN(+ye.Left)||(g["!margins"].left=+ye.Left),isNaN(+ye.Right)||(g["!margins"].right=+ye.Right),isNaN(+ye.Bottom)||(g["!margins"].bottom=+ye.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ne=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ne=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ne=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ne=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ne=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ne=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ne=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ne=!1}break;case"smarttags":break;default:ne=!1;break}if(ne||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?wxe(j,se,M,n.slice(F,o.index)):(M=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ae={};return!r.bookSheets&&!r.bookProps&&(Ae.Sheets=d),Ae.SheetNames=p,Ae.Workbook=X,Ae.SSF=qs(Br),Ae.Props=D,Ae.Custprops=j,Ae}function Dk(t,e){switch(vN(e=e||{}),e.type||"base64"){case"base64":return v3(cc(t),e);case"binary":case"buffer":case"file":return v3(t,e);case"array":return v3(Xh(t),e)}}function Nxe(t,e){var r=[];return t.Props&&r.push(Yue(t.Props,e)),t.Custprops&&r.push(Xue(t.Props,t.Custprops)),r.join("")}function Exe(){return""}function Cxe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var a=[];a.push(Xt("NumberFormat",null,{"ss:Format":ms(Br[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(Xt("Style",a.join(""),i))}),Xt("Styles",r.join(""))}function $z(t){return Xt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+hN(t.Ref,{r:0,c:0})})}function Axe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push($z(s)))}return Xt("Names",r.join(""))}function Txe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push($z(o)))}return a.join("")}function Ixe(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Xt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Xt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Xt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Xt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(vo("ProtectContents","True")),t["!protect"].objects&&s.push(vo("ProtectObjects","True")),t["!protect"].scenarios&&s.push(vo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(vo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(vo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Xt("WorksheetOptions",s.join(""),{xmlns:ec.x})}function Pxe(t){return t.map(function(e){var r=Jce(e.t||""),n=Xt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Xt("Comment",n,{"ss:Author":e.a})}).join("")}function jxe(t,e,r,n,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ms(hN(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=xa(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ms(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ms(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var p="",g="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=wf[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Br[14]);break;case"s":p="String",g=Qce(t.v||"");break}var m=Jh(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=i.c+1;var x=t.v!=null?g:"",y=t.t=="z"?"":'<Data ss:Type="'+p+'">'+x+"</Data>";return(t.c||[]).length>0&&(y+=Pxe(t.c)),Xt("Cell",y,o)}function Rxe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=O1(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Lxe(t,e,r,n){if(!t["!ref"])return"";var s=Kn(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(b,S){Lh(b);var P=!!b.width,T=w4(S,b),O={"ss:Index":S+1};P&&(O["ss:Width"]=I2(T.width)),b.hidden&&(O["ss:Hidden"]="1"),o.push(Xt("Column",null,O))});for(var l=Array.isArray(t),u=s.s.r;u<=s.e.r;++u){for(var d=[Rxe(u,(t["!rows"]||[])[u])],p=s.s.c;p<=s.e.c;++p){var g=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>p)&&!(a[i].s.r>u)&&!(a[i].e.c<p)&&!(a[i].e.r<u)){(a[i].s.c!=p||a[i].s.r!=u)&&(g=!0);break}if(!g){var m={r:u,c:p},x=$r(m),y=l?(t[u]||[])[p]:t[x];d.push(jxe(y,x,t,e,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Fxe(t,e,r){var n=[],s=r.SheetNames[t],a=r.Sheets[s],i=a?Txe(a,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?Lxe(a,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Ixe(a,e,t,r)),n.join("")}function Dxe(t,e){e||(e={}),t.SSF||(t.SSF=qs(Br)),t.SSF&&(sg(),h4(t.SSF),e.revssf=m4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Jh(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Nxe(t,e)),r.push(Exe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Xt("Worksheet",Fxe(n,e,t),{"ss:Name":ms(t.SheetNames[n])}));return r[2]=Cxe(t,e),r[3]=Axe(t),Za+Xt("Workbook",r.join(""),{xmlns:ec.ss,"xmlns:o":ec.o,"xmlns:x":ec.x,"xmlns:ss":ec.ss,"xmlns:dt":ec.dt,"xmlns:html":ec.html})}function Oxe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Aue(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Tue(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Mxe=[60,1084,2066,2165,2175];function Bxe(t,e,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=Hd(r,r.l),u=Ok[l],d=0;u!=null&&Mxe.indexOf(l)>-1;)a=Hd(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=Ok[l=Hd(r,r.l)];var p=Ki(i);xo(p,0);var g=0;p.lens=[];for(var m=0;m<i.length;++m)p.lens.push(g),g+=i[m].length;if(p.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+n;return e.f(p,p.length,s)}function Bu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Br[n])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||wf[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=S2(t.v):t.w=vp(t.v):t.w=Vc(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&n&&t.t=="n"&&ng(Br[n]||String(n))){var s=B0(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Gv(t,e,r){return{v:t,ixfe:e,t:r}}function Vxe(t,e){var r={opts:{}},n={},s=e.dense?[]:{},a={},i={},o=null,l=[],u="",d={},p,g="",m,x,y,b,S={},P=[],T,O,W=[],Y=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},N=function(st){return st<8?Q0[st]:st<64&&Y[st-8]||Q0[st]},D=function(st,wt,me){var Ue=wt.XF.data;if(!(!Ue||!Ue.patternType||!me||!me.cellStyles)){wt.s={},wt.s.patternType=Ue.patternType;var ut;(ut=T2(N(Ue.icvFore)))&&(wt.s.fgColor={rgb:ut}),(ut=T2(N(Ue.icvBack)))&&(wt.s.bgColor={rgb:ut})}},j=function(st,wt,me){if(!(K>1)&&!(me.sheetRows&&st.r>=me.sheetRows)){if(me.cellStyles&&wt.XF&&wt.XF.data&&D(st,wt,me),delete wt.ixfe,delete wt.XF,p=st,g=$r(st),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),st.r<i.s.r&&(i.s.r=st.r),st.c<i.s.c&&(i.s.c=st.c),st.r+1>i.e.r&&(i.e.r=st.r+1),st.c+1>i.e.c&&(i.e.c=st.c+1),me.cellFormula&&wt.f){for(var Ue=0;Ue<P.length;++Ue)if(!(P[Ue][0].s.c>st.c||P[Ue][0].s.r>st.r)&&!(P[Ue][0].e.c<st.c||P[Ue][0].e.r<st.r)){wt.F=un(P[Ue][0]),(P[Ue][0].s.c!=st.c||P[Ue][0].s.r!=st.r)&&delete wt.f,wt.f&&(wt.f=""+$o(P[Ue][1],i,st,H,F));break}}me.dense?(s[st.r]||(s[st.r]=[]),s[st.r][st.c]=wt):s[g]=wt}},F={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:P,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(F.password=e.password);var M,Z=[],ue=[],pe=[],fe=[],te=!1,H=[];H.SheetNames=F.snames,H.sharedf=F.sharedf,H.arrayf=F.arrayf,H.names=[],H.XTI=[];var ie=0,K=0,I=0,z=[],X=[],J;F.codepage=1200,uu(1200);for(var se=!1;t.l<t.length-1;){var le=t.l,ve=t.read_shift(2);if(ve===0&&ie===10)break;var xe=t.l===t.length?0:t.read_shift(2),Ee=Ok[ve];if(Ee&&Ee.f){if(e.bookSheets&&ie===133&&ve!==133)break;if(ie=ve,Ee.r===2||Ee.r==12){var ke=t.read_shift(2);if(xe-=2,!F.enc&&ke!==ve&&((ke&255)<<8|ke>>8)!==ve)throw new Error("rt mismatch: "+ke+"!="+ve);Ee.r==12&&(t.l+=10,xe-=10)}var oe={};if(ve===10?oe=Ee.f(t,xe,F):oe=Bxe(ve,Ee,t,xe,F),K==0&&[9,521,1033,2057].indexOf(ie)===-1)continue;switch(ve){case 34:r.opts.Date1904=L.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(t.l=0),F.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=oe;break;case 66:var Fe=Number(oe);switch(Fe){case 21010:Fe=1200;break;case 32768:Fe=1e4;break;case 32769:Fe=1252;break}uu(F.codepage=Fe),se=!0;break;case 317:F.rrtabid=oe;break;case 25:F.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:F.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(s["!type"]="dialog"),oe.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),oe.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:W.push(oe);break;case 430:H.push([oe]),H[H.length-1].XTI=[];break;case 35:case 547:H[H.length-1].push(oe);break;case 24:case 536:J={Name:oe.Name,Ref:$o(oe.rgce,i,null,H,F)},oe.itab>0&&(J.Sheet=oe.itab-1),H.names.push(J),H[0]||(H[0]=[],H[0].XTI=[]),H[H.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(X[oe.itab-1]={ref:un(oe.rgce[0][0][1][2])});break;case 22:F.ExternCount=oe;break;case 23:H.length==0&&(H[0]=[],H[0].XTI=[]),H[H.length-1].XTI=H[H.length-1].XTI.concat(oe),H.XTI=H.XTI.concat(oe);break;case 2196:if(F.biff<8)break;J!=null&&(J.Comment=oe[1]);break;case 18:s["!protect"]=oe;break;case 19:oe!==0&&F.WTF&&console.error("Password verifier: "+oe);break;case 133:a[oe.pos]=oe,F.snames.push(oe.name);break;case 10:{if(--K)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=un(i),e.sheetRows&&e.sheetRows<=i.e.r){var Pe=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=un(i),i.e.r=Pe}i.e.r++,i.e.c++}Z.length>0&&(s["!merges"]=Z),ue.length>0&&(s["!objects"]=ue),pe.length>0&&(s["!cols"]=pe),fe.length>0&&(s["!rows"]=fe),L.Sheets.push(A)}u===""?d=s:n[u]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[ve]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),F.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(F.biff=5,se=!0,uu(F.codepage=28591)),F.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(F.biff=2),K++)break;if(s=e.dense?[]:{},F.biff<8&&!se&&(se=!0,uu(F.codepage=e.codepage||1252)),F.biff<5||oe.BIFFVer==0&&oe.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var ne={pos:t.l-xe,name:u};a[ne.pos]=ne,F.snames.push(u)}else u=(a[le]||{name:""}).name;oe.dt==32&&(s["!type"]="chart"),oe.dt==64&&(s["!type"]="macro"),Z=[],ue=[],F.arrayf=P=[],pe=[],fe=[],te=!1,A={Hidden:(a[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[oe.r]||[])[oe.c]:s[$r({c:oe.c,r:oe.r})])&&++oe.c,T={ixfe:oe.ixfe,XF:W[oe.ixfe]||{},v:oe.val,t:"n"},I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:oe.c,r:oe.r},T,e);break;case 5:case 517:T={ixfe:oe.ixfe,XF:W[oe.ixfe],v:oe.val,t:oe.t},I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:oe.c,r:oe.r},T,e);break;case 638:T={ixfe:oe.ixfe,XF:W[oe.ixfe],v:oe.rknum,t:"n"},I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:oe.c,r:oe.r},T,e);break;case 189:for(var ye=oe.c;ye<=oe.C;++ye){var Ae=oe.rkrec[ye-oe.c][0];T={ixfe:Ae,XF:W[Ae],v:oe.rkrec[ye-oe.c][1],t:"n"},I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:ye,r:oe.r},T,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(T=Gv(oe.val,oe.cell.ixfe,oe.tt),T.XF=W[T.ixfe],e.cellFormula){var Be=oe.formula;if(Be&&Be[0]&&Be[0][0]&&Be[0][0][0]=="PtgExp"){var Oe=Be[0][0][1][0],pt=Be[0][0][1][1],nt=$r({r:Oe,c:pt});S[nt]?T.f=""+$o(oe.formula,i,oe.cell,H,F):T.F=((e.dense?(s[Oe]||[])[pt]:s[nt])||{}).F}else T.f=""+$o(oe.formula,i,oe.cell,H,F)}I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j(oe.cell,T,e),o=oe}break;case 7:case 519:if(o)o.val=oe,T=Gv(oe,o.cell.ixfe,"s"),T.XF=W[T.ixfe],e.cellFormula&&(T.f=""+$o(o.formula,i,o.cell,H,F)),I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j(o.cell,T,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{P.push(oe);var Lt=$r(oe[0].s);if(m=e.dense?(s[oe[0].s.r]||[])[oe[0].s.c]:s[Lt],e.cellFormula&&m){if(!o||!Lt||!m)break;m.f=""+$o(oe[1],i,oe[0],H,F),m.F=un(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(g){if(!o)break;S[$r(o.cell)]=oe[0],m=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[$r(o.cell)],(m||{}).f=""+$o(oe[0],i,p,H,F)}}break;case 253:T=Gv(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(T.h=l[oe.isst].h),T.XF=W[T.ixfe],I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:oe.c,r:oe.r},T,e);break;case 513:e.sheetStubs&&(T={ixfe:oe.ixfe,XF:W[oe.ixfe],t:"z"},I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:oe.c,r:oe.r},T,e));break;case 190:if(e.sheetStubs)for(var Ct=oe.c;Ct<=oe.C;++Ct){var Nt=oe.ixfe[Ct-oe.c];T={ixfe:Nt,XF:W[Nt],t:"z"},I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:Ct,r:oe.r},T,e)}break;case 214:case 516:case 4:T=Gv(oe.val,oe.ixfe,"s"),T.XF=W[T.ixfe],I>0&&(T.z=z[T.ixfe>>8&63]),Bu(T,e,r.opts.Date1904),j({c:oe.c,r:oe.r},T,e);break;case 0:case 512:K===1&&(i=oe);break;case 252:l=oe;break;case 1054:if(F.biff==4){z[I++]=oe[1];for(var _t=0;_t<I+163&&Br[_t]!=oe[1];++_t);_t>=163&&Zd(oe[1],I+163)}else Zd(oe[1],oe[0]);break;case 30:{z[I++]=oe;for(var ot=0;ot<I+163&&Br[ot]!=oe;++ot);ot>=163&&Zd(oe,I+163)}break;case 229:Z=Z.concat(oe);break;case 93:ue[oe.cmo[0]]=F.lastobj=oe;break;case 438:F.lastobj.TxO=oe;break;case 127:F.lastobj.ImData=oe;break;case 440:for(b=oe[0].s.r;b<=oe[0].e.r;++b)for(y=oe[0].s.c;y<=oe[0].e.c;++y)m=e.dense?(s[b]||[])[y]:s[$r({c:y,r:b})],m&&(m.l=oe[1]);break;case 2048:for(b=oe[0].s.r;b<=oe[0].e.r;++b)for(y=oe[0].s.c;y<=oe[0].e.c;++y)m=e.dense?(s[b]||[])[y]:s[$r({c:y,r:b})],m&&m.l&&(m.l.Tooltip=oe[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;m=e.dense?(s[oe[0].r]||[])[oe[0].c]:s[$r(oe[0])];var Bt=ue[oe[2]];m||(e.dense?(s[oe[0].r]||(s[oe[0].r]=[]),m=s[oe[0].r][oe[0].c]={t:"z"}):m=s[$r(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),m.c||(m.c=[]),x={a:oe[1],t:Bt.TxO.t},m.c.push(x)}break;case 2173:C0e(W[oe.ixfe],oe.ext);break;case 125:{if(!F.cellStyles)break;for(;oe.e>=oe.s;)pe[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},te||(te=!0,uN(oe.w/256)),Lh(pe[oe.e+1])}break;case 520:{var Ot={};oe.level!=null&&(fe[oe.r]=Ot,Ot.level=oe.level),oe.hidden&&(fe[oe.r]=Ot,Ot.hidden=!0),oe.hpt&&(fe[oe.r]=Ot,Ot.hpt=oe.hpt,Ot.hpx=O1(oe.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||ep(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ve]]=oe;break;case 161:s["!margins"]||ep(s["!margins"]={}),s["!margins"].header=oe.header,s["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(L.Views[0].RTL=!0);break;case 146:Y=oe;break;case 2198:M=oe;break;case 140:O=oe;break;case 442:u?A.CodeName=oe||A.name:L.WBProps.CodeName=oe||"ThisWorkbook";break}}else Ee||console.error("Missing Info for XLS Record 0x"+ve.toString(16)),t.l+=xe}return r.SheetNames=La(a).sort(function(ft,st){return Number(ft)-Number(st)}).map(function(ft){return a[ft].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(ft,st){r.Sheets[r.SheetNames[st]]["!autofilter"]=ft}),r.Strings=l,r.SSF=qs(Br),F.enc&&(r.Encryption=F.enc),M&&(r.Themes=M),r.Metadata={},O!==void 0&&(r.Metadata.Country=O),H.names.length>0&&(L.Names=H.names),r.Workbook=L,r}var Hx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Uxe(t,e,r){var n=Rr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=LI(n,Ik,Hx.DSI);for(var a in s)e[a]=s[a]}catch(u){if(r.WTF)throw u}var i=Rr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=LI(i,Pk,Hx.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(zU(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function zxe(t,e){var r=[],n=[],s=[],a=0,i,o=uI(Ik,"n"),l=uI(Pk,"n");if(t.Props)for(i=La(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=La(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)YU.indexOf(s[a][0])>-1||UU.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&Rr.utils.cfb_add(e,"/SummaryInformation",FI(n,Hx.SI,l,Pk)),(r.length||u.length)&&Rr.utils.cfb_add(e,"/DocumentSummaryInformation",FI(r,Hx.DSI,o,Ik,u.length?u:null,Hx.UDI))}function qz(t,e){e||(e={}),vN(e),VS(),e.codepage&&BS(e.codepage);var r,n;if(t.FullPaths){if(Rr.find(t,"/encryption"))throw new Error("File is password-protected");r=Rr.find(t,"!CompObj"),n=Rr.find(t,"/Workbook")||Rr.find(t,"/Book")}else{switch(e.type){case"base64":t=rc(cc(t));break;case"binary":t=rc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}xo(t,0),n={content:t}}var s,a;if(r&&Oxe(r),e.bookProps&&!e.bookSheets)s={};else{var i=yn?"buffer":"array";if(n&&n.content)s=Vxe(n.content,e);else if((a=Rr.find(t,"PerfectOffice_MAIN"))&&a.content)s=Z0.to_workbook(a.content,(e.type=i,e));else if((a=Rr.find(t,"NativeContent_MAIN"))&&a.content)s=Z0.to_workbook(a.content,(e.type=i,e));else throw(a=Rr.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Rr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=tpe(t))}var o={};return t.FullPaths&&Uxe(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function $xe(t,e){var r=e||{},n=Rr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Rr.utils.cfb_add(n,s,Hz(t,r)),r.biff==8&&(t.Props||t.Custprops)&&zxe(t,n),r.biff==8&&t.vbaraw&&rpe(n,Rr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var R2={0:{f:h1e},1:{f:b1e},2:{f:V1e},3:{f:T1e},4:{f:N1e},5:{f:O1e},6:{f:H1e},7:{f:R1e},8:{f:J1e},9:{f:Q1e},10:{f:Y1e},11:{f:X1e},12:{f:k1e},13:{f:z1e},14:{f:P1e},15:{f:C1e},16:{f:Dz},17:{f:G1e},18:{f:F1e},19:{f:eN},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Gge},40:{},42:{},43:{f:Hhe},44:{f:$he},45:{f:Khe},46:{f:Xhe},47:{f:Yhe},48:{},49:{f:gue},50:{},51:{f:I0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:iz},62:{f:q1e},63:{f:B0e},64:{f:pge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Jo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:uge},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:v1e},148:{f:g1e,p:16},151:{f:sge},152:{},153:{f:qge},154:{},155:{},156:{f:zge},157:{},158:{},159:{T:1,f:ihe},160:{T:-1},161:{T:1,f:zp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Z1e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:A0e},336:{T:-1},337:{f:R0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Tk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:az},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:age},427:{f:ige},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:lge},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:y1e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:rge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Tk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:X0e},633:{T:1},634:{T:-1},635:{T:1,f:K0e},636:{T:-1},637:{f:wue},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Pge},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:mge},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Ok={6:{f:x3},10:{f:Jf},12:{f:di},13:{f:di},14:{f:$a},15:{f:$a},16:{f:Go},17:{f:$a},18:{f:$a},19:{f:di},20:{f:UI},21:{f:UI},23:{f:az},24:{f:$I},25:{f:$a},26:{},27:{},28:{f:mfe},29:{},34:{f:$a},35:{f:zI},38:{f:Go},39:{f:Go},40:{f:Go},41:{f:Go},42:{f:$a},43:{f:$a},47:{f:Che},49:{f:zde},51:{f:di},60:{},61:{f:Ode},64:{f:$a},65:{f:Ude},66:{f:di},77:{},80:{},81:{},82:{},85:{f:di},89:{},90:{},91:{},92:{f:Ede},93:{f:yfe},94:{},95:{f:$a},96:{},97:{},99:{f:$a},125:{f:iz},128:{f:nfe},129:{f:Ade},130:{f:di},131:{f:$a},132:{f:$a},133:{f:Tde},134:{},140:{f:Efe},141:{f:di},144:{},146:{f:Tfe},151:{},152:{},153:{},154:{},155:{},156:{f:di},157:{},158:{},160:{f:Dfe},161:{f:jfe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Zde},190:{f:efe},193:{f:Jf},197:{},198:{},199:{},200:{},201:{},202:{f:$a},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:di},220:{},221:{f:$a},222:{},224:{f:rfe},225:{f:Nde},226:{f:Jf},227:{},229:{f:gfe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Pde},253:{f:qde},255:{f:Rde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:XU},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:$a},353:{f:Jf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:lfe},431:{f:$a},432:{},433:{},434:{},437:{},438:{f:bfe},439:{f:$a},440:{f:_fe},441:{},442:{f:Sy},443:{},444:{f:di},445:{},446:{},448:{f:Jf},449:{f:Dde,r:2},450:{f:Jf},512:{f:MI},513:{f:Ffe},515:{f:ife},516:{f:Wde},517:{f:VI},519:{f:Ofe},520:{f:Lde},523:{},545:{f:qI},549:{f:OI},566:{},574:{f:Bde},638:{f:Jde},659:{},1048:{},1054:{f:Kde},1084:{},1212:{f:ffe},2048:{f:Sfe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:qv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Jf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Ife,r:12},2173:{f:E0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:$a,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:dfe,r:12},2197:{},2198:{f:w0e,r:12},2199:{},2200:{},2201:{},2202:{f:hfe,r:12},2203:{f:Jf},2204:{},2205:{},2206:{},2207:{},2211:{f:Fde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:di},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Rfe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Afe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:MI},1:{},2:{f:zfe},3:{f:Vfe},4:{f:Bfe},5:{f:VI},7:{f:qfe},8:{},9:{f:qv},11:{},22:{f:di},30:{f:Xde},31:{},32:{},33:{f:qI},36:{},37:{f:OI},50:{f:Hfe},62:{},52:{},67:{},68:{f:di},69:{},86:{},126:{},127:{f:Mfe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Wfe},223:{},234:{},354:{},421:{},518:{f:x3},521:{f:qv},536:{f:$I},547:{f:zI},561:{},579:{},1030:{f:x3},1033:{f:qv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Qt(t,e,r,n){var s=e;if(!isNaN(s)){var a=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&QS(r)&&t.push(r)}}function qxe(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return Qt(t,e,r,s);var a=e;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<s;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function Ay(t,e,r){return t||(t=bt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Hxe(t,e,r,n){var s=bt(9);return Ay(s,t,e),QU(r,n||"b",s),s}function Wxe(t,e,r){var n=bt(8+2*r.length);return Ay(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Gxe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Ii($s(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Qt(t,2,$fe(r,n,s)):Qt(t,3,Ufe(r,n,s));return;case"b":case"e":Qt(t,5,Hxe(r,n,e.v,e.t));return;case"s":case"str":Qt(t,4,Wxe(r,n,(e.v||"").slice(0,255)));return}Qt(t,1,Ay(null,r,n))}function Kxe(t,e,r,n){var s=Array.isArray(e),a=Kn(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=un(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Xa(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=ga(d)),i=l[d]+o;var p=s?(e[u]||[])[d]:e[i];p&&Gxe(t,p,u,d)}}}function Yxe(t,e){for(var r=e||{},n=Ll(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Qt(n,r.biff==4?1033:r.biff==3?521:9,oN(t,16,r)),Kxe(n,t.Sheets[t.SheetNames[s]],s,r),Qt(n,10),n.end()}function Xxe(t,e,r){Qt(t,49,$de({sz:12,name:"Arial"},r))}function Qxe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Qt(t,1054,Yde(s,e[s],r))})}function Jxe(t,e){var r=bt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Qt(t,2151,r),r=bt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),rz(Kn(e["!ref"]||"A1"),r),r.write_shift(4,4),Qt(t,2152,r)}function Zxe(t,e){for(var r=0;r<16;++r)Qt(t,224,BI({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Qt(t,224,BI(n,0,e))})}function e2e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Qt(t,440,kfe(n)),n[1].Tooltip&&Qt(t,2048,Nfe(n))}delete e["!links"]}function t2e(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&Qt(t,125,Pfe(w4(s,n),s))})}}function r2e(t,e,r,n,s){var a=16+Jh(s.cellXfs,e,s);if(e.v==null&&!e.bf){Qt(t,513,kp(r,n,a));return}if(e.bf)Qt(t,6,Ame(e,r,n,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ii($s(e.v)):e.v;Qt(t,515,ofe(r,n,i,a));break;case"b":case"e":Qt(t,517,afe(r,n,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=mN(s.Strings,e.v,s.revStrings);Qt(t,253,Hde(r,n,o,a))}else Qt(t,516,Gde(r,n,(e.v||"").slice(0,255),a,s));break;default:Qt(t,513,kp(r,n,a))}}function n2e(t,e,r){var n=Ll(),s=r.SheetNames[t],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,p="",g=[],m=Kn(a["!ref"]||"A1"),x=u?65536:16384;if(m.e.c>255||m.e.r>=x){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}Qt(n,2057,oN(r,16,e)),Qt(n,13,Rc(1)),Qt(n,12,Rc(100)),Qt(n,15,cl(!0)),Qt(n,17,cl(!1)),Qt(n,16,bp(.001)),Qt(n,95,cl(!0)),Qt(n,42,cl(!1)),Qt(n,43,cl(!1)),Qt(n,130,Rc(1)),Qt(n,128,sfe()),Qt(n,131,cl(!1)),Qt(n,132,cl(!1)),u&&t2e(n,a["!cols"]),Qt(n,512,Qde(m,e)),u&&(a["!links"]=[]);for(var y=m.s.r;y<=m.e.r;++y){p=Xa(y);for(var b=m.s.c;b<=m.e.c;++b){y===m.s.r&&(g[b]=ga(b)),d=g[b]+p;var S=l?(a[y]||[])[b]:a[d];S&&(r2e(n,S,y,b,e),u&&S.l&&a["!links"].push([d,S.l]))}}var P=o.CodeName||o.name||s;return u&&Qt(n,574,Vde((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Qt(n,229,xfe(a["!merges"])),u&&e2e(n,a),Qt(n,442,JU(P)),u&&Jxe(n,a),Qt(n,10),n.end()}function s2e(t,e,r){var n=Ll(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(Qt(n,2057,oN(t,5,r)),r.bookType=="xla"&&Qt(n,135),Qt(n,225,o?Rc(1200):null),Qt(n,193,ade(2)),l&&Qt(n,191),l&&Qt(n,192),Qt(n,226),Qt(n,92,Cde("SheetJS",r)),Qt(n,66,Rc(o?1200:1252)),o&&Qt(n,353,Rc(0)),o&&Qt(n,448),Qt(n,317,Lfe(t.SheetNames.length)),o&&t.vbaraw&&Qt(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Qt(n,442,JU(u))}Qt(n,156,Rc(17)),Qt(n,25,cl(!1)),Qt(n,18,cl(!1)),Qt(n,19,Rc(0)),o&&Qt(n,431,cl(!1)),o&&Qt(n,444,Rc(0)),Qt(n,61,Mde()),Qt(n,64,cl(!1)),Qt(n,141,Rc(0)),Qt(n,34,cl(Dge(t)=="true")),Qt(n,14,cl(!0)),o&&Qt(n,439,cl(!1)),Qt(n,218,Rc(0)),Xxe(n,t,r),Qxe(n,t.SSF,r),Zxe(n,r),o&&Qt(n,352,cl(!1));var d=n.end(),p=Ll();o&&Qt(p,140,Cfe()),o&&r.Strings&&qxe(p,252,jde(r.Strings)),Qt(p,10);var g=p.end(),m=Ll(),x=0,y=0;for(y=0;y<t.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var b=d.length+x+g.length;for(y=0;y<t.SheetNames.length;++y){var S=a[y]||{};Qt(m,133,Ide({pos:b,hs:S.Hidden||0,dt:0,name:t.SheetNames[y]},r)),b+=e[y].length}var P=m.end();if(x!=P.length)throw new Error("BS8 "+x+" != "+P.length);var T=[];return d.length&&T.push(d),P.length&&T.push(P),g.length&&T.push(g),Ki(T)}function a2e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=qs(Br)),t&&t.SSF&&(sg(),h4(t.SSF),r.revssf=m4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,wN(r),r.cellXfs=[],Jh(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=n2e(s,r,t);return n.unshift(s2e(t,n,r)),Ki(n)}function Hz(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Fl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return a2e(t,e);case 4:case 3:case 2:return Yxe(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function eP(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=$ce(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,p=0,g=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var y=l[i].trim(),b=y.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var S=y.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var P=S[o].trim();if(P.match(/<t[dh]/i)){for(var T=P,O=0;T.charAt(0)=="<"&&(O=T.indexOf(">"))>-1;)T=T.slice(O+1);for(var W=0;W<x.length;++W){var Y=x[W];Y.s.c==d&&Y.s.r<u&&u<=Y.e.r&&(d=Y.e.c+1,W=-1)}var L=Wr(P.slice(0,P.indexOf(">")));g=L.colspan?+L.colspan:1,((p=+L.rowspan)>1||g>1)&&x.push({s:{r:u,c:d},e:{r:u+(p||1)-1,c:d+g-1}});var A=L.t||L["data-t"]||"";if(!T.length){d+=g;continue}if(T=mU(T),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!T.length){d+=g;continue}var N={t:"s",v:T};r.raw||!T.trim().length||A=="s"||(T==="TRUE"?N={t:"b",v:!0}:T==="FALSE"?N={t:"b",v:!1}:isNaN(pu(T))?isNaN(F1(T).getDate())||(N={t:"d",v:$s(T)},r.cellDates||(N={t:"n",v:Ii(N.v)}),N.z=r.dateNF||Br[14]):N={t:"n",v:pu(T)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=N):n[$r({r:u,c:d})]=N,d+=g}}}}return n["!ref"]=un(m),x.length&&(n["!merges"]=x),n}function i2e(t,e,r,n){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=$r({r,c:i}),p=n.dense?(t[r]||[])[i]:t[d],g=p&&p.v!=null&&(p.h||KS(p.w||(lf(p),p.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?g='<span contenteditable="true">'+g+"</span>":p&&(m["data-t"]=p&&p.t||"z",p.v!=null&&(m["data-v"]=p.v),p.z!=null&&(m["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),m.id=(n.id||"sjs")+"-"+d,a.push(Xt("td",g,m))}}var x="<tr>";return x+a.join("")+"</tr>"}var o2e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',l2e="</body></html>";function c2e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Qh(eP(r[0],e),e);var n=kN();return r.forEach(function(s,a){SN(n,eP(s,e),"Sheet"+(a+1))}),n}function u2e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Wz(t,e){var r=e||{},n=r.header!=null?r.header:o2e,s=r.footer!=null?r.footer:l2e,a=[n],i=Fl(t["!ref"]);r.dense=Array.isArray(t),a.push(u2e(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(i2e(t,i,o,r));return a.push("</table>"+s),a.join("")}function Gz(t,e,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?xa(n.origin):n.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=Fl(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var p=[],g=0,m=t["!rows"]||(t["!rows"]=[]),x=0,y=0,b=0,S=0,P=0,T=0;for(t["!cols"]||(t["!cols"]=[]);x<o.length&&y<l;++x){var O=o[x];if(tP(O)){if(n.display)continue;m[y]={hidden:!0}}var W=O.children;for(b=S=0;b<W.length;++b){var Y=W[b];if(!(n.display&&tP(Y))){var L=Y.hasAttribute("data-v")?Y.getAttribute("data-v"):Y.hasAttribute("v")?Y.getAttribute("v"):mU(Y.innerHTML),A=Y.getAttribute("data-z")||Y.getAttribute("z");for(g=0;g<p.length;++g){var N=p[g];N.s.c==S+a&&N.s.r<y+s&&y+s<=N.e.r&&(S=N.e.c+1-a,g=-1)}T=+Y.getAttribute("colspan")||1,((P=+Y.getAttribute("rowspan")||1)>1||T>1)&&p.push({s:{r:y+s,c:S+a},e:{r:y+s+(P||1)-1,c:S+a+(T||1)-1}});var D={t:"s",v:L},j=Y.getAttribute("data-t")||Y.getAttribute("t")||"";L!=null&&(L.length==0?D.t=j||"z":n.raw||L.trim().length==0||j=="s"||(L==="TRUE"?D={t:"b",v:!0}:L==="FALSE"?D={t:"b",v:!1}:isNaN(pu(L))?isNaN(F1(L).getDate())||(D={t:"d",v:$s(L)},n.cellDates||(D={t:"n",v:Ii(D.v)}),D.z=n.dateNF||Br[14]):D={t:"n",v:pu(L)})),D.z===void 0&&A!=null&&(D.z=A);var F="",M=Y.getElementsByTagName("A");if(M&&M.length)for(var Z=0;Z<M.length&&!(M[Z].hasAttribute("href")&&(F=M[Z].getAttribute("href"),F.charAt(0)!="#"));++Z);F&&F.charAt(0)!="#"&&(D.l={Target:F}),n.dense?(t[y+s]||(t[y+s]=[]),t[y+s][S+a]=D):t[$r({c:S+a,r:y+s})]=D,u.e.c<S+a&&(u.e.c=S+a),S+=T}}++y}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),u.e.r=Math.max(u.e.r,y-1+s),t["!ref"]=un(u),y>=l&&(t["!fullref"]=un((u.e.r=o.length-x+y-1+s,u))),t}function Kz(t,e){var r=e||{},n=r.dense?[]:{};return Gz(n,t,e)}function d2e(t,e){return Qh(Kz(t,e),e)}function tP(t){var e="",r=f2e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function f2e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function h2e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Gn(e.replace(/<[^>]*>/g,""));return[r]}var rP={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Yz(t,e){var r=e||{},n=YS(t),s=[],a,i,o={name:""},l="",u=0,d,p,g={},m=[],x=r.dense?[]:{},y,b,S={value:""},P="",T=0,O=[],W=-1,Y=-1,L={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,N={},D=[],j={},F=0,M=0,Z=[],ue=1,pe=1,fe=[],te={Names:[]},H={},ie=["",""],K=[],I={},z="",X=0,J=!1,se=!1,le=0;for(C2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=C2.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"工作表":y[1]==="/"?(L.e.c>=L.s.c&&L.e.r>=L.s.r?x["!ref"]=un(L):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=L.e.r&&(x["!fullref"]=x["!ref"],L.e.r=r.sheetRows-1,x["!ref"]=un(L)),D.length&&(x["!merges"]=D),Z.length&&(x["!rows"]=Z),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),g[d.name]=x,se=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Wr(y[0],!1),W=Y=-1,L.s.r=L.s.c=1e7,L.e.r=L.e.c=0,x=r.dense?[]:{},D=[],Z=[],se=!0);break;case"table-row-group":y[1]==="/"?--A:++A;break;case"table-row":case"行":if(y[1]==="/"){W+=ue,ue=1;break}if(p=Wr(y[0],!1),p.行号?W=p.行号-1:W==-1&&(W=0),ue=+p["number-rows-repeated"]||1,ue<10)for(le=0;le<ue;++le)A>0&&(Z[W+le]={level:A});Y=-1;break;case"covered-table-cell":y[1]!=="/"&&++Y,r.sheetStubs&&(r.dense?(x[W]||(x[W]=[]),x[W][Y]={t:"z"}):x[$r({r:W,c:Y})]={t:"z"}),P="",O=[];break;case"table-cell":case"数据":if(y[0].charAt(y[0].length-2)==="/")++Y,S=Wr(y[0],!1),pe=parseInt(S["number-columns-repeated"]||"1",10),b={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(b.f=QI(Gn(S.formula))),(S.数据类型||S["value-type"])=="string"&&(b.t="s",b.v=Gn(S["string-value"]||""),r.dense?(x[W]||(x[W]=[]),x[W][Y]=b):x[$r({r:W,c:Y})]=b),Y+=pe-1;else if(y[1]!=="/"){++Y,P="",T=0,O=[],pe=1;var ve=ue?W+ue-1:W;if(Y>L.e.c&&(L.e.c=Y),Y<L.s.c&&(L.s.c=Y),W<L.s.r&&(L.s.r=W),ve>L.e.r&&(L.e.r=ve),S=Wr(y[0],!1),K=[],I={},b={t:S.数据类型||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=Gn(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(F=parseInt(S["number-matrix-rows-spanned"],10)||0,M=parseInt(S["number-matrix-columns-spanned"],10)||0,j={s:{r:W,c:Y},e:{r:W+F-1,c:Y+M-1}},b.F=un(j),fe.push([j,b.F])),S.formula)b.f=QI(S.formula);else for(le=0;le<fe.length;++le)W>=fe[le][0].s.r&&W<=fe[le][0].e.r&&Y>=fe[le][0].s.c&&Y<=fe[le][0].e.c&&(b.F=fe[le][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(F=parseInt(S["number-rows-spanned"],10)||0,M=parseInt(S["number-columns-spanned"],10)||0,j={s:{r:W,c:Y},e:{r:W+F-1,c:Y+M-1}},D.push(j)),S["number-columns-repeated"]&&(pe=parseInt(S["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Bs(S["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(S.value);break;case"percentage":b.t="n",b.v=parseFloat(S.value);break;case"currency":b.t="n",b.v=parseFloat(S.value);break;case"date":b.t="d",b.v=$s(S["date-value"]),r.cellDates||(b.t="n",b.v=Ii(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=Vce(S["time-value"])/86400,r.cellDates&&(b.t="d",b.v=g4(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(S.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",S["string-value"]!=null&&(P=Gn(S["string-value"]),O=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(J=!1,b.t==="s"&&(b.v=P||"",O.length&&(b.R=O),J=T==0),H.Target&&(b.l=H),K.length>0&&(b.c=K,K=[]),P&&r.cellText!==!1&&(b.w=P),J&&(b.t="z",delete b.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=W))for(var xe=0;xe<ue;++xe){if(pe=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(x[W+xe]||(x[W+xe]=[]),x[W+xe][Y]=xe==0?b:qs(b);--pe>0;)x[W+xe][Y+pe]=qs(b);else for(x[$r({r:W+xe,c:Y})]=b;--pe>0;)x[$r({r:W+xe,c:Y+pe})]=qs(b);L.e.c<=Y&&(L.e.c=Y)}pe=parseInt(S["number-columns-repeated"]||"1",10),Y+=pe-1,pe=0,b={},P="",O=[]}H={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;I.t=P,O.length&&(I.R=O),I.a=z,K.push(I)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);z="",X=0,P="",T=0,O=[];break;case"creator":y[1]==="/"?z=n.slice(X,y.index):X=y.index+y[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);P="",T=0,O=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(N[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Wr(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Wr(y[0],!1),l+=rP[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Wr(y[0],!1),l+=rP[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Wr(y[0],!1),ie=y3(i["cell-range-address"]);var Ee={Name:i.name,Ref:ie[0]+"!"+ie[1]};se&&(Ee.Sheet=m.length),te.Names.push(Ee);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!S||!S["string-value"])){var ke=h2e(n.slice(T,y.index));P=(P.length>0?P+`
`:"")+ke[0]}else Wr(y[0],!1),T=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{ie=y3(Wr(y[0])["target-range-address"]),g[ie[0]]["!autofilter"]={ref:ie[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(H=Wr(y[0],!1),!H.href)break;H.Target=Gn(H.href),delete H.href,H.Target.charAt(0)=="#"&&H.Target.indexOf(".")>-1?(ie=y3(H.Target.slice(1)),H.Target="#"+ie[0]+"!"+ie[1]):H.Target.match(/^\.\.[\\\/]/)&&(H.Target=H.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(y)}}var oe={Sheets:g,SheetNames:m,Workbook:te};return r.bookSheets&&delete oe.Sheets,oe}function nP(t,e){e=e||{},Pc(t,"META-INF/manifest.xml")&&Vue(ui(t,"META-INF/manifest.xml"),e);var r=nc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Yz(bs(r),e);return Pc(t,"meta.xml")&&(n.Props=BU(ui(t,"meta.xml"))),n}function sP(t,e){return Yz(t,e)}var p2e=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+E2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Za+e}})(),aP=(function(){var t=function(a){return ms(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+ms(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,p=Fl(a["!ref"]||"A1"),g=a["!merges"]||[],m=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=p.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",b=a["!rows"]||[];for(u=0;u<p.s.r;++u)y=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=p.e.r;++u){for(y=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<p.s.c;++d)l.push(e);for(;d<=p.e.c;++d){var S=!1,P={},T="";for(m=0;m!=g.length;++m)if(!(g[m].s.c>d)&&!(g[m].s.r>u)&&!(g[m].e.c<d)&&!(g[m].e.r<u)){(g[m].s.c!=d||g[m].s.r!=u)&&(S=!0),P["table:number-columns-spanned"]=g[m].e.c-g[m].s.c+1,P["table:number-rows-spanned"]=g[m].e.r-g[m].s.r+1;break}if(S){l.push(r);continue}var O=$r({r:u,c:d}),W=x?(a[u]||[])[d]:a[O];if(W&&W.f&&(P["table:formula"]=ms(Lme(W.f)),W.F&&W.F.slice(0,O.length)==O)){var Y=Fl(W.F);P["table:number-matrix-columns-spanned"]=Y.e.c-Y.s.c+1,P["table:number-matrix-rows-spanned"]=Y.e.r-Y.s.r+1}if(!W){l.push(e);continue}switch(W.t){case"b":T=W.v?"TRUE":"FALSE",P["office:value-type"]="boolean",P["office:boolean-value"]=W.v?"true":"false";break;case"n":T=W.w||String(W.v||0),P["office:value-type"]="float",P["office:value"]=W.v||0;break;case"s":case"str":T=W.v==null?"":W.v,P["office:value-type"]="string";break;case"d":T=W.w||$s(W.v).toISOString(),P["office:value-type"]="date",P["office:date-value"]=$s(W.v).toISOString(),P["table:style-name"]="ce1";break;default:l.push(e);continue}var L=t(T);if(W.l&&W.l.Target){var A=W.l.Target;A=A.charAt(0)=="#"?"#"+Fme(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),L=Xt("text:a",L,{"xlink:href":A.replace(/&/g,"&amp;")})}l.push("          "+Xt("table:table-cell",Xt("text:p",L,{}),P)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var p=u["!cols"][d];if(p.width==null&&p.wpx==null&&p.wch==null)continue;Lh(p),p.ods=o;var g=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var p=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Za],u=E2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=E2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(MU().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var p=0;p!=i.SheetNames.length;++p)l.push(n(i.Sheets[i.SheetNames[p]],i,p));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function Xz(t,e){if(e.bookType=="fods")return aP(t,e);var r=HS(),n="",s=[],a=[];return n="mimetype",fn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",fn(r,n,aP(t,e)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",fn(r,n,p2e(t,e)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",fn(r,n,Za+MU()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",fn(r,n,$ue(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",fn(r,n,Uue(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Sp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Mk(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):bs(Xh(t))}function m2e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):rc(Zu(t))}function g2e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Dh(t){var e=t.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function iP(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function x2e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function y2e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=r>=0?0:128}function L2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function us(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function ja(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Qn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=L2(t,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=L2(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};e[s]==null?e[s]=[u]:e[s].push(u)}return e}function co(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(us(n*8+s.type)),s.type==2&&e.push(us(s.data.length)),e.push(s.data))})}),Dh(e)}function yN(t,e){return t?.map(function(r){return e(r.data)})||[]}function Ac(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=L2(t,n),a=Qn(t.slice(n[0],n[0]+s));n[0]+=s;var i={id:ja(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Qn(o.data),u=ja(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=a[3])!=null&&e[0]&&(i.merge=ja(a[3][0].data)>>>0>0),r.push(i)}return r}function bm(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:us(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:us(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:us(i.data.length)}],n[2].push({data:co(i.meta),type:2})});var a=co(n);e.push(us(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),Dh(e)}function v2e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=L2(e,r),s=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Dh(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=Dh(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Tc(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(v2e(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Dh(e)}function _m(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var a=us(n),i=a.length;e.push(a),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Dh(e)}function w2e(t,e,r,n){var s=Sp(t),a=s.getUint32(4,!0),i=(n>1?12:8)+iP(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=iP(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:e[l]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:u>0};break;case 7:p={t:"n",v:u/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(l>-1)p={t:"s",v:e[l]};else if(!isNaN(u))p={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function b2e(t,e,r){var n=Sp(t),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=x2e(t,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:l};break;case 3:p={t:"s",v:e[o]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:u>0};break;case 7:p={t:"n",v:u/86400};break;case 8:p={t:"e",v:0};break;case 9:if(i>-1)p={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return p}function w3(t,e){var r=new Uint8Array(32),n=Sp(r),s=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,y2e(r,s,t.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,s)}function b3(t,e){var r=new Uint8Array(32),n=Sp(r),s=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,s)}function _2e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return w2e(t,e,r,t[0]);case 5:return b2e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function zo(t){var e=Qn(t);return L2(e[1][0].data)}function oP(t,e){var r=Qn(e.data),n=ja(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=Qn(i.data),l=ja(o[1][0].data)>>>0;switch(n){case 1:a[l]=Mk(o[3][0].data);break;case 8:{var u=t[zo(o[9][0].data)][0],d=Qn(u.data),p=t[zo(d[1][0].data)][0],g=ja(p.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var m=Qn(p.data);a[l]=m[3].map(function(x){return Mk(x.data)}).join("")}break}}),a}function k2e(t,e){var r,n,s,a,i,o,l,u,d,p,g,m,x,y,b=Qn(t),S=ja(b[1][0].data)>>>0,P=ja(b[2][0].data)>>>0,T=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&ja(b[8][0].data)>0||!1,O,W;if((a=(s=b[7])==null?void 0:s[0])!=null&&a.data&&e!=0)O=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,W=(u=(l=b[6])==null?void 0:l[0])==null?void 0:u.data;else if((p=(d=b[4])==null?void 0:d[0])!=null&&p.data&&e!=1)O=(m=(g=b[4])==null?void 0:g[0])==null?void 0:m.data,W=(y=(x=b[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var Y=T?4:1,L=Sp(O),A=[],N=0;N<O.length/2;++N){var D=L.getUint16(N*2,!0);D<65535&&A.push([N,D])}if(A.length!=P)throw"Expected ".concat(P," cells, found ").concat(A.length);var j=[];for(N=0;N<A.length-1;++N)j[A[N][0]]=W.subarray(A[N][1]*Y,A[N+1][1]*Y);return A.length>=1&&(j[A[A.length-1][0]]=W.subarray(A[A.length-1][1]*Y)),{R:S,cells:j}}function S2e(t,e){var r,n=Qn(e.data),s=(r=n?.[7])!=null&&r[0]?ja(n[7][0].data)>>>0>0?1:0:-1,a=yN(n[5],function(i){return k2e(i,s)});return{nrows:ja(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function N2e(t,e,r){var n,s=Qn(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ja(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ja(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=un(a);var i=Qn(s[4][0].data),o=oP(t,t[zo(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?oP(t,t[zo(i[17][0].data)][0]):[],u=Qn(i[3][0].data),d=0;u[1].forEach(function(p){var g=Qn(p.data),m=t[zo(g[2][0].data)][0],x=ja(m.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=S2e(t,m);y.data.forEach(function(b,S){b.forEach(function(P,T){var O=$r({r:d+S,c:T}),W=_2e(P,o,l);W&&(r[O]=W)})}),d+=y.nrows})}function E2e(t,e){var r=Qn(e.data),n={"!ref":"A1"},s=t[zo(r[2][0].data)],a=ja(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return N2e(t,s[0],n),n}function C2e(t,e){var r,n=Qn(e.data),s={name:(r=n[1])!=null&&r[0]?Mk(n[1][0].data):"",sheets:[]},a=yN(n[2],zo);return a.forEach(function(i){t[i].forEach(function(o){var l=ja(o.meta[1][0].data);l==6e3&&s.sheets.push(E2e(t,o))})}),s}function A2e(t,e){var r=kN(),n=Qn(e.data),s=yN(n[1],zo);if(s.forEach(function(a){t[a].forEach(function(i){var o=ja(i.meta[1][0].data);if(o==2){var l=C2e(t,i);l.sheets.forEach(function(u,d){SN(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function _3(t){var e,r,n,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Tc(l.content)}catch(p){return console.log("?? "+l.content.length+" "+(p.message||p))}var d;try{d=Ac(u)}catch(p){return console.log("## "+(p.message||p))}d.forEach(function(p){a[p.id]=p.messages,i.push(p.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=a?.[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ja(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=ja(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return A2e(a,o)}function T2e(t,e,r){var n,s,a,i;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&ja(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Sp(t[7][0].data),d=0,p=[],g=Sp(t[4][0].data),m=0,x=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),g.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),g.setUint16(y*2,m,!0);var b,S;switch(typeof e[y]){case"string":b=w3({t:"s",v:e[y]},r),S=b3({t:"s",v:e[y]},r);break;case"number":b=w3({t:"n",v:e[y]},r),S=b3({t:"n",v:e[y]},r);break;case"boolean":b=w3({t:"b",v:e[y]},r),S=b3({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}p.push(b),d+=b.length,x.push(S),m+=S.length,++l}for(t[2][0].data=us(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),g.setUint16(y*2,65535,!0);return t[6][0].data=Dh(p),t[3][0].data=Dh(x),l}function I2e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Fl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(un(n)));var a=eb(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(z){return z.forEach(function(X){typeof X=="string"&&i.push(X)})});var o={},l=[],u=Rr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(z,X){return[z,u.FullPaths[X]]}).forEach(function(z){var X=z[0],J=z[1];if(X.type==2&&X.name.match(/\.iwa/)){var se=X.content,le=Tc(se),ve=Ac(le);ve.forEach(function(xe){l.push(xe.id),o[xe.id]={deps:[],location:J,type:ja(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(z,X){return z-X});var d=l.filter(function(z){return z>1}).map(function(z){return[z,us(z)]});u.FileIndex.map(function(z,X){return[z,u.FullPaths[X]]}).forEach(function(z){var X=z[0];if(z[1],!!X.name.match(/\.iwa/)){var J=Ac(Tc(X.content));J.forEach(function(se){se.messages.forEach(function(le){d.forEach(function(ve){se.messages.some(function(xe){return ja(xe.meta[1][0].data)!=11006&&g2e(xe.data,ve[1])})&&o[ve[0]].deps.push(se.id)})})})}});for(var p=Rr.find(u,o[1].location),g=Ac(Tc(p.content)),m,x=0;x<g.length;++x){var y=g[x];y.id==1&&(m=y)}var b=zo(Qn(m.messages[0].data)[1][0].data);for(p=Rr.find(u,o[b].location),g=Ac(Tc(p.content)),x=0;x<g.length;++x)y=g[x],y.id==b&&(m=y);for(b=zo(Qn(m.messages[0].data)[2][0].data),p=Rr.find(u,o[b].location),g=Ac(Tc(p.content)),x=0;x<g.length;++x)y=g[x],y.id==b&&(m=y);for(b=zo(Qn(m.messages[0].data)[2][0].data),p=Rr.find(u,o[b].location),g=Ac(Tc(p.content)),x=0;x<g.length;++x)y=g[x],y.id==b&&(m=y);var S=Qn(m.messages[0].data);{S[6][0].data=us(n.e.r+1),S[7][0].data=us(n.e.c+1);var P=zo(S[46][0].data),T=Rr.find(u,o[P].location),O=Ac(Tc(T.content));{for(var W=0;W<O.length&&O[W].id!=P;++W);if(O[W].id!=P)throw"Bad ColumnRowUIDMapArchive";var Y=Qn(O[W].messages[0].data);Y[1]=[],Y[2]=[],Y[3]=[];for(var L=0;L<=n.e.c;++L){var A=[];A[1]=A[2]=[{type:0,data:us(L+420690)}],Y[1].push({type:2,data:co(A)}),Y[2].push({type:0,data:us(L)}),Y[3].push({type:0,data:us(L)})}Y[4]=[],Y[5]=[],Y[6]=[];for(var N=0;N<=n.e.r;++N)A=[],A[1]=A[2]=[{type:0,data:us(N+726270)}],Y[4].push({type:2,data:co(A)}),Y[5].push({type:0,data:us(N)}),Y[6].push({type:0,data:us(N)});O[W].messages[0].data=co(Y)}T.content=_m(bm(O)),T.size=T.content.length,delete S[46];var D=Qn(S[4][0].data);{D[7][0].data=us(n.e.r+1);var j=Qn(D[1][0].data),F=zo(j[2][0].data);T=Rr.find(u,o[F].location),O=Ac(Tc(T.content));{if(O[0].id!=F)throw"Bad HeaderStorageBucket";var M=Qn(O[0].messages[0].data);for(N=0;N<a.length;++N){var Z=Qn(M[2][0].data);Z[1][0].data=us(N),Z[4][0].data=us(a[N].length),M[2][N]={type:M[2][0].type,data:co(Z)}}O[0].messages[0].data=co(M)}T.content=_m(bm(O)),T.size=T.content.length;var ue=zo(D[2][0].data);T=Rr.find(u,o[ue].location),O=Ac(Tc(T.content));{if(O[0].id!=ue)throw"Bad HeaderStorageBucket";for(M=Qn(O[0].messages[0].data),L=0;L<=n.e.c;++L)Z=Qn(M[2][0].data),Z[1][0].data=us(L),Z[4][0].data=us(n.e.r+1),M[2][L]={type:M[2][0].type,data:co(Z)};O[0].messages[0].data=co(M)}T.content=_m(bm(O)),T.size=T.content.length;var pe=zo(D[4][0].data);(function(){for(var z=Rr.find(u,o[pe].location),X=Ac(Tc(z.content)),J,se=0;se<X.length;++se){var le=X[se];le.id==pe&&(J=le)}var ve=Qn(J.messages[0].data);{ve[3]=[];var xe=[];i.forEach(function(oe,Fe){xe[1]=[{type:0,data:us(Fe)}],xe[2]=[{type:0,data:us(1)}],xe[3]=[{type:2,data:m2e(oe)}],ve[3].push({type:2,data:co(xe)})})}J.messages[0].data=co(ve);var Ee=bm(X),ke=_m(Ee);z.content=ke,z.size=z.content.length})();var fe=Qn(D[3][0].data);{var te=fe[1][0];delete fe[2];var H=Qn(te.data);{var ie=zo(H[2][0].data);(function(){for(var z=Rr.find(u,o[ie].location),X=Ac(Tc(z.content)),J,se=0;se<X.length;++se){var le=X[se];le.id==ie&&(J=le)}var ve=Qn(J.messages[0].data);{delete ve[6],delete fe[7];var xe=new Uint8Array(ve[5][0].data);ve[5]=[];for(var Ee=0,ke=0;ke<=n.e.r;++ke){var oe=Qn(xe);Ee+=T2e(oe,a[ke],i),oe[1][0].data=us(ke),ve[5].push({data:co(oe),type:2})}ve[1]=[{type:0,data:us(n.e.c+1)}],ve[2]=[{type:0,data:us(n.e.r+1)}],ve[3]=[{type:0,data:us(Ee)}],ve[4]=[{type:0,data:us(n.e.r+1)}]}J.messages[0].data=co(ve);var Fe=bm(X),Pe=_m(Fe);z.content=Pe,z.size=z.content.length})()}te.data=co(H)}D[3][0].data=co(fe)}S[4][0].data=co(D)}m.messages[0].data=co(S);var K=bm(g),I=_m(K);return p.content=I,p.size=p.content.length,u}function Qz(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function vN(t){Qz([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function wN(t){Qz([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function P2e(t){return En.WS.indexOf(t)>-1?"sheet":t==En.CS?"chart":t==En.DS?"dialog":t==En.MS?"macro":t&&t.length?t:"sheet"}function j2e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,P2e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function R2e(t,e,r,n,s,a,i,o,l,u,d,p){try{a[n]=Ux(nc(t,r,!0),e);var g=ui(t,e),m;switch(o){case"sheet":m=txe(g,e,s,l,a[n],u,d,p);break;case"chart":if(m=rxe(g,e,s,l,a[n],u,d,p),!m||!m["!drawel"])break;var x=mx(m["!drawel"].Target,e),y=A2(x),b=z0e(nc(t,x,!0),Ux(nc(t,y,!0),x)),S=mx(b,x),P=A2(S);m=Tge(nc(t,S,!0),S,l,Ux(nc(t,P,!0),S),u,m);break;case"macro":m=nxe(g,e,s,l,a[n],u,d,p);break;case"dialog":m=sxe(g,e,s,l,a[n],u,d,p);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=m;var T=[];a&&a[n]&&La(a[n]).forEach(function(O){var W="";if(a[n][O].Type==En.CMNT){W=mx(a[n][O].Target,e);var Y=lxe(ui(t,W,!0),W,l);if(!Y||!Y.length)return;WI(m,Y,!1)}a[n][O].Type==En.TCMNT&&(W=mx(a[n][O].Target,e),T=T.concat(q0e(ui(t,W,!0),l)))}),T&&T.length&&WI(m,T,!0,l.people||[])}catch(O){if(l.WTF)throw O}}function kc(t){return t.charAt(0)=="/"?t.slice(1):t}function L2e(t,e){if(sg(),e=e||{},vN(e),Pc(t,"META-INF/manifest.xml")||Pc(t,"objectdata.xml"))return nP(t,e);if(Pc(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof _3<"u"){if(t.FileIndex)return _3(t);var r=Rr.utils.cfb_new();return hI(t).forEach(function(Z){fn(r,Z,Hce(t,Z))}),_3(r)}throw new Error("Unsupported NUMBERS file")}if(!Pc(t,"[Content_Types].xml"))throw Pc(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Pc(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=hI(t),s=Mue(nc(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",ui(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!ui(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(zx=[],s.sst)try{zx=oxe(ui(t,kc(s.sst)),s.sst,e)}catch(Z){if(e.WTF)throw Z}e.cellStyles&&s.themes.length&&(l=ixe(nc(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(u=axe(ui(t,kc(s.style)),s.style,l,e))}s.links.map(function(Z){try{var ue=Ux(nc(t,A2(kc(Z))),Z);return uxe(ui(t,kc(Z)),ue,Z,e)}catch{}});var d=exe(ui(t,kc(s.workbooks[0])),s.workbooks[0],e),p={},g="";s.coreprops.length&&(g=ui(t,kc(s.coreprops[0]),!0),g&&(p=BU(g)),s.extprops.length!==0&&(g=ui(t,kc(s.extprops[0]),!0),g&&Hue(g,p,e)));var m={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(g=nc(t,kc(s.custprops[0]),!0),g&&(m=Gue(g,e)));var x={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ue){return ue.name}):p.Worksheets&&p.SheetNames.length>0&&(i=p.SheetNames),e.bookProps&&(x.Props=p,x.Custprops=m),e.bookSheets&&typeof i<"u"&&(x.SheetNames=i),e.bookSheets?x.SheetNames:e.bookProps))return x;i={};var y={};e.bookDeps&&s.calcchain&&(y=cxe(ui(t,kc(s.calcchain)),s.calcchain));var b=0,S={},P,T;{var O=d.Sheets;p.Worksheets=O.length,p.SheetNames=[];for(var W=0;W!=O.length;++W)p.SheetNames[W]=O[W].name}var Y=a?"bin":"xml",L=s.workbooks[0].lastIndexOf("/"),A=(s.workbooks[0].slice(0,L+1)+"_rels/"+s.workbooks[0].slice(L+1)+".rels").replace(/^\//,"");Pc(t,A)||(A="xl/_rels/workbook."+Y+".rels");var N=Ux(nc(t,A,!0),A.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=dxe(ui(t,kc(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=W0e(ui(t,kc(s.people[0])),e)),N&&(N=j2e(N,d.Sheets));var D=ui(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=p.Worksheets;++b){var j="sheet";if(N&&N[b]?(P="xl/"+N[b][1].replace(/[\/]?xl\//,""),Pc(t,P)||(P=N[b][1]),Pc(t,P)||(P=A.replace(/_rels\/.*$/,"")+N[b][1]),j=N[b][2]):(P="xl/worksheets/sheet"+(b+1-D)+"."+Y,P=P.replace(/sheet0\./,"sheet.")),T=P.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(b!=e.sheets)continue e;break;case"string":if(p.SheetNames[b].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var F=!1,M=0;M!=e.sheets.length;++M)typeof e.sheets[M]=="number"&&e.sheets[M]==b&&(F=1),typeof e.sheets[M]=="string"&&e.sheets[M].toLowerCase()==p.SheetNames[b].toLowerCase()&&(F=1);if(!F)continue e}}R2e(t,P,T,p.SheetNames[b],b,S,i,j,e,d,l,u)}return x={Directory:s,Workbook:d,Props:p,Custprops:m,Deps:y,Sheets:i,SheetNames:p.SheetNames,Strings:zx,Styles:u,Themes:l,SSF:qs(Br)},e&&e.bookFiles&&(t.files?(x.keys=n,x.files=t.files):(x.keys=[],x.files={},t.FullPaths.forEach(function(Z,ue){Z=Z.replace(/^Root Entry[\/]/,""),x.keys.push(Z),x.files[Z]=t.FileIndex[ue]}))),e&&e.bookVBA&&(s.vba.length>0?x.vbaraw=ui(t,kc(s.vba[0]),!0):s.defaults&&s.defaults.bin===epe&&(x.vbaraw=ui(t,"xl/vbaProject.bin",!0))),x}function F2e(t,e){var r=e||{},n="Workbook",s=Rr.find(t,n);try{if(n="/!DataSpaces/Version",s=Rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(dhe(s.content),n="/!DataSpaces/DataSpaceMap",s=Rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=hhe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=phe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ghe(s.content)}catch{}if(n="/EncryptionInfo",s=Rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=xhe(s.content);if(n="/EncryptedPackage",s=Rr.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function D2e(t,e){return e.bookType=="ods"?Xz(t,e):e.bookType=="numbers"?I2e(t,e):e.bookType=="xlsb"?O2e(t,e):M2e(t,e)}function O2e(t,e){zm=1024,t&&!t.SSF&&(t.SSF=qs(Br)),t&&t.SSF&&(sg(),h4(t.SSF),e.revssf=m4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,$x?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Sz.indexOf(e.bookType)>-1,s=aN();wN(e=e||{});var a=HS(),i="",o=0;if(e.cellXfs=[],Jh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",fn(a,i,VU(t.Props,e)),s.coreprops.push(i),fs(e.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,fn(a,i,$U(t.Props)),s.extprops.push(i),fs(e.rels,3,i,En.EXT_PROPS),t.Custprops!==t.Props&&La(t.Custprops||{}).length>0&&(i="docProps/custom.xml",fn(a,i,qU(t.Custprops)),s.custprops.push(i),fs(e.rels,4,i,En.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,fn(a,i,hxe(o-1,i,e,t,d)),s.sheets.push(i),fs(e.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(p){var m=p["!comments"],x=!1,y="";m&&m.length>0&&(y="xl/comments"+o+"."+r,fn(a,y,gxe(m,y)),s.comments.push(y),fs(d,-1,"../comments"+o+"."+r,En.CMNT),x=!0),p["!legacy"]&&x&&fn(a,"xl/drawings/vmlDrawing"+o+".vml",_z(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&fn(a,A2(i),a1(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,fn(a,i,mxe(e.Strings,i,e)),s.strs.push(i),fs(e.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,fn(a,i,fxe(t,i)),s.workbooks.push(i),fs(e.rels,1,i,En.WB),i="xl/theme/theme1.xml",fn(a,i,dN(t.Themes,e)),s.themes.push(i),fs(e.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,fn(a,i,pxe(t,i,e)),s.styles.push(i),fs(e.wbrels,-1,"styles."+r,En.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",fn(a,i,t.vbaraw),s.vba.push(i),fs(e.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,fn(a,i,xxe(i)),s.metadata.push(i),fs(e.wbrels,-1,"metadata."+r,En.XLMETA),fn(a,"[Content_Types].xml",OU(s,e)),fn(a,"_rels/.rels",a1(e.rels)),fn(a,"xl/_rels/workbook."+r+".rels",a1(e.wbrels)),delete e.revssf,delete e.ssf,a}function M2e(t,e){zm=1024,t&&!t.SSF&&(t.SSF=qs(Br)),t&&t.SSF&&(sg(),h4(t.SSF),e.revssf=m4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,$x?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Sz.indexOf(e.bookType)>-1,s=aN();wN(e=e||{});var a=HS(),i="",o=0;if(e.cellXfs=[],Jh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",fn(a,i,VU(t.Props,e)),s.coreprops.push(i),fs(e.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,fn(a,i,$U(t.Props)),s.extprops.push(i),fs(e.rels,3,i,En.EXT_PROPS),t.Custprops!==t.Props&&La(t.Custprops||{}).length>0&&(i="docProps/custom.xml",fn(a,i,qU(t.Custprops)),s.custprops.push(i),fs(e.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var p={"!id":{}},g=t.Sheets[t.SheetNames[o-1]],m=(g||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,fn(a,i,Fz(o-1,e,t,p)),s.sheets.push(i),fs(e.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(g){var x=g["!comments"],y=!1,b="";if(x&&x.length>0){var S=!1;x.forEach(function(P){P[1].forEach(function(T){T.T==!0&&(S=!0)})}),S&&(b="xl/threadedComments/threadedComment"+o+"."+r,fn(a,b,H0e(x,d,e)),s.threadedcomments.push(b),fs(p,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),b="xl/comments"+o+"."+r,fn(a,b,kz(x)),s.comments.push(b),fs(p,-1,"../comments"+o+"."+r,En.CMNT),y=!0}g["!legacy"]&&y&&fn(a,"xl/drawings/vmlDrawing"+o+".vml",_z(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&fn(a,A2(i),a1(p))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,fn(a,i,uz(e.Strings,e)),s.strs.push(i),fs(e.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,fn(a,i,Vz(t)),s.workbooks.push(i),fs(e.rels,1,i,En.WB),i="xl/theme/theme1.xml",fn(a,i,dN(t.Themes,e)),s.themes.push(i),fs(e.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,fn(a,i,yz(t,e)),s.styles.push(i),fs(e.wbrels,-1,"styles."+r,En.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",fn(a,i,t.vbaraw),s.vba.push(i),fs(e.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,fn(a,i,bz()),s.metadata.push(i),fs(e.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",fn(a,i,G0e(d)),s.people.push(i),fs(e.wbrels,-1,"persons/person.xml",En.PEOPLE)),fn(a,"[Content_Types].xml",OU(s,e)),fn(a,"_rels/.rels",a1(e.rels)),fn(a,"xl/_rels/workbook."+r+".rels",a1(e.wbrels)),delete e.revssf,delete e.ssf,a}function bN(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=cc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function B2e(t,e){return Rr.find(t,"EncryptedPackage")?F2e(t,e):qz(t,e)}function V2e(t,e){var r,n=t,s=e||{};return s.type||(s.type=yn&&Buffer.isBuffer(t)?"buffer":"base64"),r=fU(n,s),L2e(r,s)}function Jz(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Dk(t.slice(r),e);default:break e}return D1.to_workbook(t,e)}function U2e(t,e){var r="",n=bN(t,e);switch(e.type){case"base64":r=cc(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=wp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=bs(r)),e.type="binary",Jz(r,e)}function z2e(t,e){var r=t;return e.type=="base64"&&(r=cc(r)),r=_2.utils.decode(1200,r.slice(2),"str"),e.type="binary",Jz(r,e)}function $2e(t){return t.match(/[^\x00-\x7F]/)?Zu(t):t}function k3(t,e,r,n){return n?(r.type="string",D1.to_workbook(t,r)):D1.to_workbook(e,r)}function Bk(t,e){VS();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Bk(new Uint8Array(t),(r=qs(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),o1={},r.dateNF&&(o1.dateNF=r.dateNF),r.type||(r.type=yn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=yn?"buffer":"binary",n=Oce(t),typeof Uint8Array<"u"&&!yn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=$2e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=qs(r),r.type="array",Bk(US(n),r)}switch((s=bN(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return B2e(Rr.read(n,r),r);break;case 9:if(s[1]<=8)return qz(n,r);break;case 60:return Dk(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Kfe(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return lz.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?V2e(n,r):k3(t,n,r,a);case 239:return s[3]===60?Dk(n,r):k3(t,n,r,a);case 255:if(s[1]===254)return z2e(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Z0.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Z0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Fk.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return mz.to_workbook(n,r);break;case 10:case 13:case 32:return U2e(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Gfe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Fk.to_workbook(n,r):k3(t,n,r,a)}function Zz(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return by(e.file,Rr.write(t,{type:yn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Rr.write(t,e)}function q2e(t,e){var r=qs(e||{}),n=D2e(t,r);return H2e(n,r)}function H2e(t,e){var r={},n=yn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Rr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(f4(s))}return e.password&&typeof encrypt_agile<"u"?Zz(encrypt_agile(s,e.password),e):e.type==="file"?by(e.file,s):e.type=="string"?bs(s):s}function W2e(t,e){var r=e||{},n=$xe(t,r);return Zz(n,r)}function $u(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return k2(Zu(n));case"binary":return Zu(n);case"string":return t;case"file":return by(e.file,n,"utf8");case"buffer":return yn?yf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):$u(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function G2e(t,e){switch(e.type){case"base64":return k2(t);case"binary":return t;case"string":return t;case"file":return by(e.file,t,"binary");case"buffer":return yn?yf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Kv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?k2(r):e.type=="string"?bs(r):r;case"file":return by(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function e$(t,e){VS(),Bge(t);var r=qs(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=e$(t,r);return r.type="array",f4(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return $u(Dxe(t,r),r);case"slk":case"sylk":return $u(oz.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return $u(Wz(t.Sheets[t.SheetNames[s]],r),r);case"txt":return G2e(t$(t.Sheets[t.SheetNames[s]],r),r);case"csv":return $u(_N(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return $u(lz.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return Kv(Fk.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return $u(D1.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return $u(mz.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return $u(cz.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return $u(Xz(t,r),r);case"wk1":return Kv(Z0.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return Kv(Z0.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Kv(Hz(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),W2e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return q2e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function K2e(t,e,r,n,s,a,i,o){var l=Xa(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,g=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!i||t[r])for(var m=e.s.c;m<=e.e.c;++m){var x=i?t[r][m]:t[n[m]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[m]!=null&&(g[a[m]]=u);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[m]!=null){if(y==null)if(x.t=="e"&&y===null)g[a[m]]=null;else if(u!==void 0)g[a[m]]=u;else if(d&&y===null)g[a[m]]=null;else continue;else g[a[m]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:lf(x,y,o);y!=null&&(p=!1)}}return{row:g,isempty:p}}function eb(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Kn(d);break;case"number":l=Kn(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var p=Xa(l.s.r),g=[],m=[],x=0,y=0,b=Array.isArray(t),S=l.s.r,P=0,T={};b&&!t[S]&&(t[S]=[]);var O=u.skipHidden&&t["!cols"]||[],W=u.skipHidden&&t["!rows"]||[];for(P=l.s.c;P<=l.e.c;++P)if(!(O[P]||{}).hidden)switch(g[P]=ga(P),r=b?t[S][P]:t[g[P]+p],n){case 1:a[P]=P-l.s.c;break;case 2:a[P]=g[P];break;case 3:a[P]=u.header[P-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=lf(r,null,u),y=T[i]||0,!y)T[i]=1;else{do o=i+"_"+y++;while(T[o]);T[i]=y,T[o]=1}a[P]=o}for(S=l.s.r+s;S<=l.e.r;++S)if(!(W[S]||{}).hidden){var Y=K2e(t,l,S,g,n,a,b,u);(Y.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[x++]=Y.row)}return m.length=x,m}var lP=/"/g;function Y2e(t,e,r,n,s,a,i,o){for(var l=!0,u=[],d="",p=Xa(r),g=e.s.c;g<=e.e.c;++g)if(n[g]){var m=o.dense?(t[r]||[])[g]:t[n[g]+p];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:lf(m,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(lP,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(lP,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function _N(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Kn(t["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",p=[];n.dense=Array.isArray(t);for(var g=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(g[x]||{}).hidden||(p[x]=ga(x));for(var y=0,b=s.s.r;b<=s.e.r;++b)(m[b]||{}).hidden||(d=Y2e(t,s,b,p,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function t$(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=_N(t,e);return r}function X2e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Kn(t["!ref"]),a="",i=[],o,l=[],u=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=ga(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Xa(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function r$(t,e,r){var n=r||{},s=+!n.skipHeader,a=t||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?xa(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var p=Kn(a["!ref"]);d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),i==-1&&(i=p.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var g=n.header||[],m=0;e.forEach(function(y,b){La(y).forEach(function(S){(m=g.indexOf(S))==-1&&(g[m=g.length]=S);var P=y[S],T="z",O="",W=$r({c:o+m,r:i+b+s});u=F2(a,W),P&&typeof P=="object"&&!(P instanceof Date)?a[W]=P:(typeof P=="number"?T="n":typeof P=="boolean"?T="b":typeof P=="string"?T="s":P instanceof Date?(T="d",n.cellDates||(T="n",P=Ii(P)),O=n.dateNF||Br[14]):P===null&&n.nullError&&(T="e",P=0),u?(u.t=T,u.v=P,delete u.w,delete u.R,O&&(u.z=O)):a[W]=u={t:T,v:P},O&&(u.z=O))})}),d.e.c=Math.max(d.e.c,o+g.length-1);var x=Xa(i);if(s)for(m=0;m<g.length;++m)a[ga(m+o)+x]={t:"s",v:g[m]};return a["!ref"]=un(d),a}function Q2e(t,e){return r$(null,t,e)}function F2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=xa(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?F2(t,$r(e)):F2(t,$r({r:e,c:r||0}))}function J2e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function kN(){return{SheetNames:[],Sheets:{}}}function SN(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=i+s)!=-1;++s);}if(Bz(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Z2e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=J2e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function eye(t,e){return t.z=e,t}function n$(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function tye(t,e,r){return n$(t,"#"+e,r)}function rye(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function nye(t,e,r,n){for(var s=typeof e!="string"?e:Kn(e),a=typeof e=="string"?e:un(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=F2(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Uw={encode_col:ga,encode_row:Xa,encode_cell:$r,encode_range:un,decode_col:ZS,decode_row:JS,split_cell:mue,decode_cell:xa,decode_range:Fl,format_cell:lf,sheet_add_aoa:IU,sheet_add_json:r$,sheet_add_dom:Gz,aoa_to_sheet:ag,json_to_sheet:Q2e,table_to_sheet:Kz,table_to_book:d2e,sheet_to_csv:_N,sheet_to_txt:t$,sheet_to_json:eb,sheet_to_html:Wz,sheet_to_formulae:X2e,sheet_to_row_object_array:eb,sheet_get_cell:F2,book_new:kN,book_append_sheet:SN,book_set_sheet_visibility:Z2e,cell_set_number_format:eye,cell_set_hyperlink:n$,cell_set_internal_link:tye,cell_add_comment:rye,sheet_set_array_formula:nye,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const sye=t=>new Promise((e,r)=>{KV.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>e(n.data),error:r})}),aye=async t=>{const e=await t.arrayBuffer(),r=Bk(e,{type:"array"}),n=r.Sheets[r.SheetNames[0]];return Uw.sheet_to_json(n)};function s$({pharmacyId:t,onClose:e}){const[r,n]=R.useState("");R.useEffect(()=>{const{overflow:o}=document.body.style;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=o}},[]);const s=()=>{const o=[{name:"Paracetamol",price:800,description:"OTC analgesic",image:"https://...",category:"Over-the-Counter",stock:50,sku:"PAR-500"},{name:"Ibuprofen",price:1200,description:"NSAID",image:"https://...",category:"Over-the-Counter",stock:30,sku:"IBU-200"}],l=Object.keys(o[0]),u=[l.join(","),...o.map(m=>l.map(x=>m[x]).join(","))].join(`
`),d=new Blob([u],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(d),g=document.createElement("a");g.href=p,g.download="pharmasea_inventory_template.csv",g.click(),URL.revokeObjectURL(p)},a=async o=>{try{n("");const l=o?.[0];if(!l)return;let u=[];l.name.endsWith(".csv")?u=await sye(l):u=await aye(l);const d=u.map(p=>({name:p.name,price:Number(p.price),description:p.description||"",image:p.image||"",category:p.category||"Over-the-Counter",stock:Number(p.stock||0),sku:p.sku||""})).filter(p=>p.name&&p.price);if(!d.length)throw new Error("No valid rows found. Expect headers: name, price, description, image, category, stock, sku");await _V(d,t),e()}catch(l){n(l.message||"Failed to parse file")}},i=c.jsx("div",{className:`
        fixed inset-0 z-[100]
        grid place-items-center
        bg-black/30 backdrop-blur-sm
        min-h-[100svh]
        animate-fade-in
      `,onClick:e,children:c.jsxs("div",{className:`
          bg-white rounded-3xl p-6 w-[92vw] max-w-sm
          shadow-xl border border-[#9ED3FF]
          max-h-[85svh] overflow-auto
          card-interactive hover:shadow-2xl transition-all duration-300
          animate-bounce-in
        `,onClick:o=>o.stopPropagation(),children:[c.jsx("div",{className:"text-lg font-light font-poppins mb-4 text-black animate-text-reveal",children:"Bulk Upload Products"}),c.jsx("div",{className:"space-y-3 animate-fade-in",style:{animationDelay:"0.1s"},children:c.jsx("input",{className:"w-full border-b border-[#9ED3FF] text-[13px] font-light py-2 outline-none focus:border-sky-500 dark:border-gray-600 transition-colors duration-200 hover:border-sky-400",placeholder:"CSV or XLSX File",type:"file",onChange:o=>a(o.target.files),accept:".csv,.xlsx"})}),c.jsxs("div",{className:"flex gap-2 mt-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[c.jsx("button",{onClick:s,className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700 btn-interactive hover:scale-105 active:scale-95 transition-all duration-200",children:"Download CSV template"}),c.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 text-zinc-500 text-[13px] font-light py-2 btn-interactive hover:border-zinc-400 hover:scale-105 active:scale-95 transition-all duration-200",onClick:e,children:"Cancel"})]}),r&&c.jsx("div",{className:"mt-3 text-red-600 text-sm animate-shake animate-fade-in",children:r})]})});return mi.createPortal(i,document.body)}function hs(t){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(t)}var gu=Uint8Array,ac=Uint16Array,NN=Int32Array,EN=new gu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),CN=new gu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cP=new gu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a$=function(t,e){for(var r=new ac(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new NN(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)s[a]=a-r[n]<<5|n;return{b:r,r:s}},i$=a$(EN,2),iye=i$.b,Vk=i$.r;iye[28]=258,Vk[258]=28;var oye=a$(CN,0),uP=oye.r,Uk=new ac(32768);for(var zs=0;zs<32768;++zs){var Zf=(zs&43690)>>1|(zs&21845)<<1;Zf=(Zf&52428)>>2|(Zf&13107)<<2,Zf=(Zf&61680)>>4|(Zf&3855)<<4,Uk[zs]=((Zf&65280)>>8|(Zf&255)<<8)>>1}var Wx=(function(t,e,r){for(var n=t.length,s=0,a=new ac(e);s<n;++s)t[s]&&++a[t[s]-1];var i=new ac(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(r){o=new ac(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],p=i[t[s]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)o[Uk[p]>>l]=u}else for(o=new ac(n),s=0;s<n;++s)t[s]&&(o[s]=Uk[i[t[s]-1]++]>>15-t[s]);return o}),Np=new gu(288);for(var zs=0;zs<144;++zs)Np[zs]=8;for(var zs=144;zs<256;++zs)Np[zs]=9;for(var zs=256;zs<280;++zs)Np[zs]=7;for(var zs=280;zs<288;++zs)Np[zs]=8;var tb=new gu(32);for(var zs=0;zs<32;++zs)tb[zs]=5;var lye=Wx(Np,9,0),cye=Wx(tb,5,0),o$=function(t){return(t+7)/8|0},uye=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new gu(t.subarray(e,r))},Dd=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},ex=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},S3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,a=r.slice();if(!s)return{t:c$,l:0};if(s==1){var i=new gu(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(W,Y){return W.f-Y.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,p=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=r[r[u].f<r[p].f?u++:p++],l=r[u!=d&&r[u].f<r[p].f?u++:p++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=a[0].s,n=1;n<s;++n)a[n].s>g&&(g=a[n].s);var m=new ac(g+1),x=zk(r[d-1],m,0);if(x>e){var n=0,y=0,b=x-e,S=1<<b;for(a.sort(function(Y,L){return m[L.s]-m[Y.s]||Y.f-L.f});n<s;++n){var P=a[n].s;if(m[P]>e)y+=S-(1<<x-m[P]),m[P]=e;else break}for(y>>=b;y>0;){var T=a[n].s;m[T]<e?y-=1<<e-m[T]++-1:++n}for(;n>=0&&y;--n){var O=a[n].s;m[O]==e&&(--m[O],++y)}x=e}return{t:new gu(m),l:x}},zk=function(t,e,r){return t.s==-1?Math.max(zk(t.l,e,r+1),zk(t.r,e,r+1)):e[t.s]=r},dP=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ac(++e),n=0,s=t[0],a=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:r.subarray(0,n),n:e}},tx=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},l$=function(t,e,r){var n=r.length,s=o$(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<n;++a)t[s+a+4]=r[a];return(s+4+n)*8},fP=function(t,e,r,n,s,a,i,o,l,u,d){Dd(e,d++,r),++s[256];for(var p=S3(s,15),g=p.t,m=p.l,x=S3(a,15),y=x.t,b=x.l,S=dP(g),P=S.c,T=S.n,O=dP(y),W=O.c,Y=O.n,L=new ac(19),A=0;A<P.length;++A)++L[P[A]&31];for(var A=0;A<W.length;++A)++L[W[A]&31];for(var N=S3(L,7),D=N.t,j=N.l,F=19;F>4&&!D[cP[F-1]];--F);var M=u+5<<3,Z=tx(s,Np)+tx(a,tb)+i,ue=tx(s,g)+tx(a,y)+i+14+3*F+tx(L,D)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&M<=Z&&M<=ue)return l$(e,d,t.subarray(l,l+u));var pe,fe,te,H;if(Dd(e,d,1+(ue<Z)),d+=2,ue<Z){pe=Wx(g,m,0),fe=g,te=Wx(y,b,0),H=y;var ie=Wx(D,j,0);Dd(e,d,T-257),Dd(e,d+5,Y-1),Dd(e,d+10,F-4),d+=14;for(var A=0;A<F;++A)Dd(e,d+3*A,D[cP[A]]);d+=3*F;for(var K=[P,W],I=0;I<2;++I)for(var z=K[I],A=0;A<z.length;++A){var X=z[A]&31;Dd(e,d,ie[X]),d+=D[X],X>15&&(Dd(e,d,z[A]>>5&127),d+=z[A]>>12)}}else pe=lye,fe=Np,te=cye,H=tb;for(var A=0;A<o;++A){var J=n[A];if(J>255){var X=J>>18&31;ex(e,d,pe[X+257]),d+=fe[X+257],X>7&&(Dd(e,d,J>>23&31),d+=EN[X]);var se=J&31;ex(e,d,te[se]),d+=H[se],se>3&&(ex(e,d,J>>5&8191),d+=CN[se])}else ex(e,d,pe[J]),d+=fe[J]}return ex(e,d,pe[256]),d+fe[256]},dye=new NN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),c$=new gu(0),fye=function(t,e,r,n,s,a){var i=a.z||t.length,o=new gu(n+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(n,o.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var p=dye[e-1],g=p>>13,m=p&8191,x=(1<<r)-1,y=a.p||new ac(32768),b=a.h||new ac(x+1),S=Math.ceil(r/3),P=2*S,T=function(Pe){return(t[Pe]^t[Pe+1]<<S^t[Pe+2]<<P)&x},O=new NN(25e3),W=new ac(288),Y=new ac(32),L=0,A=0,N=a.i||0,D=0,j=a.w||0,F=0;N+2<i;++N){var M=T(N),Z=N&32767,ue=b[M];if(y[Z]=ue,b[M]=Z,j<=N){var pe=i-N;if((L>7e3||D>24576)&&(pe>423||!u)){d=fP(t,l,0,O,W,Y,A,D,F,N-F,d),D=L=A=0,F=N;for(var fe=0;fe<286;++fe)W[fe]=0;for(var fe=0;fe<30;++fe)Y[fe]=0}var te=2,H=0,ie=m,K=Z-ue&32767;if(pe>2&&M==T(N-K))for(var I=Math.min(g,pe)-1,z=Math.min(32767,N),X=Math.min(258,pe);K<=z&&--ie&&Z!=ue;){if(t[N+te]==t[N+te-K]){for(var J=0;J<X&&t[N+J]==t[N+J-K];++J);if(J>te){if(te=J,H=K,J>I)break;for(var se=Math.min(K,J-2),le=0,fe=0;fe<se;++fe){var ve=N-K+fe&32767,xe=y[ve],Ee=ve-xe&32767;Ee>le&&(le=Ee,ue=ve)}}}Z=ue,ue=y[Z],K+=Z-ue&32767}if(H){O[D++]=268435456|Vk[te]<<18|uP[H];var ke=Vk[te]&31,oe=uP[H]&31;A+=EN[ke]+CN[oe],++W[257+ke],++Y[oe],j=N+te,++L}else O[D++]=t[N],++W[t[N]]}}for(N=Math.max(N,j);N<i;++N)O[D++]=t[N],++W[t[N]];d=fP(t,l,u,O,W,Y,A,D,F,N-F,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=b,a.p=y,a.i=N,a.w=j)}else{for(var N=a.w||0;N<i+u;N+=65535){var Fe=N+65535;Fe>=i&&(l[d/8|0]=u,Fe=i),d=l$(l,d+1,t.subarray(N,Fe))}a.i=i}return uye(o,0,n+o$(d)+s)},u$=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,a=r.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=n+=r[i];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},hye=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new gu(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return fye(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},d$=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},pye=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=u$();s.p(e.dictionary),d$(t,2,s.d())}};function $k(t,e){e||(e={});var r=u$();r.p(t);var n=hye(t,e,e.dictionary?6:2,4);return pye(n,e),d$(n,n.length-4,r.d()),n}var mye=typeof TextDecoder<"u"&&new TextDecoder,gye=0;try{mye.decode(c$,{stream:!0}),gye=1}catch{}function xye(t){if(Array.isArray(t))return t}function yye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function hP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function vye(t,e){if(t){if(typeof t=="string")return hP(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hP(t,e):void 0}}function wye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pP(t,e){return xye(t)||yye(t,e)||vye(t,e)||wye()}function mP(t,e="utf8"){return new TextDecoder(e).decode(t)}const bye=new TextEncoder;function _ye(t){return bye.encode(t)}const kye=1024*8,Sye=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),N3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class AN{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=kye,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,a=e.byteLength-s;let i=s;(ArrayBuffer.isView(e)||e instanceof AN)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=N3[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,a=this.buffer.slice(s,s+n);if(this.littleEndian===Sye&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const l=new N3[r](o.buffer);return this.offset+=n,l.reverse(),l}const i=new N3[r](a);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return mP(this.readBytes(e))}decodeText(e=1,r="utf8"){return mP(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(_ye(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function og(t){let e=t.length;for(;--e>=0;)t[e]=0}const Nye=3,Eye=258,f$=29,Cye=256,Aye=Cye+1+f$,h$=30,Tye=512,Iye=new Array((Aye+2)*2);og(Iye);const Pye=new Array(h$*2);og(Pye);const jye=new Array(Tye);og(jye);const Rye=new Array(Eye-Nye+1);og(Rye);const Lye=new Array(f$);og(Lye);const Fye=new Array(h$);og(Fye);const Dye=(t,e,r,n)=>{let s=t&65535|0,a=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do s=s+e[n++]|0,a=a+s|0;while(--i);s%=65521,a%=65521}return s|a<<16|0};var qk=Dye;const Oye=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},Mye=new Uint32Array(Oye()),Bye=(t,e,r,n)=>{const s=Mye,a=n+r;t^=-1;for(let i=n;i<a;i++)t=t>>>8^s[(t^e[i])&255];return t^-1};var Vu=Bye,Hk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},p$={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Vye=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Uye=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Vye(r,n)&&(t[n]=r[n])}}return t},zye=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,a=t.length;n<a;n++){let i=t[n];r.set(i,s),s+=i.length}return r},m$={assign:Uye,flattenChunks:zye};let g$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{g$=!1}const D2=new Uint8Array(256);for(let t=0;t<256;t++)D2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;D2[254]=D2[254]=1;var $ye=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,a,i=t.length,o=0;for(s=0;s<i;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<i&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,s=0;a<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<i&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|r&63):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|r&63):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|r&63);return e};const qye=(t,e)=>{if(e<65534&&t.subarray&&g$)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var Hye=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const a=new Array(r*2);for(s=0,n=0;n<r;){let i=t[n++];if(i<128){a[s++]=i;continue}let o=D2[i];if(o>4){a[s++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<r;)i=i<<6|t[n++]&63,o--;if(o>1){a[s++]=65533;continue}i<65536?a[s++]=i:(i-=65536,a[s++]=55296|i>>10&1023,a[s++]=56320|i&1023)}return qye(a,s)},Wye=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+D2[t[r]]>e?r:e},Wk={string2buf:$ye,buf2string:Hye,utf8border:Wye};function Gye(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Kye=Gye;const Yv=16209,Yye=16191;var Xye=function(e,r){let n,s,a,i,o,l,u,d,p,g,m,x,y,b,S,P,T,O,W,Y,L,A,N,D;const j=e.state;n=e.next_in,N=e.input,s=n+(e.avail_in-5),a=e.next_out,D=e.output,i=a-(r-e.avail_out),o=a+(e.avail_out-257),l=j.dmax,u=j.wsize,d=j.whave,p=j.wnext,g=j.window,m=j.hold,x=j.bits,y=j.lencode,b=j.distcode,S=(1<<j.lenbits)-1,P=(1<<j.distbits)-1;e:do{x<15&&(m+=N[n++]<<x,x+=8,m+=N[n++]<<x,x+=8),T=y[m&S];t:for(;;){if(O=T>>>24,m>>>=O,x-=O,O=T>>>16&255,O===0)D[a++]=T&65535;else if(O&16){W=T&65535,O&=15,O&&(x<O&&(m+=N[n++]<<x,x+=8),W+=m&(1<<O)-1,m>>>=O,x-=O),x<15&&(m+=N[n++]<<x,x+=8,m+=N[n++]<<x,x+=8),T=b[m&P];r:for(;;){if(O=T>>>24,m>>>=O,x-=O,O=T>>>16&255,O&16){if(Y=T&65535,O&=15,x<O&&(m+=N[n++]<<x,x+=8,x<O&&(m+=N[n++]<<x,x+=8)),Y+=m&(1<<O)-1,Y>l){e.msg="invalid distance too far back",j.mode=Yv;break e}if(m>>>=O,x-=O,O=a-i,Y>O){if(O=Y-O,O>d&&j.sane){e.msg="invalid distance too far back",j.mode=Yv;break e}if(L=0,A=g,p===0){if(L+=u-O,O<W){W-=O;do D[a++]=g[L++];while(--O);L=a-Y,A=D}}else if(p<O){if(L+=u+p-O,O-=p,O<W){W-=O;do D[a++]=g[L++];while(--O);if(L=0,p<W){O=p,W-=O;do D[a++]=g[L++];while(--O);L=a-Y,A=D}}}else if(L+=p-O,O<W){W-=O;do D[a++]=g[L++];while(--O);L=a-Y,A=D}for(;W>2;)D[a++]=A[L++],D[a++]=A[L++],D[a++]=A[L++],W-=3;W&&(D[a++]=A[L++],W>1&&(D[a++]=A[L++]))}else{L=a-Y;do D[a++]=D[L++],D[a++]=D[L++],D[a++]=D[L++],W-=3;while(W>2);W&&(D[a++]=D[L++],W>1&&(D[a++]=D[L++]))}}else if((O&64)===0){T=b[(T&65535)+(m&(1<<O)-1)];continue r}else{e.msg="invalid distance code",j.mode=Yv;break e}break}}else if((O&64)===0){T=y[(T&65535)+(m&(1<<O)-1)];continue t}else if(O&32){j.mode=Yye;break e}else{e.msg="invalid literal/length code",j.mode=Yv;break e}break}}while(n<s&&a<o);W=x>>3,n-=W,x-=W<<3,m&=(1<<x)-1,e.next_in=n,e.next_out=a,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=a<o?257+(o-a):257-(a-o),j.hold=m,j.bits=x};const km=15,gP=852,xP=592,yP=0,E3=1,vP=2,Qye=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Jye=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Zye=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),eve=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),tve=(t,e,r,n,s,a,i,o)=>{const l=o.bits;let u=0,d=0,p=0,g=0,m=0,x=0,y=0,b=0,S=0,P=0,T,O,W,Y,L,A=null,N;const D=new Uint16Array(km+1),j=new Uint16Array(km+1);let F=null,M,Z,ue;for(u=0;u<=km;u++)D[u]=0;for(d=0;d<n;d++)D[e[r+d]]++;for(m=l,g=km;g>=1&&D[g]===0;g--);if(m>g&&(m=g),g===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&D[p]===0;p++);for(m<p&&(m=p),b=1,u=1;u<=km;u++)if(b<<=1,b-=D[u],b<0)return-1;if(b>0&&(t===yP||g!==1))return-1;for(j[1]=0,u=1;u<km;u++)j[u+1]=j[u]+D[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[j[e[r+d]]++]=d);if(t===yP?(A=F=i,N=20):t===E3?(A=Qye,F=Jye,N=257):(A=Zye,F=eve,N=0),P=0,d=0,u=p,L=a,x=m,y=0,W=-1,S=1<<m,Y=S-1,t===E3&&S>gP||t===vP&&S>xP)return 1;for(;;){M=u-y,i[d]+1<N?(Z=0,ue=i[d]):i[d]>=N?(Z=F[i[d]-N],ue=A[i[d]-N]):(Z=96,ue=0),T=1<<u-y,O=1<<x,p=O;do O-=T,s[L+(P>>y)+O]=M<<24|Z<<16|ue|0;while(O!==0);for(T=1<<u-1;P&T;)T>>=1;if(T!==0?(P&=T-1,P+=T):P=0,d++,--D[u]===0){if(u===g)break;u=e[r+i[d]]}if(u>m&&(P&Y)!==W){for(y===0&&(y=m),L+=p,x=u-y,b=1<<x;x+y<g&&(b-=D[x+y],!(b<=0));)x++,b<<=1;if(S+=1<<x,t===E3&&S>gP||t===vP&&S>xP)return 1;W=P&Y,s[W]=m<<24|x<<16|L-a|0}}return P!==0&&(s[L+P]=u-y<<24|64<<16|0),o.bits=m,0};var Gx=tve;const rve=0,x$=1,y$=2,{Z_FINISH:wP,Z_BLOCK:nve,Z_TREES:Xv,Z_OK:Ep,Z_STREAM_END:sve,Z_NEED_DICT:ave,Z_STREAM_ERROR:Uc,Z_DATA_ERROR:v$,Z_MEM_ERROR:w$,Z_BUF_ERROR:ive,Z_DEFLATED:bP}=p$,b4=16180,_P=16181,kP=16182,SP=16183,NP=16184,EP=16185,CP=16186,AP=16187,TP=16188,IP=16189,rb=16190,Od=16191,C3=16192,PP=16193,A3=16194,jP=16195,RP=16196,LP=16197,FP=16198,Qv=16199,Jv=16200,DP=16201,OP=16202,MP=16203,BP=16204,VP=16205,T3=16206,UP=16207,zP=16208,Zs=16209,b$=16210,_$=16211,ove=852,lve=592,cve=15,uve=cve,$P=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function dve(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<b4||e.mode>_$?1:0},k$=t=>{if(qp(t))return Uc;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=b4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ove),e.distcode=e.distdyn=new Int32Array(lve),e.sane=1,e.back=-1,Ep},S$=t=>{if(qp(t))return Uc;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,k$(t)},N$=(t,e)=>{let r;if(qp(t))return Uc;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Uc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,S$(t))},E$=(t,e)=>{if(!t)return Uc;const r=new dve;t.state=r,r.strm=t,r.window=null,r.mode=b4;const n=N$(t,e);return n!==Ep&&(t.state=null),n},fve=t=>E$(t,uve);let qP=!0,I3,P3;const hve=t=>{if(qP){I3=new Int32Array(512),P3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Gx(x$,t.lens,0,288,I3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Gx(y$,t.lens,0,32,P3,0,t.work,{bits:5}),qP=!1}t.lencode=I3,t.lenbits=9,t.distcode=P3,t.distbits=5},C$=(t,e,r,n)=>{let s;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(e.subarray(r-n,r-n+s),a.wnext),n-=s,n?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},pve=(t,e)=>{let r,n,s,a,i,o,l,u,d,p,g,m,x,y,b=0,S,P,T,O,W,Y,L,A;const N=new Uint8Array(4);let D,j;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qp(t)||!t.output||!t.input&&t.avail_in!==0)return Uc;r=t.state,r.mode===Od&&(r.mode=C3),i=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,u=r.hold,d=r.bits,p=o,g=l,A=Ep;e:for(;;)switch(r.mode){case b4:if(r.wrap===0){r.mode=C3;break}for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,N[0]=u&255,N[1]=u>>>8&255,r.check=Vu(r.check,N,2,0),u=0,d=0,r.mode=_P;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Zs;break}if((u&15)!==bP){t.msg="unknown compression method",r.mode=Zs;break}if(u>>>=4,d-=4,L=(u&15)+8,r.wbits===0&&(r.wbits=L),L>15||L>r.wbits){t.msg="invalid window size",r.mode=Zs;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?IP:Od,u=0,d=0;break;case _P:for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==bP){t.msg="unknown compression method",r.mode=Zs;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Zs;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(N[0]=u&255,N[1]=u>>>8&255,r.check=Vu(r.check,N,2,0)),u=0,d=0,r.mode=kP;case kP:for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(N[0]=u&255,N[1]=u>>>8&255,N[2]=u>>>16&255,N[3]=u>>>24&255,r.check=Vu(r.check,N,4,0)),u=0,d=0,r.mode=SP;case SP:for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(N[0]=u&255,N[1]=u>>>8&255,r.check=Vu(r.check,N,2,0)),u=0,d=0,r.mode=NP;case NP:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(N[0]=u&255,N[1]=u>>>8&255,r.check=Vu(r.check,N,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=EP;case EP:if(r.flags&1024&&(m=r.length,m>o&&(m=o),m&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+m),L)),r.flags&512&&r.wrap&4&&(r.check=Vu(r.check,n,m,a)),o-=m,a+=m,r.length-=m),r.length))break e;r.length=0,r.mode=CP;case CP:if(r.flags&2048){if(o===0)break e;m=0;do L=n[a+m++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L));while(L&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Vu(r.check,n,m,a)),o-=m,a+=m,L)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=AP;case AP:if(r.flags&4096){if(o===0)break e;m=0;do L=n[a+m++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L));while(L&&m<o);if(r.flags&512&&r.wrap&4&&(r.check=Vu(r.check,n,m,a)),o-=m,a+=m,L)break e}else r.head&&(r.head.comment=null);r.mode=TP;case TP:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Zs;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Od;break;case IP:for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}t.adler=r.check=$P(u),u=0,d=0,r.mode=rb;case rb:if(r.havedict===0)return t.next_out=i,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=u,r.bits=d,ave;t.adler=r.check=1,r.mode=Od;case Od:if(e===nve||e===Xv)break e;case C3:if(r.last){u>>>=d&7,d-=d&7,r.mode=T3;break}for(;d<3;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=PP;break;case 1:if(hve(r),r.mode=Qv,e===Xv){u>>>=2,d-=2;break e}break;case 2:r.mode=RP;break;case 3:t.msg="invalid block type",r.mode=Zs}u>>>=2,d-=2;break;case PP:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Zs;break}if(r.length=u&65535,u=0,d=0,r.mode=A3,e===Xv)break e;case A3:r.mode=jP;case jP:if(m=r.length,m){if(m>o&&(m=o),m>l&&(m=l),m===0)break e;s.set(n.subarray(a,a+m),i),o-=m,a+=m,l-=m,i+=m,r.length-=m;break}r.mode=Od;break;case RP:for(;d<14;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Zs;break}r.have=0,r.mode=LP;case LP:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.lens[F[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},A=Gx(rve,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,A){t.msg="invalid code lengths set",r.mode=Zs;break}r.have=0,r.mode=FP;case FP:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[u&(1<<r.lenbits)-1],S=b>>>24,P=b>>>16&255,T=b&65535,!(S<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(T<16)u>>>=S,d-=S,r.lens[r.have++]=T;else{if(T===16){for(j=S+2;d<j;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(u>>>=S,d-=S,r.have===0){t.msg="invalid bit length repeat",r.mode=Zs;break}L=r.lens[r.have-1],m=3+(u&3),u>>>=2,d-=2}else if(T===17){for(j=S+3;d<j;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=S,d-=S,L=0,m=3+(u&7),u>>>=3,d-=3}else{for(j=S+7;d<j;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=S,d-=S,L=0,m=11+(u&127),u>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Zs;break}for(;m--;)r.lens[r.have++]=L}}if(r.mode===Zs)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Zs;break}if(r.lenbits=9,D={bits:r.lenbits},A=Gx(x$,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,A){t.msg="invalid literal/lengths set",r.mode=Zs;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},A=Gx(y$,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,A){t.msg="invalid distances set",r.mode=Zs;break}if(r.mode=Qv,e===Xv)break e;case Qv:r.mode=Jv;case Jv:if(o>=6&&l>=258){t.next_out=i,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=u,r.bits=d,Xye(t,g),i=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,u=r.hold,d=r.bits,r.mode===Od&&(r.back=-1);break}for(r.back=0;b=r.lencode[u&(1<<r.lenbits)-1],S=b>>>24,P=b>>>16&255,T=b&65535,!(S<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(P&&(P&240)===0){for(O=S,W=P,Y=T;b=r.lencode[Y+((u&(1<<O+W)-1)>>O)],S=b>>>24,P=b>>>16&255,T=b&65535,!(O+S<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=O,d-=O,r.back+=O}if(u>>>=S,d-=S,r.back+=S,r.length=T,P===0){r.mode=VP;break}if(P&32){r.back=-1,r.mode=Od;break}if(P&64){t.msg="invalid literal/length code",r.mode=Zs;break}r.extra=P&15,r.mode=DP;case DP:if(r.extra){for(j=r.extra;d<j;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=OP;case OP:for(;b=r.distcode[u&(1<<r.distbits)-1],S=b>>>24,P=b>>>16&255,T=b&65535,!(S<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if((P&240)===0){for(O=S,W=P,Y=T;b=r.distcode[Y+((u&(1<<O+W)-1)>>O)],S=b>>>24,P=b>>>16&255,T=b&65535,!(O+S<=d);){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}u>>>=O,d-=O,r.back+=O}if(u>>>=S,d-=S,r.back+=S,P&64){t.msg="invalid distance code",r.mode=Zs;break}r.offset=T,r.extra=P&15,r.mode=MP;case MP:if(r.extra){for(j=r.extra;d<j;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Zs;break}r.mode=BP;case BP:if(l===0)break e;if(m=g-l,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Zs;break}m>r.wnext?(m-=r.wnext,x=r.wsize-m):x=r.wnext-m,m>r.length&&(m=r.length),y=r.window}else y=s,x=i-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do s[i++]=y[x++];while(--m);r.length===0&&(r.mode=Jv);break;case VP:if(l===0)break e;s[i++]=r.length,l--,r.mode=Jv;break;case T3:if(r.wrap){for(;d<32;){if(o===0)break e;o--,u|=n[a++]<<d,d+=8}if(g-=l,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Vu(r.check,s,g,i-g):qk(r.check,s,g,i-g)),g=l,r.wrap&4&&(r.flags?u:$P(u))!==r.check){t.msg="incorrect data check",r.mode=Zs;break}u=0,d=0}r.mode=UP;case UP:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,u+=n[a++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Zs;break}u=0,d=0}r.mode=zP;case zP:A=sve;break e;case Zs:A=v$;break e;case b$:return w$;case _$:default:return Uc}return t.next_out=i,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=u,r.bits=d,(r.wsize||g!==t.avail_out&&r.mode<Zs&&(r.mode<T3||e!==wP))&&C$(t,t.output,t.next_out,g-t.avail_out),p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?Vu(r.check,s,g,t.next_out-g):qk(r.check,s,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Od?128:0)+(r.mode===Qv||r.mode===A3?256:0),(p===0&&g===0||e===wP)&&A===Ep&&(A=ive),A},mve=t=>{if(qp(t))return Uc;let e=t.state;return e.window&&(e.window=null),t.state=null,Ep},gve=(t,e)=>{if(qp(t))return Uc;const r=t.state;return(r.wrap&2)===0?Uc:(r.head=e,e.done=!1,Ep)},xve=(t,e)=>{const r=e.length;let n,s,a;return qp(t)||(n=t.state,n.wrap!==0&&n.mode!==rb)?Uc:n.mode===rb&&(s=1,s=qk(s,e,r,0),s!==n.check)?v$:(a=C$(t,e,r,r),a?(n.mode=b$,w$):(n.havedict=1,Ep))};var yve=S$,vve=N$,wve=k$,bve=fve,_ve=E$,kve=pve,Sve=mve,Nve=gve,Eve=xve,Cve="pako inflate (from Nodeca project)",Vd={inflateReset:yve,inflateReset2:vve,inflateResetKeep:wve,inflateInit:bve,inflateInit2:_ve,inflate:kve,inflateEnd:Sve,inflateGetHeader:Nve,inflateSetDictionary:Eve,inflateInfo:Cve};function Ave(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Tve=Ave;const A$=Object.prototype.toString,{Z_NO_FLUSH:Ive,Z_FINISH:Pve,Z_OK:O2,Z_STREAM_END:j3,Z_NEED_DICT:R3,Z_STREAM_ERROR:jve,Z_DATA_ERROR:HP,Z_MEM_ERROR:Rve}=p$;function Ty(t){this.options=m$.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kye,this.strm.avail_out=0;let r=Vd.inflateInit2(this.strm,e.windowBits);if(r!==O2)throw new Error(Hk[r]);if(this.header=new Tve,Vd.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Wk.string2buf(e.dictionary):A$.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Vd.inflateSetDictionary(this.strm,e.dictionary),r!==O2)))throw new Error(Hk[r])}Ty.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let a,i,o;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?Pve:Ive,A$.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Vd.inflate(r,i),a===R3&&s&&(a=Vd.inflateSetDictionary(r,s),a===O2?a=Vd.inflate(r,i):a===HP&&(a=R3));r.avail_in>0&&a===j3&&r.state.wrap>0&&t[r.next_in]!==0;)Vd.inflateReset(r),a=Vd.inflate(r,i);switch(a){case jve:case HP:case R3:case Rve:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||a===j3))if(this.options.to==="string"){let l=Wk.utf8border(r.output,r.next_out),u=r.next_out-l,d=Wk.buf2string(r.output,l);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(l,l+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===O2&&o===0)){if(a===j3)return a=Vd.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Ty.prototype.onData=function(t){this.chunks.push(t)};Ty.prototype.onEnd=function(t){t===O2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m$.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Lve(t,e){const r=new Ty(e);if(r.push(t),r.err)throw r.msg||Hk[r.err];return r.result}var Fve=Ty,Dve=Lve,Ove={Inflate:Fve,inflate:Dve};const{Inflate:Mve,inflate:Bve}=Ove;var WP=Mve,Vve=Bve;const T$=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;T$[t]=e}const GP=4294967295;function Uve(t,e,r){let n=t;for(let s=0;s<r;s++)n=T$[(n^e[s])&255]^n>>>8;return n}function zve(t,e){return(Uve(GP,t,e)^GP)>>>0}function KP(t,e,r){const n=t.readUint32(),s=zve(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function I$(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function P$(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function j$(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function R$(t,e,r,n,s){let a=0;if(r.length===0){for(;a<s;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+(e[a-s]>>1)&255}else{for(;a<s;a++)e[a]=t[a]+(r[a]>>1)&255;for(;a<n;a++)e[a]=t[a]+(e[a-s]+r[a]>>1)&255}}function L$(t,e,r,n,s){let a=0;if(r.length===0){for(;a<s;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-s]&255}else{for(;a<s;a++)e[a]=t[a]+r[a]&255;for(;a<n;a++)e[a]=t[a]+$ve(e[a-s],r[a],r[a-s])&255}}function $ve(t,e,r){const n=t+e-r,s=Math.abs(n-t),a=Math.abs(n-e),i=Math.abs(n-r);return s<=a&&s<=i?t:a<=i?e:r}function qve(t,e,r,n,s,a){switch(t){case 0:I$(e,r,s);break;case 1:P$(e,r,s,a);break;case 2:j$(e,r,n,s);break;case 3:R$(e,r,n,s,a);break;case 4:L$(e,r,n,s,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Hve=new Uint16Array([255]),Wve=new Uint8Array(Hve.buffer),Gve=Wve[0]===255;function Kve(t){const{data:e,width:r,height:n,channels:s,depth:a}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*s,l=new Uint8Array(n*r*o);let u=0;for(let d=0;d<7;d++){const p=i[d],g=Math.ceil((r-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(g<=0||m<=0)continue;const x=g*o,y=new Uint8Array(x);for(let b=0;b<m;b++){const S=e[u++],P=e.subarray(u,u+x);u+=x;const T=new Uint8Array(x);qve(S,P,T,y,x,o),y.set(T);for(let O=0;O<g;O++){const W=p.x+O*p.xStep,Y=p.y+b*p.yStep;if(!(W>=r||Y>=n))for(let L=0;L<o;L++)l[(Y*r+W)*o+L]=T[O*o+L]}}}if(a===16){const d=new Uint16Array(l.buffer);if(Gve)for(let p=0;p<d.length;p++)d[p]=Yve(d[p]);return d}else return l}function Yve(t){return(t&255)<<8|t>>8&255}const Xve=new Uint16Array([255]),Qve=new Uint8Array(Xve.buffer),Jve=Qve[0]===255,Zve=new Uint8Array(0);function YP(t){const{data:e,width:r,height:n,channels:s,depth:a}=t,i=Math.ceil(a/8)*s,o=Math.ceil(a/8*s*r),l=new Uint8Array(n*o);let u=Zve,d=0,p,g;for(let m=0;m<n;m++){switch(p=e.subarray(d+1,d+1+o),g=l.subarray(m*o,(m+1)*o),e[d]){case 0:I$(p,g,o);break;case 1:P$(p,g,o,i);break;case 2:j$(p,g,u,o);break;case 3:R$(p,g,u,o,i);break;case 4:L$(p,g,u,o,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=g,d+=o+1}if(a===16){const m=new Uint16Array(l.buffer);if(Jve)for(let x=0;x<m.length;x++)m[x]=ewe(m[x]);return m}else return l}function ewe(t){return(t&255)<<8|t>>8&255}const zw=Uint8Array.of(137,80,78,71,13,10,26,10);function XP(t){if(!twe(t.readBytes(zw.length)))throw new Error("wrong PNG signature")}function twe(t){if(t.length<zw.length)return!1;for(let e=0;e<zw.length;e++)if(t[e]!==zw[e])return!1;return!0}const rwe="tEXt",nwe=0,F$=new TextDecoder("latin1");function swe(t){if(iwe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const awe=/^[\u0000-\u00FF]*$/;function iwe(t){if(!awe.test(t))throw new Error("invalid latin1 text")}function owe(t,e,r){const n=D$(e);t[n]=lwe(e,r-n.length-1)}function D$(t){for(t.mark();t.readByte()!==nwe;);const e=t.offset;t.reset();const r=F$.decode(t.readBytes(e-t.offset-1));return t.skip(1),swe(r),r}function lwe(t,e){return F$.decode(t.readBytes(e))}const Xl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},L3={UNKNOWN:-1,DEFLATE:0},QP={UNKNOWN:-1,ADAPTIVE:0},F3={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Zv={NONE:0,BACKGROUND:1,PREVIOUS:2},D3={SOURCE:0,OVER:1};class cwe extends AN{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new WP,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=L3.UNKNOWN,this._filterMethod=QP.UNKNOWN,this._interlaceMethod=F3.UNKNOWN,this._colorType=Xl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(XP(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(XP(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case rwe:owe(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?KP(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?KP(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=uwe(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case Xl.GREYSCALE:n=1;break;case Xl.TRUECOLOUR:n=3;break;case Xl.INDEXED_COLOUR:n=1;break;case Xl.GREYSCALE_ALPHA:n=2;break;case Xl.TRUECOLOUR_ALPHA:n=4;break;case Xl.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==L3.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let s=0;s<r;s++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Xl.GREYSCALE:case Xl.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case Xl.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Xl.UNKNOWN:case Xl.GREYSCALE_ALPHA:case Xl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=D$(this),n=this.readUint8();if(n!==L3.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const s=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Vve(s)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=YP({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(n,s,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case Zv.NONE:break;case Zv.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const i=(s*e.width+a)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[i+o]=0}break;case Zv.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,s=(a,i)=>{const o=((a+r.yOffset)*this._png.width+r.xOffset+i)*this._png.channels,l=(a*r.width+i)*this._png.channels;return{index:o,frameIndex:l}};switch(r.blendOp){case D3.SOURCE:for(let a=0;a<r.height;a++)for(let i=0;i<r.width;i++){const{index:o,frameIndex:l}=s(a,i);for(let u=0;u<this._png.channels;u++)e.data[o+u]=r.data[l+u]}break;case D3.OVER:for(let a=0;a<r.height;a++)for(let i=0;i<r.width;i++){const{index:o,frameIndex:l}=s(a,i);for(let u=0;u<this._png.channels;u++){const d=r.data[l+this._png.channels-1]/n,p=u%(this._png.channels-1)===0?1:r.data[l+u],g=Math.floor(d*p+(1-d)*e.data[o+u]);e.data[o+u]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==QP.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===F3.NO_INTERLACE)this._png.data=YP({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===F3.ADAM7)this._png.data=Kve({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Zv.NONE,blendOp:D3.SOURCE,data:e}),this._inflator=new WP,this._writingDataChunks=!1}}function uwe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var JP;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(JP||(JP={}));function dwe(t,e){return new cwe(t,e).decode()}var Xr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function O3(){Xr.console&&typeof Xr.console.log=="function"&&Xr.console.log.apply(Xr.console,arguments)}var Cs={log:O3,warn:function(t){Xr.console&&(typeof Xr.console.warn=="function"?Xr.console.warn.apply(Xr.console,arguments):O3.call(null,arguments))},error:function(t){Xr.console&&(typeof Xr.console.error=="function"?Xr.console.error.apply(Xr.console,arguments):O3(t))}};function M3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){E0(n.response,e,r)},n.onerror=function(){Cs.error("could not download file")},n.send()}function ZP(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ew(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var E0=Xr.saveAs||((typeof window>"u"?"undefined":hs(window))!=="object"||window!==Xr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Xr.URL||Xr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?ZP(s.href)?M3(t,e,r):ew(s,s.target="_blank"):ew(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){ew(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(ZP(t))M3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){ew(n)})}else navigator.msSaveOrOpenBlob((function(s,a){return a===void 0?a={autoBom:!1}:hs(a)!=="object"&&(Cs.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return M3(t,e,r);var s=t.type==="application/octet-stream",a=/constructor/i.test(Xr.HTMLElement)||Xr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":hs(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Xr.URL||Xr.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function O$(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,a=r[n].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}var $w=Xr.atob.bind(Xr),ej=Xr.btoa.bind(Xr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function B3(t,e){var r=t[0],n=t[1],s=t[2],a=t[3];r=Oo(r,n,s,a,e[0],7,-680876936),a=Oo(a,r,n,s,e[1],12,-389564586),s=Oo(s,a,r,n,e[2],17,606105819),n=Oo(n,s,a,r,e[3],22,-1044525330),r=Oo(r,n,s,a,e[4],7,-176418897),a=Oo(a,r,n,s,e[5],12,1200080426),s=Oo(s,a,r,n,e[6],17,-1473231341),n=Oo(n,s,a,r,e[7],22,-45705983),r=Oo(r,n,s,a,e[8],7,1770035416),a=Oo(a,r,n,s,e[9],12,-1958414417),s=Oo(s,a,r,n,e[10],17,-42063),n=Oo(n,s,a,r,e[11],22,-1990404162),r=Oo(r,n,s,a,e[12],7,1804603682),a=Oo(a,r,n,s,e[13],12,-40341101),s=Oo(s,a,r,n,e[14],17,-1502002290),r=Mo(r,n=Oo(n,s,a,r,e[15],22,1236535329),s,a,e[1],5,-165796510),a=Mo(a,r,n,s,e[6],9,-1069501632),s=Mo(s,a,r,n,e[11],14,643717713),n=Mo(n,s,a,r,e[0],20,-373897302),r=Mo(r,n,s,a,e[5],5,-701558691),a=Mo(a,r,n,s,e[10],9,38016083),s=Mo(s,a,r,n,e[15],14,-660478335),n=Mo(n,s,a,r,e[4],20,-405537848),r=Mo(r,n,s,a,e[9],5,568446438),a=Mo(a,r,n,s,e[14],9,-1019803690),s=Mo(s,a,r,n,e[3],14,-187363961),n=Mo(n,s,a,r,e[8],20,1163531501),r=Mo(r,n,s,a,e[13],5,-1444681467),a=Mo(a,r,n,s,e[2],9,-51403784),s=Mo(s,a,r,n,e[7],14,1735328473),r=Bo(r,n=Mo(n,s,a,r,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Bo(a,r,n,s,e[8],11,-2022574463),s=Bo(s,a,r,n,e[11],16,1839030562),n=Bo(n,s,a,r,e[14],23,-35309556),r=Bo(r,n,s,a,e[1],4,-1530992060),a=Bo(a,r,n,s,e[4],11,1272893353),s=Bo(s,a,r,n,e[7],16,-155497632),n=Bo(n,s,a,r,e[10],23,-1094730640),r=Bo(r,n,s,a,e[13],4,681279174),a=Bo(a,r,n,s,e[0],11,-358537222),s=Bo(s,a,r,n,e[3],16,-722521979),n=Bo(n,s,a,r,e[6],23,76029189),r=Bo(r,n,s,a,e[9],4,-640364487),a=Bo(a,r,n,s,e[12],11,-421815835),s=Bo(s,a,r,n,e[15],16,530742520),r=Vo(r,n=Bo(n,s,a,r,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Vo(a,r,n,s,e[7],10,1126891415),s=Vo(s,a,r,n,e[14],15,-1416354905),n=Vo(n,s,a,r,e[5],21,-57434055),r=Vo(r,n,s,a,e[12],6,1700485571),a=Vo(a,r,n,s,e[3],10,-1894986606),s=Vo(s,a,r,n,e[10],15,-1051523),n=Vo(n,s,a,r,e[1],21,-2054922799),r=Vo(r,n,s,a,e[8],6,1873313359),a=Vo(a,r,n,s,e[15],10,-30611744),s=Vo(s,a,r,n,e[6],15,-1560198380),n=Vo(n,s,a,r,e[13],21,1309151649),r=Vo(r,n,s,a,e[4],6,-145523070),a=Vo(a,r,n,s,e[11],10,-1120210379),s=Vo(s,a,r,n,e[2],15,718787259),n=Vo(n,s,a,r,e[9],21,-343485551),t[0]=xh(r,t[0]),t[1]=xh(n,t[1]),t[2]=xh(s,t[2]),t[3]=xh(a,t[3])}function _4(t,e,r,n,s,a){return e=xh(xh(e,t),xh(n,a)),xh(e<<s|e>>>32-s,r)}function Oo(t,e,r,n,s,a,i){return _4(e&r|~e&n,t,e,s,a,i)}function Mo(t,e,r,n,s,a,i){return _4(e&n|r&~n,t,e,s,a,i)}function Bo(t,e,r,n,s,a,i){return _4(e^r^n,t,e,s,a,i)}function Vo(t,e,r,n,s,a,i){return _4(r^(e|~n),t,e,s,a,i)}function M$(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)B3(n,fwe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(B3(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,B3(n,s),n}function fwe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var tj="0123456789abcdef".split("");function hwe(t){for(var e="",r=0;r<4;r++)e+=tj[t>>8*r+4&15]+tj[t>>8*r&15];return e}function pwe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Gk(t){return M$(t).map(pwe).join("")}var mwe=(function(t){for(var e=0;e<t.length;e++)t[e]=hwe(t[e]);return t.join("")})(M$("hello"))!="5d41402abc4b2a76b9719d911017c592";function xh(t,e){if(mwe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Kk(t,e){var r,n,s,a;if(t!==r){for(var i=(s=t,a=1+(256/t.length|0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=t,n=o}else o=n;var p=e.length,g=0,m=0,x="";for(l=0;l<p;l++)m=(m+(d=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=d,i=o[(o[g]+o[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^i);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var rj={print:4,modify:8,copy:16,"annot-forms":32};function Dm(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(rj.perm!==void 0)throw new Error("Invalid permission: "+o);s+=rj[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=Gk(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Kk(this.encryptionKey,this.padding)}function Om(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function nj(t){if(hs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!s],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[r]){var i=e[r][a];try{i[0].apply(t,n)}catch(o){Xr.console&&Cs.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function nb(t){if(!(this instanceof nb))return new nb(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function B$(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function F0(t,e,r,n,s){if(!(this instanceof F0))return new F0(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,B$.call(this,n,s)}function $m(t,e,r,n,s){if(!(this instanceof $m))return new $m(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,B$.call(this,n,s)}function Cr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",d=null;hs(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=nj;var x="1.3",y=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(V){x=V};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return b};var S=m.__private__.getPageFormat=function(V){return b[V]};s=s||"a4";var P="compat",T="advanced",O=P;function W(){this.saveGraphicsState(),ne(new vr(st,0,0,-st,0,ni()*st).toString()+" cm"),this.setFontSize(this.getFontSize()/st),u="n",O=T}function Y(){this.restoreGraphicsState(),u="S",O=P}var L=m.__private__.combineFontStyleAndFontWeight=function(V,re){if(V=="bold"&&re=="normal"||V=="bold"&&re==400||V=="normal"&&re=="italic"||V=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(V=re==400||re==="normal"?V==="italic"?"italic":"normal":re!=700&&re!=="bold"||V!=="normal"?(re==700?"bold":re)+""+V:"bold"),V};m.advancedAPI=function(V){var re=O===P;return re&&W.call(this),typeof V!="function"||(V(this),re&&Y.call(this)),this},m.compatAPI=function(V){var re=O===T;return re&&Y.call(this),typeof V!="function"||(V(this),re&&W.call(this)),this},m.isAdvancedAPI=function(){return O===T};var A,N=function(V){if(O!==T)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=m.roundToPrecision=m.__private__.roundToPrecision=function(V,re){var Te=e||re;if(isNaN(V)||isNaN(Te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Te).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return D(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return D(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return D(V,16)};var j=m.f2=m.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return D(V,2)},F=m.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return D(V,3)},M=m.scale=m.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return O===P?V*st:O===T?V:void 0},Z=function(V){return M((function(re){return O===P?ni()-re:O===T?re:void 0})(V))};m.__private__.setPrecision=m.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var ue,pe="00000000000000000000000000000000",fe=m.__private__.getFileId=function(){return pe},te=m.__private__.setFileId=function(V){return pe=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(In=new Dm(d.userPermissions,d.userPassword,d.ownerPassword,pe)),pe};m.setFileId=function(V){return te(V),this},m.getFileId=function(){return fe()};var H=m.__private__.convertDateToPDFDate=function(V){var re=V.getTimezoneOffset(),Te=re<0?"+":"-",Ve=Math.floor(Math.abs(re/60)),We=Math.abs(re%60),kt=[Te,X(Ve),"'",X(We),"'"].join("");return["D:",V.getFullYear(),X(V.getMonth()+1),X(V.getDate()),X(V.getHours()),X(V.getMinutes()),X(V.getSeconds()),kt].join("")},ie=m.__private__.convertPDFDateToDate=function(V){var re=parseInt(V.substr(2,4),10),Te=parseInt(V.substr(6,2),10)-1,Ve=parseInt(V.substr(8,2),10),We=parseInt(V.substr(10,2),10),kt=parseInt(V.substr(12,2),10),Tt=parseInt(V.substr(14,2),10);return new Date(re,Te,Ve,We,kt,Tt,0)},K=m.__private__.setCreationDate=function(V){var re;if(V===void 0&&(V=new Date),V instanceof Date)re=H(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=V}return ue=re},I=m.__private__.getCreationDate=function(V){var re=ue;return V==="jsDate"&&(re=ie(ue)),re};m.setCreationDate=function(V){return K(V),this},m.getCreationDate=function(V){return I(V)};var z,X=m.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},J=m.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},se=0,le=[],ve=[],xe=0,Ee=[],ke=[],oe=!1,Fe=ve;m.__private__.setCustomOutputDestination=function(V){oe=!0,Fe=V};var Pe=function(V){oe||(Fe=V)};m.__private__.resetCustomOutputDestination=function(){oe=!1,Fe=ve};var ne=m.__private__.out=function(V){return V=V.toString(),xe+=V.length+1,Fe.push(V),Fe},ye=m.__private__.write=function(V){return ne(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},Ae=m.__private__.getArrayBuffer=function(V){for(var re=V.length,Te=new ArrayBuffer(re),Ve=new Uint8Array(Te);re--;)Ve[re]=V.charCodeAt(re);return Te},Be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Be};var Oe=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(V){return Oe=O===T?V/st:V,this};var pt,nt=m.__private__.getFontSize=m.getFontSize=function(){return O===P?Oe:Oe*st},Lt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(V){return Lt=V,this},m.__private__.getR2L=m.getR2L=function(){return Lt};var Ct,Nt=m.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))pt=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');pt=V}else pt=parseInt(V,10)};m.__private__.getZoomMode=function(){return pt};var _t,ot=m.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Ct=V};m.__private__.getPageMode=function(){return Ct};var Bt=m.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');_t=V};m.__private__.getLayoutMode=function(){return _t},m.__private__.setDisplayMode=m.setDisplayMode=function(V,re,Te){return Nt(V),Bt(re),ot(Te),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(V){if(Object.keys(Ot).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[V]},m.__private__.getDocumentProperties=function(){return Ot},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(V){for(var re in Ot)Ot.hasOwnProperty(re)&&V[re]&&(Ot[re]=V[re]);return this},m.__private__.setDocumentProperty=function(V,re){if(Object.keys(Ot).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[V]=re};var ft,st,wt,me,Ue,ut={},Ut={},nr=[],Dt={},$t={},jt={},pr={},hn=null,an=0,kr=[],Vr=new nj(m),va=t.hotfixes||[],Ss={},Da={},Hs=[],vr=function V(re,Te,Ve,We,kt,Tt){if(!(this instanceof V))return new V(re,Te,Ve,We,kt,Tt);isNaN(re)&&(re=1),isNaN(Te)&&(Te=0),isNaN(Ve)&&(Ve=0),isNaN(We)&&(We=1),isNaN(kt)&&(kt=0),isNaN(Tt)&&(Tt=0),this._matrix=[re,Te,Ve,We,kt,Tt]};Object.defineProperty(vr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(vr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(vr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(vr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(vr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(vr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(vr.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(vr.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(vr.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(vr.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(vr.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(vr.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(vr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vr.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(V)},vr.prototype.multiply=function(V){var re=V.sx*this.sx+V.shy*this.shx,Te=V.sx*this.shy+V.shy*this.sy,Ve=V.shx*this.sx+V.sy*this.shx,We=V.shx*this.shy+V.sy*this.sy,kt=V.tx*this.sx+V.ty*this.shx+this.tx,Tt=V.tx*this.shy+V.ty*this.sy+this.ty;return new vr(re,Te,Ve,We,kt,Tt)},vr.prototype.decompose=function(){var V=this.sx,re=this.shy,Te=this.shx,Ve=this.sy,We=this.tx,kt=this.ty,Tt=Math.sqrt(V*V+re*re),sr=(V/=Tt)*Te+(re/=Tt)*Ve;Te-=V*sr,Ve-=re*sr;var cr=Math.sqrt(Te*Te+Ve*Ve);return sr/=cr,V*(Ve/=cr)<re*(Te/=cr)&&(V=-V,re=-re,sr=-sr,Tt=-Tt),{scale:new vr(Tt,0,0,cr,0,0),translate:new vr(1,0,0,1,We,kt),rotate:new vr(V,re,-re,V,0,0),skew:new vr(1,0,sr,1,0,0)}},vr.prototype.toString=function(V){return this.join(" ")},vr.prototype.inversed=function(){var V=this.sx,re=this.shy,Te=this.shx,Ve=this.sy,We=this.tx,kt=this.ty,Tt=1/(V*Ve-re*Te),sr=Ve*Tt,cr=-re*Tt,Pr=-Te*Tt,Ur=V*Tt;return new vr(sr,cr,Pr,Ur,-sr*We-Pr*kt,-cr*We-Ur*kt)},vr.prototype.applyToPoint=function(V){var re=V.x*this.sx+V.y*this.shx+this.tx,Te=V.x*this.shy+V.y*this.sy+this.ty;return new tl(re,Te)},vr.prototype.applyToRectangle=function(V){var re=this.applyToPoint(V),Te=this.applyToPoint(new tl(V.x+V.w,V.y+V.h));return new dc(re.x,re.y,Te.x-re.x,Te.y-re.y)},vr.prototype.clone=function(){var V=this.sx,re=this.shy,Te=this.shx,Ve=this.sy,We=this.tx,kt=this.ty;return new vr(V,re,Te,Ve,We,kt)},m.Matrix=vr;var pn=m.matrixMult=function(V,re){return re.multiply(V)},ei=new vr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ei;var Zn=function(V,re){if(!$t[V]){var Te=(re instanceof F0?"Sh":"P")+(Object.keys(Dt).length+1).toString(10);re.id=Te,$t[V]=Te,Dt[Te]=re,Vr.publish("addPattern",re)}};m.ShadingPattern=F0,m.TilingPattern=$m,m.addShadingPattern=function(V,re){return N("addShadingPattern()"),Zn(V,re),this},m.beginTilingPattern=function(V){N("beginTilingPattern()"),bi(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},m.endTilingPattern=function(V,re){N("endTilingPattern()"),re.stream=ke[z].join(`
`),Zn(V,re),Vr.publish("endTilingPattern",re),Hs.pop().restore()};var Os,Ln=m.__private__.newObject=function(){var V=en();return ce(V,!0),V},en=m.__private__.newObjectDeferred=function(){return se++,le[se]=function(){return xe},se},ce=function(V,re){return re=typeof re=="boolean"&&re,le[V]=xe,re&&ne(V+" 0 obj"),V},je=m.__private__.newAdditionalObject=function(){var V={objId:en(),content:""};return Ee.push(V),V},Se=en(),Ne=en(),Re=m.__private__.decodeColorString=function(V){var re=V.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length!==5||re[4]!=="k"&&re[4]!=="K"||(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var Te=parseFloat(re[0]);re=[Te,Te,Te,"r"]}for(var Ve="#",We=0;We<3;We++)Ve+=("0"+Math.floor(255*parseFloat(re[We])).toString(16)).slice(-2);return Ve},Le=m.__private__.encodeColorString=function(V){var re;typeof V=="string"&&(V={ch1:V});var Te=V.ch1,Ve=V.ch2,We=V.ch3,kt=V.ch4,Tt=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Te=="string"&&Te.charAt(0)!=="#"){var sr=new O$(Te);if(sr.ok)Te=sr.toHex();else if(!/^\d*\.?\d*$/.test(Te))throw new Error('Invalid color "'+Te+'" passed to jsPDF.encodeColorString.')}if(typeof Te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Te)&&(Te="#"+Te[1]+Te[1]+Te[2]+Te[2]+Te[3]+Te[3]),typeof Te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Te)){var cr=parseInt(Te.substr(1),16);Te=cr>>16&255,Ve=cr>>8&255,We=255&cr}if(Ve===void 0||kt===void 0&&Te===Ve&&Ve===We)re=typeof Te=="string"?Te+" "+Tt[0]:V.precision===2?j(Te/255)+" "+Tt[0]:F(Te/255)+" "+Tt[0];else if(kt===void 0||hs(kt)==="object"){if(kt&&!isNaN(kt.a)&&kt.a===0)return["1.","1.","1.",Tt[1]].join(" ");re=typeof Te=="string"?[Te,Ve,We,Tt[1]].join(" "):V.precision===2?[j(Te/255),j(Ve/255),j(We/255),Tt[1]].join(" "):[F(Te/255),F(Ve/255),F(We/255),Tt[1]].join(" ")}else re=typeof Te=="string"?[Te,Ve,We,kt,Tt[2]].join(" "):V.precision===2?[j(Te),j(Ve),j(We),j(kt),Tt[2]].join(" "):[F(Te),F(Ve),F(We),F(kt),Tt[2]].join(" ");return re},Ge=m.__private__.getFilters=function(){return i},lt=m.__private__.putStream=function(V){var re=(V=V||{}).data||"",Te=V.filters||Ge(),Ve=V.alreadyAppliedFilters||[],We=V.addLength1||!1,kt=re.length,Tt=V.objectId,sr=function(Ks){return Ks};if(d!==null&&Tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(sr=In.encryptor(Tt,0));var cr={};Te===!0&&(Te=["FlateEncode"]);var Pr=V.additionalKeyValues||[],Ur=(cr=Cr.API.processDataByFilters!==void 0?Cr.API.processDataByFilters(re,Te):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Ve)?Ve.join(" "):Ve.toString());if(cr.data.length!==0&&(Pr.push({key:"Length",value:cr.data.length}),We===!0&&Pr.push({key:"Length1",value:kt})),Ur.length!=0)if(Ur.split("/").length-1==1)Pr.push({key:"Filter",value:Ur});else{Pr.push({key:"Filter",value:"["+Ur+"]"});for(var Pn=0;Pn<Pr.length;Pn+=1)if(Pr[Pn].key==="DecodeParms"){for(var xs=[],Ns=0;Ns<cr.reverseChain.split("/").length-1;Ns+=1)xs.push("null");xs.push(Pr[Pn].value),Pr[Pn].value="["+xs.join(" ")+"]"}}ne("<<");for(var Bn=0;Bn<Pr.length;Bn++)ne("/"+Pr[Bn].key+" "+Pr[Bn].value);ne(">>"),cr.data.length!==0&&(ne("stream"),ne(sr(cr.data)),ne("endstream"))},Xe=m.__private__.putPage=function(V){var re=V.number,Te=V.data,Ve=V.objId,We=V.contentsObjId;ce(Ve,!0),ne("<</Type /Page"),ne("/Parent "+V.rootDictionaryObjId+" 0 R"),ne("/Resources "+V.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(A(V.mediaBox.bottomLeftX))+" "+parseFloat(A(V.mediaBox.bottomLeftY))+" "+A(V.mediaBox.topRightX)+" "+A(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&ne("/CropBox ["+A(V.cropBox.bottomLeftX)+" "+A(V.cropBox.bottomLeftY)+" "+A(V.cropBox.topRightX)+" "+A(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&ne("/BleedBox ["+A(V.bleedBox.bottomLeftX)+" "+A(V.bleedBox.bottomLeftY)+" "+A(V.bleedBox.topRightX)+" "+A(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&ne("/TrimBox ["+A(V.trimBox.bottomLeftX)+" "+A(V.trimBox.bottomLeftY)+" "+A(V.trimBox.topRightX)+" "+A(V.trimBox.topRightY)+"]"),V.artBox!==null&&ne("/ArtBox ["+A(V.artBox.bottomLeftX)+" "+A(V.artBox.bottomLeftY)+" "+A(V.artBox.topRightX)+" "+A(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&ne("/UserUnit "+V.userUnit),Vr.publish("putPage",{objId:Ve,pageContext:kr[re],pageNumber:re,page:Te}),ne("/Contents "+We+" 0 R"),ne(">>"),ne("endobj");var kt=Te.join(`
`);return O===T&&(kt+=`
Q`),ce(We,!0),lt({data:kt,filters:Ge(),objectId:We}),ne("endobj"),Ve},Qe=m.__private__.putPages=function(){var V,re,Te=[];for(V=1;V<=an;V++)kr[V].objId=en(),kr[V].contentsObjId=en();for(V=1;V<=an;V++)Te.push(Xe({number:V,data:ke[V],objId:kr[V].objId,contentsObjId:kr[V].contentsObjId,mediaBox:kr[V].mediaBox,cropBox:kr[V].cropBox,bleedBox:kr[V].bleedBox,trimBox:kr[V].trimBox,artBox:kr[V].artBox,userUnit:kr[V].userUnit,rootDictionaryObjId:Se,resourceDictionaryObjId:Ne}));ce(Se,!0),ne("<</Type /Pages");var Ve="/Kids [";for(re=0;re<an;re++)Ve+=Te[re]+" 0 R ";ne(Ve+"]"),ne("/Count "+an),ne(">>"),ne("endobj"),Vr.publish("postPutPages")},rt=function(V){Vr.publish("putFont",{font:V,out:ne,newObject:Ln,putStream:lt}),V.isAlreadyPutted!==!0&&(V.objectNumber=Ln(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Om(V.postScriptName)),ne("/Subtype /Type1"),typeof V.encoding=="string"&&ne("/Encoding /"+V.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},At=function(V){V.objectNumber=Ln();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[A(V.x),A(V.y),A(V.x+V.width),A(V.y+V.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Te=V.pages[1].join(`
`);lt({data:Te,additionalKeyValues:re,objectId:V.objectNumber}),ne("endobj")},Gt=function(V,re){re||(re=21);var Te=Ln(),Ve=(function(Tt,sr){var cr,Pr=[],Ur=1/(sr-1);for(cr=0;cr<1;cr+=Ur)Pr.push(cr);if(Pr.push(1),Tt[0].offset!=0){var Pn={offset:0,color:Tt[0].color};Tt.unshift(Pn)}if(Tt[Tt.length-1].offset!=1){var xs={offset:1,color:Tt[Tt.length-1].color};Tt.push(xs)}for(var Ns="",Bn=0,Ks=0;Ks<Pr.length;Ks++){for(cr=Pr[Ks];cr>Tt[Bn+1].offset;)Bn++;var rs=Tt[Bn].offset,wa=(cr-rs)/(Tt[Bn+1].offset-rs),xl=Tt[Bn].color,Ul=Tt[Bn+1].color;Ns+=J(Math.round((1-wa)*xl[0]+wa*Ul[0]).toString(16))+J(Math.round((1-wa)*xl[1]+wa*Ul[1]).toString(16))+J(Math.round((1-wa)*xl[2]+wa*Ul[2]).toString(16))}return Ns.trim()})(V.colors,re),We=[];We.push({key:"FunctionType",value:"0"}),We.push({key:"Domain",value:"[0.0 1.0]"}),We.push({key:"Size",value:"["+re+"]"}),We.push({key:"BitsPerSample",value:"8"}),We.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lt({data:Ve,additionalKeyValues:We,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Te}),ne("endobj"),V.objectNumber=Ln(),ne("<< /ShadingType "+V.type),ne("/ColorSpace /DeviceRGB");var kt="/Coords ["+A(parseFloat(V.coords[0]))+" "+A(parseFloat(V.coords[1]))+" ";V.type===2?kt+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3])):kt+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3]))+" "+A(parseFloat(V.coords[4]))+" "+A(parseFloat(V.coords[5])),ne(kt+="]"),V.matrix&&ne("/Matrix ["+V.matrix.toString()+"]"),ne("/Function "+Te+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},er=function(V,re){var Te=en(),Ve=Ln();re.push({resourcesOid:Te,objectOid:Ve}),V.objectNumber=Ve;var We=[];We.push({key:"Type",value:"/Pattern"}),We.push({key:"PatternType",value:"1"}),We.push({key:"PaintType",value:"1"}),We.push({key:"TilingType",value:"1"}),We.push({key:"BBox",value:"["+V.boundingBox.map(A).join(" ")+"]"}),We.push({key:"XStep",value:A(V.xStep)}),We.push({key:"YStep",value:A(V.yStep)}),We.push({key:"Resources",value:Te+" 0 R"}),V.matrix&&We.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),lt({data:V.stream,additionalKeyValues:We,objectId:V.objectNumber}),ne("endobj")},qt=function(V){for(var re in V.objectNumber=Ln(),ne("<<"),V)switch(re){case"opacity":ne("/ca "+j(V[re]));break;case"stroke-opacity":ne("/CA "+j(V[re]))}ne(">>"),ne("endobj")},It=function(V){ce(V.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var re in ne("/Font <<"),ut)ut.hasOwnProperty(re)&&(p===!1||p===!0&&g.hasOwnProperty(re))&&ne("/"+re+" "+ut[re].objectNumber+" 0 R");ne(">>")})(),(function(){if(Object.keys(Dt).length>0){for(var re in ne("/Shading <<"),Dt)Dt.hasOwnProperty(re)&&Dt[re]instanceof F0&&Dt[re].objectNumber>=0&&ne("/"+re+" "+Dt[re].objectNumber+" 0 R");Vr.publish("putShadingPatternDict"),ne(">>")}})(),(function(re){if(Object.keys(Dt).length>0){for(var Te in ne("/Pattern <<"),Dt)Dt.hasOwnProperty(Te)&&Dt[Te]instanceof m.TilingPattern&&Dt[Te].objectNumber>=0&&Dt[Te].objectNumber<re&&ne("/"+Te+" "+Dt[Te].objectNumber+" 0 R");Vr.publish("putTilingPatternDict"),ne(">>")}})(V.objectOid),(function(){if(Object.keys(jt).length>0){var re;for(re in ne("/ExtGState <<"),jt)jt.hasOwnProperty(re)&&jt[re].objectNumber>=0&&ne("/"+re+" "+jt[re].objectNumber+" 0 R");Vr.publish("putGStateDict"),ne(">>")}})(),(function(){for(var re in ne("/XObject <<"),Ss)Ss.hasOwnProperty(re)&&Ss[re].objectNumber>=0&&ne("/"+re+" "+Ss[re].objectNumber+" 0 R");Vr.publish("putXobjectDict"),ne(">>")})(),ne(">>"),ne("endobj")},Ar=function(V){Ut[V.fontName]=Ut[V.fontName]||{},Ut[V.fontName][V.fontStyle]=V.id},bn=function(V,re,Te,Ve,We){var kt={id:"F"+(Object.keys(ut).length+1).toString(10),postScriptName:V,fontName:re,fontStyle:Te,encoding:Ve,isStandardFont:We||!1,metadata:{}};return Vr.publish("addFont",{font:kt,instance:this}),ut[kt.id]=kt,Ar(kt),kt.id},Kr=m.__private__.pdfEscape=m.pdfEscape=function(V,re){return(function(Te,Ve){var We,kt,Tt,sr,cr,Pr,Ur,Pn,xs;if(Tt=(Ve=Ve||{}).sourceEncoding||"Unicode",cr=Ve.outputEncoding,(Ve.autoencode||cr)&&ut[ft].metadata&&ut[ft].metadata[Tt]&&ut[ft].metadata[Tt].encoding&&(sr=ut[ft].metadata[Tt].encoding,!cr&&ut[ft].encoding&&(cr=ut[ft].encoding),!cr&&sr.codePages&&(cr=sr.codePages[0]),typeof cr=="string"&&(cr=sr[cr]),cr)){for(Ur=!1,Pr=[],We=0,kt=Te.length;We<kt;We++)(Pn=cr[Te.charCodeAt(We)])?Pr.push(String.fromCharCode(Pn)):Pr.push(Te[We]),Pr[We].charCodeAt(0)>>8&&(Ur=!0);Te=Pr.join("")}for(We=Te.length;Ur===void 0&&We!==0;)Te.charCodeAt(We-1)>>8&&(Ur=!0),We--;if(!Ur)return Te;for(Pr=Ve.noBOM?[]:[254,255],We=0,kt=Te.length;We<kt;We++){if((xs=(Pn=Te.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+Te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Pr.push(xs),Pr.push(Pn-(xs<<8))}return String.fromCharCode.apply(void 0,Pr)})(V,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tn=m.__private__.beginPage=function(V){ke[++an]=[],kr[an]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},ti(an),Pe(ke[z])},xi=function(V,re){var Te,Ve,We;switch(r=re||r,typeof V=="string"&&(Te=S(V.toLowerCase()),Array.isArray(Te)&&(Ve=Te[0],We=Te[1])),Array.isArray(V)&&(Ve=V[0]*st,We=V[1]*st),isNaN(Ve)&&(Ve=s[0],We=s[1]),(Ve>14400||We>14400)&&(Cs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ve=Math.min(14400,Ve),We=Math.min(14400,We)),s=[Ve,We],r.substr(0,1)){case"l":We>Ve&&(s=[We,Ve]);break;case"p":Ve>We&&(s=[We,Ve])}tn(s),bo(eo),ne(ml),ts!==0&&ne(ts+" J"),bd!==0&&ne(bd+" j"),Vr.publish("addPage",{pageNumber:an})},ji=function(V){V>0&&V<=an&&(ke.splice(V,1),kr.splice(V,1),an--,z>an&&(z=an),this.setPage(z))},ti=function(V){V>0&&V<=an&&(z=V)},gs=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ke.length-1},el=function(V,re,Te){var Ve,We=void 0;return Te=Te||{},V=V!==void 0?V:ut[ft].fontName,re=re!==void 0?re:ut[ft].fontStyle,Ve=V.toLowerCase(),Ut[Ve]!==void 0&&Ut[Ve][re]!==void 0?We=Ut[Ve][re]:Ut[V]!==void 0&&Ut[V][re]!==void 0?We=Ut[V][re]:Te.disableWarning===!1&&Cs.warn("Unable to look up font label for font '"+V+"', '"+re+"'. Refer to getFontList() for available fonts."),We||Te.noFallback||(We=Ut.times[re])==null&&(We=Ut.times.normal),We},De=m.__private__.putInfo=function(){var V=Ln(),re=function(Ve){return Ve};for(var Te in d!==null&&(re=In.encryptor(V,0)),ne("<<"),ne("/Producer ("+Kr(re("jsPDF "+Cr.version))+")"),Ot)Ot.hasOwnProperty(Te)&&Ot[Te]&&ne("/"+Te.substr(0,1).toUpperCase()+Te.substr(1)+" ("+Kr(re(Ot[Te]))+")");ne("/CreationDate ("+Kr(re(ue))+")"),ne(">>"),ne("endobj")},Kt=m.__private__.putCatalog=function(V){var re=(V=V||{}).rootDictionaryObjId||Se;switch(Ln(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+re+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Te=""+pt;Te.substr(Te.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+j(pt)+"]")}switch(_t||(_t="continuous"),_t){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Ct&&ne("/PageMode /"+Ct),Vr.publish("putCatalog"),ne(">>"),ne("endobj")},ar=m.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(se+1)),ne("/Root "+se+" 0 R"),ne("/Info "+(se-1)+" 0 R"),d!==null&&ne("/Encrypt "+In.oid+" 0 R"),ne("/ID [ <"+pe+"> <"+pe+"> ]"),ne(">>")},Sr=m.__private__.putHeader=function(){ne("%PDF-"+x),ne("%ºß¬à")},An=m.__private__.putXRef=function(){var V="0000000000";ne("xref"),ne("0 "+(se+1)),ne("0000000000 65535 f ");for(var re=1;re<=se;re++)typeof le[re]=="function"?ne((V+le[re]()).slice(-10)+" 00000 n "):le[re]!==void 0?ne((V+le[re]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Tr=m.__private__.buildDocument=function(){var V;se=0,xe=0,ve=[],le=[],Ee=[],Se=en(),Ne=en(),Pe(ve),Vr.publish("buildDocument"),Sr(),Qe(),(function(){Vr.publish("putAdditionalObjects");for(var Te=0;Te<Ee.length;Te++){var Ve=Ee[Te];ce(Ve.objId,!0),ne(Ve.content),ne("endobj")}Vr.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var Te in ut)ut.hasOwnProperty(Te)&&(p===!1||p===!0&&g.hasOwnProperty(Te))&&rt(ut[Te])})(),(function(){var Te;for(Te in jt)jt.hasOwnProperty(Te)&&qt(jt[Te])})(),(function(){for(var Te in Ss)Ss.hasOwnProperty(Te)&&At(Ss[Te])})(),(function(Te){var Ve;for(Ve in Dt)Dt.hasOwnProperty(Ve)&&(Dt[Ve]instanceof F0?Gt(Dt[Ve]):Dt[Ve]instanceof $m&&er(Dt[Ve],Te))})(V),Vr.publish("putResources"),V.forEach(It),It({resourcesOid:Ne,objectOid:Number.MAX_SAFE_INTEGER}),Vr.publish("postPutResources"),d!==null&&(In.oid=Ln(),ne("<<"),ne("/Filter /Standard"),ne("/V "+In.v),ne("/R "+In.r),ne("/U <"+In.toHexString(In.U)+">"),ne("/O <"+In.toHexString(In.O)+">"),ne("/P "+In.P),ne(">>"),ne("endobj")),De(),Kt();var re=xe;return An(),ar(),ne("startxref"),ne(""+re),ne("%%EOF"),Pe(ke[z]),ve.join(`
`)},dn=m.__private__.getBlob=function(V){return new Blob([Ae(V)],{type:"application/pdf"})},Tn=m.output=m.__private__.output=(Os=function(V,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",V){case void 0:return Tr();case"save":m.save(re.filename);break;case"arraybuffer":return Ae(Tr());case"blob":return dn(Tr());case"bloburi":case"bloburl":if(Xr.URL!==void 0&&typeof Xr.URL.createObjectURL=="function")return Xr.URL&&Xr.URL.createObjectURL(dn(Tr()))||void 0;Cs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Te="",Ve=Tr();try{Te=ej(Ve)}catch{Te=ej(unescape(encodeURIComponent(Ve)))}return"data:application/pdf;filename="+re.filename+";base64,"+Te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xr)==="[object Window]"){var We="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(We=re.pdfObjectUrl,kt="");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+We+'"'+kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",sr=Xr.open();return sr!==null&&sr.document.write(Tt),sr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xr)==="[object Window]"){var cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',Pr=Xr.open();if(Pr!==null){Pr.document.write(cr);var Ur=this;Pr.document.documentElement.querySelector("#pdfViewer").onload=function(){Pr.document.title=re.filename,Pr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ur.output("bloburl"))}}return Pr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',xs=Xr.open();if(xs!==null&&(xs.document.write(Pn),xs.document.title=re.filename),xs||typeof safari>"u")return xs;break;case"datauri":case"dataurl":return Xr.document.location.href=this.output("datauristring",re);default:return null}},Os.foo=function(){try{return Os.apply(this,arguments)}catch(Te){var V=Te.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var re="Error in function "+V.split(`
`)[0].split("<")[0]+": "+Te.message;if(!Xr.console)throw new Error(re);Xr.console.error(re,Te),Xr.alert&&alert(re)}},Os.foo.bar=Os,Os.foo),Ji=function(V){return Array.isArray(va)===!0&&va.indexOf(V)>-1};switch(n){case"pt":st=1;break;case"mm":st=72/25.4;break;case"cm":st=72/2.54;break;case"in":st=72;break;case"px":st=Ji("px_scaling")==1?.75:96/72;break;case"pc":case"em":st=12;break;case"ex":st=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);st=n}var In=null;K(),te();var _n=m.__private__.getPageInfo=m.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kr[V].objId,pageNumber:V,pageContext:kr[V]}},Ws=m.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in kr)if(kr[re].objId===V)break;return _n(re)},aa=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:kr[z].objId,pageNumber:z,pageContext:kr[z]}};m.addPage=function(){return xi.apply(this,arguments),this},m.setPage=function(){return ti.apply(this,arguments),Pe.call(this,ke[z]),this},m.insertPage=function(V){return this.addPage(),this.movePage(z,V),this},m.movePage=function(V,re){var Te,Ve;if(V>re){Te=ke[V],Ve=kr[V];for(var We=V;We>re;We--)ke[We]=ke[We-1],kr[We]=kr[We-1];ke[re]=Te,kr[re]=Ve,this.setPage(re)}else if(V<re){Te=ke[V],Ve=kr[V];for(var kt=V;kt<re;kt++)ke[kt]=ke[kt+1],kr[kt]=kr[kt+1];ke[re]=Te,kr[re]=Ve,this.setPage(re)}return this},m.deletePage=function(){return ji.apply(this,arguments),this},m.__private__.text=m.text=function(V,re,Te,Ve,We){var kt,Tt,sr,cr,Pr,Ur,Pn,xs,Ns,Bn=(Ve=Ve||{}).scope||this;if(typeof V=="number"&&typeof re=="number"&&(typeof Te=="string"||Array.isArray(Te))){var Ks=Te;Te=re,re=V,V=Ks}if(arguments[3]instanceof vr==0?(sr=arguments[4],cr=arguments[5],hs(Pn=arguments[3])==="object"&&Pn!==null||(typeof sr=="string"&&(cr=sr,sr=null),typeof Pn=="string"&&(cr=Pn,Pn=null),typeof Pn=="number"&&(sr=Pn,Pn=null),Ve={flags:Pn,angle:sr,align:cr})):(N("The transform parameter of text() with a Matrix value"),Ns=We),isNaN(re)||isNaN(Te)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Bn;var rs,wa="",xl=typeof Ve.lineHeightFactor=="number"?Ve.lineHeightFactor:vi,Ul=Bn.internal.scaleFactor;function _d(ys){return ys=ys.split("	").join(Array(Ve.TabLen||9).join(" ")),Kr(ys,Pn)}function Gc(ys){for(var vs,la=ys.concat(),ca=[],Ba=la.length;Ba--;)typeof(vs=la.shift())=="string"?ca.push(vs):Array.isArray(ys)&&(vs.length===1||vs[1]===void 0&&vs[2]===void 0)?ca.push(vs[0]):ca.push([vs[0],vs[1],vs[2]]);return ca}function oa(ys,vs){var la;if(typeof ys=="string")la=vs(ys)[0];else if(Array.isArray(ys)){for(var ca,Ba,mc=ys.concat(),$l=[],If=mc.length;If--;)typeof(ca=mc.shift())=="string"?$l.push(vs(ca)[0]):Array.isArray(ca)&&typeof ca[0]=="string"&&(Ba=vs(ca[0],ca[1],ca[2]),$l.push([Ba[0],Ba[1],Ba[2]]));la=$l}return la}var ko=!1,Cu=!0;if(typeof V=="string")ko=!0;else if(Array.isArray(V)){var to=V.concat();Tt=[];for(var k,q=to.length;q--;)(typeof(k=to.shift())!="string"||Array.isArray(k)&&typeof k[0]!="string")&&(Cu=!1);ko=Cu}if(ko===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var ee=Oe/Bn.internal.scaleFactor,be=ee*(xl-1);switch(Ve.baseline){case"bottom":Te-=be;break;case"top":Te+=ee-be;break;case"hanging":Te+=ee-2*be;break;case"middle":Te+=ee/2-be}if((Ur=Ve.maxWidth||0)>0&&(typeof V=="string"?V=Bn.splitTextToSize(V,Ur):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(ys,vs){return ys.concat(Bn.splitTextToSize(vs,Ur))},[]))),kt={text:V,x:re,y:Te,options:Ve,mutex:{pdfEscape:Kr,activeFontKey:ft,fonts:ut,activeFontSize:Oe}},Vr.publish("preProcessText",kt),V=kt.text,sr=(Ve=kt.options).angle,Ns instanceof vr==0&&sr&&typeof sr=="number"){sr*=Math.PI/180,Ve.rotationDirection===0&&(sr=-sr),O===T&&(sr=-sr);var Ke=Math.cos(sr),mt=Math.sin(sr);Ns=new vr(Ke,mt,-mt,Ke,0,0)}else sr&&sr instanceof vr&&(Ns=sr);O!==T||Ns||(Ns=ei),(Pr=Ve.charSpace||_o)!==void 0&&(wa+=A(M(Pr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xs=Ve.horizontalScale)!==void 0&&(wa+=A(100*xs)+` Tz
`),Ve.lang;var zt=-1,Un=Ve.renderingMode!==void 0?Ve.renderingMode:Ve.stroke,Ps=Bn.internal.getCurrentPageInfo().pageContext;switch(Un){case 0:case!1:case"fill":zt=0;break;case 1:case!0:case"stroke":zt=1;break;case 2:case"fillThenStroke":zt=2;break;case 3:case"invisible":zt=3;break;case 4:case"fillAndAddForClipping":zt=4;break;case 5:case"strokeAndAddPathForClipping":zt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zt=6;break;case 7:case"addToPathForClipping":zt=7}var mn=Ps.usedRenderingMode!==void 0?Ps.usedRenderingMode:-1;zt!==-1?wa+=zt+` Tr
`:mn!==-1&&(wa+=`0 Tr
`),zt!==-1&&(Ps.usedRenderingMode=zt),cr=Ve.align||"left";var kn,$n=Oe*xl,Fi=Bn.internal.pageSize.getWidth(),_i=ut[ft];Pr=Ve.charSpace||_o,Ur=Ve.maxWidth||0,Pn=Object.assign({autoencode:!0,noBOM:!0},Ve.flags);var So=[],zl=function(ys){return Bn.getStringUnitWidth(ys,{font:_i,charSpace:Pr,fontSize:Oe,doKerning:!1})*Oe/Ul};if(Object.prototype.toString.call(V)==="[object Array]"){var ro;Tt=Gc(V),cr!=="left"&&(kn=Tt.map(zl));var no,Au=0;if(cr==="right"){re-=kn[0],V=[],q=Tt.length;for(var so=0;so<q;so++)so===0?(no=Gs(re),ro=Ml(Te)):(no=M(Au-kn[so]),ro=-$n),V.push([Tt[so],no,ro]),Au=kn[so]}else if(cr==="center"){re-=kn[0]/2,V=[],q=Tt.length;for(var Tu=0;Tu<q;Tu++)Tu===0?(no=Gs(re),ro=Ml(Te)):(no=M((Au-kn[Tu])/2),ro=-$n),V.push([Tt[Tu],no,ro]),Au=kn[Tu]}else if(cr==="left"){V=[],q=Tt.length;for(var r0=0;r0<q;r0++)V.push(Tt[r0])}else if(cr==="justify"&&_i.encoding==="Identity-H"){V=[],q=Tt.length,Ur=Ur!==0?Ur:Fi;for(var Iu=0,Ys=0;Ys<q;Ys++)if(ro=Ys===0?Ml(Te):-$n,no=Ys===0?Gs(re):Iu,Ys<q-1){var Wp=M((Ur-kn[Ys])/(Tt[Ys].split(" ").length-1)),No=Tt[Ys].split(" ");V.push([No[0]+" ",no,ro]),Iu=0;for(var Eo=1;Eo<No.length;Eo++){var Cf=(zl(No[Eo-1]+" "+No[Eo])-zl(No[Eo]))*Ul+Wp;Eo==No.length-1?V.push([No[Eo],Cf,0]):V.push([No[Eo]+" ",Cf,0]),Iu-=Cf}}else V.push([Tt[Ys],no,ro]);V.push(["",Iu,0])}else{if(cr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],q=Tt.length,Ur=Ur!==0?Ur:Fi,Ys=0;Ys<q;Ys++)ro=Ys===0?Ml(Te):-$n,no=Ys===0?Gs(re):0,Ys<q-1?So.push(A(M((Ur-kn[Ys])/(Tt[Ys].split(" ").length-1)))):So.push(0),V.push([Tt[Ys],no,ro])}}(typeof Ve.R2L=="boolean"?Ve.R2L:Lt)===!0&&(V=oa(V,function(ys,vs,la){return[ys.split("").reverse().join(""),vs,la]})),kt={text:V,x:re,y:Te,options:Ve,mutex:{pdfEscape:Kr,activeFontKey:ft,fonts:ut,activeFontSize:Oe}},Vr.publish("postProcessText",kt),V=kt.text,rs=kt.mutex.isHex||!1;var Pu=ut[ft].encoding;Pu!=="WinAnsiEncoding"&&Pu!=="StandardEncoding"||(V=oa(V,function(ys,vs,la){return[_d(ys),vs,la]})),Tt=Gc(V),V=[];for(var Af,kd,Kc,Yc=Array.isArray(Tt[0])?1:0,hc="",Tf=function(ys,vs,la){var ca="";return la instanceof vr?(la=typeof Ve.angle=="number"?pn(la,new vr(1,0,0,1,ys,vs)):pn(new vr(1,0,0,1,ys,vs),la),O===T&&(la=pn(new vr(1,0,0,-1,0,0),la)),ca=la.join(" ")+` Tm
`):ca=A(ys)+" "+A(vs)+` Td
`,ca},Co=0;Co<Tt.length;Co++){switch(hc="",Yc){case 1:Kc=(rs?"<":"(")+Tt[Co][0]+(rs?">":")"),Af=parseFloat(Tt[Co][1]),kd=parseFloat(Tt[Co][2]);break;case 0:Kc=(rs?"<":"(")+Tt[Co]+(rs?">":")"),Af=Gs(re),kd=Ml(Te)}So!==void 0&&So[Co]!==void 0&&(hc=So[Co]+` Tw
`),Co===0?V.push(hc+Tf(Af,kd,Ns)+Kc):Yc===0?V.push(hc+Kc):Yc===1&&V.push(hc+Tf(Af,kd,Ns)+Kc)}V=Yc===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var pc=`BT
/`;return pc+=ft+" "+Oe+` Tf
`,pc+=A(Oe*xl)+` TL
`,pc+=wi+`
`,pc+=wa,pc+=V,ne(pc+="ET"),g[ft]=!0,Bn};var Ri=m.__private__.clip=m.clip=function(V){return ne(V==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ri("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ne("n"),this};var on=m.__private__.isValidStyle=function(V){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(re=!0),re};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(V){return on(V)&&(u=V),this};var Zi=m.__private__.getStyle=m.getStyle=function(V){var re=u;switch(V){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=V}return re},rn=m.close=function(){return ne("h"),this};m.stroke=function(){return ne("S"),this},m.fill=function(V){return ia("f",V),this},m.fillEvenOdd=function(V){return ia("f*",V),this},m.fillStroke=function(V){return ia("B",V),this},m.fillStrokeEvenOdd=function(V){return ia("B*",V),this};var ia=function(V,re){hs(re)==="object"?kf(re,V):ne(V)},ku=function(V){V===null||O===T&&V===void 0||(V=Zi(V),ne(V))};function Su(V,re,Te,Ve,We){var kt=new $m(re||this.boundingBox,Te||this.xStep,Ve||this.yStep,this.gState,We||this.matrix);kt.stream=this.stream;var Tt=V+"$$"+this.cloneIndex+++"$$";return Zn(Tt,kt),kt}var kf=function(V,re){var Te=$t[V.key],Ve=Dt[Te];if(Ve instanceof F0)ne("q"),ne(Sf(re)),Ve.gState&&m.setGState(Ve.gState),ne(V.matrix.toString()+" cm"),ne("/"+Te+" sh"),ne("Q");else if(Ve instanceof $m){var We=new vr(1,0,0,-1,0,ni());V.matrix&&(We=We.multiply(V.matrix||ei),Te=Su.call(Ve,V.key,V.boundingBox,V.xStep,V.yStep,We).id),ne("q"),ne("/Pattern cs"),ne("/"+Te+" scn"),Ve.gState&&m.setGState(Ve.gState),ne(re),ne("Q")}},Sf=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Nu=m.moveTo=function(V,re){return ne(A(M(V))+" "+A(Z(re))+" m"),this},Ol=m.lineTo=function(V,re){return ne(A(M(V))+" "+A(Z(re))+" l"),this},yi=m.curveTo=function(V,re,Te,Ve,We,kt){return ne([A(M(V)),A(Z(re)),A(M(Te)),A(Z(Ve)),A(M(We)),A(Z(kt)),"c"].join(" ")),this};m.__private__.line=m.line=function(V,re,Te,Ve,We){if(isNaN(V)||isNaN(re)||isNaN(Te)||isNaN(Ve)||!on(We))throw new Error("Invalid arguments passed to jsPDF.line");return O===P?this.lines([[Te-V,Ve-re]],V,re,[1,1],We||"S"):this.lines([[Te-V,Ve-re]],V,re,[1,1]).stroke()},m.__private__.lines=m.lines=function(V,re,Te,Ve,We,kt){var Tt,sr,cr,Pr,Ur,Pn,xs,Ns,Bn,Ks,rs,wa;if(typeof V=="number"&&(wa=Te,Te=re,re=V,V=wa),Ve=Ve||[1,1],kt=kt||!1,isNaN(re)||isNaN(Te)||!Array.isArray(V)||!Array.isArray(Ve)||!on(We)||typeof kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Nu(re,Te),Tt=Ve[0],sr=Ve[1],Pr=V.length,Ks=re,rs=Te,cr=0;cr<Pr;cr++)(Ur=V[cr]).length===2?(Ks=Ur[0]*Tt+Ks,rs=Ur[1]*sr+rs,Ol(Ks,rs)):(Pn=Ur[0]*Tt+Ks,xs=Ur[1]*sr+rs,Ns=Ur[2]*Tt+Ks,Bn=Ur[3]*sr+rs,Ks=Ur[4]*Tt+Ks,rs=Ur[5]*sr+rs,yi(Pn,xs,Ns,Bn,Ks,rs));return kt&&rn(),ku(We),this},m.path=function(V){for(var re=0;re<V.length;re++){var Te=V[re],Ve=Te.c;switch(Te.op){case"m":Nu(Ve[0],Ve[1]);break;case"l":Ol(Ve[0],Ve[1]);break;case"c":yi.apply(this,Ve);break;case"h":rn()}}return this},m.__private__.rect=m.rect=function(V,re,Te,Ve,We){if(isNaN(V)||isNaN(re)||isNaN(Te)||isNaN(Ve)||!on(We))throw new Error("Invalid arguments passed to jsPDF.rect");return O===P&&(Ve=-Ve),ne([A(M(V)),A(Z(re)),A(M(Te)),A(M(Ve)),"re"].join(" ")),ku(We),this},m.__private__.triangle=m.triangle=function(V,re,Te,Ve,We,kt,Tt){if(isNaN(V)||isNaN(re)||isNaN(Te)||isNaN(Ve)||isNaN(We)||isNaN(kt)||!on(Tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Te-V,Ve-re],[We-Te,kt-Ve],[V-We,re-kt]],V,re,[1,1],Tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(V,re,Te,Ve,We,kt,Tt){if(isNaN(V)||isNaN(re)||isNaN(Te)||isNaN(Ve)||isNaN(We)||isNaN(kt)||!on(Tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var sr=4/3*(Math.SQRT2-1);return We=Math.min(We,.5*Te),kt=Math.min(kt,.5*Ve),this.lines([[Te-2*We,0],[We*sr,0,We,kt-kt*sr,We,kt],[0,Ve-2*kt],[0,kt*sr,-We*sr,kt,-We,kt],[2*We-Te,0],[-We*sr,0,-We,-kt*sr,-We,-kt],[0,2*kt-Ve],[0,-kt*sr,We*sr,-kt,We,-kt]],V+We,re,[1,1],Tt,!0),this},m.__private__.ellipse=m.ellipse=function(V,re,Te,Ve,We){if(isNaN(V)||isNaN(re)||isNaN(Te)||isNaN(Ve)||!on(We))throw new Error("Invalid arguments passed to jsPDF.ellipse");var kt=4/3*(Math.SQRT2-1)*Te,Tt=4/3*(Math.SQRT2-1)*Ve;return Nu(V+Te,re),yi(V+Te,re-Tt,V+kt,re-Ve,V,re-Ve),yi(V-kt,re-Ve,V-Te,re-Tt,V-Te,re),yi(V-Te,re+Tt,V-kt,re+Ve,V,re+Ve),yi(V+kt,re+Ve,V+Te,re+Tt,V+Te,re),ku(We),this},m.__private__.circle=m.circle=function(V,re,Te,Ve){if(isNaN(V)||isNaN(re)||isNaN(Te)||!on(Ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,re,Te,Te,Ve)},m.setFont=function(V,re,Te){return Te&&(re=L(re,Te)),ft=el(V,re,{disableWarning:!1}),this};var Oa=m.__private__.getFont=m.getFont=function(){return ut[el.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var V,re,Te={};for(V in Ut)if(Ut.hasOwnProperty(V))for(re in Te[V]=[],Ut[V])Ut[V].hasOwnProperty(re)&&Te[V].push(re);return Te},m.addFont=function(V,re,Te,Ve,We){var kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&kt.indexOf(arguments[3])!==-1?We=arguments[3]:arguments[3]&&kt.indexOf(arguments[3])==-1&&(Te=L(Te,Ve)),bn.call(this,V,re,Te,We=We||"Identity-H")};var vi,eo=t.lineWidth||.200025,Lr=m.__private__.getLineWidth=m.getLineWidth=function(){return eo},bo=m.__private__.setLineWidth=m.setLineWidth=function(V){return eo=V,ne(A(M(V))+" w"),this};m.__private__.setLineDash=Cr.API.setLineDash=Cr.API.setLineDashPattern=function(V,re){if(V=V||[],re=re||0,isNaN(re)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Te){return A(M(Te))}).join(" "),re=A(M(re)),ne("["+V+"] "+re+" d"),this};var pl=m.__private__.getLineHeight=m.getLineHeight=function(){return Oe*vi};m.__private__.getLineHeight=m.getLineHeight=function(){return Oe*vi};var t0=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(vi=V),this},Nf=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return vi};t0(t.lineHeight);var Gs=m.__private__.getHorizontalCoordinate=function(V){return M(V)},Ml=m.__private__.getVerticalCoordinate=function(V){return O===T?V:kr[z].mediaBox.topRightY-kr[z].mediaBox.bottomLeftY-M(V)},Ef=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(V){return A(Gs(V))},Bl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(V){return A(Ml(V))},ml=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Re(ml)},m.__private__.setStrokeColor=m.setDrawColor=function(V,re,Te,Ve){return ml=Le({ch1:V,ch2:re,ch3:Te,ch4:Ve,pdfColorType:"draw",precision:2}),ne(ml),this};var Eu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Re(Eu)},m.__private__.setFillColor=m.setFillColor=function(V,re,Te,Ve){return Eu=Le({ch1:V,ch2:re,ch3:Te,ch4:Ve,pdfColorType:"fill",precision:2}),ne(Eu),this};var wi=t.textColor||"0 g",Li=m.__private__.getTextColor=m.getTextColor=function(){return Re(wi)};m.__private__.setTextColor=m.setTextColor=function(V,re,Te,Ve){return wi=Le({ch1:V,ch2:re,ch3:Te,ch4:Ve,pdfColorType:"text",precision:3}),this};var _o=t.charSpace,uc=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(_o||0)};m.__private__.setCharSpace=m.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _o=V,this};var ts=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(V){var re=m.CapJoinStyles[V];if(re===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ts=re,ne(re+" J"),this};var bd=0;m.__private__.setLineJoin=m.setLineJoin=function(V){var re=m.CapJoinStyles[V];if(re===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bd=re,ne(re+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(A(M(V))+" M"),this},m.GState=nb,m.setGState=function(V){(V=typeof V=="string"?jt[pr[V]]:Vl(null,V)).equals(hn)||(ne("/"+V.id+" gs"),hn=V)};var Vl=function(V,re){if(!V||!pr[V]){var Te=!1;for(var Ve in jt)if(jt.hasOwnProperty(Ve)&&jt[Ve].equals(re)){Te=!0;break}if(Te)re=jt[Ve];else{var We="GS"+(Object.keys(jt).length+1).toString(10);jt[We]=re,re.id=We}return V&&(pr[V]=re.id),Vr.publish("addGState",re),re}};m.addGState=function(V,re){return Vl(V,re),this},m.saveGraphicsState=function(){return ne("q"),nr.push({key:ft,size:Oe,color:wi}),this},m.restoreGraphicsState=function(){ne("Q");var V=nr.pop();return ft=V.key,Oe=V.size,wi=V.color,hn=null,this},m.setCurrentTransformationMatrix=function(V){return ne(V.toString()+" cm"),this},m.comment=function(V){return ne("#"+V),this};var tl=function(V,re){var Te=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Te},set:function(kt){isNaN(kt)||(Te=parseFloat(kt))}});var Ve=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ve},set:function(kt){isNaN(kt)||(Ve=parseFloat(kt))}});var We="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return We},set:function(kt){We=kt.toString()}}),this},dc=function(V,re,Te,Ve){tl.call(this,V,re),this.type="rect";var We=Te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return We},set:function(Tt){isNaN(Tt)||(We=parseFloat(Tt))}});var kt=Ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return kt},set:function(Tt){isNaN(Tt)||(kt=parseFloat(Tt))}}),this},fc=function(){this.page=an,this.currentPage=z,this.pages=ke.slice(0),this.pagesContext=kr.slice(0),this.x=wt,this.y=me,this.matrix=Ue,this.width=ri(z),this.height=ni(z),this.outputDestination=Fe,this.id="",this.objectNumber=-1};fc.prototype.restore=function(){an=this.page,z=this.currentPage,kr=this.pagesContext,ke=this.pages,wt=this.x,me=this.y,Ue=this.matrix,Wc(z,this.width),Ma(z,this.height),Fe=this.outputDestination};var bi=function(V,re,Te,Ve,We){Hs.push(new fc),an=z=0,ke=[],wt=V,me=re,Ue=We,tn([Te,Ve])};for(var gl in m.beginFormObject=function(V,re,Te,Ve,We){return bi(V,re,Te,Ve,We),this},m.endFormObject=function(V){return(function(re){if(Da[re])Hs.pop().restore();else{var Te=new fc,Ve="Xo"+(Object.keys(Ss).length+1).toString(10);Te.id=Ve,Da[re]=Ve,Ss[Ve]=Te,Vr.publish("addFormObject",Te),Hs.pop().restore()}})(V),this},m.doFormObject=function(V,re){var Te=Ss[Da[V]];return ne("q"),ne(re.toString()+" cm"),ne("/"+Te.id+" Do"),ne("Q"),this},m.getFormObject=function(V){var re=Ss[Da[V]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},m.save=function(V,re){return V=V||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(E0(dn(Tr()),V),typeof E0.unload=="function"&&Xr.setTimeout&&setTimeout(E0.unload,911),this):new Promise(function(Te,Ve){try{var We=E0(dn(Tr()),V);typeof E0.unload=="function"&&Xr.setTimeout&&setTimeout(E0.unload,911),Te(We)}catch(kt){Ve(kt.message)}})},Cr.API)Cr.API.hasOwnProperty(gl)&&(gl==="events"&&Cr.API.events.length?(function(V,re){var Te,Ve,We;for(We=re.length-1;We!==-1;We--)Te=re[We][0],Ve=re[We][1],V.subscribe.apply(V,[Te].concat(typeof Ve=="function"?[Ve]:Ve))})(Vr,Cr.API.events):m[gl]=Cr.API[gl]);var ri=m.getPageWidth=function(V){return(kr[V=V||z].mediaBox.topRightX-kr[V].mediaBox.bottomLeftX)/st},Wc=m.setPageWidth=function(V,re){kr[V].mediaBox.topRightX=re*st+kr[V].mediaBox.bottomLeftX},ni=m.getPageHeight=function(V){return(kr[V=V||z].mediaBox.topRightY-kr[V].mediaBox.bottomLeftY)/st},Ma=m.setPageHeight=function(V,re){kr[V].mediaBox.topRightY=re*st+kr[V].mediaBox.bottomLeftY};return m.internal={pdfEscape:Kr,getStyle:Zi,getFont:Oa,getFontSize:nt,getCharSpace:uc,getTextColor:Li,getLineHeight:pl,getLineHeightFactor:Nf,getLineWidth:Lr,write:ye,getHorizontalCoordinate:Gs,getVerticalCoordinate:Ml,getCoordinateString:Ef,getVerticalCoordinateString:Bl,collections:{},newObject:Ln,newAdditionalObject:je,newObjectDeferred:en,newObjectDeferredBegin:ce,getFilters:Ge,putStream:lt,events:Vr,scaleFactor:st,pageSize:{getWidth:function(){return ri(z)},setWidth:function(V){Wc(z,V)},getHeight:function(){return ni(z)},setHeight:function(V){Ma(z,V)}},encryptionOptions:d,encryption:In,getEncryptor:function(V){return d!==null?In.encryptor(V,0):function(re){return re}},output:Tn,getNumberOfPages:gs,pages:ke,out:ne,f2:j,f3:F,getPageInfo:_n,getPageInfoByObjId:Ws,getCurrentPageInfo:aa,getPDFVersion:y,Point:tl,Rectangle:dc,Matrix:vr,hasHotfix:Ji},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ri(z)},set:function(V){Wc(z,V)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ni(z)},set:function(V){Ma(z,V)},enumerable:!0,configurable:!0}),(function(V){for(var re=0,Te=Be.length;re<Te;re++){var Ve=bn.call(this,V[re][0],V[re][1],V[re][2],Be[re][3],!0);p===!1&&(g[Ve]=!0);var We=V[re][0].split("-");Ar({id:Ve,fontName:We[0],fontStyle:We[1]||""})}Vr.publish("addFonts",{fonts:ut,dictionary:Ut})}).call(m,Be),ft="F1",xi(s,r),Vr.publish("initialized"),m}Dm.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Dm.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Dm.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Dm.prototype.processOwnerPassword=function(t,e){return Kk(Gk(e).substr(0,5),t)},Dm.prototype.encryptor=function(t,e){var r=Gk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Kk(r,n)}},nb.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||hs(t)!==hs(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Cr.API={events:[]},Cr.version="3.0.2";var Na=Cr.API,TN=1,Hp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sm=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sn=function(t){return t.toFixed(2)},eh=function(t){return t.toFixed(5)};Na.__acroform__={};var Dl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},sj=function(t){return t*TN},qu=function(t){var e=new U$,r=xr.internal.getHeight(t)||0,n=xr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(sn(n)),Number(sn(r))],e},gwe=Na.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},xwe=Na.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},ywe=Na.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ha=Na.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ywe(t,e-1)},Wa=Na.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return gwe(t,e-1)},Ga=Na.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xwe(t,e-1)},vwe=Na.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(s+i)||0,l.upperRight_Y=n(a)||0,[Number(sn(l.lowerLeft_X)),Number(sn(l.lowerLeft_Y)),Number(sn(l.upperRight_X)),Number(sn(l.upperRight_Y))]},wwe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Yk(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+sn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=qu(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Yk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(j){return j.split(`
`)}):s.map(function(j){return[j]});var a=r,i=xr.internal.getHeight(t)||0;i=i<0?-i:i;var o=xr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(j,F,M){if(j+1<s.length){var Z=F+" "+s[j+1][0];return tw(Z,t,M).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,p=tw("3",t,a).height,g=t.multiline?i-a:(i-p)/2,m=g+=2,x=0,y=0,b=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+tw(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var S="",P=0,T=0;T<s.length;T++)if(s.hasOwnProperty(T)){var O=!1;if(s[T].length!==1&&b!==s[T].length-1){if((p+2)*(P+2)+2>i)continue e;S+=s[T][b],O=!0,y=T,T--}else{S=(S+=s[T][b]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var W=parseInt(T),Y=l(W,S,a),L=T>=s.length-1;if(Y&&!L){S+=" ",b=0;continue}if(Y||L){if(L)y=W;else if(t.multiline&&(p+2)*(P+2)+2>i)continue e}else{if(!t.multiline||(p+2)*(P+2)+2>i)continue e;y=W}}for(var A="",N=x;N<=y;N++){var D=s[N];if(t.multiline){if(N===y){A+=D[b]+" ",b=(b+1)%D.length;continue}if(N===x){A+=D[D.length-1]+" ";continue}}A+=D[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,d=tw(A,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}e+=sn(u)+" "+sn(m)+` Td
`,e+="("+Hp(A)+`) Tj
`,e+=-sn(u)+` 0 Td
`,m=-(a+2),d=0,x=O?y:y+1,P++,S=""}break}return n.text=e,n.fontSize=a,n},tw=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},bwe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_we=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},kwe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(bu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(bwe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");TN=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new z$,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&_we(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var a=!n;for(var i in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=vwe(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=xr.createDefaultAppearanceStream(o),hs(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=wwe(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var x=m[i];typeof x=="function"&&(x=x.call(s,o)),p+="/"+i+" "+x+" ",s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(s,o)),p+="/"+i+" "+x,s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&(function(y,b){for(var S in y)if(y.hasOwnProperty(S)){var P=S,T=y[S];b.internal.newObjectDeferredBegin(T.objId,!0),hs(T)==="object"&&typeof T.putStream=="function"&&T.putStream(),delete y[P]}})(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},V$=Na.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),hs(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Hp(n(t[a].toString()))+")"):s+=t[a].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},V3=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Hp(n(t))+")"},ed=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ed.prototype.toString=function(){return this.objId+" 0 R"},ed.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ed.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:V$(s,this.objId,this.scope)}):s instanceof ed?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var U$=function(){ed.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Dl(U$,ed);var z$=function(){ed.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Hp(r(t))+")"}},set:function(r){t=r}})};Dl(z$,ed);var bu=function t(){ed.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ha(e,3)},set:function(S){S?this.F=Wa(e,3):this.F=Ga(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof sb)return;a="FieldObject"+t.FieldNum++}var S=function(P){return P};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Hp(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(S){i=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/TN:u},set:function(S){u=S}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof sb||this instanceof tp))return V3(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Gi==0?V3(g,this.objId,this.scope):g},set:function(S){S=S.toString(),g=this instanceof Gi==0?S.substr(0,1)==="("?Sm(S.substr(1,S.length-2)):Sm(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi==1?Sm(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof Gi==1?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Gi==0?V3(m,this.objId,this.scope):m},set:function(S){S=S.toString(),m=this instanceof Gi==0?S.substr(0,1)==="("?Sm(S.substr(1,S.length-2)):Sm(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi==1?Sm(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof Gi==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(S){S=!!S,y=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(S){x=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,1)},set:function(S){S?this.Ff=Wa(this.Ff,1):this.Ff=Ga(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,2)},set:function(S){S?this.Ff=Wa(this.Ff,2):this.Ff=Ga(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,3)},set:function(S){S?this.Ff=Wa(this.Ff,3):this.Ff=Ga(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');b=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(b){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Dl(bu,ed);var l1=function(){bu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return V$(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=(function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u})(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,18)},set:function(r){r?this.Ff=Wa(this.Ff,18):this.Ff=Ga(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Wa(this.Ff,19):this.Ff=Ga(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,20)},set:function(r){r?(this.Ff=Wa(this.Ff,20),e.sort()):this.Ff=Ga(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,22)},set:function(r){r?this.Ff=Wa(this.Ff,22):this.Ff=Ga(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,23)},set:function(r){r?this.Ff=Wa(this.Ff,23):this.Ff=Ga(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,27)},set:function(r){r?this.Ff=Wa(this.Ff,27):this.Ff=Ga(this.Ff,27)}}),this.hasAppearanceStream=!1};Dl(l1,bu);var c1=function(){l1.call(this),this.fontName="helvetica",this.combo=!1};Dl(c1,l1);var u1=function(){c1.call(this),this.combo=!0};Dl(u1,c1);var qw=function(){u1.call(this),this.edit=!0};Dl(qw,u1);var Gi=function(){bu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,15)},set:function(r){r?this.Ff=Wa(this.Ff,15):this.Ff=Ga(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,16)},set:function(r){r?this.Ff=Wa(this.Ff,16):this.Ff=Ga(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,17)},set:function(r){r?this.Ff=Wa(this.Ff,17):this.Ff=Ga(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,26)},set:function(r){r?this.Ff=Wa(this.Ff,26):this.Ff=Ga(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Hp(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){hs(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Dl(Gi,bu);var Hw=function(){Gi.call(this),this.pushButton=!0};Dl(Hw,Gi);var d1=function(){Gi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Dl(d1,Gi);var sb=function(){var t,e;bu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),n)i.push("/"+a+" ("+Hp(s(n[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){hs(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Dl(sb,bu),d1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},d1.prototype.createOption=function(t){var e=new sb;return e.Parent=this,e.optionName=t,this.Kids.push(e),Swe.call(this.scope,e),e};var Ww=function(){Gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xr.CheckBox.createAppearanceStream()};Dl(Ww,Gi);var tp=function(){bu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,13)},set:function(e){e?this.Ff=Wa(this.Ff,13):this.Ff=Ga(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,21)},set:function(e){e?this.Ff=Wa(this.Ff,21):this.Ff=Ga(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,23)},set:function(e){e?this.Ff=Wa(this.Ff,23):this.Ff=Ga(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,24)},set:function(e){e?this.Ff=Wa(this.Ff,24):this.Ff=Ga(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,25)},set:function(e){e?this.Ff=Wa(this.Ff,25):this.Ff=Ga(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,26)},set:function(e){e?this.Ff=Wa(this.Ff,26):this.Ff=Ga(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Dl(tp,bu);var Gw=function(){tp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ha(this.Ff,14)},set:function(t){t?this.Ff=Wa(this.Ff,14):this.Ff=Ga(this.Ff,14)}}),this.password=!0};Dl(Gw,tp);var xr={CheckBox:{createAppearanceStream:function(){return{N:{On:xr.CheckBox.YesNormal},D:{On:xr.CheckBox.YesPushDown,Off:xr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=qu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=Yk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+sn(xr.internal.getWidth(t))+" "+sn(xr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+sn(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=qu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],a=xr.internal.getHeight(t),i=xr.internal.getWidth(t),o=Yk(t,t.caption);return s.push("1 g"),s.push("0 0 "+sn(i)+" "+sn(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+sn(i-1)+" "+sn(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+sn(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=qu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(xr.internal.getWidth(t))+" "+sn(xr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:xr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=xr.RadioButton.Circle.YesNormal,e.D[t]=xr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=qu(t);e.scope=t.scope;var r=[],n=xr.internal.getWidth(t)<=xr.internal.getHeight(t)?xr.internal.getWidth(t)/4:xr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=xr.internal.Bezier_C,a=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+eh(xr.internal.getWidth(t)/2)+" "+eh(xr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=qu(t);e.scope=t.scope;var r=[],n=xr.internal.getWidth(t)<=xr.internal.getHeight(t)?xr.internal.getWidth(t)/4:xr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*xr.internal.Bezier_C).toFixed(5)),i=Number((n*xr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+eh(xr.internal.getWidth(t)/2)+" "+eh(xr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+eh(xr.internal.getWidth(t)/2)+" "+eh(xr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=qu(t);e.scope=t.scope;var r=[],n=xr.internal.getWidth(t)<=xr.internal.getHeight(t)?xr.internal.getWidth(t)/4:xr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*xr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+eh(xr.internal.getWidth(t)/2)+" "+eh(xr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:xr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=xr.RadioButton.Cross.YesNormal,e.D[t]=xr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=qu(t);e.scope=t.scope;var r=[],n=xr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+sn(xr.internal.getWidth(t)-2)+" "+sn(xr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(sn(n.x1.x)+" "+sn(n.x1.y)+" m"),r.push(sn(n.x2.x)+" "+sn(n.x2.y)+" l"),r.push(sn(n.x4.x)+" "+sn(n.x4.y)+" m"),r.push(sn(n.x3.x)+" "+sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=qu(t);e.scope=t.scope;var r=xr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+sn(xr.internal.getWidth(t))+" "+sn(xr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+sn(xr.internal.getWidth(t)-2)+" "+sn(xr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(sn(r.x1.x)+" "+sn(r.x1.y)+" m"),n.push(sn(r.x2.x)+" "+sn(r.x2.y)+" l"),n.push(sn(r.x4.x)+" "+sn(r.x4.y)+" m"),n.push(sn(r.x3.x)+" "+sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=qu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(xr.internal.getWidth(t))+" "+sn(xr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};xr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=xr.internal.getWidth(t),r=xr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},xr.internal.getWidth=function(t){var e=0;return hs(t)==="object"&&(e=sj(t.Rect[2])),e},xr.internal.getHeight=function(t){var e=0;return hs(t)==="object"&&(e=sj(t.Rect[3])),e};var Swe=Na.addField=function(t){if(kwe(this,t),!(t instanceof bu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Na.AcroFormChoiceField=l1,Na.AcroFormListBox=c1,Na.AcroFormComboBox=u1,Na.AcroFormEditBox=qw,Na.AcroFormButton=Gi,Na.AcroFormPushButton=Hw,Na.AcroFormRadioButton=d1,Na.AcroFormCheckBox=Ww,Na.AcroFormTextField=tp,Na.AcroFormPasswordField=Gw,Na.AcroFormAppearance=xr,Na.AcroForm={ChoiceField:l1,ListBox:c1,ComboBox:u1,EditBox:qw,Button:Gi,PushButton:Hw,RadioButton:d1,CheckBox:Ww,TextField:tp,PasswordField:Gw,Appearance:xr},Cr.AcroForm={ChoiceField:l1,ListBox:c1,ComboBox:u1,EditBox:qw,Button:Gi,PushButton:Hw,RadioButton:d1,CheckBox:Ww,TextField:tp,PasswordField:Gw,Appearance:xr};Cr.AcroForm;function $$(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(j,F){var M,Z,ue,pe,fe,te=r;if((F=F||r)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(Y(j))for(fe in n)for(ue=n[fe],M=0;M<ue.length;M+=1){for(pe=!0,Z=0;Z<ue[M].length;Z+=1)if(ue[M][Z]!==void 0&&ue[M][Z]!==j[Z]){pe=!1;break}if(pe===!0){te=fe;break}}else for(fe in n)for(ue=n[fe],M=0;M<ue.length;M+=1){for(pe=!0,Z=0;Z<ue[M].length;Z+=1)if(ue[M][Z]!==void 0&&ue[M][Z]!==j.charCodeAt(Z)){pe=!1;break}if(pe===!0){te=fe;break}}return te===r&&F!==r&&(te=F),te},a=function j(F){for(var M=this.internal.write,Z=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:F.width}),pe.push({key:"Height",value:F.height}),F.colorSpace===S.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===S.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var fe="",te=0,H=F.transparency.length;te<H;te++)fe+=F.transparency[te]+" "+F.transparency[te]+" ";pe.push({key:"Mask",value:"["+fe+"]"})}F.sMask!==void 0&&pe.push({key:"SMask",value:F.objectId+1+" 0 R"});var ie=F.filter!==void 0?["/"+F.filter]:void 0;if(Z({data:F.data,additionalKeyValues:pe,alreadyAppliedFilters:ie,objectId:F.objectId}),M("endobj"),"sMask"in F&&F.sMask!==void 0){var K=(F.predictor!=null?"/Predictor "+F.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+F.width,I={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:K,data:F.sMask};"filter"in F&&(I.filter=F.filter),j.call(this,I)}if(F.colorSpace===S.INDEXED){var z=this.internal.newObject();Z({data:A(new Uint8Array(F.palette)),objectId:z}),M("endobj")}},i=function(){var j=this.internal.collections[e+"images"];for(var F in j)a.call(this,j[F])},o=function(){var j,F=this.internal.collections[e+"images"],M=this.internal.write;for(var Z in F)M("/I"+(j=F[Z]).index,j.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var j=this.internal.collections[e+"images"];return l.call(this),j},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(j){return typeof t["process"+j.toUpperCase()]=="function"},g=function(j){return hs(j)==="object"&&j.nodeType===1},m=function(j,F){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var M=""+j.getAttribute("src");if(M.indexOf("data:image/")===0)return $w(unescape(M).split("base64,").pop());var Z=t.loadFile(M,!0);if(Z!==void 0)return Z}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ue;switch(F){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return $w(j.toDataURL(ue,1).split("base64,").pop())}},x=function(j){var F=this.internal.collections[e+"images"];if(F){for(var M in F)if(j===F[M].alias)return F[M]}},y=function(j,F,M){return j||F||(j=-96,F=-96),j<0&&(j=-1*M.width*72/j/this.internal.scaleFactor),F<0&&(F=-1*M.height*72/F/this.internal.scaleFactor),j===0&&(j=F*M.width/M.height),F===0&&(F=j*M.height/M.width),[j,F]},b=function(j,F,M,Z,ue,pe){var fe=y.call(this,M,Z,ue),te=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,ie=u.call(this);if(M=fe[0],Z=fe[1],ie[ue.index]=ue,pe){pe*=Math.PI/180;var K=Math.cos(pe),I=Math.sin(pe),z=function(J){return J.toFixed(4)},X=[z(K),z(I),z(-1*I),z(K),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,te(j),H(F+Z),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([te(M),"0","0",te(Z),"0","0","cm"].join(" "))):this.internal.write([te(M),"0","0",te(Z),te(j),H(F+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},S=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(j){var F,M,Z=0;if(typeof j=="string")for(M=j.length,F=0;F<M;F++)Z=(Z<<5)-Z+j.charCodeAt(F),Z|=0;else if(Y(j))for(M=j.byteLength/2,F=0;F<M;F++)Z=(Z<<5)-Z+j[F],Z|=0;return Z},O=t.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var F=!0;return j.length===0&&(F=!1),j.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(F=!1),F},W=t.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var F=j.indexOf(",");return F<0?null:j.substring(0,F).trim().endsWith("base64")?j.substring(F+1):null};t.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var Y=t.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},L=t.__addimage__.binaryStringToUint8Array=function(j){for(var F=j.length,M=new Uint8Array(F),Z=0;Z<F;Z++)M[Z]=j.charCodeAt(Z);return M},A=t.__addimage__.arrayBufferToBinaryString=function(j){for(var F="",M=Y(j)?j:new Uint8Array(j),Z=0;Z<M.length;Z+=8192)F+=String.fromCharCode.apply(null,M.subarray(Z,Z+8192));return F};t.addImage=function(){var j,F,M,Z,ue,pe,fe,te,H;if(typeof arguments[1]=="number"?(F=r,M=arguments[1],Z=arguments[2],ue=arguments[3],pe=arguments[4],fe=arguments[5],te=arguments[6],H=arguments[7]):(F=arguments[1],M=arguments[2],Z=arguments[3],ue=arguments[4],pe=arguments[5],fe=arguments[6],te=arguments[7],H=arguments[8]),hs(j=arguments[0])==="object"&&!g(j)&&"imageData"in j){var ie=j;j=ie.imageData,F=ie.format||F||r,M=ie.x||M||0,Z=ie.y||Z||0,ue=ie.w||ie.width||ue,pe=ie.h||ie.height||pe,fe=ie.alias||fe,te=ie.compression||te,H=ie.rotation||ie.angle||H}var K=this.internal.getFilters();if(te===void 0&&K.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(M)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=N.call(this,j,F,fe,te);return b.call(this,M,Z,ue,pe,I,H),this};var N=function(j,F,M,Z){var ue,pe,fe;if(typeof j=="string"&&s(j)===r){j=unescape(j);var te=D(j,!1);(te!==""||(te=t.loadFile(j,!0))!==void 0)&&(j=te)}if(g(j)&&(j=m(j,F)),F=s(j,F),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((fe=M)==null||fe.length===0)&&(M=(function(H){return typeof H=="string"||Y(H)?T(H):Y(H.data)?T(H.data):null})(j)),(ue=x.call(this,M))||(j instanceof Uint8Array||F==="RGBA"||(pe=j,j=L(j)),ue=this["process"+F.toUpperCase()](j,d.call(this),M,(function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:P.NONE})(Z),pe)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},D=t.__addimage__.convertBase64ToBinaryString=function(j,F){F=typeof F!="boolean"||F;var M,Z="";if(typeof j=="string"){var ue;M=(ue=W(j))!==null&&ue!==void 0?ue:j;try{Z=$w(M)}catch(pe){if(F)throw O(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(j){var F,M,Z="";if(g(j)&&(j=m(j)),typeof j=="string"&&s(j)===r&&((Z=D(j,!1))===""&&(Z=t.loadFile(j)||""),j=Z),M=s(j),!p(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(j instanceof Uint8Array||(j=L(j)),!(F=this["process"+M.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=M,F}})(Cr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Cr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((n=u[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){n=u[g];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(y.objId),P=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(S(n.contents))+")",a+=" /Popup "+b.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+m(S(P))+") >>",y.content=a;var T=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+T,n.open&&(a+=" /Open true"),a+=" >>",b.content=a,this.internal.write(y.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var O=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(x(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var W=this.annotations._nameMap[n.options.name];n.options.pageNumber=W.page,n.options.top=W.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var Y=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+Y+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+s),h:u(n+a)},options:i,type:"link"})},t.textWithLink=function(r,n,s,a){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,s,a),s+=.2*u,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,s-u,o,i,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(Cr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(y){var b=0,S=r,P="",T=0;for(b=0;b<y.length;b+=1)S[y.charCodeAt(b)]!==void 0?(T++,typeof(S=S[y.charCodeAt(b)])=="number"&&(P+=String.fromCharCode(S),S=r,T=0),b===y.length-1&&(S=r,P+=y.charAt(b-(T-1)),b-=T-1,T=0)):(S=r,P+=y.charAt(b-T),b-=T,T=0);return P};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(y,b,S){return i(y)?a(y)===!1?-1:!u(y)||!i(b)&&!i(S)||!i(S)&&o(b)||o(y)&&!i(b)||o(y)&&l(b)||o(y)&&o(b)?0:d(y)&&i(b)&&!o(b)&&i(S)&&u(S)?3:o(y)||!i(S)?1:2:-1},m=function(y){var b=0,S=0,P=0,T="",O="",W="",Y=(y=y||"").split("\\s+"),L=[];for(b=0;b<Y.length;b+=1){for(L.push(""),S=0;S<Y[b].length;S+=1)T=Y[b][S],O=Y[b][S-1],W=Y[b][S+1],i(T)?(P=g(T,O,W),L[b]+=P!==-1?String.fromCharCode(e[T.charCodeAt(0)][P]):T):L[b]+=T;L[b]=p(L[b])}return L.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var y,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(b)){var P=0;for(S=[],P=0;P<b.length;P+=1)Array.isArray(b[P])?S.push([m(b[P][0]),b[P][1],b[P][2]]):S.push([m(b[P])]);y=S}else y=m(b);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",x])})(Cr.API),Cr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Cr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(y){x=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,m=0,x=0,y=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=u.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,O){return T.concat(b.splitTextToSize(O,S))},[])):l=Array.isArray(l)?l:[l];for(var P=0;P<l.length;P++)m<(y=this.getStringUnitWidth(l[P],{font:p})*d)&&(m=y);return m!==0&&(x=l.length),{w:m/=g,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,p,g){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,x,y,b,S=[],P=[],T=[],O={},W={},Y=[],L=[],A=(g=g||{}).autoSize||!1,N=g.printHeaders!==!1,D=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,j=g.margins||Object.assign({width:this.getPageWidth()},e),F=typeof g.padding=="number"?g.padding:3,M=g.headerBackgroundColor||"#c8c8c8",Z=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=Z,this.setFontSize(D),p==null)P=S=Object.keys(d[0]),T=S.map(function(){return"left"});else if(Array.isArray(p)&&hs(p[0])==="object")for(S=p.map(function(ie){return ie.name}),P=p.map(function(ie){return ie.prompt||ie.name||""}),T=p.map(function(ie){return ie.align||"left"}),m=0;m<p.length;m+=1)W[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(P=S=p,T=S.map(function(){return"left"}));if(A||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<S.length;m+=1){for(O[b=S[m]]=d.map(function(ie){return ie[b]}),this.setFont(void 0,"bold"),Y.push(this.getTextDimensions(P[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=O[b],this.setFont(void 0,"normal"),y=0;y<x.length;y+=1)Y.push(this.getTextDimensions(x[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[b]=Math.max.apply(null,Y)+F+F,Y=[]}if(N){var ue={};for(m=0;m<S.length;m+=1)ue[S[m]]={},ue[S[m]].text=P[m],ue[S[m]].align=T[m];var pe=o.call(this,ue,W);L=S.map(function(ie){return new a(l,u,W[ie],pe,ue[ie].text,void 0,ue[ie].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var fe=p.reduce(function(ie,K){return ie[K.name]=K.align,ie},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var te=o.call(this,d[m],W);for(y=0;y<S.length;y+=1){var H=d[m][S[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:y,data:H},this),i.call(this,new a(l,u,W[S[y]],te,H,m+2,fe[S[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}})(Cr.API);var q$={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},H$=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xk=$$(H$),W$=[100,200,300,400,500,600,700,800,900],Nwe=$$(W$);function U3(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(a){return q$[a=a||"normal"]?a:"normal"})(t.style),n=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(t.weight),s=(function(a){return typeof Xk[a=a||"normal"]=="number"?a:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function aj(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Ewe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ij={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function oj(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function lj(t){return t.trimLeft()}function Cwe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Awe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rw,cj,uj,Nm,nw,dj,fj,hj,z3=["times"];function pj(t,e,r,n){var s=4,a=gj;switch(n){case Cr.API.image_compression.FAST:s=1,a=mj;break;case Cr.API.image_compression.MEDIUM:s=6,a=xj;break;case Cr.API.image_compression.SLOW:s=9,a=yj}t=(function(o,l,u,d){for(var p,g=o.length/l,m=new Uint8Array(o.length+g),x=[Twe,mj,gj,xj,yj],y=0;y<g;y+=1){var b=y*l,S=o.subarray(b,b+l);if(d)m.set(d(S,u,p),b+y);else{for(var P=x.length,T=[],O=0;O<P;O+=1)T[O]=x[O](S,u,p);var W=Pwe(T.concat());m.set(T[W],b+y)}p=S}return m})(t,e,r,a);var i=$k(t,{level:s});return Cr.API.__addimage__.arrayBufferToBinaryString(i)}function Twe(t){var e=Array.apply([],t);return e.unshift(0),e}function mj(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var a=t[s-e]||0;n[s+1]=t[s]-a+256&255}return n}function gj(t,e,r){var n=t.length,s=[];s[0]=2;for(var a=0;a<n;a+=1){var i=r&&r[a]||0;s[a+1]=t[a]-i+256&255}return s}function xj(t,e,r){var n=t.length,s=[];s[0]=3;for(var a=0;a<n;a+=1){var i=t[a-e]||0,o=r&&r[a]||0;s[a+1]=t[a]+256-(i+o>>>1)&255}return s}function yj(t,e,r){var n=t.length,s=[];s[0]=4;for(var a=0;a<n;a+=1){var i=Iwe(t[a-e]||0,r&&r[a]||0,r&&r[a-e]||0);s[a+1]=t[a]-i+256&255}return s}function Iwe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),a=Math.abs(t+e-r-r);return n<=s&&n<=a?t:s<=a?e:r}function Pwe(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function $3(t,e,r){var n=e*r,s=Math.floor(n/8),a=16-(n-8*s+r),i=(1<<r)-1;return G$(t,s)>>a&i}function vj(t,e,r,n){var s=r*n,a=Math.floor(s/8),i=16-(s-8*a+n),o=(1<<n)-1,l=(e&o)<<i;(function(u,d,p){if(d+1<u.byteLength)u.setUint16(d,p,!1);else{var g=p>>8&255;u.setUint8(d,g)}})(t,a,G$(t,a)&~(o<<i)&65535|l)}function G$(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function jwe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<1+(7&s);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,d=[],p=0,g=null,m=0,x=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],1&y||(g=null),m=y>>2&7,e++;break;case 254:for(;;){if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,O=t[e++],W=O>>6&1,Y=1<<1+(7&O),L=o,A=l,N=!1;O>>7&&(N=!0,L=e,A=Y,e+=3*Y);var D=e;for(e++;;){var j;if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}d.push({x:b,y:S,width:P,height:T,has_local_palette:N,palette_offset:L,palette_size:A,data_offset:D,data_length:e-D,transparent_index:g,interlaced:!!W,delay:p,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,M){var Z=this.frameInfo(F),ue=Z.width*Z.height,pe=new Uint8Array(ue);wj(t,Z.data_offset,pe,ue);var fe=Z.palette_offset,te=Z.transparent_index;te===null&&(te=256);var H=Z.width,ie=r-H,K=H,I=4*(Z.y*r+Z.x),z=4*((Z.y+Z.height)*r+Z.x),X=I,J=4*ie;Z.interlaced===!0&&(J+=4*r*7);for(var se=8,le=0,ve=pe.length;le<ve;++le){var xe=pe[le];if(K===0&&(K=H,(X+=J)>=z&&(J=4*ie+4*r*(se-1),X=I+(H+ie)*(se<<1),se>>=1)),xe===te)X+=4;else{var Ee=t[fe+3*xe],ke=t[fe+3*xe+1],oe=t[fe+3*xe+2];M[X++]=oe,M[X++]=ke,M[X++]=Ee,M[X++]=255}--K}},this.decodeAndBlitFrameRGBA=function(F,M){var Z=this.frameInfo(F),ue=Z.width*Z.height,pe=new Uint8Array(ue);wj(t,Z.data_offset,pe,ue);var fe=Z.palette_offset,te=Z.transparent_index;te===null&&(te=256);var H=Z.width,ie=r-H,K=H,I=4*(Z.y*r+Z.x),z=4*((Z.y+Z.height)*r+Z.x),X=I,J=4*ie;Z.interlaced===!0&&(J+=4*r*7);for(var se=8,le=0,ve=pe.length;le<ve;++le){var xe=pe[le];if(K===0&&(K=H,(X+=J)>=z&&(J=4*ie+4*r*(se-1),X=I+(H+ie)*(se<<1),se>>=1)),xe===te)X+=4;else{var Ee=t[fe+3*xe],ke=t[fe+3*xe+1],oe=t[fe+3*xe+2];M[X++]=Ee,M[X++]=ke,M[X++]=oe,M[X++]=255}--K}}}function wj(t,e,r,n){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,u=(1<<l)-1,d=0,p=0,g=0,m=t[e++],x=new Int32Array(4096),y=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var b=p&u;if(p>>=l,d-=l,b!==a){if(b===i)break;for(var S=b<o?b:y,P=0,T=S;T>a;)T=x[T]>>8,++P;var O=T;if(g+P+(S!==b?1:0)>n)return void Cs.log("Warning, gif stream longer than expected.");r[g++]=O;var W=g+=P;for(S!==b&&(r[g++]=O),T=S;P--;)T=x[T],r[--W]=255&T,T>>=8;y!==null&&o<4096&&(x[o++]=y<<8|O,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=b}else o=i+1,u=(1<<(l=s+1))-1,y=null}return g!==n&&Cs.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function q3(t){var e,r,n,s,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),x=new Array(64),y=[],b=0,S=7,P=new Array(64),T=new Array(64),O=new Array(64),W=new Array(256),Y=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(I,z){for(var X=0,J=0,se=new Array,le=1;le<=16;le++){for(var ve=1;ve<=I[le];ve++)se[z[J]]=[],se[z[J]][0]=X,se[z[J]][1]=le,J++,X++;X*=2}return se}function fe(I){for(var z=I[0],X=I[1]-1;X>=0;)z&1<<X&&(b|=1<<S),X--,--S<0&&(b==255?(te(255),te(0)):te(b),S=7,b=0)}function te(I){y.push(I)}function H(I){te(I>>8&255),te(255&I)}function ie(I,z,X,J,se){for(var le,ve=se[0],xe=se[240],Ee=(function(Oe,pt){var nt,Lt,Ct,Nt,_t,ot,Bt,Ot,ft,st,wt=0;for(ft=0;ft<8;++ft){nt=Oe[wt],Lt=Oe[wt+1],Ct=Oe[wt+2],Nt=Oe[wt+3],_t=Oe[wt+4],ot=Oe[wt+5],Bt=Oe[wt+6];var me=nt+(Ot=Oe[wt+7]),Ue=nt-Ot,ut=Lt+Bt,Ut=Lt-Bt,nr=Ct+ot,Dt=Ct-ot,$t=Nt+_t,jt=Nt-_t,pr=me+$t,hn=me-$t,an=ut+nr,kr=ut-nr;Oe[wt]=pr+an,Oe[wt+4]=pr-an;var Vr=.707106781*(kr+hn);Oe[wt+2]=hn+Vr,Oe[wt+6]=hn-Vr;var va=.382683433*((pr=jt+Dt)-(kr=Ut+Ue)),Ss=.5411961*pr+va,Da=1.306562965*kr+va,Hs=.707106781*(an=Dt+Ut),vr=Ue+Hs,pn=Ue-Hs;Oe[wt+5]=pn+Ss,Oe[wt+3]=pn-Ss,Oe[wt+1]=vr+Da,Oe[wt+7]=vr-Da,wt+=8}for(wt=0,ft=0;ft<8;++ft){nt=Oe[wt],Lt=Oe[wt+8],Ct=Oe[wt+16],Nt=Oe[wt+24],_t=Oe[wt+32],ot=Oe[wt+40],Bt=Oe[wt+48];var ei=nt+(Ot=Oe[wt+56]),Zn=nt-Ot,Os=Lt+Bt,Ln=Lt-Bt,en=Ct+ot,ce=Ct-ot,je=Nt+_t,Se=Nt-_t,Ne=ei+je,Re=ei-je,Le=Os+en,Ge=Os-en;Oe[wt]=Ne+Le,Oe[wt+32]=Ne-Le;var lt=.707106781*(Ge+Re);Oe[wt+16]=Re+lt,Oe[wt+48]=Re-lt;var Xe=.382683433*((Ne=Se+ce)-(Ge=Ln+Zn)),Qe=.5411961*Ne+Xe,rt=1.306562965*Ge+Xe,At=.707106781*(Le=ce+Ln),Gt=Zn+At,er=Zn-At;Oe[wt+40]=er+Qe,Oe[wt+24]=er-Qe,Oe[wt+8]=Gt+rt,Oe[wt+56]=Gt-rt,wt++}for(ft=0;ft<64;++ft)st=Oe[ft]*pt[ft],m[ft]=st>0?st+.5|0:st-.5|0;return m})(I,z),ke=0;ke<64;++ke)x[L[ke]]=Ee[ke];var oe=x[0]-X;X=x[0],oe==0?fe(J[0]):(fe(J[g[le=32767+oe]]),fe(p[le]));for(var Fe=63;Fe>0&&x[Fe]==0;)Fe--;if(Fe==0)return fe(ve),X;for(var Pe,ne=1;ne<=Fe;){for(var ye=ne;x[ne]==0&&ne<=Fe;)++ne;var Ae=ne-ye;if(Ae>=16){Pe=Ae>>4;for(var Be=1;Be<=Pe;++Be)fe(xe);Ae&=15}le=32767+x[ne],fe(se[(Ae<<4)+g[le]]),fe(p[le]),ne++}return Fe!=63&&fe(ve),X}function K(I){I=Math.min(Math.max(I,1),100),a!=I&&((function(z){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var se=i((X[J]*z+50)/100);se=Math.min(Math.max(se,1),255),o[L[J]]=se}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var xe=i((le[ve]*z+50)/100);xe=Math.min(Math.max(xe,1),255),l[L[ve]]=xe}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,oe=0;oe<8;oe++)for(var Fe=0;Fe<8;Fe++)u[ke]=1/(o[L[ke]]*Ee[oe]*Ee[Fe]*8),d[ke]=1/(l[L[ke]]*Ee[oe]*Ee[Fe]*8),ke++})(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,z){z&&K(z),y=new Array,b=0,S=7,H(65496),H(65504),H(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),H(1),H(1),te(0),te(0),(function(){H(65499),H(132),te(0);for(var Lt=0;Lt<64;Lt++)te(o[Lt]);te(1);for(var Ct=0;Ct<64;Ct++)te(l[Ct])})(),(function(Lt,Ct){H(65472),H(17),te(8),H(Ct),H(Lt),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)})(I.width,I.height),(function(){H(65476),H(418),te(0);for(var Lt=0;Lt<16;Lt++)te(A[Lt+1]);for(var Ct=0;Ct<=11;Ct++)te(N[Ct]);te(16);for(var Nt=0;Nt<16;Nt++)te(D[Nt+1]);for(var _t=0;_t<=161;_t++)te(j[_t]);te(1);for(var ot=0;ot<16;ot++)te(F[ot+1]);for(var Bt=0;Bt<=11;Bt++)te(M[Bt]);te(17);for(var Ot=0;Ot<16;Ot++)te(Z[Ot+1]);for(var ft=0;ft<=161;ft++)te(ue[ft])})(),H(65498),H(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var X=0,J=0,se=0;b=0,S=7,this.encode.displayName="_encode_";for(var le,ve,xe,Ee,ke,oe,Fe,Pe,ne,ye=I.data,Ae=I.width,Be=I.height,Oe=4*Ae,pt=0;pt<Be;){for(le=0;le<Oe;){for(ke=Oe*pt+le,Fe=-1,Pe=0,ne=0;ne<64;ne++)oe=ke+(Pe=ne>>3)*Oe+(Fe=4*(7&ne)),pt+Pe>=Be&&(oe-=Oe*(pt+1+Pe-Be)),le+Fe>=Oe&&(oe-=le+Fe-Oe+4),ve=ye[oe++],xe=ye[oe++],Ee=ye[oe++],P[ne]=(Y[ve]+Y[xe+256|0]+Y[Ee+512|0]>>16)-128,T[ne]=(Y[ve+768|0]+Y[xe+1024|0]+Y[Ee+1280|0]>>16)-128,O[ne]=(Y[ve+1280|0]+Y[xe+1536|0]+Y[Ee+1792|0]>>16)-128;X=ie(P,u,X,e,n),J=ie(T,d,J,r,s),se=ie(O,d,se,r,s),le+=32}pt+=8}if(S>=0){var nt=[];nt[1]=S+1,nt[0]=(1<<S+1)-1,fe(nt)}return H(65497),new Uint8Array(y)},t=t||50,(function(){for(var I=String.fromCharCode,z=0;z<256;z++)W[z]=I(z)})(),e=pe(A,N),r=pe(F,M),n=pe(D,j),s=pe(Z,ue),(function(){for(var I=1,z=2,X=1;X<=15;X++){for(var J=I;J<z;J++)g[32767+J]=X,p[32767+J]=[],p[32767+J][1]=X,p[32767+J][0]=J;for(var se=-(z-1);se<=-I;se++)g[32767+se]=X,p[32767+se]=[],p[32767+se][1]=X,p[32767+se][0]=z-1+se;I<<=1,z<<=1}})(),(function(){for(var I=0;I<256;I++)Y[I]=19595*I,Y[I+256|0]=38470*I,Y[I+512|0]=7471*I+32768,Y[I+768|0]=-11059*I,Y[I+1024|0]=-21709*I,Y[I+1280|0]=32768*I+8421375,Y[I+1536|0]=-27439*I,Y[I+1792|0]=-5329*I})(),K(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function iu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bj(t){function e(N){if(!N)throw Error("assert :P")}function r(N,D,j){for(var F=0;4>F;F++)if(N[D+F]!=j.charCodeAt(F))return!0;return!1}function n(N,D,j,F,M){for(var Z=0;Z<M;Z++)N[D+Z]=j[F+Z]}function s(N,D,j,F){for(var M=0;M<F;M++)N[D+M]=j}function a(N){return new Int32Array(N)}function i(N,D){for(var j=[],F=0;F<N;F++)j.push(new D);return j}function o(N,D){var j=[];return(function F(M,Z,ue){for(var pe=ue[Z],fe=0;fe<pe&&(M.push(ue.length>Z+1?[]:new D),!(ue.length<Z+1));fe++)F(M[fe],Z+1,ue)})(j,0,N),j}var l=function(){var N=this;function D(_,C){for(var U=1<<C-1>>>0;_&U;)U>>>=1;return U?(_&U-1)+U:_}function j(_,C,U,Q,ae){e(!(Q%U));do _[C+(Q-=U)]=ae;while(0<Q)}function F(_,C,U,Q,ae){if(e(2328>=ae),512>=ae)var he=a(512);else if((he=a(ae))==null)return 0;return(function(ge,we,_e,Ce,ze,Ze){var Ie,qe,Ye=we,vt=1<<_e,tt=a(16),xt=a(16);for(e(ze!=0),e(Ce!=null),e(ge!=null),e(0<_e),qe=0;qe<ze;++qe){if(15<Ce[qe])return 0;++tt[Ce[qe]]}if(tt[0]==ze)return 0;for(xt[1]=0,Ie=1;15>Ie;++Ie){if(tt[Ie]>1<<Ie)return 0;xt[Ie+1]=xt[Ie]+tt[Ie]}for(qe=0;qe<ze;++qe)Ie=Ce[qe],0<Ce[qe]&&(Ze[xt[Ie]++]=qe);if(xt[15]==1)return(Ce=new M).g=0,Ce.value=Ze[0],j(ge,Ye,1,vt,Ce),vt;var yt,St=-1,Et=vt-1,_r=0,ur=1,Jr=1,mr=1<<_e;for(qe=0,Ie=1,ze=2;Ie<=_e;++Ie,ze<<=1){if(ur+=Jr<<=1,0>(Jr-=tt[Ie]))return 0;for(;0<tt[Ie];--tt[Ie])(Ce=new M).g=Ie,Ce.value=Ze[qe++],j(ge,Ye+_r,ze,mr,Ce),_r=D(_r,Ie)}for(Ie=_e+1,ze=2;15>=Ie;++Ie,ze<<=1){if(ur+=Jr<<=1,0>(Jr-=tt[Ie]))return 0;for(;0<tt[Ie];--tt[Ie]){if(Ce=new M,(_r&Et)!=St){for(Ye+=mr,yt=1<<(St=Ie)-_e;15>St&&!(0>=(yt-=tt[St]));)++St,yt<<=1;vt+=mr=1<<(yt=St-_e),ge[we+(St=_r&Et)].g=yt+_e,ge[we+St].value=Ye-we-St}Ce.g=Ie-_e,Ce.value=Ze[qe++],j(ge,Ye+(_r>>_e),ze,mr,Ce),_r=D(_r,Ie)}}return ur!=2*xt[15]-1?0:vt})(_,C,U,Q,ae,he)}function M(){this.value=this.g=0}function Z(){this.value=this.g=0}function ue(){this.G=i(5,M),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(so,Z)}function pe(_,C,U,Q){e(_!=null),e(C!=null),e(2147483648>Q),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=C,_.pa=U,_.Jd=C,_.Yc=U+Q,_.Zc=4<=Q?U+Q-4+1:U,ve(_)}function fe(_,C){for(var U=0;0<C--;)U|=Ee(_,128)<<C;return U}function te(_,C){var U=fe(_,C);return xe(_)?-U:U}function H(_,C,U,Q){var ae,he=0;for(e(_!=null),e(C!=null),e(4294967288>Q),_.Sb=Q,_.Ra=0,_.u=0,_.h=0,4<Q&&(Q=4),ae=0;ae<Q;++ae)he+=C[U+ae]<<8*ae;_.Ra=he,_.bb=Q,_.oa=C,_.pa=U}function ie(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Iu-8>>>0,++_.bb,_.u-=8;J(_)&&(_.h=1,_.u=0)}function K(_,C){if(e(0<=C),!_.h&&C<=r0){var U=X(_)&Tu[C];return _.u+=C,ie(_),U}return _.h=1,_.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(_){return _.Ra>>>(_.u&Iu-1)>>>0}function J(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Iu}function se(_,C){_.u=C,_.h=J(_)}function le(_){_.u>=Ys&&(e(_.u>=Ys),ie(_))}function ve(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function xe(_){return fe(_,1)}function Ee(_,C){var U=_.Ca;0>_.b&&ve(_);var Q=_.b,ae=U*C>>>8,he=(_.I>>>Q>ae)+0;for(he?(U-=ae,_.I-=ae+1<<Q>>>0):U=ae+1,Q=U,ae=0;256<=Q;)ae+=8,Q>>=8;return Q=7^ae+Wp[Q],_.b-=Q,_.Ca=(U<<Q)-1,he}function ke(_,C,U){_[C+0]=U>>24&255,_[C+1]=U>>16&255,_[C+2]=U>>8&255,_[C+3]=255&U}function oe(_,C){return _[C+0]|_[C+1]<<8}function Fe(_,C){return oe(_,C)|_[C+2]<<16}function Pe(_,C){return oe(_,C)|oe(_,C+2)<<16}function ne(_,C){var U=1<<C;return e(_!=null),e(0<C),_.X=a(U),_.X==null?0:(_.Mb=32-C,_.Xa=C,1)}function ye(_,C){e(_!=null),e(C!=null),e(_.Xa==C.Xa),n(C.X,0,_.X,0,1<<C.Xa)}function Ae(){this.X=[],this.Xa=this.Mb=0}function Be(_,C,U,Q){e(U!=null),e(Q!=null);var ae=U[0],he=Q[0];return ae==0&&(ae=(_*he+C/2)/C),he==0&&(he=(C*ae+_/2)/_),0>=ae||0>=he?0:(U[0]=ae,Q[0]=he,1)}function Oe(_,C){return _+(1<<C)-1>>>C}function pt(_,C){return((4278255360&_)+(4278255360&C)>>>0&4278255360)+((16711935&_)+(16711935&C)>>>0&16711935)>>>0}function nt(_,C){N[C]=function(U,Q,ae,he,ge,we,_e){var Ce;for(Ce=0;Ce<ge;++Ce){var ze=N[_](we[_e+Ce-1],ae,he+Ce);we[_e+Ce]=pt(U[Q+Ce],ze)}}}function Lt(){this.ud=this.hd=this.jd=0}function Ct(_,C){return((4278124286&(_^C))>>>1)+(_&C)>>>0}function Nt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function _t(_,C){return Nt(_+(_-C+.5>>1))}function ot(_,C,U){return Math.abs(C-U)-Math.abs(_-U)}function Bt(_,C,U,Q,ae,he,ge){for(Q=he[ge-1],U=0;U<ae;++U)he[ge+U]=Q=pt(_[C+U],Q)}function Ot(_,C,U,Q,ae){var he;for(he=0;he<U;++he){var ge=_[C+he],we=ge>>8&255,_e=16711935&(_e=(_e=16711935&ge)+((we<<16)+we));Q[ae+he]=(4278255360&ge)+_e>>>0}}function ft(_,C){C.jd=255&_,C.hd=_>>8&255,C.ud=_>>16&255}function st(_,C,U,Q,ae,he){var ge;for(ge=0;ge<Q;++ge){var we=C[U+ge],_e=we>>>8,Ce=we,ze=255&(ze=(ze=we>>>16)+((_.jd<<24>>24)*(_e<<24>>24)>>>5));Ce=255&(Ce=(Ce+=(_.hd<<24>>24)*(_e<<24>>24)>>>5)+((_.ud<<24>>24)*(ze<<24>>24)>>>5)),ae[he+ge]=(4278255360&we)+(ze<<16)+Ce}}function wt(_,C,U,Q,ae){N[C]=function(he,ge,we,_e,Ce,ze,Ze,Ie,qe){for(_e=Ze;_e<Ie;++_e)for(Ze=0;Ze<qe;++Ze)Ce[ze++]=ae(we[Q(he[ge++])])},N[_]=function(he,ge,we,_e,Ce,ze,Ze){var Ie=8>>he.b,qe=he.Ea,Ye=he.K[0],vt=he.w;if(8>Ie)for(he=(1<<he.b)-1,vt=(1<<Ie)-1;ge<we;++ge){var tt,xt=0;for(tt=0;tt<qe;++tt)tt&he||(xt=Q(_e[Ce++])),ze[Ze++]=ae(Ye[xt&vt]),xt>>=Ie}else N["VP8LMapColor"+U](_e,Ce,Ye,vt,ze,Ze,ge,we,qe)}}function me(_,C,U,Q,ae){for(U=C+U;C<U;){var he=_[C++];Q[ae++]=he>>16&255,Q[ae++]=he>>8&255,Q[ae++]=255&he}}function Ue(_,C,U,Q,ae){for(U=C+U;C<U;){var he=_[C++];Q[ae++]=he>>16&255,Q[ae++]=he>>8&255,Q[ae++]=255&he,Q[ae++]=he>>24&255}}function ut(_,C,U,Q,ae){for(U=C+U;C<U;){var he=(ge=_[C++])>>16&240|ge>>12&15,ge=240&ge|ge>>28&15;Q[ae++]=he,Q[ae++]=ge}}function Ut(_,C,U,Q,ae){for(U=C+U;C<U;){var he=(ge=_[C++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;Q[ae++]=he,Q[ae++]=ge}}function nr(_,C,U,Q,ae){for(U=C+U;C<U;){var he=_[C++];Q[ae++]=255&he,Q[ae++]=he>>8&255,Q[ae++]=he>>16&255}}function Dt(_,C,U,Q,ae,he){if(he==0)for(U=C+U;C<U;)ke(Q,((he=_[C++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ae+=32;else n(Q,ae,_,C,U)}function $t(_,C){N[C][0]=N[_+"0"],N[C][1]=N[_+"1"],N[C][2]=N[_+"2"],N[C][3]=N[_+"3"],N[C][4]=N[_+"4"],N[C][5]=N[_+"5"],N[C][6]=N[_+"6"],N[C][7]=N[_+"7"],N[C][8]=N[_+"8"],N[C][9]=N[_+"9"],N[C][10]=N[_+"10"],N[C][11]=N[_+"11"],N[C][12]=N[_+"12"],N[C][13]=N[_+"13"],N[C][14]=N[_+"0"],N[C][15]=N[_+"0"]}function jt(_){return _==Rf||_==Cd||_==o0||_==l0}function pr(){this.eb=[],this.size=this.A=this.fb=0}function hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function an(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pr,this.f.kb=new hn,this.sd=null}function kr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function va(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Ss(_,C){var U=_.T,Q=C.ba.f.RGBA,ae=Q.eb,he=Q.fb+_.ka*Q.A,ge=To[C.ba.S],we=_.y,_e=_.O,Ce=_.f,ze=_.N,Ze=_.ea,Ie=_.W,qe=C.cc,Ye=C.dc,vt=C.Mc,tt=C.Nc,xt=_.ka,yt=_.ka+_.T,St=_.U,Et=St+1>>1;for(xt==0?ge(we,_e,null,null,Ce,ze,Ze,Ie,Ce,ze,Ze,Ie,ae,he,null,null,St):(ge(C.ec,C.fc,we,_e,qe,Ye,vt,tt,Ce,ze,Ze,Ie,ae,he-Q.A,ae,he,St),++U);xt+2<yt;xt+=2)qe=Ce,Ye=ze,vt=Ze,tt=Ie,ze+=_.Rc,Ie+=_.Rc,he+=2*Q.A,ge(we,(_e+=2*_.fa)-_.fa,we,_e,qe,Ye,vt,tt,Ce,ze,Ze,Ie,ae,he-Q.A,ae,he,St);return _e+=_.fa,_.j+yt<_.o?(n(C.ec,C.fc,we,_e,St),n(C.cc,C.dc,Ce,ze,Et),n(C.Mc,C.Nc,Ze,Ie,Et),U--):1&yt||ge(we,_e,null,null,Ce,ze,Ze,Ie,Ce,ze,Ze,Ie,ae,he+Q.A,null,null,St),U}function Da(_,C,U){var Q=_.F,ae=[_.J];if(Q!=null){var he=_.U,ge=C.ba.S,we=ge==i0||ge==o0;C=C.ba.f.RGBA;var _e=[0],Ce=_.ka;_e[0]=_.T,_.Kb&&(Ce==0?--_e[0]:(--Ce,ae[0]-=_.width),_.j+_.ka+_.T==_.o&&(_e[0]=_.o-_.j-Ce));var ze=C.eb;Ce=C.fb+Ce*C.A,_=s0(Q,ae[0],_.width,he,_e,ze,Ce+(we?0:3),C.A),e(U==_e),_&&jt(ge)&&Ed(ze,Ce,we,he,_e,C.A)}return 0}function Hs(_){var C=_.ma,U=C.ba.S,Q=11>U,ae=U==ju||U==a0||U==i0||U==is||U==12||jt(U);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!ro(C.Oa,_,ae?11:12))return 0;if(ae&&jt(U)&&Cu(),_.da)alert("todo:use_scaling");else{if(Q){if(C.Ib=va,_.Kb){if(U=_.U+1>>1,C.memory=a(_.U+2*U),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+_.U,C.Mc=C.cc,C.Nc=C.dc+U,C.Ib=Ss,Cu()}}else alert("todo:EmitYUV");ae&&(C.Jb=Da,Q&&oa())}if(Q&&!ki){for(_=0;256>_;++_)Io[_]=89858*(_-128)+ql>>Xc,Po[_]=-22014*(_-128)+ql,Of[_]=-45773*(_-128),Pd[_]=113618*(_-128)+ql>>Xc;for(_=es;_<ns;++_)C=76283*(_-16)+ql>>Xc,em[_-es]=kn(C,255),Yy[_-es]=kn(C+8>>4,15);ki=1}return 1}function vr(_){var C=_.ma,U=_.U,Q=_.T;return e(!(1&_.ka)),0>=U||0>=Q?0:(U=C.Ib(_,C),C.Jb!=null&&C.Jb(_,C,U),C.Dc+=U,1)}function pn(_){_.ma.memory=null}function ei(_,C,U,Q){return K(_,8)!=47?0:(C[0]=K(_,14)+1,U[0]=K(_,14)+1,Q[0]=K(_,1),K(_,3)!=0?0:!_.h)}function Zn(_,C){if(4>_)return _+1;var U=_-2>>1;return(2+(1&_)<<U)+K(C,U)+1}function Os(_,C){return 120<C?C-120:1<=(U=((U=W4[C-1])>>4)*_+(8-(15&U)))?U:1;var U}function Ln(_,C,U){var Q=X(U),ae=_[C+=255&Q].g-8;return 0<ae&&(se(U,U.u+8),Q=X(U),C+=_[C].value,C+=Q&(1<<ae)-1),se(U,U.u+_[C].g),_[C].value}function en(_,C,U){return U.g+=_.g,U.value+=_.value<<C>>>0,e(8>=U.g),_.g}function ce(_,C,U){var Q=_.xc;return e((C=Q==0?0:_.vc[_.md*(U>>Q)+(C>>Q)])<_.Wb),_.Ya[C]}function je(_,C,U,Q){var ae=_.ab,he=_.c*C,ge=_.C;C=ge+C;var we=U,_e=Q;for(Q=_.Ta,U=_.Ua;0<ae--;){var Ce=_.gc[ae],ze=ge,Ze=C,Ie=we,qe=_e,Ye=(_e=Q,we=U,Ce.Ea);switch(e(ze<Ze),e(Ze<=Ce.nc),Ce.hc){case 2:Cf(Ie,qe,(Ze-ze)*Ye,_e,we);break;case 0:var vt=ze,tt=Ze,xt=_e,yt=we,St=(mr=Ce).Ea;vt==0&&(No(Ie,qe,null,null,1,xt,yt),Bt(Ie,qe+1,0,0,St-1,xt,yt+1),qe+=St,yt+=St,++vt);for(var Et=1<<mr.b,_r=Et-1,ur=Oe(St,mr.b),Jr=mr.K,mr=mr.w+(vt>>mr.b)*ur;vt<tt;){var Sn=Jr,Xs=mr,nn=1;for(Eo(Ie,qe,xt,yt-St,1,xt,yt);nn<St;){var dr=(nn&~_r)+Et;dr>St&&(dr=St),(0,Yc[Sn[Xs++]>>8&15])(Ie,qe+ +nn,xt,yt+nn-St,dr-nn,xt,yt+nn),nn=dr}qe+=St,yt+=St,++vt&_r||(mr+=ur)}Ze!=Ce.nc&&n(_e,we-Ye,_e,we+(Ze-ze-1)*Ye,Ye);break;case 1:for(Ye=Ie,tt=qe,St=(Ie=Ce.Ea)-(yt=Ie&~(xt=(qe=1<<Ce.b)-1)),vt=Oe(Ie,Ce.b),Et=Ce.K,Ce=Ce.w+(ze>>Ce.b)*vt;ze<Ze;){for(_r=Et,ur=Ce,Jr=new Lt,mr=tt+yt,Sn=tt+Ie;tt<mr;)ft(_r[ur++],Jr),hc(Jr,Ye,tt,qe,_e,we),tt+=qe,we+=qe;tt<Sn&&(ft(_r[ur++],Jr),hc(Jr,Ye,tt,St,_e,we),tt+=St,we+=St),++ze&xt||(Ce+=vt)}break;case 3:if(Ie==_e&&qe==we&&0<Ce.b){for(tt=_e,Ie=Ye=we+(Ze-ze)*Ye-(yt=(Ze-ze)*Oe(Ce.Ea,Ce.b)),qe=_e,xt=we,vt=[],yt=(St=yt)-1;0<=yt;--yt)vt[yt]=qe[xt+yt];for(yt=St-1;0<=yt;--yt)tt[Ie+yt]=vt[yt];Pu(Ce,ze,Ze,_e,Ye,_e,we)}else Pu(Ce,ze,Ze,Ie,qe,_e,we)}we=Q,_e=U}_e!=U&&n(Q,U,we,_e,he)}function Se(_,C){var U=_.V,Q=_.Ba+_.c*_.C,ae=C-_.C;if(e(C<=_.l.o),e(16>=ae),0<ae){var he=_.l,ge=_.Ta,we=_.Ua,_e=he.width;if(je(_,ae,U,Q),ae=we=[we],e((U=_.C)<(Q=C)),e(he.v<he.va),Q>he.o&&(Q=he.o),U<he.j){var Ce=he.j-U;U=he.j,ae[0]+=Ce*_e}if(U>=Q?U=0:(ae[0]+=4*he.v,he.ka=U-he.j,he.U=he.va-he.v,he.T=Q-U,U=1),U){if(we=we[0],11>(U=_.ca).S){var ze=U.f.RGBA,Ze=(Q=U.S,ae=he.U,he=he.T,Ce=ze.eb,ze.A),Ie=he;for(ze=ze.fb+_.Ma*ze.A;0<Ie--;){var qe=ge,Ye=we,vt=ae,tt=Ce,xt=ze;switch(Q){case Xp:Tf(qe,Ye,vt,tt,xt);break;case ju:Co(qe,Ye,vt,tt,xt);break;case Rf:Co(qe,Ye,vt,tt,xt),Ed(tt,xt,0,vt,1,0);break;case qy:vs(qe,Ye,vt,tt,xt);break;case a0:Dt(qe,Ye,vt,tt,xt,1);break;case Cd:Dt(qe,Ye,vt,tt,xt,1),Ed(tt,xt,0,vt,1,0);break;case i0:Dt(qe,Ye,vt,tt,xt,0);break;case o0:Dt(qe,Ye,vt,tt,xt,0),Ed(tt,xt,1,vt,1,0);break;case is:pc(qe,Ye,vt,tt,xt);break;case l0:pc(qe,Ye,vt,tt,xt),_g(tt,xt,vt,1,0);break;case Qp:ys(qe,Ye,vt,tt,xt);break;default:e(0)}we+=_e,ze+=Ze}_.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=U.height)}}_.C=C,e(_.C<=_.i)}function Ne(_){var C;if(0<_.ua)return 0;for(C=0;C<_.Wb;++C){var U=_.Ya[C].G,Q=_.Ya[C].H;if(0<U[1][Q[1]+0].g||0<U[2][Q[2]+0].g||0<U[3][Q[3]+0].g)return 0}return 1}function Re(_,C,U,Q,ae,he){if(_.Z!=0){var ge=_.qd,we=_.rd;for(e(Di[_.Z]!=null);C<U;++C)Di[_.Z](ge,we,Q,ae,Q,ae,he),ge=Q,we=ae,ae+=he;_.qd=ge,_.rd=we}}function Le(_,C){var U=_.l.ma,Q=U.Z==0||U.Z==1?_.l.j:_.C;if(Q=_.C<Q?Q:_.C,e(C<=_.l.o),C>Q){var ae=_.l.width,he=U.ca,ge=U.tb+ae*Q,we=_.V,_e=_.Ba+_.c*Q,Ce=_.gc;e(_.ab==1),e(Ce[0].hc==3),kd(Ce[0],Q,C,we,_e,he,ge),Re(U,Q,C,he,ge,ae)}_.C=_.Ma=C}function Ge(_,C,U,Q,ae,he,ge){var we=_.$/Q,_e=_.$%Q,Ce=_.m,ze=_.s,Ze=U+_.$,Ie=Ze;ae=U+Q*ae;var qe=U+Q*he,Ye=280+ze.ua,vt=_.Pb?we:16777216,tt=0<ze.ua?ze.Wa:null,xt=ze.wc,yt=Ze<qe?ce(ze,_e,we):null;e(_.C<he),e(qe<=ae);var St=!1;e:for(;;){for(;St||Ze<qe;){var Et=0;if(we>=vt){var _r=Ze-U;e((vt=_).Pb),vt.wd=vt.m,vt.xd=_r,0<vt.s.ua&&ye(vt.s.Wa,vt.s.vb),vt=we+Zp}if(_e&xt||(yt=ce(ze,_e,we)),e(yt!=null),yt.Qb&&(C[Ze]=yt.qb,St=!0),!St)if(le(Ce),yt.jc){Et=Ce,_r=C;var ur=Ze,Jr=yt.pd[X(Et)&so-1];e(yt.jc),256>Jr.g?(se(Et,Et.u+Jr.g),_r[ur]=Jr.value,Et=0):(se(Et,Et.u+Jr.g-256),e(256<=Jr.value),Et=Jr.value),Et==0&&(St=!0)}else Et=Ln(yt.G[0],yt.H[0],Ce);if(Ce.h)break;if(St||256>Et){if(!St)if(yt.nd)C[Ze]=(yt.qb|Et<<8)>>>0;else{if(le(Ce),St=Ln(yt.G[1],yt.H[1],Ce),le(Ce),_r=Ln(yt.G[2],yt.H[2],Ce),ur=Ln(yt.G[3],yt.H[3],Ce),Ce.h)break;C[Ze]=(ur<<24|St<<16|Et<<8|_r)>>>0}if(St=!1,++Ze,++_e>=Q&&(_e=0,++we,ge!=null&&we<=he&&!(we%16)&&ge(_,we),tt!=null))for(;Ie<Ze;)Et=C[Ie++],tt.X[(506832829*Et&4294967295)>>>tt.Mb]=Et}else if(280>Et){if(Et=Zn(Et-256,Ce),_r=Ln(yt.G[4],yt.H[4],Ce),le(Ce),_r=Os(Q,_r=Zn(_r,Ce)),Ce.h)break;if(Ze-U<_r||ae-Ze<Et)break e;for(ur=0;ur<Et;++ur)C[Ze+ur]=C[Ze+ur-_r];for(Ze+=Et,_e+=Et;_e>=Q;)_e-=Q,++we,ge!=null&&we<=he&&!(we%16)&&ge(_,we);if(e(Ze<=ae),_e&xt&&(yt=ce(ze,_e,we)),tt!=null)for(;Ie<Ze;)Et=C[Ie++],tt.X[(506832829*Et&4294967295)>>>tt.Mb]=Et}else{if(!(Et<Ye))break e;for(St=Et-280,e(tt!=null);Ie<Ze;)Et=C[Ie++],tt.X[(506832829*Et&4294967295)>>>tt.Mb]=Et;Et=Ze,e(!(St>>>(_r=tt).Xa)),C[Et]=_r.X[St],St=!0}St||e(Ce.h==J(Ce))}if(_.Pb&&Ce.h&&Ze<ae)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&ye(_.s.vb,_.s.Wa);else{if(Ce.h)break e;ge?.(_,we>he?he:we),_.a=0,_.$=Ze-U}return 1}return _.a=3,0}function lt(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var C=_.Wa;C!=null&&(C.X=null),_.vb=null,e(_!=null)}function Xe(){var _=new xs;return _==null?null:(_.a=0,_.xb=Ff,$t("Predictor","VP8LPredictors"),$t("Predictor","VP8LPredictors_C"),$t("PredictorAdd","VP8LPredictorsAdd"),$t("PredictorAdd","VP8LPredictorsAdd_C"),Cf=Ot,hc=st,Tf=me,Co=Ue,pc=ut,ys=Ut,vs=nr,N.VP8LMapColor32b=Af,N.VP8LMapColor8b=Kc,_)}function Qe(_,C,U,Q,ae){var he=1,ge=[_],we=[C],_e=Q.m,Ce=Q.s,ze=null,Ze=0;e:for(;;){if(U)for(;he&&K(_e,1);){var Ie=ge,qe=we,Ye=Q,vt=1,tt=Ye.m,xt=Ye.gc[Ye.ab],yt=K(tt,2);if(Ye.Oc&1<<yt)he=0;else{switch(Ye.Oc|=1<<yt,xt.hc=yt,xt.Ea=Ie[0],xt.nc=qe[0],xt.K=[null],++Ye.ab,e(4>=Ye.ab),yt){case 0:case 1:xt.b=K(tt,3)+2,vt=Qe(Oe(xt.Ea,xt.b),Oe(xt.nc,xt.b),0,Ye,xt.K),xt.K=xt.K[0];break;case 3:var St,Et=K(tt,8)+1,_r=16<Et?0:4<Et?1:2<Et?2:3;if(Ie[0]=Oe(xt.Ea,_r),xt.b=_r,St=vt=Qe(Et,1,0,Ye,xt.K)){var ur,Jr=Et,mr=xt,Sn=1<<(8>>mr.b),Xs=a(Sn);if(Xs==null)St=0;else{var nn=mr.K[0],dr=mr.w;for(Xs[0]=mr.K[0][0],ur=1;ur<1*Jr;++ur)Xs[ur]=pt(nn[dr+ur],Xs[ur-1]);for(;ur<4*Sn;++ur)Xs[ur]=0;mr.K[0]=null,mr.K[0]=Xs,St=1}}vt=St;break;case 2:break;default:e(0)}he=vt}}if(ge=ge[0],we=we[0],he&&K(_e,1)&&!(he=1<=(Ze=K(_e,4))&&11>=Ze)){Q.a=3;break e}var Jt;if(Jt=he)t:{var ua,zr,gn,ws=Q,si=ge,ba=we,Ms=Ze,Va=U,ai=ws.m,js=ws.s,jn=[null],qn=1,Rs=0,Hn=Wy[Ms];r:for(;;){if(Va&&K(ai,1)){var Qs=K(ai,3)+2,Js=Oe(si,Qs),os=Oe(ba,Qs),Oi=Js*os;if(!Qe(Js,os,0,ws,jn))break r;for(jn=jn[0],js.xc=Qs,ua=0;ua<Oi;++ua){var ss=jn[ua]>>8&65535;jn[ua]=ss,ss>=qn&&(qn=ss+1)}}if(ai.h)break r;for(zr=0;5>zr;++zr){var ls=Ad[zr];!zr&&0<Ms&&(ls+=1<<Ms),Rs<ls&&(Rs=ls)}var _a=i(qn*Hn,M),Si=qn,jo=i(Si,ue);if(jo==null)var da=null;else e(65536>=Si),da=jo;var fa=a(Rs);if(da==null||fa==null||_a==null){ws.a=1;break r}var Mi=_a;for(ua=gn=0;ua<qn;++ua){var cs=da[ua],Bi=cs.G,wl=cs.H,Hl=0,ii=1,ha=0;for(zr=0;5>zr;++zr){ls=Ad[zr],Bi[zr]=Mi,wl[zr]=gn,!zr&&0<Ms&&(ls+=1<<Ms);s:{var Fu,Jc=ls,Mf=ws,yc=fa,Qy=Mi,Lg=gn,Es=0,Wl=Mf.m,Fg=K(Wl,1);if(s(yc,0,0,Jc),Fg){var Dg=K(Wl,1)+1,tm=K(Wl,1),rm=K(Wl,tm==0?1:8);yc[rm]=1,Dg==2&&(yc[rm=K(Wl,8)]=1);var vc=1}else{var Ls=a(19),ka=K(Wl,4)+4;if(19<ka){Mf.a=3;var pa=0;break s}for(Fu=0;Fu<ka;++Fu)Ls[H4[Fu]]=K(Wl,3);var Bf=void 0,Zc=void 0,Vf=Mf,Q4=Ls,Ua=Jc,nm=yc,h0=0,wc=Vf.m,Gl=8,rl=i(128,M);n:for(;F(rl,0,7,Q4,19);){if(K(wc,1)){var p0=2+2*K(wc,3);if((Bf=2+K(wc,p0))>Ua)break n}else Bf=Ua;for(Zc=0;Zc<Ua&&Bf--;){le(wc);var sm=rl[0+(127&X(wc))];se(wc,wc.u+sm.g);var Du=sm.value;if(16>Du)nm[Zc++]=Du,Du!=0&&(Gl=Du);else{var Jy=Du==16,Og=Du-16,Zy=Jp[Og],Mg=K(wc,c0[Og])+Zy;if(Zc+Mg>Ua)break n;for(var ev=Jy?Gl:0;0<Mg--;)nm[Zc++]=ev}}h0=1;break n}h0||(Vf.a=3),vc=h0}(vc=vc&&!Wl.h)&&(Es=F(Qy,Lg,8,yc,Jc)),vc&&Es!=0?pa=Es:(Mf.a=3,pa=0)}if(pa==0)break r;if(ii&&Hy[zr]==1&&(ii=Mi[gn].g==0),Hl+=Mi[gn].g,gn+=pa,3>=zr){var Uf,am=fa[0];for(Uf=1;Uf<ls;++Uf)fa[Uf]>am&&(am=fa[Uf]);ha+=am}}if(cs.nd=ii,cs.Qb=0,ii&&(cs.qb=(Bi[3][wl[3]+0].value<<24|Bi[1][wl[1]+0].value<<16|Bi[2][wl[2]+0].value)>>>0,Hl==0&&256>Bi[0][wl[0]+0].value&&(cs.Qb=1,cs.qb+=Bi[0][wl[0]+0].value<<8)),cs.jc=!cs.Qb&&6>ha,cs.jc){var m0,nl=cs;for(m0=0;m0<so;++m0){var eu=m0,Kl=nl.pd[eu],Rd=nl.G[0][nl.H[0]+eu];256<=Rd.value?(Kl.g=Rd.g+256,Kl.value=Rd.value):(Kl.g=0,Kl.value=0,eu>>=en(Rd,8,Kl),eu>>=en(nl.G[1][nl.H[1]+eu],16,Kl),eu>>=en(nl.G[2][nl.H[2]+eu],0,Kl),en(nl.G[3][nl.H[3]+eu],24,Kl))}}}js.vc=jn,js.Wb=qn,js.Ya=da,js.yc=_a,Jt=1;break t}Jt=0}if(!(he=Jt)){Q.a=3;break e}if(0<Ze){if(Ce.ua=1<<Ze,!ne(Ce.Wa,Ze)){Q.a=1,he=0;break e}}else Ce.ua=0;var im=Q,om=ge,tv=we,lm=im.s,cm=lm.xc;if(im.c=om,im.i=tv,lm.md=Oe(om,cm),lm.wc=cm==0?-1:(1<<cm)-1,U){Q.xb=xc;break e}if((ze=a(ge*we))==null){Q.a=1,he=0;break e}he=(he=Ge(Q,ze,0,ge,we,we,null))&&!_e.h;break e}return he?(ae!=null?ae[0]=ze:(e(ze==null),e(U)),Q.$=0,U||lt(Ce)):lt(Ce),he}function rt(_,C){var U=_.c*_.i,Q=U+C+16*C;return e(_.c<=C),_.V=a(Q),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+U+C,1)}function At(_,C){var U=_.C,Q=C-U,ae=_.V,he=_.Ba+_.c*U;for(e(C<=_.l.o);0<Q;){var ge=16<Q?16:Q,we=_.l.ma,_e=_.l.width,Ce=_e*ge,ze=we.ca,Ze=we.tb+_e*U,Ie=_.Ta,qe=_.Ua;je(_,ge,ae,he),kg(Ie,qe,ze,Ze,Ce),Re(we,U,U+ge,ze,Ze,_e),Q-=ge,ae+=ge*_.c,U+=ge}e(U==C),_.C=_.Ma=C}function Gt(){this.ub=this.yd=this.td=this.Rb=0}function er(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function It(){this.Yb=(function(){var _=[];return(function C(U,Q,ae){for(var he=ae[Q],ge=0;ge<he&&(U.push(ae.length>Q+1?[]:0),!(ae.length<Q+1));ge++)C(U[ge],Q+1,ae)})(_,0,[3,11]),_})()}function Ar(){this.jb=a(3),this.Wc=o([4,8],It),this.Xc=o([4,17],It)}function bn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Kr(){this.ld=this.La=this.dd=this.tc=0}function tn(){this.Na=this.la=0}function xi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ji(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ti(){this.uc=this.M=this.Nb=0,this.wa=Array(new Kr),this.Y=0,this.ya=Array(new ji),this.aa=0,this.l=new De}function gs(){this.y=a(16),this.f=a(8),this.ea=a(8)}function el(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new Gt,this.Kc=new er,this.ed=new bn,this.Qa=new qt,this.Ic=this.$c=this.Aa=0,this.D=new ti,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,I),this.ia=0,this.pb=i(4,xi),this.Pa=new Ar,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gs),this.Hd=0,this.rb=Array(new tn),this.sb=0,this.wa=Array(new Kr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ji),this.L=this.aa=0,this.gd=o([4,2],Kr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function De(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kt(){var _=new el;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Td||(Td=Tr)),_}function ar(_,C,U){return _.a==0&&(_.a=C,_.sc=U,_.cb=0),0}function Sr(_,C,U){return 3<=U&&_[C+0]==157&&_[C+1]==1&&_[C+2]==42}function An(_,C){if(_==null)return 0;if(_.a=0,_.sc="OK",C==null)return ar(_,2,"null VP8Io passed to VP8GetHeaders()");var U=C.data,Q=C.w,ae=C.ha;if(4>ae)return ar(_,7,"Truncated header.");var he=U[Q+0]|U[Q+1]<<8|U[Q+2]<<16,ge=_.Od;if(ge.Rb=!(1&he),ge.td=he>>1&7,ge.yd=he>>4&1,ge.ub=he>>5,3<ge.td)return ar(_,3,"Incorrect keyframe parameters.");if(!ge.yd)return ar(_,4,"Frame not displayable.");Q+=3,ae-=3;var we=_.Kc;if(ge.Rb){if(7>ae)return ar(_,7,"cannot parse picture header");if(!Sr(U,Q,ae))return ar(_,3,"Bad code word");we.c=16383&(U[Q+4]<<8|U[Q+3]),we.Td=U[Q+4]>>6,we.i=16383&(U[Q+6]<<8|U[Q+5]),we.Ud=U[Q+6]>>6,Q+=7,ae-=7,_.za=we.c+15>>4,_.Ub=we.i+15>>4,C.width=we.c,C.height=we.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,s((he=_.Pa).jb,0,255,he.jb.length),e((he=_.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,s(he.Zb,0,0,he.Zb.length),s(he.Lb,0,0,he.Lb)}if(ge.ub>ae)return ar(_,7,"bad partition length");pe(he=_.m,U,Q,ge.ub),Q+=ge.ub,ae-=ge.ub,ge.Rb&&(we.Ld=xe(he),we.Kd=xe(he)),we=_.Qa;var _e,Ce=_.Pa;if(e(he!=null),e(we!=null),we.Cb=xe(he),we.Cb){if(we.Bb=xe(he),xe(he)){for(we.Fb=xe(he),_e=0;4>_e;++_e)we.Zb[_e]=xe(he)?te(he,7):0;for(_e=0;4>_e;++_e)we.Lb[_e]=xe(he)?te(he,6):0}if(we.Bb)for(_e=0;3>_e;++_e)Ce.jb[_e]=xe(he)?fe(he,8):255}else we.Bb=0;if(he.Ka)return ar(_,3,"cannot parse segment header");if((we=_.ed).zd=xe(he),we.Tb=fe(he,6),we.wb=fe(he,3),we.Pc=xe(he),we.Pc&&xe(he)){for(Ce=0;4>Ce;++Ce)xe(he)&&(we.vd[Ce]=te(he,6));for(Ce=0;4>Ce;++Ce)xe(he)&&(we.od[Ce]=te(he,6))}if(_.L=we.Tb==0?0:we.zd?1:2,he.Ka)return ar(_,3,"cannot parse filter header");var ze=ae;if(ae=_e=Q,Q=_e+ze,we=ze,_.Xb=(1<<fe(_.m,2))-1,ze<3*(Ce=_.Xb))U=7;else{for(_e+=3*Ce,we-=3*Ce,ze=0;ze<Ce;++ze){var Ze=U[ae+0]|U[ae+1]<<8|U[ae+2]<<16;Ze>we&&(Ze=we),pe(_.Jc[+ze],U,_e,Ze),_e+=Ze,we-=Ze,ae+=3}pe(_.Jc[+Ce],U,_e,we),U=_e<Q?0:5}if(U!=0)return ar(_,U,"cannot parse partitions");for(U=fe(_e=_.m,7),ae=xe(_e)?te(_e,4):0,Q=xe(_e)?te(_e,4):0,we=xe(_e)?te(_e,4):0,Ce=xe(_e)?te(_e,4):0,_e=xe(_e)?te(_e,4):0,ze=_.Qa,Ze=0;4>Ze;++Ze){if(ze.Cb){var Ie=ze.Zb[Ze];ze.Fb||(Ie+=U)}else{if(0<Ze){_.pb[Ze]=_.pb[0];continue}Ie=U}var qe=_.pb[Ze];qe.Sc[0]=Lf[kn(Ie+ae,127)],qe.Sc[1]=u0[kn(Ie+0,127)],qe.Eb[0]=2*Lf[kn(Ie+Q,127)],qe.Eb[1]=101581*u0[kn(Ie+we,127)]>>16,8>qe.Eb[1]&&(qe.Eb[1]=8),qe.Qc[0]=Lf[kn(Ie+Ce,117)],qe.Qc[1]=u0[kn(Ie+_e,127)],qe.lc=Ie+_e}if(!ge.Rb)return ar(_,4,"Not a key frame.");for(xe(he),ge=_.Pa,U=0;4>U;++U){for(ae=0;8>ae;++ae)for(Q=0;3>Q;++Q)for(we=0;11>we;++we)Ce=Ee(he,K4[U][ae][Q][we])?fe(he,8):Ky[U][ae][Q][we],ge.Wc[U][ae].Yb[Q][we]=Ce;for(ae=0;17>ae;++ae)ge.Xc[U][ae]=ge.Wc[U][Pg[ae]]}return _.kc=xe(he),_.kc&&(_.Bd=fe(he,8)),_.cb=1}function Tr(_,C,U,Q,ae,he,ge){var we=C[ae].Yb[U];for(U=0;16>ae;++ae){if(!Ee(_,we[U+0]))return ae;for(;!Ee(_,we[U+1]);)if(we=C[++ae].Yb[0],U=0,ae==16)return 16;var _e=C[ae+1].Yb;if(Ee(_,we[U+2])){var Ce=_,ze=0;if(Ee(Ce,(Ie=we)[(Ze=U)+3]))if(Ee(Ce,Ie[Ze+6])){for(we=0,Ze=2*(ze=Ee(Ce,Ie[Ze+8]))+(Ie=Ee(Ce,Ie[Ze+9+ze])),ze=0,Ie=Tg[Ze];Ie[we];++we)ze+=ze+Ee(Ce,Ie[we]);ze+=3+(8<<Ze)}else Ee(Ce,Ie[Ze+7])?(ze=7+2*Ee(Ce,165),ze+=Ee(Ce,145)):ze=5+Ee(Ce,159);else ze=Ee(Ce,Ie[Ze+4])?3+Ee(Ce,Ie[Ze+5]):2;we=_e[2]}else ze=1,we=_e[1];_e=ge+Ig[ae],0>(Ce=_).b&&ve(Ce);var Ze,Ie=Ce.b,qe=(Ze=Ce.Ca>>1)-(Ce.I>>Ie)>>31;--Ce.b,Ce.Ca+=qe,Ce.Ca|=1,Ce.I-=(Ze+1&qe)<<Ie,he[_e]=((ze^qe)-qe)*Q[(0<ae)+0]}return 16}function dn(_){var C=_.rb[_.sb-1];C.la=0,C.Na=0,s(_.zc,0,0,_.zc.length),_.ja=0}function Tn(_,C,U,Q,ae){ae=_[C+U+32*Q]+(ae>>3),_[C+U+32*Q]=-256&ae?0>ae?0:255:ae}function Ji(_,C,U,Q,ae,he){Tn(_,C,0,U,Q+ae),Tn(_,C,1,U,Q+he),Tn(_,C,2,U,Q-he),Tn(_,C,3,U,Q-ae)}function In(_){return(20091*_>>16)+_}function _n(_,C,U,Q){var ae,he=0,ge=a(16);for(ae=0;4>ae;++ae){var we=_[C+0]+_[C+8],_e=_[C+0]-_[C+8],Ce=(35468*_[C+4]>>16)-In(_[C+12]),ze=In(_[C+4])+(35468*_[C+12]>>16);ge[he+0]=we+ze,ge[he+1]=_e+Ce,ge[he+2]=_e-Ce,ge[he+3]=we-ze,he+=4,C++}for(ae=he=0;4>ae;++ae)we=(_=ge[he+0]+4)+ge[he+8],_e=_-ge[he+8],Ce=(35468*ge[he+4]>>16)-In(ge[he+12]),Tn(U,Q,0,0,we+(ze=In(ge[he+4])+(35468*ge[he+12]>>16))),Tn(U,Q,1,0,_e+Ce),Tn(U,Q,2,0,_e-Ce),Tn(U,Q,3,0,we-ze),he++,Q+=32}function Ws(_,C,U,Q){var ae=_[C+0]+4,he=35468*_[C+4]>>16,ge=In(_[C+4]),we=35468*_[C+1]>>16;Ji(U,Q,0,ae+ge,_=In(_[C+1]),we),Ji(U,Q,1,ae+he,_,we),Ji(U,Q,2,ae-he,_,we),Ji(U,Q,3,ae-ge,_,we)}function aa(_,C,U,Q,ae){_n(_,C,U,Q),ae&&_n(_,C+16,U,Q+4)}function Ri(_,C,U,Q){ca(_,C+0,U,Q,1),ca(_,C+32,U,Q+128,1)}function on(_,C,U,Q){var ae;for(_=_[C+0]+4,ae=0;4>ae;++ae)for(C=0;4>C;++C)Tn(U,Q,C,ae,_)}function Zi(_,C,U,Q){_[C+0]&&$l(_,C+0,U,Q),_[C+16]&&$l(_,C+16,U,Q+4),_[C+32]&&$l(_,C+32,U,Q+128),_[C+48]&&$l(_,C+48,U,Q+128+4)}function rn(_,C,U,Q){var ae,he=a(16);for(ae=0;4>ae;++ae){var ge=_[C+0+ae]+_[C+12+ae],we=_[C+4+ae]+_[C+8+ae],_e=_[C+4+ae]-_[C+8+ae],Ce=_[C+0+ae]-_[C+12+ae];he[0+ae]=ge+we,he[8+ae]=ge-we,he[4+ae]=Ce+_e,he[12+ae]=Ce-_e}for(ae=0;4>ae;++ae)ge=(_=he[0+4*ae]+3)+he[3+4*ae],we=he[1+4*ae]+he[2+4*ae],_e=he[1+4*ae]-he[2+4*ae],Ce=_-he[3+4*ae],U[Q+0]=ge+we>>3,U[Q+16]=Ce+_e>>3,U[Q+32]=ge-we>>3,U[Q+48]=Ce-_e>>3,Q+=64}function ia(_,C,U){var Q,ae=C-32,he=ao,ge=255-_[ae-1];for(Q=0;Q<U;++Q){var we,_e=he,Ce=ge+_[C-1];for(we=0;we<U;++we)_[C+we]=_e[Ce+_[ae+we]];C+=32}}function ku(_,C){ia(_,C,4)}function Su(_,C){ia(_,C,8)}function kf(_,C){ia(_,C,16)}function Sf(_,C){var U;for(U=0;16>U;++U)n(_,C+32*U,_,C-32,16)}function Nu(_,C){var U;for(U=16;0<U;--U)s(_,C,_[C-1],16),C+=32}function Ol(_,C,U){var Q;for(Q=0;16>Q;++Q)s(C,U+32*Q,_,16)}function yi(_,C){var U,Q=16;for(U=0;16>U;++U)Q+=_[C-1+32*U]+_[C+U-32];Ol(Q>>5,_,C)}function Oa(_,C){var U,Q=8;for(U=0;16>U;++U)Q+=_[C-1+32*U];Ol(Q>>4,_,C)}function vi(_,C){var U,Q=8;for(U=0;16>U;++U)Q+=_[C+U-32];Ol(Q>>4,_,C)}function eo(_,C){Ol(128,_,C)}function Lr(_,C,U){return _+2*C+U+2>>2}function bo(_,C){var U,Q=C-32;for(Q=new Uint8Array([Lr(_[Q-1],_[Q+0],_[Q+1]),Lr(_[Q+0],_[Q+1],_[Q+2]),Lr(_[Q+1],_[Q+2],_[Q+3]),Lr(_[Q+2],_[Q+3],_[Q+4])]),U=0;4>U;++U)n(_,C+32*U,Q,0,Q.length)}function pl(_,C){var U=_[C-1],Q=_[C-1+32],ae=_[C-1+64],he=_[C-1+96];ke(_,C+0,16843009*Lr(_[C-1-32],U,Q)),ke(_,C+32,16843009*Lr(U,Q,ae)),ke(_,C+64,16843009*Lr(Q,ae,he)),ke(_,C+96,16843009*Lr(ae,he,he))}function t0(_,C){var U,Q=4;for(U=0;4>U;++U)Q+=_[C+U-32]+_[C-1+32*U];for(Q>>=3,U=0;4>U;++U)s(_,C+32*U,Q,4)}function Nf(_,C){var U=_[C-1+0],Q=_[C-1+32],ae=_[C-1+64],he=_[C-1-32],ge=_[C+0-32],we=_[C+1-32],_e=_[C+2-32],Ce=_[C+3-32];_[C+0+96]=Lr(Q,ae,_[C-1+96]),_[C+1+96]=_[C+0+64]=Lr(U,Q,ae),_[C+2+96]=_[C+1+64]=_[C+0+32]=Lr(he,U,Q),_[C+3+96]=_[C+2+64]=_[C+1+32]=_[C+0+0]=Lr(ge,he,U),_[C+3+64]=_[C+2+32]=_[C+1+0]=Lr(we,ge,he),_[C+3+32]=_[C+2+0]=Lr(_e,we,ge),_[C+3+0]=Lr(Ce,_e,we)}function Gs(_,C){var U=_[C+1-32],Q=_[C+2-32],ae=_[C+3-32],he=_[C+4-32],ge=_[C+5-32],we=_[C+6-32],_e=_[C+7-32];_[C+0+0]=Lr(_[C+0-32],U,Q),_[C+1+0]=_[C+0+32]=Lr(U,Q,ae),_[C+2+0]=_[C+1+32]=_[C+0+64]=Lr(Q,ae,he),_[C+3+0]=_[C+2+32]=_[C+1+64]=_[C+0+96]=Lr(ae,he,ge),_[C+3+32]=_[C+2+64]=_[C+1+96]=Lr(he,ge,we),_[C+3+64]=_[C+2+96]=Lr(ge,we,_e),_[C+3+96]=Lr(we,_e,_e)}function Ml(_,C){var U=_[C-1+0],Q=_[C-1+32],ae=_[C-1+64],he=_[C-1-32],ge=_[C+0-32],we=_[C+1-32],_e=_[C+2-32],Ce=_[C+3-32];_[C+0+0]=_[C+1+64]=he+ge+1>>1,_[C+1+0]=_[C+2+64]=ge+we+1>>1,_[C+2+0]=_[C+3+64]=we+_e+1>>1,_[C+3+0]=_e+Ce+1>>1,_[C+0+96]=Lr(ae,Q,U),_[C+0+64]=Lr(Q,U,he),_[C+0+32]=_[C+1+96]=Lr(U,he,ge),_[C+1+32]=_[C+2+96]=Lr(he,ge,we),_[C+2+32]=_[C+3+96]=Lr(ge,we,_e),_[C+3+32]=Lr(we,_e,Ce)}function Ef(_,C){var U=_[C+0-32],Q=_[C+1-32],ae=_[C+2-32],he=_[C+3-32],ge=_[C+4-32],we=_[C+5-32],_e=_[C+6-32],Ce=_[C+7-32];_[C+0+0]=U+Q+1>>1,_[C+1+0]=_[C+0+64]=Q+ae+1>>1,_[C+2+0]=_[C+1+64]=ae+he+1>>1,_[C+3+0]=_[C+2+64]=he+ge+1>>1,_[C+0+32]=Lr(U,Q,ae),_[C+1+32]=_[C+0+96]=Lr(Q,ae,he),_[C+2+32]=_[C+1+96]=Lr(ae,he,ge),_[C+3+32]=_[C+2+96]=Lr(he,ge,we),_[C+3+64]=Lr(ge,we,_e),_[C+3+96]=Lr(we,_e,Ce)}function Bl(_,C){var U=_[C-1+0],Q=_[C-1+32],ae=_[C-1+64],he=_[C-1+96];_[C+0+0]=U+Q+1>>1,_[C+2+0]=_[C+0+32]=Q+ae+1>>1,_[C+2+32]=_[C+0+64]=ae+he+1>>1,_[C+1+0]=Lr(U,Q,ae),_[C+3+0]=_[C+1+32]=Lr(Q,ae,he),_[C+3+32]=_[C+1+64]=Lr(ae,he,he),_[C+3+64]=_[C+2+64]=_[C+0+96]=_[C+1+96]=_[C+2+96]=_[C+3+96]=he}function ml(_,C){var U=_[C-1+0],Q=_[C-1+32],ae=_[C-1+64],he=_[C-1+96],ge=_[C-1-32],we=_[C+0-32],_e=_[C+1-32],Ce=_[C+2-32];_[C+0+0]=_[C+2+32]=U+ge+1>>1,_[C+0+32]=_[C+2+64]=Q+U+1>>1,_[C+0+64]=_[C+2+96]=ae+Q+1>>1,_[C+0+96]=he+ae+1>>1,_[C+3+0]=Lr(we,_e,Ce),_[C+2+0]=Lr(ge,we,_e),_[C+1+0]=_[C+3+32]=Lr(U,ge,we),_[C+1+32]=_[C+3+64]=Lr(Q,U,ge),_[C+1+64]=_[C+3+96]=Lr(ae,Q,U),_[C+1+96]=Lr(he,ae,Q)}function Eu(_,C){var U;for(U=0;8>U;++U)n(_,C+32*U,_,C-32,8)}function wi(_,C){var U;for(U=0;8>U;++U)s(_,C,_[C-1],8),C+=32}function Li(_,C,U){var Q;for(Q=0;8>Q;++Q)s(C,U+32*Q,_,8)}function _o(_,C){var U,Q=8;for(U=0;8>U;++U)Q+=_[C+U-32]+_[C-1+32*U];Li(Q>>4,_,C)}function uc(_,C){var U,Q=4;for(U=0;8>U;++U)Q+=_[C+U-32];Li(Q>>3,_,C)}function ts(_,C){var U,Q=4;for(U=0;8>U;++U)Q+=_[C-1+32*U];Li(Q>>3,_,C)}function bd(_,C){Li(128,_,C)}function Vl(_,C,U){var Q=_[C-U],ae=_[C+0],he=3*(ae-Q)+gc[1020+_[C-2*U]-_[C+U]],ge=jf[112+(he+4>>3)];_[C-U]=ao[255+Q+jf[112+(he+3>>3)]],_[C+0]=ao[255+ae-ge]}function tl(_,C,U,Q){var ae=_[C+0],he=_[C+U];return yl[255+_[C-2*U]-_[C-U]]>Q||yl[255+he-ae]>Q}function dc(_,C,U,Q){return 4*yl[255+_[C-U]-_[C+0]]+yl[255+_[C-2*U]-_[C+U]]<=Q}function fc(_,C,U,Q,ae){var he=_[C-3*U],ge=_[C-2*U],we=_[C-U],_e=_[C+0],Ce=_[C+U],ze=_[C+2*U],Ze=_[C+3*U];return 4*yl[255+we-_e]+yl[255+ge-Ce]>Q?0:yl[255+_[C-4*U]-he]<=ae&&yl[255+he-ge]<=ae&&yl[255+ge-we]<=ae&&yl[255+Ze-ze]<=ae&&yl[255+ze-Ce]<=ae&&yl[255+Ce-_e]<=ae}function bi(_,C,U,Q){var ae=2*Q+1;for(Q=0;16>Q;++Q)dc(_,C+Q,U,ae)&&Vl(_,C+Q,U)}function gl(_,C,U,Q){var ae=2*Q+1;for(Q=0;16>Q;++Q)dc(_,C+Q*U,1,ae)&&Vl(_,C+Q*U,1)}function ri(_,C,U,Q){var ae;for(ae=3;0<ae;--ae)bi(_,C+=4*U,U,Q)}function Wc(_,C,U,Q){var ae;for(ae=3;0<ae;--ae)gl(_,C+=4,U,Q)}function ni(_,C,U,Q,ae,he,ge,we){for(he=2*he+1;0<ae--;){if(fc(_,C,U,he,ge))if(tl(_,C,U,we))Vl(_,C,U);else{var _e=_,Ce=C,ze=U,Ze=_e[Ce-2*ze],Ie=_e[Ce-ze],qe=_e[Ce+0],Ye=_e[Ce+ze],vt=_e[Ce+2*ze],tt=27*(yt=gc[1020+3*(qe-Ie)+gc[1020+Ze-Ye]])+63>>7,xt=18*yt+63>>7,yt=9*yt+63>>7;_e[Ce-3*ze]=ao[255+_e[Ce-3*ze]+yt],_e[Ce-2*ze]=ao[255+Ze+xt],_e[Ce-ze]=ao[255+Ie+tt],_e[Ce+0]=ao[255+qe-tt],_e[Ce+ze]=ao[255+Ye-xt],_e[Ce+2*ze]=ao[255+vt-yt]}C+=Q}}function Ma(_,C,U,Q,ae,he,ge,we){for(he=2*he+1;0<ae--;){if(fc(_,C,U,he,ge))if(tl(_,C,U,we))Vl(_,C,U);else{var _e=_,Ce=C,ze=U,Ze=_e[Ce-ze],Ie=_e[Ce+0],qe=_e[Ce+ze],Ye=jf[112+(4+(vt=3*(Ie-Ze))>>3)],vt=jf[112+(vt+3>>3)],tt=Ye+1>>1;_e[Ce-2*ze]=ao[255+_e[Ce-2*ze]+tt],_e[Ce-ze]=ao[255+Ze+vt],_e[Ce+0]=ao[255+Ie-Ye],_e[Ce+ze]=ao[255+qe-tt]}C+=Q}}function V(_,C,U,Q,ae,he){ni(_,C,U,1,16,Q,ae,he)}function re(_,C,U,Q,ae,he){ni(_,C,1,U,16,Q,ae,he)}function Te(_,C,U,Q,ae,he){var ge;for(ge=3;0<ge;--ge)Ma(_,C+=4*U,U,1,16,Q,ae,he)}function Ve(_,C,U,Q,ae,he){var ge;for(ge=3;0<ge;--ge)Ma(_,C+=4,1,U,16,Q,ae,he)}function We(_,C,U,Q,ae,he,ge,we){ni(_,C,ae,1,8,he,ge,we),ni(U,Q,ae,1,8,he,ge,we)}function kt(_,C,U,Q,ae,he,ge,we){ni(_,C,1,ae,8,he,ge,we),ni(U,Q,1,ae,8,he,ge,we)}function Tt(_,C,U,Q,ae,he,ge,we){Ma(_,C+4*ae,ae,1,8,he,ge,we),Ma(U,Q+4*ae,ae,1,8,he,ge,we)}function sr(_,C,U,Q,ae,he,ge,we){Ma(_,C+4,1,ae,8,he,ge,we),Ma(U,Q+4,1,ae,8,he,ge,we)}function cr(){this.ba=new an,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Pr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ur(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pn(){this.ua=0,this.Wa=new Ae,this.vb=new Ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new M}function xs(){this.xb=this.a=0,this.l=new De,this.ca=new an,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pn,this.ab=0,this.gc=i(4,Ur),this.Oc=0}function Ns(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new De,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bn(_,C,U,Q,ae,he,ge){for(_=_==null?0:_[C+0],C=0;C<ge;++C)ae[he+C]=_+U[Q+C]&255,_=ae[he+C]}function Ks(_,C,U,Q,ae,he,ge){var we;if(_==null)Bn(null,null,U,Q,ae,he,ge);else for(we=0;we<ge;++we)ae[he+we]=_[C+we]+U[Q+we]&255}function rs(_,C,U,Q,ae,he,ge){if(_==null)Bn(null,null,U,Q,ae,he,ge);else{var we,_e=_[C+0],Ce=_e,ze=_e;for(we=0;we<ge;++we)Ce=ze+(_e=_[C+we])-Ce,ze=U[Q+we]+(-256&Ce?0>Ce?0:255:Ce)&255,Ce=_e,ae[he+we]=ze}}function wa(_,C,U,Q){var ae=C.width,he=C.o;if(e(_!=null&&C!=null),0>U||0>=Q||U+Q>he)return null;if(!_.Cc){if(_.ga==null){var ge;if(_.ga=new Ns,(ge=_.ga==null)||(ge=C.width*C.o,e(_.Gb.length==0),_.Gb=a(ge),_.Uc=0,_.Gb==null?ge=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,ge=1),ge=!ge),!ge){ge=_.ga;var we=_.Fa,_e=_.P,Ce=_.qc,ze=_.mb,Ze=_.nb,Ie=_e+1,qe=Ce-1,Ye=ge.l;if(e(we!=null&&ze!=null&&C!=null),Di[0]=null,Di[1]=Bn,Di[2]=Ks,Di[3]=rs,ge.ca=ze,ge.tb=Ze,ge.c=C.width,ge.i=C.height,e(0<ge.c&&0<ge.i),1>=Ce)C=0;else if(ge.$a=3&we[_e+0],ge.Z=we[_e+0]>>2&3,ge.Lc=we[_e+0]>>4&3,_e=we[_e+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||_e)C=0;else if(Ye.put=vr,Ye.ac=Hs,Ye.bc=pn,Ye.ma=ge,Ye.width=C.width,Ye.height=C.height,Ye.Da=C.Da,Ye.v=C.v,Ye.va=C.va,Ye.j=C.j,Ye.o=C.o,ge.$a)e:{e(ge.$a==1),C=Xe();t:for(;;){if(C==null){C=0;break e}if(e(ge!=null),ge.mc=C,C.c=ge.c,C.i=ge.i,C.l=ge.l,C.l.ma=ge,C.l.width=ge.c,C.l.height=ge.i,C.a=0,H(C.m,we,Ie,qe),!Qe(ge.c,ge.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&Ne(C.s)?(ge.ic=1,we=C.c*C.i,C.Ta=null,C.Ua=0,C.V=a(we),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(ge.ic=0,C=rt(C,ge.c)),!C))break t;C=1;break e}ge.mc=null,C=0}else C=qe>=ge.c*ge.i;ge=!C}if(ge)return null;_.ga.Lc!=1?_.Ga=0:Q=he-U}e(_.ga!=null),e(U+Q<=he);e:{if(C=(we=_.ga).c,he=we.l.o,we.$a==0){if(Ie=_.rc,qe=_.Vc,Ye=_.Fa,_e=_.P+1+U*C,Ce=_.mb,ze=_.nb+U*C,e(_e<=_.P+_.qc),we.Z!=0)for(e(Di[we.Z]!=null),ge=0;ge<Q;++ge)Di[we.Z](Ie,qe,Ye,_e,Ce,ze,C),Ie=Ce,qe=ze,ze+=C,_e+=C;else for(ge=0;ge<Q;++ge)n(Ce,ze,Ye,_e,C),Ie=Ce,qe=ze,ze+=C,_e+=C;_.rc=Ie,_.Vc=qe}else{if(e(we.mc!=null),C=U+Q,e((ge=we.mc)!=null),e(C<=ge.i),ge.C>=C)C=1;else if(we.ic||oa(),we.ic){we=ge.V,Ie=ge.Ba,qe=ge.c;var vt=ge.i,tt=(Ye=1,_e=ge.$/qe,Ce=ge.$%qe,ze=ge.m,Ze=ge.s,ge.$),xt=qe*vt,yt=qe*C,St=Ze.wc,Et=tt<yt?ce(Ze,Ce,_e):null;e(tt<=xt),e(C<=vt),e(Ne(Ze));t:for(;;){for(;!ze.h&&tt<yt;){if(Ce&St||(Et=ce(Ze,Ce,_e)),e(Et!=null),le(ze),256>(vt=Ln(Et.G[0],Et.H[0],ze)))we[Ie+tt]=vt,++tt,++Ce>=qe&&(Ce=0,++_e<=C&&!(_e%16)&&Le(ge,_e));else{if(!(280>vt)){Ye=0;break t}vt=Zn(vt-256,ze);var _r,ur=Ln(Et.G[4],Et.H[4],ze);if(le(ze),!(tt>=(ur=Os(qe,ur=Zn(ur,ze)))&&xt-tt>=vt)){Ye=0;break t}for(_r=0;_r<vt;++_r)we[Ie+tt+_r]=we[Ie+tt+_r-ur];for(tt+=vt,Ce+=vt;Ce>=qe;)Ce-=qe,++_e<=C&&!(_e%16)&&Le(ge,_e);tt<yt&&Ce&St&&(Et=ce(Ze,Ce,_e))}e(ze.h==J(ze))}Le(ge,_e>C?C:_e);break t}!Ye||ze.h&&tt<xt?(Ye=0,ge.a=ze.h?5:3):ge.$=tt,C=Ye}else C=Ge(ge,ge.V,ge.Ba,ge.c,ge.i,C,At);if(!C){Q=0;break e}}U+Q>=he&&(_.Cc=1),Q=1}if(!Q)return null;if(_.Cc&&((Q=_.ga)!=null&&(Q.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+U*ae}function xl(_,C,U,Q,ae,he){for(;0<ae--;){var ge,we=_,_e=C+(U?1:0),Ce=_,ze=C+(U?0:3);for(ge=0;ge<Q;++ge){var Ze=Ce[ze+4*ge];Ze!=255&&(Ze*=32897,we[_e+4*ge+0]=we[_e+4*ge+0]*Ze>>23,we[_e+4*ge+1]=we[_e+4*ge+1]*Ze>>23,we[_e+4*ge+2]=we[_e+4*ge+2]*Ze>>23)}C+=he}}function Ul(_,C,U,Q,ae){for(;0<Q--;){var he;for(he=0;he<U;++he){var ge=_[C+2*he+0],we=15&(Ce=_[C+2*he+1]),_e=4369*we,Ce=(240&Ce|Ce>>4)*_e>>16;_[C+2*he+0]=(240&ge|ge>>4)*_e>>16&240|(15&ge|ge<<4)*_e>>16>>4&15,_[C+2*he+1]=240&Ce|we}C+=ae}}function _d(_,C,U,Q,ae,he,ge,we){var _e,Ce,ze=255;for(Ce=0;Ce<ae;++Ce){for(_e=0;_e<Q;++_e){var Ze=_[C+_e];he[ge+4*_e]=Ze,ze&=Ze}C+=U,ge+=we}return ze!=255}function Gc(_,C,U,Q,ae){var he;for(he=0;he<ae;++he)U[Q+he]=_[C+he]>>8}function oa(){Ed=xl,_g=Ul,s0=_d,kg=Gc}function ko(_,C,U){N[_]=function(Q,ae,he,ge,we,_e,Ce,ze,Ze,Ie,qe,Ye,vt,tt,xt,yt,St){var Et,_r=St-1>>1,ur=we[_e+0]|Ce[ze+0]<<16,Jr=Ze[Ie+0]|qe[Ye+0]<<16;e(Q!=null);var mr=3*ur+Jr+131074>>2;for(C(Q[ae+0],255&mr,mr>>16,vt,tt),he!=null&&(mr=3*Jr+ur+131074>>2,C(he[ge+0],255&mr,mr>>16,xt,yt)),Et=1;Et<=_r;++Et){var Sn=we[_e+Et]|Ce[ze+Et]<<16,Xs=Ze[Ie+Et]|qe[Ye+Et]<<16,nn=ur+Sn+Jr+Xs+524296,dr=nn+2*(Sn+Jr)>>3;mr=dr+ur>>1,ur=(nn=nn+2*(ur+Xs)>>3)+Sn>>1,C(Q[ae+2*Et-1],255&mr,mr>>16,vt,tt+(2*Et-1)*U),C(Q[ae+2*Et-0],255&ur,ur>>16,vt,tt+(2*Et-0)*U),he!=null&&(mr=nn+Jr>>1,ur=dr+Xs>>1,C(he[ge+2*Et-1],255&mr,mr>>16,xt,yt+(2*Et-1)*U),C(he[ge+2*Et+0],255&ur,ur>>16,xt,yt+(2*Et+0)*U)),ur=Sn,Jr=Xs}1&St||(mr=3*ur+Jr+131074>>2,C(Q[ae+St-1],255&mr,mr>>16,vt,tt+(St-1)*U),he!=null&&(mr=3*Jr+ur+131074>>2,C(he[ge+St-1],255&mr,mr>>16,xt,yt+(St-1)*U)))}}function Cu(){To[Xp]=Y4,To[ju]=Ru,To[qy]=X4,To[a0]=Df,To[i0]=Id,To[is]=d0,To[Qp]=jg,To[Rf]=Ru,To[Cd]=Df,To[o0]=Id,To[l0]=d0}function to(_){return _&-16384?0>_?0:255:_>>Lu}function k(_,C){return to((19077*_>>8)+(26149*C>>8)-14234)}function q(_,C,U){return to((19077*_>>8)-(6419*C>>8)-(13320*U>>8)+8708)}function ee(_,C){return to((19077*_>>8)+(33050*C>>8)-17685)}function be(_,C,U,Q,ae){Q[ae+0]=k(_,U),Q[ae+1]=q(_,C,U),Q[ae+2]=ee(_,C)}function Ke(_,C,U,Q,ae){Q[ae+0]=ee(_,C),Q[ae+1]=q(_,C,U),Q[ae+2]=k(_,U)}function mt(_,C,U,Q,ae){var he=q(_,C,U);C=he<<3&224|ee(_,C)>>3,Q[ae+0]=248&k(_,U)|he>>5,Q[ae+1]=C}function zt(_,C,U,Q,ae){var he=240&ee(_,C)|15;Q[ae+0]=240&k(_,U)|q(_,C,U)>>4,Q[ae+1]=he}function Un(_,C,U,Q,ae){Q[ae+0]=255,be(_,C,U,Q,ae+1)}function Ps(_,C,U,Q,ae){Ke(_,C,U,Q,ae),Q[ae+3]=255}function mn(_,C,U,Q,ae){be(_,C,U,Q,ae),Q[ae+3]=255}function kn(_,C){return 0>_?0:_>C?C:_}function $n(_,C,U){N[_]=function(Q,ae,he,ge,we,_e,Ce,ze,Ze){for(var Ie=ze+(-2&Ze)*U;ze!=Ie;)C(Q[ae+0],he[ge+0],we[_e+0],Ce,ze),C(Q[ae+1],he[ge+0],we[_e+0],Ce,ze+U),ae+=2,++ge,++_e,ze+=2*U;1&Ze&&C(Q[ae+0],he[ge+0],we[_e+0],Ce,ze)}}function Fi(_,C,U){return U==0?_==0?C==0?6:5:C==0?4:0:U}function _i(_,C,U,Q,ae){switch(_>>>30){case 3:ca(C,U,Q,ae,0);break;case 2:Ba(C,U,Q,ae);break;case 1:$l(C,U,Q,ae)}}function So(_,C){var U,Q,ae=C.M,he=C.Nb,ge=_.oc,we=_.pc+40,_e=_.oc,Ce=_.pc+584,ze=_.oc,Ze=_.pc+600;for(U=0;16>U;++U)ge[we+32*U-1]=129;for(U=0;8>U;++U)_e[Ce+32*U-1]=129,ze[Ze+32*U-1]=129;for(0<ae?ge[we-1-32]=_e[Ce-1-32]=ze[Ze-1-32]=129:(s(ge,we-32-1,127,21),s(_e,Ce-32-1,127,9),s(ze,Ze-32-1,127,9)),Q=0;Q<_.za;++Q){var Ie=C.ya[C.aa+Q];if(0<Q){for(U=-1;16>U;++U)n(ge,we+32*U-4,ge,we+32*U+12,4);for(U=-1;8>U;++U)n(_e,Ce+32*U-4,_e,Ce+32*U+4,4),n(ze,Ze+32*U-4,ze,Ze+32*U+4,4)}var qe=_.Gd,Ye=_.Hd+Q,vt=Ie.ad,tt=Ie.Hc;if(0<ae&&(n(ge,we-32,qe[Ye].y,0,16),n(_e,Ce-32,qe[Ye].f,0,8),n(ze,Ze-32,qe[Ye].ea,0,8)),Ie.Za){var xt=ge,yt=we-32+16;for(0<ae&&(Q>=_.za-1?s(xt,yt,qe[Ye].y[15],4):n(xt,yt,qe[Ye+1].y,0,4)),U=0;4>U;U++)xt[yt+128+U]=xt[yt+256+U]=xt[yt+384+U]=xt[yt+0+U];for(U=0;16>U;++U,tt<<=2)xt=ge,yt=we+Rg[U],vl[Ie.Ob[U]](xt,yt),_i(tt,vt,16*+U,xt,yt)}else if(xt=Fi(Q,ae,Ie.Ob[0]),io[xt](ge,we),tt!=0)for(U=0;16>U;++U,tt<<=2)_i(tt,vt,16*+U,ge,we+Rg[U]);for(U=Ie.Gc,xt=Fi(Q,ae,Ie.Dd),Ao[xt](_e,Ce),Ao[xt](ze,Ze),tt=vt,xt=_e,yt=Ce,255&(Ie=0|U)&&(170&Ie?mc(tt,256,xt,yt):If(tt,256,xt,yt)),Ie=ze,tt=Ze,255&(U>>=8)&&(170&U?mc(vt,320,Ie,tt):If(vt,320,Ie,tt)),ae<_.Ub-1&&(n(qe[Ye].y,0,ge,we+480,16),n(qe[Ye].f,0,_e,Ce+224,8),n(qe[Ye].ea,0,ze,Ze+224,8)),U=8*he*_.B,qe=_.sa,Ye=_.ta+16*Q+16*he*_.R,vt=_.qa,Ie=_.ra+8*Q+U,tt=_.Ha,xt=_.Ia+8*Q+U,U=0;16>U;++U)n(qe,Ye+U*_.R,ge,we+32*U,16);for(U=0;8>U;++U)n(vt,Ie+U*_.B,_e,Ce+32*U,8),n(tt,xt+U*_.B,ze,Ze+32*U,8)}}function zl(_,C,U,Q,ae,he,ge,we,_e){var Ce=[0],ze=[0],Ze=0,Ie=_e!=null?_e.kd:0,qe=_e??new Pr;if(_==null||12>U)return 7;qe.data=_,qe.w=C,qe.ha=U,C=[C],U=[U],qe.gb=[qe.gb];e:{var Ye=C,vt=U,tt=qe.gb;if(e(_!=null),e(vt!=null),e(tt!=null),tt[0]=0,12<=vt[0]&&!r(_,Ye[0],"RIFF")){if(r(_,Ye[0]+8,"WEBP")){tt=3;break e}var xt=Pe(_,Ye[0]+4);if(12>xt||4294967286<xt){tt=3;break e}if(Ie&&xt>vt[0]-8){tt=7;break e}tt[0]=xt,Ye[0]+=12,vt[0]-=12}tt=0}if(tt!=0)return tt;for(xt=0<qe.gb[0],U=U[0];;){e:{var yt=_;vt=C,tt=U;var St=Ce,Et=ze,_r=Ye=[0];if((mr=Ze=[Ze])[0]=0,8>tt[0])tt=7;else{if(!r(yt,vt[0],"VP8X")){if(Pe(yt,vt[0]+4)!=10){tt=3;break e}if(18>tt[0]){tt=7;break e}var ur=Pe(yt,vt[0]+8),Jr=1+Fe(yt,vt[0]+12);if(2147483648<=Jr*(yt=1+Fe(yt,vt[0]+15))){tt=3;break e}_r!=null&&(_r[0]=ur),St!=null&&(St[0]=Jr),Et!=null&&(Et[0]=yt),vt[0]+=18,tt[0]-=18,mr[0]=1}tt=0}}if(Ze=Ze[0],Ye=Ye[0],tt!=0)return tt;if(vt=!!(2&Ye),!xt&&Ze)return 3;if(he!=null&&(he[0]=!!(16&Ye)),ge!=null&&(ge[0]=vt),we!=null&&(we[0]=0),ge=Ce[0],Ye=ze[0],Ze&&vt&&_e==null){tt=0;break}if(4>U){tt=7;break}if(xt&&Ze||!xt&&!Ze&&!r(_,C[0],"ALPH")){U=[U],qe.na=[qe.na],qe.P=[qe.P],qe.Sa=[qe.Sa];e:{ur=_,tt=C,xt=U;var mr=qe.gb;St=qe.na,Et=qe.P,_r=qe.Sa,Jr=22,e(ur!=null),e(xt!=null),yt=tt[0];var Sn=xt[0];for(e(St!=null),e(_r!=null),St[0]=null,Et[0]=null,_r[0]=0;;){if(tt[0]=yt,xt[0]=Sn,8>Sn){tt=7;break e}var Xs=Pe(ur,yt+4);if(4294967286<Xs){tt=3;break e}var nn=8+Xs+1&-2;if(Jr+=nn,0<mr&&Jr>mr){tt=3;break e}if(!r(ur,yt,"VP8 ")||!r(ur,yt,"VP8L")){tt=0;break e}if(Sn[0]<nn){tt=7;break e}r(ur,yt,"ALPH")||(St[0]=ur,Et[0]=yt+8,_r[0]=Xs),yt+=nn,Sn-=nn}}if(U=U[0],qe.na=qe.na[0],qe.P=qe.P[0],qe.Sa=qe.Sa[0],tt!=0)break}U=[U],qe.Ja=[qe.Ja],qe.xa=[qe.xa];e:if(mr=_,tt=C,xt=U,St=qe.gb[0],Et=qe.Ja,_r=qe.xa,ur=tt[0],yt=!r(mr,ur,"VP8 "),Jr=!r(mr,ur,"VP8L"),e(mr!=null),e(xt!=null),e(Et!=null),e(_r!=null),8>xt[0])tt=7;else{if(yt||Jr){if(mr=Pe(mr,ur+4),12<=St&&mr>St-12){tt=3;break e}if(Ie&&mr>xt[0]-8){tt=7;break e}Et[0]=mr,tt[0]+=8,xt[0]-=8,_r[0]=Jr}else _r[0]=5<=xt[0]&&mr[ur+0]==47&&!(mr[ur+4]>>5),Et[0]=xt[0];tt=0}if(U=U[0],qe.Ja=qe.Ja[0],qe.xa=qe.xa[0],C=C[0],tt!=0)break;if(4294967286<qe.Ja)return 3;if(we==null||vt||(we[0]=qe.xa?2:1),ge=[ge],Ye=[Ye],qe.xa){if(5>U){tt=7;break}we=ge,Ie=Ye,vt=he,_==null||5>U?_=0:5<=U&&_[C+0]==47&&!(_[C+4]>>5)?(xt=[0],mr=[0],St=[0],H(Et=new z,_,C,U),ei(Et,xt,mr,St)?(we!=null&&(we[0]=xt[0]),Ie!=null&&(Ie[0]=mr[0]),vt!=null&&(vt[0]=St[0]),_=1):_=0):_=0}else{if(10>U){tt=7;break}we=Ye,_==null||10>U||!Sr(_,C+3,U-3)?_=0:(Ie=_[C+0]|_[C+1]<<8|_[C+2]<<16,vt=16383&(_[C+7]<<8|_[C+6]),_=16383&(_[C+9]<<8|_[C+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=qe.Ja||!vt||!_?_=0:(ge&&(ge[0]=vt),we&&(we[0]=_),_=1))}if(!_||(ge=ge[0],Ye=Ye[0],Ze&&(Ce[0]!=ge||ze[0]!=Ye)))return 3;_e!=null&&(_e[0]=qe,_e.offset=C-_e.w,e(4294967286>C-_e.w),e(_e.offset==_e.ha-U));break}return tt==0||tt==7&&Ze&&_e==null?(he!=null&&(he[0]|=qe.na!=null&&0<qe.na.length),Q!=null&&(Q[0]=ge),ae!=null&&(ae[0]=Ye),0):tt}function ro(_,C,U){var Q=C.width,ae=C.height,he=0,ge=0,we=Q,_e=ae;if(C.Da=_!=null&&0<_.Da,C.Da&&(we=_.cd,_e=_.bd,he=_.v,ge=_.j,11>U||(he&=-2,ge&=-2),0>he||0>ge||0>=we||0>=_e||he+we>Q||ge+_e>ae))return 0;if(C.v=he,C.j=ge,C.va=he+we,C.o=ge+_e,C.U=we,C.T=_e,C.da=_!=null&&0<_.da,C.da){if(!Be(we,_e,U=[_.ib],he=[_.hb]))return 0;C.ib=U[0],C.hb=he[0]}return C.ob=_!=null&&_.ob,C.Kb=_==null||!_.Sd,C.da&&(C.ob=C.ib<3*Q/4&&C.hb<3*ae/4,C.Kb=0),1}function no(_){if(_==null)return 2;if(11>_.S){var C=_.f.RGBA;C.fb+=(_.height-1)*C.A,C.A=-C.A}else C=_.f.kb,_=_.height,C.O+=(_-1)*C.fa,C.fa=-C.fa,C.N+=(_-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(_-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(_-1)*C.lb,C.lb=-C.lb);return 0}function Au(_,C,U,Q){if(Q==null||0>=_||0>=C)return 2;if(U!=null){if(U.Da){var ae=U.cd,he=U.bd,ge=-2&U.v,we=-2&U.j;if(0>ge||0>we||0>=ae||0>=he||ge+ae>_||we+he>C)return 2;_=ae,C=he}if(U.da){if(!Be(_,C,ae=[U.ib],he=[U.hb]))return 2;_=ae[0],C=he[0]}}Q.width=_,Q.height=C;e:{var _e=Q.width,Ce=Q.height;if(_=Q.S,0>=_e||0>=Ce||!(_>=Xp&&13>_))_=2;else{if(0>=Q.Rd&&Q.sd==null){ge=he=ae=C=0;var ze=(we=_e*f0[_])*Ce;if(11>_||(he=(Ce+1)/2*(C=(_e+1)/2),_==12&&(ge=(ae=_e)*Ce)),(Ce=a(ze+2*he+ge))==null){_=1;break e}Q.sd=Ce,11>_?((_e=Q.f.RGBA).eb=Ce,_e.fb=0,_e.A=we,_e.size=ze):((_e=Q.f.kb).y=Ce,_e.O=0,_e.fa=we,_e.Fd=ze,_e.f=Ce,_e.N=0+ze,_e.Ab=C,_e.Cd=he,_e.ea=Ce,_e.W=0+ze+he,_e.Db=C,_e.Ed=he,_==12&&(_e.F=Ce,_e.J=0+ze+2*he),_e.Tc=ge,_e.lb=ae)}if(C=1,ae=Q.S,he=Q.width,ge=Q.height,ae>=Xp&&13>ae)if(11>ae)_=Q.f.RGBA,C&=(we=Math.abs(_.A))*(ge-1)+he<=_.size,C&=we>=he*f0[ae],C&=_.eb!=null;else{_=Q.f.kb,we=(he+1)/2,ze=(ge+1)/2,_e=Math.abs(_.fa),Ce=Math.abs(_.Ab);var Ze=Math.abs(_.Db),Ie=Math.abs(_.lb),qe=Ie*(ge-1)+he;C&=_e*(ge-1)+he<=_.Fd,C&=Ce*(ze-1)+we<=_.Cd,C=(C&=Ze*(ze-1)+we<=_.Ed)&_e>=he&Ce>=we&Ze>=we,C&=_.y!=null,C&=_.f!=null,C&=_.ea!=null,ae==12&&(C&=Ie>=he,C&=qe<=_.Tc,C&=_.F!=null)}else C=0;_=C?0:2}}return _!=0||U!=null&&U.fd&&(_=no(Q)),_}var so=64,Tu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],r0=24,Iu=32,Ys=8,Wp=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(_){return _},N.Predictor2=function(_,C,U){return C[U+0]},N.Predictor3=function(_,C,U){return C[U+1]},N.Predictor4=function(_,C,U){return C[U-1]},N.Predictor5=function(_,C,U){return Ct(Ct(_,C[U+1]),C[U+0])},N.Predictor6=function(_,C,U){return Ct(_,C[U-1])},N.Predictor7=function(_,C,U){return Ct(_,C[U+0])},N.Predictor8=function(_,C,U){return Ct(C[U-1],C[U+0])},N.Predictor9=function(_,C,U){return Ct(C[U+0],C[U+1])},N.Predictor10=function(_,C,U){return Ct(Ct(_,C[U-1]),Ct(C[U+0],C[U+1]))},N.Predictor11=function(_,C,U){var Q=C[U+0];return 0>=ot(Q>>24&255,_>>24&255,(C=C[U-1])>>24&255)+ot(Q>>16&255,_>>16&255,C>>16&255)+ot(Q>>8&255,_>>8&255,C>>8&255)+ot(255&Q,255&_,255&C)?Q:_},N.Predictor12=function(_,C,U){var Q=C[U+0];return(Nt((_>>24&255)+(Q>>24&255)-((C=C[U-1])>>24&255))<<24|Nt((_>>16&255)+(Q>>16&255)-(C>>16&255))<<16|Nt((_>>8&255)+(Q>>8&255)-(C>>8&255))<<8|Nt((255&_)+(255&Q)-(255&C)))>>>0},N.Predictor13=function(_,C,U){var Q=C[U-1];return(_t((_=Ct(_,C[U+0]))>>24&255,Q>>24&255)<<24|_t(_>>16&255,Q>>16&255)<<16|_t(_>>8&255,Q>>8&255)<<8|_t(255&_,255&Q))>>>0};var No=N.PredictorAdd0;N.PredictorAdd1=Bt,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Eo=N.PredictorAdd2;wt("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),wt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Cf,Pu=N.ColorIndexInverseTransform,Af=N.MapARGB,kd=N.VP8LColorIndexInverseTransformAlpha,Kc=N.MapAlpha,Yc=N.VP8LPredictorsAdd=[];Yc.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var hc,Tf,Co,pc,ys,vs,la,ca,Ba,mc,$l,If,vg,wg,Gp,zy,$y,Sd,Kp,Pf,Yp,bg,n0,Nd,Ed,_g,s0,kg,Sg=a(511),Ng=a(2041),Eg=a(225),Cg=a(767),Ag=0,gc=Ng,jf=Eg,ao=Cg,yl=Sg,Xp=0,ju=1,qy=2,a0=3,i0=4,is=5,Qp=6,Rf=7,Cd=8,o0=9,l0=10,c0=[2,3,7],Jp=[3,3,11],Ad=[280,256,256,256,40],Hy=[0,1,1,1,0],H4=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],W4=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Wy=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zp=8,Lf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],u0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Td=null,Tg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ig=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ky=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],G4=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],K4=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Pg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],io=[],vl=[],Ao=[],xc=1,Ff=2,Di=[],To=[];ko("UpsampleRgbLinePair",be,3),ko("UpsampleBgrLinePair",Ke,3),ko("UpsampleRgbaLinePair",mn,4),ko("UpsampleBgraLinePair",Ps,4),ko("UpsampleArgbLinePair",Un,4),ko("UpsampleRgba4444LinePair",zt,2),ko("UpsampleRgb565LinePair",mt,2);var Y4=N.UpsampleRgbLinePair,X4=N.UpsampleBgrLinePair,Ru=N.UpsampleRgbaLinePair,Df=N.UpsampleBgraLinePair,Id=N.UpsampleArgbLinePair,d0=N.UpsampleRgba4444LinePair,jg=N.UpsampleRgb565LinePair,Xc=16,ql=1<<Xc-1,es=-227,ns=482,Lu=6,ki=0,Io=a(256),Pd=a(256),Of=a(256),Po=a(256),em=a(ns-es),Yy=a(ns-es);$n("YuvToRgbRow",be,3),$n("YuvToBgrRow",Ke,3),$n("YuvToRgbaRow",mn,4),$n("YuvToBgraRow",Ps,4),$n("YuvToArgbRow",Un,4),$n("YuvToRgba4444Row",zt,2),$n("YuvToRgb565Row",mt,2);var Rg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],jd=[0,2,8],Xy=[8,7,6,4,4,2,2,2,1,1,1,1],Qc=1;this.WebPDecodeRGBA=function(_,C,U,Q,ae){var he=ju,ge=new cr,we=new an;ge.ba=we,we.S=he,we.width=[we.width],we.height=[we.height];var _e=we.width,Ce=we.height,ze=new kr;if(ze==null||_==null)var Ze=2;else e(ze!=null),Ze=zl(_,C,U,ze.width,ze.height,ze.Pd,ze.Qd,ze.format,null);if(Ze!=0?_e=0:(_e!=null&&(_e[0]=ze.width[0]),Ce!=null&&(Ce[0]=ze.height[0]),_e=1),_e){we.width=we.width[0],we.height=we.height[0],Q!=null&&(Q[0]=we.width),ae!=null&&(ae[0]=we.height);e:{if(Q=new De,(ae=new Pr).data=_,ae.w=C,ae.ha=U,ae.kd=1,C=[0],e(ae!=null),((_=zl(ae.data,ae.w,ae.ha,null,null,null,C,null,ae))==0||_==7)&&C[0]&&(_=4),(C=_)==0){if(e(ge!=null),Q.data=ae.data,Q.w=ae.w+ae.offset,Q.ha=ae.ha-ae.offset,Q.put=vr,Q.ac=Hs,Q.bc=pn,Q.ma=ge,ae.xa){if((_=Xe())==null){ge=1;break e}if((function(Ie,qe){var Ye=[0],vt=[0],tt=[0];t:for(;;){if(Ie==null)return 0;if(qe==null)return Ie.a=2,0;if(Ie.l=qe,Ie.a=0,H(Ie.m,qe.data,qe.w,qe.ha),!ei(Ie.m,Ye,vt,tt)){Ie.a=3;break t}if(Ie.xb=Ff,qe.width=Ye[0],qe.height=vt[0],!Qe(Ye[0],vt[0],1,Ie,null))break t;return 1}return e(Ie.a!=0),0})(_,Q)){if(Q=(C=Au(Q.width,Q.height,ge.Oa,ge.ba))==0){t:{Q=_;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((U=Q.l)!=null),e((ae=U.ma)!=null),Q.xb!=0){if(Q.ca=ae.ba,Q.tb=ae.tb,e(Q.ca!=null),!ro(ae.Oa,U,a0)){Q.a=2;break r}if(!rt(Q,U.width)||U.da)break r;if((U.da||jt(Q.ca.S))&&oa(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&oa()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!ne(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Ge(Q,Q.V,Q.Ba,Q.c,Q.i,U.o,Se))break r;ae.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(C=_.a)}else C=_.a}else{if((_=new Kt)==null){ge=1;break e}if(_.Fa=ae.na,_.P=ae.P,_.qc=ae.Sa,An(_,Q)){if((C=Au(Q.width,Q.height,ge.Oa,ge.ba))==0){if(_.Aa=0,U=ge.Oa,e((ae=_)!=null),U!=null){if(0<(_e=0>(_e=U.Md)?0:100<_e?255:255*_e/100)){for(Ce=ze=0;4>Ce;++Ce)12>(Ze=ae.pb[Ce]).lc&&(Ze.ia=_e*Xy[0>Ze.lc?0:Ze.lc]>>3),ze|=Ze.ia;ze&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=U.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}(function(Ie,qe){if(Ie==null)return 0;if(qe==null)return ar(Ie,2,"NULL VP8Io parameter in VP8Decode().");if(!Ie.cb&&!An(Ie,qe))return 0;if(e(Ie.cb),qe.ac==null||qe.ac(qe)){qe.ob&&(Ie.L=0);var Ye=jd[Ie.L];if(Ie.L==2?(Ie.yb=0,Ie.zb=0):(Ie.yb=qe.v-Ye>>4,Ie.zb=qe.j-Ye>>4,0>Ie.yb&&(Ie.yb=0),0>Ie.zb&&(Ie.zb=0)),Ie.Va=qe.o+15+Ye>>4,Ie.Hb=qe.va+15+Ye>>4,Ie.Hb>Ie.za&&(Ie.Hb=Ie.za),Ie.Va>Ie.Ub&&(Ie.Va=Ie.Ub),0<Ie.L){var vt=Ie.ed;for(Ye=0;4>Ye;++Ye){var tt;if(Ie.Qa.Cb){var xt=Ie.Qa.Lb[Ye];Ie.Qa.Fb||(xt+=vt.Tb)}else xt=vt.Tb;for(tt=0;1>=tt;++tt){var yt=Ie.gd[Ye][tt],St=xt;if(vt.Pc&&(St+=vt.vd[0],tt&&(St+=vt.od[0])),0<(St=0>St?0:63<St?63:St)){var Et=St;0<vt.wb&&(Et=4<vt.wb?Et>>2:Et>>1)>9-vt.wb&&(Et=9-vt.wb),1>Et&&(Et=1),yt.dd=Et,yt.tc=2*St+Et,yt.ld=40<=St?2:15<=St?1:0}else yt.tc=0;yt.La=tt}}}Ye=0}else ar(Ie,6,"Frame setup failed"),Ye=Ie.a;if(Ye=Ye==0){if(Ye){Ie.$c=0,0<Ie.Aa||(Ie.Ic=Qc);t:{Ye=Ie.Ic,vt=4*(Et=Ie.za);var _r=32*Et,ur=Et+1,Jr=0<Ie.L?Et*(0<Ie.Aa?2:1):0,mr=(Ie.Aa==2?2:1)*Et;if((yt=vt+832+(tt=3*(16*Ye+jd[Ie.L])/2*_r)+(xt=Ie.Fa!=null&&0<Ie.Fa.length?Ie.Kc.c*Ie.Kc.i:0))!=yt)Ye=0;else{if(yt>Ie.Vb){if(Ie.Vb=0,Ie.Ec=a(yt),Ie.Fc=0,Ie.Ec==null){Ye=ar(Ie,1,"no memory during frame initialization.");break t}Ie.Vb=yt}yt=Ie.Ec,St=Ie.Fc,Ie.Ac=yt,Ie.Bc=St,St+=vt,Ie.Gd=i(_r,gs),Ie.Hd=0,Ie.rb=i(ur+1,tn),Ie.sb=1,Ie.wa=Jr?i(Jr,Kr):null,Ie.Y=0,Ie.D.Nb=0,Ie.D.wa=Ie.wa,Ie.D.Y=Ie.Y,0<Ie.Aa&&(Ie.D.Y+=Et),e(!0),Ie.oc=yt,Ie.pc=St,St+=832,Ie.ya=i(mr,ji),Ie.aa=0,Ie.D.ya=Ie.ya,Ie.D.aa=Ie.aa,Ie.Aa==2&&(Ie.D.aa+=Et),Ie.R=16*Et,Ie.B=8*Et,Et=(_r=jd[Ie.L])*Ie.R,_r=_r/2*Ie.B,Ie.sa=yt,Ie.ta=St+Et,Ie.qa=Ie.sa,Ie.ra=Ie.ta+16*Ye*Ie.R+_r,Ie.Ha=Ie.qa,Ie.Ia=Ie.ra+8*Ye*Ie.B+_r,Ie.$c=0,St+=tt,Ie.mb=xt?yt:null,Ie.nb=xt?St:null,e(St+xt<=Ie.Fc+Ie.Vb),dn(Ie),s(Ie.Ac,Ie.Bc,0,vt),Ye=1}}if(Ye){if(qe.ka=0,qe.y=Ie.sa,qe.O=Ie.ta,qe.f=Ie.qa,qe.N=Ie.ra,qe.ea=Ie.Ha,qe.Vd=Ie.Ia,qe.fa=Ie.R,qe.Rc=Ie.B,qe.F=null,qe.J=0,!Ag){for(Ye=-255;255>=Ye;++Ye)Sg[255+Ye]=0>Ye?-Ye:Ye;for(Ye=-1020;1020>=Ye;++Ye)Ng[1020+Ye]=-128>Ye?-128:127<Ye?127:Ye;for(Ye=-112;112>=Ye;++Ye)Eg[112+Ye]=-16>Ye?-16:15<Ye?15:Ye;for(Ye=-255;510>=Ye;++Ye)Cg[255+Ye]=0>Ye?0:255<Ye?255:Ye;Ag=1}la=rn,ca=aa,mc=Ri,$l=on,If=Zi,Ba=Ws,vg=V,wg=re,Gp=We,zy=kt,$y=Te,Sd=Ve,Kp=Tt,Pf=sr,Yp=bi,bg=gl,n0=ri,Nd=Wc,vl[0]=t0,vl[1]=ku,vl[2]=bo,vl[3]=pl,vl[4]=Nf,vl[5]=Ml,vl[6]=Gs,vl[7]=Ef,vl[8]=ml,vl[9]=Bl,io[0]=yi,io[1]=kf,io[2]=Sf,io[3]=Nu,io[4]=Oa,io[5]=vi,io[6]=eo,Ao[0]=_o,Ao[1]=Su,Ao[2]=Eu,Ao[3]=wi,Ao[4]=ts,Ao[5]=uc,Ao[6]=bd,Ye=1}else Ye=0}Ye&&(Ye=(function(Sn,Xs){for(Sn.M=0;Sn.M<Sn.Va;++Sn.M){var nn,dr=Sn.Jc[Sn.M&Sn.Xb],Jt=Sn.m,ua=Sn;for(nn=0;nn<ua.za;++nn){var zr=Jt,gn=ua,ws=gn.Ac,si=gn.Bc+4*nn,ba=gn.zc,Ms=gn.ya[gn.aa+nn];if(gn.Qa.Bb?Ms.$b=Ee(zr,gn.Pa.jb[0])?2+Ee(zr,gn.Pa.jb[2]):Ee(zr,gn.Pa.jb[1]):Ms.$b=0,gn.kc&&(Ms.Ad=Ee(zr,gn.Bd)),Ms.Za=!Ee(zr,145)+0,Ms.Za){var Va=Ms.Ob,ai=0;for(gn=0;4>gn;++gn){var js,jn=ba[0+gn];for(js=0;4>js;++js){jn=G4[ws[si+js]][jn];for(var qn=Gy[Ee(zr,jn[0])];0<qn;)qn=Gy[2*qn+Ee(zr,jn[qn])];jn=-qn,ws[si+js]=jn}n(Va,ai,ws,si,4),ai+=4,ba[0+gn]=jn}}else jn=Ee(zr,156)?Ee(zr,128)?1:3:Ee(zr,163)?2:0,Ms.Ob[0]=jn,s(ws,si,jn,4),s(ba,0,jn,4);Ms.Dd=Ee(zr,142)?Ee(zr,114)?Ee(zr,183)?1:3:2:0}if(ua.m.Ka)return ar(Sn,7,"Premature end-of-partition0 encountered.");for(;Sn.ja<Sn.za;++Sn.ja){if(ua=dr,zr=(Jt=Sn).rb[Jt.sb-1],ws=Jt.rb[Jt.sb+Jt.ja],nn=Jt.ya[Jt.aa+Jt.ja],si=Jt.kc?nn.Ad:0)zr.la=ws.la=0,nn.Za||(zr.Na=ws.Na=0),nn.Hc=0,nn.Gc=0,nn.ia=0;else{var Rs,Hn;if(zr=ws,ws=ua,si=Jt.Pa.Xc,ba=Jt.ya[Jt.aa+Jt.ja],Ms=Jt.pb[ba.$b],gn=ba.ad,Va=0,ai=Jt.rb[Jt.sb-1],jn=js=0,s(gn,Va,0,384),ba.Za)var Qs=0,Js=si[3];else{qn=a(16);var os=zr.Na+ai.Na;if(os=Td(ws,si[1],os,Ms.Eb,0,qn,0),zr.Na=ai.Na=(0<os)+0,1<os)la(qn,0,gn,Va);else{var Oi=qn[0]+3>>3;for(qn=0;256>qn;qn+=16)gn[Va+qn]=Oi}Qs=1,Js=si[0]}var ss=15&zr.la,ls=15&ai.la;for(qn=0;4>qn;++qn){var _a=1&ls;for(Oi=Hn=0;4>Oi;++Oi)ss=ss>>1|(_a=(os=Td(ws,Js,os=_a+(1&ss),Ms.Sc,Qs,gn,Va))>Qs)<<7,Hn=Hn<<2|(3<os?3:1<os?2:gn[Va+0]!=0),Va+=16;ss>>=4,ls=ls>>1|_a<<7,js=(js<<8|Hn)>>>0}for(Js=ss,Qs=ls>>4,Rs=0;4>Rs;Rs+=2){for(Hn=0,ss=zr.la>>4+Rs,ls=ai.la>>4+Rs,qn=0;2>qn;++qn){for(_a=1&ls,Oi=0;2>Oi;++Oi)os=_a+(1&ss),ss=ss>>1|(_a=0<(os=Td(ws,si[2],os,Ms.Qc,0,gn,Va)))<<3,Hn=Hn<<2|(3<os?3:1<os?2:gn[Va+0]!=0),Va+=16;ss>>=2,ls=ls>>1|_a<<5}jn|=Hn<<4*Rs,Js|=ss<<4<<Rs,Qs|=(240&ls)<<Rs}zr.la=Js,ai.la=Qs,ba.Hc=js,ba.Gc=jn,ba.ia=43690&jn?0:Ms.ia,si=!(js|jn)}if(0<Jt.L&&(Jt.wa[Jt.Y+Jt.ja]=Jt.gd[nn.$b][nn.Za],Jt.wa[Jt.Y+Jt.ja].La|=!si),ua.Ka)return ar(Sn,7,"Premature end-of-file encountered.")}if(dn(Sn),Jt=Xs,ua=1,nn=(dr=Sn).D,zr=0<dr.L&&dr.M>=dr.zb&&dr.M<=dr.Va,dr.Aa==0)t:{if(nn.M=dr.M,nn.uc=zr,So(dr,nn),ua=1,nn=(Hn=dr.D).Nb,zr=(jn=jd[dr.L])*dr.R,ws=jn/2*dr.B,qn=16*nn*dr.R,Oi=8*nn*dr.B,si=dr.sa,ba=dr.ta-zr+qn,Ms=dr.qa,gn=dr.ra-ws+Oi,Va=dr.Ha,ai=dr.Ia-ws+Oi,ls=(ss=Hn.M)==0,js=ss>=dr.Va-1,dr.Aa==2&&So(dr,Hn),Hn.uc)for(_a=(os=dr).D.M,e(os.D.uc),Hn=os.yb;Hn<os.Hb;++Hn){Qs=Hn,Js=_a;var Si=(jo=(ha=os).D).Nb;Rs=ha.R;var jo=jo.wa[jo.Y+Qs],da=ha.sa,fa=ha.ta+16*Si*Rs+16*Qs,Mi=jo.dd,cs=jo.tc;if(cs!=0)if(e(3<=cs),ha.L==1)0<Qs&&bg(da,fa,Rs,cs+4),jo.La&&Nd(da,fa,Rs,cs),0<Js&&Yp(da,fa,Rs,cs+4),jo.La&&n0(da,fa,Rs,cs);else{var Bi=ha.B,wl=ha.qa,Hl=ha.ra+8*Si*Bi+8*Qs,ii=ha.Ha,ha=ha.Ia+8*Si*Bi+8*Qs;Si=jo.ld,0<Qs&&(wg(da,fa,Rs,cs+4,Mi,Si),zy(wl,Hl,ii,ha,Bi,cs+4,Mi,Si)),jo.La&&(Sd(da,fa,Rs,cs,Mi,Si),Pf(wl,Hl,ii,ha,Bi,cs,Mi,Si)),0<Js&&(vg(da,fa,Rs,cs+4,Mi,Si),Gp(wl,Hl,ii,ha,Bi,cs+4,Mi,Si)),jo.La&&($y(da,fa,Rs,cs,Mi,Si),Kp(wl,Hl,ii,ha,Bi,cs,Mi,Si))}}if(dr.ia&&alert("todo:DitherRow"),Jt.put!=null){if(Hn=16*ss,ss=16*(ss+1),ls?(Jt.y=dr.sa,Jt.O=dr.ta+qn,Jt.f=dr.qa,Jt.N=dr.ra+Oi,Jt.ea=dr.Ha,Jt.W=dr.Ia+Oi):(Hn-=jn,Jt.y=si,Jt.O=ba,Jt.f=Ms,Jt.N=gn,Jt.ea=Va,Jt.W=ai),js||(ss-=jn),ss>Jt.o&&(ss=Jt.o),Jt.F=null,Jt.J=null,dr.Fa!=null&&0<dr.Fa.length&&Hn<ss&&(Jt.J=wa(dr,Jt,Hn,ss-Hn),Jt.F=dr.mb,Jt.F==null&&Jt.F.length==0)){ua=ar(dr,3,"Could not decode alpha data.");break t}Hn<Jt.j&&(jn=Jt.j-Hn,Hn=Jt.j,e(!(1&jn)),Jt.O+=dr.R*jn,Jt.N+=dr.B*(jn>>1),Jt.W+=dr.B*(jn>>1),Jt.F!=null&&(Jt.J+=Jt.width*jn)),Hn<ss&&(Jt.O+=Jt.v,Jt.N+=Jt.v>>1,Jt.W+=Jt.v>>1,Jt.F!=null&&(Jt.J+=Jt.v),Jt.ka=Hn-Jt.j,Jt.U=Jt.va-Jt.v,Jt.T=ss-Hn,ua=Jt.put(Jt))}nn+1!=dr.Ic||js||(n(dr.sa,dr.ta-zr,si,ba+16*dr.R,zr),n(dr.qa,dr.ra-ws,Ms,gn+8*dr.B,ws),n(dr.Ha,dr.Ia-ws,Va,ai+8*dr.B,ws))}if(!ua)return ar(Sn,6,"Output aborted.")}return 1})(Ie,qe)),qe.bc!=null&&qe.bc(qe),Ye&=1}return Ye?(Ie.cb=0,Ye):0})(_,Q)||(C=_.a)}}else C=_.a}C==0&&ge.Oa!=null&&ge.Oa.fd&&(C=no(ge.ba))}ge=C}he=ge!=0?null:11>he?we.f.RGBA.eb:we.f.kb.y}else he=null;return he};var f0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,D){for(var j="",F=0;F<4;F++)j+=String.fromCharCode(N[D++]);return j}function d(N,D){return N[D+0]|N[D+1]<<8}function p(N,D){return(N[D+0]|N[D+1]<<8|N[D+2]<<16)>>>0}function g(N,D){return(N[D+0]|N[D+1]<<8|N[D+2]<<16|N[D+3]<<24)>>>0}new l;var m=[0],x=[0],y=[],b=new l,S=t,P=(function(N,D){var j={},F=0,M=!1,Z=0,ue=0;if(j.frames=[],!(function(I,z){for(var X=0;X<4;X++)if(I[z+X]!="RIFF".charCodeAt(X))return!0;return!1})(N,D)){for(g(N,D+=4),D+=8;D<N.length;){var pe=u(N,D),fe=g(N,D+=4);D+=4;var te=fe+(1&fe);switch(pe){case"VP8 ":case"VP8L":j.frames[F]===void 0&&(j.frames[F]={}),(K=j.frames[F]).src_off=M?ue:D-8,K.src_size=Z+fe+8,F++,M&&(M=!1,Z=0,ue=0);break;case"VP8X":(K=j.header={}).feature_flags=N[D];var H=D+4;K.canvas_width=1+p(N,H),H+=3,K.canvas_height=1+p(N,H),H+=3;break;case"ALPH":M=!0,Z=te+8,ue=D-8;break;case"ANIM":(K=j.header).bgcolor=g(N,D),H=D+4,K.loop_count=d(N,H),H+=2;break;case"ANMF":var ie,K;(K=j.frames[F]={}).offset_x=2*p(N,D),D+=3,K.offset_y=2*p(N,D),D+=3,K.width=1+p(N,D),D+=3,K.height=1+p(N,D),D+=3,K.duration=p(N,D),D+=3,ie=N[D++],K.dispose=1&ie,K.blend=ie>>1&1}pe!="ANMF"&&(D+=te)}return j}})(S,0);P.response=S,P.rgbaoutput=!0,P.dataurl=!1;var T=P.header?P.header:null,O=P.frames?P.frames:null;if(T){T.loop_counter=T.loop_count,m=[T.canvas_height],x=[T.canvas_width];for(var W=0;W<O.length&&O[W].blend!=0;W++);}var Y=O[0],L=b.WebPDecodeRGBA(S,Y.src_off,Y.src_size,x,m);Y.rgba=L,Y.imgwidth=x[0],Y.imgheight=m[0];for(var A=0;A<x[0]*m[0]*4;A++)y[A]=L[A];return this.width=x,this.height=m,this.data=y,this}(function(t){var e,r,n,s,a,i,o,l,u,d=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new i,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new i,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var p=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=I;Object.defineProperty(this,"pdf",{get:function(){return z}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Pe){X=!!Pe}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Pe){J=!!Pe}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Pe){isNaN(Pe)||(se=Pe)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Pe){isNaN(Pe)||(le=Pe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Pe){var ne;typeof Pe=="number"?ne=[Pe,Pe,Pe,Pe]:((ne=new Array(4))[0]=Pe[0],ne[1]=Pe.length>=2?Pe[1]:ne[0],ne[2]=Pe.length>=3?Pe[2]:ne[0],ne[3]=Pe.length>=4?Pe[3]:ne[1]),u.margin=ne}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(Pe){ve=Pe}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Pe){xe=Pe}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(Pe){Ee=Pe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Pe){Pe instanceof d&&(u=Pe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Pe){u.path=Pe}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Pe){ke=Pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pe){var ne;ne=g(Pe),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pe){var ne=g(Pe);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pe){["butt","round","square"].indexOf(Pe)!==-1&&(this.ctx.lineCap=Pe,this.pdf.setLineCap(Pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pe){isNaN(Pe)||(this.ctx.lineWidth=Pe,this.pdf.setLineWidth(Pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pe){["bevel","round","miter"].indexOf(Pe)!==-1&&(this.ctx.lineJoin=Pe,this.pdf.setLineJoin(Pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pe){isNaN(Pe)||(this.ctx.miterLimit=Pe,this.pdf.setMiterLimit(Pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pe){this.ctx.textBaseline=Pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pe){["right","end","center","left","start"].indexOf(Pe)!==-1&&(this.ctx.textAlign=Pe)}});var oe=null,Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(Pe){oe=null,Fe=Pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pe){var ne;if(this.ctx.font=Pe,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pe))!==null){var ye=ne[1];ne[2];var Ae=ne[3],Be=ne[4];ne[5];var Oe=ne[6],pt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(pt==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:pt==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var nt=(function(st){var wt,me,Ue=[],ut=st.trim();if(ut==="")return z3;if(ut in ij)return[ij[ut]];for(;ut!=="";){switch(me=null,wt=(ut=lj(ut)).charAt(0)){case'"':case"'":me=Cwe(ut.substring(1),wt);break;default:me=Awe(ut)}if(me===null||(Ue.push(me[0]),(ut=lj(me[1]))!==""&&ut.charAt(0)!==","))return z3;ut=ut.replace(/^,/,"")}return Ue})(Oe);if(this.fontFaces){var Lt=(function(st,wt){if(oe===null){var me=(function(Ue){var ut=[];return Object.keys(Ue).forEach(function(Ut){Ue[Ut].forEach(function(nr){var Dt=null;switch(nr){case"bold":Dt={family:Ut,weight:"bold"};break;case"italic":Dt={family:Ut,style:"italic"};break;case"bolditalic":Dt={family:Ut,weight:"bold",style:"italic"};break;case"":case"normal":Dt={family:Ut}}Dt!==null&&(Dt.ref={name:Ut,style:nr},ut.push(Dt))})}),ut})(st.getFontList());oe=(function(Ue){for(var ut={},Ut=0;Ut<Ue.length;++Ut){var nr=U3(Ue[Ut]),Dt=nr.family,$t=nr.stretch,jt=nr.style,pr=nr.weight;ut[Dt]=ut[Dt]||{},ut[Dt][$t]=ut[Dt][$t]||{},ut[Dt][$t][jt]=ut[Dt][$t][jt]||{},ut[Dt][$t][jt][pr]=nr}return ut})(me.concat(wt))}return oe})(this.pdf,this.fontFaces),Ct=nt.map(function(st){return{family:st,stretch:"normal",weight:Ae,style:ye}}),Nt=(function(st,wt,me){for(var Ue=(me=me||{}).defaultFontFamily||"times",ut=Object.assign({},Ewe,me.genericFontFamilies||{}),Ut=null,nr=null,Dt=0;Dt<wt.length;++Dt)if(ut[(Ut=U3(wt[Dt])).family]&&(Ut.family=ut[Ut.family]),st.hasOwnProperty(Ut.family)){nr=st[Ut.family];break}if(!(nr=nr||st[Ue]))throw new Error("Could not find a font-family for the rule '"+oj(Ut)+"' and default family '"+Ue+"'.");if(nr=(function($t,jt){if(jt[$t])return jt[$t];var pr=Xk[$t],hn=pr<=Xk.normal?-1:1,an=aj(jt,H$,pr,hn);if(!an)throw new Error("Could not find a matching font-stretch value for "+$t);return an})(Ut.stretch,nr),nr=(function($t,jt){if(jt[$t])return jt[$t];for(var pr=q$[$t],hn=0;hn<pr.length;++hn)if(jt[pr[hn]])return jt[pr[hn]];throw new Error("Could not find a matching font-style for "+$t)})(Ut.style,nr),!(nr=(function($t,jt){if(jt[$t])return jt[$t];if($t===400&&jt[500])return jt[500];if($t===500&&jt[400])return jt[400];var pr=Nwe[$t],hn=aj(jt,W$,pr,$t<400?-1:1);if(!hn)throw new Error("Could not find a matching font-weight for value "+$t);return hn})(Ut.weight,nr)))throw new Error("Failed to resolve a font for the rule '"+oj(Ut)+"'.");return nr})(Lt,Ct);this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var _t="";(Ae==="bold"||parseInt(Ae,10)>=700||ye==="bold")&&(_t="bold"),ye==="italic"&&(_t+="italic"),_t.length===0&&(_t="normal");for(var ot="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<nt.length;Ot++){if(this.pdf.internal.getFont(nt[Ot],_t,{noFallback:!0,disableWarning:!0})!==void 0){ot=nt[Ot];break}if(_t==="bolditalic"&&this.pdf.internal.getFont(nt[Ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=nt[Ot],_t="bold";else if(this.pdf.internal.getFont(nt[Ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=nt[Ot],_t="normal";break}}if(ot===""){for(var ft=0;ft<nt.length;ft++)if(Bt[nt[ft]]){ot=Bt[nt[ft]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,_t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pe){this.ctx.globalCompositeOperation=Pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pe){this.ctx.globalAlpha=Pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pe){this.ctx.lineDashOffset=Pe,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pe){this.ctx.lineDash=Pe,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pe){this.ctx.ignoreClearRect=!!Pe}})};p.prototype.setLineDash=function(I){this.lineDash=I},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){O.call(this,"fill",!1)},p.prototype.stroke=function(){O.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(I,z){if(isNaN(I)||isNaN(z))throw Cs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new i(I,z));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(I,z)},p.prototype.closePath=function(){var I=new i(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&hs(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){I=new i(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(I.x,I.y)},p.prototype.lineTo=function(I,z){if(isNaN(I)||isNaN(z))throw Cs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new i(I,z));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(X.x,X.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},p.prototype.quadraticCurveTo=function(I,z,X,J){if(isNaN(X)||isNaN(J)||isNaN(I)||isNaN(z))throw Cs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new i(X,J)),le=this.ctx.transform.applyToPoint(new i(I,z));this.path.push({type:"qct",x1:le.x,y1:le.y,x:se.x,y:se.y}),this.ctx.lastPoint=new i(se.x,se.y)},p.prototype.bezierCurveTo=function(I,z,X,J,se,le){if(isNaN(se)||isNaN(le)||isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J))throw Cs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new i(se,le)),xe=this.ctx.transform.applyToPoint(new i(I,z)),Ee=this.ctx.transform.applyToPoint(new i(X,J));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ee.x,y2:Ee.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new i(ve.x,ve.y)},p.prototype.arc=function(I,z,X,J,se,le){if(isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J)||isNaN(se))throw Cs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new i(I,z));I=ve.x,z=ve.y;var xe=this.ctx.transform.applyToPoint(new i(0,X)),Ee=this.ctx.transform.applyToPoint(new i(0,0));X=Math.sqrt(Math.pow(xe.x-Ee.x,2)+Math.pow(xe.y-Ee.y,2))}Math.abs(se-J)>=2*Math.PI&&(J=0,se=2*Math.PI),this.path.push({type:"arc",x:I,y:z,radius:X,startAngle:J,endAngle:se,counterclockwise:le})},p.prototype.arcTo=function(I,z,X,J,se){throw new Error("arcTo not implemented.")},p.prototype.rect=function(I,z,X,J){if(isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J))throw Cs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,z),this.lineTo(I+X,z),this.lineTo(I+X,z+J),this.lineTo(I,z+J),this.lineTo(I,z),this.lineTo(I+X,z),this.lineTo(I,z)},p.prototype.fillRect=function(I,z,X,J){if(isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J))throw Cs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,z,X,J),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},p.prototype.strokeRect=function(I,z,X,J){if(isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J))throw Cs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(I,z,X,J),this.stroke())},p.prototype.clearRect=function(I,z,X,J){if(isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J))throw Cs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,z,X,J))},p.prototype.save=function(I){I=typeof I!="boolean"||I;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},p.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(z),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(I){var z,X,J,se;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))z=0,X=0,J=0,se=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(le!==null)z=parseInt(le[1]),X=parseInt(le[2]),J=parseInt(le[3]),se=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)z=parseInt(le[1]),X=parseInt(le[2]),J=parseInt(le[3]),se=parseFloat(le[4]);else{if(se=1,typeof I=="string"&&I.charAt(0)!=="#"){var ve=new O$(I);I=ve.ok?ve.toHex():"#000000"}I.length===4?(z=I.substring(1,2),z+=z,X=I.substring(2,3),X+=X,J=I.substring(3,4),J+=J):(z=I.substring(1,3),X=I.substring(3,5),J=I.substring(5,7)),z=parseInt(z,16),X=parseInt(X,16),J=parseInt(J,16)}}return{r:z,g:X,b:J,a:se,style:I}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(I,z,X,J){if(isNaN(z)||isNaN(X)||typeof I!="string")throw Cs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var se=te(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;F.call(this,{text:I,x:z,y:X,scale:le,angle:se,align:this.textAlign,maxWidth:J})}},p.prototype.strokeText=function(I,z,X,J){if(isNaN(z)||isNaN(X)||typeof I!="string")throw Cs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){J=isNaN(J)?void 0:J;var se=te(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;F.call(this,{text:I,x:z,y:X,scale:le,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:J})}},p.prototype.measureText=function(I){if(typeof I!="string")throw Cs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,X=this.pdf.internal.scaleFactor,J=z.internal.getFontSize(),se=z.getStringUnitWidth(I)*J/z.internal.scaleFactor;return new function(le){var ve=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:se*=Math.round(96*X/72*1e4)/1e4})},p.prototype.scale=function(I,z){if(isNaN(I)||isNaN(z))throw Cs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(I,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.rotate=function(I){if(isNaN(I))throw Cs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.translate=function(I,z){if(isNaN(I)||isNaN(z))throw Cs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,I,z);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.transform=function(I,z,X,J,se,le){if(isNaN(I)||isNaN(z)||isNaN(X)||isNaN(J)||isNaN(se)||isNaN(le))throw Cs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(I,z,X,J,se,le);this.ctx.transform=this.ctx.transform.multiply(ve)},p.prototype.setTransform=function(I,z,X,J,se,le){I=isNaN(I)?1:I,z=isNaN(z)?0:z,X=isNaN(X)?0:X,J=isNaN(J)?1:J,se=isNaN(se)?0:se,le=isNaN(le)?0:le,this.ctx.transform=new l(I,z,X,J,se,le)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(I,z,X,J,se,le,ve,xe,Ee){var ke=this.pdf.getImageProperties(I),oe=1,Fe=1,Pe=1,ne=1;J!==void 0&&xe!==void 0&&(Pe=xe/J,ne=Ee/se,oe=ke.width/J*xe/J,Fe=ke.height/se*Ee/se),le===void 0&&(le=z,ve=X,z=0,X=0),J!==void 0&&xe===void 0&&(xe=J,Ee=se),J===void 0&&xe===void 0&&(xe=ke.width,Ee=ke.height);for(var ye,Ae=this.ctx.transform.decompose(),Be=te(Ae.rotate.shx),Oe=new l,pt=(Oe=(Oe=(Oe=Oe.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new o(le-z*Pe,ve-X*ne,J*oe,se*Fe)),nt=b.call(this,pt),Lt=[],Ct=0;Ct<nt.length;Ct+=1)Lt.indexOf(nt[Ct])===-1&&Lt.push(nt[Ct]);if(T(Lt),this.autoPaging)for(var Nt=Lt[0],_t=Lt[Lt.length-1],ot=Nt;ot<_t+1;ot++){this.pdf.setPage(ot);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=ot===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=ot===1?0:ft+(ot-2)*st;if(this.ctx.clip_path.length!==0){var me=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(ye,this.posX+this.margin[3],-wt+Ot+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=me}var Ue=JSON.parse(JSON.stringify(pt));Ue=P([Ue],this.posX+this.margin[3],-wt+Ot+this.ctx.prevPageLastElemOffset)[0];var ut=(ot>Nt||ot<_t)&&y.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,st,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,Be),ut&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Be)};var b=function(I,z,X){var J=[];z=z||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":J.push(Math.floor((I.y+se)/X)+1);break;case"arc":J.push(Math.floor((I.y+se-I.radius)/X)+1),J.push(Math.floor((I.y+se+I.radius)/X)+1);break;case"qct":var le=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);J.push(Math.floor((le.y+se)/X)+1),J.push(Math.floor((le.y+le.h+se)/X)+1);break;case"bct":var ve=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);J.push(Math.floor((ve.y+se)/X)+1),J.push(Math.floor((ve.y+ve.h+se)/X)+1);break;case"rect":J.push(Math.floor((I.y+se)/X)+1),J.push(Math.floor((I.y+I.h+se)/X)+1)}for(var xe=0;xe<J.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<J[xe];)S.call(this);return J},S=function(){var I=this.fillStyle,z=this.strokeStyle,X=this.font,J=this.lineCap,se=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=z,this.font=X,this.lineCap=J,this.lineWidth=se,this.lineJoin=le},P=function(I,z,X){for(var J=0;J<I.length;J++)switch(I[J].type){case"bct":I[J].x2+=z,I[J].y2+=X;case"qct":I[J].x1+=z,I[J].y1+=X;default:I[J].x+=z,I[J].y+=X}return I},T=function(I){return I.sort(function(z,X){return z-X})},O=function(I,z){for(var X,J,se=this.fillStyle,le=this.strokeStyle,ve=this.lineCap,xe=this.lineWidth,Ee=Math.abs(xe*this.ctx.transform.scaleX),ke=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),Pe=[],ne=0;ne<Fe.length;ne++)if(Fe[ne].x!==void 0)for(var ye=b.call(this,Fe[ne]),Ae=0;Ae<ye.length;Ae+=1)Pe.indexOf(ye[Ae])===-1&&Pe.push(ye[Ae]);for(var Be=0;Be<Pe.length;Be++)for(;this.pdf.internal.getNumberOfPages()<Pe[Be];)S.call(this);if(T(Pe),this.autoPaging)for(var Oe=Pe[0],pt=Pe[Pe.length-1],nt=Oe;nt<pt+1;nt++){this.pdf.setPage(nt),this.fillStyle=se,this.strokeStyle=le,this.lineCap=ve,this.lineWidth=Ee,this.lineJoin=ke;var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=nt===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=nt===1?0:Nt+(nt-2)*_t;if(this.ctx.clip_path.length!==0){var Bt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(X,this.posX+this.margin[3],-ot+Ct+this.ctx.prevPageLastElemOffset),W.call(this,I,!0),this.path=Bt}if(J=JSON.parse(JSON.stringify(oe)),this.path=P(J,this.posX+this.margin[3],-ot+Ct+this.ctx.prevPageLastElemOffset),z===!1||nt===0){var Ot=(nt>Oe||nt<pt)&&y.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,_t,null).clip().discardPath()),W.call(this,I,z),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Ee,W.call(this,I,z),this.lineWidth=xe;this.path=oe},W=function(I,z){if((I!=="stroke"||z||!x.call(this))&&(I==="stroke"||z||!m.call(this))){for(var X,J,se=[],le=this.path,ve=0;ve<le.length;ve++){var xe=le[ve];switch(xe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ee=se.length;if(le[ve-1]&&!isNaN(le[ve-1].x)&&(X=[xe.x-le[ve-1].x,xe.y-le[ve-1].y],Ee>0)){for(;Ee>=0;Ee--)if(se[Ee-1].close!==!0&&se[Ee-1].begin!==!0){se[Ee-1].deltas.push(X),se[Ee-1].abs.push(xe);break}}break;case"bct":X=[xe.x1-le[ve-1].x,xe.y1-le[ve-1].y,xe.x2-le[ve-1].x,xe.y2-le[ve-1].y,xe.x-le[ve-1].x,xe.y-le[ve-1].y],se[se.length-1].deltas.push(X);break;case"qct":var ke=le[ve-1].x+2/3*(xe.x1-le[ve-1].x),oe=le[ve-1].y+2/3*(xe.y1-le[ve-1].y),Fe=xe.x+2/3*(xe.x1-xe.x),Pe=xe.y+2/3*(xe.y1-xe.y),ne=xe.x,ye=xe.y;X=[ke-le[ve-1].x,oe-le[ve-1].y,Fe-le[ve-1].x,Pe-le[ve-1].y,ne-le[ve-1].x,ye-le[ve-1].y],se[se.length-1].deltas.push(X);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(xe)}}J=z?null:I==="stroke"?"stroke":"fill";for(var Ae=!1,Be=0;Be<se.length;Be++)if(se[Be].arc)for(var Oe=se[Be].abs,pt=0;pt<Oe.length;pt++){var nt=Oe[pt];nt.type==="arc"?A.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,z,!Ae):M.call(this,nt.x,nt.y),Ae=!0}else if(se[Be].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(se[Be].begin!==!0){var Lt=se[Be].start.x,Ct=se[Be].start.y;Z.call(this,se[Be].deltas,Lt,Ct),Ae=!0}J&&N.call(this,J),z&&D.call(this)}},Y=function(I){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-X;case"top":return I+z-X;case"hanging":return I+z-2*X;case"middle":return I+z/2-X;default:return I}},L=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(z,X){this.colorStops.push([z,X])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(I,z,X,J,se,le,ve,xe,Ee){for(var ke=pe.call(this,X,J,se,le),oe=0;oe<ke.length;oe++){var Fe=ke[oe];oe===0&&(Ee?j.call(this,Fe.x1+I,Fe.y1+z):M.call(this,Fe.x1+I,Fe.y1+z)),ue.call(this,I,z,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}xe?D.call(this):N.call(this,ve)},N=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(I,z){this.pdf.internal.out(r(I)+" "+n(z)+" m")},F=function(I){var z;switch(I.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var X=this.pdf.getTextDimensions(I.text),J=Y.call(this,I.y),se=L.call(this,J)-X.h,le=this.ctx.transform.applyToPoint(new i(I.x,J)),ve=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var Ee,ke,oe,Fe=this.ctx.transform.applyToRectangle(new o(I.x,J,X.w,X.h)),Pe=xe.applyToRectangle(new o(I.x,se,X.w,X.h)),ne=b.call(this,Pe),ye=[],Ae=0;Ae<ne.length;Ae+=1)ye.indexOf(ne[Ae])===-1&&ye.push(ne[Ae]);if(T(ye),this.autoPaging)for(var Be=ye[0],Oe=ye[ye.length-1],pt=Be;pt<Oe+1;pt++){this.pdf.setPage(pt);var nt=pt===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[2],Nt=Ct-this.margin[0],_t=this.pdf.internal.pageSize.width-this.margin[1],ot=_t-this.margin[3],Bt=pt===1?0:Lt+(pt-2)*Nt;if(this.ctx.clip_path.length!==0){var Ot=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Ee,this.posX+this.margin[3],-1*Bt+nt),W.call(this,"fill",!0),this.path=Ot}var ft=P([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Bt+nt+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*I.scale),oe=this.lineWidth,this.lineWidth=oe*I.scale);var st=this.autoPaging!=="text";if(st||ft.y+ft.h<=Ct){if(st||ft.y>=nt&&ft.x<=_t){var wt=st?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||_t-ft.x)[0],me=P([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Bt+nt+this.ctx.prevPageLastElemOffset)[0],Ue=st&&(pt>Be||pt<Oe)&&y.call(this);Ue&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Nt,null).clip().discardPath()),this.pdf.text(wt,me.x,me.y,{angle:I.angle,align:z,renderingMode:I.renderingMode}),Ue&&this.pdf.restoreGraphicsState()}}else ft.y<Ct&&(this.ctx.prevPageLastElemOffset+=Ct-ft.y);I.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=oe)}else I.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*I.scale),oe=this.lineWidth,this.lineWidth=oe*I.scale),this.pdf.text(I.text,le.x+this.posX,le.y+this.posY,{angle:I.angle,align:z,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=oe)},M=function(I,z,X,J){X=X||0,J=J||0,this.pdf.internal.out(r(I+X)+" "+n(z+J)+" l")},Z=function(I,z,X){return this.pdf.lines(I,z,X,null,null)},ue=function(I,z,X,J,se,le,ve,xe){this.pdf.internal.out([e(s(X+I)),e(a(J+z)),e(s(se+I)),e(a(le+z)),e(s(ve+I)),e(a(xe+z)),"c"].join(" "))},pe=function(I,z,X,J){for(var se=2*Math.PI,le=Math.PI/2;z>X;)z-=se;var ve=Math.abs(X-z);ve<se&&J&&(ve=se-ve);for(var xe=[],Ee=J?-1:1,ke=z;ve>1e-5;){var oe=ke+Ee*Math.min(ve,le);xe.push(fe.call(this,I,ke,oe)),ve-=Math.abs(oe-ke),ke=oe}return xe},fe=function(I,z,X){var J=(X-z)/2,se=I*Math.cos(J),le=I*Math.sin(J),ve=se,xe=-le,Ee=ve*ve+xe*xe,ke=Ee+ve*se+xe*le,oe=4/3*(Math.sqrt(2*Ee*ke)-ke)/(ve*le-xe*se),Fe=ve-oe*xe,Pe=xe+oe*ve,ne=Fe,ye=-Pe,Ae=J+z,Be=Math.cos(Ae),Oe=Math.sin(Ae);return{x1:I*Math.cos(z),y1:I*Math.sin(z),x2:Fe*Be-Pe*Oe,y2:Fe*Oe+Pe*Be,x3:ne*Be-ye*Oe,y3:ne*Oe+ye*Be,x4:I*Math.cos(X),y4:I*Math.sin(X)}},te=function(I){return 180*I/Math.PI},H=function(I,z,X,J,se,le){var ve=I+.5*(X-I),xe=z+.5*(J-z),Ee=se+.5*(X-se),ke=le+.5*(J-le),oe=Math.min(I,se,ve,Ee),Fe=Math.max(I,se,ve,Ee),Pe=Math.min(z,le,xe,ke),ne=Math.max(z,le,xe,ke);return new o(oe,Pe,Fe-oe,ne-Pe)},ie=function(I,z,X,J,se,le,ve,xe){var Ee,ke,oe,Fe,Pe,ne,ye,Ae,Be,Oe,pt,nt,Lt,Ct,Nt=X-I,_t=J-z,ot=se-X,Bt=le-J,Ot=ve-se,ft=xe-le;for(ke=0;ke<41;ke++)Be=(ye=(oe=I+(Ee=ke/40)*Nt)+Ee*((Pe=X+Ee*ot)-oe))+Ee*(Pe+Ee*(se+Ee*Ot-Pe)-ye),Oe=(Ae=(Fe=z+Ee*_t)+Ee*((ne=J+Ee*Bt)-Fe))+Ee*(ne+Ee*(le+Ee*ft-ne)-Ae),ke==0?(pt=Be,nt=Oe,Lt=Be,Ct=Oe):(pt=Math.min(pt,Be),nt=Math.min(nt,Oe),Lt=Math.max(Lt,Be),Ct=Math.max(Ct,Oe));return new o(Math.round(pt),Math.round(nt),Math.round(Lt-pt),Math.round(Ct-nt))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,z,X=(I=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:z}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Cr.API),(function(t){var e=function(i){var o,l,u,d,p,g,m,x,y,b;for(l=[],u=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(p=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(g=(p=((p=((p=((p=(p-(b=p%85))/85)-(y=p%85))/85)-(x=p%85))/85)-(m=p%85))/85)%85,l.push(g+33,m+33,x+33,y+33,b+33)):l.push(122);return(function(S,P){for(var T=P;T>0;T--)S.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,u,d,p,g=String,m="length",x=255,y="charCodeAt",b="slice",S="replace";for(i[b](-2),i=i[b](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),u=[],d=0,p=(i+=o="uuuuu"[b](i[m]%5||5))[m];p>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),u.push(x&l>>24,x&l>>16,x&l>>8,x&l);return(function(P,T){for(var O=T;O>0;O--)P.pop()})(u,o[m]),g.fromCharCode.apply(g,u)},n=function(i){return i.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",u=0;u<i.length;u+=2)l+=String.fromCharCode("0x"+(i[u]+i[u+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return(o=$k(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,o){var l=0,u=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=s(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}})(Cr.API),(function(t){t.loadFile=function(e,r,n){return(function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=(function(l,u,d){var p=new XMLHttpRequest,g=0,m=function(x){var y=x.length,b=[],S=String.fromCharCode;for(g=0;g<y;g+=1)b.push(S(255&x.charCodeAt(g)));return b.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return m(p.responseText)})(s,a,i)}catch{}return o})(e,r,n)},t.loadImageFile=t.loadFile})(Cr.API),(function(t){function e(){return(Xr.html2canvas?Promise.resolve(Xr.html2canvas):Yd(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Xr.DOMPurify?Promise.resolve(Xr.DOMPurify):Yd(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=hs(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var u=document.createElement(o);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},a=function o(l,u){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(o(p,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},i=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||(function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),l){case"string":return this.then(r).then(function(u){return this.set({src:s("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var x=d[m],y=x.src.find(function(b){return b.format==="truetype"});y&&u.addFont(y.url,x.ref.name,x.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,u.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var u=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||Cr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,u,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,u,d){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(d,p){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return u.updateProgress(null,d),g}).then(d,p).then(function(g){return u.updateProgress(1),g})})},i.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),g=u.call(p,o,l);return i.convert(g,d.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Cr.getPageSize=function(o,l,u){if(hs(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var x,y=0,b=0;if(m.hasOwnProperty(g))y=m[g][1]/p,b=m[g][0]/p;else try{y=u[1],b=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",b>y&&(x=b,b=y,y=x);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>b&&(x=b,b=y,y=x)}return{width:b,height:y,unit:l,k:p,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(U3):null;var u=new i(l);return l.worker?u:u.from(o).doCallback()}})(Cr.API),Cr.API.addJS=function(t){return uj=t,this.internal.events.subscribe("postPutResources",function(){rw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+uj+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rw!==void 0&&cj!==void 0&&this.internal.out("/Names <</JavaScript "+rw+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var p=r.internal.newObject();d.push(p);var g=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,a){var i={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var i=n.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])})(Cr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,a,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=(function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,y={width:0,height:0,numcomponents:1},b=4;b<x;b+=2){if(b+=m,e.indexOf(p.charCodeAt(b+1))!==-1){g=256*p.charCodeAt(b+5)+p.charCodeAt(b+6),y={width:256*p.charCodeAt(b+7)+p.charCodeAt(b+8),height:g,numcomponents:p.charCodeAt(b+9)};break}m=256*p.charCodeAt(b+2)+p.charCodeAt(b+3)}return y})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:s}}return d}})(Cr.API),Cr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,a=dwe(t,{checkCrc:!0}),i=a.width,o=a.height,l=a.channels,u=a.palette,d=a.depth;s=u&&l===1?(function(L){for(var A=L.width,N=L.height,D=L.data,j=L.palette,F=L.depth,M=!1,Z=[],ue=[],pe=void 0,fe=!1,te=0,H=0;H<j.length;H++){var ie=pP(j[H],4),K=ie[0],I=ie[1],z=ie[2],X=ie[3];Z.push(K,I,z),X!=null&&(X===0?(te++,ue.length<1&&ue.push(H)):X<255&&(fe=!0))}if(fe||te>1){M=!0,ue=void 0;var J=A*N;pe=new Uint8Array(J);for(var se=new DataView(D.buffer),le=0;le<J;le++){var ve=$3(se,le,F),xe=pP(j[ve],4)[3];pe[le]=xe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:D,alphaBytes:pe,needSMask:M,palette:Z,mask:ue}})(a):l===2||l===4?(function(L){for(var A=L.data,N=L.width,D=L.height,j=L.channels,F=L.depth,M=j===2?"DeviceGray":"DeviceRGB",Z=j-1,ue=N*D,pe=Z,fe=ue*pe,te=1*ue,H=Math.ceil(fe*F/8),ie=Math.ceil(te*F/8),K=new Uint8Array(H),I=new Uint8Array(ie),z=new DataView(A.buffer),X=new DataView(K.buffer),J=new DataView(I.buffer),se=!1,le=0;le<ue;le++){for(var ve=le*j,xe=0;xe<pe;xe++)vj(X,$3(z,ve+xe,F),le*pe+xe,F);var Ee=$3(z,ve+pe,F);Ee<(1<<F)-1&&(se=!0),vj(J,Ee,1*le,F)}return{colorSpace:M,colorsPerPixel:Z,colorBytes:K,alphaBytes:I,needSMask:se}})(a):(function(L){var A=L.data,N=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:N,colorsPerPixel:N==="DeviceGray"?1:3,colorBytes:A instanceof Uint8Array?A:new Uint8Array(A.buffer),needSMask:!1}})(a);var p,g,m,x=s,y=x.colorSpace,b=x.colorsPerPixel,S=x.colorBytes,P=x.alphaBytes,T=x.needSMask,O=x.palette,W=x.mask,Y=null;return n!==Cr.API.image_compression.NONE&&typeof $k=="function"?(Y=(function(L){var A;switch(L){case Cr.API.image_compression.FAST:A=11;break;case Cr.API.image_compression.MEDIUM:A=13;break;case Cr.API.image_compression.SLOW:A=14;break;default:A=12}return A})(n),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(Y," "),t=pj(S,i*b,b,n),T&&(m=pj(P,i,1,n))):(p=void 0,g="",t=S,T&&(m=P)),g+="/Colors ".concat(b," /BitsPerComponent ").concat(d," /Columns ").concat(i),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:t,index:e,filter:p,decodeParameters:g,transparency:W,palette:O,sMask:m,predictor:Y,width:i,height:o,bitsPerComponent:d,colorSpace:y}}},(function(t){t.processGIF89A=function(e,r,n,s){var a=new jwe(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new q3(100).encode(u,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A})(Cr.API),iu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},iu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Cs.log("bit decode error:"+r)}},iu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},iu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*s*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},iu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},iu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=n*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},iu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},iu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},iu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=i}},iu.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,s){var a=new iu(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new q3(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}})(Cr.API),bj.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,s){var a=new bj(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new q3(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}})(Cr.API),Cr.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var d=n[u],p=n[u+1],g=n[u+2],m=n[u+3];a[o++]=d,a[o++]=p,a[o++]=g,i[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:x,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Cr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nm=Cr.API,nw=Nm.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=e.doKerning!==!1,g=0,m=t.length,x=0,y=o[0]||l,b=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+i*(1e3/a)||0)/1e3):(g=p&&hs(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/d:0,b.push((o[n]||y)/l+g)),x=n;return b},dj=Nm.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Nm.processArabic&&(t=Nm.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:nw.apply(this,arguments).reduce(function(a,i){return a+i},0)},fj=function(t,e,r,n){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<r;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>n&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},hj=function(t,e,r){r||(r={});var n,s,a,i,o,l,u,d=[],p=[d],g=r.textIndent||0,m=0,x=0,y=t.split(" "),b=nw.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var S=Array(l).join(" "),P=[];y.map(function(O){(O=O.split(/\s*\n/)).length>1?P=P.concat(O.map(function(W,Y){return(Y&&W.length?`
`:"")+W})):P.push(O[0])}),y=P,l=dj.apply(this,[S,r])}for(a=0,i=y.length;a<i;a++){var T=0;if(n=y[a],l&&n[0]==`
`&&(n=n.substr(1),T=1),g+m+(x=(s=nw.apply(this,[n,r])).reduce(function(O,W){return O+W},0))>e||T){if(x>e){for(o=fj.apply(this,[n,s,e-(g+m),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);x=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(O,W){return O+W},0)}else d=[n];p.push(d),g=x+l,m=b}else d.push(n),g+=m+x,m=b}return u=l?function(O,W){return(W?S:"")+O.join(" ")}:function(O){return O.join(" ")},p.map(u)},Nm.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(hj.apply(this,[n[o],i,a]));return u},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},a=0;a<16;a++)n[r[a]]=e[a],s[e[a]]=r[a];var i=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var m,x,y,b,S=["{"];for(var P in g){if(m=g[P],isNaN(parseInt(P,10))?x="'"+P+"'":(P=parseInt(P,10),x=(x=i(P).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof m=="number")m<0?(y=i(m).slice(3),b="-"):(y=i(m).slice(2),b=""),y=b+y.slice(0,-1)+s[y.slice(-1)];else{if(hs(m)!=="object")throw new Error("Don't know what to do with value type "+hs(m)+".");y=o(m)}S.push(x+y)}return S.push("}"),S.join("")},l=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,x,y,b,S={},P=1,T=S,O=[],W="",Y="",L=g.length-1,A=1;A<L;A+=1)(b=g[A])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(b):b=="{"?(O.push([T,y]),T={},y=void 0):b=="}"?((x=O.pop())[0][x[1]]=T,y=void 0,T=x[0]):b=="-"?P=-1:y===void 0?n.hasOwnProperty(b)?(W+=n[b],y=parseInt(W,16)*P,P=1,W=""):W+=b:n.hasOwnProperty(b)?(Y+=n[b],T[y]=parseInt(Y,16)*P,P=1,y=void 0,Y=""):Y+=b;return S},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var m=g.font,x=p.Unicode[m.postScriptName];x&&(m.metadata.Unicode={},m.metadata.Unicode.widths=x.widths,m.metadata.Unicode.kerning=x.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(Cr.API),(function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=r.charCodeAt(a);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e($w(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,n)}}])})(Cr),Cr.API.addSvgAsImage=function(t,e,r,n,s,a,i,o){if(isNaN(e)||isNaN(r))throw Cs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Cs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=s;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Xr.canvg?Promise.resolve(Xr.canvg):Yd(()=>import("./index.es-CBy2Fd_N.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),e,r,n,s,i,o)})},Cr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Cr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,p=0;function g(x,y){var b,S=!1;for(b=0;b<x.length;b+=1)x[b]===y&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(p=0;p<m;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(hs(t)==="object"){for(s in t)if(a=t[s],g(o,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&g(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,y=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?y.push("/"+x+" /"+r[x].value):y.push("/"+x+" "+r[x].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(Cr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,g=a.length;p<g;++p){if(o=i.metadata.characterToGlyph(a.charCodeAt(p)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(a){var i,o,l,u,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(a).sort(function(m,x){return m-x})).length;p<g;p++)i=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",x=0;x<g.length;x++)m+=String.fromCharCode(g[x]);var y=u();d({data:m,addLength1:!0,objectId:y}),l("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var S=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Om(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var P=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Om(o.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Om(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+P+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var x=u();d({data:g,addLength1:!0,objectId:x}),l("endobj");var y=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var b=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Om(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Om(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,u=a.y,d=a.options||{},p=a.mutex||{},g=p.pdfEscape,m=p.activeFontKey,x=p.fonts,y=m,b="",S=0,P="",T=x[y].encoding;if(x[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:p};for(P=o,y=m,Array.isArray(o)&&(P=o[0]),S=0;S<P.length;S+=1)x[y].metadata.hasOwnProperty("cmap")&&(i=x[y].metadata.cmap.unicode.codeMap[P[S].charCodeAt(0)]),i||P[S].charCodeAt(0)<256&&x[y].metadata.hasOwnProperty("Unicode")?b+=P[S]:b+="";var O="";return parseInt(y.slice(1))<14||T==="WinAnsiEncoding"?O=g(b,y).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(O=r(b,x[y])),p.isHex=!0,{text:O,x:l,y:u,options:d,mutex:p}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([s(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(s(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])})(Cr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Cr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,a,i,o,l,u,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,T=0;this.__bidiEngine__={};var O=function(j){var F=j.charCodeAt(),M=F>>8,Z=y[M];return Z!==void 0?p[256*Z+(255&F)]:M===252||M===253?"AL":S.test(M)?"L":M===8?"R":"N"},W=function(j){for(var F,M=0;M<j.length;M++){if((F=O(j.charAt(M)))==="L")return!1;if(F==="R")return!0}return!1},Y=function(j,F,M,Z){var ue,pe,fe,te,H=F[Z];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(H="AN");break;case"AL":P=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":Z<1||Z+1>=F.length||(ue=M[Z-1])!=="EN"&&ue!=="AN"||(pe=F[Z+1])!=="EN"&&pe!=="AN"?H="N":P&&(pe="AN"),H=pe===ue?pe:"N";break;case"ES":H=(ue=Z>0?M[Z-1]:"B")==="EN"&&Z+1<F.length&&F[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&M[Z-1]==="EN"){H="EN";break}if(P){H="N";break}for(fe=Z+1,te=F.length;fe<te&&F[fe]==="ET";)fe++;H=fe<te&&F[fe]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(te=F.length,fe=Z+1;fe<te&&F[fe]==="NSM";)fe++;if(fe<te){var ie=j[Z],K=ie>=1425&&ie<=2303||ie===64286;if(ue=F[fe],K&&(ue==="R"||ue==="AL")){H="R";break}}}H=Z<1||(ue=F[Z-1])==="B"?"N":M[Z-1];break;case"B":P=!1,s=!0,H=T;break;case"S":a=!0,H="N"}return H},L=function(j,F,M){var Z=j.split("");return M&&A(Z,M,{hiLevel:T}),Z.reverse(),F&&F.reverse(),Z.join("")},A=function(j,F,M){var Z,ue,pe,fe,te,H=-1,ie=j.length,K=0,I=[],z=T?m:g,X=[];for(P=!1,s=!1,a=!1,ue=0;ue<ie;ue++)X[ue]=O(j[ue]);for(pe=0;pe<ie;pe++){if(te=K,I[pe]=Y(j,X,I,pe),Z=240&(K=z[te][x[I[pe]]]),K&=15,F[pe]=fe=z[K][5],Z>0)if(Z===16){for(ue=H;ue<pe;ue++)F[ue]=1;H=-1}else H=-1;if(z[K][6])H===-1&&(H=pe);else if(H>-1){for(ue=H;ue<pe;ue++)F[ue]=fe;H=-1}X[pe]==="B"&&(F[pe]=0),M.hiLevel|=fe}a&&(function(J,se,le){for(var ve=0;ve<le;ve++)if(J[ve]==="S"){se[ve]=T;for(var xe=ve-1;xe>=0&&J[xe]==="WS";xe--)se[xe]=T}})(X,F,ie)},N=function(j,F,M,Z,ue){if(!(ue.hiLevel<j)){if(j===1&&T===1&&!s)return F.reverse(),void(M&&M.reverse());for(var pe,fe,te,H,ie=F.length,K=0;K<ie;){if(Z[K]>=j){for(te=K+1;te<ie&&Z[te]>=j;)te++;for(H=K,fe=te-1;H<fe;H++,fe--)pe=F[H],F[H]=F[fe],F[fe]=pe,M&&(pe=M[H],M[H]=M[fe],M[fe]=pe);K=te}K++}}},D=function(j,F,M){var Z=j.split(""),ue={hiLevel:T};return M||(M=[]),A(Z,M,ue),(function(pe,fe,te){if(te.hiLevel!==0&&d)for(var H,ie=0;ie<pe.length;ie++)fe[ie]===1&&(H=b.indexOf(pe[ie]))>=0&&(pe[ie]=b[H+1])})(Z,M,ue),N(2,Z,F,M,ue),N(1,Z,F,M,ue),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(j,F,M){if((function(ue,pe){if(pe)for(var fe=0;fe<ue.length;fe++)pe[fe]=fe;o===void 0&&(o=W(ue)),u===void 0&&(u=W(ue))})(j,F),i||!l||u)if(i&&l&&o^u)T=o?1:0,j=L(j,F,M);else if(!i&&l&&u)T=o?1:0,j=D(j,F,M),j=L(j,F);else if(!i||o||l||u){if(i&&!l&&o^u)j=L(j,F),o?(T=0,j=D(j,F,M)):(T=1,j=D(j,F,M),j=L(j,F));else if(i&&o&&!l&&u)T=1,j=D(j,F,M),j=L(j,F);else if(!i&&!l&&o^u){var Z=d;o?(T=1,j=D(j,F,M),T=0,d=!1,j=D(j,F,M),d=Z):(T=0,j=D(j,F,M),j=L(j,F),T=1,d=!1,j=D(j,F,M),d=Z,j=L(j,F))}}else T=0,j=D(j,F,M);else T=o?1:0,j=D(j,F,M);return j},this.__bidiEngine__.setOptions=function(j){j&&(i=j.isInputVisual,l=j.isOutputVisual,o=j.isInputRtl,u=j.isOutputRtl,d=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var i=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([r.doBidiReorder(s[o])]);n.text=i}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(Cr),Cr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Oh(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Gwe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Rwe(this.contents),this.head=new Fwe(this),this.name=new Vwe(this),this.cmap=new K$(this),this.toUnicode={},this.hhea=new Dwe(this),this.maxp=new Uwe(this),this.hmtx=new zwe(this),this.post=new Mwe(this),this.os2=new Owe(this),this.loca=new Wwe(this),this.glyf=new $we(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var _u,Oh=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,a,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)r=e[n],a.push(this.writeByte(r));return a},t})(),Rwe=(function(){var t;function e(r){var n,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,a,i,o,l,u,d,p,g,m,x,y;for(y in m=Object.keys(r).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),i=Math.floor(p/l),d=16*m-p,(s=new Oh).writeInt(this.scalarType),s.writeShort(m),s.writeShort(p),s.writeShort(i),s.writeShort(d),a=16*m,u=s.pos+a,o=null,x=[],r)for(g=r[y],s.writeString(y),s.writeInt(t(g)),s.writeInt(u),s.writeInt(g.length),x=x.concat(g),y==="head"&&(o=u),u+=g.length;u%4;)x.push(0),u++;return s.write(x),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,a,i;for(r=Y$.call(r);r.length%4;)r.push(0);for(a=new Oh(r),s=0,n=0,i=r.length;n<i;n=n+=4)s+=a.readUInt32();return 4294967295&s},e})(),Lwe={}.hasOwnProperty,vd=function(t,e){for(var r in e)Lwe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};_u=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var Fwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Oh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),_j=(function(){function t(e,r){var n,s,a,i,o,l,u,d,p,g,m,x,y,b,S,P,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=(function(){var O,W;for(W=[],l=O=0;0<=g?O<g:O>g;l=0<=g?++O:--O)W.push(e.readUInt16());return W})(),e.pos+=2,y=(function(){var O,W;for(W=[],l=O=0;0<=g?O<g:O>g;l=0<=g?++O:--O)W.push(e.readUInt16());return W})(),u=(function(){var O,W;for(W=[],l=O=0;0<=g?O<g:O>g;l=0<=g?++O:--O)W.push(e.readUInt16());return W})(),d=(function(){var O,W;for(W=[],l=O=0;0<=g?O<g:O>g;l=0<=g?++O:--O)W.push(e.readUInt16());return W})(),s=(this.length-e.pos+this.offset)/2,o=(function(){var O,W;for(W=[],l=O=0;0<=s?O<s:O>s;l=0<=s?++O:--O)W.push(e.readUInt16());return W})(),l=S=0,T=a.length;S<T;l=++S)for(b=a[l],n=P=x=y[l];x<=b?P<=b:P>=b;n=x<=b?++P:--P)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-x)-(g-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}e.pos=p}return t.encode=function(e,r){var n,s,a,i,o,l,u,d,p,g,m,x,y,b,S,P,T,O,W,Y,L,A,N,D,j,F,M,Z,ue,pe,fe,te,H,ie,K,I,z,X,J,se,le,ve,xe,Ee,ke,oe;switch(Z=new Oh,i=Object.keys(e).sort(function(Fe,Pe){return Fe-Pe}),r){case"macroman":for(y=0,b=(function(){var Fe=[];for(x=0;x<256;++x)Fe.push(0);return Fe})(),P={0:0},a={},ue=0,H=i.length;ue<H;ue++)P[xe=e[s=i[ue]]]==null&&(P[xe]=++y),a[s]={old:e[s],new:P[e[s]]},b[s]=P[e[s]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(b),{charMap:a,subtable:Z.data,maxGlyphID:y+1};case"unicode":for(F=[],p=[],T=0,P={},n={},S=u=null,pe=0,ie=i.length;pe<ie;pe++)P[W=e[s=i[pe]]]==null&&(P[W]=++T),n[s]={old:W,new:P[W]},o=P[W]-s,S!=null&&o===u||(S&&p.push(S),F.push(s),u=o),S=s;for(S&&p.push(S),p.push(65535),F.push(65535),D=2*(N=F.length),A=2*Math.pow(Math.log(N)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,L=2*N-A,l=[],Y=[],m=[],x=fe=0,K=F.length;fe<K;x=++fe){if(j=F[x],d=p[x],j===65535){l.push(0),Y.push(0);break}if(j-(M=n[j].new)>=32768)for(l.push(0),Y.push(2*(m.length+N-x)),s=te=j;j<=d?te<=d:te>=d;s=j<=d?++te:--te)m.push(n[s].new);else l.push(M-j),Y.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*N+2*m.length),Z.writeUInt16(0),Z.writeUInt16(D),Z.writeUInt16(A),Z.writeUInt16(g),Z.writeUInt16(L),le=0,I=p.length;le<I;le++)s=p[le],Z.writeUInt16(s);for(Z.writeUInt16(0),ve=0,z=F.length;ve<z;ve++)s=F[ve],Z.writeUInt16(s);for(Ee=0,X=l.length;Ee<X;Ee++)o=l[Ee],Z.writeUInt16(o);for(ke=0,J=Y.length;ke<J;ke++)O=Y[ke],Z.writeUInt16(O);for(oe=0,se=m.length;oe<se;oe++)y=m[oe],Z.writeUInt16(y);return{charMap:n,subtable:Z.data,maxGlyphID:T+1}}},t})(),K$=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new _j(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=_j.encode(e,r),(s=new Oh).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t})(),Dwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),Owe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),Mwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,o,l;for(l=[],a=i=0,o=this.file.maxp.numGlyphs;0<=o?i<o:i>o;a=0<=o?++i:--i)l.push(e.readUInt32());return l}).call(this)}},t})(),Bwe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Vwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,a,i,o,l,u,d,p,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=d=0,p=n.length;d<p;a=++d)s=n[a],e.pos=s.offset,u=e.readString(s.length),i=new Bwe(u,s),l[g=s.nameID]==null&&(l[g]=[]),l[s.nameID].push(i);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t})(),Uwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),zwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,a,i,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,d;for(d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(e.readInt16());return d})(),this.widths=(function(){var u,d,p,g;for(g=[],u=0,d=(p=this.metrics).length;u<d;u++)a=p[u],g.push(a.advance);return g}).call(this),n=this.widths[this.widths.length-1],l=[],r=i=0;0<=s?i<s:i>s;r=0<=s?++i:--i)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),Y$=[].slice,$we=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,a,i,o,l,u,d,p;return e in this.cache?this.cache[e]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(e),(s=a.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(o=new Oh(r.read(s))).readShort(),u=o.readShort(),p=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=i===-1?new Hwe(o,u,p,l,d):new qwe(o,i,u,p,l,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,a,i,o,l;for(i=[],a=[],o=0,l=r.length;o<l;o++)s=e[r[o]],a.push(i.length),s&&(i=i.concat(s.encode(n)));return a.push(i.length),{table:i,offsets:a}},t})(),qwe=(function(){function t(e,r,n,s,a,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),Hwe=(function(){function t(e,r,n,s,a){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Oh(Y$.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),Wwe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return vd(t,_u),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,a=0,i=0;i<n.length;++i)if(n[i]=s,a<r.length&&r[a]==i){++a,n[i]=s;var o=this.offsets[i],l=this.offsets[i+1]-o;l>0&&(s+=l)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t})(),Gwe=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,a;for(r in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(n=s[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],s[a]=n;return s},t.prototype.encode=function(e,r){var n,s,a,i,o,l,u,d,p,g,m,x,y,b,S;for(s in n=K$.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),m={0:0},S=n.charMap)m[(l=S[s]).old]=l.new;for(x in g=n.maxGlyphID,i)x in m||(m[x]=g++);return d=(function(P){var T,O;for(T in O={},P)O[P[T]]=T;return O})(m),p=Object.keys(d).sort(function(P,T){return P-T}),y=(function(){var P,T,O;for(O=[],P=0,T=p.length;P<T;P++)o=p[P],O.push(d[o]);return O})(),a=this.font.glyf.encode(i,y,m),u=this.font.loca.encode(a.offsets,y),b={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t})();Cr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,a,i;if(Array.isArray(r))return"["+(function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)i=r[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+r},e})();function X$(t,e,r,n,s){n=n||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,p="",g=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof t=="string"?t.split(d):t,g=p.length||1),r+=o*(2-a),n.valign==="middle"?r-=g/2*u:n.valign==="bottom"&&(r-=g*u),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),p&&g>=1){for(var x=0;x<p.length;x++)s.text(p[x],e-s.getStringUnitWidth(p[x])*m,r),r+=u;return s}e-=s.getStringUnitWidth(t)*m}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var kj={},f1=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:kj=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,a;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,a){return this.jsPDFDocument.rect(e,r,n,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return kj||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),Qk=function(t,e){return Qk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Qk(t,e)};function Q$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var J$=(function(t){Q$(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e})(Array);function Kwe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Ywe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function ab(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function Z$(t,e,r,n){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=eq(s,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function eq(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function k4(t,e){var r,n,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function tq(t,e){var r=k4(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Xwe(t,e,r,n,s){var a={},i=1.3333333333333333,o=H3(e,function(T){return s.getComputedStyle(T).backgroundColor});o!=null&&(a.fillColor=o);var l=H3(e,function(T){return s.getComputedStyle(T).color});l!=null&&(a.textColor=l);var u=Jwe(n,r);u&&(a.cellPadding=u);var d="borderTopColor",p=i*r,g=n.borderTopWidth;if(n.borderBottomWidth===g&&n.borderRightWidth===g&&n.borderLeftWidth===g){var m=(parseFloat(g)||0)/p;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var x=H3(e,function(T){return s.getComputedStyle(T)[d]});x!=null&&(a.lineColor=x);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(a.fontSize=b/i);var S=Qwe(n);S&&(a.fontStyle=S);var P=(n.fontFamily||"").toLowerCase();return t.indexOf(P)!==-1&&(a.font=P),a}function Qwe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function H3(t,e){var r=rq(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function rq(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:rq(t.parentElement,e):r}function Jwe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=r.map(function(o){return parseInt(o||"0")/n}),i=k4(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function nq(t,e,r,n,s){var a,i;n===void 0&&(n=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],p=[],g=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:p,foot:g};for(var m=0;m<o.rows.length;m++){var x=o.rows[m],y=(i=(a=x?.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=Zwe(l,u,r,x,n,s);b&&(y==="thead"?d.push(b):y==="tfoot"?g.push(b):p.push(b))}return{head:d,body:p,foot:g}}function Zwe(t,e,r,n,s,a){for(var i=new J$(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(s||u.display!=="none"){var d=void 0;a&&(d=Xwe(t,l,e,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:e5e(l)})}}var p=r.getComputedStyle(n);if(i.length>0&&(s||p.display!=="none"))return i}function e5e(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function t5e(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var a=s[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Wd(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function sq(t,e){var r=new f1(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();t5e(s,n,e);var a=Wd({},s,n,e),i;typeof window<"u"&&(i=window);var o=r5e(s,n,e),l=n5e(s,n,e),u=s5e(r,a),d=i5e(r,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function r5e(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],p=r[l];n.columnStyles=Wd({},u,d,p)}else{var g=[t,e,r],m=g.map(function(x){return x[l]||{}});n[l]=Wd({},m[0],m[1],m[2])}},a=0,i=Object.keys(n);a<i.length;a++){var o=i[a];s(o)}return n}function n5e(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=n;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function s5e(t,e){var r,n,s,a,i,o,l,u,d,p,g,m,x=k4(e.margin,40/t.scaleFactor()),y=(r=a5e(t,e.startY))!==null&&r!==void 0?r:x.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var P=(a=e.useCss)!==null&&a!==void 0?a:!1,T=e.theme||(P?"plain":"striped"),O=!!e.horizontalPageBreak,W=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:P,theme:T,startY:y,margin:x,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:S,showFoot:b,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:O,horizontalPageBreakRepeat:W,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function a5e(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),a=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&r?.finalY!=null?r.finalY+20/n:null}function i5e(t,e,r){var n=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=nq(t,e.html,r,i,e.useCss)||{};n=o.head||n,s=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||o5e(n,s,a);return{columns:l,head:n,body:s,foot:a}}function o5e(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(i=o?.colSpan||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=s.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};s.push(d)}}),s}var Jk=(function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t})(),l5e=(function(t){Q$(e,t);function e(r,n,s,a,i,o){var l=t.call(this,r,n,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e})(Jk),c5e=(function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,a,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new l5e(e,this,n,s,a,i),p=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var a=s[n];a(new Jk(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var a=s[n];a(new Jk(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t})(),aq=(function(){function t(e,r,n,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof J$&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var a;return Math.max(n,((a=r.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,a){var i=n.cells[a.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>s?u:s},0)},t})(),iq=(function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,a=n*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=k4(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t})(),u5e=(function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var a=s[n],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t})();function d5e(t,e){f5e(t,e);var r=[],n=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=Zk(r,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=Zk(r,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),p5e(e),m5e(e,t),h5e(e)}function f5e(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=tq(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var p=u.padding("horizontal");u.contentWidth=ab(u.text,u.styles,t)+p;var g=ab(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=g+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},p=d.cellWidth||d.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function Zk(t,e,r){for(var n=e,s=t.reduce(function(m,x){return m+x.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=n*o,u=i.width+l,d=r(i),p=u<d?d:u;e-=p-i.width,i.width=p}if(e=Math.round(e*1e10)/1e10,e){var g=t.filter(function(m){return e<0?m.width>r(m):!0});g.length&&(e=Zk(g,e,r))}return e}function h5e(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var a=n[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(r>1)r--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var p=n.length-s,g=d.rowSpan>p?p:d.rowSpan;e[l.index]={cell:d,left:g,row:a}}}}}function p5e(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete n.cells[l.index];else if(s){var u=s;delete n.cells[l.index],s=null,u.width=l.width+a}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=l.width;continue}u.width=l.width+a}}}function m5e(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var a=s[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Sj(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Sj(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var p=u.styles.overflow(u.text,d);typeof p=="string"?u.text=[p]:u.text=p}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<g*u.rowSpan?r={height:g,count:u.rowSpan}:r&&r.count>0&&r.height>g&&(g=r.height),g>a.height&&(a.height=g)}}r.count--}}function Sj(t,e,r,n,s){return t.map(function(a){return g5e(a,e,r,n,s)})}function g5e(t,e,r,n,s){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=ab(t,r,n))return t;for(;e<ab(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function oq(t,e){var r=new f1(t),n=x5e(e,r.scaleFactor()),s=new c5e(e,n);return d5e(r,s),r.applyStyles(r.userStyles),s}function x5e(t,e){var r=t.content,n=v5e(r.columns);if(r.head.length===0){var s=Nj(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=Nj(n,"foot");s&&r.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:n,head:W3("head",r.head,n,i,a,e),body:W3("body",r.body,n,i,a,e),foot:W3("foot",r.foot,n,i,a,e)}}function W3(t,e,r,n,s,a){var i={},o=e.map(function(l,u){for(var d=0,p={},g=0,m=0,x=0,y=r;x<y.length;x++){var b=y[x];if(i[b.index]==null||i[b.index].left===0)if(m===0){var S=void 0;Array.isArray(l)?S=l[b.index-g-d]:S=l[b.dataKey];var P={};typeof S=="object"&&!Array.isArray(S)&&(P=S?.styles||{});var T=w5e(t,b,u,s,n,a,P),O=new iq(S,T,t);p[b.dataKey]=O,p[b.index]=O,m=O.colSpan-1,i[b.index]={left:O.rowSpan-1,times:m}}else m--,g++;else i[b.index].left--,m=i[b.index].times,d++}return new aq(l,u,t,p)});return o}function Nj(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=y5e(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function y5e(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function v5e(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new u5e(s,e,r)})}function w5e(t,e,r,n,s,a,i){var o=Ywe(n),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var u=Wd({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},p=t==="body"?d:{},g=t==="body"&&r%2===0?Wd({},o.alternateRow,s.alternateRowStyles):{},m=Kwe(a),x=Wd({},m,u,g,p);return Wd(x,i)}function b5e(t,e,r){var n;r===void 0&&(r={});var s=tq(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(g){var m=e.columns.find(function(x){return x.dataKey===g||x.index===g});m&&!a.has(m.index)&&(a.set(m.index,!0),i.push(m.index),o.push(e.columns[m.index]),s-=m.wrappedWidth)});for(var u=!0,d=(n=r?.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var p=e.columns[d].wrappedWidth;if(u||s>=p)u=!1,i.push(d),o.push(e.columns[d]),s-=p;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function _5e(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=b5e(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function lq(t,e){var r=e.settings,n=r.startY,s=r.margin,a={x:s.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+s.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(g,m){return g+m.height},0);o+=u}var d=new f1(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(uq(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var p=Wd({},a);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?k5e(d,e,p,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(g){return cf(d,e,g,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,m){var x=m===e.body.length-1;ib(d,e,g,x,p,a,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(g){return cf(d,e,g,a,e.columns)})),Z$(d,e,p,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function k5e(t,e,r,n){var s=_5e(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Kx(t,e,r,n,u.columns,!0):Ej(t,e,n,u.columns),S5e(t,e,r,n,u.columns),G3(t,e,n,u.columns)});else for(var i=-1,o=s[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Kx(t,e,r,n,d,!0):Ej(t,e,n,d),u=Cj(t,e,i+1,n,d),G3(t,e,n,d)}var p=u-i;s.slice(1).forEach(function(g){t.applyStyles(t.userStyles),Kx(t,e,r,n,g.columns,!0),Cj(t,e,i+1,n,g.columns,p),G3(t,e,n,g.columns)}),i=u};i<e.body.length-1;)l()}function Ej(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return cf(t,e,a,r,n)})}function S5e(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;ib(t,e,a,o,r,n,s)})}function Cj(t,e,r,n,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(r+a,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,u){var d=r+u===e.body.length-1,p=cq(t,e,d,n);l.canEntireRowFit(p,s)&&(cf(t,e,l,n,s),o=r+u)}),o}function G3(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return cf(t,e,a,r,n)})}function N5e(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/n);return Math.max(0,a)}function E5e(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new iq(u.raw,u.styles,u.section);d=Wd(d,u),d.text=[];var p=N5e(u,e,n);u.text.length>p&&(d.text=u.text.splice(p,u.text.length));var g=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(g,m),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(g,m),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var x=new aq(t.raw,-1,t.section,s,!0);x.height=a;for(var y=0,b=r.columns;y<b.length;y++){var l=b[y],d=x.cells[l.index];d&&(d.height=x.height);var u=t.cells[l.index];u&&(u.height=t.height)}return x}function C5e(t,e,r,n){var s=t.pageSize().height,a=n.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),p=e.getMaxCellHeight(n.columns)>o;return p?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function ib(t,e,r,n,s,a,i){var o=cq(t,e,n,a);if(r.canEntireRowFit(o,i))cf(t,e,r,a,i);else if(C5e(t,r,o,e)){var l=E5e(r,o,e,t);cf(t,e,r,a,i),Kx(t,e,s,a,i),ib(t,e,l,n,s,a,i)}else Kx(t,e,s,a,i),ib(t,e,r,n,s,a,i)}function cf(t,e,r,n,s){n.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}A5e(t,l,n);var d=l.getTextPos();X$(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function A5e(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=eq(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),T5e(t,e,r,n.lineWidth))}function T5e(t,e,r,n){var s,a,i,o;n.top&&(s=r.x,a=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.top,s,a,i,o)),n.bottom&&(s=r.x,a=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.bottom,s,a,i,o)),n.left&&(s=r.x,a=r.y,i=r.x,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,s,a,i,o)),n.right&&(s=r.x+e.width,a=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,s,a,i,o));function l(u,d,p,g,m){t.getDocument().setLineWidth(u),t.getDocument().line(d,p,g,m,"S")}}function cq(t,e,r,n){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function Kx(t,e,r,n,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return cf(t,e,o,n,s)}),e.callEndPageHooks(t,n);var i=e.settings.margin;Z$(t,e,r,n),uq(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return cf(t,e,o,n,s)}),t.applyStyles(t.userStyles))}function uq(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function I5e(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=sq(this,n),a=oq(this,s);return lq(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){X$(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return f1.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){f1.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new f1(this),a=nq(s,e,window,r,!1),i=a.head,o=a.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var K3;function Aj(t,e){var r=sq(t,e),n=oq(t,r);lq(t,n)}try{if(typeof window<"u"&&window){var Tj=window,Ij=Tj.jsPDF||((K3=Tj.jspdf)===null||K3===void 0?void 0:K3.jsPDF);Ij&&I5e(Ij)}}catch(t){console.error("Could not apply autoTable plugin",t)}async function P5e(t){const e=new Cr;e.setFont("helvetica","normal"),e.setFontSize(16),e.text("Pharmacy Profile Report",20,20),e.setFontSize(12),e.text(`Name: ${t?.displayName||"Pharmacy"}`,20,35),e.text(`Email: ${t?.email||""}`,20,45);const r=await Pa(doc(ct,"pharmacies",t.uid)),n=r.exists()?r.data():{};e.text(`Address: ${n.address||""}`,20,55),e.text(`Phone: ${n.phone||""}`,20,65);const a=(await vn(br(tr(ct,"products"),Fr("pharmacyId","==",t.uid)))).docs.map(u=>({id:u.id,...u.data()}));Aj(e,{startY:75,head:[["Product Name","Category","Stock","SKU","Price"]],body:a.map(u=>[u.name,u.category,u.stock,u.sku,`₦${Number(u.price).toLocaleString()}`]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:10}});const o=(await vn(br(tr(ct,"orders"),Fr("pharmacyId","==",t.uid)))).docs.map(u=>({id:u.id,...u.data()}));let l=e.lastAutoTable?e.lastAutoTable.finalY+10:100;e.setFontSize(14),e.text("Orders",20,l),l+=6,Aj(e,{startY:l,head:[["Order ID","Date","Total","Items"]],body:o.map(u=>[u.id.slice(0,8),u.createdAt?.toDate?.().toLocaleString?.()||"",`₦${Number(u.total).toLocaleString()}`,(u.items||[]).map(d=>`${d.name||d.productId} x${d.qty||d.quantity||1}`).join(", ")]),theme:"striped",headStyles:{fillColor:[54,165,255]},styles:{fontSize:9}}),e.save("pharmacy-profile-report.pdf")}function j5e(){return c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsxs("section",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"h-16 w-16 rounded-3xl bg-sky-100 dark:bg-slate-700/80"}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx("div",{className:"h-4 w-3/4 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/50 dark:bg-slate-600/60"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]}),c.jsxs("div",{className:"mt-5 flex gap-3",children:[c.jsx("div",{className:"h-10 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-10 w-12 rounded-full bg-sky-50 dark:bg-slate-800/70"})]})]}),c.jsx("section",{className:"grid grid-cols-2 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70 mb-3"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]})]},e))}),c.jsxs("section",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm space-y-3",children:[c.jsx("div",{className:"h-4 w-40 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/40 dark:bg-slate-600/40"}),c.jsx("div",{className:"h-3 w-5/6 rounded-full bg-sky-100/40 dark:bg-slate-600/40"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-9 flex-1 rounded-full bg-sky-100/70 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/70 dark:bg-slate-700/70"})]})]}),c.jsxs("section",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 w-44 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-14 w-14 rounded-2xl bg-sky-100/80 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-9 flex-1 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-20 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]},e))})]})]})}function R5e(){return c.jsxs("div",{className:"animate-pulse space-y-8",children:[c.jsxs("section",{className:"grid grid-cols-[0.55fr_0.45fr] gap-6 rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-start gap-5",children:[c.jsx("div",{className:"h-24 w-24 rounded-[32px] bg-sky-100 dark:bg-slate-700/80"}),c.jsxs("div",{className:"flex-1 space-y-4",children:[c.jsx("div",{className:"h-6 w-2/3 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-1/2 rounded-full bg-sky-100/50 dark:bg-slate-600/60"}),c.jsx("div",{className:"h-4 w-3/4 rounded-full bg-sky-100/40 dark:bg-slate-600/50"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-4 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-4 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"})]})]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-4",children:[c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70 mb-4"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 w-2/3 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/50 dark:bg-slate-600/60"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]},e))})]}),c.jsxs("div",{className:"grid grid-cols-[0.38fr_0.62fr] gap-6",children:[c.jsxs("aside",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-3",children:[c.jsx("div",{className:"h-4 w-40 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/50 dark:bg-slate-600/50"}),c.jsx("div",{className:"h-3 w-4/5 rounded-full bg-sky-100/40 dark:bg-slate-600/40"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-10 flex-1 rounded-full bg-sky-100/70 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-10 w-36 rounded-full bg-sky-100/70 dark:bg-slate-700/70"})]})]}),c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"h-11 w-11 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-8 w-16 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]},e))})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"h-4 w-48 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-11 w-40 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-11 w-40 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-11 flex-1 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]}),c.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((t,e)=>c.jsx("div",{className:"rounded-3xl border border-sky-100 bg-white/90 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"h-20 w-20 rounded-3xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx("div",{className:"h-4 w-2/3 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/50 dark:bg-slate-600/60"}),c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/40 dark:bg-slate-600/50"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]}),c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]})},e))})]})]})]})}const L5e=({title:t,searchValue:e,onSearchChange:r,onSearchSubmit:n,onSettingsClick:s})=>{const{t:a}=Ds();return mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"mt-8 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:a("pharmacy_profile",`Pharmacy
Profile`).replace("\\n",`
`)}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:n,"aria-label":"Search",className:"ml-2 rounded-full p-2 hover:bg-sky-50",children:c.jsx(jh,{className:"h-5 w-5 text-sky-600 mt-8"})}),c.jsx("button",{onClick:s,"aria-label":"Open settings",className:"ml-2 rounded-full p-2 hover:bg-sky-50 transition-all duration-200",children:c.jsx(V5,{className:"h-5 w-5 text-sky-600 mt-8"})})]})]})})}),document.body)};function dq({onSwitchToCustomer:t}){const{user:e,logout:r,profile:n}=Vn(),{t:s}=Ds(),[a,i]=R.useState([]),[o,l]=R.useState(!0),[u,d]=R.useState(!1),[p,g]=R.useState(0),[m,x]=R.useState(0),[y,b]=R.useState(0),[S,P]=R.useState(null),[T,O]=R.useState(""),[W,Y]=R.useState(""),[L,A]=R.useState(""),[N,D]=R.useState(""),[j,F]=R.useState(""),[M,Z]=R.useState(""),[ue,pe]=R.useState(null),[fe,te]=R.useState(!1),[H,ie]=R.useState(!1),[K,I]=R.useState(!1),[z,X]=R.useState(new Set),[J,se]=R.useState({displayName:e?.displayName||"Pharmacy",address:"",phone:"",email:e?.email||"",isVerified:n?.isVerified??!1}),[le,ve]=R.useState(""),[xe,Ee]=R.useState(""),[ke,oe]=R.useState(!1),[Fe,Pe]=R.useState("products"),[ne,ye]=R.useState(null),[Ae,Be]=R.useState(!0),[Oe,pt]=R.useState(!1),[nt,Lt]=R.useState({pharmacyName:"",contactName:"",contactEmail:"",contactPhone:"",addressLine1:"",city:"",state:"",postalCode:"",registrationNumber:"",taxId:"",licenseUrl:"",ownerIdUrl:"",website:"",ownerName:"",yearsInBusiness:"",additionalNotes:""}),[Ct,Nt]=R.useState(""),[_t,ot]=R.useState(!1),[Bt,Ot]=R.useState(""),ft={pending:{label:"Pending review",tone:"bg-amber-100 text-amber-700"},in_review:{label:"In review",tone:"bg-sky-100 text-sky-700"},approved:{label:"Verified",tone:"bg-emerald-100 text-emerald-700"},rejected:{label:"Rejected",tone:"bg-rose-100 text-rose-700"},needs_more_info:{label:"Action required",tone:"bg-amber-100 text-amber-700"}},[st,wt]=R.useState(0),me=[{key:"business",title:"Business details",description:"Introduce your pharmacy and primary point of contact."},{key:"compliance",title:"Compliance documents",description:"Share your registered address and regulatory identifiers."},{key:"extras",title:"Optional extras",description:"Add supporting context to speed up approval."}],Ue={0:["pharmacyName","contactName","contactEmail","contactPhone"],1:["addressLine1","city","state","registrationNumber","licenseUrl"]},ut=me.length,[Ut,nr]=R.useState(!1),Dt=R.useRef(null),$t=R.useRef(nt),jt=R.useRef(st),pr=R.useRef(null);R.useEffect(()=>{e&&e.role==="pharmacy"&&Pe("all")},[e]),R.useEffect(()=>{if(!e?.uid){ye(null);return}Be(!0);const De=br(tr(ct,"verificationQueue"),Fr("submittedByUid","==",e.uid)),Kt=Dn(De,ar=>{const Sr=ar.docs[0];Sr?(pr.current=Sr.id,ye({id:Sr.id,...Sr.data()})):(pr.current=null,ye(null)),Be(!1)},ar=>{console.error("[ProfilePharmacy] verification listener error",ar),Be(!1)});return()=>Kt()},[e?.uid]),R.useEffect(()=>{$t.current=nt},[nt]),R.useEffect(()=>{jt.current=st},[st]),R.useEffect(()=>()=>{Dt.current&&clearTimeout(Dt.current)},[]),R.useEffect(()=>{if(!Oe)return;const De=ei();Lt(De),$t.current=De,Nt("");const Kt=typeof ne?.draftStep=="number"?Math.min(Math.max(0,ne.draftStep),ut-1):0;wt(Kt),jt.current=Kt},[Oe,ne,J,n,e]);const[hn,an]=R.useState(null),[kr,Vr]=R.useState([]),[va,Ss]=R.useState(null),[Da,Hs]=R.useState(null),[vr,pn]=R.useState(null),ei=()=>{const De=Array.isArray(ne?.documents)?ne.documents:[],Kt=ar=>{const Sr=ar.toLowerCase();return De.find(Tr=>(Tr?.name||"").toLowerCase()===Sr)?.url};return{pharmacyName:ne?.entityName||J.displayName||n?.businessName||"",contactName:ne?.contactName||n?.ownerName||"",contactEmail:ne?.contactEmail||J.email||e?.email||"",contactPhone:ne?.contactPhone||J.phone||"",addressLine1:ne?.location?.addressLine1||J.address||"",city:ne?.location?.city||"",state:ne?.location?.state||"",postalCode:ne?.location?.postalCode||"",registrationNumber:ne?.registrationNumber||n?.registrationNumber||"",taxId:ne?.taxId||n?.taxId||"",licenseUrl:Kt("pharmacy license")||Kt("license")||De[0]?.url||"",ownerIdUrl:Kt("owner id")||Kt("owner identification")||"",website:ne?.metadata?.website||n?.website||"",ownerName:ne?.metadata?.ownerName||n?.ownerName||"",yearsInBusiness:ne?.metadata?.yearsInBusiness||"",additionalNotes:ne?.notes||""}},Zn=De=>{const Kt=[De.licenseUrl?.trim()?{name:"Pharmacy License",url:De.licenseUrl.trim()}:null,De.ownerIdUrl?.trim()?{name:"Owner Identification",url:De.ownerIdUrl.trim()}:null].filter(Boolean),ar={addressLine1:De.addressLine1?.trim()||"",city:De.city?.trim()||"",state:De.state?.trim()||"",postalCode:De.postalCode?.trim()||""},Sr={website:De.website?.trim()||null,ownerName:De.ownerName?.trim()||null,yearsInBusiness:De.yearsInBusiness?.trim()||null};return{entityName:De.pharmacyName?.trim()||"",contactName:De.contactName?.trim()||"",contactEmail:De.contactEmail?.trim()||"",contactPhone:De.contactPhone?.trim()||"",registrationNumber:De.registrationNumber?.trim()||"",taxId:De.taxId?.trim()||"",documents:Kt,location:ar,metadata:Sr,notes:De.additionalNotes?.trim()||""}},Os=async(De,Kt)=>{if(!e?.uid||_t||(Dt.current=null,!Oe))return;const ar=De||$t.current,Sr=typeof Kt=="number"?Kt:jt.current,Tr={...Zn(ar),draftStep:Sr,updatedAt:Is()};try{nr(!0);const dn=ne?.id||pr.current;if(dn)await ds(ir(ct,"verificationQueue",dn),{...Tr});else{const Tn=await af(tr(ct,"verificationQueue"),{...Tr,applicantType:"pharmacy",submittedBy:J.displayName||e?.displayName||e?.email||"Pharmacy",submittedByUid:e?.uid||"",priority:"medium",status:"draft",draft:!0,createdAt:Is()});pr.current=Tn.id}}catch(dn){console.error("[ProfilePharmacy] verification autosave failed",dn)}finally{nr(!1)}},Ln=(De,Kt)=>{if(!Oe||_t)return;Dt.current&&clearTimeout(Dt.current);const ar=De||$t.current,Sr=typeof Kt=="number"?Kt:jt.current;Dt.current=setTimeout(()=>{Os(ar,Sr)},600)},en=(De,Kt)=>{Lt(ar=>{const Sr={...ar,[De]:Kt};return $t.current=Sr,Ln(Sr,jt.current),Sr})},ce=(De=st)=>(Ue[De]||[]).filter(Sr=>!String(nt[Sr]||"").trim()).length?(Nt("Please fill in all required fields before continuing."),!1):(Nt(""),!0),je=()=>{ce(st)&&wt(De=>{const Kt=Math.min(De+1,ut-1);return jt.current=Kt,Ln($t.current,Kt),Kt})},Se=()=>{Nt(""),wt(De=>{const Kt=Math.max(De-1,0);return jt.current=Kt,Ln($t.current,Kt),Kt})},Ne=(De,Kt="pending")=>({actor:J.displayName||e?.displayName||e?.email||"Pharmacy",message:De,status:Kt,timestamp:new Date}),Re=De=>ft[De]||{label:"Not submitted",tone:"bg-slate-200 text-slate-600"},Le=De=>{try{if(!De)return"";const Kt=De.toDate?De.toDate():new Date(De);return!Kt||Number.isNaN(Kt.getTime())?"":Kt.toLocaleString()}catch{return""}},Ge=async De=>{if(De?.preventDefault&&De.preventDefault(),_t||!ce(st))return;if(["pharmacyName","contactName","contactEmail","contactPhone","addressLine1","city","state","registrationNumber","licenseUrl"].filter(Sr=>!String(nt[Sr]||"").trim()).length>0){Nt("Please fill in all required fields before submitting.");return}ot(!0),Nt("");try{const An={...Zn(nt),status:"pending",draft:!1,draftStep:null,updatedAt:Is()};if(ne?.id){const Tr=ir(ct,"verificationQueue",ne.id);await ds(Tr,{...An,auditTrail:Fx(Ne("Pharmacy updated verification submission","pending"))})}else{const Tr=await af(tr(ct,"verificationQueue"),{...An,applicantType:"pharmacy",submittedBy:J.displayName||e?.displayName||e?.email||"Pharmacy",submittedByUid:e?.uid||"",priority:"medium",submittedAt:Is(),auditTrail:[Ne("Pharmacy submitted verification request")],checklist:{licenseValidated:!1,addressVerified:!1,taxIdVerified:!1,phoneVerified:!1}});pr.current=Tr.id}Ot("Your verification documents have been sent for review."),Dt.current&&(clearTimeout(Dt.current),Dt.current=null),pt(!1),wt(0),jt.current=0}catch(Sr){console.error("[ProfilePharmacy] verification submission failed",Sr),Nt(Sr?.message||"Unable to submit verification right now. Please try again.")}finally{ot(!1)}},lt=40;function Xe(De){if(!De)return null;if(De.latitude&&De.longitude)return{lat:Number(De.latitude),lng:Number(De.longitude)};if(De.lat&&De.lng)return{lat:Number(De.lat),lng:Number(De.lng)};if(De.lat&&De.lon)return{lat:Number(De.lat),lng:Number(De.lon)};if(De.location&&typeof De.location=="object"){if(De.location.lat&&De.location.lng)return{lat:Number(De.location.lat),lng:Number(De.location.lng)};if(De.location.latitude&&De.location.longitude)return{lat:Number(De.location.latitude),lng:Number(De.location.longitude)}}if(De.coords&&typeof De.coords=="object"){if(De.coords.latitude&&De.coords.longitude)return{lat:Number(De.coords.latitude),lng:Number(De.coords.longitude)};if(De.coords.lat&&De.coords.lng)return{lat:Number(De.coords.lat),lng:Number(De.coords.lng)}}return null}function Qe(De,Kt){if(!De||!Kt)return null;const ar=aa=>aa*Math.PI/180,Sr=6371,An=ar(Kt.lat-De.lat),Tr=ar(Kt.lng-De.lng),dn=ar(De.lat),Tn=ar(Kt.lat),Ji=Math.sin(An/2),In=Math.sin(Tr/2),_n=Ji*Ji+Math.cos(dn)*Math.cos(Tn)*In*In,Ws=2*Math.atan2(Math.sqrt(_n),Math.sqrt(1-_n));return Sr*Ws}function rt(De,Kt){if(De==null||Kt==null||Kt<=0)return null;const ar=De/Kt,Sr=Math.round(ar*60);if(Sr<60)return`${Sr} min`;const An=Math.floor(Sr/60),Tr=Sr%60;return`${An}h ${Tr}m`}R.useEffect(()=>{if(Da||!("geolocation"in navigator))return;let De=!0;return navigator.geolocation.getCurrentPosition(Kt=>{De&&Hs({lat:Kt.coords.latitude,lng:Kt.coords.longitude})},Kt=>{console.debug("[ProfilePharmacy] geolocation error",Kt)},{enableHighAccuracy:!1,timeout:1e4}),()=>{De=!1}},[]),R.useEffect(()=>{if(!va)return pn(null);const De=Xe(va.data);if(!De){pn(null);return}let Kt=Da||null;if(!Kt&&va&&va.source==="users"){const An=Xe(va.data);An&&(Kt=An)}if(!Kt){pn(null);return}const ar=Qe(Kt,De);if(ar==null){pn(null);return}const Sr=rt(ar,lt);pn({distanceKm:ar,eta:Sr,speedKmh:lt,pharmCoords:De,custCoords:Kt})},[va,Da]);const At=Jn();R.useEffect(()=>{const De=n?.uid||e?.uid;if(De)return RS(i,De)},[n,e]),R.useEffect(()=>{const De=n?.uid||e?.uid;if(!De)return l(!1),()=>{};let Kt=!0;const ar=async()=>{l(!0);try{const[_n,Ws,aa]=await Promise.all([vn(br(tr(ct,"orders"),Fr("pharmacyId","==",De))),vn(br(tr(ct,"threads"),Fr("vendorId","==",De))),vn(br(tr(ct,"reviews"),Fr("pharmacyId","==",De)))]);if(!Kt)return;let Ri=0;_n.forEach(on=>{const Zi=on.data();Ri+=(Zi.items||[]).reduce((rn,ia)=>rn+(ia.count||ia.qty||ia.quantity||1),0)}),g(Ri),x(Ws.size),b(aa.size)}catch(_n){console.error("Error loading pharmacy metrics:",_n),Kt&&(g(0),x(0),b(0))}finally{Kt&&l(!1)}},Sr=ir(ct,"pharmacies",De),An=ir(ct,"users",De);let Tr=null,dn=null;const Tn=()=>{if(!Kt)return;const _n=Ws=>{if(!Ws)return"";const aa=String(Ws).trim();return!aa||aa.includes("@")||aa.replace(/\D/g,"").length<6?"":aa};se(Ws=>{const aa=Tr&&Tr.displayName||dn&&dn.displayName||e.displayName||Ws.displayName,Ri=Tr&&Tr.address||dn&&dn.address||Ws.address||"",on=Tr&&Tr.phone||dn&&dn.phone||Ws.phone||"",Zi=_n(on),rn=Tr&&Tr.email||dn&&dn.email||e.email||Ws.email||"",ia=(Tr&&Tr.isVerified)??(dn&&dn.isVerified)??Ws.isVerified??!1;return{displayName:aa,address:Ri,phone:Zi,email:rn,isVerified:ia}})},Ji=Dn(Sr,_n=>{Tr=_n&&_n.exists?_n.data():null,Tn()},()=>{}),In=Dn(An,_n=>{dn=_n&&_n.exists?_n.data():null,Tn()},()=>{});return ar(),Tn(),()=>{Kt=!1;try{Ji&&Ji()}catch{}try{In&&In()}catch{}}},[n,e]);async function Gt(){await P5e(n||e)}async function er(){if(!S)return;let De=M;await ds(ir(ct,"products",S.id),{name:T,category:W,stock:Number(L),sku:N,price:Number(j),image:De||S.image||"",description:le}),P(null)}function qt(){P(null)}R.useEffect(()=>{S&&(O(S.name||""),Y(S.category||""),A(S.stock||""),D(S.sku||""),F(S.price||""),Z(S.image||""),pe(null),ve(S.description||""))},[S]);async function It(){const De=(xe||"").trim().toLowerCase();if(!De){Vr([]);return}const Kt=[];if((Fe==="products"||Fe==="all")&&a.forEach(ar=>{`${ar.name||""} ${ar.category||""} ${ar.sku||""}`.toLowerCase().includes(De)&&Kt.push({type:"product",title:ar.name||"Untitled",subtitle:`${ar.category||"Uncategorized"} • SKU: ${ar.sku||"—"}`,item:ar})}),Fe==="orders"||Fe==="all"){let ar=hn;ar||(ar=(await vn(br(tr(ct,"orders"),Fr("pharmacyId","==",n?.uid||e?.uid)))).docs.map(An=>({id:An.id,...An.data()})),an(ar)),(ar||[]).forEach(Sr=>{`${Sr.id} ${(Sr.items||[]).map(Tr=>Tr.name).join(" ")} ${Sr.customerName||""}`.toLowerCase().includes(De)&&Kt.push({type:"order",title:`Order ${Sr.id}`,subtitle:`${Sr.items?.length||0} items — ₦${Number(Sr.total||0).toLocaleString()}`,item:Sr})})}Vr(Kt)}R.useEffect(()=>{if(!ke)return;function De(Kt){Kt.key==="Escape"&&(oe(!1),Ee(""),Vr([]))}return window.addEventListener("keydown",De),()=>window.removeEventListener("keydown",De)},[ke]),R.useEffect(()=>{if(!ke)return;if(!(xe||"").trim()){Vr([]);return}const Kt=setTimeout(()=>{It()},300);return()=>clearTimeout(Kt)},[xe,Fe,ke]);function Ar(De){try{return De&&De.toDate?De.toDate().toISOString():De||""}catch{return""}}function bn(){if(!a||a.length===0){alert("No products to export");return}const De=a.map(Tr=>({id:Tr.id,name:Tr.name||"",category:Tr.category||"",sku:Tr.sku||"",price:Number(Tr.price||0),stock:Number(Tr.stock||0),description:Tr.description||"",image:Tr.image||"",createdAt:Ar(Tr.createdAt)})),Kt=KV.unparse(De),ar=new Blob([Kt],{type:"text/csv;charset=utf-8;"}),Sr=URL.createObjectURL(ar),An=document.createElement("a");An.href=Sr,An.download=`pharmacy-inventory-${e?.uid||"inventory"}.csv`,document.body.appendChild(An),An.click(),An.remove(),URL.revokeObjectURL(Sr)}function Kr(){if(!a||a.length===0){alert("No products to export");return}const De=a.map(Tn=>({id:Tn.id,name:Tn.name||"",category:Tn.category||"",sku:Tn.sku||"",price:Number(Tn.price||0),stock:Number(Tn.stock||0),description:Tn.description||"",image:Tn.image||"",createdAt:Ar(Tn.createdAt)})),Kt=Uw.json_to_sheet(De),ar=Uw.book_new();Uw.book_append_sheet(ar,Kt,"Inventory");const Sr=e$(ar,{bookType:"xlsx",type:"array"}),An=new Blob([Sr],{type:"application/octet-stream"}),Tr=URL.createObjectURL(An),dn=document.createElement("a");dn.href=Tr,dn.download=`pharmacy-inventory-${e?.uid||"inventory"}.xlsx`,document.body.appendChild(dn),dn.click(),dn.remove(),URL.revokeObjectURL(Tr)}const tn=(ne?.status||"").toLowerCase(),xi=Re(tn),ji=!ne||["rejected","needs_more_info","draft",""].includes(tn),ti=ne?tn==="draft"?"Continue Verification":"Update Verification":"Verify my Account",gs=tn==="approved"?"Verified":tn==="in_review"?"In review":"Submission received";if(!e)return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-900",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:s("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>At("/auth/landing"),children:s("sign_in_sign_up","Sign In / Sign Up")})]});if(o)return c.jsxs("div",{className:"px-4 md:px-6 lg:px-10 xl:px-14 py-8",children:[c.jsx("div",{className:"lg:hidden",children:c.jsx(j5e,{})}),c.jsx("div",{className:"hidden lg:block",children:c.jsx(R5e,{})})]});function el({user:De}){return!De||De.role!=="superuser"?null:c.jsxs("div",{className:"mt-8 rounded-3xl border bg-yellow-50 dark:bg-gray-700 border-yellow-400 dark:border-gray-600 p-4 flex flex-col items-start relative",children:[c.jsx("div",{className:"text-[20px] font-bold text-yellow-700 dark:text-yellow-400 mb-2",children:"Superuser Dashboard"}),c.jsxs("ul",{className:"space-y-2 text-[15px] text-yellow-900",children:[c.jsx("li",{children:"Manage all users (view, edit, suspend, delete)"}),c.jsx("li",{children:"Product oversight (add, edit, remove, approve/reject)"}),c.jsx("li",{children:"Prescription management"}),c.jsx("li",{children:"Analytics & reports"}),c.jsx("li",{children:"Moderation (reviews, chats, reported content)"}),c.jsx("li",{children:"System settings"}),c.jsx("li",{children:"Bulk operations"}),c.jsx("li",{children:"Audit logs"}),c.jsx("li",{children:"Impersonate users"})]}),c.jsx("div",{className:"mt-4 text-[13px] text-yellow-700",children:"(Feature scaffolding: UI and logic for each capability can be expanded here.)"})]})}return c.jsxs(c.Fragment,{children:[c.jsx(L5e,{title:"Pharmacy Profile",searchValue:xe,onSearchChange:De=>Ee(De.target.value),onSearchSubmit:()=>{It(),oe(!0)},onSettingsClick:()=>At("/settings")}),c.jsxs("div",{className:"pt-28 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[c.jsx(el,{user:e}),ke&&c.jsx("div",{onClick:()=>{oe(!1),Ee(""),Vr([])},className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/50",role:"dialog","aria-modal":"true","aria-label":"Search modal",children:c.jsxs("div",{onClick:De=>De.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-3xl w-[min(920px,95%)] p-4 shadow-xl border border-[#9ED3FF] dark:border-gray-600 max-h-[80vh] overflow-hidden",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3 w-full",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-center bg-[#F0FAFF] dark:bg-gray-700 border border-[#9ED3FF] dark:border-gray-600 rounded-full px-3 py-2 w-full overflow-hidden",children:[c.jsx(jh,{className:"h-4 w-4 text-sky-600 dark:text-sky-400 mr-2 flex-shrink-0"}),c.jsx("input",{autoFocus:!0,value:xe,onChange:De=>Ee(De.target.value),onKeyDown:De=>{De.key==="Enter"&&It()},placeholder:"Search products, orders, customers...",className:"flex-1 min-w-0 bg-transparent text-sm outline-none truncate dark:text-white dark:placeholder:text-gray-400","aria-label":"Search query"})]})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("select",{value:Fe,onChange:De=>Pe(De.target.value),className:"rounded-full border border-[#9ED3FF] dark:border-gray-600 px-3 py-2 text-sm bg-white dark:bg-gray-700 dark:text-white w-36",children:[c.jsx("option",{value:"products",children:"Products"}),c.jsx("option",{value:"orders",children:"Orders"}),c.jsx("option",{value:"all",children:"All"})]})})]}),c.jsx("div",{className:"w-full border-t mt-3",style:{borderColor:"#E6F7FF"}})]}),c.jsx("div",{className:"mt-4 max-h-[60vh] overflow-auto px-1 py-2",children:kr.length===0?c.jsx("div",{className:"text-zinc-500 dark:text-gray-300 p-4",children:"No results yet. Enter a query."}):c.jsx("ul",{className:"space-y-2",children:kr.map((De,Kt)=>c.jsxs("li",{className:"p-2 rounded-2xl border border-[#9ED3FF] dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition-all duration-200 flex items-center gap-3 justify-between animate-fadeInUp card-interactive hover:shadow-md",style:{animationDelay:`${Kt*.05}s`},children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"flex-shrink-0",children:De.type==="product"?c.jsx(hd,{name:De.item?.name,image:De.item?.image,category:De.item?.category,size:48,className:"rounded-lg"}):c.jsx("div",{className:"h-12 w-12 rounded-lg bg-[#fff7ed] dark:bg-gray-600 flex items-center justify-center border border-[#ffd7a8] dark:border-gray-500 animate-pulse-gentle",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"text-orange-500 dark:text-orange-400",children:c.jsx("path",{d:"M3 7h18M3 12h18M3 17h18",stroke:"#f59e0b",strokeWidth:"1.5",strokeLinecap:"round"})})})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-semibold text-sm text-black dark:text-white truncate",children:De.title}),c.jsx("div",{className:"text-xs text-zinc-500 dark:text-gray-300 truncate",children:De.subtitle})]})]}),c.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:De.type==="product"?c.jsx("button",{onClick:()=>{P(De.item),oe(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Edit"}):c.jsx("button",{onClick:()=>{At("/orders",{state:{highlightOrderId:De.item.id}}),oe(!1)},className:"text-sky-600 rounded-full px-3 py-1 text-sm border border-transparent hover:bg-sky-50 dark:hover:bg-gray-600 btn-interactive transition-all duration-200",children:"Open"})})]},Kt))})})]})}),c.jsxs("div",{className:"mt-8 w-full grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6 items-start",children:[c.jsx("aside",{className:"min-w-0 lg:pr-2",children:c.jsxs("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start relative lg:sticky lg:top-24 overflow-hidden",children:[c.jsx("div",{className:"mb-2",children:e?.photoURL?c.jsx("img",{src:e.photoURL,alt:"Avatar",className:"h-16 w-16 rounded-full object-cover border border-[#9ED3FF] dark:border-gray-500 shadow"}):c.jsx("div",{className:"h-16 w-16 rounded-full bg-[#E3F3FF] dark:bg-gray-600 flex items-center justify-center border border-[#9ED3FF] dark:border-gray-500 shadow",children:c.jsx("span",{className:"text-sky-600 dark:text-sky-400 text-2xl font-light",children:J.displayName&&J.displayName.charAt?J.displayName.charAt(0):"P"})})}),c.jsx(Qd,{name:J.displayName||"Pharmacy",isVerified:J.isVerified,className:"text-l font-medium font-poppins text-sky-600 dark:text-sky-400 mb-1 tracking-tight truncate w-full",nameClassName:"truncate",iconClassName:"h-5 w-5 text-sky-500 dark:text-sky-400"}),c.jsx("div",{className:"w-full border-b dark:border-gray-600 mb-2",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"}}),c.jsx("div",{className:"text-[13px] text-zinc-500 font-light mb-1 truncate w-full",children:J.email||e?.email}),J.address&&c.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[c.jsx(Wu,{className:"h-4 w-4 mr-1 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:J.address})]}),J.phone&&c.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 flex items-center truncate w-full",children:[c.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 flex-shrink-0",children:c.jsx("path",{d:"M2.41333 5.19333C3.37333 7.08 4.92 8.62667 6.80667 9.58667L8.27333 8.12C8.46 7.93333 8.72 7.88 8.95333 7.95333C9.7 8.2 10.5 8.33333 11.3333 8.33333C11.5101 8.33333 11.6797 8.40357 11.8047 8.5286C11.9298 8.65362 12 8.82319 12 9V11.3333C12 11.5101 11.9298 11.6797 11.8047 11.8047C11.6797 11.9298 11.5101 12 11.3333 12C8.32755 12 5.44487 10.806 3.31946 8.68054C1.19404 6.55513 0 3.67245 0 0.666667C0 0.489856 0.0702379 0.320286 0.195262 0.195262C0.320286 0.0702379 0.489856 0 0.666667 0H3C3.17681 0 3.34638 0.0702379 3.4714 0.195262C3.59643 0.320286 3.66667 0.489856 3.66667 0.666667C3.66667 1.5 3.8 2.3 4.04667 3.04667C4.12 3.28 4.06667 3.54 3.88 3.72667L2.41333 5.19333Z",fill:"#7D7D7D"})}),c.jsx("span",{className:"truncate",children:J.phone})]}),vr&&c.jsxs("div",{className:"text-[13px] text-zinc-500 font-light mb-1 w-full truncate",children:["ETA: ",c.jsx("span",{className:"text-sky-600 font-medium",children:vr.eta})," • ",vr.distanceKm.toFixed(2)," km"]}),c.jsx("div",{className:"w-full mt-4 hidden lg:flex justify-start",children:c.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 dark:border-gray-600 text-red-600 dark:text-red-400 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[c.jsx(Nk,{className:"h-4 w-4"})," ",s("log_out","Log Out")]})})]})}),c.jsxs("section",{className:"min-w-0 space-y-6 lg:max-h-[calc(100vh-7rem)] lg:overflow-auto lg:pr-1",children:[c.jsxs("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col gap-4 relative overflow-hidden",children:[c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{className:"space-y-2 max-w-xl",children:[c.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white tracking-tight",children:"Account Verification"}),Ae?c.jsx(U5,{lines:2,className:"max-w-sm"}):c.jsx("p",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light leading-relaxed",children:ne?"We'll notify you as soon as compliance completes the review of your documents.":"Submit your regulatory documents to unlock order fulfillment, payouts, and marketplace visibility."}),Bt&&c.jsx("p",{className:"text-[12px] text-emerald-600 dark:text-emerald-400 font-medium",children:Bt})]}),!Ae&&c.jsx("span",{className:`self-start rounded-full px-3 py-1 text-[11px] font-semibold uppercase ${xi.tone}`,children:xi.label})]}),!Ae&&tn==="needs_more_info"&&c.jsx("p",{className:"text-[12px] text-amber-600 dark:text-amber-400",children:"Compliance requested additional information. Please update your submission below."}),!Ae&&tn==="rejected"&&c.jsx("p",{className:"text-[12px] text-rose-600 dark:text-rose-400",children:"Your previous submission was rejected. Review the notes and try again."}),!Ae&&tn==="approved"&&c.jsx("p",{className:"text-[12px] text-emerald-600 dark:text-emerald-400",children:"Your pharmacy is verified. Customers will now see a verification badge across Pharmasea."}),!Ae&&ne?.reviewerNote&&c.jsxs("p",{className:"text-[12px] text-slate-500 dark:text-slate-300",children:["Note from reviewer: ",c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-100",children:ne.reviewerNote})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!Ae&&ji?c.jsx("button",{type:"button",onClick:()=>{Ot(""),pt(!0)},className:"rounded-full bg-sky-600 text-white text-[12px] font-normal px-5 py-2 shadow hover:bg-sky-700 transition",children:ti}):c.jsx("button",{type:"button",disabled:!0,className:"rounded-full bg-slate-200 text-slate-500 text-[12px] font-medium px-5 py-2 cursor-not-allowed",children:Ae?"Checking status...":gs}),ne?.updatedAt&&!Ae&&c.jsxs("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400",children:["Last updated ",Le(ne.updatedAt)]})]})]}),c.jsxs("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 flex flex-col items-start relative overflow-hidden",children:[c.jsx("div",{className:"text-[18px] font-light font-poppins text-black dark:text-white mb-2 tracking-tight",children:s("storefront_preview","Storefront Preview")}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b dark:border-gray-600",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light",children:s("inventory","Inventory")}),c.jsx("span",{className:"text-[12px] text-sky-600 dark:text-sky-400 font-medium",children:a.length})]}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:s("products_sold","Products Sold")}),c.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:p})]}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:s("active_chats","Active Chats")}),c.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:m})]}),c.jsxs("div",{className:"w-full flex items-center justify-between pb-2 border-b",style:{borderColor:"#9ED3FF",borderBottomWidth:"0.5px"},children:[c.jsx("span",{className:"text-[12px] text-zinc-500 font-light",children:s("reviews","Reviews")}),c.jsx("span",{className:"text-[12px] text-sky-600 font-medium",children:y})]}),c.jsx("div",{className:"w-full flex justify-end mt-4",children:c.jsxs("button",{className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[12px] font-light flex items-center gap-1 shadow hover:bg-sky-700",onClick:Gt,children:[c.jsx(_le,{className:"h-4 w-4"})," ",s("download_report","Download report")]})})]}),c.jsxs("div",{className:"flex gap-2 w-full",children:[c.jsxs("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>At(`/add-product?pharmacyId=${n?.uid||e?.uid}`),children:["+ ",s("add_product","Add Product")]}),c.jsx("button",{className:"flex-1 rounded-full border border-sky-600 dark:border-gray-600 dark:border-gray-600 text-sky-600 dark:text-sky-400 text-[13px] font-light py-2 hover:bg-[#E3F3FF] dark:hover:bg-gray-700",onClick:()=>d(!0),children:s("bulk_upload","Bulk Upload")})]}),c.jsxs("div",{className:"rounded-3xl border bg-transparent dark:bg-gray-800 border-[#36A5FF] dark:border-gray-600 p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("div",{className:"text-[17px] font-light font-poppins text-black dark:text-white tracking-tight",children:s("products","Products")}),a.length>3&&c.jsx("button",{className:"text-sky-600 text-[13px] font-light px-3 py-1 rounded-full hover:bg-[#E3F3FF]",onClick:()=>I(De=>!De),children:K?s("see_less","See less"):s("see_more","See more")})]}),c.jsxs("div",{className:"space-y-3",children:[(K?a:a.slice(0,3)).map(De=>c.jsxs("button",{className:"w-full text-left rounded-2xl border border-[#9ED3FF] dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-700 hover:bg-[#E3F3FF] dark:hover:bg-gray-600 transition shadow-sm min-w-0 overflow-hidden",onClick:()=>P(De),type:"button",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(hd,{name:De.name,image:De.image,category:De.category,size:30,className:"border border-[#9ED3FF] dark:border-gray-500",roundedClass:"rounded-xl"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-[15px] text-black dark:text-white truncate",children:De.name}),c.jsxs("div",{className:"text-zinc-500 dark:text-zinc-400 text-[12px] font-light truncate",children:[De.category," • Stock: ",De.stock," • SKU: ",De.sku]})]}),c.jsxs("div",{className:"text-[15px] font-semibold text-sky-600 dark:text-sky-400 ml-3 flex-shrink-0 whitespace-nowrap",children:["₦",Number(De.price).toLocaleString()]})]},De.id)),a.length===0&&c.jsx("div",{className:"text-zinc-500",children:s("no_products_yet","No products yet. Use the buttons above to add or bulk‑upload.")})]}),c.jsxs("div",{className:"w-full flex justify-end mt-3",children:[c.jsx("button",{onClick:bn,className:"mr-2 px-4 py-2 rounded-full border border-sky-600 dark:border-gray-600 dark:border-gray-600 text-sky-600 dark:text-sky-400 text-[13px] font-light hover:bg-[#E3F3FF] dark:hover:bg-gray-700",children:s("download_csv","Download CSV")}),c.jsx("button",{onClick:Kr,className:"px-4 py-2 rounded-full bg-sky-600 text-white text-[13px] font-light hover:bg-sky-700",children:s("download_excel","Download Excel")})]})]})]})]}),c.jsx(d4,{open:Oe,onClose:()=>{_t||(pt(!1),wt(0),Nt(""))},children:c.jsxs("form",{onSubmit:Ge,className:"flex flex-col gap-5",children:[c.jsxs("header",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Pharmacy Verification"}),c.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:ne?"Update submission":"Verify your pharmacy"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300",children:me[st]?.description})]}),c.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400",children:[c.jsxs("span",{className:"font-semibold",children:["Step ",st+1," of ",ut]}),c.jsx("div",{className:"flex flex-1 items-center gap-1",children:me.map((De,Kt)=>c.jsx("span",{className:`h-1.5 flex-1 rounded-full transition-all ${Kt<=st?"bg-sky-500":"bg-slate-200 dark:bg-slate-700"}`},De.key))})]}),Ut?c.jsx("p",{className:"text-[11px] text-slate-400 italic",children:"Saving draft…"}):ne?.status==="draft"?c.jsx("p",{className:"text-[11px] text-slate-400",children:"Draft saved"}):null,Ct&&c.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700 dark:border-rose-400/40 dark:bg-rose-500/10 dark:text-rose-200",children:Ct}),st===0&&c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Pharmacy name *",c.jsx("input",{type:"text",value:nt.pharmacyName,onChange:De=>en("pharmacyName",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Primary contact *",c.jsx("input",{type:"text",value:nt.contactName,onChange:De=>en("contactName",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Contact email *",c.jsx("input",{type:"email",value:nt.contactEmail,onChange:De=>en("contactEmail",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Contact phone *",c.jsx("input",{type:"tel",value:nt.contactPhone,onChange:De=>en("contactPhone",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]})]}),st===1&&c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Street address *",c.jsx("input",{type:"text",value:nt.addressLine1,onChange:De=>en("addressLine1",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["City *",c.jsx("input",{type:"text",value:nt.city,onChange:De=>en("city",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["State / Region *",c.jsx("input",{type:"text",value:nt.state,onChange:De=>en("state",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Postal code",c.jsx("input",{type:"text",value:nt.postalCode,onChange:De=>en("postalCode",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Pharmacy registration number *",c.jsx("input",{type:"text",value:nt.registrationNumber,onChange:De=>en("registrationNumber",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Tax ID",c.jsx("input",{type:"text",value:nt.taxId,onChange:De=>en("taxId",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Pharmacy license URL *",c.jsx("input",{type:"url",placeholder:"https://...",value:nt.licenseUrl,onChange:De=>en("licenseUrl",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300 sm:col-span-2",children:["Owner ID (URL)",c.jsx("input",{type:"url",placeholder:"https://...",value:nt.ownerIdUrl,onChange:De=>en("ownerIdUrl",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]})]}),st===2&&c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Website",c.jsx("input",{type:"url",placeholder:"https://",value:nt.website,onChange:De=>en("website",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Owner name",c.jsx("input",{type:"text",value:nt.ownerName,onChange:De=>en("ownerName",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Years in business",c.jsx("input",{type:"number",min:"0",value:nt.yearsInBusiness,onChange:De=>en("yearsInBusiness",De.target.value),className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsx("div",{className:"sm:col-span-2",children:c.jsxs("label",{className:"flex flex-col text-xs font-semibold text-slate-500 dark:text-slate-300",children:["Additional notes for compliance",c.jsx("textarea",{rows:3,value:nt.additionalNotes,onChange:De=>en("additionalNotes",De.target.value),className:"mt-1 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",placeholder:"Add context such as delivery radius, cold-chain handling, etc."})]})})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("button",{type:"button",onClick:async()=>{if(_t)return;const De=Dt.current||ne?.id||pr.current;Dt.current&&(clearTimeout(Dt.current),Dt.current=null),De&&await Os($t.current,jt.current),pt(!1),wt(0),jt.current=0,Nt("")},className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Cancel"}),c.jsxs("div",{className:"flex gap-2",children:[st>0&&c.jsx("button",{type:"button",onClick:Se,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Back"}),st<ut-1?c.jsx("button",{type:"button",onClick:je,className:"rounded-full bg-sky-600 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-300 dark:bg-sky-500 dark:hover:bg-sky-400",children:"Next"}):c.jsx("button",{type:"submit",disabled:_t,className:"rounded-full border border-sky-500 px-4 py-2 text-sm font-semibold text-sky-600 transition hover:bg-sky-50 focus:outline-none focus:ring-2 focus:ring-sky-200 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-400 dark:text-sky-300 dark:hover:bg-slate-800",children:_t?"Submitting...":ne?"Save updates":"Submit for review"})]})]}),c.jsx("p",{className:"text-[11px] text-slate-400",children:"We review submissions within 1-3 business days. You can close this window after sending your documents."})]})}),u&&c.jsx(s$,{pharmacyId:n?.uid||e?.uid,onClose:()=>d(!1)}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-[90vw] max-w-sm shadow-xl border border-[#9ED3FF] dark:border-gray-600 relative overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[c.jsx("div",{className:"text-lg font-medium font-poppins text-black dark:text-white",children:s("edit_product","Edit Product")}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{className:"rounded-full border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-zinc-500 dark:text-zinc-400 py-2 flex items-center justify-center ml-2",style:{width:"36px",height:"36px"},onClick:De=>{De.stopPropagation(),te(Kt=>!Kt)},children:c.jsx(kle,{className:"h-4 w-4"})}),fe&&c.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white dark:bg-gray-800 border border-[#9ED3FF] dark:border-gray-600 rounded-xl shadow p-2 z-10 overflow-hidden",onClick:De=>De.stopPropagation(),children:c.jsxs("button",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-[13px] font-light px-2 py-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",onClick:()=>{ie(!0),te(!1)},children:[c.jsx(Rle,{className:"h-4 w-4"})," ",s("delete","Delete")]})})]})]}),c.jsxs("div",{className:"space-y-3",onClick:()=>fe&&te(!1),children:[c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:T,onChange:De=>O(De.target.value),placeholder:s("name","Name")}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:W,onChange:De=>Y(De.target.value),placeholder:s("category","Category")}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:L,onChange:De=>A(De.target.value),placeholder:s("stock","Stock"),type:"number"}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:N,onChange:De=>D(De.target.value),placeholder:"SKU"}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:j,onChange:De=>F(De.target.value),placeholder:s("price","Price"),type:"number"}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[12px] text-zinc-500 dark:text-zinc-400 font-light",children:s("product_image","Product Image")}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-2 outline-none dark:bg-transparent dark:text-white dark:placeholder:text-gray-400",value:M,onChange:De=>{Z(De.target.value),pe(null)},placeholder:s("image_url_placeholder","Image URL (or choose file below)"),type:"text"}),c.jsx("input",{type:"file",accept:"image/*",className:"mt-1",onChange:De=>{De.target.files&&De.target.files[0]&&(pe(De.target.files[0]),Z(""))}}),(M||ue)&&c.jsx("img",{src:ue?URL.createObjectURL(ue):M,alt:"Preview",className:"h-16 w-16 object-cover rounded-xl border mt-2"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[12px] text-zinc-500 font-light",children:s("product_description","Product Description")}),c.jsx("textarea",{className:"w-full border rounded p-2 text-sm",rows:4,value:le,onChange:De=>ve(De.target.value),placeholder:s("enter_product_description","Enter product description")})]})]}),c.jsxs("div",{className:"flex gap-2 mt-6 items-center",children:[c.jsx("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[12px] font-light py-2 shadow hover:bg-sky-700",onClick:er,children:s("save","Save")}),c.jsx("button",{className:"flex-1 rounded-full border border-zinc-300 dark:border-gray-600 text-zinc-500 text-[12px] font-light py-2",onClick:()=>P(null),children:s("cancel","Cancel")})]}),H&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-3xl",onClick:()=>ie(!1),children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-xl border border-[#9ED3FF] dark:border-gray-600 text-center overflow-hidden",onClick:De=>De.stopPropagation(),children:[c.jsx("div",{className:"text-[15px] font-light mb-4 dark:text-white",children:s("confirm_delete_product","Are you sure you want to delete this item?")}),c.jsxs("div",{className:"flex gap-2 justify-center",children:[c.jsx("button",{className:"rounded-full bg-red-600 text-white text-[12px] font-light px-4 py-2",onClick:qt,children:s("yes_delete","Yes, Delete")}),c.jsx("button",{className:"rounded-full border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-zinc-500 dark:text-zinc-400 text-[12px] font-light px-4 py-2",onClick:()=>ie(!1),children:s("cancel","Cancel")})]})]})})]})}),c.jsx("div",{className:"mt-6 lg:hidden",children:c.jsxs("button",{onClick:async()=>{await r(),window.location.href="/auth/onboarding"},className:"rounded-full border border-red-300 dark:border-gray-600 text-red-600 dark:text-red-400 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:[c.jsx(Nk,{className:"h-4 w-4"})," ",s("log_out","Log Out")]})})]})]})}const F5e=t=>Array.from(new Set(t.map(r=>r.label.includes("/")?r.label.split("/").pop():r.label))).sort(),D5e=(t,e)=>Array.from(new Set(t.filter(n=>n.label.endsWith("/"+e)).map(n=>n.label.split("/")[0]))).sort((n,s)=>Number(n)-Number(s));function O5e({data:t,filter:e,onFilterChange:r,topPeriod:n}){const{t:s}=Ds(),[a,i]=R.useState(null),[o,l]=R.useState([]);R.useEffect(()=>{if(t.length>0){const m=Math.max(...t.map(x=>x.value))||1;l(t.map(x=>x.value/m*100))}},[t]);let u=F5e(t),d=e.type==="month"?D5e(t,e.year||u[0]):[];const p=Math.max(...t.map(m=>m.value))||1,g=t.reduce((m,x)=>m+x.value,0);return c.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-sky-500 dark:border-gray-600 p-6 mt-8 overflow-hidden min-w-0 relative",role:"region","aria-label":"Revenue",children:[c.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-sky-100/30 dark:from-sky-800/30 to-transparent rounded-full -translate-y-16 translate-x-16"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-100/20 dark:from-blue-800/20 to-transparent rounded-full translate-y-12 -translate-x-12"}),c.jsxs("div",{className:"flex items-center justify-between mb-4 min-w-0 relative z-0",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-black dark:text-white font-light text-xl tracking-tight mb-1",children:s("revenue_analytics","Revenue Analytics")}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"text-2xl font-semibold text-sky-700 dark:text-sky-400",children:["₦",g.toLocaleString()]}),c.jsx("div",{className:"px-2 py-1 bg-sky-100 dark:bg-sky-800 rounded-full text-xs text-sky-700 dark:text-sky-300 font-medium",children:s("total","Total")})]})]}),c.jsx("div",{className:"flex flex-col gap-2",children:c.jsxs("select",{className:"rounded-xl border-2 border-sky-200 bg-white px-3 py-2 text-sm text-sky-700 focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md",value:e.type,onChange:m=>r({...e,type:m.target.value}),children:[c.jsxs("option",{value:"month",children:["📊 ",s("by_month","By Month")]}),c.jsxs("option",{value:"year",children:["📈 ",s("by_year","By Year")]})]})})]}),c.jsxs("div",{className:"flex gap-2 mb-6 min-w-0 relative z-0",children:[e.type==="year"&&c.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[140px]",value:e.year||u[0]||"",onChange:m=>r({...e,year:m.target.value}),children:u.map(m=>c.jsx("option",{value:m,children:m},m))}),e.type==="month"&&c.jsxs(c.Fragment,{children:[c.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.year||u[0]||"",onChange:m=>r({...e,year:m.target.value}),children:u.map(m=>c.jsx("option",{value:m,children:m},m))}),c.jsx("select",{className:"rounded-lg border border-sky-200 px-3 py-2 text-sm text-sky-700 bg-white focus:outline-none focus:border-sky-400 transition-colors shadow-sm hover:shadow-md min-w-0 max-w-[120px]",value:e.month||d[0]||"",onChange:m=>r({...e,month:m.target.value}),children:d.map(m=>c.jsx("option",{value:m,children:s("month_number","Month {number}",{number:m})},m))})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex flex-col justify-between opacity-20",children:[...Array(5)].map((m,x)=>c.jsx("div",{className:"border-t border-sky-300 border-dashed"},x))}),c.jsx("div",{className:"w-full h-32 flex items-end gap-3 mt-2 min-w-0 overflow-hidden relative z-0",children:t.length===0?c.jsx("div",{className:"w-full h-full flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-2",children:"📊"}),c.jsx("div",{className:"text-zinc-400 text-sm",children:s("no_revenue_data","No revenue data available")}),c.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:s("start_selling_revenue","Start making sales to see your revenue analytics")})]})}):t.map((m,x)=>c.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0 relative group",onMouseEnter:()=>i(x),onMouseLeave:()=>i(null),children:[a===x&&c.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-20 whitespace-nowrap",children:[c.jsx("div",{className:"text-xs font-medium text-gray-700",children:m.label}),c.jsxs("div",{className:"text-sm font-semibold text-sky-600",children:["₦",m.value.toLocaleString()]}),c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:c.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]}),c.jsxs("div",{className:"relative w-8 flex flex-col items-center",children:[c.jsxs("div",{className:"w-full h-32 bg-sky-100/50 rounded-t-lg relative overflow-hidden",children:[c.jsx("div",{className:`absolute bottom-0 w-full rounded-t-lg transition-all duration-1000 ease-out cursor-pointer transform ${a===x?"scale-105":"scale-100"}`,style:{height:`${o[x]||0}%`,background:a===x?"linear-gradient(135deg, #36A5FF 0%, #2563EB 50%, #1D4ED8 100%)":"linear-gradient(135deg, #36A5FF 0%, #3B82F6 100%)",boxShadow:a===x?"0 8px 25px rgba(54, 165, 255, 0.4), 0 4px 10px rgba(54, 165, 255, 0.3)":"0 4px 15px rgba(54, 165, 255, 0.2)"},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 transform -skew-x-12 animate-pulse"})}),c.jsx("div",{className:"absolute w-full h-1 bg-white/40 rounded-full transition-all duration-1000",style:{bottom:`${o[x]||0}%`}})]}),a===x&&c.jsxs("div",{className:"absolute -top-6 bg-sky-600 text-white text-xs px-2 py-1 rounded font-medium",children:["₦",m.value.toLocaleString()]})]}),c.jsx("span",{className:`text-[11px] mt-2 truncate max-w-[40px] transition-colors duration-200 ${a===x?"text-sky-600 font-medium":"text-zinc-500"}`,children:m.label})]},x))}),t.length>0&&c.jsxs("div",{className:"absolute left-0 top-0 h-32 flex flex-col justify-between text-xs text-zinc-400 -ml-12",children:[c.jsxs("span",{children:["₦",p.toLocaleString()]}),c.jsxs("span",{children:["₦",Math.round(p*.75).toLocaleString()]}),c.jsxs("span",{children:["₦",Math.round(p*.5).toLocaleString()]}),c.jsxs("span",{children:["₦",Math.round(p*.25).toLocaleString()]}),c.jsx("span",{children:"₦0"})]})]}),n&&c.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl border border-sky-200 relative z-0",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:"🏆"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-sky-700",children:s("best_performing_period","Best Performing {period}",{period:e.type==="month"?s("month_label","Month"):s("year_label","Year")})}),c.jsxs("div",{className:"text-lg font-semibold text-sky-800",children:[n.label," • ₦",n.value.toLocaleString()]})]})]})})]})}function M5e({cards:t}){return c.jsxs("div",{className:"w-full overflow-x-auto py-2",style:{overflowY:"hidden"},children:[c.jsx("div",{className:"flex gap-3",style:{minWidth:180,scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((e,r)=>c.jsx("div",{className:"min-w-[120px] max-w-[150px] h-[80px] bg-[#F7F7F7] dark:bg-gray-800 rounded-xl border border-sky-500 dark:border-gray-600 p-3 flex flex-col items-start justify-center shadow-sm",children:e},r))}),c.jsx("style",{children:`
        .w-full.overflow-x-auto::-webkit-scrollbar { display: none; }
      `})]})}function B5e({data:t}){const{t:e}=Ds(),[r,n]=R.useState(null);if(!t||t.length===0)return c.jsx("div",{className:"bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8 text-zinc-400 dark:text-zinc-500 text-sm text-center",children:e("no_sales_trend_data","No sales trend data.")});const s=Math.max(...t.map(g=>g.value))||1,a=25,i=280,o=120,l=[];for(let g=0;g<=4;g++){const m=a+g/4*(o-2*a);l.push(c.jsx("line",{x1:a,y1:m,x2:i-a,y2:m,stroke:"#E5F3FF",strokeWidth:"1",strokeDasharray:"3,3"},g))}const u=t.map((g,m)=>{const x=a+m/(t.length-1)*(i-2*a),y=o-a-g.value/s*(o-2*a);return{x,y,value:g.value,label:g.label}}),d=u.map((g,m)=>`${m===0?"M":"L"} ${g.x} ${g.y}`).join(" "),p=`${d} L ${u[u.length-1].x} ${o-a} L ${u[0].x} ${o-a} Z`;return c.jsxs("div",{className:"bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8 relative overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-black dark:text-white font-light text-lg tracking-tight",children:e("sales_trends","Sales Trends")}),c.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:e("last_6_months","Last 6 months")})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("svg",{width:i,height:o,className:"block mx-auto overflow-visible",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.1))"},children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#36A5FF",stopOpacity:"0.2"}),c.jsx("stop",{offset:"100%",stopColor:"#36A5FF",stopOpacity:"0.02"})]}),c.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#36A5FF"}),c.jsx("stop",{offset:"50%",stopColor:"#2563EB"}),c.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})]}),l,c.jsx("path",{d:p,fill:"url(#areaGradient)",className:"transition-all duration-300"}),c.jsx("path",{d,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300",style:{filter:"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.3))"}}),u.map((g,m)=>c.jsxs("g",{children:[c.jsx("circle",{cx:g.x,cy:g.y,r:r===m?"8":"6",fill:"rgba(54, 165, 255, 0.2)",className:"transition-all duration-200"}),c.jsx("circle",{cx:g.x,cy:g.y,r:r===m?"4":"3",fill:"#36A5FF",stroke:"white",strokeWidth:"2",className:"cursor-pointer transition-all duration-200 hover:r-4",onMouseEnter:()=>n(m),onMouseLeave:()=>n(null),style:{filter:r===m?"drop-shadow(0 4px 8px rgba(54, 165, 255, 0.4))":"drop-shadow(0 2px 4px rgba(54, 165, 255, 0.2))"}})]},m))]}),r!==null&&c.jsxs("div",{className:"absolute bg-white border border-sky-200 rounded-lg px-3 py-2 shadow-lg z-10 transition-all duration-200",style:{left:u[r].x-30,top:u[r].y-50,transform:"translateX(-50%)"},children:[c.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:t[r].label}),c.jsxs("div",{className:"text-sm font-semibold text-sky-600 dark:text-sky-400",children:[t[r].value.toLocaleString()," ",e("orders","Orders")]}),c.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:c.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})})]})]}),c.jsx("div",{className:"flex justify-between mt-3 px-6",children:t.map((g,m)=>c.jsx("span",{className:`text-xs transition-colors duration-200 ${r===m?"text-sky-600 dark:text-sky-400 font-medium":"text-zinc-500 dark:text-zinc-400"}`,children:g.label},m))}),c.jsxs("div",{className:"absolute left-1 top-12 h-24 flex flex-col justify-between text-xs text-zinc-400 dark:text-zinc-500",children:[c.jsx("span",{children:s.toLocaleString()}),c.jsx("span",{children:Math.round(s*.75).toLocaleString()}),c.jsx("span",{children:Math.round(s*.5).toLocaleString()}),c.jsx("span",{children:Math.round(s*.25).toLocaleString()}),c.jsx("span",{children:"0"})]}),c.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -rotate-90 text-xs text-zinc-500 dark:text-zinc-400 font-medium",style:{left:"-40px"},children:e("orders","Orders")}),c.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/50 to-transparent rounded-full -translate-y-10 translate-x-10"})]})}function V5e({threads:t,unreadCount:e,onThreadClick:r}){const n=Jn(),{t:s}=Ds(),a=()=>{n("/messages")};return c.jsxs("div",{className:"relative bg-[#F7F7F7] dark:bg-gray-800 rounded-2xl border border-sky-500 dark:border-gray-600 p-5 mt-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer hover:bg-sky-50 dark:hover:bg-gray-700/50 -mx-2 px-2 py-1 rounded-lg transition-colors",onClick:a,children:[c.jsx("h2",{className:"text-black dark:text-white font-light text-lg tracking-tight",children:s("recent_messages","Recent Messages")}),e>0&&c.jsx("span",{className:"bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:e})]}),c.jsx("div",{children:t.length===0?c.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 text-sm",children:s("no_recent_messages","No recent messages.")}):c.jsx("ul",{className:"divide-y divide-sky-100 dark:divide-gray-600",children:t.map(i=>c.jsxs("li",{className:"py-2 rounded-lg px-2 flex items-center cursor-pointer hover:bg-sky-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>r&&r(i),children:[c.jsx("span",{className:"font-light text-[13px] text-black dark:text-white flex-1 truncate",children:i.customerName||i.customerId}),i.unread>0&&c.jsx("span",{className:"ml-2 bg-sky-400 text-white text-xs rounded-full px-2 py-0.5 font-bold",children:i.unread})]},i.id))})})]})}const U5e=({reviews:t=[],onViewAllReviews:e})=>{const{t:r}=Ds();if(!t.length)return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Um,{className:"text-sky-500",size:20}),r("recent_reviews","Recent Reviews")]})}),c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Um,{size:32,className:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r("no_recent_reviews","No recent reviews")}),c.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:r("new_reviews_appear_here","New customer reviews will appear here")})]})]});const n=s=>[...Array(5)].map((a,i)=>c.jsx(c4,{size:12,className:`${i<s?"text-yellow-400 fill-current":"text-gray-300"}`},i));return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Um,{className:"text-sky-500",size:20}),r("recent_reviews","Recent Reviews"),t.length>0&&c.jsx("span",{className:"bg-sky-100 dark:bg-sky-800 text-sky-700 dark:text-sky-300 text-xs px-2 py-1 rounded-full font-medium",children:t.length})]}),c.jsxs("button",{onClick:e,className:"text-sky-500 hover:text-sky-600 dark:text-sky-400 dark:hover:text-sky-300 text-sm font-medium flex items-center gap-1",children:[r("view_all","View All"),c.jsx(FV,{size:16})]})]}),c.jsx("div",{className:"space-y-3",children:t.slice(0,3).map(s=>c.jsx("div",{className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:e,children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:s.productName}),c.jsx("div",{className:"flex items-center gap-1",children:n(s.rating)})]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:r("by_customer","by {customerName}",{customerName:s.customerName})}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:s.comment}),!s.pharmacyResponse&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:[c.jsx(Um,{size:12,className:"mr-1"}),r("needs_response","Needs Response")]})})]})},s.id))}),t.length>3&&c.jsx("button",{onClick:e,className:"w-full mt-4 py-2 text-sm text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 font-medium transition-colors",children:r("view_more_reviews","View {count} more review{plural}",{count:t.length-3,plural:t.length-3>1?"s":""})})]})};function z5e(){const{t}=Ds(),[e,r]=R.useState([]),[n,s]=R.useState({}),[a,i]=R.useState(!0),[o,l]=R.useState("all"),[u,d]=R.useState("newest"),[p,g]=R.useState("all"),[m,x]=R.useState({}),[y,b]=R.useState({}),[S,P]=R.useState(!1),[T,O]=R.useState(null),{user:W}=Vn();R.useEffect(()=>{Y()},[W]);const Y=async()=>{if(W?.uid)try{i(!0);const Z=br(tr(ct,"products"),Fr("pharmacyId","==",W.uid)),ue=await vn(Z),pe={},fe=[];ue.docs.forEach(H=>{const ie={id:H.id,...H.data()};pe[H.id]=ie,fe.push(ie)}),s(pe);const te=[];for(const H of fe){const ie=br(tr(ct,"products",H.id,"reviews"),Qa("createdAt","desc"));(await vn(ie)).docs.forEach(I=>{te.push({id:I.id,productId:H.id,productName:H.name,...I.data()})})}r(te)}catch(Z){console.error("Error fetching reviews:",Z)}finally{i(!1)}},L=async(Z,ue,pe)=>{if(pe.trim())try{const fe=ir(ct,"products",ue,"reviews",Z);await ds(fe,{pharmacyResponse:pe,responseDate:Is(),respondedBy:W.uid}),r(te=>te.map(H=>H.id===Z?{...H,pharmacyResponse:pe,responseDate:new Date}:H)),x(te=>({...te,[Z]:""})),alert(t("response_submitted_success","Response submitted successfully!"))}catch(fe){console.error("Error submitting response:",fe),alert(t("response_submit_failed","Failed to submit response. Please try again."))}},A=()=>{let Z=e;return o!=="all"&&(Z=Z.filter(ue=>ue.productId===o)),p!=="all"&&(p==="positive"?Z=Z.filter(ue=>ue.rating>=4):p==="negative"?Z=Z.filter(ue=>ue.rating<=2):p==="responded"?Z=Z.filter(ue=>ue.pharmacyResponse):p==="unresponded"&&(Z=Z.filter(ue=>!ue.pharmacyResponse))),Z.sort((ue,pe)=>u==="newest"?new Date(pe.createdAt?.seconds*1e3)-new Date(ue.createdAt?.seconds*1e3):u==="oldest"?new Date(ue.createdAt?.seconds*1e3)-new Date(pe.createdAt?.seconds*1e3):u==="highest"?pe.rating-ue.rating:u==="lowest"?ue.rating-pe.rating:0),Z},N=Z=>[...Array(5)].map((ue,pe)=>c.jsx(c4,{className:`h-4 w-4 ${pe<Z?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},pe)),D=()=>{const Z=e.length,ue=e.filter(te=>te.pharmacyResponse).length,pe=e.length>0?e.reduce((te,H)=>te+H.rating,0)/e.length:0,fe=e.filter(te=>te.rating>=4).length;return{total:Z,responded:ue,avgRating:pe,positiveReviews:fe}},j=Z=>{O(T===Z?null:Z)},F=D(),M=A();return a?c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 overflow-hidden",children:c.jsxs("div",{className:"text-center py-16",children:[c.jsxs("div",{className:"relative mx-auto w-12 h-12 mb-6",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-600"}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-sky-500 dark:border-sky-400 border-t-transparent absolute top-0 left-0"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:t("loading_reviews","Loading your reviews...")}),c.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:t("loading_please_wait","Please wait while we fetch your data")})]})}):c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 overflow-hidden",children:[c.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-600 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700 dark:to-gray-800",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:t("reviews_management","Reviews Management")}),c.jsxs("button",{onClick:()=>P(!S),className:"flex items-center justify-center gap-2 px-4 py-2 text-sm bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[c.jsx(OV,{className:"h-4 w-4"}),t("filters_sort","Filters & Sort"),S?c.jsx(wle,{className:"h-4 w-4"}):c.jsx(vle,{className:"h-4 w-4"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 dark:border-gray-600 shadow-sm",children:[c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:F.total}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:t("total_reviews","Total Reviews")})]}),c.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 shadow-sm",children:[c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:F.responded}),c.jsx("div",{className:"text-xs sm:text-sm text-green-600 font-medium",children:t("responded","Responded")})]}),c.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200 shadow-sm",children:[c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:F.avgRating.toFixed(1)}),c.jsx("div",{className:"text-xs sm:text-sm text-yellow-600 font-medium",children:t("avg_rating","Avg Rating")})]}),c.jsxs("div",{className:"text-center p-3 sm:p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 shadow-sm",children:[c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:F.positiveReviews}),c.jsx("div",{className:"text-xs sm:text-sm text-purple-600 font-medium",children:t("positive_reviews","Positive (4+ ⭐)")})]})]}),S&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("product","Product")}),c.jsxs("select",{value:o,onChange:Z=>l(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:t("all_products","All Products")}),Object.values(n).map(Z=>c.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("sort_by","Sort By")}),c.jsxs("select",{value:u,onChange:Z=>d(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[c.jsx("option",{value:"newest",children:t("newest_first","Newest First")}),c.jsx("option",{value:"oldest",children:t("oldest_first","Oldest First")}),c.jsx("option",{value:"highest",children:t("highest_rating","Highest Rating")}),c.jsx("option",{value:"lowest",children:t("lowest_rating","Lowest Rating")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("filter_by","Filter By")}),c.jsxs("select",{value:p,onChange:Z=>g(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:t("all_reviews","All Reviews")}),c.jsx("option",{value:"positive",children:t("positive_4_stars","Positive (4+ stars)")}),c.jsx("option",{value:"negative",children:t("negative_1_2_stars","Negative (1-2 stars)")}),c.jsx("option",{value:"responded",children:t("responded","Responded")}),c.jsx("option",{value:"unresponded",children:t("needs_response","Needs Response")})]})]})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:M.length===0?c.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[c.jsx("div",{className:"bg-gray-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:c.jsx(Um,{className:"h-10 w-10 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t("no_reviews_found","No reviews found")}),c.jsx("p",{className:"text-gray-600 text-sm max-w-md mx-auto",children:e.length===0?t("no_reviews_yet_message","You don't have any reviews yet. Encourage customers to leave reviews by providing excellent service and follow-up communication!"):t("no_reviews_match_filters","No reviews match your current filters. Try adjusting your search criteria.")})]}):M.map((Z,ue)=>c.jsx("div",{className:`p-4 sm:p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all duration-200 animate-fade-in cursor-pointer ${T===Z.id?"ring-2 ring-sky-500 dark:ring-sky-400 bg-sky-50 dark:bg-sky-900/30 scale-102":""}`,style:{animationDelay:`${ue*.1}s`},onClick:()=>j(Z.id),children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:Z.createdAt&&new Date(Z.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),!Z.pharmacyResponse&&c.jsx("span",{className:"text-orange-600 dark:text-orange-400 px-2 py-1 rounded-full font-normal text-[9px] bg-orange-100 dark:bg-orange-900/30",style:{fontSize:"9px !important"},children:t("needs_response","Needs Response")})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(hd,{name:Z.productName,image:n[Z.productId]?.image,category:n[Z.productId]?.category,size:40,className:"flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white line-clamp-1",style:{fontSize:"10px !important"},title:Z.productName,children:Z.productName}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:n[Z.productId]?.category||t("medicine","Medicine")})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex",children:N(Z.rating)}),c.jsxs("span",{className:"text-gray-600 dark:text-gray-300",style:{fontSize:"10px !important"},children:["(",Z.rating,"/5)"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-gray-600 dark:text-gray-300",style:{fontSize:"10px !important"},children:[t("reviewed_by","Reviewed by:"),":"]}),c.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",style:{fontSize:"10px !important"},children:Z.customerName||Z.name}),Z.verified&&c.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 px-2 py-0.5 rounded-full font-medium",children:t("verified","Verified")})]}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 sm:p-4",children:c.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",style:{fontSize:"10px !important"},children:Z.comment})}),Z.helpful>0&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[c.jsx("span",{children:"👍"}),c.jsx("span",{children:t("people_found_helpful","{count} people found this helpful",{count:Z.helpful})})]}),Z.pharmacyResponse&&c.jsxs("div",{className:"ml-0 sm:ml-4 bg-gradient-to-r from-blue-50 to-sky-50 dark:from-blue-900/20 dark:to-sky-900/20 rounded-lg p-3 sm:p-4 border-l-4 border-blue-400 dark:border-blue-500 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(XT,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-300",children:t("your_response","Your Response")}),c.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 ml-auto",children:Z.pharmacyResponse.respondedAt&&new Date(Z.pharmacyResponse.respondedAt.seconds*1e3).toLocaleDateString()})]}),c.jsx("p",{className:"text-blue-900 dark:text-blue-200 text-sm leading-relaxed",children:Z.pharmacyResponse.message||Z.pharmacyResponse})]}),!Z.pharmacyResponse&&c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[c.jsxs("button",{onClick:()=>b(pe=>({...pe,[Z.id]:!pe[Z.id]})),className:"flex items-center gap-2 text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 font-normal text-[12px] transition-colors",style:{fontSize:"10px !important"},children:[c.jsx(XT,{className:"h-4 w-4"}),y[Z.id]?t("cancel_response","Cancel Response"):t("respond_to_review","Respond to Review")]}),y[Z.id]&&c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{value:m[Z.id]||"",onChange:pe=>x(fe=>({...fe,[Z.id]:pe.target.value})),placeholder:t("write_thoughtful_response","Write a thoughtful response to this review..."),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 dark:focus:ring-sky-400 dark:focus:border-sky-400 resize-none text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",rows:4,maxLength:500}),c.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400 dark:text-gray-500",children:[(m[Z.id]||"").length,"/500"]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx("button",{onClick:()=>L(Z.id,Z.productId,m[Z.id]||""),className:"flex-1 sm:flex-none px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors font-medium disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",style:{fontSize:"10px !important"},disabled:!m[Z.id]?.trim(),children:t("submit_response","Submit Response")}),c.jsx("button",{onClick:()=>b(pe=>({...pe,[Z.id]:!1})),className:"flex-1 sm:flex-none px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",style:{fontSize:"10px !important"},children:t("cancel","Cancel")})]})]})]})]})},Z.id))})]})}const $5e=({review:t,onDismiss:e,onViewReview:r})=>{const[n,s]=R.useState(!1);R.useEffect(()=>{s(!0);const l=setTimeout(()=>{a()},5e3);return()=>clearTimeout(l)},[]);const a=()=>{s(!1),setTimeout(()=>{e()},300)},i=()=>{r(),a()},o=l=>[...Array(5)].map((u,d)=>c.jsx(c4,{size:12,className:`${d<l?"text-yellow-400 fill-current":"text-gray-300"}`},d));return c.jsx("div",{className:`fixed top-4 right-4 z-50 transform transition-all duration-300 ${n?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:c.jsxs("div",{className:"bg-white border-l-4 border-sky-500 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-sm",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Um,{size:16,className:"text-sky-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"New Review"})]}),c.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(L1,{size:16})})]}),c.jsxs("div",{className:"mb-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.productName}),c.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o(t.rating),c.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["by ",t.customerName]})]})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.comment}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:a,className:"px-3 py-1 text-xs text-gray-600 hover:text-gray-800 transition-colors",children:"Dismiss"}),c.jsx("button",{onClick:i,className:"px-3 py-1 bg-sky-500 text-white text-xs rounded hover:bg-sky-600 transition-colors",children:"View & Respond"})]})]})})},q5e=({newReviews:t,onDismissReview:e,onViewReview:r})=>{const[n,s]=R.useState([]);R.useEffect(()=>{if(t.length>0){const o=t[0];n.some(u=>u.id===o.id)||s(u=>[o,...u.slice(0,2)])}},[t]);const a=o=>{s(l=>l.filter(u=>u.id!==o)),e(o)},i=o=>{s(l=>l.filter(u=>u.id!==o)),r(o)};return c.jsx(c.Fragment,{children:n.map((o,l)=>c.jsx("div",{style:{transform:`translateY(${l*80}px)`,zIndex:50-l},className:"absolute",children:c.jsx($5e,{review:o,onDismiss:()=>a(o.id),onViewReview:()=>i(o.id)})},o.id))})};function H5e(){const[t,e]=R.useState([]),[r,n]=R.useState(0),{user:s}=Vn();return R.useEffect(()=>{if(!s?.uid)return;const o=br(tr(ct,"products"),Fr("pharmacyId","==",s.uid)),l=Dn(o,u=>{const d=[];return e([]),n(0),u.docs.forEach(p=>{const g={id:p.id,...p.data()},m=new Date;m.setDate(m.getDate()-7);const x=br(tr(ct,"products",p.id,"reviews"),Fr("createdAt",">=",m),Qa("createdAt","desc"),vu(20)),y=Dn(x,b=>{const P=b.docs.map(T=>({id:T.id,productId:p.id,productName:g.name,productImage:g.image,...T.data(),createdAt:T.data().createdAt?.toDate()||new Date})).filter(T=>!T.pharmacyResponse);e(T=>{const W=[...T.filter(Y=>Y.productId!==p.id),...P].sort((Y,L)=>L.createdAt-Y.createdAt).slice(0,50);return n(W.length),W})});d.push(y)}),()=>{d.forEach(p=>p())}});return()=>l()},[s?.uid]),{newReviews:t,unreadReviewsCount:r,markReviewsAsRead:()=>{e([]),n(0)},markReviewAsResponded:o=>{e(l=>{const u=l.filter(d=>d.id!==o);return n(u.length),u})}}}function W5e({onClick:t,disabled:e}){return mi.createPortal(c.jsx("button",{className:`fixed bottom-[17rem] right-6 z-[100] text-white rounded-full shadow-lg
                 w-12 h-12 flex items-center justify-center bg-blue-500 disabled:opacity-0 disabled:cursor-not-allowed`,"aria-label":"Add Product",onClick:t,disabled:e,children:c.jsx(Tle,{className:"w-6 h-6"})}),document.body)}function G5e(){return c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsx("section",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-10 w-3/4 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-4 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-4 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"})]}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-4 space-y-3",children:[c.jsx("div",{className:"h-9 w-9 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]},e))})]})}),c.jsxs("section",{className:"rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-20 rounded-full bg-sky-100/60 dark:bg-slate-600/60"})]}),c.jsx("div",{className:"h-40 rounded-3xl bg-gradient-to-br from-sky-50 via-white to-sky-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"}),c.jsx("div",{className:"flex gap-3",children:Array.from({length:3}).map((t,e)=>c.jsx("div",{className:"h-3 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"},e))})]}),c.jsxs("section",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-3 shadow-sm",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-9 w-16 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]},e))]}),c.jsxs("section",{className:"grid gap-4",children:[c.jsxs("div",{className:"space-y-3 rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-4 w-28 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),Array.from({length:2}).map((t,e)=>c.jsxs("div",{className:"space-y-2 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-8 w-8 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]}),c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/40 dark:bg-slate-600/40"})]},e))]}),c.jsxs("div",{className:"space-y-3 rounded-3xl border border-sky-100 bg-white/85 dark:bg-slate-900/80 dark:border-slate-700/70 p-4 shadow-sm",children:[c.jsx("div",{className:"h-4 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),Array.from({length:2}).map((t,e)=>c.jsxs("div",{className:"space-y-2 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-4/5 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]})]}),c.jsx("div",{className:"h-3 w-full rounded-full bg-sky-100/40 dark:bg-slate-600/40"})]},e))]})]})]})}function K5e(){return c.jsxs("div",{className:"animate-pulse space-y-10",children:[c.jsxs("section",{className:"grid grid-cols-[1.1fr_0.9fr] gap-8",children:[c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-6 w-56 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-64 rounded-full bg-sky-100/50 dark:bg-slate-600/60"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-10 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-10 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"})]})]}),c.jsx("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-5 space-y-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-100/30 dark:bg-slate-600/40"})]},e))})]}),c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm space-y-5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"h-5 w-40 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-28 rounded-full bg-sky-100/50 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-[260px] rounded-3xl bg-gradient-to-br from-sky-50 via-white to-sky-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:3}).map((t,e)=>c.jsx("div",{className:"h-3 rounded-full bg-sky-100/40 dark:bg-slate-600/40"},e))})]})]}),c.jsxs("section",{className:"grid grid-cols-[0.6fr_0.4fr] gap-8",children:[c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"h-5 w-44 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-9 w-24 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]}),c.jsx("div",{className:"h-48 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60"}),c.jsx("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl bg-sky-50/50 dark:bg-slate-800/60 p-4 space-y-2",children:[c.jsx("div",{className:"h-4 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]},e))})]}),c.jsxs("div",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsx("div",{className:"h-5 w-32 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-3xl bg-sky-50/60 dark:bg-slate-800/60 p-3",children:[c.jsx("div",{className:"h-11 w-11 rounded-full bg-sky-100/70 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"h-8 w-16 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]},e))})]})]}),c.jsxs("section",{className:"rounded-4xl border border-sky-100 bg-white/85 dark:bg-slate-900/85 dark:border-slate-700/70 p-6 shadow-sm space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"h-5 w-36 rounded-full bg-sky-100/70 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-4 w-28 rounded-full bg-sky-100/50 dark:bg-slate-600/50"})]}),c.jsx("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:4}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl border border-sky-100 bg-sky-50/50 dark:bg-slate-800/60 dark:border-slate-700/70 p-4 space-y-3",children:[c.jsx("div",{className:"h-28 rounded-3xl bg-white/60 dark:bg-slate-700/50"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-100/60 dark:bg-slate-600/70"}),c.jsx("div",{className:"h-3 w-2/3 rounded-full bg-sky-100/40 dark:bg-slate-600/50"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-8 flex-1 rounded-full bg-sky-100/60 dark:bg-slate-700/70"}),c.jsx("div",{className:"h-8 w-16 rounded-full bg-sky-100/50 dark:bg-slate-700/60"})]})]},e))})]})]})}function fq(){const[t,e]=R.useState([]),[r,n]=R.useState(!0),{profile:s,user:a}=Vn(),{t:i}=Ds(),o=Jn(),[l,u]=R.useState(!1),[d,p]=R.useState([]),[g,m]=R.useState({type:"month",value:""}),[x,y]=R.useState(null),[b,S]=R.useState(0),[P,T]=R.useState(0),[O,W]=R.useState(0),[Y,L]=R.useState([]),[A,N]=R.useState([]),[D,j]=R.useState([]),[F,M]=R.useState(0),[Z,ue]=R.useState(!1),[pe,fe]=R.useState("overview"),[te,H]=R.useState(0),[ie,K]=R.useState(0),[I,z]=R.useState(0),[X,J]=R.useState(0),[se,le]=R.useState(0),[ve,xe]=R.useState(0),[Ee,ke]=R.useState(0),[oe,Fe]=R.useState(0),{newReviews:Pe,unreadReviewsCount:ne,markReviewsAsRead:ye}=H5e(),Ae=()=>c.jsxs("header",{className:"sm:hidden fixed top-0 left-0 right-0 z-[100] border-b border-gray-100/50 dark:border-gray-700/50 shadow-sm px-4 py-4 transition-all duration-200",style:{backgroundColor:document.documentElement.classList.contains("dark")?"rgba(17, 24, 39, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[c.jsx("h1",{className:"mt-8 text-[25px] font-light text-black dark:text-white leading-none animate-slideInLeft mb-4",children:i("my_dashboard","My Dashboard").split(" ").map((Be,Oe)=>c.jsxs("span",{children:[Be,Oe===0?c.jsx("br",{}):""]},Oe))}),c.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>fe("overview"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${pe==="overview"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:i("overview","Overview")}),c.jsxs("button",{onClick:()=>{fe("reviews"),ne>0&&ye()},className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors relative ${pe==="reviews"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[i("reviews","Reviews"),ne>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold",children:ne>9?"9+":ne})]})]})]});return R.useEffect(()=>{async function Be(){if(s&&s.role==="pharmacy"){const Oe=await kV(5,s.uid);e(Oe)}else e([])}Be()},[s]),R.useEffect(()=>{async function Be(){if(!s||s.role!=="pharmacy")return p([]);const Oe=br(tr(ct,"orders"),Fr("pharmacyId","==",s.uid)),nt=(await vn(Oe)).docs.map(_t=>_t.data());let Lt={},Ct=_t=>"";g.type==="date"?Ct=_t=>{const ot=_t.createdAt?.toDate?.()||new Date(_t.createdAt);return ot?ot.toLocaleDateString("en-GB"):""}:g.type==="month"?Ct=_t=>{const ot=_t.createdAt?.toDate?.()||new Date(_t.createdAt);return ot?`${ot.getMonth()+1}/${ot.getFullYear()}`:""}:g.type==="year"&&(Ct=_t=>{const ot=_t.createdAt?.toDate?.()||new Date(_t.createdAt);return ot?`${ot.getFullYear()}`:""}),nt.forEach(_t=>{const ot=Ct(_t);ot&&(g.value&&!ot.startsWith(g.value)||(Lt[ot]=(Lt[ot]||0)+(_t.total||0)))});const Nt=Object.entries(Lt).map(([_t,ot])=>({label:_t,value:ot}));if(Nt.sort((_t,ot)=>_t.label.localeCompare(ot.label)),p(Nt),Nt.length>0){const _t=Nt.reduce((ot,Bt)=>Bt.value>ot.value?Bt:ot,Nt[0]);y(_t)}else y(null)}Be()},[s,g]),R.useEffect(()=>{let Be=!1;async function Oe(){if(typeof s>"u")return;if(!s){Be||n(!1);return}if(s.role!=="pharmacy"){Be||(S(0),J(0),T(0),W(0),le(0),xe(0),z(0),H(0),K(0),L([]),n(!1));return}const pt=s.uid||a?.uid;if(!pt){Be||n(!1);return}n(!0);try{const[nt,Lt,Ct,Nt]=await Promise.all([vn(br(tr(ct,"products"),Fr("pharmacyId","==",pt))),vn(br(tr(ct,"orders"),Fr("pharmacyId","==",pt))),vn(br(tr(ct,"threads"),Fr("vendorId","==",pt))),vn(br(tr(ct,"reviews"),Fr("pharmacyId","==",pt)))]);if(Be)return;S(nt.size),Fe(Ct.size),ke(Nt.size);const _t=nt.docs.filter(Dt=>{const $t=Dt.data(),jt=$t.stock||0,pr=$t.lowStockThreshold||10;return jt<=pr});J(_t.length),T(Lt.size);let ot=0;const Bt=[],Ot=new Date().getMonth(),ft=new Date().getFullYear(),st=Ot===0?11:Ot-1,wt=Ot===0?ft-1:ft;let me=0,Ue=0,ut=0;const Ut=new Set,nr=[];if(Lt.forEach(Dt=>{const $t=Dt.data();ot+=$t.total||0,Bt.push({id:Dt.id,...$t});const jt=$t.createdAt?.toDate?.()||new Date($t.createdAt),pr=jt.getMonth(),hn=jt.getFullYear();pr===Ot&&hn===ft&&me++,pr===st&&hn===wt&&Ue++,($t.status==="pending"||$t.status==="processing")&&ut++,pr===Ot&&hn===ft&&$t.customerId&&Ut.add($t.customerId),($t.status==="completed"||$t.status==="delivered")&&nr.push($t)}),W(ot),le(me),xe(Ue),z(ut),H(Ut.size),nr.length>0){const Dt=nr.reduce(($t,jt)=>$t+(jt.total||0),0);K(Dt/nr.length)}else K(0);Bt.sort((Dt,$t)=>($t.createdAt?.toMillis?.()||0)-(Dt.createdAt?.toMillis?.()||0)),L(Bt.slice(0,3))}catch(nt){Be||(console.error("Error loading dashboard stats:",nt),S(0),J(0),T(0),W(0),le(0),xe(0),z(0),H(0),K(0),L([]))}finally{Be||n(!1)}}return Oe(),()=>{Be=!0}},[s,a]),R.useEffect(()=>{async function Be(){if(!s||s.role!=="pharmacy"){N([]);return}const Oe=s.uid||a?.uid;if(!Oe)return;const pt=br(tr(ct,"orders"),Fr("pharmacyId","==",Oe)),Lt=(await vn(pt)).docs.map(ot=>ot.data()),Ct=new Date,Nt=[];for(let ot=5;ot>=0;ot--){const Bt=new Date(Ct.getFullYear(),Ct.getMonth()-ot,1);Nt.push({label:Bt.toLocaleString("default",{month:"short"}),year:Bt.getFullYear(),month:Bt.getMonth()+1})}const _t=Nt.map(({label:ot,year:Bt,month:Ot})=>{const ft=Lt.filter(st=>{const wt=st.createdAt?.toDate?.()||new Date(st.createdAt);return wt.getFullYear()===Bt&&wt.getMonth()+1===Ot}).length;return{label:ot,value:ft}});N(_t)}Be()},[s,a]),R.useEffect(()=>{async function Be(){if(!s||s.role!=="pharmacy"){j([]),M(0);return}const Oe=s.uid||a?.uid;if(!Oe)return;const pt=br(tr(ct,"threads"),Fr("vendorId","==",Oe),Qa("lastAt","desc"),vu(3)),Lt=(await vn(pt)).docs.map(Nt=>({id:Nt.id,...Nt.data()}));j(Lt.map(Nt=>({...Nt,unread:Nt.unread?.[Oe]||0})));const Ct=Lt.reduce((Nt,_t)=>Nt+(_t.unread?.[Oe]||0),0);M(Ct)}Be()},[s,a]),r?c.jsxs("div",{className:"px-4 md:px-6 lg:px-10 xl:px-14 py-8",children:[c.jsx("div",{className:"md:hidden",children:c.jsx(G5e,{})}),c.jsx("div",{className:"hidden md:block",children:c.jsx(K5e,{})})]}):c.jsxs(c.Fragment,{children:[typeof window<"u"&&mi.createPortal(c.jsx(Ae,{}),document.body),c.jsxs("div",{className:"pt-32 sm:pt-10 pb-32 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen flex flex-col animate-fadeInUp",children:[c.jsxs("header",{className:"hidden sm:block pb-2 pt-4",children:[c.jsx("h1",{className:"text-[25px] font-light text-black dark:text-white leading-none animate-slideInLeft mb-4",children:i("my_dashboard","My Dashboard").split(" ").map((Be,Oe)=>c.jsxs("span",{children:[Be,Oe===0?c.jsx("br",{}):""]},Oe))}),c.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1 mb-2",children:[c.jsx("button",{onClick:()=>fe("overview"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${pe==="overview"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:i("overview","Overview")}),c.jsxs("button",{onClick:()=>{fe("reviews"),ne>0&&ye()},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors relative ${pe==="reviews"?"bg-white dark:bg-gray-800 text-sky-600 dark:text-sky-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[i("reviews","Reviews"),ne>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold",children:ne>9?"9+":ne})]})]})]}),c.jsx("main",{className:"flex-1 px-3 sm:px-4 py-2 sm:py-6 relative w-full mt-4",children:pe==="overview"?c.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6 items-start pb-16 mt-10",children:[c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-[#F7F7F7] to-[#F0F8FF] dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-sky-500 dark:border-sky-400 p-6 relative overflow-hidden card-interactive animate-fadeInUp",style:{animationDelay:"0.1s"},children:[c.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-sky-100/40 dark:from-sky-800/40 to-transparent rounded-full -translate-y-10 translate-x-10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-black dark:text-white font-light text-xl tracking-tight animate-slideInLeft",style:{animationDelay:"0.2s"},children:i("top_products","Top Products")}),c.jsx("div",{className:"px-3 py-1 bg-sky-100 dark:bg-sky-800 rounded-full text-xs text-sky-700 dark:text-sky-300 font-medium animate-bounceIn",style:{animationDelay:"0.3s"},children:i("best_sellers","Best Sellers")})]}),t.length===0?c.jsxs("div",{className:"text-center py-8 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[c.jsx("div",{className:"text-4xl mb-3",children:"📊"}),c.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 text-sm",children:i("no_sales_data","No sales data yet")}),c.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:i("start_selling_message","Start selling products to see your top performers")})]}):c.jsx("div",{className:"flex flex-col gap-4",children:t.map((Be,Oe)=>c.jsxs("div",{className:"group hover:bg-white/50 dark:hover:bg-gray-700/50 rounded-xl p-3 transition-all duration-200 relative",children:[c.jsx("div",{className:`absolute -left-2 -top-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${Oe===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":Oe===1?"bg-gradient-to-br from-gray-400 to-gray-600":Oe===2?"bg-gradient-to-br from-orange-400 to-orange-600":"bg-gradient-to-br from-sky-400 to-sky-600"}`,children:Oe+1}),c.jsxs("div",{className:"flex items-center justify-between ml-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-[14px] text-zinc-800 dark:text-zinc-200 truncate max-w-[140px] group-hover:text-sky-700 dark:group-hover:text-sky-400 transition-colors",children:Be.name}),c.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:i("units_sold","{count} units sold",{count:Be.sold})})]}),c.jsx("div",{className:"flex-1 mx-4 relative",children:c.jsxs("div",{className:"h-4 bg-gradient-to-r from-sky-100 to-blue-100 rounded-full relative overflow-hidden",children:[c.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out relative ${Oe===0?"bg-gradient-to-r from-yellow-400 to-yellow-500":Oe===1?"bg-gradient-to-r from-gray-400 to-gray-500":Oe===2?"bg-gradient-to-r from-orange-400 to-orange-500":"bg-gradient-to-r from-sky-400 to-sky-500"}`,style:{width:`${Math.max(15,Be.sold/(t[0]?.sold||1)*100)}%`,boxShadow:"0 2px 8px rgba(54, 165, 255, 0.3)"},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 transform -skew-x-12 animate-pulse"})}),c.jsxs("div",{className:"absolute top-0 right-2 h-4 flex items-center text-xs font-medium text-white",style:{left:`${Math.max(15,Be.sold/(t[0]?.sold||1)*100)}%`,transform:"translateX(-100%)"},children:[Math.round(Be.sold/(t[0]?.sold||1)*100),"%"]})]})}),c.jsxs("div",{className:"text-right min-w-[50px]",children:[c.jsx("span",{className:`font-bold text-lg ${Oe===0?"text-yellow-600 dark:text-yellow-400":Oe===1?"text-gray-600 dark:text-gray-400":Oe===2?"text-orange-600 dark:text-orange-400":"text-sky-600 dark:text-sky-400"}`,children:Be.sold}),c.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:i("units","units")})]})]}),c.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-sky-200 transition-all duration-200"})]},Be.id||Oe))})]})]}),c.jsxs("div",{className:"flex gap-2 w-full",children:[c.jsxs("button",{className:"flex-1 rounded-full bg-sky-600 text-white text-[13px] font-light py-2 shadow hover:bg-sky-700",onClick:()=>o(`/add-product?pharmacyId=${s?.uid||a?.uid}`),children:["+ ",i("add_product","Add Product")]}),c.jsx("button",{className:"flex-1 rounded-full border border-sky-600 dark:border-sky-400 text-sky-600 dark:text-sky-400 text-[13px] font-light py-2 hover:bg-[#E3F3FF] dark:hover:bg-sky-900/30",onClick:()=>u(!0),children:i("bulk_upload","Bulk Upload")})]}),l&&c.jsx(s$,{pharmacyId:s?.uid||a?.uid,onClose:()=>u(!1)}),c.jsx("div",{children:c.jsx(B5e,{data:A})})]}),c.jsxs("div",{className:"flex flex-col gap-6 pb-8 relative z-0",children:[c.jsx("div",{className:"relative z-0",children:c.jsx(O5e,{data:d,filter:g,onFilterChange:m,topPeriod:x})}),c.jsx("div",{children:c.jsx(M5e,{cards:[c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("total_products","Total Products")}),c.jsx("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:b})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("total_orders","Total Orders")}),c.jsx("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:P})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("total_revenue","Total Revenue")}),c.jsxs("div",{className:"text-[19px] font-semibold text-sky-700 dark:text-sky-400 tracking-tight",children:["��¦",O.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("active_customers","Active Customers")}),c.jsx("div",{className:"text-[19px] font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight",children:te}),c.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:i("this_month","This Month")})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("avg_order_value","Avg Order Value")}),c.jsxs("div",{className:"text-[19px] font-semibold text-purple-600 dark:text-purple-400 tracking-tight",children:["��¦",ie.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("pending_orders","Pending Orders")}),c.jsx("div",{className:"text-[19px] font-semibold text-orange-600 dark:text-orange-400 tracking-tight",children:I}),c.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:i("awaiting","Awaiting")})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("low_stock_items","Low Stock Items")}),c.jsx("div",{className:"text-[19px] font-semibold text-red-600 dark:text-red-400 tracking-tight",children:X}),c.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:i("need_restock","Need Restock")})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("orders_this_month","Orders This Month")}),c.jsx("div",{className:"text-[19px] font-semibold text-blue-600 dark:text-blue-400 tracking-tight",children:se}),c.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:ve>0?se>=ve?c.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:["�� +",((se-ve)/ve*100).toFixed(0),"%"]}):c.jsxs("span",{className:"text-red-500 dark:text-red-400",children:["�˜ -",((ve-se)/ve*100).toFixed(0),"%"]}):c.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:i("no_comparison","No comparison")})})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("pending_reviews","Pending Reviews")}),c.jsx("div",{className:"text-[19px] font-semibold text-yellow-600 dark:text-yellow-400 tracking-tight",children:ne}),c.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:i("need_response","Need Response")})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-zinc-500 dark:text-zinc-400 text-xs mb-1",children:i("recent_reviews","Recent Reviews")}),c.jsx("div",{className:"text-[19px] font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight",children:Pe.length}),c.jsx("div",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mt-0.5",children:i("last_24h","Last 24h")})]})]})}),X>0&&c.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border border-red-200 dark:border-red-700 rounded-2xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-red-700 dark:text-red-400 font-medium text-sm",children:i("low_stock_alert","Low Stock Alert")}),c.jsx("div",{className:"text-red-600 dark:text-red-500 text-xs",children:i("items_need_restocking","{count} item{plural} need restocking",{count:X,plural:X>1?"s":""})})]})]}),c.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 rounded-lg px-3 py-2",children:["💡 ",i("inventory_tip","Check your inventory to avoid running out of popular products")]})]}),c.jsx("div",{children:c.jsx(V5e,{threads:D,unreadCount:F,onThreadClick:Be=>o(`/messages/${Be.id}`)})}),c.jsx("div",{children:c.jsx(U5e,{reviews:Pe.slice(0,5),onViewAllReviews:()=>{fe("reviews"),ye()}})})]})]}):c.jsx("div",{className:"pb-16 mt-10",children:c.jsx(z5e,{})})}),c.jsx(W5e,{onClick:()=>o(`/add-product?pharmacyId=${s?.uid||a?.uid}`)}),c.jsx(q5e,{newReviews:Pe,onDismissReview:Be=>{},onViewReview:Be=>{fe("reviews"),ye()}})]})]})}function Y5e(){const[t,e]=R.useState(0),[r,n]=R.useState(null),[s,a]=R.useState(null),[i,o]=R.useState(!1),l=R.useRef(null),u=R.useRef(0),d=R.useRef(null),p=Jn(),g=hl(),{profile:m}=Vn(),x=["/","/orders","/messages","/cart","/profile"],y=["/dashboard","/orders","/messages","/profile"],b=m?.role==="pharmacy"?y:x,S=b.indexOf(g.pathname),P=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,T=N=>{switch(N){case"/":return c.jsx(Ck,{});case"/orders":return c.jsx($V,{});case"/messages":return c.jsx(OS,{});case"/cart":return c.jsx(qV,{});case"/profile":return m?.role==="pharmacy"?c.jsx(dq,{}):c.jsx(GV,{});case"/dashboard":return c.jsx(fq,{});default:return null}},O=N=>{if(!P)return;const j=N.touches[0].clientX,F=window.innerWidth,M=50,Z=j<M,ue=j>F-M;if(!Z&&!ue)return;l.current=j,u.current=j;let pe=null,fe=-1;ue&&S<b.length-1?(pe="left",fe=S+1):Z&&S>0&&(pe="right",fe=S-1),pe&&fe!==-1&&(n(pe),a(b[fe]),o(!0))},W=N=>{if(!i||l.current===null)return;N.preventDefault();const j=N.touches[0].clientX,F=j-l.current,M=window.innerWidth;u.current=j,d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{const Z=M*.7;let ue=Math.abs(F)/Z;const pe=ue<.5?2*ue*ue:-1+(4-2*ue)*ue;ue=Math.min(pe,1),r==="left"&&F<0||r==="right"&&F>0?(e(ue),ue>.25&&t<=.25&&"vibrate"in navigator&&navigator.vibrate(30)):Math.abs(F)>15&&Y()})},Y=()=>{if(!i)return;if(t>.25&&s)"vibrate"in navigator&&navigator.vibrate([50,50,100]),e(1),setTimeout(()=>{p(s,{state:{slide:r==="left"?"left":"right"}})},200);else{"vibrate"in navigator&&navigator.vibrate(25),(()=>{let F=t;const M=()=>{F*=.85,e(F),F>.01?requestAnimationFrame(M):(e(0),n(null),a(null),o(!1),l.current=null)};requestAnimationFrame(M)})();return}setTimeout(()=>{e(0),n(null),a(null),o(!1),l.current=null},250)};R.useEffect(()=>{if(!P)return;const N=document.body;return N.addEventListener("touchstart",O,{passive:!0}),N.addEventListener("touchmove",W,{passive:!1}),N.addEventListener("touchend",Y,{passive:!0}),N.addEventListener("touchcancel",Y,{passive:!0}),()=>{N.removeEventListener("touchstart",O),N.removeEventListener("touchmove",W),N.removeEventListener("touchend",Y),N.removeEventListener("touchcancel",Y),d.current&&cancelAnimationFrame(d.current)}},[P,i,t,r,S]);const L=()=>{if(!i||!r)return{};const N=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,D=r==="left"?-N*100:N*100,j=1-N*.05,F=r==="left"?N*3:-N*3;return{transform:`translateX(${D}%) scale(${j}) rotateY(${F}deg)`,transformOrigin:r==="left"?"right center":"left center",transition:i?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",filter:`brightness(${1-N*.1})`}},A=()=>{if(!i||!r)return{display:"none"};const N=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,D=r==="left"?100-N*100:-100+N*100,j=.95+N*.05,F=r==="left"?(1-N)*-5:(1-N)*5;return{transform:`translateX(${D}%) scale(${j}) rotateY(${F}deg)`,transformOrigin:r==="left"?"left center":"right center",transition:i?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"white",zIndex:i?10:-1,boxShadow:r==="left"?`-10px 0 30px rgba(0,0,0,${.1*(1-N)})`:`10px 0 30px rgba(0,0,0,${.1*(1-N)})`,filter:`brightness(${.9+N*.1})`}};return c.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden",children:[c.jsxs("div",{style:L(),className:"relative",children:[c.jsx(r7,{}),i&&c.jsx("div",{className:"absolute inset-0 bg-black pointer-events-none",style:{opacity:t*.2,zIndex:5,transition:"opacity 0.1s ease-out"}})]}),i&&s&&c.jsx("div",{style:A(),children:c.jsxs("div",{className:"h-full bg-white relative",children:[T(s),t<.6&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/95 to-white/90 backdrop-blur-sm flex items-center justify-center pointer-events-none",style:{opacity:Math.max(0,1-t*2),transition:"opacity 0.15s ease-out"},children:c.jsxs("div",{className:"text-center space-y-3",children:[c.jsxs("div",{className:"relative w-14 h-14 mx-auto",children:[c.jsxs("svg",{className:"w-14 h-14 transform -rotate-90",viewBox:"0 0 100 100",children:[c.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"#e5e7eb",strokeWidth:"4"}),c.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"url(#progressGradient)",strokeWidth:"4",strokeDasharray:`${t*188.4} 188.4`,className:"transition-all duration-75 ease-out",strokeLinecap:"round"}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),c.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-xs font-semibold text-sky-600",children:[Math.round(t*100),"%"]})})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs font-medium text-gray-700 mb-0.5",children:t<.25?"Keep swiping...":"Almost there!"}),c.jsx("div",{className:"text-[10px] text-gray-500",children:t<.25?"Continue to preview":"Release to navigate"})]}),c.jsx("div",{className:"flex items-center justify-center space-x-1",children:[.1,.15,.2,.25].map((N,D)=>c.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-200 ${t>N?"bg-gradient-to-r from-sky-500 to-cyan-500 scale-110":"bg-gray-300 scale-100"}`},D))})]})})]})})]})}const X5e=()=>{const{getSetting:t}=wy();R.useEffect(()=>{t(Mr.HIGH_CONTRAST)?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},[t(Mr.HIGH_CONTRAST)]),R.useEffect(()=>{t(Mr.REDUCE_MOTION)?document.documentElement.classList.add("reduce-motion"):document.documentElement.classList.remove("reduce-motion")},[t(Mr.REDUCE_MOTION)]),R.useEffect(()=>{const e=t(Mr.THEME_MODE),r=document.documentElement;if(r.classList.remove("light","dark"),e==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;r.classList.add(n?"dark":"light");const s=window.matchMedia("(prefers-color-scheme: dark)"),a=i=>{r.classList.remove("light","dark"),r.classList.add(i.matches?"dark":"light")};return s.addEventListener("change",a),()=>s.removeEventListener("change",a)}else r.classList.add(e)},[t(Mr.THEME_MODE)]),R.useEffect(()=>{const e=t(Mr.FONT_SIZE),r=document.documentElement;r.classList.remove("font-small","font-medium","font-large"),r.classList.add(`font-${e}`)},[t(Mr.FONT_SIZE)]),R.useEffect(()=>{const e=t(Mr.LANGUAGE);document.documentElement.lang=e},[t(Mr.LANGUAGE)])};function Q5e({color:t="black",...e}){return c.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:c.jsx("path",{d:"M1.38004 6.00487L0.919293 5.79263L0.919001 5.79327L1.38004 6.00487ZM3.22754 4.0549L2.89744 3.66972L2.89735 3.6698L3.22754 4.0549ZM4.24209 3.18542L3.91215 2.80011L3.91199 2.80024L4.24209 3.18542ZM12.1657 3.18441L12.4958 2.79923L12.4958 2.79918L12.1657 3.18441ZM13.1803 4.05388L13.5107 3.66894L13.5104 3.6687L13.1803 4.05388ZM15.0268 6.00385L14.5657 6.21545L14.566 6.21609L15.0268 6.00385ZM10.233 17.0371C10.233 17.3173 10.4601 17.5444 10.7403 17.5444C11.0205 17.5444 11.2476 17.3173 11.2476 17.0371H10.7403H10.233ZM5.16027 17.0371C5.16027 17.3173 5.38738 17.5444 5.66755 17.5444C5.94771 17.5444 6.17482 17.3173 6.17482 17.0371H5.66755H5.16027ZM1.10205 8.6772H1.60933C1.60933 7.2531 1.62014 6.69785 1.84108 6.21646L1.38004 6.00487L0.919001 5.79327C0.583964 6.52326 0.594774 7.34577 0.594774 8.6772H1.10205ZM1.38004 6.00487L1.84078 6.2171C2.06254 5.7357 2.4764 5.36715 3.55773 4.44L3.22754 4.0549L2.89735 3.6698C1.88667 4.53637 1.25554 5.06266 0.919294 5.79263L1.38004 6.00487ZM3.22754 4.0549L3.55764 4.44008L4.57219 3.5706L4.24209 3.18542L3.91199 2.80024L2.89744 3.66972L3.22754 4.0549ZM4.24209 3.18542L4.57204 3.57074C5.5283 2.75189 6.2094 2.16896 6.79004 1.78503C7.35875 1.40899 7.77821 1.26082 8.20392 1.26082V0.75354V0.246264C7.50348 0.246264 6.88809 0.503911 6.23046 0.938751C5.58476 1.3657 4.84802 1.99872 3.91215 2.80011L4.24209 3.18542ZM8.20392 0.75354V1.26082C8.62982 1.26082 9.04961 1.40889 9.61834 1.78463C10.199 2.16824 10.8801 2.7509 11.8357 3.56963L12.1657 3.18441L12.4958 2.79918C11.5603 1.99767 10.8235 1.3649 10.1776 0.938137C9.51974 0.503509 8.90417 0.246264 8.20392 0.246264V0.75354ZM12.1657 3.18441L11.8356 3.56959L12.8502 4.43906L13.1803 4.05388L13.5104 3.6687L12.4958 2.79923L12.1657 3.18441ZM13.1803 4.05388L12.8499 4.43882C13.9308 5.36653 14.345 5.73455 14.5657 6.21545L15.0268 6.00385L15.4878 5.79225C15.1526 5.06178 14.5197 4.53496 13.5107 3.66894L13.1803 4.05388ZM15.0268 6.00385L14.566 6.21609C14.7876 6.69715 14.7985 7.25196 14.7985 8.67618H15.3058H15.8131C15.8131 7.34488 15.8239 6.52193 15.4875 5.79162L15.0268 6.00385ZM15.3058 8.67618H14.7985V12.9789H15.3058H15.8131V8.67618H15.3058ZM15.3058 12.9789H14.7985C14.7985 13.95 14.7974 14.627 14.7287 15.1377C14.662 15.6338 14.5399 15.8965 14.3526 16.0839L14.7113 16.4426L15.07 16.8013C15.4771 16.3941 15.6523 15.8818 15.7342 15.273C15.8141 14.6789 15.8131 13.9213 15.8131 12.9789H15.3058ZM14.7113 16.4426L14.3526 16.0839C14.1652 16.2713 13.9024 16.3933 13.4064 16.46C12.8956 16.5288 12.2187 16.5298 11.2476 16.5298V17.0371V17.5444C12.1899 17.5444 12.9475 17.5455 13.5416 17.4655C14.1504 17.3836 14.6628 17.2084 15.07 16.8013L14.7113 16.4426ZM11.2476 17.0371V16.5298H5.16026V17.0371V17.5444H11.2476V17.0371ZM5.16026 17.0371V16.5298C4.18918 16.5298 3.5122 16.5288 3.00146 16.46C2.50541 16.3933 2.24265 16.2713 2.05528 16.0839L1.69658 16.4426L1.33788 16.8013C1.74503 17.2084 2.2574 17.3836 2.86619 17.4655C3.4603 17.5455 4.21789 17.5444 5.16026 17.5444V17.0371ZM1.69658 16.4426L2.05528 16.0839C1.8679 15.8965 1.74585 15.6338 1.67911 15.1377C1.61041 14.627 1.60933 13.95 1.60933 12.9789H1.10205H0.594774C0.594774 13.9213 0.593696 14.6789 0.673619 15.273C0.755519 15.8818 0.930728 16.3941 1.33788 16.8013L1.69658 16.4426ZM1.10205 12.9789H1.60933V8.6772H1.10205H0.594774V12.9789H1.10205ZM10.7403 17.0371H11.2476V11.9643H10.7403H10.233V17.0371H10.7403ZM10.7403 11.9643H11.2476C11.2476 11.5607 11.0872 11.1736 10.8019 10.8882L10.4432 11.2469L10.0845 11.6056C10.1796 11.7008 10.233 11.8298 10.233 11.9643H10.7403ZM10.4432 11.2469L10.8019 10.8882C10.5165 10.6029 10.1294 10.4425 9.72576 10.4425V10.9498V11.4571C9.86029 11.4571 9.98932 11.5105 10.0845 11.6056L10.4432 11.2469ZM9.72576 10.9498V10.4425H6.6821V10.9498V11.4571H9.72576V10.9498ZM6.6821 10.9498V10.4425C6.27848 10.4425 5.8914 10.6028 5.606 10.8882L5.9647 11.2469L6.3234 11.6056C6.41853 11.5105 6.54756 11.4571 6.6821 11.4571V10.9498ZM5.9647 11.2469L5.606 10.8882C5.3206 11.1736 5.16027 11.5607 5.16027 11.9643H5.66755H6.17482C6.17482 11.8298 6.22827 11.7008 6.3234 11.6056L5.9647 11.2469ZM5.66755 11.9643H5.16027V17.0371H5.66755H6.17482V11.9643H5.66755Z",fill:t})})}function J5e({color:t="black",...e}){return c.jsx("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:c.jsx("path",{d:"M5.12519 5.42678H10.9951M5.12519 9.27611H10.9951M5.12519 13.1254H9.03846M3.16855 0.615112H12.9517C14.0324 0.615112 14.9084 1.47681 14.9084 2.53978V15.0501C14.9084 16.1131 14.0324 16.9748 12.9517 16.9748H3.16855C2.08793 16.9748 1.21191 16.1131 1.21191 15.0501V2.53978C1.21191 1.47681 2.08793 0.615112 3.16855 0.615112Z",stroke:t,strokeWidth:"0.85113",strokeLinecap:"round"})})}const Z5e=({color:t="black",...e})=>c.jsxs("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7145 1.04437C15.256 1.04437 15.7753 1.25948 16.1582 1.64236C16.5411 2.02525 16.7562 2.54455 16.7562 3.08604V13.2944C16.7562 13.8358 16.5411 14.3551 16.1582 14.738C15.7753 15.1209 15.256 15.336 14.7145 15.336L11.653 15.335L9.31123 17.6768C9.13545 17.8525 8.90158 17.9581 8.65349 17.9737C8.4054 17.9893 8.16015 17.9139 7.96374 17.7615L7.86778 17.6768L5.52599 15.335L2.46452 15.336C1.92303 15.336 1.40373 15.1209 1.02084 14.738C0.637955 14.3551 0.422852 13.8358 0.422852 13.2944V3.08604C0.422852 2.54455 0.637955 2.02525 1.02084 1.64236C1.40373 1.25948 1.92303 1.04437 2.46452 1.04437H14.7145Z",stroke:t,strokeWidth:"0.857499",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.58849 9.21104C9.09891 9.21104 9.60932 8.70062 9.60932 8.1902C9.60932 7.67979 9.09891 7.16937 8.58849 7.16937C8.07807 7.16937 7.56868 7.67979 7.56868 8.1902C7.56868 8.70062 8.07807 9.21104 8.58849 9.21104ZM4.50516 9.21104C5.01558 9.21104 5.52599 8.70062 5.52599 8.1902C5.52599 7.67979 5.01558 7.16937 4.50516 7.16937C3.99475 7.16937 3.48535 7.67979 3.48535 8.1902C3.48535 8.70062 3.99475 9.21104 4.50516 9.21104ZM12.6718 9.21104C13.1822 9.21104 13.6926 8.70062 13.6926 8.1902C13.6926 7.67979 13.1822 7.16937 12.6718 7.16937C12.1614 7.16937 11.652 7.67979 11.652 8.1902C11.652 8.70062 12.1614 9.21104 12.6718 9.21104Z",fill:t})]});function ebe({color:t="black",...e}){return c.jsx("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:c.jsx("path",{d:"M14.463 13.865C14.9423 13.865 15.4019 14.0554 15.7408 14.3943C16.0797 14.7332 16.2701 15.1929 16.2701 15.6722C16.2701 16.1515 16.0797 16.6111 15.7408 16.95C15.4019 17.289 14.9423 17.4794 14.463 17.4794C13.9837 17.4794 13.524 17.289 13.1851 16.95C12.8462 16.6111 12.6558 16.1515 12.6558 15.6722C12.6558 15.1929 12.8462 14.7332 13.1851 14.3943C13.524 14.0554 13.9837 13.865 14.463 13.865ZM14.463 14.7686C14.2233 14.7686 13.9935 14.8638 13.824 15.0332C13.6546 15.2027 13.5594 15.4325 13.5594 15.6722C13.5594 15.9118 13.6546 16.1417 13.824 16.3111C13.9935 16.4806 14.2233 16.5758 14.463 16.5758C14.7026 16.5758 14.9324 16.4806 15.1019 16.3111C15.2714 16.1417 15.3666 15.9118 15.3666 15.6722C15.3666 15.4325 15.2714 15.2027 15.1019 15.0332C14.9324 14.8638 14.7026 14.7686 14.463 14.7686ZM6.3307 13.865C6.80999 13.865 7.26965 14.0554 7.60856 14.3943C7.94747 14.7332 8.13787 15.1929 8.13787 15.6722C8.13787 16.1515 7.94747 16.6111 7.60856 16.95C7.26965 17.289 6.80999 17.4794 6.3307 17.4794C5.8514 17.4794 5.39174 17.289 5.05283 16.95C4.71392 16.6111 4.52352 16.1515 4.52352 15.6722C4.52352 15.1929 4.71392 14.7332 5.05283 14.3943C5.39174 14.0554 5.8514 13.865 6.3307 13.865ZM6.3307 14.7686C6.09105 14.7686 5.86122 14.8638 5.69176 15.0332C5.52231 15.2027 5.42711 15.4325 5.42711 15.6722C5.42711 15.9118 5.52231 16.1417 5.69176 16.3111C5.86122 16.4806 6.09105 16.5758 6.3307 16.5758C6.57034 16.5758 6.80017 16.4806 6.96963 16.3111C7.13908 16.1417 7.23428 15.9118 7.23428 15.6722C7.23428 15.4325 7.13908 15.2027 6.96963 15.0332C6.80017 14.8638 6.57034 14.7686 6.3307 14.7686ZM16.2701 3.02198H3.86391L6.16805 8.44349H13.5594C13.8576 8.44349 14.1196 8.29892 14.2823 8.08206L16.993 4.46771C17.1105 4.3141 17.1737 4.12435 17.1737 3.92556C17.1737 3.68592 17.0785 3.45609 16.9091 3.28663C16.7396 3.11718 16.5098 3.02198 16.2701 3.02198ZM13.5594 9.34708H6.21323L5.51747 10.7567L5.42711 11.1543C5.42711 11.3939 5.52231 11.6237 5.69176 11.7932C5.86122 11.9626 6.09105 12.0578 6.3307 12.0578H16.2701V12.9614H6.3307C5.8514 12.9614 5.39174 12.771 5.05283 12.4321C4.71392 12.0932 4.52352 11.6335 4.52352 11.1543C4.52326 10.8477 4.60099 10.546 4.74942 10.2778L5.4 8.9495L2.11998 1.2148H0.90918V0.311218H2.71635L3.4844 2.11839H16.2701C16.7494 2.11839 17.2091 2.30879 17.548 2.6477C17.8869 2.98661 18.0773 3.44627 18.0773 3.92556C18.0773 4.37736 17.9237 4.75686 17.6707 5.06408L15.0413 8.57903C14.716 9.03986 14.1738 9.34708 13.5594 9.34708Z",fill:t})})}function tbe({color:t="black",...e}){return c.jsx("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:c.jsx("path",{d:"M4.1359 15.3442C4.9803 14.7362 5.87636 14.2557 6.82408 13.9027C7.77114 13.5491 8.797 13.3722 9.90168 13.3722C11.0064 13.3722 12.0322 13.5491 12.9793 13.9027C13.9263 14.2564 14.8224 14.7365 15.6675 15.3432C16.3231 14.6643 16.8506 13.863 17.25 12.9391C17.6493 12.0139 17.849 10.9993 17.849 9.89528C17.849 7.6932 17.0751 5.81796 15.5274 4.26956C13.9797 2.72115 12.1044 1.94728 9.90168 1.94795C7.69895 1.94861 5.82371 2.72281 4.27597 4.27055C2.72823 5.81829 1.95435 7.6932 1.95435 9.89528C1.95435 10.9993 2.15403 12.0139 2.55339 12.9391C2.95274 13.8636 3.48024 14.665 4.1359 15.3432M9.90268 10.392C9.06556 10.392 8.35924 10.1046 7.78372 9.5297C7.2082 8.95484 6.92077 8.24918 6.92144 7.41273C6.9221 6.57627 7.20953 5.86995 7.78372 5.29377C8.35791 4.71759 9.0639 4.43016 9.90168 4.43149C10.7395 4.43281 11.4455 4.72024 12.0196 5.29377C12.5938 5.8673 12.8813 6.57329 12.8819 7.41173C12.8826 8.25018 12.5952 8.95617 12.0196 9.5297C11.4441 10.1032 10.7385 10.3907 9.90268 10.392ZM9.90168 18.836C8.65461 18.836 7.48735 18.6039 6.39989 18.1396C5.31243 17.6754 4.36604 17.0409 3.56071 16.2363C2.75538 15.4316 2.12092 14.4852 1.65732 13.3971C1.19373 12.3089 0.961601 11.1417 0.960939 9.89528C0.960277 8.64887 1.1924 7.4816 1.65732 6.39348C2.12224 5.30536 2.7567 4.35897 3.56071 3.5543C4.36604 2.74963 5.31243 2.11517 6.39989 1.65091C7.48735 1.18666 8.65461 0.954529 9.90168 0.954529C11.1488 0.954529 12.316 1.18666 13.4035 1.65091C14.4909 2.11517 15.4373 2.74963 16.2427 3.5543C17.048 4.35897 17.6824 5.30536 18.146 6.39348C18.6096 7.4816 18.8418 8.64887 18.8424 9.89528C18.8431 11.1417 18.611 12.3089 18.146 13.3971C17.6811 14.4852 17.0467 15.4316 16.2427 16.2363C15.4373 17.0409 14.4909 17.6754 13.4035 18.1396C12.316 18.6039 11.1488 18.836 9.90168 18.836ZM9.90168 17.8426C10.8176 17.8426 11.7186 17.6823 12.6048 17.3618C13.4909 17.0419 14.2568 16.6035 14.9025 16.0465C14.2575 15.5279 13.5108 15.1183 12.6624 14.8177C11.814 14.517 10.8938 14.3663 9.90168 14.3656C8.90959 14.365 7.98605 14.5123 7.13105 14.8077C6.27605 15.1031 5.53231 15.516 4.89983 16.0465C5.54555 16.6028 6.31181 17.0413 7.1986 17.3618C8.08539 17.6823 8.98642 17.8426 9.90168 17.8426ZM9.90168 9.39857C10.4593 9.39857 10.9299 9.20684 11.3133 8.82338C11.6968 8.43992 11.8885 7.96937 11.8885 7.41173C11.8885 6.8541 11.6968 6.38355 11.3133 6.00009C10.9299 5.61663 10.4593 5.4249 9.90168 5.4249C9.34405 5.4249 8.8735 5.61663 8.49004 6.00009C8.10658 6.38355 7.91485 6.8541 7.91485 7.41173C7.91485 7.96937 8.10658 8.43992 8.49004 8.82338C8.8735 9.20684 9.34405 9.39857 9.90168 9.39857Z",fill:t})})}function rbe({color:t="black",...e}){return c.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[c.jsx("path",{d:"M5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565Z",fill:t,fillOpacity:"0.16"}),c.jsx("path",{d:"M5.20469 0.804565H2.40469C1.98034 0.804565 1.57338 0.973136 1.27332 1.27319C0.973259 1.57325 0.804688 1.98022 0.804688 2.40457V7.20457C0.804688 7.41468 0.846073 7.62274 0.92648 7.81686C1.00689 8.01098 1.12474 8.18736 1.27332 8.33594C1.42189 8.48451 1.59827 8.60237 1.79239 8.68277C1.98652 8.76318 2.19457 8.80457 2.40469 8.80457H5.20469C5.4148 8.80457 5.62286 8.76318 5.81698 8.68277C6.0111 8.60237 6.18748 8.48451 6.33606 8.33594C6.48463 8.18736 6.60249 8.01098 6.68289 7.81686C6.7633 7.62274 6.80469 7.41468 6.80469 7.20457V2.40457C6.80469 1.98022 6.63612 1.57325 6.33606 1.27319C6.036 0.973136 5.62903 0.804565 5.20469 0.804565ZM5.20469 12.8046H2.40469C1.98034 12.8046 1.57338 12.9731 1.27332 13.2732C0.973259 13.5733 0.804688 13.9802 0.804688 14.4046V17.2046C0.804688 17.6289 0.973259 18.0359 1.27332 18.3359C1.57338 18.636 1.98034 18.8046 2.40469 18.8046H5.20469C5.62903 18.8046 6.036 18.636 6.33606 18.3359C6.63612 18.0359 6.80469 17.6289 6.80469 17.2046V14.4046C6.80469 13.9802 6.63612 13.5733 6.33606 13.2732C6.036 12.9731 5.62903 12.8046 5.20469 12.8046ZM15.2047 0.804565H12.4047C11.9803 0.804565 11.5734 0.973136 11.2733 1.27319C10.9733 1.57325 10.8047 1.98022 10.8047 2.40457V5.20457C10.8047 5.62891 10.9733 6.03588 11.2733 6.33594C11.5734 6.63599 11.9803 6.80457 12.4047 6.80457H15.2047C15.629 6.80457 16.036 6.63599 16.3361 6.33594C16.6361 6.03588 16.8047 5.62891 16.8047 5.20457V2.40457C16.8047 1.98022 16.6361 1.57325 16.3361 1.27319C16.036 0.973136 15.629 0.804565 15.2047 0.804565ZM15.2047 10.8046H12.4047C11.9803 10.8046 11.5734 10.9731 11.2733 11.2732C10.9733 11.5733 10.8047 11.9802 10.8047 12.4046V17.2046C10.8047 17.6289 10.9733 18.0359 11.2733 18.3359C11.5734 18.636 11.9803 18.8046 12.4047 18.8046H15.2047C15.629 18.8046 16.036 18.636 16.3361 18.3359C16.6361 18.0359 16.8047 17.6289 16.8047 17.2046V12.4046C16.8047 11.9802 16.6361 11.5733 16.3361 11.2732C16.036 10.9731 15.629 10.8046 15.2047 10.8046Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinejoin:"round"})]})}function Pj(){const t={left:"2rem",bottom:"2rem"};return typeof window>"u"||!window.matchMedia?t:window.matchMedia("(min-width: 1280px)").matches?{left:"18rem",bottom:"2rem"}:window.matchMedia("(min-width: 1024px)").matches?{left:"16rem",bottom:"2rem"}:window.matchMedia("(min-width: 768px)").matches?{left:"4rem",bottom:"2rem"}:t}function nbe({tab:t,setTab:e,cartCount:r=0,unreadMessages:n=0,ordersCount:s=0}){const{profile:a}=Vn(),{t:i}=Ds(),o=a&&a.role==="pharmacy",[l,u]=R.useState({left:0,opacity:0}),d=R.useRef(null),p=R.useRef({}),g=R.useRef(null),[m,x]=R.useState(()=>Pj()),[y,b]=R.useState(()=>typeof window>"u"||!window.matchMedia?!1:window.matchMedia("(min-width: 1024px)").matches);R.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const te=window.matchMedia("(min-width: 1024px)"),H=ie=>b(ie.matches);return te.addEventListener?te.addEventListener("change",H):te.addListener(H),b(te.matches),()=>{te.removeEventListener?te.removeEventListener("change",H):te.removeListener(H)}},[]),R.useEffect(()=>{if(typeof window>"u")return;const te=()=>{const H=Pj();x(ie=>ie.left===H.left&&ie.bottom===H.bottom?ie:H)};return te(),window.addEventListener("resize",te,{passive:!0}),()=>window.removeEventListener("resize",te)},[]);const S=[o?{key:"/",label:i("dashboard","Dashboard"),icon:rbe}:{key:"/",label:i("home","Home"),icon:Q5e},{key:"/orders",label:i("orders","Orders"),icon:J5e},{key:"/messages",label:i("messages","Messages"),icon:Z5e},...o?[]:[{key:"/cart",label:i("cart","Cart"),icon:ebe}],{key:"/profile",label:i("profile","Profile"),icon:tbe}],P=n>99?"99+":String(n||""),O=y&&t==="/messages";R.useLayoutEffect(()=>{const te=d.current;if(!te)return;const H=te.getBoundingClientRect(),ie=g.current;if(ie){const K=ie.left-H.left,I=ie.top-H.top;(Math.abs(K)>.5||Math.abs(I)>.5)&&(te.style.transition="none",te.style.willChange="transform",te.style.transform=`translate3d(${K}px, ${I}px, 0)`,requestAnimationFrame(()=>{te.style.transition="",te.style.transform="",te.style.willChange=""}))}g.current=H},[m,O]);const W=()=>{const te=S.findIndex(K=>K.key===t),H=p.current[t],ie=d.current;if(H&&ie&&te!==-1){const K=ie.getBoundingClientRect(),I=H.getBoundingClientRect(),z=ue.halfWidth,X=I.left-K.left+I.width/2-z;u({left:`${X}px`,opacity:1})}else u(K=>({...K,opacity:0}))};R.useEffect(()=>{requestAnimationFrame(()=>{W()})},[t,S,O]),R.useEffect(()=>{let te;const H=()=>{clearTimeout(te),te=setTimeout(()=>{requestAnimationFrame(W)},100)};return window.addEventListener("resize",H,{passive:!0}),()=>{window.removeEventListener("resize",H),clearTimeout(te)}},[]),R.useEffect(()=>{try{console.debug("[BottomNav] props",{tab:t,cartCount:r,unreadMessages:n,ordersCount:s,displayUnread:P,profile:a})}catch(te){console.error("[BottomNav] debug log failed",te)}},[t,r,n,s,P,a]);const Y=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1",L="cubic-bezier(0.22, 1, 0.36, 1)",A=O?{bottom:m.bottom,left:m.left,transform:"translate3d(0, 0, 0)",transition:`bottom 420ms ${L}, left 420ms ${L}, transform 420ms ${L}`,paddingBottom:"calc(env(safe-area-inset-bottom) + 0px)"}:{bottom:"1rem",left:"50%",transform:"translate3d(-50%, 0, 0)",transition:`bottom 420ms ${L}, left 420ms ${L}, transform 420ms ${L}`,paddingBottom:"calc(env(safe-area-inset-bottom) + 0px)"},N="fixed z-50 flex items-end",D=["liquid-bottom-nav relative isolate overflow-hidden pointer-events-auto transform-gpu transition-[box-shadow,transform] duration-[420ms] ease-[cubic-bezier(0.22,1,0.36,1)]","backdrop-blur-lg backdrop-saturate-200 bg-white/25 dark:bg-zinc-900/35 border border-white/25 dark:border-white/10 ring-1 ring-inset ring-white/10",O?"max-w-[320px] min-w-[240px] px-4 py-2.5 rounded-full shadow-[0_25px_60px_-30px_rgba(2,6,23,0.55)]":"max-w-[95vw] min-w-[280px] sm:max-w-md lg:max-w-lg px-6 sm:px-6 py-3.5 rounded-full shadow-[0_30px_80px_-40px_rgba(2,6,23,0.55)]"].join(" "),j=O?"min-w-[48px] px-1 py-2.5":"min-w-[56px] sm:min-w-[64px] md:min-w-[72px] px-1 sm:px-2 py-3",F=O?"h-6 w-6 mb-1.5":"h-7 w-7 sm:h-7 sm:w-7 mb-2 sm:mb-2",M=O?"text-[10px]":"text-[10px] sm:text-[12px]",Z=O?"max-w-[52px]":"max-w-[56px] sm:max-w-[72px]",ue=O?{bottom:"4.2rem",width:"2.35rem",height:"0.45rem",borderRadius:"9999px",halfWidth:2.35*16*.5}:{bottom:"5.6rem",width:"2.75rem",height:"0.5rem",borderRadius:"9999px",halfWidth:2.75*16*.5},pe=ue.bottom,fe=ue.width;return c.jsxs("div",{className:N,style:A,"aria-hidden":!1,children:[c.jsxs("nav",{ref:d,role:"navigation","aria-label":"Bottom navigation",className:D,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"},children:[c.jsxs("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:[c.jsx("div",{className:"absolute inset-x-0 top-0 h-1/2 bg-gradient-to-b from-white/50 via-white/10 to-transparent"}),c.jsx("div",{className:"absolute inset-0 rounded-[inherit] ring-1 ring-inset ring-white/20"}),c.jsx("div",{className:"absolute inset-0 opacity-[0.08] mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><filter id='n'>  <feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/>  <feColorMatrix type='saturate' values='0'/>  <feComponentTransfer>    <feFuncA type='linear' slope='0.05'/>  </feComponentTransfer>  <feBlend mode='overlay' in2='SourceGraphic'/> </filter> <rect width='100%' height='100%' filter='url(%23n)' opacity='0.7'/></svg>")`,backgroundSize:"120px 120px"}})]}),c.jsx("div",{className:"absolute rounded-full will-change-transform",style:{left:l.left,opacity:l.opacity,transition:`left 260ms ${L}, width 320ms ${L}, bottom 320ms ${L}, opacity 180ms ease-out`,transform:`scale(${l.opacity})`,boxShadow:"0 8px 22px rgba(2, 132, 199, 0.25), 0 0 24px rgba(59, 130, 246, 0.35)",bottom:pe,width:fe,height:ue.height,borderRadius:ue.borderRadius,background:"linear-gradient(90deg, rgba(14, 165, 233, 0.9) 0%, rgba(59, 130, 246, 0.8) 50%, rgba(14, 165, 233, 0.9) 100%)",backdropFilter:"blur(8px) saturate(160%)"}}),c.jsx("div",{className:"flex items-center justify-center gap-[-1] px-2",children:S.map((te,H)=>{const ie=t===te.key,K=te.icon,I={color:ie?"#36A5FF":document.documentElement.classList.contains("dark")?"#ffffff":"#6b7280"},z=te.key==="/cart",X=te.key==="/messages",J=te.key==="/orders";return c.jsx("div",{className:"flex-none",children:c.jsxs("button",{ref:se=>p.current[te.key]=se,onClick:()=>e(te.key),"aria-label":te.label,"aria-pressed":ie,className:`relative flex flex-col items-center text-xs ${j} focus:outline-none transition-all duration-150 ease-out will-change-transform ${ie?"text-sky-600 dark:text-sky-400 transform scale-[1.04]":"text-zinc-600 dark:text-zinc-300 hover:text-zinc-800 dark:hover:text-zinc-100"}`,children:[c.jsx("div",{className:"relative z-10 transition-transform duration-150 ease-out will-change-transform hover:scale-110",children:c.jsx(K,{...I,className:`${F} transition-all duration-150 ease-out ${ie?"drop-shadow-lg":""}`})}),z&&r>0&&c.jsx("span",{className:"absolute -top-0.5 -right-0.5 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:r}),J&&o&&s>0&&c.jsx("span",{className:"absolute -top-0.5 -right-0 z-50 bg-orange-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:s>99?"99+":s}),X&&n>0&&(()=>{try{return c.jsx("span",{role:"status","aria-live":"polite","aria-atomic":"true",className:"absolute top-0 right-2 z-50 bg-sky-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1 font-bold border-2 border-white shadow animate-bounceIn transition-all duration-200 hover:scale-110",children:P})}catch(se){return console.error("[BottomNav] Error rendering messages badge",se,{unreadMessages:n}),null}})(),c.jsx("span",{className:`truncate ${Z} block text-center ${M} transition-all duration-150 ease-out ${ie?"font-bold":"font-normal"}`,children:te.label})]})},te.key)})})]}),Y&&c.jsxs("div",{className:"fixed bottom-20 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["UnreadRaw: ",String(n)]})]})}function jj(t){return c.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:c.jsx("path",{d:"M4.87524 5.41667C4.73158 5.41667 4.59381 5.47373 4.49223 5.57532C4.39064 5.6769 4.33358 5.81467 4.33358 5.95833V8.125H5.41691V6.5H7.04191V7.85417L8.93774 5.95833L7.04191 4.0625V5.41667H4.87524ZM6.8832 0.75454L12.2457 6.11704C12.3472 6.21862 12.4043 6.35637 12.4043 6.5C12.4043 6.64363 12.3472 6.78138 12.2457 6.88296L6.8832 12.2455C6.78162 12.347 6.64387 12.404 6.50024 12.404C6.35661 12.404 6.21886 12.347 6.11728 12.2455L0.754784 6.88296C0.653237 6.78138 0.596191 6.64363 0.596191 6.5C0.596191 6.35637 0.653237 6.21862 0.754784 6.11704L6.11728 0.75454C6.21886 0.652993 6.35661 0.595947 6.50024 0.595947C6.64387 0.595947 6.78162 0.652993 6.8832 0.75454Z",fill:"currentColor"})})}function sbe(){return c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:c.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsx("div",{className:"w-[70px] h-[24px] bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})}),c.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 pt-24 pb-36",children:c.jsxs("div",{className:"w-full max-w-full px-4 pt-6",children:[c.jsx("div",{className:"mb-6 flex flex-col items-center",children:c.jsx("div",{className:"w-[68vw] h-[58vw] bg-gray-200 dark:bg-gray-700 rounded-md"})}),c.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[c.jsx("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"mb-2",children:c.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded-full"})}),c.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-4 w-2/3 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"mt-2 mb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded-full mb-2"}),c.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded-full"})]})}),c.jsx("div",{className:"mt-4 border-b border-gray-200 dark:border-gray-700"}),c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded-full mb-2"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-5/6 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-4/5 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]}),c.jsx("div",{className:"mt-8 border-b border-gray-200 dark:border-gray-700"}),c.jsxs("div",{className:"mt-8",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]})}),c.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("div",{className:"h-3 w-1/3 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"flex gap-1",children:Array.from({length:5}).map((r,n)=>c.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"},n))})]}),c.jsx("div",{className:"h-3 w-16 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"h-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-3 w-4/5 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-3 w-8 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]},e))}),c.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded-full mb-3"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-lg"}),c.jsx("div",{className:"h-20 w-full bg-gray-200 dark:bg-gray-700 rounded-lg"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-10 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-10 w-20 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})]})]})]})})]})}function abe(){return c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"pt-6 sticky top-0 z-20 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md pb-2",children:c.jsx("div",{className:"w-full max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-8 lg:px-12 xl:px-0",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"w-[70px] h-[24px] bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})})}),c.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:c.jsx("div",{className:"w-full max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-8 lg:px-12 xl:px-0 pt-1 pb-36",children:c.jsx("div",{className:"mt-1 border rounded-t-3xl border-zinc-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full pt-6 pb-36",children:c.jsx("div",{className:"mx-auto w-full",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[c.jsxs("div",{className:"rounded-2xl border p-4 bg-gray-50 dark:bg-gray-800/50",children:[c.jsx("div",{className:"w-full h-80 bg-gray-200 dark:bg-gray-700 rounded-md"}),c.jsxs("div",{className:"w-full mt-4 flex flex-col gap-3",children:[c.jsx("div",{className:"w-full h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"w-full h-10 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]}),c.jsxs("div",{className:"flex flex-col space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("div",{className:"h-7 w-3/4 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-5 w-1/2 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-4 w-2/3 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"h-8 w-32 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{children:[c.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700"}),c.jsxs("div",{children:[c.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded-full mb-2"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-5/6 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-4/5 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700"}),c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-4 w-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]})}),c.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("div",{className:"h-3 w-1/3 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"flex gap-1",children:Array.from({length:5}).map((r,n)=>c.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"},n))})]}),c.jsx("div",{className:"h-3 w-16 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"h-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-3 w-4/5 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"h-3 w-8 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]},e))}),c.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded-full mb-3"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-lg"}),c.jsx("div",{className:"h-20 w-full bg-gray-200 dark:bg-gray-700 rounded-lg"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-10 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"h-10 w-20 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})]})]})]})]})})})})})})]})}function ibe({product:t,pharmacy:e}){const{user:r}=Vn(),{t:n}=Ds(),s=Jn(),{userCoords:a}=rg();if(!t)return null;const i=Number(t.price||0),[o,l]=R.useState(!1),[u,d]=R.useState(!1),[p,g]=R.useState(null),[m,x]=R.useState(!1),[y,b]=R.useState(!1),[S,P]=R.useState(!1);R.useEffect(()=>{if(e&&a){const Fe=UV(e,a,"driving");g(Fe)}else g(null)},[e,a]),R.useEffect(()=>{(async()=>{if(r&&t)try{const Pe=await TV(r.uid,t.id);b(Pe)}catch(Pe){console.error("Error checking wishlist status:",Pe)}})()},[r,t]);const[T,O]=R.useState([]),[W,Y]=R.useState(!1);async function L(Fe){if(!Fe)return O([]);try{Y(!0);const Pe=br(tr(ct,"products"),Fr("category","==",Fe)),ye=(await vn(Pe)).docs.map(Ae=>({id:Ae.id,...Ae.data()}));O(ye),d(!0)}catch(Pe){console.error("Failed to fetch category products",Pe),O([]),d(!0)}finally{Y(!1)}}const[A,N]=R.useState([]),[D,j]=R.useState(!0),[F,M]=R.useState({name:r?.displayName||"",rating:"",comment:""}),[Z,ue]=R.useState(!1),[pe,fe]=R.useState(3),[te,H]=R.useState(!1),[ie,K]=R.useState({}),[I,z]=R.useState({});R.useEffect(()=>{async function Fe(){if(!t?.id)return N([]);j(!0);try{const Pe=tr(ct,"products",t.id,"reviews"),ne=br(Pe,Qa("createdAt","desc")),ye=await vn(ne);N(ye.docs.map(Ae=>({id:Ae.id,...Ae.data()})))}catch{N([])}finally{j(!1)}}Fe()},[t?.id]),R.useEffect(()=>{async function Fe(){if(!r||!t?.id||A.length===0)return z({});const Pe={};for(const ne of A){ir(ct,"products",t.id,"reviews",ne.id,"likes",r.uid);try{const ye=await vn(br(tr(ct,"products",t.id,"reviews",ne.id,"likes")));Pe[ne.id]=ye.docs.some(Ae=>Ae.id===r.uid)}catch{}}z(Pe)}Fe()},[r,t?.id,A]);function X(Fe){const{name:Pe,value:ne}=Fe.target;M(ye=>({...ye,[Pe]:ne}))}async function J(Fe){if(Fe.preventDefault(),!(!F.rating&&!F.comment)){ue(!0);try{const Pe=tr(ct,"products",t.id,"reviews");await af(Pe,{name:F.name,rating:F.rating?Number(F.rating):null,comment:F.comment||"",createdAt:Is(),userId:r?.uid||null}),M({name:r?.displayName||"",rating:"",comment:""});const ne=br(Pe,Qa("createdAt","desc")),ye=await vn(ne);N(ye.docs.map(Ae=>({id:Ae.id,...Ae.data()})))}catch{}finally{ue(!1)}}}async function se(Fe){K(Pe=>({...Pe,[Fe]:!0}));try{const Pe=ir(ct,"products",t.id,"reviews",Fe,"likes",r.uid),ne=ir(ct,"products",t.id,"reviews",Fe);I[Fe]?(await jc(Pe),await ds(ne,{likes:A5(-1)}),N(ye=>ye.map(Ae=>Ae.id===Fe?{...Ae,likes:Math.max((Ae.likes||1)-1,0)}:Ae)),z(ye=>({...ye,[Fe]:!1}))):(await ad(Pe,{likedAt:Is(),userId:r.uid}),await ds(ne,{likes:A5(1)}),N(ye=>ye.map(Ae=>Ae.id===Fe?{...Ae,likes:(Ae.likes||0)+1}:Ae)),z(ye=>({...ye,[Fe]:!0})))}catch{}finally{K(Pe=>({...Pe,[Fe]:!1}))}}if(!r)return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:n("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-6 py-2 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>s("/auth/landing"),children:n("sign_in_sign_up","Sign In / Sign Up")})]});function le({value:Fe,onChange:Pe,disabled:ne}){return c.jsx("div",{className:"flex gap-1 mb-2",role:"radiogroup","aria-label":"Rating",children:[1,2,3,4,5].map(ye=>c.jsx("button",{type:"button",onClick:()=>!ne&&Pe(ye),onKeyDown:Ae=>{!ne&&(Ae.key==="Enter"||Ae.key===" ")&&Pe(ye)},tabIndex:0,"aria-label":`${ye} Star${ye>1?"s":""}`,"aria-checked":Fe===ye,className:`transition-all duration-150 focus:outline-none ${Fe>=ye?"text-amber-400 scale-110":"text-zinc-300"} hover:scale-125 active:scale-95`,children:c.jsx(c4,{className:"w-6 h-6",fill:Fe>=ye?"#fbbf24":"none"})},ye))})}const ve=`${window.location.origin}/product-preview/${t?.id}`;async function xe(){if(navigator.share){try{await navigator.share({title:t.name,text:`Check out this product: ${t.name}`,url:ve})}catch{}x(!1)}else if(navigator.clipboard){try{await navigator.clipboard.writeText(ve),alert(n("shareable_link_copied","Shareable link copied to clipboard!"))}catch{window.prompt(n("copy_this_link","Copy this link:"),ve)}x(!1)}else window.prompt(n("copy_this_link","Copy this link:"),ve),x(!1)}const Ee=async()=>{if(!r){alert(n("please_sign_in_wishlist","Please sign in to add items to your wishlist"));return}if(!S){P(!0);try{y?(await AV(r.uid,t.id),b(!1)):(await CV(r.uid,t.id,{name:t.name,price:t.price,image:t.image,category:t.category,pharmacyId:e?.id,pharmacyName:e?.name}),b(!0))}catch(Fe){console.error("Error toggling wishlist:",Fe),alert(n("failed_update_wishlist","Failed to update wishlist. Please try again."))}finally{P(!1)}}};function ke(){const Fe=new URLSearchParams({productId:t?.id||"",productName:t?.name||"",productImage:t?.image||"",vendorName:e?.name||"",prefillMsg:"I want to know more about this drug"});s(`/chat/${e?.id}?${Fe.toString()}`),x(!1)}const oe=()=>c.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:c.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>s(-1),className:"w-[70px] h-[24px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white border border-zinc-300 dark:border-gray-600 hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[c.jsx(Xd,{className:"h-4 w-4 mr-1"})," ",n("back","Back")]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",className:`p-2 rounded-full border border-zinc-200 bg-white hover:scale-110 active:scale-95 transition-all duration-200 ${y?"bg-red-50 hover:bg-red-100":"hover:bg-red-50"} ${S?"opacity-50 cursor-not-allowed":""}`,"aria-label":y?"Remove from wishlist":"Add to wishlist",onClick:Ee,disabled:S,children:c.jsx(YT,{className:`w-5 h-5 transition-colors ${y?"text-red-500 fill-current":"text-red-400"}`})}),c.jsx("button",{type:"button",className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Share product",onClick:()=>x(!0),children:c.jsx(l3,{className:"w-5 h-5 text-sky-600"})})]})]})});return c.jsxs(c.Fragment,{children:[mi.createPortal(c.jsx(oe,{}),document.body),c.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 pt-24 md:pt-0",children:c.jsxs("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 md:px-8 lg:px-12 xl:px-0",children:[c.jsxs("div",{className:"pt-6 sticky top-0 z-20 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md pb-2 animate-slide-down-fade items-center justify-between hidden md:flex",children:[c.jsxs("button",{onClick:()=>s(-1),className:"w-[70px] h-[24px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white hover:scale-105 hover:shadow-md transition-all duration-200 active:scale-95",children:[c.jsx(Xd,{className:"h-4 w-4 mr-1"})," ",n("back","Back")]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",className:`p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:scale-110 active:scale-95 transition-all duration-200 ${y?"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30":"hover:bg-red-50 dark:hover:bg-red-900/20"} ${S?"opacity-50 cursor-not-allowed":""}`,"aria-label":y?"Remove from wishlist":"Add to wishlist",onClick:Ee,disabled:S,children:c.jsx(YT,{className:`w-5 h-5 transition-colors ${y?"text-red-500 fill-current":"text-red-400"}`})}),c.jsx("button",{type:"button",className:"p-2 rounded-full border border-zinc-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-sky-50 dark:hover:bg-sky-900/20 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":"Share product",onClick:()=>x(!0),children:c.jsx(l3,{className:"w-5 h-5 text-sky-600"})})]})]}),c.jsx("div",{className:"mt-1 md:border md:rounded-t-3xl md:max-w-4xl md:border-zinc-100 dark:md:border-gray-700 animate-fade-in-up",children:c.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-0 md:px-8 lg:px-12 xl:px-0 pt-6 pb-36",children:c.jsx("div",{className:"mx-auto w-full",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[c.jsxs("div",{className:"md:rounded-2xl md:p-4 md:border flex flex-col items-center justify-center w-full card-interactive hover:shadow-lg transition-all duration-300 animate-fade-in-left",children:[t?.image&&!o?c.jsx("img",{src:t.image,alt:t.name,onError:()=>l(!0),className:"w-[68vw] h-[58vw] md:h-auto md:max-h-[160px] lg:max-h-[360px] object-cover md:object-contain hover:scale-105 transition-transform duration-300"}):c.jsx("div",{className:"h-[100px] lg:h-[200px] w-full flex items-center justify-center bg-zinc-100 dark:bg-gray-700 rounded-md text-3xl font-semibold text-zinc-800 dark:text-zinc-200 animate-bounce-gentle",children:c.jsx(hd,{name:t.name,image:t.image,category:t.category,size:48,"lg:size":80,roundedClass:"rounded-md"})}),c.jsxs("div",{className:"w-full mt-4 hidden lg:flex flex-col gap-3",children:[c.jsx("button",{onClick:async()=>{if(!r)return alert("Please sign in");if(!t.id)return alert(n("product_unavailable","Product unavailable. Please try again."));try{await R1(r.uid,t.id,1)}catch{alert(n("failed_add_to_cart","Failed to add to cart."))}},className:"w-full h-10 rounded-full bg-sky-600 text-white text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":n("add_to_cart","Add to Cart"),children:n("add_to_cart","Add to Cart")}),c.jsxs("a",{href:`tel:${e?.phone||""}`,className:"w-full h-10 rounded-full border border-zinc-400 dark:border-gray-600 text-[14px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 dark:text-white bg-white dark:bg-gray-800 btn-interactive hover:border-zinc-500 dark:hover:border-gray-500 hover:scale-105 active:scale-95 transition-all duration-200","aria-label":n("call_to_order","Call to Order"),children:[c.jsx(b2,{className:"h-4 w-4 text-zinc-800 dark:text-white"})," ",n("call_to_order","Call to Order")]})]})]}),c.jsxs("div",{className:"flex flex-col animate-fade-in-right",children:[c.jsxs("div",{className:"mb-3 flex items-start justify-between animate-slide-up",style:{animationDelay:"0.1s"},children:[c.jsx("h1",{className:"text-[18px] lg:text-[20px] font-poppins font-medium tracking-tight leading-tight min-w-0 animate-text-reveal text-gray-900 dark:text-white",children:t.name}),c.jsxs("div",{className:"text-[18px] text-sky-600 dark:text-sky-400 font-poppins font-semibold lg:hidden animate-pulse-slow",children:["₦",i.toLocaleString()]})]}),c.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.2s"},children:c.jsxs("div",{className:"text-[20px] text-sky-600 dark:text-sky-400 font-poppins font-semibold animate-pulse-slow",children:["₦",i.toLocaleString()]})}),c.jsx("div",{className:"mb-2 animate-fade-in",style:{animationDelay:"0.3s"},children:c.jsx("button",{onClick:()=>s(`/vendor/${e?.id||t.pharmacyId}`),className:"text-sky-600 dark:text-sky-400 underline font-poppins text-[15px] font-light hover:text-sky-700 dark:hover:text-sky-300 transition-colors duration-200 hover:scale-105",children:c.jsx(Qd,{name:e?.name||n("pharmacy","Pharmacy"),isVerified:e?.isVerified,className:"inline-flex items-center gap-1",nameClassName:"underline decoration-inherit underline-offset-2",iconClassName:"h-3.5 w-3.5 text-sky-500 dark:text-sky-400"})})}),c.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2 text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.4s"},children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx(Wu,{className:"h-4 w-4 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:e?.address})]}),e?.address&&c.jsxs("button",{onClick:()=>{const Fe=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${Fe}`,"_blank")},className:"text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-2 py-1 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 lg:hidden hover:scale-105 active:scale-95","aria-label":"Get directions",children:[c.jsx(jj,{className:"h-4 w-4 inline-block mr-1"})," ",n("get_directions","Get Directions")]})]}),c.jsxs("div",{className:"mb-3 flex items-center gap-2 text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light animate-fade-in",style:{animationDelay:"0.5s"},children:[c.jsx(Sk,{className:"h-4 w-4"}),p?n("eta_to_pharmacy","{time} to {pharmacy}").replace("{time}",p.formatted).replace("{pharmacy}",e?.name):a?n("calculating_eta","Calculating ETA..."):n("fetching_location","Fetching location...")]}),e?.address&&c.jsx("div",{className:"mb-4 hidden lg:block animate-fade-in",style:{animationDelay:"0.6s"},children:c.jsxs("button",{className:"flex items-center gap-2 text-sky-600 dark:text-sky-400 text-[13px] font-poppins font-light px-3 py-2 rounded-full hover:bg-sky-50 dark:hover:bg-sky-900/20 transition-all duration-200 hover:scale-105 active:scale-95",onClick:()=>{const Fe=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${Fe}`,"_blank")},children:[c.jsx(jj,{className:"h-4 w-4 text-sky-600 dark:text-sky-400"})," Get Directions"]})}),c.jsxs("div",{className:"mt-2 animate-fade-in",style:{animationDelay:"0.7s"},children:[c.jsxs("div",{className:"hidden lg:block",children:[c.jsx("div",{className:"text-[15px] tracking-tight text-black font-poppins font-medium",children:n("category","Category")}),c.jsx("div",{className:"mt-0.5 mb-5",children:c.jsx("button",{type:"button",onClick:async Fe=>{Fe.stopPropagation(),await L(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]}),c.jsx("div",{className:"block lg:hidden",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-[15px] text-black font-poppins font-medium mb-2",children:n("category","Category")}),c.jsx("div",{children:c.jsx("button",{type:"button",onClick:async Fe=>{Fe.stopPropagation(),await L(t.category||"General")},className:"text-[13px] text-[#fc7f26] font-poppins font-normal underline hover:text-amber-500 transition-colors duration-200 hover:scale-105",children:t.category||"General"})})]})})]}),c.jsx("div",{className:"mt-4 border-b"}),c.jsxs("div",{className:"mt-6 animate-fade-in",style:{animationDelay:"0.8s"},children:[c.jsx("div",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 dark:text-white",children:n("product_description","Product Description")}),c.jsx("p",{className:"mt-2 text-zinc-600 dark:text-zinc-300 leading-6 font-poppins text-[14px] font-light",children:t.description})]}),c.jsx("div",{className:"mt-8 border-b"}),c.jsxs("div",{className:"mt-8 animate-fade-in-up",style:{animationDelay:"0.9s"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[15px] font-poppins font-medium tracking-tighter text-zinc-800 dark:text-white",children:n("customer_reviews","Customer Reviews")}),c.jsx("span",{className:"text-sky-400 font-semibold text-[13px]",children:A.length})]}),te&&c.jsx("button",{className:"text-sky-400 text-[13px] font-poppins underline",onClick:()=>{H(!1),fe(3)},children:n("see_less","See less")})]}),c.jsx("div",{className:"space-y-4 mb-6",children:D?c.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500 animate-pulse",children:n("loading_reviews","Loading reviews…")}):A.length===0?c.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500 animate-fade-in text-[12px]",children:n("no_reviews_yet","No reviews yet. Be the first to review!")}):A.slice(0,pe).map((Fe,Pe)=>{let ne="";if(Fe.createdAt){const ye=Fe.createdAt.seconds?new Date(Fe.createdAt.seconds*1e3):new Date(Fe.createdAt);ne=ye.toLocaleDateString()+" "+ye.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return c.jsxs("div",{className:"p-4 rounded-xl border border-sky-100 dark:border-gray-600 animate-slide-up transition-all duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-poppins font-semibold text-[14px] text-zinc-700 dark:text-zinc-200",children:Fe.name}),c.jsxs("span",{className:"flex gap-0.5 text-amber-400 text-[13px]",children:["★".repeat(Fe.rating),"☆".repeat(5-Fe.rating)]})]}),c.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:c.jsxs("div",{className:"flex items-center justify-center",children:[Fe.likes>0&&c.jsx("span",{className:"text-sky-500 font-semibold text-[13px] mr-1",children:Fe.likes}),c.jsx("button",{className:`flex items-center justify-center px-2 py-1 rounded transition-all duration-200 ${ie[Fe.id]?"opacity-50 pointer-events-none":""} ${I[Fe.id]?"bg-sky-50 text-sky-400":"text-zinc-400"}`,onClick:()=>se(Fe.id),disabled:ie[Fe.id],"aria-label":I[Fe.id]?"Unlike review":"Like review",style:{minHeight:"20px"},children:c.jsx(jle,{className:"w-4 h-4",fill:I[Fe.id]?"#38bdf8":"none"})})]})})]}),c.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 text-[13px] font-poppins font-light",children:Fe.comment}),ne&&c.jsx("div",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 mt-1",children:ne}),Fe.pharmacyResponse&&c.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-sky-50 to-blue-50 dark:bg-gradient-to-r dark:from-gray-800 dark:to-gray-700 border border-sky-100 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"w-2 h-2 bg-sky-500 dark:bg-sky-400 rounded-full"}),c.jsx("span",{className:"font-poppins font-semibold text-[13px] text-sky-700 dark:text-white",children:n("pharmacy_response","{pharmacyName} Response",{pharmacyName:e?.name||"Pharmacy"})}),(Fe.pharmacyResponse.respondedAt||Fe.responseDate)&&c.jsx("span",{className:"text-[10px] text-sky-500 dark:text-zinc-300 ml-auto",children:new Date((Fe.pharmacyResponse.respondedAt?.seconds||Fe.responseDate?.seconds||Fe.responseDate)*1e3).toLocaleDateString()})]}),c.jsxs("div",{className:"text-zinc-700 dark:text-white text-[13px] font-poppins leading-relaxed pl-4",children:['"',typeof Fe.pharmacyResponse=="string"?Fe.pharmacyResponse:Fe.pharmacyResponse.message||Fe.pharmacyResponse,'"']})]})]},Fe.id||Pe)})}),A.length>pe&&c.jsx("div",{className:"flex justify-start",children:c.jsx("button",{className:"text-sky-400 text-[13px] font-poppins underline",onClick:()=>{fe(Fe=>Fe+3),H(!0)},children:n("see_more","See more")})}),c.jsx("div",{className:"mt-4 border-b"}),c.jsxs("form",{className:"p-4 mt-6 rounded-xl border border-zinc-100 bg-white shadow-sm animate-bounce-in",style:{animationDelay:"1.0s"},onSubmit:J,children:[c.jsx("div",{className:"mb-2 font-poppins text-[14px] font-medium text-zinc-700 dark:text-zinc-300",children:n("leave_a_review","Leave a Review")}),c.jsx(le,{value:Number(F.rating),onChange:Fe=>M(Pe=>({...Pe,rating:Fe})),disabled:Z}),c.jsx("input",{type:"text",name:"name",value:F.name,onChange:X,placeholder:n("your_name","Your Name"),className:"w-full mb-2 px-3 py-2 rounded-lg border-zinc-200 font-poppins text-[13px] focus:ring-2 focus:ring-sky-200 transition-all duration-20"}),c.jsx("textarea",{name:"comment",value:F.comment,onChange:X,placeholder:n("your_review_optional","Your review... (optional)"),className:"w-full mb-2 px-3 py-2 rounded-lg border border-zinc-200 font-poppins text-[13px] focus:ring-2 focus:ring-sky-200 transition-all duration-200",rows:3}),c.jsx("button",{type:"submit",disabled:Z||!F.rating&&!F.comment,className:"w-full h-10 rounded-full border border-sky-500 dark:border-gray-600 text-black text-[14px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:Z?n("submitting","Submitting…"):n("submit_review","Submit Review")})]})]})]})]})})})}),c.jsx("div",{className:"fixed left-0 right-0 bottom-[8rem] z-30 lg:hidden animate-slide-up-fade",children:c.jsx("div",{className:"w-full max-w-full md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-2 md:px-8 lg:px-12 xl:px-0",children:c.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[c.jsx("button",{onClick:async()=>{if(!r)return alert(n("please_sign_in","Please sign in"));if(!t.id)return alert(n("product_unavailable","Product unavailable. Please try again."));try{await R1(r.uid,t.id,1)}catch{alert(n("failed_add_to_cart","Failed to add to cart."))}},className:"flex-1 max-w-[140px] h-10 rounded-full bg-sky-600 text-white text-[13px] font-poppins font-light shadow-sm btn-interactive hover:bg-sky-700 hover:scale-105 active:scale-95 transition-all duration-200",children:n("add_to_cart","Add to Cart")}),c.jsxs("a",{href:`tel:${e?.phone||""}`,className:"flex-1 max-w-[140px] h-10 rounded-full border border-zinc-400 dark:border-gray-600 text-[13px] font-poppins font-light flex items-center justify-center gap-2 text-zinc-800 dark:text-white bg-white dark:bg-gray-800 btn-interactive hover:border-zinc-500 dark:hover:border-gray-500 hover:scale-105 active:scale-95 transition-all duration-200",children:[c.jsx(b2,{className:"h-4 w-4 text-zinc-800 dark:text-white"})," ",n("call_to_order","Call to Order")]})]})})}),u&&c.jsx("div",{onClick:()=>d(!1),className:"fixed inset-0 z-50 flex items-start justify-center pt-24 bg-black/30 dark:bg-black/80 animate-fade-in",role:"dialog","aria-modal":"true",children:c.jsxs("div",{onClick:Fe=>Fe.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl p-4 w-[90vw] max-w-md max-h-[80vh] overflow-y-auto animate-bounce-in shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("div",{className:"text-lg font-medium animate-text-reveal",children:n("products_in_category",'Products in "{category}"').replace("{category}",t.category||"General")}),c.jsx("button",{onClick:()=>d(!1),className:"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors duration-200 hover:scale-110 active:scale-95",children:n("close","Close")})]}),W?c.jsx("div",{className:"p-4 text-center text-zinc-500 dark:text-zinc-400 animate-pulse",children:n("loading","Loading…")}):T.length===0?c.jsx("div",{className:"p-4 text-zinc-500 dark:text-zinc-400 animate-fade-in",children:n("no_products_found","No products found.")}):c.jsx("div",{className:"space-y-2",children:T.map((Fe,Pe)=>c.jsxs("button",{onClick:()=>{d(!1),s(`/product/${Fe.id}`)},className:"w-full text-left rounded-lg p-2 flex items-center gap-3 hover:bg-sky-50 transition-all duration-200 card-interactive animate-fadeInUp hover:scale-102",style:{animationDelay:`${Pe*.1}s`},children:[c.jsx(hd,{name:Fe.name,image:Fe.image,category:Fe.category,size:48,className:"flex-shrink-0 animate-bounce-gentle",roundedClass:"rounded-md"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-sm truncate",children:Fe.name}),c.jsx("div",{className:"text-xs text-zinc-500 truncate",children:Fe.category})]})]},Fe.id))})]})}),m&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 dark:bg-black/30 animate-fade-in",role:"dialog","aria-modal":"true",children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 w-[90vw] max-w-xs shadow-xl animate-bounce-in flex flex-col gap-4",children:[c.jsx("div",{className:"font-poppins font-medium text-[16px] mb-2 text-center",children:n("share_product","Share Product")}),c.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg border border-sky-200 dark:border-gray-600 bg-sky-50 text-sky-700 font-poppins font-medium hover:bg-sky-100 hover:scale-105 active:scale-95 transition-all duration-200",onClick:xe,children:[c.jsx(l3,{className:"w-4 h-4"})," ",n("share_product","Share Product")]}),c.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 rounded-lg border border-zinc-200 bg-zinc-50 text-zinc-700 dark:bg-gray-700 dark:text-white dark:border-gray-600 font-poppins font-medium hover:bg-zinc-100 dark:hover:bg-gray-600 hover:scale-105 active:scale-95 transition-all duration-200",onClick:ke,children:[c.jsx("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.77 9.77 0 01-4-.8l-4 1 1-4A8.96 8.96 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n("message_vendor","Message Vendor")]}),c.jsx("button",{className:"mt-2 text-zinc-400 hover:text-zinc-700 text-[13px] font-poppins underline",onClick:()=>x(!1),children:n("cancel","Cancel")})]})})]})})]})}const obe="data:image/svg+xml,%3csvg%20width='26'%20height='23'%20viewBox='0%200%2026%2023'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.41667%2022.3281C1.93056%2022.5226%201.46875%2022.4798%201.03125%2022.1998C0.59375%2021.9198%200.375%2021.5129%200.375%2020.9792V14.4167L12.0417%2011.5L0.375%208.58333V2.02083C0.375%201.48611%200.59375%201.07923%201.03125%200.800203C1.46875%200.521176%201.93056%200.478397%202.41667%200.67187L24.875%2010.151C25.4826%2010.4184%2025.7865%2010.868%2025.7865%2011.5C25.7865%2012.1319%2025.4826%2012.5816%2024.875%2012.849L2.41667%2022.3281Z'%20fill='black'/%3e%3c/svg%3e";function lbe(t){return c.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:c.jsx("path",{d:"M2.68917 5.64292C3.70917 7.6475 5.3525 9.29083 7.35708 10.3108L8.91542 8.7525C9.11375 8.55417 9.39 8.4975 9.63792 8.57542C10.4312 8.8375 11.2812 8.97917 12.1667 8.97917C12.3545 8.97917 12.5347 9.05379 12.6675 9.18663C12.8004 9.31947 12.875 9.49964 12.875 9.6875V12.1667C12.875 12.3545 12.8004 12.5347 12.6675 12.6675C12.5347 12.8004 12.3545 12.875 12.1667 12.875C8.97302 12.875 5.91017 11.6063 3.65192 9.34808C1.39367 7.08983 0.125 4.02698 0.125 0.833333C0.125 0.645472 0.199628 0.465304 0.332466 0.332466C0.465304 0.199628 0.645472 0.125 0.833333 0.125H3.3125C3.50036 0.125 3.68053 0.199628 3.81337 0.332466C3.94621 0.465304 4.02083 0.645472 4.02083 0.833333C4.02083 1.71875 4.1625 2.56875 4.42458 3.36208C4.5025 3.61 4.44583 3.88625 4.2475 4.08458L2.68917 5.64292Z",fill:"black"})})}const cbe="/assets/message-tone-B30p1O1l.mp3",hq=typeof document<"u"?Ts.useLayoutEffect:()=>{};var Y3;const ube=(Y3=Ts.useInsertionEffect)!==null&&Y3!==void 0?Y3:hq;function dbe(t){const e=R.useRef(null);return ube(()=>{e.current=t},[t]),R.useCallback((...r)=>{const n=e.current;return n?.(...r)},[])}const Zh=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},V0=t=>t&&"window"in t&&t.window===t?t:Zh(t).defaultView||window;function fbe(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function hbe(t){return fbe(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let pbe=!1;function IN(){return pbe}function pq(t,e){if(!IN())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let r=e;for(;r!==null;){if(r===t)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:hbe(r)?r=r.host:r=r.parentNode}return!1}const e8=(t=document)=>{var e;if(!IN())return t.activeElement;let r=t.activeElement;for(;r&&"shadowRoot"in r&&(!((e=r.shadowRoot)===null||e===void 0)&&e.activeElement);)r=r.shadowRoot.activeElement;return r};function mq(t){return IN()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function mbe(t){var e;if(typeof window>"u"||window.navigator==null)return!1;let r=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(r)&&r.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function gbe(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function gq(t){let e=null;return()=>(e==null&&(e=t()),e)}const xbe=gq(function(){return gbe(/^Mac/i)}),ybe=gq(function(){return mbe(/Android/i)});function xq(){let t=R.useRef(new Map),e=R.useCallback((s,a,i,o)=>{let l=o?.once?(...u)=>{t.current.delete(i),i(...u)}:i;t.current.set(i,{type:a,eventTarget:s,fn:l,options:o}),s.addEventListener(a,l,o)},[]),r=R.useCallback((s,a,i,o)=>{var l;let u=((l=t.current.get(i))===null||l===void 0?void 0:l.fn)||i;s.removeEventListener(a,u,o),t.current.delete(i)},[]),n=R.useCallback(()=>{t.current.forEach((s,a)=>{r(s.eventTarget,s.type,a,s.options)})},[r]);return R.useEffect(()=>n,[n]),{addGlobalListener:e,removeGlobalListener:r,removeAllGlobalListeners:n}}function vbe(t){return t.pointerType===""&&t.isTrusted?!0:ybe()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function yq(t){let e=t;return e.nativeEvent=t,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function wbe(t,e){Object.defineProperty(t,"target",{value:e}),Object.defineProperty(t,"currentTarget",{value:e})}function vq(t){let e=R.useRef({isFocused:!1,observer:null});hq(()=>{const n=e.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=dbe(n=>{t?.(n)});return R.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){e.current.isFocused=!0;let s=n.target,a=i=>{if(e.current.isFocused=!1,s.disabled){let o=yq(i);r(o)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};s.addEventListener("focusout",a,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&s.disabled){var i;(i=e.current.observer)===null||i===void 0||i.disconnect();let o=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[r])}let bbe=!1,Iy=null,t8=new Set,Yx=new Map,Cp=!1,r8=!1;const _be={Tab:!0,Escape:!0};function PN(t,e){for(let r of t8)r(t,e)}function kbe(t){return!(t.metaKey||!xbe()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function ob(t){Cp=!0,kbe(t)&&(Iy="keyboard",PN("keyboard",t))}function h1(t){Iy="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Cp=!0,PN("pointer",t))}function wq(t){vbe(t)&&(Cp=!0,Iy="virtual")}function bq(t){t.target===window||t.target===document||bbe||!t.isTrusted||(!Cp&&!r8&&(Iy="virtual",PN("virtual",t)),Cp=!1,r8=!1)}function _q(){Cp=!1,r8=!0}function n8(t){if(typeof window>"u"||typeof document>"u"||Yx.get(V0(t)))return;const e=V0(t),r=Zh(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Cp=!0,n.apply(this,arguments)},r.addEventListener("keydown",ob,!0),r.addEventListener("keyup",ob,!0),r.addEventListener("click",wq,!0),e.addEventListener("focus",bq,!0),e.addEventListener("blur",_q,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",h1,!0),r.addEventListener("pointermove",h1,!0),r.addEventListener("pointerup",h1,!0)),e.addEventListener("beforeunload",()=>{kq(t)},{once:!0}),Yx.set(e,{focus:n})}const kq=(t,e)=>{const r=V0(t),n=Zh(t);e&&n.removeEventListener("DOMContentLoaded",e),Yx.has(r)&&(r.HTMLElement.prototype.focus=Yx.get(r).focus,n.removeEventListener("keydown",ob,!0),n.removeEventListener("keyup",ob,!0),n.removeEventListener("click",wq,!0),r.removeEventListener("focus",bq,!0),r.removeEventListener("blur",_q,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",h1,!0),n.removeEventListener("pointermove",h1,!0),n.removeEventListener("pointerup",h1,!0)),Yx.delete(r))};function Sbe(t){const e=Zh(t);let r;return e.readyState!=="loading"?n8(t):(r=()=>{n8(t)},e.addEventListener("DOMContentLoaded",r)),()=>kq(t,r)}typeof document<"u"&&Sbe();function Sq(){return Iy!=="pointer"}const Nbe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Ebe(t,e,r){let n=Zh(r?.target);const s=typeof window<"u"?V0(r?.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?V0(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,i=typeof window<"u"?V0(r?.target).HTMLElement:HTMLElement,o=typeof window<"u"?V0(r?.target).KeyboardEvent:KeyboardEvent;return t=t||n.activeElement instanceof s&&!Nbe.has(n.activeElement.type)||n.activeElement instanceof a||n.activeElement instanceof i&&n.activeElement.isContentEditable,!(t&&e==="keyboard"&&r instanceof o&&!_be[r.key])}function Cbe(t,e,r){n8(),R.useEffect(()=>{let n=(s,a)=>{Ebe(!!r?.isTextInput,s,a)&&t(Sq())};return t8.add(n),()=>{t8.delete(n)}},e)}function Abe(t){let{isDisabled:e,onFocus:r,onBlur:n,onFocusChange:s}=t;const a=R.useCallback(l=>{if(l.target===l.currentTarget)return n&&n(l),s&&s(!1),!0},[n,s]),i=vq(a),o=R.useCallback(l=>{const u=Zh(l.target),d=u?e8(u):e8();l.target===l.currentTarget&&d===mq(l.nativeEvent)&&(r&&r(l),s&&s(!0),i(l))},[s,r,i]);return{focusProps:{onFocus:!e&&(r||s||n)?o:void 0,onBlur:!e&&(n||s)?a:void 0}}}function Tbe(t){let{isDisabled:e,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:s}=t,a=R.useRef({isFocusWithin:!1}),{addGlobalListener:i,removeAllGlobalListeners:o}=xq(),l=R.useCallback(p=>{p.currentTarget.contains(p.target)&&a.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(a.current.isFocusWithin=!1,o(),r&&r(p),s&&s(!1))},[r,s,a,o]),u=vq(l),d=R.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const g=Zh(p.target),m=e8(g);if(!a.current.isFocusWithin&&m===mq(p.nativeEvent)){n&&n(p),s&&s(!0),a.current.isFocusWithin=!0,u(p);let x=p.currentTarget;i(g,"focus",y=>{if(a.current.isFocusWithin&&!pq(x,y.target)){let b=new g.defaultView.FocusEvent("blur",{relatedTarget:y.target});wbe(b,x);let S=yq(b);l(S)}},{capture:!0})}},[n,s,u,i,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:l}}}let s8=!1,sw=0;function Ibe(){s8=!0,setTimeout(()=>{s8=!1},50)}function Rj(t){t.pointerType==="touch"&&Ibe()}function Pbe(){if(!(typeof document>"u"))return sw===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Rj),sw++,()=>{sw--,!(sw>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Rj)}}function jbe(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:s}=t,[a,i]=R.useState(!1),o=R.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;R.useEffect(Pbe,[]);let{addGlobalListener:l,removeAllGlobalListeners:u}=xq(),{hoverProps:d,triggerHoverEnd:p}=R.useMemo(()=>{let g=(y,b)=>{if(o.pointerType=b,s||b==="touch"||o.isHovered||!y.currentTarget.contains(y.target))return;o.isHovered=!0;let S=y.currentTarget;o.target=S,l(Zh(y.target),"pointerover",P=>{o.isHovered&&o.target&&!pq(o.target,P.target)&&m(P,P.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:S,pointerType:b}),r&&r(!0),i(!0)},m=(y,b)=>{let S=o.target;o.pointerType="",o.target=null,!(b==="touch"||!o.isHovered||!S)&&(o.isHovered=!1,u(),n&&n({type:"hoverend",target:S,pointerType:b}),r&&r(!1),i(!1))},x={};return typeof PointerEvent<"u"&&(x.onPointerEnter=y=>{s8&&y.pointerType==="mouse"||g(y,y.pointerType)},x.onPointerLeave=y=>{!s&&y.currentTarget.contains(y.target)&&m(y,y.pointerType)}),{hoverProps:x,triggerHoverEnd:m}},[e,r,n,s,o,l,u]);return R.useEffect(()=>{s&&p({currentTarget:o.target},o.pointerType)},[s]),{hoverProps:d,isHovered:a}}function Rbe(t={}){let{autoFocus:e=!1,isTextInput:r,within:n}=t,s=R.useRef({isFocused:!1,isFocusVisible:e||Sq()}),[a,i]=R.useState(!1),[o,l]=R.useState(()=>s.current.isFocused&&s.current.isFocusVisible),u=R.useCallback(()=>l(s.current.isFocused&&s.current.isFocusVisible),[]),d=R.useCallback(m=>{s.current.isFocused=m,i(m),u()},[u]);Cbe(m=>{s.current.isFocusVisible=m,u()},[],{isTextInput:r});let{focusProps:p}=Abe({isDisabled:n,onFocusChange:d}),{focusWithinProps:g}=Tbe({isDisabled:!n,onFocusWithinChange:d});return{isFocused:a,isFocusVisible:o,focusProps:n?g:p}}var Lbe=Object.defineProperty,Fbe=(t,e,r)=>e in t?Lbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X3=(t,e,r)=>(Fbe(t,typeof e!="symbol"?e+"":e,r),r);let Dbe=class{constructor(){X3(this,"current",this.detect()),X3(this,"handoffState","pending"),X3(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},od=new Dbe;function lg(t){var e,r;return od.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function Nq(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function $c(){let t=[],e={addEventListener(r,n,s,a){return r.addEventListener(n,s,a),e.add(()=>r.removeEventListener(n,s,a))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Nq(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,s){let a=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:a})})},group(r){let n=$c();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let s of t.splice(n,1))s()}},dispose(){for(let r of t.splice(0))r()}};return e}function S4(){let[t]=R.useState($c);return R.useEffect(()=>()=>t.dispose(),[t]),t}let pi=(t,e)=>{od.isServer?R.useEffect(t,e):R.useLayoutEffect(t,e)};function Py(t){let e=R.useRef(t);return pi(()=>{e.current=t},[t]),e}let as=function(t){let e=Py(t);return Ts.useCallback((...r)=>e.current(...r),[e])};function Obe(t){let e=t.width/2,r=t.height/2;return{top:t.clientY-r,right:t.clientX+e,bottom:t.clientY+r,left:t.clientX-e}}function Mbe(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Bbe({disabled:t=!1}={}){let e=R.useRef(null),[r,n]=R.useState(!1),s=S4(),a=as(()=>{e.current=null,n(!1),s.dispose()}),i=as(o=>{if(s.dispose(),e.current===null){e.current=o.currentTarget,n(!0);{let l=lg(o.currentTarget);s.addEventListener(l,"pointerup",a,!1),s.addEventListener(l,"pointermove",u=>{if(e.current){let d=Obe(u);n(Mbe(d,e.current.getBoundingClientRect()))}},!1),s.addEventListener(l,"pointercancel",a,!1)}}});return{pressed:r,pressProps:t?{}:{onPointerDown:i,onPointerUp:a,onClick:a}}}let Vbe=R.createContext(void 0);function Eq(){return R.useContext(Vbe)}function Lj(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function cg(t,e,...r){if(t in e){let s=e[t];return typeof s=="function"?s(...r):s}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,cg),n}var a8=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(a8||{}),Ube=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Ube||{});function qc(){let t=$be();return R.useCallback(e=>zbe({mergeRefs:t,...e}),[t])}function zbe({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:s,visible:a=!0,name:i,mergeRefs:o}){o=o??qbe;let l=Cq(e,t);if(a)return aw(l,r,n,i,o);let u=s??0;if(u&2){let{static:d=!1,...p}=l;if(d)return aw(p,r,n,i,o)}if(u&1){let{unmount:d=!0,...p}=l;return cg(d?0:1,{0(){return null},1(){return aw({...p,hidden:!0,style:{display:"none"}},r,n,i,o)}})}return aw(l,r,n,i,o)}function aw(t,e={},r,n,s){let{as:a=r,children:i,refName:o="ref",...l}=Q3(t,["unmount","static"]),u=t.ref!==void 0?{[o]:t.ref}:{},d=typeof i=="function"?i(e):i;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let p={};if(e){let g=!1,m=[];for(let[x,y]of Object.entries(e))typeof y=="boolean"&&(g=!0),y===!0&&m.push(x.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(g){p["data-headlessui-state"]=m.join(" ");for(let x of m)p[`data-${x}`]=""}}if(a===R.Fragment&&(Object.keys(Em(l)).length>0||Object.keys(Em(p)).length>0))if(!R.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(Em(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Em(l)).concat(Object.keys(Em(p))).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`))}else{let g=d.props,m=g?.className,x=typeof m=="function"?(...S)=>Lj(m(...S),l.className):Lj(m,l.className),y=x?{className:x}:{},b=Cq(d.props,Em(Q3(l,["ref"])));for(let S in p)S in b&&delete p[S];return R.cloneElement(d,Object.assign({},b,p,u,{ref:s(Hbe(d),u.ref)},y))}return R.createElement(a,Object.assign({},Q3(l,["ref"]),a!==R.Fragment&&u,a!==R.Fragment&&p),d)}function $be(){let t=R.useRef([]),e=R.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function qbe(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function Cq(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[s=>{var a;return(a=s?.preventDefault)==null?void 0:a.call(s)}]);for(let n in r)Object.assign(e,{[n](s,...a){let i=r[n];for(let o of i){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;o(s,...a)}}});return e}function Aq(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];for(let n in r)Object.assign(e,{[n](...s){let a=r[n];for(let i of a)i?.(...s)}});return e}function Hc(t){var e;return Object.assign(R.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Em(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function Q3(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function Hbe(t){return Ts.version.split(".")[0]>="19"?t.props.ref:t.ref}let Wbe=R.createContext(void 0);function Gbe(){return R.useContext(Wbe)}function jN(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function N4(t){return jN(t)&&"tagName"in t}function bf(t){return N4(t)&&"accessKey"in t}function U0(t){return N4(t)&&"tabIndex"in t}function Kbe(t){return N4(t)&&"style"in t}function Ybe(t){return bf(t)&&t.nodeName==="IFRAME"}function Tq(t){return bf(t)&&t.nodeName==="INPUT"}function Fj(t){return bf(t)&&t.nodeName==="LABEL"}function Xbe(t){return bf(t)&&t.nodeName==="FIELDSET"}function Iq(t){return bf(t)&&t.nodeName==="LEGEND"}function Qbe(t){return N4(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Jbe(t){let e=t.parentElement,r=null;for(;e&&!Xbe(e);)Iq(e)&&(r=e),e=e.parentElement;let n=e?.getAttribute("disabled")==="";return n&&Zbe(r)?!1:n}function Zbe(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(Iq(e))return!1;e=e.previousElementSibling}return!0}let Pq=Symbol();function e4e(t,e=!0){return Object.assign(t,{[Pq]:e})}function _f(...t){let e=R.useRef(t);R.useEffect(()=>{e.current=t},[t]);let r=as(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return t.every(n=>n==null||n?.[Pq])?void 0:r}let RN=R.createContext(null);RN.displayName="DescriptionContext";function jq(){let t=R.useContext(RN);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,jq),e}return t}function t4e(){let[t,e]=R.useState([]);return[t.length>0?t.join(" "):void 0,R.useMemo(()=>function(r){let n=as(a=>(e(i=>[...i,a]),()=>e(i=>{let o=i.slice(),l=o.indexOf(a);return l!==-1&&o.splice(l,1),o}))),s=R.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return Ts.createElement(RN.Provider,{value:s},r.children)},[e])]}let r4e="p";function n4e(t,e){let r=R.useId(),n=Eq(),{id:s=`headlessui-description-${r}`,...a}=t,i=jq(),o=_f(e);pi(()=>i.register(s),[s,i.register]);let l=n||!1,u=R.useMemo(()=>({...i.slot,disabled:l}),[i.slot,l]),d={ref:o,...i.props,id:s};return qc()({ourProps:d,theirProps:a,slot:u,defaultTag:r4e,name:i.name||"Description"})}let s4e=Hc(n4e);Object.assign(s4e,{});var uo=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(uo||{});let E4=R.createContext(null);E4.displayName="LabelContext";function LN(){let t=R.useContext(E4);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,LN),e}return t}function a4e(t){var e,r,n;let s=(r=(e=R.useContext(E4))==null?void 0:e.value)!=null?r:void 0;return((n=void 0)!=null?n:0)>0?[s,...t].filter(Boolean).join(" "):s}function Rq({inherit:t=!1}={}){let e=a4e(),[r,n]=R.useState([]),s=t?[e,...r].filter(Boolean):r;return[s.length>0?s.join(" "):void 0,R.useMemo(()=>function(a){let i=as(l=>(n(u=>[...u,l]),()=>n(u=>{let d=u.slice(),p=d.indexOf(l);return p!==-1&&d.splice(p,1),d}))),o=R.useMemo(()=>({register:i,slot:a.slot,name:a.name,props:a.props,value:a.value}),[i,a.slot,a.name,a.props,a.value]);return Ts.createElement(E4.Provider,{value:o},a.children)},[n])]}let i4e="label";function o4e(t,e){var r;let n=R.useId(),s=LN(),a=Gbe(),i=Eq(),{id:o=`headlessui-label-${n}`,htmlFor:l=a??((r=s.props)==null?void 0:r.htmlFor),passive:u=!1,...d}=t,p=_f(e);pi(()=>s.register(o),[o,s.register]);let g=as(b=>{let S=b.currentTarget;if(!(b.target!==b.currentTarget&&Qbe(b.target))&&(Fj(S)&&b.preventDefault(),s.props&&"onClick"in s.props&&typeof s.props.onClick=="function"&&s.props.onClick(b),Fj(S))){let P=document.getElementById(S.htmlFor);if(P){let T=P.getAttribute("disabled");if(T==="true"||T==="")return;let O=P.getAttribute("aria-disabled");if(O==="true"||O==="")return;(Tq(P)&&(P.type==="file"||P.type==="radio"||P.type==="checkbox")||P.role==="radio"||P.role==="checkbox"||P.role==="switch")&&P.click(),P.focus({preventScroll:!0})}}}),m=i||!1,x=R.useMemo(()=>({...s.slot,disabled:m}),[s.slot,m]),y={ref:p,...s.props,id:o,htmlFor:l,onClick:g};return u&&("onClick"in y&&(delete y.htmlFor,delete y.onClick),"onClick"in d&&delete d.onClick),qc()({ourProps:y,theirProps:d,slot:x,defaultTag:l?i4e:"div",name:s.name||"Label"})}let l4e=Hc(o4e);Object.assign(l4e,{});function c4e(t){if(t===null)return{width:0,height:0};let{width:e,height:r}=t.getBoundingClientRect();return{width:e,height:r}}function u4e(t,e=!1){let[r,n]=R.useReducer(()=>({}),{}),s=R.useMemo(()=>c4e(t),[t,r]);return pi(()=>{if(!t)return;let a=new ResizeObserver(n);return a.observe(t),()=>{a.disconnect()}},[t]),e?{width:`${s.width}px`,height:`${s.height}px`}:s}let Lq=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var d4e=Object.defineProperty,f4e=(t,e,r)=>e in t?d4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h4e=(t,e,r)=>(f4e(t,e+"",r),r),Fq=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Sc=(t,e,r)=>(Fq(t,e,"read from private field"),r?r.call(t):e.get(t)),J3=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Dj=(t,e,r,n)=>(Fq(t,e,"write to private field"),e.set(t,r),r),Hu,gx,xx;let Dq=class{constructor(e){J3(this,Hu,{}),J3(this,gx,new Lq(()=>new Set)),J3(this,xx,new Set),h4e(this,"disposables",$c()),Dj(this,Hu,e),od.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Sc(this,Hu)}subscribe(e,r){if(od.isServer)return()=>{};let n={selector:e,callback:r,current:e(Sc(this,Hu))};return Sc(this,xx).add(n),this.disposables.add(()=>{Sc(this,xx).delete(n)})}on(e,r){return od.isServer?()=>{}:(Sc(this,gx).get(e).add(r),this.disposables.add(()=>{Sc(this,gx).get(e).delete(r)}))}send(e){let r=this.reduce(Sc(this,Hu),e);if(r!==Sc(this,Hu)){Dj(this,Hu,r);for(let n of Sc(this,xx)){let s=n.selector(Sc(this,Hu));Oq(n.current,s)||(n.current=s,n.callback(s))}for(let n of Sc(this,gx).get(e.type))n(Sc(this,Hu),e)}}};Hu=new WeakMap,gx=new WeakMap,xx=new WeakMap;function Oq(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:Z3(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:Z3(t.entries(),e.entries()):Oj(t)&&Oj(e)?Z3(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function Z3(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function Oj(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}function Mj(t){let[e,r]=t(),n=$c();return(...s)=>{e(...s),n.dispose(),n.microTask(r)}}var p4e=Object.defineProperty,m4e=(t,e,r)=>e in t?p4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bj=(t,e,r)=>(m4e(t,typeof e!="symbol"?e+"":e,r),r),Mq=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(Mq||{});let g4e={0(t,e){let r=e.id,n=t.stack,s=t.stack.indexOf(r);if(s!==-1){let a=t.stack.slice();return a.splice(s,1),a.push(r),n=a,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let s=t.stack.slice();return s.splice(n,1),{...t,stack:s}}},x4e=class Bq extends Dq{constructor(){super(...arguments),Bj(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),Bj(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new Bq({stack:[]})}reduce(e,r){return cg(r.type,g4e,e,r)}};const FN=new Lq(()=>x4e.new());var e6={exports:{}},t6={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vj;function y4e(){if(Vj)return t6;Vj=1;var t=Eb();function e(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,s=t.useRef,a=t.useEffect,i=t.useMemo,o=t.useDebugValue;return t6.useSyncExternalStoreWithSelector=function(l,u,d,p,g){var m=s(null);if(m.current===null){var x={hasValue:!1,value:null};m.current=x}else x=m.current;m=i(function(){function b(W){if(!S){if(S=!0,P=W,W=p(W),g!==void 0&&x.hasValue){var Y=x.value;if(g(Y,W))return T=Y}return T=W}if(Y=T,r(P,W))return Y;var L=p(W);return g!==void 0&&g(Y,L)?(P=W,Y):(P=W,T=L)}var S=!1,P,T,O=d===void 0?null:d;return[function(){return b(u())},O===null?void 0:function(){return b(O())}]},[u,d,p,g]);var y=n(l,m[0],m[1]);return a(function(){x.hasValue=!0,x.value=y},[y]),o(y),y},t6}var Uj;function v4e(){return Uj||(Uj=1,e6.exports=y4e()),e6.exports}var w4e=v4e();function td(t,e,r=Oq){return w4e.useSyncExternalStoreWithSelector(as(n=>t.subscribe(b4e,n)),as(()=>t.state),as(()=>t.state),as(e),r)}function b4e(t){return t}function Vq(t,e){let r=R.useId(),n=FN.get(e),[s,a]=td(n,R.useCallback(i=>[n.selectors.isTop(i,r),n.selectors.inStack(i,r)],[n,r]));return pi(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?a?s:!0:!1}let i8=new Map,Xx=new Map;function zj(t){var e;let r=(e=Xx.get(t))!=null?e:0;return Xx.set(t,r+1),r!==0?()=>$j(t):(i8.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>$j(t))}function $j(t){var e;let r=(e=Xx.get(t))!=null?e:1;if(r===1?Xx.delete(t):Xx.set(t,r-1),r!==1)return;let n=i8.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,i8.delete(t))}function _4e(t,{allowed:e,disallowed:r}={}){let n=Vq(t,"inert-others");pi(()=>{var s,a;if(!n)return;let i=$c();for(let l of(s=r?.())!=null?s:[])l&&i.add(zj(l));let o=(a=e?.())!=null?a:[];for(let l of o){if(!l)continue;let u=lg(l);if(!u)continue;let d=l.parentElement;for(;d&&d!==u.body;){for(let p of d.children)o.some(g=>p.contains(g))||i.add(zj(p));d=d.parentElement}}return i.dispose},[n,e,r])}function k4e(t,e,r){let n=Py(s=>{let a=s.getBoundingClientRect();a.x===0&&a.y===0&&a.width===0&&a.height===0&&r()});R.useEffect(()=>{if(!t)return;let s=e===null?null:bf(e)?e:e.current;if(!s)return;let a=$c();if(typeof ResizeObserver<"u"){let i=new ResizeObserver(()=>n.current(s));i.observe(s),a.add(()=>i.disconnect())}if(typeof IntersectionObserver<"u"){let i=new IntersectionObserver(()=>n.current(s));i.observe(s),a.add(()=>i.disconnect())}return()=>a.dispose()},[e,n,t])}let o8=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),S4e=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var l8=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(l8||{}),N4e=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(N4e||{}),E4e=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(E4e||{});function Uq(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(o8)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function C4e(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(S4e)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var DN=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(DN||{});function ON(t,e=0){var r;return t===((r=lg(t))==null?void 0:r.body)?!1:cg(e,{0(){return t.matches(o8)},1(){let n=t;for(;n!==null;){if(n.matches(o8))return!0;n=n.parentElement}return!1}})}function zq(t){let e=lg(t);$c().nextFrame(()=>{e&&U0(e.activeElement)&&!ON(e.activeElement,0)&&T4e(t)})}var A4e=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(A4e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function T4e(t){t?.focus({preventScroll:!0})}let I4e=["textarea","input"].join(",");function P4e(t){var e,r;return(r=(e=t?.matches)==null?void 0:e.call(t,I4e))!=null?r:!1}function $q(t,e=r=>r){return t.slice().sort((r,n)=>{let s=e(r),a=e(n);if(s===null||a===null)return 0;let i=s.compareDocumentPosition(a);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function j4e(t,e){return R4e(Uq(),e,{relativeTo:t})}function R4e(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}={}){let a=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,i=Array.isArray(t)?r?$q(t):t:e&64?C4e(t):Uq(t);s.length>0&&i.length>1&&(i=i.filter(m=>!s.some(x=>x!=null&&"current"in x?x?.current===m:x===m))),n=n??a.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,i.indexOf(n))-1;if(e&4)return Math.max(0,i.indexOf(n))+1;if(e&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},d=0,p=i.length,g;do{if(d>=p||d+p<=0)return 0;let m=l+d;if(e&16)m=(m+p)%p;else{if(m<0)return 3;if(m>=p)return 1}g=i[m],g?.focus(u),d+=o}while(g!==a.activeElement);return e&6&&P4e(g)&&g.select(),2}function qq(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function L4e(){return/Android/gi.test(window.navigator.userAgent)}function qj(){return qq()||L4e()}function qm(t,e,r,n){let s=Py(r);R.useEffect(()=>{if(!t)return;function a(i){s.current(i)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[t,e,n])}function F4e(t,e,r,n){let s=Py(r);R.useEffect(()=>{if(!t)return;function a(i){s.current(i)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[t,e,n])}const Hj=30;function D4e(t,e,r){let n=Py(r),s=R.useCallback(function(o,l){if(o.defaultPrevented)return;let u=l(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=(function p(g){return typeof g=="function"?p(g()):Array.isArray(g)||g instanceof Set?g:[g]})(e);for(let p of d)if(p!==null&&(p.contains(u)||o.composed&&o.composedPath().includes(p)))return;return!ON(u,DN.Loose)&&u.tabIndex!==-1&&o.preventDefault(),n.current(o,u)},[n,e]),a=R.useRef(null);qm(t,"pointerdown",o=>{var l,u;qj()||(a.current=((u=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:u[0])||o.target)},!0),qm(t,"pointerup",o=>{if(qj()||!a.current)return;let l=a.current;return a.current=null,s(o,()=>l)},!0);let i=R.useRef({x:0,y:0});qm(t,"touchstart",o=>{i.current.x=o.touches[0].clientX,i.current.y=o.touches[0].clientY},!0),qm(t,"touchend",o=>{let l={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(l.x-i.current.x)>=Hj||Math.abs(l.y-i.current.y)>=Hj))return s(o,()=>U0(o.target)?o.target:null)},!0),F4e(t,"blur",o=>s(o,()=>Ybe(window.document.activeElement)?window.document.activeElement:null),!0)}function c8(...t){return R.useMemo(()=>lg(...t),[...t])}var O4e=(t=>(t[t.Ignore=0]="Ignore",t[t.Select=1]="Select",t[t.Close=2]="Close",t))(O4e||{});const iw={Ignore:{kind:0},Select:t=>({kind:1,target:t}),Close:{kind:2}},M4e=200,Wj=5;function B4e(t,{trigger:e,action:r,close:n,select:s}){let a=R.useRef(null),i=R.useRef(null),o=R.useRef(null);qm(t&&e!==null,"pointerdown",l=>{jN(l?.target)&&e!=null&&e.contains(l.target)&&(i.current=l.x,o.current=l.y,a.current=l.timeStamp)}),qm(t&&e!==null,"pointerup",l=>{var u,d;let p=a.current;if(p===null||(a.current=null,!U0(l.target))||Math.abs(l.x-((u=i.current)!=null?u:l.x))<Wj&&Math.abs(l.y-((d=o.current)!=null?d:l.y))<Wj)return;let g=r(l);switch(g.kind){case 0:return;case 1:{l.timeStamp-p>M4e&&(s(g.target),n());break}case 2:{n();break}}},{capture:!0})}function V4e(t,e){return R.useMemo(()=>{var r;if(t.type)return t.type;let n=(r=t.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function U4e(t){return R.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function z4e(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...a){let i=e[s].call(r,...a);i&&(r=i,n.forEach(o=>o()))}}}function $4e(){let t;return{before({doc:e}){var r;let n=e.documentElement,s=(r=e.defaultView)!=null?r:window;t=Math.max(0,s.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,s=Math.max(0,n.clientWidth-n.offsetWidth),a=Math.max(0,t-s);r.style(n,"paddingRight",`${a}px`)}}}function q4e(){return qq()?{before({doc:t,d:e,meta:r}){function n(s){return r.containers.flatMap(a=>a()).some(a=>a.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=$c();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let a=(s=window.scrollY)!=null?s:window.pageYOffset,i=null;e.addEventListener(t,"click",o=>{if(U0(o.target))try{let l=o.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),d=t.querySelector(u);U0(d)&&!n(d)&&(i=d)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(U0(o.target)&&Kbe(o.target))if(n(o.target)){let l=o.target;for(;l.parentElement&&n(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(U0(o.target)){if(Tq(o.target))return;if(n(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;a!==l&&window.scrollTo(0,a),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function H4e(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function W4e(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let z0=z4e(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:$c(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:W4e(r)},s=[q4e(),$4e(),H4e()];s.forEach(({before:a})=>a?.(n)),s.forEach(({after:a})=>a?.(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});z0.subscribe(()=>{let t=z0.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",s=r.count!==0;(s&&!n||!s&&n)&&z0.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&z0.dispatch("TEARDOWN",r)}});function G4e(t,e,r=()=>({containers:[]})){let n=U4e(z0),s=e?n.get(e):void 0,a=s?s.count>0:!1;return pi(()=>{if(!(!e||!t))return z0.dispatch("PUSH",e,r),()=>z0.dispatch("POP",e,r)},[t,e]),a}function K4e(t,e,r=()=>[document.body]){let n=Vq(t,"scroll-lock");G4e(n,e,s=>{var a;return{containers:[...(a=s.containers)!=null?a:[],r]}})}function Gj(t){return[t.screenX,t.screenY]}function Y4e(){let t=R.useRef([-1,-1]);return{wasMoved(e){let r=Gj(e);return t.current[0]===r[0]&&t.current[1]===r[1]?!1:(t.current=r,!0)},update(e){t.current=Gj(e)}}}function X4e(t=0){let[e,r]=R.useState(t),n=R.useCallback(l=>r(l),[e]),s=R.useCallback(l=>r(u=>u|l),[e]),a=R.useCallback(l=>(e&l)===l,[e]),i=R.useCallback(l=>r(u=>u&~l),[r]),o=R.useCallback(l=>r(u=>u^l),[r]);return{flags:e,setFlag:n,addFlag:s,hasFlag:a,removeFlag:i,toggleFlag:o}}var Q4e={},Kj,Yj;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Kj=process==null?void 0:Q4e)==null?void 0:Kj.NODE_ENV)==="test"&&typeof((Yj=Element?.prototype)==null?void 0:Yj.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var J4e=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(J4e||{});function Z4e(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function e_e(t,e,r,n){let[s,a]=R.useState(r),{hasFlag:i,addFlag:o,removeFlag:l}=X4e(t&&s?3:0),u=R.useRef(!1),d=R.useRef(!1),p=S4();return pi(()=>{var g;if(t){if(r&&a(!0),!e){r&&o(3);return}return(g=void 0)==null||g.call(n,r),t_e(e,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(r?(o(3),l(4)):(o(4),l(2)))},run(){d.current?r?(l(3),o(4)):(l(4),o(3)):r?l(1):o(1)},done(){var m;d.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,l(7),r||a(!1),(m=void 0)==null||m.call(n,r))}})}},[t,r,e,p]),t?[s,{closed:i(1),enter:i(2),leave:i(4),transition:i(2)||i(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function t_e(t,{prepare:e,run:r,done:n,inFlight:s}){let a=$c();return n_e(t,{prepare:e,inFlight:s}),a.nextFrame(()=>{r(),a.requestAnimationFrame(()=>{a.add(r_e(t,n))})}),a.dispose}function r_e(t,e){var r,n;let s=$c();if(!t)return s.dispose;let a=!1;s.add(()=>{a=!0});let i=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(o=>o instanceof CSSTransition))!=null?n:[];return i.length===0?(e(),s.dispose):(Promise.allSettled(i.map(o=>o.finished)).then(()=>{a||e()}),s.dispose)}function n_e(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function s_e(t,{container:e,accept:r,walk:n}){let s=R.useRef(r),a=R.useRef(n);R.useEffect(()=>{s.current=r,a.current=n},[r,n]),pi(()=>{if(!e||!t)return;let i=lg(e);if(!i)return;let o=s.current,l=a.current,u=Object.assign(p=>o(p),{acceptNode:o}),d=i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;d.nextNode();)l(d.currentNode)},[e,t,s,a])}function C4(){return typeof window<"u"}function ug(t){return Hq(t)?(t.nodeName||"").toLowerCase():"#document"}function ic(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wd(t){var e;return(e=(Hq(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Hq(t){return C4()?t instanceof Node||t instanceof ic(t).Node:!1}function ul(t){return C4()?t instanceof Element||t instanceof ic(t).Element:!1}function pd(t){return C4()?t instanceof HTMLElement||t instanceof ic(t).HTMLElement:!1}function Xj(t){return!C4()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ic(t).ShadowRoot}const a_e=new Set(["inline","contents"]);function jy(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=xu(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!a_e.has(s)}const i_e=new Set(["table","td","th"]);function o_e(t){return i_e.has(ug(t))}const l_e=[":popover-open",":modal"];function A4(t){return l_e.some(e=>{try{return t.matches(e)}catch{return!1}})}const c_e=["transform","translate","scale","rotate","perspective"],u_e=["transform","translate","scale","rotate","perspective","filter"],d_e=["paint","layout","strict","content"];function MN(t){const e=BN(),r=ul(t)?xu(t):t;return c_e.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||u_e.some(n=>(r.willChange||"").includes(n))||d_e.some(n=>(r.contain||"").includes(n))}function f_e(t){let e=Mh(t);for(;pd(e)&&!M1(e);){if(MN(e))return e;if(A4(e))return null;e=Mh(e)}return null}function BN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const h_e=new Set(["html","body","#document"]);function M1(t){return h_e.has(ug(t))}function xu(t){return ic(t).getComputedStyle(t)}function T4(t){return ul(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mh(t){if(ug(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Xj(t)&&t.host||wd(t);return Xj(e)?e.host:e}function Wq(t){const e=Mh(t);return M1(e)?t.ownerDocument?t.ownerDocument.body:t.body:pd(e)&&jy(e)?e:Wq(e)}function M2(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=Wq(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),i=ic(s);if(a){const o=u8(i);return e.concat(i,i.visualViewport||[],jy(s)?s:[],o&&r?M2(o):[])}return e.concat(s,M2(s,[],r))}function u8(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function p_e(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}const Ap=Math.min,Ho=Math.max,B2=Math.round,ow=Math.floor,ld=t=>({x:t,y:t}),m_e={left:"right",right:"left",bottom:"top",top:"bottom"},g_e={start:"end",end:"start"};function Qj(t,e,r){return Ho(t,Ap(e,r))}function dg(t,e){return typeof t=="function"?t(e):t}function Bh(t){return t.split("-")[0]}function Ry(t){return t.split("-")[1]}function Gq(t){return t==="x"?"y":"x"}function Kq(t){return t==="y"?"height":"width"}const x_e=new Set(["top","bottom"]);function Gd(t){return x_e.has(Bh(t))?"y":"x"}function Yq(t){return Gq(Gd(t))}function y_e(t,e,r){r===void 0&&(r=!1);const n=Ry(t),s=Yq(t),a=Kq(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=lb(i)),[i,lb(i)]}function v_e(t){const e=lb(t);return[d8(t),e,d8(e)]}function d8(t){return t.replace(/start|end/g,e=>g_e[e])}const Jj=["left","right"],Zj=["right","left"],w_e=["top","bottom"],b_e=["bottom","top"];function __e(t,e,r){switch(t){case"top":case"bottom":return r?e?Zj:Jj:e?Jj:Zj;case"left":case"right":return e?w_e:b_e;default:return[]}}function k_e(t,e,r,n){const s=Ry(t);let a=__e(Bh(t),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),e&&(a=a.concat(a.map(d8)))),a}function lb(t){return t.replace(/left|right|bottom|top/g,e=>m_e[e])}function S_e(t){return{top:0,right:0,bottom:0,left:0,...t}}function N_e(t){return typeof t!="number"?S_e(t):{top:t,right:t,bottom:t,left:t}}function cb(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function eR(t,e,r){let{reference:n,floating:s}=t;const a=Gd(e),i=Yq(e),o=Kq(i),l=Bh(e),u=a==="y",d=n.x+n.width/2-s.width/2,p=n.y+n.height/2-s.height/2,g=n[o]/2-s[o]/2;let m;switch(l){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-s.width,y:p};break;default:m={x:n.x,y:n.y}}switch(Ry(e)){case"start":m[i]-=g*(r&&u?-1:1);break;case"end":m[i]+=g*(r&&u?-1:1);break}return m}const E_e=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,o=a.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:p}=eR(u,n,l),g=n,m={},x=0;for(let y=0;y<o.length;y++){const{name:b,fn:S}=o[y],{x:P,y:T,data:O,reset:W}=await S({x:d,y:p,initialPlacement:n,placement:g,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:t,floating:e}});d=P??d,p=T??p,m={...m,[b]:{...m[b],...O}},W&&x<=50&&(x++,typeof W=="object"&&(W.placement&&(g=W.placement),W.rects&&(u=W.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):W.rects),{x:d,y:p}=eR(u,g,l)),y=-1)}return{x:d,y:p,placement:g,strategy:s,middlewareData:m}};async function I4(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:i,elements:o,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=dg(e,t),x=N_e(m),b=o[g?p==="floating"?"reference":"floating":p],S=cb(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(b)))==null||r?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),P=p==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),O=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},W=cb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:P,offsetParent:T,strategy:l}):P);return{top:(S.top-W.top+x.top)/O.y,bottom:(W.bottom-S.bottom+x.bottom)/O.y,left:(S.left-W.left+x.left)/O.x,right:(W.right-S.right+x.right)/O.x}}const C_e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...b}=dg(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const S=Bh(s),P=Gd(o),T=Bh(o)===o,O=await(l.isRTL==null?void 0:l.isRTL(u.floating)),W=g||(T||!y?[lb(o)]:v_e(o)),Y=x!=="none";!g&&Y&&W.push(...k_e(o,y,x,O));const L=[o,...W],A=await I4(e,b),N=[];let D=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&N.push(A[S]),p){const Z=y_e(s,i,O);N.push(A[Z[0]],A[Z[1]])}if(D=[...D,{placement:s,overflows:N}],!N.every(Z=>Z<=0)){var j,F;const Z=(((j=a.flip)==null?void 0:j.index)||0)+1,ue=L[Z];if(ue&&(!(p==="alignment"?P!==Gd(ue):!1)||D.every(te=>Gd(te.placement)===P?te.overflows[0]>0:!0)))return{data:{index:Z,overflows:D},reset:{placement:ue}};let pe=(F=D.filter(fe=>fe.overflows[0]<=0).sort((fe,te)=>fe.overflows[1]-te.overflows[1])[0])==null?void 0:F.placement;if(!pe)switch(m){case"bestFit":{var M;const fe=(M=D.filter(te=>{if(Y){const H=Gd(te.placement);return H===P||H==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(H=>H>0).reduce((H,ie)=>H+ie,0)]).sort((te,H)=>te[1]-H[1])[0])==null?void 0:M[0];fe&&(pe=fe);break}case"initialPlacement":pe=o;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}},A_e=new Set(["left","top"]);async function T_e(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Bh(r),o=Ry(r),l=Gd(r)==="y",u=A_e.has(i)?-1:1,d=a&&l?-1:1,p=dg(e,t);let{mainAxis:g,crossAxis:m,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof x=="number"&&(m=o==="end"?x*-1:x),l?{x:m*d,y:g*u}:{x:g*u,y:m*d}}const I_e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:i,middlewareData:o}=e,l=await T_e(e,t);return i===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}}},P_e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:b=>{let{x:S,y:P}=b;return{x:S,y:P}}},...l}=dg(t,e),u={x:r,y:n},d=await I4(e,l),p=Gd(Bh(s)),g=Gq(p);let m=u[g],x=u[p];if(a){const b=g==="y"?"top":"left",S=g==="y"?"bottom":"right",P=m+d[b],T=m-d[S];m=Qj(P,m,T)}if(i){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",P=x+d[b],T=x-d[S];x=Qj(P,x,T)}const y=o.fn({...e,[g]:m,[p]:x});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[g]:a,[p]:i}}}}}},j_e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:i,elements:o}=e,{apply:l=()=>{},...u}=dg(t,e),d=await I4(e,u),p=Bh(s),g=Ry(s),m=Gd(s)==="y",{width:x,height:y}=a.floating;let b,S;p==="top"||p==="bottom"?(b=p,S=g===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(S=p,b=g==="end"?"top":"bottom");const P=y-d.top-d.bottom,T=x-d.left-d.right,O=Ap(y-d[b],P),W=Ap(x-d[S],T),Y=!e.middlewareData.shift;let L=O,A=W;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=T),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(L=P),Y&&!g){const D=Ho(d.left,0),j=Ho(d.right,0),F=Ho(d.top,0),M=Ho(d.bottom,0);m?A=x-2*(D!==0||j!==0?D+j:Ho(d.left,d.right)):L=y-2*(F!==0||M!==0?F+M:Ho(d.top,d.bottom))}await l({...e,availableWidth:A,availableHeight:L});const N=await i.getDimensions(o.floating);return x!==N.width||y!==N.height?{reset:{rects:!0}}:{}}}};function Xq(t){const e=xu(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=pd(t),a=s?t.offsetWidth:r,i=s?t.offsetHeight:n,o=B2(r)!==a||B2(n)!==i;return o&&(r=a,n=i),{width:r,height:n,$:o}}function VN(t){return ul(t)?t:t.contextElement}function p1(t){const e=VN(t);if(!pd(e))return ld(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=Xq(e);let i=(a?B2(r.width):r.width)/n,o=(a?B2(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!o||!Number.isFinite(o))&&(o=1),{x:i,y:o}}const R_e=ld(0);function Qq(t){const e=ic(t);return!BN()||!e.visualViewport?R_e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function L_e(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ic(t)?!1:e}function Tp(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=VN(t);let i=ld(1);e&&(n?ul(n)&&(i=p1(n)):i=p1(t));const o=L_e(a,r,n)?Qq(a):ld(0);let l=(s.left+o.x)/i.x,u=(s.top+o.y)/i.y,d=s.width/i.x,p=s.height/i.y;if(a){const g=ic(a),m=n&&ul(n)?ic(n):n;let x=g,y=u8(x);for(;y&&n&&m!==x;){const b=p1(y),S=y.getBoundingClientRect(),P=xu(y),T=S.left+(y.clientLeft+parseFloat(P.paddingLeft))*b.x,O=S.top+(y.clientTop+parseFloat(P.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,p*=b.y,l+=T,u+=O,x=ic(y),y=u8(x)}}return cb({width:d,height:p,x:l,y:u})}function P4(t,e){const r=T4(t).scrollLeft;return e?e.left+r:Tp(wd(t)).left+r}function Jq(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-P4(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function F_e(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",i=wd(n),o=e?A4(e.floating):!1;if(n===i||o&&a)return r;let l={scrollLeft:0,scrollTop:0},u=ld(1);const d=ld(0),p=pd(n);if((p||!p&&!a)&&((ug(n)!=="body"||jy(i))&&(l=T4(n)),pd(n))){const m=Tp(n);u=p1(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const g=i&&!p&&!a?Jq(i,l):ld(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+g.x,y:r.y*u.y-l.scrollTop*u.y+d.y+g.y}}function D_e(t){return Array.from(t.getClientRects())}function O_e(t){const e=wd(t),r=T4(t),n=t.ownerDocument.body,s=Ho(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Ho(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+P4(t);const o=-r.scrollTop;return xu(n).direction==="rtl"&&(i+=Ho(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:o}}const tR=25;function M_e(t,e){const r=ic(t),n=wd(t),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,o=0,l=0;if(s){a=s.width,i=s.height;const d=BN();(!d||d&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const u=P4(n);if(u<=0){const d=n.ownerDocument,p=d.body,g=getComputedStyle(p),m=d.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,x=Math.abs(n.clientWidth-p.clientWidth-m);x<=tR&&(a-=x)}else u<=tR&&(a+=u);return{width:a,height:i,x:o,y:l}}const B_e=new Set(["absolute","fixed"]);function V_e(t,e){const r=Tp(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=pd(t)?p1(t):ld(1),i=t.clientWidth*a.x,o=t.clientHeight*a.y,l=s*a.x,u=n*a.y;return{width:i,height:o,x:l,y:u}}function rR(t,e,r){let n;if(e==="viewport")n=M_e(t,r);else if(e==="document")n=O_e(wd(t));else if(ul(e))n=V_e(e,r);else{const s=Qq(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return cb(n)}function Zq(t,e){const r=Mh(t);return r===e||!ul(r)||M1(r)?!1:xu(r).position==="fixed"||Zq(r,e)}function U_e(t,e){const r=e.get(t);if(r)return r;let n=M2(t,[],!1).filter(o=>ul(o)&&ug(o)!=="body"),s=null;const a=xu(t).position==="fixed";let i=a?Mh(t):t;for(;ul(i)&&!M1(i);){const o=xu(i),l=MN(i);!l&&o.position==="fixed"&&(s=null),(a?!l&&!s:!l&&o.position==="static"&&!!s&&B_e.has(s.position)||jy(i)&&!l&&Zq(t,i))?n=n.filter(d=>d!==i):s=o,i=Mh(i)}return e.set(t,n),n}function z_e(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?A4(e)?[]:U_e(e,this._c):[].concat(r),n],o=i[0],l=i.reduce((u,d)=>{const p=rR(e,d,s);return u.top=Ho(p.top,u.top),u.right=Ap(p.right,u.right),u.bottom=Ap(p.bottom,u.bottom),u.left=Ho(p.left,u.left),u},rR(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function $_e(t){const{width:e,height:r}=Xq(t);return{width:e,height:r}}function q_e(t,e,r){const n=pd(e),s=wd(e),a=r==="fixed",i=Tp(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=ld(0);function u(){l.x=P4(s)}if(n||!n&&!a)if((ug(e)!=="body"||jy(s))&&(o=T4(e)),n){const m=Tp(e,!0,a,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&u();a&&!n&&s&&u();const d=s&&!n&&!a?Jq(s,o):ld(0),p=i.left+o.scrollLeft-l.x-d.x,g=i.top+o.scrollTop-l.y-d.y;return{x:p,y:g,width:i.width,height:i.height}}function r6(t){return xu(t).position==="static"}function nR(t,e){if(!pd(t)||xu(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return wd(t)===r&&(r=r.ownerDocument.body),r}function eH(t,e){const r=ic(t);if(A4(t))return r;if(!pd(t)){let s=Mh(t);for(;s&&!M1(s);){if(ul(s)&&!r6(s))return s;s=Mh(s)}return r}let n=nR(t,e);for(;n&&o_e(n)&&r6(n);)n=nR(n,e);return n&&M1(n)&&r6(n)&&!MN(n)?r:n||f_e(t)||r}const H_e=async function(t){const e=this.getOffsetParent||eH,r=this.getDimensions,n=await r(t.floating);return{reference:q_e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function W_e(t){return xu(t).direction==="rtl"}const G_e={convertOffsetParentRelativeRectToViewportRelativeRect:F_e,getDocumentElement:wd,getClippingRect:z_e,getOffsetParent:eH,getElementRects:H_e,getClientRects:D_e,getDimensions:$_e,getScale:p1,isElement:ul,isRTL:W_e};function tH(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function K_e(t,e){let r=null,n;const s=wd(t);function a(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function i(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const u=t.getBoundingClientRect(),{left:d,top:p,width:g,height:m}=u;if(o||e(),!g||!m)return;const x=ow(p),y=ow(s.clientWidth-(d+g)),b=ow(s.clientHeight-(p+m)),S=ow(d),T={rootMargin:-x+"px "+-y+"px "+-b+"px "+-S+"px",threshold:Ho(0,Ap(1,l))||1};let O=!0;function W(Y){const L=Y[0].intersectionRatio;if(L!==l){if(!O)return i();L?i(!1,L):n=setTimeout(()=>{i(!1,1e-7)},1e3)}L===1&&!tH(u,t.getBoundingClientRect())&&i(),O=!1}try{r=new IntersectionObserver(W,{...T,root:s.ownerDocument})}catch{r=new IntersectionObserver(W,T)}r.observe(t)}return i(!0),a}function Y_e(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=VN(t),d=s||a?[...u?M2(u):[],...M2(e)]:[];d.forEach(S=>{s&&S.addEventListener("scroll",r,{passive:!0}),a&&S.addEventListener("resize",r)});const p=u&&o?K_e(u,r):null;let g=-1,m=null;i&&(m=new ResizeObserver(S=>{let[P]=S;P&&P.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(e)})),r()}),u&&!l&&m.observe(u),m.observe(e));let x,y=l?Tp(t):null;l&&b();function b(){const S=Tp(t);y&&!tH(y,S)&&r(),y=S,x=requestAnimationFrame(b)}return r(),()=>{var S;d.forEach(P=>{s&&P.removeEventListener("scroll",r),a&&P.removeEventListener("resize",r)}),p?.(),(S=m)==null||S.disconnect(),m=null,l&&cancelAnimationFrame(x)}}const n6=I4,X_e=I_e,Q_e=P_e,J_e=C_e,Z_e=j_e,e3e=(t,e,r)=>{const n=new Map,s={platform:G_e,...r},a={...s.platform,_c:n};return E_e(t,e,{...s,platform:a})};var t3e=typeof document<"u",r3e=function(){},Kw=t3e?R.useLayoutEffect:r3e;function ub(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!ub(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!ub(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function rH(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sR(t,e){const r=rH(t);return Math.round(e*r)/r}function s6(t){const e=R.useRef(t);return Kw(()=>{e.current=t}),e}function n3e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:u}=t,[d,p]=R.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[g,m]=R.useState(n);ub(g,n)||m(n);const[x,y]=R.useState(null),[b,S]=R.useState(null),P=R.useCallback(te=>{te!==Y.current&&(Y.current=te,y(te))},[]),T=R.useCallback(te=>{te!==L.current&&(L.current=te,S(te))},[]),O=a||x,W=i||b,Y=R.useRef(null),L=R.useRef(null),A=R.useRef(d),N=l!=null,D=s6(l),j=s6(s),F=s6(u),M=R.useCallback(()=>{if(!Y.current||!L.current)return;const te={placement:e,strategy:r,middleware:g};j.current&&(te.platform=j.current),e3e(Y.current,L.current,te).then(H=>{const ie={...H,isPositioned:F.current!==!1};Z.current&&!ub(A.current,ie)&&(A.current=ie,mi.flushSync(()=>{p(ie)}))})},[g,e,r,j,F]);Kw(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,p(te=>({...te,isPositioned:!1})))},[u]);const Z=R.useRef(!1);Kw(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Kw(()=>{if(O&&(Y.current=O),W&&(L.current=W),O&&W){if(D.current)return D.current(O,W,M);M()}},[O,W,M,D,N]);const ue=R.useMemo(()=>({reference:Y,floating:L,setReference:P,setFloating:T}),[P,T]),pe=R.useMemo(()=>({reference:O,floating:W}),[O,W]),fe=R.useMemo(()=>{const te={position:r,left:0,top:0};if(!pe.floating)return te;const H=sR(pe.floating,d.x),ie=sR(pe.floating,d.y);return o?{...te,transform:"translate("+H+"px, "+ie+"px)",...rH(pe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:ie}},[r,o,pe.floating,d.x,d.y]);return R.useMemo(()=>({...d,update:M,refs:ue,elements:pe,floatingStyles:fe}),[d,M,ue,pe,fe])}const nH=(t,e)=>({...X_e(t),options:[t,e]}),s3e=(t,e)=>({...Q_e(t),options:[t,e]}),a3e=(t,e)=>({...J_e(t),options:[t,e]}),i3e=(t,e)=>({...Z_e(t),options:[t,e]}),sH={...u5},o3e=sH.useInsertionEffect,l3e=o3e||(t=>t());function aH(t){const e=R.useRef(()=>{});return l3e(()=>{e.current=t}),R.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}var f8=typeof document<"u"?R.useLayoutEffect:R.useEffect;let aR=!1,c3e=0;const iR=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+c3e++;function u3e(){const[t,e]=R.useState(()=>aR?iR():void 0);return f8(()=>{t==null&&e(iR())},[]),R.useEffect(()=>{aR=!0},[]),t}const d3e=sH.useId,f3e=d3e||u3e;function h3e(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(s=>s(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(s=>s!==r))||[])}}}const p3e=R.createContext(null),m3e=R.createContext(null),g3e=()=>{var t;return((t=R.useContext(p3e))==null?void 0:t.id)||null},x3e=()=>R.useContext(m3e),y3e="data-floating-ui-focusable";function v3e(t){const{open:e=!1,onOpenChange:r,elements:n}=t,s=f3e(),a=R.useRef({}),[i]=R.useState(()=>h3e()),o=g3e()!=null,[l,u]=R.useState(n.reference),d=aH((m,x,y)=>{a.current.openEvent=m?x:void 0,i.emit("openchange",{open:m,event:x,reason:y,nested:o}),r?.(m,x,y)}),p=R.useMemo(()=>({setPositionReference:u}),[]),g=R.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return R.useMemo(()=>({dataRef:a,open:e,onOpenChange:d,elements:g,events:i,floatingId:s,refs:p}),[e,d,g,i,s,p])}function w3e(t){t===void 0&&(t={});const{nodeId:e}=t,r=v3e({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,s=n.elements,[a,i]=R.useState(null),[o,l]=R.useState(null),d=s?.domReference||a,p=R.useRef(null),g=x3e();f8(()=>{d&&(p.current=d)},[d]);const m=n3e({...t,elements:{...s,...o&&{reference:o}}}),x=R.useCallback(T=>{const O=ul(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),contextElement:T}:T;l(O),m.refs.setReference(O)},[m.refs]),y=R.useCallback(T=>{(ul(T)||T===null)&&(p.current=T,i(T)),(ul(m.refs.reference.current)||m.refs.reference.current===null||T!==null&&!ul(T))&&m.refs.setReference(T)},[m.refs]),b=R.useMemo(()=>({...m.refs,setReference:y,setPositionReference:x,domReference:p}),[m.refs,y,x]),S=R.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),P=R.useMemo(()=>({...m,...n,refs:b,elements:S,nodeId:e}),[m,b,S,e,n]);return f8(()=>{n.dataRef.current.floatingContext=P;const T=g?.nodesRef.current.find(O=>O.id===e);T&&(T.context=P)}),R.useMemo(()=>({...m,context:P,refs:b,elements:S}),[m,b,S,P])}const oR="active",lR="selected";function a6(t,e,r){const n=new Map,s=r==="item";let a=t;if(s&&t){const{[oR]:i,[lR]:o,...l}=t;a=l}return{...r==="floating"&&{tabIndex:-1,[y3e]:""},...a,...e.map(i=>{const o=i?i[r]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((i,o)=>(o&&Object.entries(o).forEach(l=>{let[u,d]=l;if(!(s&&[oR,lR].includes(u)))if(u.indexOf("on")===0){if(n.has(u)||n.set(u,[]),typeof d=="function"){var p;(p=n.get(u))==null||p.push(d),i[u]=function(){for(var g,m=arguments.length,x=new Array(m),y=0;y<m;y++)x[y]=arguments[y];return(g=n.get(u))==null?void 0:g.map(b=>b(...x)).find(b=>b!==void 0)}}}else i[u]=d}),i),{})}}function b3e(t){t===void 0&&(t=[]);const e=t.map(o=>o?.reference),r=t.map(o=>o?.floating),n=t.map(o=>o?.item),s=R.useCallback(o=>a6(o,t,"reference"),e),a=R.useCallback(o=>a6(o,t,"floating"),r),i=R.useCallback(o=>a6(o,t,"item"),n);return R.useMemo(()=>({getReferenceProps:s,getFloatingProps:a,getItemProps:i}),[s,a,i])}function cR(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const _3e=t=>({name:"inner",options:t,async fn(e){const{listRef:r,overflowRef:n,onFallbackChange:s,offset:a=0,index:i=0,minItemsVisible:o=4,referenceOverflowThreshold:l=0,scrollRef:u,...d}=dg(t,e),{rects:p,elements:{floating:g}}=e,m=r.current[i],x=u?.current||g,y=g.clientTop||x.clientTop,b=g.clientTop!==0,S=x.clientTop!==0,P=g===x;if(!m)return{};const T={...e,...await nH(-m.offsetTop-g.clientTop-p.reference.height/2-m.offsetHeight/2-a).fn(e)},O=await n6(cR(T,x.scrollHeight+y+g.clientTop),d),W=await n6(T,{...d,elementContext:"reference"}),Y=Ho(0,O.top),L=T.y+Y,D=(x.scrollHeight>x.clientHeight?j=>j:B2)(Ho(0,x.scrollHeight+(b&&P||S?y*2:0)-Y-Ho(0,O.bottom)));if(x.style.maxHeight=D+"px",x.scrollTop=Y,s){const j=x.offsetHeight<m.offsetHeight*Ap(o,r.current.length)-1||W.top>=-l||W.bottom>=-l;mi.flushSync(()=>s(j))}return n&&(n.current=await n6(cR({...T,y:L},x.offsetHeight+y+g.clientTop),d)),{y:L}}});function k3e(t,e){const{open:r,elements:n}=t,{enabled:s=!0,overflowRef:a,scrollRef:i,onChange:o}=e,l=aH(o),u=R.useRef(!1),d=R.useRef(null),p=R.useRef(null);R.useEffect(()=>{if(!s)return;function m(y){if(y.ctrlKey||!x||a.current==null)return;const b=y.deltaY,S=a.current.top>=-.5,P=a.current.bottom>=-.5,T=x.scrollHeight-x.clientHeight,O=b<0?-1:1,W=b<0?"max":"min";x.scrollHeight<=x.clientHeight||(!S&&b>0||!P&&b<0?(y.preventDefault(),mi.flushSync(()=>{l(Y=>Y+Math[W](b,T*O))})):/firefox/i.test(p_e())&&(x.scrollTop+=b))}const x=i?.current||n.floating;if(r&&x)return x.addEventListener("wheel",m),requestAnimationFrame(()=>{d.current=x.scrollTop,a.current!=null&&(p.current={...a.current})}),()=>{d.current=null,p.current=null,x.removeEventListener("wheel",m)}},[s,r,n.floating,a,i,l]);const g=R.useMemo(()=>({onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const m=i?.current||n.floating;if(!(!a.current||!m||!u.current)){if(d.current!==null){const x=m.scrollTop-d.current;(a.current.bottom<-.5&&x<-1||a.current.top<-.5&&x>1)&&mi.flushSync(()=>l(y=>y+x))}requestAnimationFrame(()=>{d.current=m.scrollTop})}}}),[n.floating,l,a,i]);return R.useMemo(()=>s?{floating:g}:{},[s,g])}let fg=R.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});fg.displayName="FloatingContext";let UN=R.createContext(null);UN.displayName="PlacementContext";function S3e(t){return R.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function N3e(){return R.useContext(fg).setReference}function E3e(){return R.useContext(fg).getReferenceProps}function C3e(){let{getFloatingProps:t,slot:e}=R.useContext(fg);return R.useCallback((...r)=>Object.assign({},t(...r),{"data-anchor":e.anchor}),[t,e])}function A3e(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=R.useContext(UN),r=R.useMemo(()=>t,[JSON.stringify(t,(s,a)=>{var i;return(i=a?.outerHTML)!=null?i:a})]);pi(()=>{e?.(r??null)},[e,r]);let n=R.useContext(fg);return R.useMemo(()=>[n.setFloating,t?n.styles:{}],[n.setFloating,t,n.styles])}let uR=4;function T3e({children:t,enabled:e=!0}){let[r,n]=R.useState(null),[s,a]=R.useState(0),i=R.useRef(null),[o,l]=R.useState(null);I3e(o);let u=e&&r!==null&&o!==null,{to:d="bottom",gap:p=0,offset:g=0,padding:m=0,inner:x}=P3e(r,o),[y,b="center"]=d.split(" ");pi(()=>{u&&a(0)},[u]);let{refs:S,floatingStyles:P,context:T}=w3e({open:u,placement:y==="selection"?b==="center"?"bottom":`bottom-${b}`:b==="center"?`${y}`:`${y}-${b}`,strategy:"absolute",transform:!1,middleware:[nH({mainAxis:y==="selection"?0:p,crossAxis:g}),s3e({padding:m}),y!=="selection"&&a3e({padding:m}),y==="selection"&&x?_3e({...x,padding:m,overflowRef:i,offset:s,minItemsVisible:uR,referenceOverflowThreshold:m,onFallbackChange(j){var F,M;if(!j)return;let Z=T.elements.floating;if(!Z)return;let ue=parseFloat(getComputedStyle(Z).scrollPaddingBottom)||0,pe=Math.min(uR,Z.childElementCount),fe=0,te=0;for(let H of(M=(F=T.elements.floating)==null?void 0:F.childNodes)!=null?M:[])if(bf(H)){let ie=H.offsetTop,K=ie+H.clientHeight+ue,I=Z.scrollTop,z=I+Z.clientHeight;if(ie>=I&&K<=z)pe--;else{te=Math.max(0,Math.min(K,z)-Math.max(ie,I)),fe=H.clientHeight;break}}pe>=1&&a(H=>{let ie=fe*pe-te+ue;return H>=ie?H:ie})}}):null,i3e({padding:m,apply({availableWidth:j,availableHeight:F,elements:M}){Object.assign(M.floating.style,{overflow:"auto",maxWidth:`${j}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${F}px)`})}})].filter(Boolean),whileElementsMounted:Y_e}),[O=y,W=b]=T.placement.split("-");y==="selection"&&(O="selection");let Y=R.useMemo(()=>({anchor:[O,W].filter(Boolean).join(" ")}),[O,W]),L=k3e(T,{overflowRef:i,onChange:a}),{getReferenceProps:A,getFloatingProps:N}=b3e([L]),D=as(j=>{l(j),S.setFloating(j)});return R.createElement(UN.Provider,{value:n},R.createElement(fg.Provider,{value:{setFloating:D,setReference:S.setReference,styles:P,getReferenceProps:A,getFloatingProps:N,slot:Y}},t))}function I3e(t){pi(()=>{if(!t)return;let e=new MutationObserver(()=>{let r=window.getComputedStyle(t).maxHeight,n=parseFloat(r);if(isNaN(n))return;let s=parseInt(r);isNaN(s)||n!==s&&(t.style.maxHeight=`${Math.ceil(n)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function P3e(t,e){var r,n,s;let a=i6((r=t?.gap)!=null?r:"var(--anchor-gap, 0)",e),i=i6((n=t?.offset)!=null?n:"var(--anchor-offset, 0)",e),o=i6((s=t?.padding)!=null?s:"var(--anchor-padding, 0)",e);return{...t,gap:a,offset:i,padding:o}}function i6(t,e,r=void 0){let n=S4(),s=as((l,u)=>{if(l==null)return[r,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!u)return[r,null];let d=dR(l,u);return[d,p=>{let g=iH(l);{let m=g.map(x=>window.getComputedStyle(u).getPropertyValue(x));n.requestAnimationFrame(function x(){n.nextFrame(x);let y=!1;for(let[S,P]of g.entries()){let T=window.getComputedStyle(u).getPropertyValue(P);if(m[S]!==T){m[S]=T,y=!0;break}}if(!y)return;let b=dR(l,u);d!==b&&(p(b),d=b)})}return n.dispose}]}return[r,null]}),a=R.useMemo(()=>s(t,e)[0],[t,e]),[i=a,o]=R.useState();return pi(()=>{let[l,u]=s(t,e);if(o(l),!!u)return u(o)},[t,e]),i}function iH(t){let e=/var\((.*)\)/.exec(t);if(e){let r=e[1].indexOf(",");if(r===-1)return[e[1]];let n=e[1].slice(0,r).trim(),s=e[1].slice(r+1).trim();return s?[n,...iH(s)]:[n]}return[]}function dR(t,e){let r=document.createElement("div");e.appendChild(r),r.style.setProperty("margin-top","0px","important"),r.style.setProperty("margin-top",t,"important");let n=parseFloat(window.getComputedStyle(r).marginTop)||0;return e.removeChild(r),n}let zN=R.createContext(null);zN.displayName="OpenClosedContext";var V2=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(V2||{});function j3e(){return R.useContext(zN)}function R3e({value:t,children:e}){return Ts.createElement(zN.Provider,{value:t},e)}function L3e(t){throw new Error("Unexpected object: "+t)}var hi=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(hi||{});function lw(t,e){let r=e.resolveItems();if(r.length<=0)return null;let n=e.resolveActiveIndex(),s=n??-1;switch(t.focus){case 0:{for(let a=0;a<r.length;++a)if(!e.resolveDisabled(r[a],a,r))return a;return n}case 1:{s===-1&&(s=r.length);for(let a=s-1;a>=0;--a)if(!e.resolveDisabled(r[a],a,r))return a;return n}case 2:{for(let a=s+1;a<r.length;++a)if(!e.resolveDisabled(r[a],a,r))return a;return n}case 3:{for(let a=r.length-1;a>=0;--a)if(!e.resolveDisabled(r[a],a,r))return a;return n}case 4:{for(let a=0;a<r.length;++a)if(e.resolveId(r[a],a,r)===t.id)return a;return n}case 5:return null;default:L3e(t)}}var oH=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(oH||{});function lH(t){let e=as(t),r=R.useRef(!1);R.useEffect(()=>(r.current=!1,()=>{r.current=!0,Nq(()=>{r.current&&e()})}),[e])}function F3e(){let t=typeof document>"u";return"useSyncExternalStore"in u5?(e=>e.useSyncExternalStore)(u5)(()=>()=>{},()=>!1,()=>!t):!1}function D3e(){let t=F3e(),[e,r]=R.useState(od.isHandoffComplete);return e&&od.isHandoffComplete===!1&&r(!1),R.useEffect(()=>{e!==!0&&r(!0)},[e]),R.useEffect(()=>od.handoff(),[]),t?!1:e}let O3e=R.createContext(!1);function M3e(){return R.useContext(O3e)}function B3e(t){let e=M3e(),r=R.useContext(uH),[n,s]=R.useState(()=>{var a;if(!e&&r!==null)return(a=r.current)!=null?a:null;if(od.isServer)return null;let i=t?.getElementById("headlessui-portal-root");if(i)return i;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return R.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),R.useEffect(()=>{e||r!==null&&s(r.current)},[r,s,e]),n}let cH=R.Fragment,V3e=Hc(function(t,e){let{ownerDocument:r=null,...n}=t,s=R.useRef(null),a=_f(e4e(m=>{s.current=m}),e),i=c8(s),o=r??i,l=B3e(o),[u]=R.useState(()=>{var m;return od.isServer?null:(m=o?.createElement("div"))!=null?m:null}),d=R.useContext(q3e),p=D3e();pi(()=>{!l||!u||l.contains(u)||(u.setAttribute("data-headlessui-portal",""),l.appendChild(u))},[l,u]),pi(()=>{if(u&&d)return d.register(u)},[d,u]),lH(()=>{var m;!l||!u||(jN(u)&&l.contains(u)&&l.removeChild(u),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let g=qc();return p?!l||!u?null:mi.createPortal(g({ourProps:{ref:a},theirProps:n,slot:{},defaultTag:cH,name:"Portal"}),u):null});function U3e(t,e){let r=_f(e),{enabled:n=!0,ownerDocument:s,...a}=t,i=qc();return n?Ts.createElement(V3e,{...a,ownerDocument:s,ref:r}):i({ourProps:{ref:r},theirProps:a,slot:{},defaultTag:cH,name:"Portal"})}let z3e=R.Fragment,uH=R.createContext(null);function $3e(t,e){let{target:r,...n}=t,s={ref:_f(e)},a=qc();return Ts.createElement(uH.Provider,{value:r},a({ourProps:s,theirProps:n,defaultTag:z3e,name:"Popover.Group"}))}let q3e=R.createContext(null),H3e=Hc(U3e),W3e=Hc($3e),G3e=Object.assign(H3e,{Group:W3e});function K3e(t,e){let r=R.useRef({left:0,top:0});if(pi(()=>{if(!e)return;let s=e.getBoundingClientRect();s&&(r.current=s)},[t,e]),e==null||!t||e===document.activeElement)return!1;let n=e.getBoundingClientRect();return n.top!==r.current.top||n.left!==r.current.left}let fR=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function hR(t){var e,r;let n=(e=t.innerText)!=null?e:"",s=t.cloneNode(!0);if(!bf(s))return n;let a=!1;for(let o of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),a=!0;let i=a?(r=s.innerText)!=null?r:"":n;return fR.test(i)&&(i=i.replace(fR,"")),i}function Y3e(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let r=t.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(s=>{let a=document.getElementById(s);if(a){let i=a.getAttribute("aria-label");return typeof i=="string"?i.trim():hR(a).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return hR(t).trim()}function X3e(t){let e=R.useRef(""),r=R.useRef("");return as(()=>{let n=t.current;if(!n)return"";let s=n.innerText;if(e.current===s)return r.current;let a=Y3e(n).trim().toLowerCase();return e.current=s,r.current=a,a})}var Q3e=Object.defineProperty,J3e=(t,e,r)=>e in t?Q3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pR=(t,e,r)=>(J3e(t,typeof e!="symbol"?e+"":e,r),r),go=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(go||{}),db=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(db||{}),As=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItems=5]="RegisterItems",t[t.UnregisterItems=6]="UnregisterItems",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t[t.SortItems=9]="SortItems",t))(As||{});function mR(t,e=r=>r){let r=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,n=$q(e(t.items.slice()),a=>a.dataRef.current.domRef.current),s=r?n.indexOf(r):null;return s===-1&&(s=null),{items:n,activeItemIndex:s}}let Z3e={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,pendingFocus:{focus:hi.Nothing},menuState:1}},0(t,e){return t.menuState===0?t:{...t,__demoMode:!1,pendingFocus:e.focus,menuState:0}},2:(t,e)=>{var r,n,s,a,i;if(t.menuState===1)return t;let o={...t,searchQuery:"",activationTrigger:(r=e.trigger)!=null?r:1,__demoMode:!1};if(e.focus===hi.Nothing)return{...o,activeItemIndex:null};if(e.focus===hi.Specific)return{...o,activeItemIndex:t.items.findIndex(d=>d.id===e.id)};if(e.focus===hi.Previous){let d=t.activeItemIndex;if(d!==null){let p=t.items[d].dataRef.current.domRef,g=lw(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((n=p.current)==null?void 0:n.previousElementSibling)===m.current||((s=m.current)==null?void 0:s.previousElementSibling)===null)return{...o,activeItemIndex:g}}}}else if(e.focus===hi.Next){let d=t.activeItemIndex;if(d!==null){let p=t.items[d].dataRef.current.domRef,g=lw(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(g!==null){let m=t.items[g].dataRef.current.domRef;if(((a=p.current)==null?void 0:a.nextElementSibling)===m.current||((i=m.current)==null?void 0:i.nextElementSibling)===null)return{...o,activeItemIndex:g}}}}let l=mR(t),u=lw(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});return{...o,...l,activeItemIndex:u}},3:(t,e)=>{let r=t.searchQuery!==""?0:1,n=t.searchQuery+e.value.toLowerCase(),s=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+r).concat(t.items.slice(0,t.activeItemIndex+r)):t.items).find(i=>{var o;return((o=i.dataRef.current.textValue)==null?void 0:o.startsWith(n))&&!i.dataRef.current.disabled}),a=s?t.items.indexOf(s):-1;return a===-1||a===t.activeItemIndex?{...t,searchQuery:n}:{...t,searchQuery:n,activeItemIndex:a,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let r=t.items.concat(e.items.map(s=>s)),n=t.activeItemIndex;return t.pendingFocus.focus!==hi.Nothing&&(n=lw(t.pendingFocus,{resolveItems:()=>r,resolveActiveIndex:()=>t.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled})),{...t,items:r,activeItemIndex:n,pendingFocus:{focus:hi.Nothing},pendingShouldSort:!0}},6:(t,e)=>{let r=t.items,n=[],s=new Set(e.items);for(let[a,i]of r.entries())if(s.has(i.id)&&(n.push(a),s.delete(i.id),s.size===0))break;if(n.length>0){r=r.slice();for(let a of n.reverse())r.splice(a,1)}return{...t,items:r,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element},9:t=>t.pendingShouldSort?{...t,...mR(t),pendingShouldSort:!1}:t};class $N extends Dq{constructor(e){super(e),pR(this,"actions",{registerItem:Mj(()=>{let r=[],n=new Set;return[(s,a)=>{n.has(a)||(n.add(a),r.push({id:s,dataRef:a}))},()=>(n.clear(),this.send({type:5,items:r.splice(0)}))]}),unregisterItem:Mj(()=>{let r=[];return[n=>r.push(n),()=>this.send({type:6,items:r.splice(0)})]})}),pR(this,"selectors",{activeDescendantId(r){var n;let s=r.activeItemIndex,a=r.items;return s===null||(n=a[s])==null?void 0:n.id},isActive(r,n){var s;let a=r.activeItemIndex,i=r.items;return a!==null?((s=i[a])==null?void 0:s.id)===n:!1},shouldScrollIntoView(r,n){return r.__demoMode||r.menuState!==0||r.activationTrigger===0?!1:this.isActive(r,n)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let r=this.state.id,n=FN.get(null);this.disposables.add(n.on(Mq.Push,s=>{!n.selectors.isTop(s,r)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>n.actions.push(r)),this.on(1,()=>n.actions.pop(r))}}static new({id:e,__demoMode:r=!1}){return new $N({id:e,__demoMode:r,menuState:r?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:hi.Nothing}})}reduce(e,r){return cg(r.type,Z3e,e,r)}}const dH=R.createContext(null);function qN(t){let e=R.useContext(dH);if(e===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,fH),r}return e}function fH({id:t,__demoMode:e=!1}){let r=R.useMemo(()=>$N.new({id:t,__demoMode:e}),[]);return lH(()=>r.dispose()),r}let e6e=R.Fragment;function t6e(t,e){let r=R.useId(),{__demoMode:n=!1,...s}=t,a=fH({id:r,__demoMode:n}),[i,o,l]=td(a,b=>[b.menuState,b.itemsElement,b.buttonElement]),u=_f(e),d=FN.get(null),p=td(d,R.useCallback(b=>d.selectors.isTop(b,r),[d,r]));D4e(p,[l,o],(b,S)=>{var P;a.send({type:As.CloseMenu}),ON(S,DN.Loose)||(b.preventDefault(),(P=a.state.buttonElement)==null||P.focus())});let g=as(()=>{a.send({type:As.CloseMenu})}),m=R.useMemo(()=>({open:i===go.Open,close:g}),[i,g]),x={ref:u},y=qc();return Ts.createElement(T3e,null,Ts.createElement(dH.Provider,{value:a},Ts.createElement(R3e,{value:cg(i,{[go.Open]:V2.Open,[go.Closed]:V2.Closed})},y({ourProps:x,theirProps:s,slot:m,defaultTag:e6e,name:"Menu"}))))}let r6e="button";function n6e(t,e){let r=qN("Menu.Button"),n=R.useId(),{id:s=`headlessui-menu-button-${n}`,disabled:a=!1,autoFocus:i=!1,...o}=t,l=R.useRef(null),u=E3e(),d=_f(e,l,N3e(),as(M=>r.send({type:As.SetButtonElement,element:M}))),p=as(M=>{switch(M.key){case uo.Space:case uo.Enter:case uo.ArrowDown:M.preventDefault(),M.stopPropagation(),r.send({type:As.OpenMenu,focus:{focus:hi.First}});break;case uo.ArrowUp:M.preventDefault(),M.stopPropagation(),r.send({type:As.OpenMenu,focus:{focus:hi.Last}});break}}),g=as(M=>{switch(M.key){case uo.Space:M.preventDefault();break}}),[m,x,y]=td(r,M=>[M.menuState,M.buttonElement,M.itemsElement]),b=m===go.Open;B4e(b,{trigger:x,action:R.useCallback(M=>{if(x!=null&&x.contains(M.target))return iw.Ignore;let Z=M.target.closest('[role="menuitem"]:not([data-disabled])');return bf(Z)?iw.Select(Z):y!=null&&y.contains(M.target)?iw.Ignore:iw.Close},[x,y]),close:R.useCallback(()=>r.send({type:As.CloseMenu}),[]),select:R.useCallback(M=>M.click(),[])});let S=as(M=>{var Z;if(M.button===oH.Left){if(Jbe(M.currentTarget))return M.preventDefault();a||(m===go.Open?(mi.flushSync(()=>r.send({type:As.CloseMenu})),(Z=l.current)==null||Z.focus({preventScroll:!0})):(M.preventDefault(),r.send({type:As.OpenMenu,focus:{focus:hi.Nothing},trigger:db.Pointer})))}}),P=R.useRef(null),T=as(M=>{P.current=M.pointerType,M.pointerType==="mouse"&&S(M)}),O=as(M=>{P.current!=="mouse"&&S(M)}),{isFocusVisible:W,focusProps:Y}=Rbe({autoFocus:i}),{isHovered:L,hoverProps:A}=jbe({isDisabled:a}),{pressed:N,pressProps:D}=Bbe({disabled:a}),j=R.useMemo(()=>({open:m===go.Open,active:N||m===go.Open,disabled:a,hover:L,focus:W,autofocus:i}),[m,L,W,N,a,i]),F=Aq(u(),{ref:d,id:s,type:V4e(t,l.current),"aria-haspopup":"menu","aria-controls":y?.id,"aria-expanded":m===go.Open,disabled:a||void 0,autoFocus:i,onKeyDown:p,onKeyUp:g,onPointerDown:T,onClick:O},Y,A,D);return qc()({ourProps:F,theirProps:o,slot:j,defaultTag:r6e,name:"Menu.Button"})}let s6e="div",a6e=a8.RenderStrategy|a8.Static;function i6e(t,e){let r=R.useId(),{id:n=`headlessui-menu-items-${r}`,anchor:s,portal:a=!1,modal:i=!0,transition:o=!1,...l}=t,u=S3e(s),d=qN("Menu.Items"),[p,g]=A3e(u),m=C3e(),[x,y]=R.useState(null),b=_f(e,u?p:null,as(H=>d.send({type:As.SetItemsElement,element:H})),y),[S,P]=td(d,H=>[H.menuState,H.buttonElement]),T=c8(P),O=c8(x);u&&(a=!0);let W=j3e(),[Y,L]=e_e(o,x,W!==null?(W&V2.Open)===V2.Open:S===go.Open);k4e(Y,P,()=>{d.send({type:As.CloseMenu})});let A=td(d,H=>H.__demoMode),N=A?!1:i&&S===go.Open;K4e(N,O);let D=A?!1:i&&S===go.Open;_4e(D,{allowed:R.useCallback(()=>[P,x],[P,x])});let j=S!==go.Open,F=K3e(j,P)?!1:Y;R.useEffect(()=>{let H=x;H&&S===go.Open&&H!==O?.activeElement&&H.focus({preventScroll:!0})},[S,x,O]),s_e(S===go.Open,{container:x,accept(H){return H.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:H.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(H){H.setAttribute("role","none")}});let M=S4(),Z=as(H=>{var ie,K,I;switch(M.dispose(),H.key){case uo.Space:if(d.state.searchQuery!=="")return H.preventDefault(),H.stopPropagation(),d.send({type:As.Search,value:H.key});case uo.Enter:if(H.preventDefault(),H.stopPropagation(),d.state.activeItemIndex!==null){let{dataRef:z}=d.state.items[d.state.activeItemIndex];(K=(ie=z.current)==null?void 0:ie.domRef.current)==null||K.click()}d.send({type:As.CloseMenu}),zq(d.state.buttonElement);break;case uo.ArrowDown:return H.preventDefault(),H.stopPropagation(),d.send({type:As.GoToItem,focus:hi.Next});case uo.ArrowUp:return H.preventDefault(),H.stopPropagation(),d.send({type:As.GoToItem,focus:hi.Previous});case uo.Home:case uo.PageUp:return H.preventDefault(),H.stopPropagation(),d.send({type:As.GoToItem,focus:hi.First});case uo.End:case uo.PageDown:return H.preventDefault(),H.stopPropagation(),d.send({type:As.GoToItem,focus:hi.Last});case uo.Escape:H.preventDefault(),H.stopPropagation(),mi.flushSync(()=>d.send({type:As.CloseMenu})),(I=d.state.buttonElement)==null||I.focus({preventScroll:!0});break;case uo.Tab:H.preventDefault(),H.stopPropagation(),mi.flushSync(()=>d.send({type:As.CloseMenu})),j4e(d.state.buttonElement,H.shiftKey?l8.Previous:l8.Next);break;default:H.key.length===1&&(d.send({type:As.Search,value:H.key}),M.setTimeout(()=>d.send({type:As.ClearSearch}),350));break}}),ue=as(H=>{switch(H.key){case uo.Space:H.preventDefault();break}}),pe=R.useMemo(()=>({open:S===go.Open}),[S]),fe=Aq(u?m():{},{"aria-activedescendant":td(d,d.selectors.activeDescendantId),"aria-labelledby":td(d,H=>{var ie;return(ie=H.buttonElement)==null?void 0:ie.id}),id:n,onKeyDown:Z,onKeyUp:ue,role:"menu",tabIndex:S===go.Open?0:void 0,ref:b,style:{...l.style,...g,"--button-width":u4e(P,!0).width},...Z4e(L)}),te=qc();return Ts.createElement(G3e,{enabled:a?t.static||Y:!1,ownerDocument:T},te({ourProps:fe,theirProps:l,slot:pe,defaultTag:s6e,features:a6e,visible:F,name:"Menu.Items"}))}let o6e=R.Fragment;function l6e(t,e){let r=R.useId(),{id:n=`headlessui-menu-item-${r}`,disabled:s=!1,...a}=t,i=qN("Menu.Item"),o=td(i,j=>i.selectors.isActive(j,n)),l=R.useRef(null),u=_f(e,l),d=td(i,j=>i.selectors.shouldScrollIntoView(j,n));pi(()=>{if(d)return $c().requestAnimationFrame(()=>{var j,F;(F=(j=l.current)==null?void 0:j.scrollIntoView)==null||F.call(j,{block:"nearest"})})},[d,l]);let p=X3e(l),g=R.useRef({disabled:s,domRef:l,get textValue(){return p()}});pi(()=>{g.current.disabled=s},[g,s]),pi(()=>(i.actions.registerItem(n,g),()=>i.actions.unregisterItem(n)),[g,n]);let m=as(()=>{i.send({type:As.CloseMenu})}),x=as(j=>{if(s)return j.preventDefault();i.send({type:As.CloseMenu}),zq(i.state.buttonElement)}),y=as(()=>{if(s)return i.send({type:As.GoToItem,focus:hi.Nothing});i.send({type:As.GoToItem,focus:hi.Specific,id:n})}),b=Y4e(),S=as(j=>b.update(j)),P=as(j=>{b.wasMoved(j)&&(s||o||i.send({type:As.GoToItem,focus:hi.Specific,id:n,trigger:db.Pointer}))}),T=as(j=>{b.wasMoved(j)&&(s||o&&i.state.activationTrigger===db.Pointer&&i.send({type:As.GoToItem,focus:hi.Nothing}))}),[O,W]=Rq(),[Y,L]=t4e(),A=R.useMemo(()=>({active:o,focus:o,disabled:s,close:m}),[o,s,m]),N={id:n,ref:u,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-labelledby":O,"aria-describedby":Y,disabled:void 0,onClick:x,onFocus:y,onPointerEnter:S,onMouseEnter:S,onPointerMove:P,onMouseMove:P,onPointerLeave:T,onMouseLeave:T},D=qc();return Ts.createElement(W,null,Ts.createElement(L,null,D({ourProps:N,theirProps:a,slot:A,defaultTag:o6e,name:"Menu.Item"})))}let c6e="div";function u6e(t,e){let[r,n]=Rq(),s=t,a={ref:e,"aria-labelledby":r,role:"group"},i=qc();return Ts.createElement(n,null,i({ourProps:a,theirProps:s,slot:{},defaultTag:c6e,name:"Menu.Section"}))}let d6e="header";function f6e(t,e){let r=R.useId(),{id:n=`headlessui-menu-heading-${r}`,...s}=t,a=LN();pi(()=>a.register(n),[n,a.register]);let i={id:n,ref:e,role:"presentation",...a.props};return qc()({ourProps:i,theirProps:s,slot:{},defaultTag:d6e,name:"Menu.Heading"})}let h6e="div";function p6e(t,e){let r=t,n={ref:e,role:"separator"};return qc()({ourProps:n,theirProps:r,slot:{},defaultTag:h6e,name:"Menu.Separator"})}let m6e=Hc(t6e),g6e=Hc(n6e),x6e=Hc(i6e),y6e=Hc(l6e),v6e=Hc(u6e),w6e=Hc(f6e),b6e=Hc(p6e),rx=Object.assign(m6e,{Button:g6e,Items:x6e,Item:y6e,Section:v6e,Heading:w6e,Separator:b6e});const _6e=({imageUrl:t,isOpen:e,onClose:r})=>{if(!e||!t)return null;const n=s=>{s.target===s.currentTarget&&r()};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 backdrop-blur-sm",onClick:n,children:c.jsxs("div",{className:"relative max-w-4xl max-h-screen p-4",children:[c.jsx("button",{onClick:r,className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors z-10","aria-label":"Close image",children:c.jsx(L1,{className:"w-8 h-8"})}),c.jsx("div",{className:"relative",children:c.jsx("img",{src:t,alt:"Full size",className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl",onClick:s=>s.stopPropagation()})})]})})},k6e=async({pharmacyLocation:t,customerLocation:e})=>{const{pharmLat:r,pharmLng:n}=t,{customerLat:s,customerLng:a,customerAddress:i}=e,u={origin:{location:{latLng:{latitude:r,longitude:n}}},destination:i!==null?{address:i}:{location:{latLng:{latitude:s,longitude:a}}}},d={"Content-Type":"application/json","X-Goog-Api-Key":"AIzaSyBrRCC7uRo9vv-VtbIq7lWP_1dEg89o77k","X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline"};return(await Ja.post("https://routes.googleapis.com/directions/v2:computeRoutes",u,{headers:d})).data.routes[0]};function S6e({items:t,total:e,onClose:r,prescription:n=!1}){const{user:s}=Vn(),{t:a}=Ds(),i=Jn(),{location:o}=rg(),[l,u]=R.useState(!0),[d,p]=R.useState(!1),[g,m]=R.useState(""),[x,y]=R.useState(""),[b,S]=R.useState(""),[P,T]=R.useState([]),[O,W]=R.useState(!1),[Y,L]=R.useState(""),[A,N]=R.useState(0);R.useEffect(()=>{s&&!g&&(S(s.email||""),y(s.phoneNumber||""))},[s,o,g]);const D=async()=>{if(t.length===0){N(0);return}try{const M=t[0].pharmacyId;let Z=0,ue,pe;const fe=await Pa(ir(ct,"pharmacies",M));if(!fe.exists())return;const te=fe.data();ue=te.lat,pe=te.lon,console.log("Customer Address: ",g);const{distanceMeters:H}=await k6e({pharmacyLocation:{pharmLat:ue,pharmLng:pe},customerLocation:{customerlat:0,customerLng:0,customerAddress:g}}),ie=Math.round(H*.05);N(ie)}catch(M){console.error("Error calculating delivery fee:",M)}},j=()=>{u(!1),p(!0)},F=async()=>{if(!(!s||!t.length||!Y))try{const M={customerId:s.uid,items:t.map(ue=>({productId:ue.id,quantity:ue.qty,price:ue.price,pharmacyId:ue.pharmacyId})),total:e+A,subtotal:e,deliveryFee:A,deliveryAddress:g,customerPhone:x,customerEmail:b||s.email,paymentMethod:Y,prescription:n};let Z;if(Y==="online"?Z=await w2(M):Z=await w2(M),console.log(`OrderStatus: ${Z}`),Z===!1){alert(a("order_placement_failed","Order placement failed"));return}p(!1),u(!1),alert(Y==="cash"?a("order_placed_delivery","Order placed successfully! You'll pay on delivery."):a("payment_successful","Payment successful! Your order has been placed.")),i("/customer/orders")}catch(M){console.error("Checkout error:",M),alert(a("checkout_failed","Checkout failed. Please try again."))}};return c.jsxs("div",{children:[l&&c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4",children:c.jsx("div",{className:"bg-white rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600",children:a("order_summary","Order Summary")}),c.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:c.jsx(L1,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-[16px] font-medium mb-3",children:[a("items","Items")," (",t.length,")"]}),c.jsx("div",{className:"space-y-3",children:t.map((M,Z)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx(hd,{name:M.name,image:M.image,category:M.category,size:40,roundedClass:"rounded-lg"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-[14px] font-medium truncate blur-sm select-none",children:M.name}),c.jsxs("div",{className:"text-[12px] text-gray-600",children:[a("qty","Qty"),": ",M.qty]})]}),c.jsxs("div",{className:"text-[14px] font-medium text-sky-600",children:["₦",Number((M.price||0)*M.qty).toLocaleString()]})]},Z))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-[16px] font-medium mb-3",children:a("delivery_details","Delivery Details")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:[a("delivery_address","Delivery Address")," *"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",onChange:M=>{m(M.target.value),D()},placeholder:a("enter_delivery_address","Enter delivery address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px] pr-10"}),c.jsx("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-sky-600 hover:bg-sky-50 rounded-full transition-colors",title:a("use_current_location","Use current location"),children:c.jsx(B5,{className:"w-4 h-4"})})]}),P.length>0&&c.jsx("div",{className:"mt-2 bg-white border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto relative z-[10000]",children:P.map((M,Z)=>c.jsx("button",{onClick:()=>{},className:"w-full text-left p-3 hover:bg-gray-50 text-[13px] border-b last:border-b-0",children:M},Z))})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:[a("phone_number","Phone Number")," *"]}),c.jsx("input",{type:"tel",value:x,onChange:M=>y(M.target.value),placeholder:a("enter_phone_number","Enter phone number"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[14px] font-medium text-gray-700 mb-2",children:a("email_optional","Email (Optional)")}),c.jsx("input",{type:"email",value:b,onChange:M=>S(M.target.value),placeholder:a("enter_email_address","Enter email address"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg text-[14px]"})]})]})]})]}),c.jsxs("div",{className:"mb-6 p-4 bg-sky-50 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-[14px]",children:a("subtotal","Subtotal")}),c.jsxs("span",{className:"text-[14px] font-medium",children:["₦",e]})]}),A>0&&c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-[14px]",children:a("delivery_fee","Delivery Fee")}),c.jsxs("span",{className:"text-[14px]",children:["₦",Number(A).toLocaleString()]})]}),c.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-sky-200",children:[c.jsx("span",{className:"text-[16px] font-medium",children:a("total","Total")}),c.jsxs("span",{className:"text-[16px] font-bold text-sky-600",children:["₦",Number(e+A).toLocaleString()]})]})]}),c.jsx("button",{onClick:j,disabled:!g.trim()||!x.trim(),className:"w-full bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:a("continue_to_payment","Continue to Payment")})]})})}),d&&c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4",children:c.jsx("div",{className:"bg-white rounded-3xl w-full max-w-md",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-[20px] font-light font-poppins text-sky-600",children:a("payment_method","Payment Method")}),c.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:c.jsx(L1,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>L("cash"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${Y==="cash"?"border-sky-500 bg-sky-50":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(MV,{className:"w-6 h-6 text-sky-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[16px] font-medium",children:a("pay_on_delivery","Pay on Delivery")}),c.jsx("div",{className:"text-[13px] text-gray-600",children:a("pay_with_cash_on_delivery","Pay with cash when order arrives")})]})]})}),c.jsx("button",{onClick:()=>L("online"),className:`w-full p-4 rounded-lg border-2 transition-colors text-left ${Y==="online"?"border-sky-500 bg-sky-50":"border-gray-200 dark:border-gray-600 hover:border-sky-300 dark:border-gray-600"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(DV,{className:"w-6 h-6 text-sky-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[16px] font-medium",children:a("online_payment","Online Payment")}),c.jsx("div",{className:"text-[13px] text-gray-600",children:a("pay_with_card_bank_ussd","Pay with card, bank transfer, or USSD")})]})]})}),c.jsx("button",{disabled:!0,className:"w-full p-4 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-100 text-left cursor-not-allowed opacity-60",children:c.jsxs("div",{className:"flex items-center gap-3 justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(DS,{className:"w-6 h-6 text-gray-400"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[16px] font-medium text-gray-500",children:a("pay_with_insurance","Pay with Insurance")}),c.jsx("div",{className:"text-[13px] text-gray-400",children:a("use_your_health_insurance","Use your health insurance")})]})]}),c.jsx("span",{className:"text-[12px] text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:a("coming_soon","Coming Soon")})]})})]}),c.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[16px] font-medium",children:a("total_amount","Total Amount")}),c.jsxs("span",{className:"text-[18px] font-bold text-sky-600",children:["₦",Number(e+A).toLocaleString()]})]})}),c.jsx("button",{onClick:F,disabled:!Y,className:"w-full mt-6 bg-sky-600 text-white py-3 rounded-full text-[16px] font-medium hover:bg-sky-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:Y==="online"?a("pay_now","Pay Now"):a("place_order","Place Order")})]})})})]})}function N6e({prescriptionId:t}){const[e,r]=R.useState(null),[n,s]=R.useState(0),[a,i]=R.useState([]),[o,l]=R.useState(!1),[u,d]=R.useState(!1),p=g=>{i(m=>[...m,g])};return R.useEffect(()=>{(async()=>{const m=await Pa(ir(ct,"prescriptions",t));m.exists()&&r({id:m.id,...m.data()})})()},[t]),R.useEffect(()=>{(async()=>{if(!e||!e.drugs)return;const x=(await Promise.all(e.drugs?.map(async y=>{const b=await Pa(ir(ct,"products",y.productId));if(b.exists()){const S={id:b.id,...b.data()};if(!a.find(P=>P.id===S.id)){const P={...S,qty:y.dosage};p(P)}return y.dosage*S.price}return 0}))).reduce((y,b)=>y+b,0);s(x)})()},[e]),R.useEffect(()=>{const g=br(tr(ct,"orders"),Fr("prescriptionId","==",t)),m=Dn(g,x=>{if(!x.empty){const b=!!x.docs[0].data().prescriptionId;d(b)}});return()=>m()},[]),e?c.jsxs("div",{className:"mt-1 px-3 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-200 shadow-sm",children:[c.jsx("div",{className:"font-semibold text-sm",children:"📄 Prescription"}),c.jsxs("div",{className:"mt-1",children:[c.jsx("span",{className:"font-medium",children:"Drugs:"})," ",e.drugs?.length>1?`${e.drugs[0].name}, others...`:"Only one drug prescribed"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Duration:"})," ",e.duration," ","days"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes||"—"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"TotalPrice:"})," ",n||0]}),c.jsx("div",{className:"mt-2",children:u?c.jsx("button",{disabled:!0,className:"w-full px-3 py-1.5 text-sm font-medium text-white bg-green-600 rounded-md cursor-not-allowed",children:"✅ Paid"}):c.jsx("button",{onClick:()=>{l(!0)},className:"w-full px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"🛒 Order"})}),o&&c.jsx(S6e,{items:a,total:n,onClose:()=>l(!1),prescription:t})]}):c.jsx("div",{className:"text-xs text-gray-400 mt-1 italic",children:"Loading prescription..."})}const E6e=Ts.lazy(()=>Yd(()=>import("./CreatePrescriptionModal-BSfMburP.js"),[])),C6e=Ts.lazy(()=>Yd(()=>Promise.resolve().then(()=>Kle),void 0)),A6e=Ts.lazy(()=>Yd(()=>import("./MessageWithLinks--BFgvtbY.js"),[])),T6e="/ChatBg.svg";function I6e(t,e){const r=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=(new Date(r.getFullYear(),r.getMonth(),r.getDate())-n)/(1e3*60*60*24);return a===0?e("today","Today"):a===1?e("yesterday","Yesterday"):t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const hH=Ts.memo(({message:t,isMine:e,t:r})=>{if(!e)return null;const n=t.status||"sent",s=t.read||n==="read";return n==="sent"?c.jsx(yle,{className:"w-3 h-3 text-gray-400 ml-1 opacity-80",strokeWidth:2,title:r("sent","Sent")}):n==="delivered"?c.jsx(KT,{className:"w-3 h-3 text-gray-400 ml-1 opacity-80",strokeWidth:2,title:r("delivered","Delivered")}):n==="read"||s?c.jsx(KT,{className:"w-3 h-3 text-green-500 ml-1",strokeWidth:2,title:r("read","Read")}):null}),pH=Ts.memo(({message:t,isMine:e,showReadReceipts:r,t:n})=>!e||!r?null:c.jsx(hH,{message:t,isMine:e,t:n}));hH.displayName="MessageStatus";pH.displayName="ConditionalMessageStatus";const Yw=Ts.memo(()=>c.jsxs("div",{className:"flex flex-col items-start w-full mb-2 animate-pulse",children:[c.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl h-10 w-48 mb-1"}),c.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl h-6 w-32"})]}));Yw.displayName="MessageSkeleton";function P6e(t=1024){const[e,r]=R.useState(()=>typeof window>"u"||!window.matchMedia?!1:window.matchMedia(`(min-width: ${t}px)`).matches);return R.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const n=window.matchMedia(`(min-width: ${t}px)`),s=a=>r(a.matches);return n.addEventListener?n.addEventListener("change",s):n.addListener(s),r(n.matches),()=>{n.removeEventListener?n.removeEventListener("change",s):n.removeListener(s)}},[t]),e}function gR(){const{user:t,profile:e}=Vn(),{getSetting:r}=wy(),{t:n}=Ds(),s=Jn(),a=hl(),i=t7(),[o,l]=R.useState(a.state?.thread||null),u=P6e(),d=i.vendorId,p=i.threadId;R.useEffect(()=>{l(a.state?.thread||null)},[a.state,a.key]);const g=o,[m,x]=R.useState(p||g?.id||null),[y,b]=R.useState(""),[S,P]=R.useState(""),[T,O]=R.useState(!1),[W,Y]=R.useState([]),[L,A]=R.useState(""),[N,D]=R.useState(null),[j,F]=R.useState(!1),[M,Z]=R.useState(""),[ue,pe]=R.useState(!0),[fe,te]=R.useState(50),H=R.useRef(null),ie=R.useRef(null),[K,I]=R.useState(null),[z,X]=R.useState(!0),J=R.useRef(null),[se,le]=R.useState(!1),[ve,xe]=R.useState([]),[Ee,ke]=R.useState(!1),[oe,Fe]=R.useState(null);R.useEffect(()=>(oe?document.body.classList.add("image-modal-open"):document.body.classList.remove("image-modal-open"),()=>{document.body.classList.remove("image-modal-open")}),[oe]);const Pe=new URLSearchParams(a.search),ne=Pe.get("productId"),ye=Pe.get("productName");Pe.get("productImage"),Pe.get("vendorName");const Ae=Pe.get("productPrice"),Be=Pe.get("prefillMsg");R.useEffect(()=>{if(g)if(e?.role==="customer"){b(g.vendorName||n("pharmacy","Pharmacy")),P(g.vendorAddress||g.vendorEmail||"");const ft=typeof g.vendorIsVerified=="boolean"?g.vendorIsVerified:g.vendorVerificationStatus==="approved";O(ft),g.vendorPhone&&Z(g.vendorPhone)}else b(g.customerName||n("customer","Customer")),P(g.customerAddress||g.customerEmail||""),O(!1)},[g,e?.role,n]),R.useEffect(()=>{t&&(async()=>{if(p){x(p);return}if(g?.id){x(g.id);return}if(e?.role==="customer"&&d){const ft=await xV({vendorId:d,customerId:t.uid,role:"customer"});x(ft)}else if(e?.role==="vendor"&&!p){console.warn("Vendor tried to open chat without threadId in URL."),s("/messages");return}})().catch(console.error)},[t?.uid,e?.role,d,p,s,g]),R.useEffect(()=>{if(!m||!e?.role)return;const ft=ir(ct,"threads",m),st=Dn(ft,async wt=>{if(!wt.exists())return;const me=wt.data(),[Ue,ut]=m.split("__");if(e.role==="customer"){const Ut=async()=>{const jt=await Pa(ir(ct,"pharmacies",Ue));return jt.exists()?jt.data():{}},nr=me.vendorName||"",Dt=me.vendorAddress||"";let $t=null;nr?b(nr):($t=await Ut(),b($t.name||me("pharmacy","Pharmacy"))),Dt?P(Dt):($t||($t=await Ut()),P($t.address||$t.email||"")),typeof me.vendorIsVerified=="boolean"?O(me.vendorIsVerified):($t||($t=await Ut()),O(!!$t.isVerified)),$t||($t=await Ut()),Z($t.phone||"")}else{const Ut=me.customerName||"",nr=me.customerAddress||me.customerEmail||"";if(Ut)b(Ut),P(nr);else{const Dt=await Pa(ir(ct,"users",ut)),$t=Dt.exists()?Dt.data():{};b($t.displayName||me("customer","Customer")),P($t.email||"")}O(!1)}});return()=>st()},[m,e?.role,n]),R.useEffect(()=>{if(!m||!t?.uid)return;pe(!0);const ft=wV(m,st=>{Y(st),pe(!1),st.forEach(async wt=>{if(wt.senderId!==t.uid&&wt.status==="sent")try{await vV(m,wt.id)}catch(me){console.error("Error marking message as delivered:",me)}})},console.error,100);return M5(m,t.uid).catch(console.error),ft},[m,t?.uid]);const Oe=R.useCallback((ft=!1)=>{ft?H.current?.scrollIntoView():H.current?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[]);R.useEffect(()=>{!ue&&W.length>0&&requestAnimationFrame(()=>Oe(!1))},[W.length,ue,Oe]);const pt=R.useMemo(()=>{let ft=null;return st=>{ft||(ft=setTimeout(()=>{st.target.scrollTop<200&&fe<W.length&&te(Ue=>Math.min(Ue+50,W.length)),ft=null},100))}},[fe,W.length]),nt=R.useCallback(ft=>{pt(ft)},[pt]),Lt=R.useMemo(()=>W.slice(-fe),[W,fe]),Ct=r(Mr.MESSAGE_READ_RECEIPTS);r(Mr.DATA_SAVER_MODE),R.useEffect(()=>{const ft=()=>{X(!document.hidden),!document.hidden&&m&&t?.uid&&M5(m,t.uid).catch(console.error)};return document.addEventListener("visibilitychange",ft),()=>document.removeEventListener("visibilitychange",ft)},[m,t?.uid]);const Nt=R.useRef(null);R.useEffect(()=>{if(!W.length)return;const ft=W[W.length-1];if(ft.id!==Nt.current&&ft.senderId!==t?.uid&&J.current){J.current.currentTime=0;const st=J.current.play();st&&st.catch(()=>{})}Nt.current=ft.id},[W,t?.uid]);const _t=R.useCallback(()=>{if(!m||!t)return null;const[ft,st]=m.split("__");return t.uid===ft?st:ft},[m,t]),ot=R.useCallback(async()=>{const ft=_t();if(!ft||!m||!L.trim()&&!N)return;const st=L.trim(),wt=N;A(""),D(null);try{let me=null;wt&&(F(!0),me=await yV(wt,m,t.uid),F(!1)),await kk(m,{senderId:t.uid,to:ft,text:st,imageUrl:me})}catch(me){A(st),D(wt),F(!1),console.error("Failed to send message:",me)}},[m,L,N,t?.uid,_t]),Bt=R.useCallback(ft=>{const st=ft.target.files[0];st&&st.type.startsWith("image/")&&D(st)},[]);R.useEffect(()=>{if(!se)return;let ft=null;if(e?.role==="pharmacy"?ft=t?.uid:m&&([ft]=m.split("__")),!ft)return;const st=br(tr(ct,"products"),Fr("pharmacyId","==",ft)),wt=Dn(st,me=>{xe(me.docs.map(Ue=>({id:Ue.id,...Ue.data()})))});return()=>wt&&wt()},[se,e?.role,t?.uid,m]);const Ot=async({drugs:ft,startDate:st,duration:wt,notes:me})=>{if(!m||!t)return;const[Ue,ut]=m.split("__"),{id:Ut}=await SV({pharmacyId:Ue,customerId:ut,chatThreadId:m,drugs:ft,startDate:st,duration:wt,notes:me});le(!1),await kk(m,{senderId:t.uid,to:ut,text:n("prescription_created","A new prescription has been created.")},Ut)};return R.useEffect(()=>{if(ye&&ne){const ft=Ae||"";A(n("drug_inquiry","I want to know more about this drug {productName}{priceText}.",{productName:ye,priceText:ft?", "+ft:""}))}else Be&&A(Be)},[ye,Ae,ne,Be]),c.jsxs("div",{className:`h-screen w-full bg-white dark:bg-gray-900 ${u?"flex":"flex flex-col"}`,children:[u&&c.jsx("aside",{className:"relative z-10 flex h-full w-[340px] flex-shrink-0 flex-col border-r border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-950",children:c.jsx(OS,{variant:"sidebar",selectedThreadId:m||void 0})}),c.jsxs("div",{className:"relative flex h-full flex-1 flex-col items-stretch overflow-visible bg-white dark:bg-gray-900",children:[c.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",backgroundImage:`url(${T6e})`,backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"200px 200px",pointerEvents:"none",zIndex:0,opacity:.3,willChange:"transform",backfaceVisibility:"hidden",transform:"translateZ(0)"}}),c.jsxs("div",{style:{position:"relative",zIndex:10},className:"flex-1 flex flex-col min-h-0",children:[c.jsx("style",{children:".hide-scrollbar::-webkit-scrollbar{display:none} .hide-scrollbar{-ms-overflow-style:none; scrollbar-width:none;}"}),c.jsx("audio",{ref:J,src:cbe,preload:"none"}),c.jsx("div",{className:"sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 pt-1 pb-1",style:{paddingTop:"env(safe-area-inset-top, 0)",width:u?"100%":"100vw",marginLeft:u?0:"calc(50% - 50vw)",paddingRight:"env(safe-area-inset-right, 0)"},children:c.jsxs("div",{className:"w-full px-4 sm:px-5 pt-6 pb-3 flex items-center gap-3 justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[!u&&c.jsx("button",{onClick:()=>{window.history.length>1?s(-1):s("/messages")},className:"rounded-full border border-gray-200 dark:border-gray-600 px-3 py-1 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-800 sm:px-4",children:c.jsx(Xd,{className:"h-4 w-4"})}),e?.role==="customer"?c.jsx("button",{className:"min-w-0 font-light text-[15px] sm:text-[17px] truncate text-left hover:underline focus:outline-none text-gray-900 dark:text-white",onClick:()=>{if(m){const[ft]=m.split("__");s(`/vendor/${ft}`)}},title:y,children:c.jsx(Qd,{name:y||"...",isVerified:T,className:"inline-flex items-center gap-1",iconClassName:"h-4 w-4 text-sky-500 dark:text-sky-400"})}):c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-light text-[15px] sm:text-[17px] truncate text-gray-900 dark:text-white",children:c.jsx(Qd,{name:y||"...",isVerified:T,className:"inline-flex items-center gap-1",iconClassName:"h-4 w-4 text-sky-500 dark:text-sky-400"})}),c.jsx("div",{className:"text-[9px] text-zinc-500 dark:text-zinc-400 truncate",children:S})]})]}),e?.role==="customer"&&c.jsxs("a",{href:M?`tel:${M}`:void 0,className:`flex items-center justify-center rounded-full border border-sky-500 text-sky-600 dark:text-sky-400 px-2 py-1 text-[11px] font-poppins font-light ${M?"hover:bg-sky-50 dark:hover:bg-sky-900/20":"opacity-40 cursor-not-allowed"}`,style:{minWidth:32},title:M?n("call_pharmacy_title","Call {pharmacy}",{pharmacy:y}):n("no_phone_number","No phone number"),tabIndex:M?0:-1,"aria-disabled":!M,children:[c.jsx(lbe,{className:"h-3 w-3 mr-1"})," ",n("call","Call")]}),e?.role==="pharmacy"&&m&&c.jsxs(rx,{as:"div",className:"relative inline-block text-left ml-2",children:[c.jsxs(rx.Button,{className:"px-3 py-1 rounded-full bg-sky-600 text-white text-xs font-medium",children:[n("actions","Actions")," ▾"]}),c.jsx(rx.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right bg-white dark:bg-gray-800 border border-sky-200 dark:border-gray-600 divide-y divide-gray-100 dark:divide-gray-700 rounded-[5px] shadow-lg focus:outline-none z-50",children:c.jsxs("div",{className:"py-1",children:[c.jsx(rx.Item,{children:({active:ft})=>c.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${ft?"bg-sky-50":""}`,onClick:()=>le(!0),children:n("create_prescription","Create Prescription")})}),c.jsx(rx.Item,{children:({active:ft})=>c.jsx("button",{className:`w-full text-left px-4 py-2 text-[12px] font-light ${ft?"bg-sky-50":""}`,onClick:()=>ke(!0),children:n("view_prescription_history","View Prescription History")})})]})})]})]})}),c.jsxs("div",{className:"w-full flex-1 flex flex-col min-h-0",children:[c.jsxs("div",{ref:ie,className:"flex-1 overflow-y-auto px-3 sm:px-4 pb-28 min-h-0 hide-scrollbar",style:{paddingTop:12},onScroll:nt,children:[fe<W.length&&c.jsx("div",{className:"flex justify-center py-4",children:c.jsx("button",{onClick:()=>te(ft=>Math.min(ft+50,W.length)),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 px-3 py-1 rounded-full transition-colors",children:n("load_more_messages","Load {count} more messages",{count:Math.min(50,W.length-fe)})})}),ue?c.jsxs("div",{className:"space-y-4",children:[c.jsx(Yw,{}),c.jsxs("div",{className:"flex flex-col items-end w-full mb-2 animate-pulse",children:[c.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-10 w-40 mb-1"}),c.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-6 w-24"})]}),c.jsx(Yw,{}),c.jsx("div",{className:"flex flex-col items-end w-full mb-2 animate-pulse",children:c.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-2xl h-8 w-56 mb-1"})}),c.jsx(Yw,{})]}):Lt.length===0?c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"text-gray-400 dark:text-gray-500 text-sm text-center",children:[c.jsx("div",{className:"text-lg mb-2",children:"💬"}),n("start_conversation","Start your conversation")]})}):(()=>{let ft=null;return Lt.map(st=>{const wt=st.senderId===t?.uid,me=st.createdAt?.seconds?new Date(st.createdAt.seconds*1e3):null;let Ue=!1;if(me){const ut=me.toDateString();ft!==ut&&(Ue=!0,ft=ut)}return c.jsxs(Ts.Fragment,{children:[Ue&&me&&c.jsx("div",{className:"flex justify-center my-4 mb-3",children:c.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-[9px] font-light px-2 py-0.5 rounded-md opacity-80",children:I6e(me,n)})}),c.jsxs("div",{className:`flex flex-col items-${wt?"end":"start"} w-full mb-1.5`,children:[c.jsxs("div",{className:`${wt?"bg-blue-500 text-white ml-8":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white mr-8 border border-gray-200 dark:border-gray-600 dark:border-gray-700"} px-2.5 py-1.5 max-w-[75%] sm:max-w-[65%] whitespace-pre-wrap break-words shadow-sm`,style:{borderRadius:wt?"10px 10px 2px 10px":"10px 10px 10px 2px",fontSize:13,lineHeight:1.2},children:[st.imageUrl&&c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:st.imageUrl,alt:"Shared image",className:"max-w-full max-h-64 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>Fe(st.imageUrl)})}),c.jsx(Ts.Suspense,{fallback:c.jsx("span",{children:st.text}),children:c.jsx(A6e,{text:st.text,isMine:wt})})]}),st.prescriptionId&&c.jsxs("div",{className:"mt-1",children:[c.jsx(N6e,{prescriptionId:st.prescriptionId})," "]}),c.jsxs("div",{className:`flex items-center text-[9px] text-gray-400 dark:text-gray-500 mt-0.5 ${wt?"mr-2 justify-end":"ml-2 justify-start"}`,children:[c.jsx("span",{children:me?me.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),c.jsx(pH,{message:st,isMine:wt,showReadReceipts:Ct,t:n})]})]})]},st.id)})})(),c.jsx("div",{ref:H})]}),c.jsx("div",{className:"w-full sticky bottom-0 z-20 bg-white/85 dark:bg-gray-900/85 backdrop-blur",style:{paddingBottom:"env(safe-area-inset-bottom, 0)",width:u?"100%":"100vw",marginLeft:u?0:"calc(50% - 50vw)",paddingLeft:"env(safe-area-inset-left, 0)",paddingRight:"env(safe-area-inset-right, 0)"},children:c.jsxs("div",{className:"w-full",children:[N&&c.jsxs("div",{className:"mx-4 sm:mx-5 mb-2 relative",children:[c.jsxs("div",{className:"relative inline-block",children:[c.jsx("img",{src:URL.createObjectURL(N),alt:"Selected",className:"max-h-32 max-w-32 object-cover rounded-lg border border-gray-300"}),c.jsx("button",{type:"button",onClick:()=>D(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]}),j&&c.jsx("div",{className:"text-sm text-gray-500 mt-1",children:n("uploading_image","Uploading image...")})]}),c.jsxs("form",{className:"mx-4 sm:mx-5 flex items-center gap-3 py-3",onSubmit:ft=>{ft.preventDefault(),ot()},children:[c.jsxs("label",{className:"flex items-center cursor-pointer hover:text-blue-500 transition-colors",title:n("attach_image","Attach image"),children:[c.jsx(Cle,{className:"h-5 w-5 text-gray-400 hover:text-blue-500"}),c.jsx("input",{type:"file",accept:"image/*",onChange:Bt,className:"hidden"})]}),c.jsx("input",{value:L,onChange:ft=>A(ft.target.value),placeholder:n("message_placeholder","Message"),className:"flex-1 min-w-0 outline-none px-3 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 dark:border-gray-600 rounded-full placeholder:text-gray-400 dark:placeholder:text-gray-500 placeholder:text-[14px] focus:border-blue-400 dark:focus:border-blue-500 focus:ring-1 focus:ring-blue-200 dark:focus:ring-blue-800 transition-all duration-200",style:{fontSize:14}}),c.jsx("button",{type:"submit",className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-200 ${L.trim()||N?"bg-blue-500 hover:bg-blue-600 active:scale-95":"bg-gray-300 cursor-not-allowed"}`,disabled:!L.trim()&&!N,children:c.jsx("img",{src:obe,alt:"Send",className:"h-4 w-4"})})]}),c.jsx("div",{style:{height:8}})]})})]}),c.jsx(Ts.Suspense,{fallback:null,children:c.jsx(E6e,{open:se,onClose:()=>le(!1),products:ve,onSubmit:Ot})}),c.jsx(d4,{open:Ee,onClose:()=>ke(!1),children:c.jsx(Ts.Suspense,{fallback:null,children:c.jsx(C6e,{chatThreadId:m,products:ve,userId:t?.uid})})})]}),c.jsx(_6e,{imageUrl:oe,isOpen:!!oe,onClose:()=>Fe(null)})]})]})}class j6e{constructor(){this.audio=null,this.permissionRequested=!1,this.notificationQueue=[],this.isProcessing=!1,this.initializeAudio(),this.requestPermissionOnUserInteraction()}initializeAudio(){try{this.audio=new Audio("/src/assets/message-tone.mp3"),this.audio.volume=.6,this.audio.preload="auto"}catch(e){console.warn("Notification audio not available:",e)}}requestPermissionOnUserInteraction(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}const e=()=>{!this.permissionRequested&&Notification.permission==="default"&&(this.permissionRequested=!0,Notification.requestPermission().then(r=>{console.log("Notification permission:",r)}))};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}playSound(){if(this.audio)try{this.audio.currentTime=0,this.audio.play().catch(e=>{console.warn("Could not play notification sound:",e)})}catch(e){console.warn("Audio playback error:",e)}}showNotification(e,r={}){if(!("Notification"in window)||Notification.permission!=="granted")return null;const n={icon:"/favicon.ico",badge:"/favicon.ico",requireInteraction:!1,silent:!1,...r};try{const s=new Notification(e,n);return n.requireInteraction||setTimeout(()=>{s&&s.close()},8e3),s.onclick=()=>{window.focus(),s.close(),r.onClick&&r.onClick()},s}catch(s){return console.error("Error showing notification:",s),null}}queueNotification(e){this.notificationQueue.push(e),this.processQueue()}async processQueue(){if(!(this.isProcessing||this.notificationQueue.length===0)){for(this.isProcessing=!0;this.notificationQueue.length>0;){const e=this.notificationQueue.shift();await this.processNotification(e),this.notificationQueue.length>0&&await new Promise(r=>setTimeout(r,1e3))}this.isProcessing=!1}}async processNotification(e){const{type:r,data:n,options:s={}}=e,a=document.hidden||s.force;switch(a&&this.playSound(),r){case"order_received":return this.handleOrderReceived(n,a);case"order_status_updated":return this.handleOrderStatusUpdated(n,a);case"message_received":return this.handleMessageReceived(n,a);case"prescription_ready":return this.handlePrescriptionReady(n,a);default:console.warn("Unknown notification type:",r)}}handleOrderReceived(e,r){const n="📦 New Order Received!",s=`Order #${e.id?.slice(-8)} - ₦${(e.total||0).toLocaleString()} from ${e.customerName||"Customer"}`;if(r)return this.showNotification(n,{body:s,tag:"order-received",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleOrderStatusUpdated(e,r){const s={confirmed:"✅ Order Confirmed",preparing:"👨‍⚕️ Order Being Prepared",ready:"📋 Order Ready for Pickup",completed:"🎉 Order Completed",cancelled:"❌ Order Cancelled"}[e.status]||"📦 Order Updated",a=`Order #${e.id?.slice(-8)} - ${e.pharmacyName||"Pharmacy"}`;if(r)return this.showNotification(s,{body:a,tag:"order-status",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/orders"}})}handleMessageReceived(e,r){const n=`💬 ${e.senderName||"New Message"}`,s=e.text?.slice(0,100)+(e.text?.length>100?"...":"")||"Sent an attachment";if(r)return this.showNotification(n,{body:s,tag:"message",icon:"/favicon.ico",onClick:()=>{window.location.hash="#/messages"}})}handlePrescriptionReady(e,r){const n="💊 Prescription Ready",s=`Your prescription is ready for pickup at ${e.pharmacyName}`;if(r)return this.showNotification(n,{body:s,tag:"prescription",icon:"/favicon.ico",requireInteraction:!0,onClick:()=>{window.location.hash="#/orders"}})}notifyOrderReceived(e){this.queueNotification({type:"order_received",data:e})}notifyOrderStatusUpdated(e){this.queueNotification({type:"order_status_updated",data:e})}notifyMessageReceived(e){this.queueNotification({type:"message_received",data:e})}notifyPrescriptionReady(e){this.queueNotification({type:"prescription_ready",data:e})}get isSupported(){return"Notification"in window}get isPermitted(){return this.isSupported&&Notification.permission==="granted"}get permissionStatus(){return this.isSupported?Notification.permission:"not-supported"}}const Ku=new j6e;function R6e(){const[t,e]=R.useState(Ku.permissionStatus),[r,n]=R.useState(!1);R.useEffect(()=>{e(Ku.permissionStatus);const d=setInterval(()=>{e(Ku.permissionStatus)},1e3);return()=>clearInterval(d)},[]);const s=async()=>{if(!Ku.isSupported){alert("Notifications are not supported in this browser");return}try{const u=await Notification.requestPermission();e(u)}catch(u){console.error("Error requesting notification permission:",u)}},a=()=>{if(!Ku.isPermitted){alert("Please enable notifications first");return}Ku.showNotification("🔔 Test Notification",{body:"This is a test notification from PharmaSeaHealth",tag:"test",requireInteraction:!1}),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{switch(t){case"granted":return c.jsx(vm,{className:"h-5 w-5 text-green-500"});case"denied":return c.jsx(xle,{className:"h-5 w-5 text-red-500"});case"default":return c.jsx(fx,{className:"h-5 w-5 text-yellow-500"});default:return c.jsx(FS,{className:"h-5 w-5 text-gray-500"})}},o=()=>{switch(t){case"granted":return"Notifications enabled";case"denied":return"Notifications blocked";case"default":return"Permission not requested";case"not-supported":return"Not supported in this browser";default:return"Unknown status"}},l=()=>{switch(t){case"granted":return"You will receive notifications for new orders, messages, and order updates.";case"denied":return"Notifications are blocked. You can enable them in your browser settings.";case"default":return"Click the button below to enable notifications for orders and messages.";case"not-supported":return"Your browser does not support push notifications.";default:return"Unable to determine notification status."}};return c.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(fx,{className:"h-6 w-6 text-blue-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i(),c.jsx("span",{className:"font-medium text-gray-900",children:o()})]}),c.jsx("p",{className:"text-sm text-gray-600",children:l()})]}),c.jsxs("div",{className:"space-y-3",children:[t==="default"&&c.jsxs("button",{onClick:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[c.jsx(fx,{className:"h-4 w-4"}),"Enable Notifications"]}),t==="granted"&&c.jsx("button",{onClick:a,disabled:r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${r?"bg-green-100 text-green-800 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r?c.jsxs(c.Fragment,{children:[c.jsx(vm,{className:"h-4 w-4"}),"Test Sent!"]}):c.jsxs(c.Fragment,{children:[c.jsx(fx,{className:"h-4 w-4"}),"Send Test Notification"]})}),t==="denied"&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Nle,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"text-sm",children:[c.jsx("p",{className:"font-medium text-red-800 mb-1",children:"How to enable notifications:"}),c.jsxs("ol",{className:"text-red-700 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Click the lock icon in your browser's address bar"}),c.jsx("li",{children:'Select "Allow" for notifications'}),c.jsx("li",{children:"Refresh the page"})]})]})]})})]}),c.jsxs("div",{className:"mt-6 pt-6 border-t",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"You'll be notified about:"}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vm,{className:"h-4 w-4 text-green-500"}),c.jsx("span",{children:"New orders received (Pharmacies)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vm,{className:"h-4 w-4 text-green-500"}),c.jsx("span",{children:"Order status updates (Customers)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vm,{className:"h-4 w-4 text-green-500"}),c.jsx("span",{children:"New messages in chats"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vm,{className:"h-4 w-4 text-green-500"}),c.jsx("span",{children:"Prescription ready for pickup"})]})]})]})]})}const L6e=({title:t,onBackClick:e})=>mi.createPortal(c.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md z-[100] px-4 py-4 border-b border-gray-100 dark:border-gray-700",children:c.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:e,className:"rounded-full p-2 hover:bg-sky-50 transition-all duration-200","aria-label":"Go back",children:c.jsx(Xd,{className:"h-5 w-5 text-sky-600 mt-8"})}),c.jsx("h1",{className:"mt-8 text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-light font-poppins leading-none text-gray-900 dark:text-white",children:"Settings"})]})})}),document.body);function F6e(){const t=Jn(),{user:e}=Vn(),{getSetting:r,updateSetting:n,resetSettings:s}=wy(),[a,i]=R.useState({}),o=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,l=u=>{n(Mr.SWIPE_NAVIGATION,u),console.log(u?"Swipe navigation enabled - swipe left/right to navigate between pages on mobile":"Swipe navigation disabled")};return c.jsxs(c.Fragment,{children:[c.jsx(L6e,{title:"Settings",onBackClick:()=>t(-1)}),c.jsx("div",{className:"pt-24 pb-28 w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 min-h-screen animate-fadeInUp",children:c.jsxs("div",{className:"mt-4 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-gray-100 p-2",children:c.jsx(V5,{className:"h-5 w-5 text-gray-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"General"}),c.jsx("p",{className:"text-sm text-gray-600",children:"App preferences and navigation settings"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Swipe Navigation"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enable swipe gestures to navigate between pages on mobile devices",!o&&c.jsx("span",{className:" text-orange-500",children:" (Desktop - feature available on mobile only)"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Mr.SWIPE_NAVIGATION),onChange:u=>l(u.target.checked)}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]}),r(Mr.SWIPE_NAVIGATION)&&o&&c.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mt-2",children:c.jsxs("p",{className:"text-xs text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"How to use:"})," Swipe left or right anywhere on the screen to navigate between Home, Cart, Messages, and Orders pages."]})}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Data Saver Mode"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reduce bandwidth usage and optimize for slower connections"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Mr.DATA_SAVER_MODE),onChange:u=>n(Mr.DATA_SAVER_MODE,u.target.checked)}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Read Receipts"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show when you've read messages in chats"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Mr.MESSAGE_READ_RECEIPTS),onChange:u=>n(Mr.MESSAGE_READ_RECEIPTS,u.target.checked)}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.1s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-orange-100 p-2",children:c.jsx(Sle,{className:"h-5 w-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Language & Region"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Set your language and regional preferences"})]})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"App Language"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your preferred language"})]}),c.jsxs("select",{value:r(Mr.LANGUAGE),onChange:u=>n(Mr.LANGUAGE,u.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-orange-300",children:[c.jsx("option",{value:"en",children:"English"}),c.jsx("option",{value:"yo",children:"Yoruba"}),c.jsx("option",{value:"ha",children:"Hausa"}),c.jsx("option",{value:"ig",children:"Igbo"}),c.jsx("option",{value:"fr",children:"Français"})]})]})})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.2s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-purple-100 p-2",children:c.jsx(Ele,{className:"h-5 w-5 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Appearance"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Customize how the app looks and feels"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Theme"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your preferred color scheme"})]}),c.jsxs("select",{value:r(Mr.THEME_MODE),onChange:u=>n(Mr.THEME_MODE,u.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300",children:[c.jsx("option",{value:"light",children:"Light"}),c.jsx("option",{value:"dark",children:"Dark"}),c.jsx("option",{value:"system",children:"System"})]})]}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Font Size"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Adjust text size for better readability"})]}),c.jsxs("select",{value:r(Mr.FONT_SIZE),onChange:u=>n(Mr.FONT_SIZE,u.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300",children:[c.jsx("option",{value:"small",children:"Small"}),c.jsx("option",{value:"medium",children:"Medium"}),c.jsx("option",{value:"large",children:"Large"})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.3s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-blue-100 p-2",children:c.jsx(vy,{className:"h-5 w-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Accessibility"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Make the app easier to use for everyone"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"High Contrast"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Increase contrast for better visibility"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Mr.HIGH_CONTRAST),onChange:u=>n(Mr.HIGH_CONTRAST,u.target.checked)}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Reduce Motion"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimize animations and transitions"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Mr.REDUCE_MOTION),onChange:u=>n(Mr.REDUCE_MOTION,u.target.checked)}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.4s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-sky-100 p-2",children:c.jsx(fx,{className:"h-5 w-5 text-sky-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage your notification preferences"})]})]}),c.jsx("div",{className:"pl-0",children:c.jsx(R6e,{})})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-sky-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.5s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-green-100 p-2",children:c.jsx(DS,{className:"h-5 w-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-poppins",children:"Privacy & Security"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Control your data and security settings"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Biometric Login"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use fingerprint or face recognition to unlock"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r(Mr.BIOMETRIC_LOGIN),onChange:u=>n(Mr.BIOMETRIC_LOGIN,u.target.checked)}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Auto Lock"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lock app after period of inactivity"})]}),c.jsxs("select",{value:r(Mr.AUTO_LOCK),onChange:u=>n(Mr.AUTO_LOCK,u.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-300",children:[c.jsx("option",{value:"1min",children:"1 minute"}),c.jsx("option",{value:"5min",children:"5 minutes"}),c.jsx("option",{value:"15min",children:"15 minutes"}),c.jsx("option",{value:"never",children:"Never"})]})]}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Location Sharing"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose location accuracy for deliveries"})]}),c.jsxs("select",{value:r(Mr.LOCATION_PRECISION),onChange:u=>n(Mr.LOCATION_PRECISION,u.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-300",children:[c.jsx("option",{value:"precise",children:"Precise"}),c.jsx("option",{value:"approximate",children:"Approximate"}),c.jsx("option",{value:"off",children:"Off"})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-red-100 dark:border-gray-600 p-6 shadow-sm animate-fade-in-up",style:{animationDelay:"0.6s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"rounded-full bg-red-100 p-2",children:c.jsx(V5,{className:"h-5 w-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-red-600 font-poppins",children:"Reset Settings"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Restore all settings to their default values"})]})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[c.jsxs("p",{className:"text-sm text-red-700 mb-3",children:[c.jsx("span",{className:"font-medium",children:"Warning:"})," This will reset all your preferences including theme, language, navigation settings, and accessibility options. This action cannot be undone."]}),c.jsx("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to default? This cannot be undone.")&&s()},className:"w-full px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"Reset All Settings"})]})})]})]})})]})}function Nc({children:t}){const{user:e,loading:r}=Vn(),n=Jn(),{t:s}=Ds();return r?c.jsx("div",{className:"p-6",children:"Loading…"}):e?t:c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-900",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:s("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>n("/auth/landing"),children:s("sign_in_sign_up","Sign In / Sign Up")})]})}function mH(){const{user:t,profile:e}=Vn(),r=hl(),n=R.useRef({});return R.useEffect(()=>{if(!(!t?.uid||!e?.role))return o4({uid:t.uid,role:e.role},s=>{s.forEach(a=>{if(!a.id)return;const i=br(tr(ct,"threads",a.id,"messages"),Qa("createdAt","desc"),vu(1));Dn(i,o=>{if(o.empty)return;const l={id:o.docs[0].id,...o.docs[0].data()},u=l.senderId===t.uid;let d=!1;if(r.pathname.startsWith("/chat/")){const p=r.pathname.split("/chat/")[1]?.split("/")[0];e.role==="customer"?a.id===`${p}__${t.uid}`&&(d=!0):a.id.startsWith(`${t.uid}__`)&&(d=!0)}if(r.pathname==="/messages"){const g=new URLSearchParams(r.search).get("chat");g&&(e.role==="customer"?a.id===`${g}__${t.uid}`&&(d=!0):a.id===`${t.uid}__${g}`&&(d=!0))}if(!u&&n.current[a.id]!==l.id&&!d){const p=e.role==="customer"?a.pharmacyName||"Pharmacy":a.customerName||"Customer",g={...l,senderName:p,threadId:a.id};Ku.notifyMessageReceived(g)}n.current[a.id]=l.id})})},s=>console.error("GlobalMessageNotifier error:",s))},[t?.uid,e?.role,r.pathname,r.search]),null}function D6e(){const{user:t,profile:e}=Vn(),r=R.useRef({}),n=R.useRef(!1);return R.useEffect(()=>{if(!t?.uid||!e||e.role!=="customer")return;const s=e.uid||t.uid,a=br(tr(ct,"orders"),Fr("customerId","==",s),Qa("updatedAt","desc")),i=Dn(a,o=>{if(!n.current){o.docs.forEach(l=>{const u={id:l.id,...l.data()};r.current[u.id]=u.status}),n.current=!0;return}o.docChanges().forEach(l=>{if(l.type==="modified"){const u={id:l.doc.id,...l.doc.data()},d=r.current[u.id];d&&d!==u.status&&(Ku.notifyOrderStatusUpdated(u),u.status==="ready"&&u.type==="prescription"&&Ku.notifyPrescriptionReady({...u,pharmacyName:u.pharmacyName||"Pharmacy"})),r.current[u.id]=u.status}if(l.type==="added"){const u={id:l.doc.id,...l.doc.data()};r.current[u.id]=u.status}})},o=>{console.error("Error listening for customer order notifications:",o)});return()=>i()},[t,e]),null}function O6e(){const{profile:t}=Vn();return c.jsxs(c.Fragment,{children:[c.jsx(mH,{}),t?.role==="customer"&&c.jsx(D6e,{})]})}function M6e({order:t,isOpen:e,onClose:r,onViewOrder:n}){const[s,a]=R.useState(!1),{profile:i}=Vn();R.useEffect(()=>{if(e){a(!0);const u=setTimeout(()=>{o()},1e4);return()=>clearTimeout(u)}else a(!1)},[e]);const o=()=>{a(!1),setTimeout(()=>r(),300)},l=()=>{n(t),o()};return!e||!t?null:c.jsx(c.Fragment,{children:c.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${s?"translate-y-0 opacity-100 scale-100":"-translate-y-4 opacity-0 scale-95"}`,children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-blue-200 dark:border-gray-600 mx-4 overflow-hidden card-interactive hover:shadow-3xl transition-all duration-300",style:{width:"393px"},children:[c.jsxs("div",{className:"bg-gradient-to-r from-sky-300 to-sky-600 px-6 py-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-white/10 animate-pulse"}),c.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center animate-bounce",children:c.jsx("span",{className:"text-white text-lg",children:"📦"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold text-lg animate-text-reveal",children:"New Order Received!"}),c.jsx("p",{className:"text-green-100 text-sm animate-fade-in",style:{animationDelay:"0.1s"},children:"You have a new customer order"})]})]})]}),c.jsxs("div",{className:"px-4 py-3 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-start gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.3s"},children:[c.jsx("p",{className:"text-gray-600 text-xs",children:"Order ID"}),c.jsxs("p",{className:"font-medium text-gray-900 text-sm truncate",children:["#",t.id?.slice(-8)||"N/A"]})]}),c.jsxs("div",{className:"flex-1 min-w-0 animate-slide-up",style:{animationDelay:"0.4s"},children:[c.jsx("p",{className:"text-gray-600 text-xs",children:"Customer"}),c.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.customerName||"Unknown Customer"})]}),c.jsxs("div",{className:"text-right flex-shrink-0 animate-slide-up",style:{animationDelay:"0.5s"},children:[c.jsx("p",{className:"text-gray-600 text-xs",children:"Total"}),c.jsxs("p",{className:"font-bold text-green-600 text-sm animate-pulse-slow",children:["₦",(t.total||0).toLocaleString()]})]})]}),t.items&&t.items.length>0||t.orderItems&&t.orderItems.length>0||t.products&&t.products.length>0?c.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[c.jsxs("p",{className:"text-gray-600 text-xs mb-2",children:["Items (",t.items?.length||t.orderItems?.length||t.products?.length||0,")"]}),c.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[(t.items||t.orderItems||t.products||[]).slice(0,3).map((u,d)=>c.jsxs("div",{className:"flex justify-between items-center text-xs gap-2 py-0.5 animate-fadeInUp",style:{animationDelay:`${.7+d*.1}s`},children:[c.jsx("span",{className:"text-gray-700 flex-1 leading-tight font-medium truncate",children:u.name||u.productName||u.title||u.itemName||`Item ${d+1}`}),c.jsxs("span",{className:"text-gray-600 text-right whitespace-nowrap font-semibold bg-gray-100 px-1.5 py-0.5 rounded text-xs flex-shrink-0 hover:bg-gray-200 transition-colors duration-200",children:["x",u.quantity||u.qty||u.amount||1]})]},d)),(t.items?.length||t.orderItems?.length||t.products?.length||0)>3&&c.jsxs("p",{className:"text-xs text-gray-500 italic mt-1 text-center bg-gray-50 py-0.5 rounded animate-fade-in",children:["+",(t.items?.length||t.orderItems?.length||t.products?.length||0)-3," more items"]})]})]}):c.jsxs("div",{className:"border-t pt-3 animate-fade-in",style:{animationDelay:"0.6s"},children:[c.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Items"}),c.jsx("p",{className:"text-gray-500 text-xs italic",children:"No items found"})]}),c.jsxs("div",{className:"border-t pt-2 flex justify-between items-center animate-fade-in",style:{animationDelay:"0.8s"},children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600 text-xs",children:"Status"}),c.jsx("span",{className:"inline-block px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full font-medium mt-0.5 animate-bounce-gentle",children:t.status||"Pending"})]}),c.jsx("div",{className:"text-right text-xs text-gray-500",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t animate-fade-in-up",style:{animationDelay:"0.9s"},children:[c.jsx("button",{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-xs transition-all duration-200 shadow-lg hover:shadow-xl btn-interactive hover:scale-105 active:scale-95",children:"View Details"}),c.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-xs transition-all duration-200 btn-interactive hover:scale-105 active:scale-95",children:"Dismiss"})]})]}),c.jsx("button",{onClick:o,className:"absolute top-3 right-3 w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-all duration-200 hover:scale-110 active:scale-95",children:c.jsx("span",{className:"text-lg",children:"×"})}),c.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gray-200 w-full",children:c.jsx("div",{className:"h-full bg-green-500 transition-all duration-[10000ms] ease-linear animate-progress-bar",style:{width:s?"0%":"100%"}})})]})})})}function B6e(){const[t,e]=R.useState(null),[r,n]=R.useState(!1),{profile:s,user:a}=Vn(),i=R.useRef(null),o=R.useRef(!0);return R.useEffect(()=>{if(!s||s.role!=="pharmacy")return;const d=s.uid||a?.uid;if(!d)return;o.current&&(i.current=new Date,o.current=!1);const p=br(tr(ct,"orders"),Fr("pharmacyId","==",d),Qa("createdAt","desc"),vu(1)),g=Dn(p,m=>{m.empty||m.docChanges().forEach(x=>{if(x.type==="added"){const y={id:x.doc.id,...x.doc.data()},b=y.createdAt?.toDate()||new Date;i.current&&b>i.current&&(Ku.notifyOrderReceived(y),e(y),n(!0))}})},m=>{console.error("Error listening for order notifications:",m)});return()=>g()},[s,a]),{newOrder:t,showNotification:r,clearNotification:()=>{n(!1),e(null)},viewOrder:d=>d}}const V6e=[{value:"all",label:"All"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"in_review",label:"In Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"needs_more_info",label:"Needs Info"}],xR={draft:"Draft",pending:"Pending",in_review:"In Review",approved:"Approved",rejected:"Rejected",needs_more_info:"Needs Info"},yR={draft:"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300",pending:"bg-amber-100 text-amber-700",in_review:"bg-sky-100 text-sky-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-rose-100 text-rose-700",needs_more_info:"bg-amber-100 text-amber-700"},vR={high:"bg-red-100 text-red-700",medium:"bg-amber-100 text-amber-700",low:"bg-emerald-100 text-emerald-700"};function o6(t){if(!t)return"--";try{return(typeof t?.toDate=="function"?t.toDate():new Date(t)).toLocaleString()}catch(e){return console.warn("[VerificationQueue] Failed to format date",e),"--"}}function U6e({items:t,onUpdateStatus:e,onAssign:r,onAddAuditEntry:n}){const[s,a]=R.useState(""),[i,o]=R.useState("all"),[l,u]=R.useState(null),[d,p]=R.useState(""),g=R.useMemo(()=>{const b=s.trim().toLowerCase();return(t||[]).filter(S=>(i==="all"?!0:S?.status===i)?b?[S?.entityName,S?.contactEmail,S?.contactPhone,S?.submittedBy,S?.applicationId,S?.applicantType].filter(Boolean).join(" ").toLowerCase().includes(b):!0:!1)},[t,s,i]),m=b=>{!l||typeof e!="function"||(e(l,b,d||void 0),p(""))},x=b=>{!l||typeof r!="function"||r(l,b)},y=()=>{!l||!d?.trim()||typeof n!="function"||(n(l,d.trim()),p(""))};return c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Verification Queue"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Track onboarding submissions, assign reviewers, and finalize approvals."})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[c.jsx("input",{type:"search",placeholder:"Search applicant, email, or ID",value:s,onChange:b=>a(b.target.value),className:"w-full rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-slate-700 sm:w-72"}),c.jsx("select",{value:i,onChange:b=>o(b.target.value),className:"rounded-full border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-slate-700",children:V6e.map(b=>c.jsx("option",{value:b.value,children:b.label},b.value))})]})]}),c.jsxs("section",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[c.jsxs("div",{className:"hidden border-b border-slate-200 bg-slate-50 px-6 py-3 text-xs font-medium uppercase tracking-wide text-slate-500 dark:border-slate-800 dark:bg-slate-800/50 md:grid md:grid-cols-12",children:[c.jsx("span",{className:"col-span-3",children:"Applicant"}),c.jsx("span",{className:"col-span-2",children:"Submitted"}),c.jsx("span",{className:"col-span-2",children:"Status"}),c.jsx("span",{className:"col-span-2",children:"Reviewer"}),c.jsx("span",{className:"col-span-3 text-right",children:"Actions"})]}),g.length===0?c.jsx("div",{className:"px-6 py-16 text-center text-sm text-slate-500 dark:text-slate-400",children:"No submissions match your filters."}):c.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:g.map(b=>c.jsxs("li",{className:"grid gap-4 px-4 py-4 transition hover:bg-slate-50 dark:hover:bg-slate-800/30 md:grid-cols-12 md:items-center md:px-6",children:[c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:b.entityName||b.submittedBy||"Unnamed Applicant"}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[b.applicantType||"pharmacy"," |"," ",b.applicationId||b.id]}),b.priority&&c.jsxs("span",{className:`mt-2 inline-block rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase ${vR[b.priority]||vR.low}`,children:[b.priority," priority"]})]}),c.jsx("div",{className:"md:col-span-2",children:c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:o6(b.submittedAt)})}),c.jsx("div",{className:"md:col-span-2",children:(()=>{const S=(b.status||"pending").toLowerCase(),P=xR[S]||S||"Pending",T=yR[S]||"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300";return c.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium capitalize ${T}`,children:P})})()}),c.jsx("div",{className:"md:col-span-2",children:c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:b.assignedTo||"Unassigned"})}),c.jsx("div",{className:"flex items-center justify-end gap-2 md:col-span-3",children:c.jsx("button",{type:"button",onClick:()=>{u(b),p(b.reviewerNote||"")},className:"rounded-full border border-slate-200 px-4 py-2 text-xs font-medium text-slate-700 transition hover:border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"View"})})]},b.id))})]}),c.jsx(d4,{open:!!l,onClose:()=>{u(null),p("")},children:l&&c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:["Application #",l.applicationId||l.id]}),c.jsx("h3",{className:"mt-1 text-2xl font-semibold text-slate-900 dark:text-white",children:l.entityName||l.submittedBy||"Unnamed"}),(()=>{const b=(l.status||"pending").toLowerCase(),S=xR[b]||b||"Pending",P=yR[b]||"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300";return c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${P}`,children:S}),c.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-300",children:["Assigned to"," ",c.jsx("strong",{children:l.assignedTo||"Unassigned"})]})]})})(),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-300",children:[l.applicantType||"pharmacy"," | Submitted"," ",o6(l.submittedAt)]})]}),c.jsxs("section",{className:"grid gap-4 rounded-2xl bg-slate-50 p-4 dark:bg-slate-900/50 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Contact"}),c.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-slate-700 dark:text-slate-200",children:[c.jsx("li",{children:l.contactName}),c.jsx("li",{children:l.contactEmail}),c.jsx("li",{children:l.contactPhone})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Location"}),c.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-slate-700 dark:text-slate-200",children:[c.jsx("li",{children:l.location?.addressLine1}),c.jsx("li",{children:l.location?.city}),c.jsx("li",{children:l.location?.state})]})]})]}),Array.isArray(l.documents)&&l.documents.length>0&&c.jsxs("section",{children:[c.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Submitted Documents"}),c.jsx("ul",{className:"mt-2 space-y-2",children:l.documents.map(b=>c.jsxs("li",{className:"flex items-center justify-between rounded-xl bg-white px-4 py-3 text-sm text-slate-700 shadow-sm dark:bg-slate-900 dark:text-slate-200",children:[c.jsx("span",{children:b.label||b.name}),b.url&&c.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold text-sky-500 hover:text-sky-600",children:"View"})]},b.url||b.name))})]}),l.checklist&&c.jsxs("section",{children:[c.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Verification Checklist"}),c.jsx("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:Object.entries(l.checklist).map(([b,S])=>c.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200",children:[c.jsx("span",{className:"capitalize",children:b.replace(/[_-]/g," ")}),c.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-semibold uppercase ${S===!0||S==="passed"?"bg-emerald-100 text-emerald-700":S===!1||S==="failed"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}`,children:typeof S=="boolean"?S?"passed":"failed":S})]},b))})]}),c.jsxs("section",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Internal note"}),c.jsx("textarea",{rows:3,value:d,onChange:b=>p(b.target.value),placeholder:"Add reviewer notes or checklist findings…",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-slate-700"}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-400",children:[c.jsx("button",{type:"button",onClick:y,disabled:!d?.trim(),className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600 transition hover:bg-slate-200 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:"Add to audit log"}),typeof r=="function"&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"|"}),c.jsx("button",{type:"button",onClick:()=>x("self"),className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600 transition hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:"Assign to me"})]})]})]}),Array.isArray(l.auditTrail)&&l.auditTrail.length>0&&c.jsxs("section",{children:[c.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Audit trail"}),c.jsx("ul",{className:"mt-2 space-y-3 text-sm text-slate-600 dark:text-slate-300",children:l.auditTrail.map((b,S)=>c.jsxs("li",{className:"rounded-xl bg-slate-50 px-4 py-3 dark:bg-slate-900/50",children:[c.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-100",children:[b.actor||"System"," ",c.jsx("span",{className:"text-xs font-normal text-slate-400",children:o6(b.timestamp)})]}),c.jsx("p",{children:b.message}),b.status&&c.jsx("span",{className:"mt-1 inline-flex rounded-full bg-slate-200 px-2 py-0.5 text-[11px] font-semibold uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:b.status})]},b.timestamp||S))})]}),c.jsxs("footer",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between sm:gap-4",children:[c.jsx("button",{type:"button",onClick:()=>u(null),className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Close"}),c.jsxs("div",{className:"flex flex-1 flex-wrap justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:()=>m("needs_more_info"),className:"rounded-full border border-amber-300 bg-amber-50 px-4 py-2 text-sm font-semibold text-amber-700 transition hover:bg-amber-100 dark:border-amber-500/50 dark:bg-amber-500/10 dark:text-amber-300",children:"Request Docs"}),c.jsx("button",{type:"button",onClick:()=>m("rejected"),className:"rounded-full border border-rose-300 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 transition hover:bg-rose-100 dark:border-rose-500/50 dark:bg-rose-500/10 dark:text-rose-300",children:"Reject"}),c.jsx("button",{type:"button",onClick:()=>m("approved"),className:"rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-300 dark:bg-emerald-600 dark:hover:bg-emerald-500",children:"Approve"})]})]})]})})]})}const cw=[{key:"users",label:"Users"},{key:"products",label:"Products"},{key:"prescriptions",label:"Prescriptions"},{key:"orders",label:"Orders"},{key:"carts",label:"Carts"},{key:"analytics",label:"Analytics"},{key:"moderation",label:"Moderation"},{key:"verification",label:"Verification"},{key:"export",label:"Export"},{key:"infoCards",label:"Info Cards"}],nx=3;function z6e(){const{user:t,logout:e}=Vn(),[r,n]=R.useState([]),[s,a]=R.useState([]),[i,o]=R.useState([]),[l,u]=R.useState([]),[d,p]=R.useState([]),[g,m]=R.useState([]),[x,y]=R.useState([]),[b,S]=R.useState(!0),[P,T]=R.useState(!1),[O,W]=R.useState(!1),[Y,L]=R.useState(null),[A,N]=R.useState(!1),[D,j]=R.useState(null),[F,M]=R.useState(null),[Z,ue]=R.useState(!1),[pe,fe]=R.useState({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),[te,H]=R.useState({name:"",image:"",description:"",stock:"",price:"",sku:"",category:""}),[ie,K]=R.useState({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff"}),[I,z]=R.useState({image:null,fullImage:null}),[X,J]=R.useState({image:!1,fullImage:!1}),[se,le]=R.useState("users"),[ve,xe]=R.useState("profile"),[Ee,ke]=R.useState([]),[oe,Fe]=R.useState([]),[Pe,ne]=R.useState([]),[ye,Ae]=R.useState([]),[Be,Oe]=R.useState(0),[pt,nt]=R.useState(""),[Lt,Ct]=R.useState(""),Nt=R.useRef(null);Jn();const _t=(me,Ue)=>{const ut={actor:t?.displayName||t?.email||"System",message:me,timestamp:new Date};return Ue&&(ut.status=Ue),ut},ot=async(me,Ue)=>{if(me){if(!me.type.startsWith("image/")){Ct("Please select a valid image file.");return}if(me.size>5*1024*1024){Ct("Image file size must be less than 5MB.");return}try{J(jt=>({...jt,[Ue]:!0})),Ct("");const Ut=`info-cards/${Date.now()}_${me.name}`,nr=NS(CS,Ut),Dt=await kS(nr,me),$t=await SS(Dt.ref);K(jt=>({...jt,[Ue]:$t})),z(jt=>({...jt,[Ue]:me}))}catch(ut){console.error("Error uploading image:",ut),Ct("Failed to upload image. Please try again.")}finally{J(ut=>({...ut,[Ue]:!1}))}}},Bt=async(me,Ue)=>{if(!me?.submittedByUid)return;const ut=Ue==="approved",Ut=Is(),nr={verificationStatus:Ue,verificationUpdatedAt:Ut,isVerified:ut,...ut?{verifiedAt:Ut}:{verifiedAt:lk()}};try{await Promise.all([ds(ir(ct,"pharmacies",me.submittedByUid),nr).catch(Dt=>console.error("[SuperuserDashboard] Failed to sync pharmacy verification status",Dt)),ds(ir(ct,"users",me.submittedByUid),nr).catch(Dt=>console.error("[SuperuserDashboard] Failed to sync user verification status",Dt))])}catch(Dt){console.error("[SuperuserDashboard] Verification sync failed",Dt)}},Ot=async(me,Ue)=>{if(me)try{const ut=br(tr(ct,"threads"),Fr("vendorId","==",me)),Ut=await vn(ut),nr=Ue==="approved";await Promise.all(Ut.docs.map(Dt=>ds(Dt.ref,{vendorIsVerified:nr,vendorVerificationStatus:Ue})))}catch(ut){console.error("[SuperuserDashboard] Failed to update vendor thread verification flag",ut)}},ft=async(me,Ue,ut)=>{if(me?.id)try{const Ut=ir(ct,"verificationQueue",me.id),nr=ut?.trim()||"",Dt=Is(),$t=Ue==="draft",jt={status:Ue,updatedAt:Dt,draft:$t,draftStep:$t?me?.draftStep??0:null,...nr?{reviewerNote:nr}:{},auditTrail:Fx(_t(`Status changed to ${Ue}${nr?` - ${nr}`:""}`,Ue))};$t||(jt.submittedAt=me?.submittedAt||Dt),Ue==="approved"?(jt.approvedAt=Dt,jt.draft=!1,jt.draftStep=null):Ue==="rejected"?(jt.rejectedAt=Dt,jt.draft=!1,jt.draftStep=null):(Ue==="needs_more_info"||Ue==="pending"||Ue==="in_review")&&(jt.draft=!1,jt.draftStep=null),!nr&&ut!==void 0&&(jt.reviewerNote=lk()),await ds(Ut,jt),await Bt(me,Ue),await Ot(me.submittedByUid,Ue)}catch(Ut){console.error("[SuperuserDashboard] Failed to update verification status",Ut)}},st=async(me,Ue)=>{if(!me?.id)return;const ut=Ue==="self"?t?.displayName||t?.email||t?.uid:Ue;try{const Ut=ir(ct,"verificationQueue",me.id),nr=me.status==="pending"||me.status==="draft"?"in_review":me.status||"in_review";await ds(Ut,{assignedTo:ut,status:nr,draft:!1,draftStep:null,auditTrail:Fx(_t(`Assigned to ${ut}`,"in_review")),updatedAt:Is()})}catch(Ut){console.error("[SuperuserDashboard] Failed to assign verification",Ut)}},wt=async(me,Ue)=>{if(!(!me?.id||!Ue?.trim()))try{const ut=ir(ct,"verificationQueue",me.id);await ds(ut,{auditTrail:Fx(_t(Ue.trim(),me.status||"pending")),updatedAt:Is()})}catch(ut){console.error("[SuperuserDashboard] Failed to append verification audit entry",ut)}};return R.useEffect(()=>{if(!t)return;S(!0);const me=Dn(tr(ct,"users"),jt=>{n(jt.docs.map(pr=>({id:pr.id,...pr.data()}))),S(!1)}),Ue=Dn(tr(ct,"products"),jt=>{a(jt.docs.map(pr=>({id:pr.id,...pr.data()})))}),ut=Dn(tr(ct,"prescriptions"),jt=>{o(jt.docs.map(pr=>({id:pr.id,...pr.data()})))}),Ut=Dn(tr(ct,"orders"),jt=>{u(jt.docs.map(pr=>({id:pr.id,...pr.data()})))}),nr=Dn(tr(ct,"carts"),jt=>{p(jt.docs.map(pr=>({id:pr.id,...pr.data()})))}),Dt=Dn(tr(ct,"infoCards"),jt=>{m(jt.docs.map(pr=>({id:pr.id,...pr.data()})))}),$t=Dn(tr(ct,"verificationQueue"),jt=>{y(jt.docs.map(pr=>({id:pr.id,...pr.data()})))});return()=>{me(),Ue(),ut(),Ut(),nr(),Dt(),$t()}},[t]),R.useEffect(()=>{let me=null,Ue=null,ut=null;return Y&&Y.id?(fe({displayName:Y.displayName||"",email:Y.email||"",address:Y.address||"",phone:Y.phone||"",role:Y.role||"",suspended:Y.role==="suspended",password:""}),me=Dn(br(tr(ct,"prescriptions"),Fr("userId","==",Y.id)),Ut=>{ke(Ut.docs.map(nr=>({id:nr.id,...nr.data()})))}),Ue=Dn(br(tr(ct,"orders"),Fr("userId","==",Y.id)),Ut=>{Fe(Ut.docs.map(nr=>({id:nr.id,...nr.data()})))}),ut=Dn(br(tr(ct,"carts"),Fr("userId","==",Y.id)),Ut=>{ne(Ut.docs.map(nr=>({id:nr.id,...nr.data()})))})):(fe({displayName:"",email:"",address:"",phone:"",role:"",suspended:!1,password:""}),ke([]),Fe([]),ne([])),()=>{me&&me(),Ue&&Ue(),ut&&ut()}},[Y&&Y.id]),R.useEffect(()=>{D&&H({name:D.name||"",image:D.image||"",description:D.description||"",stock:D.stock||"",price:D.price||"",sku:D.sku||"",category:D.category||""})},[D]),R.useEffect(()=>{F&&K({header:F.header||"",preview:F.preview||"",link:F.link||"",linkText:F.linkText||"",image:F.image||"",fullImage:F.fullImage||"",bgColor:F.bgColor||"#f0f8ff"})},[F]),R.useEffect(()=>{if(typeof F<"u"&&F&&K){K({header:F.header||"",preview:F.preview||"",link:F.link||"",linkText:F.linkText||"",image:F.image||"",fullImage:F.fullImage||"",bgColor:F.bgColor||"#f0f8ff",headerColor:F.headerColor||"#0ea5e9",previewColor:F.previewColor||"#475569",linkColor:F.linkColor||F.linkTextColor||"#0ea5e9",linkTextColor:F.linkTextColor||F.linkColor||"#0ea5e9",headerFontSize:F.headerFontSize||16,previewFontSize:F.previewFontSize||13,linkFontSize:F.linkFontSize||13,linkTextFontSize:F.linkTextFontSize||13});try{ue(!1)}catch{}}},[F]),R.useEffect(()=>{if(!Nt.current)return;const me=cw.findIndex(ut=>ut.key===se),Ue=Math.floor(me/nx);Oe(Ue),Nt.current.scrollTo({left:Ue*Nt.current.offsetWidth,behavior:"smooth"})},[se]),t?b?c.jsx(U5,{lines:8,className:"my-8"}):c.jsxs("div",{className:"pt-10 pb-28 w-full max-w-4xl mx-auto px-4 min-h-screen flex flex-col",children:[c.jsxs("div",{className:"relative mb-8 flex items-center justify-center",children:[c.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute left-0 top-1/2 -translate-y-1/2",style:{display:Be>0?"flex":"none"},onClick:()=>Oe(me=>Math.max(0,me-1)),"aria-label":"Previous tabs",children:c.jsx("span",{className:"text-lg",children:"<"})}),c.jsx("div",{className:"flex gap-2 px-8 w-full justify-center",children:cw.slice(Be*nx,(Be+1)*nx).map(me=>c.jsx("button",{className:`min-w-[110px] px-3 py-2 font-semibold tracking-wide text-[13px] rounded-t-lg transition-colors duration-150
                ${se===me.key?"border-b-2 border-sky-500 text-sky-500 bg-sky-50":"text-zinc-400 bg-white hover:bg-sky-50"}`,onClick:()=>{le(me.key),Ae([])},children:me.label},me.key))}),c.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-sky-100 shadow text-sky-500 hover:bg-sky-100 transition absolute right-0 top-1/2 -translate-y-1/2",style:{display:Be<Math.ceil(cw.length/nx)-1?"flex":"none"},onClick:()=>Oe(me=>Math.min(Math.ceil(cw.length/nx)-1,me+1)),"aria-label":"Next tabs",children:c.jsx("span",{className:"text-lg",children:">"})})]}),se==="users"&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-[15px] font-semibold tracking-wide text-sky-500",children:"Users"}),c.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{fe({displayName:"",email:"",address:"",phone:"",role:"customer",suspended:!1}),N(!0)},children:"Add User"})]}),c.jsx("div",{className:"space-y-2",children:(P?r:r.slice(0,3)).map(me=>c.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:ye.includes(me.id),onChange:Ue=>Ae(ut=>Ue.target.checked?[...ut,me.id]:ut.filter(Ut=>Ut!==me.id))}),c.jsxs("div",{className:"flex-1",onClick:Ue=>{Ue.target.tagName!=="BUTTON"&&L(me)},children:[c.jsx("div",{className:"font-semibold text-[13px] text-sky-500",children:me.displayName||me.email}),c.jsx("div",{className:"text-[12px] text-zinc-500",children:me.email}),c.jsxs("div",{className:"text-[11px] text-zinc-400",children:["Role: ",me.role||"customer"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async Ue=>{Ue.stopPropagation(),await ds(ir(ct,"users",me.id),{role:"suspended"})},children:"Suspend"}),c.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async Ue=>{Ue.stopPropagation(),await jc(ir(ct,"users",me.id))},children:"Delete"})]})]},me.id))}),ye.length>0&&c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-[12px] font-medium",onClick:async()=>{for(const me of ye)await jc(ir(ct,"users",me));Ae([])},children:"Delete Selected"}),c.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium",onClick:async()=>{for(const me of ye)await ds(ir(ct,"users",me),{role:"suspended"});Ae([])},children:"Suspend Selected"})]}),r.length>3&&!P&&c.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>T(!0),children:"See more"}),r.length>3&&P&&c.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>T(!1),children:"See less"})]}),se==="products"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"text-xl font-semibold mb-2",children:"Products"}),c.jsx("div",{className:"space-y-2",children:(O?s:s.slice(0,3)).map(me=>c.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",onClick:Ue=>{Ue.target.tagName!=="BUTTON"&&j(me)},children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-bold",children:me.name}),c.jsx("div",{className:"text-sm text-zinc-500",children:me.category}),c.jsxs("div",{className:"text-xs text-zinc-400",children:["Vendor: ",me.vendorId]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:async Ue=>{Ue.stopPropagation(),await ds(ir(ct,"products",me.id),{approved:!0}),a(s.map(ut=>ut.id===me.id?{...ut,approved:!0}:ut))},children:"Approve"}),c.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async Ue=>{Ue.stopPropagation(),await jc(ir(ct,"products",me.id)),a(s.filter(ut=>ut.id!==me.id))},children:"Delete"})]})]},me.id))}),s.length>3&&!O&&c.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>W(!0),children:"See more"}),s.length>3&&O&&c.jsx("button",{className:"mt-2 px-3 py-1 rounded-full bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:()=>W(!1),children:"See less"})]}),se==="prescriptions"&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-xl font-semibold",children:"Prescriptions"}),c.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{},children:"Add Prescription"})]}),c.jsx("div",{className:"space-y-2",children:i.map(me=>c.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:ye.includes(me.id),onChange:Ue=>Ae(ut=>Ue.target.checked?[...ut,me.id]:ut.filter(Ut=>Ut!==me.id))}),c.jsxs("div",{className:"flex-1",onClick:()=>{},children:[c.jsx("div",{className:"font-bold",children:me.title||me.id}),c.jsx("div",{className:"text-xs text-zinc-500",children:me.createdAt?new Date(me.createdAt.seconds*1e3).toLocaleString():""}),c.jsxs("div",{className:"text-xs text-zinc-400",children:["Drugs: ",Array.isArray(me.drugs)?me.drugs.join(", "):me.drugs]})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async Ue=>{Ue.stopPropagation(),await jc(ir(ct,"prescriptions",me.id))},children:"Delete"})})]},me.id))}),ye.length>0&&c.jsx("div",{className:"flex gap-2 mt-2",children:c.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const me of ye)await jc(ir(ct,"prescriptions",me));Ae([])},children:"Delete Selected"})})]}),se==="orders"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("div",{className:"text-xl font-semibold",children:"Orders"})}),c.jsx("div",{className:"space-y-2",children:l.map(me=>c.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:ye.includes(me.id),onChange:Ue=>Ae(ut=>Ue.target.checked?[...ut,me.id]:ut.filter(Ut=>Ut!==me.id))}),c.jsxs("div",{className:"flex-1",onClick:()=>{},children:[c.jsxs("div",{className:"font-bold",children:["Order #",me.id]}),c.jsx("div",{className:"text-xs text-zinc-500",children:me.createdAt?new Date(me.createdAt.seconds*1e3).toLocaleString():""}),c.jsxs("div",{className:"text-xs text-zinc-400",children:["Products: ",Array.isArray(me.products)?me.products.map(Ue=>Ue.name).join(", "):""]})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-700 text-xs",onClick:async Ue=>{Ue.stopPropagation(),await jc(ir(ct,"orders",me.id))},children:"Delete"})})]},me.id))}),ye.length>0&&c.jsx("div",{className:"flex gap-2 mt-2",children:c.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const me of ye)await jc(ir(ct,"orders",me));Ae([])},children:"Delete Selected"})})]}),se==="carts"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("div",{className:"text-xl font-semibold",children:"Cart Items"})}),c.jsxs("div",{className:"space-y-2",children:[d.flatMap(me=>Array.isArray(me.products)?me.products.map((Ue,ut)=>({...Ue,cartId:me.id,userId:me.userId,cartUpdatedAt:me.updatedAt})):[]).map((me,Ue)=>c.jsxs("div",{className:"border border-sky-100 rounded-lg p-3 flex items-center justify-between bg-white group hover:shadow-md transition",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-bold text-sm",children:me.name||"Unnamed Product"}),c.jsxs("div",{className:"text-xs text-zinc-500",children:["Quantity: ",me.quantity||1," | Cart: ",me.cartId?.slice(-8)||"Unknown"," | User: ",me.userId?.slice(-8)||"Unknown"]}),c.jsx("div",{className:"text-xs text-zinc-400",children:me.cartUpdatedAt?new Date(me.cartUpdatedAt.seconds*1e3).toLocaleString():""})]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("span",{className:"px-2 py-1 rounded bg-sky-100 text-sky-700 text-xs",children:["$",(me.price||0)*(me.quantity||1)]})})]},`${me.cartId}-${Ue}`)),d.flatMap(me=>Array.isArray(me.products)?me.products:[]).length===0&&c.jsx("div",{className:"text-center text-zinc-500 py-8",children:"No items in any carts"})]})]}),se==="analytics"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"text-xl font-semibold mb-4",children:"Analytics"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold",children:r.length}),c.jsx("div",{className:"text-xs text-zinc-600",children:"Users"})]}),c.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold",children:s.length}),c.jsx("div",{className:"text-xs text-zinc-600",children:"Products"})]}),c.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold",children:i.length}),c.jsx("div",{className:"text-xs text-zinc-600",children:"Prescriptions"})]}),c.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold",children:l.length}),c.jsx("div",{className:"text-xs text-zinc-600",children:"Orders"})]}),c.jsxs("div",{className:"bg-yellow-100 rounded p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold",children:d.reduce((me,Ue)=>me+(Array.isArray(Ue.products)?Ue.products.reduce((ut,Ut)=>ut+(Ut.quantity||1),0):0),0)}),c.jsx("div",{className:"text-xs text-zinc-600",children:"Cart Items"})]})]}),c.jsx("div",{className:"mt-4 text-zinc-500 text-xs",children:"Charts and advanced analytics coming soon."})]}),se==="moderation"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"text-xl font-semibold mb-4",children:"Moderation"}),c.jsx("div",{className:"text-zinc-500 mb-4",children:"No flagged items yet. Moderation features coming soon."}),ye.length>0&&c.jsx("div",{className:"flex gap-2 mt-2",children:c.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white text-xs",onClick:async()=>{for(const me of ye);Ae([])},children:"Delete Selected"})})]}),se==="verification"&&c.jsx("div",{className:"mb-8",children:c.jsx(U6e,{items:x,onUpdateStatus:ft,onAssign:st,onAddAuditEntry:wt})}),se==="export"&&c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"text-xl font-semibold mb-4",children:"Export Data"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(r,"users"),children:"Export Users TSV"}),c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(s,"products"),children:"Export Products TSV"}),c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(i,"prescriptions"),children:"Export Prescriptions TSV"}),c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(l,"orders"),children:"Export Orders TSV"}),c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium",onClick:()=>exportTSV(d,"carts"),children:"Export Carts TSV"})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:async()=>{await e(),window.location.href="/auth/landing"},className:"rounded-full border border-red-300 text-red-600 px-3 py-1 inline-flex text-[12px] items-center gap-2",children:"Log Out"})}),(Y||A)&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[c.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:A?"Add User":"Edit User"}),pt&&c.jsx("div",{className:"text-red-500 text-xs mb-2",children:pt}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:pe.displayName,onChange:me=>fe(Ue=>({...Ue,displayName:me.target.value})),placeholder:"Name"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:pe.email,onChange:me=>fe(Ue=>({...Ue,email:me.target.value})),placeholder:"Email"}),A&&c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",type:"password",value:pe.password,onChange:me=>fe(Ue=>({...Ue,password:me.target.value})),placeholder:"Password"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:pe.address,onChange:me=>fe(Ue=>({...Ue,address:me.target.value})),placeholder:"Address"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:pe.phone,onChange:me=>fe(Ue=>({...Ue,phone:me.target.value})),placeholder:"Phone Number"}),c.jsxs("select",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:pe.role,onChange:me=>fe(Ue=>({...Ue,role:me.target.value})),children:[c.jsx("option",{value:"customer",children:"Customer"}),c.jsx("option",{value:"pharmacy",children:"Pharmacy"}),c.jsx("option",{value:"superuser",children:"Superuser"}),c.jsx("option",{value:"suspended",children:"Suspended"})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(nt(""),A){const me=uB();try{const Ue=await QM(me,pe.email,pe.password),ut={...pe};delete ut.password;const Ut=await Yd(()=>Promise.resolve().then(()=>EM),void 0).then(nr=>nr.addDoc(tr(ct,"users"),{...ut,uid:Ue.user.uid}));n([...r,{id:Ut.id,...ut,uid:Ue.user.uid}]),N(!1)}catch(Ue){nt(Ue.message||"Failed to create user. Check email, password, and permissions.")}}else try{await ds(ir(ct,"users",Y.id),{displayName:pe.displayName,email:pe.email,address:pe.address,phone:pe.phone,role:pe.role}),n(r.map(me=>me.id===Y.id?{...me,...pe}:me)),L(null)}catch(me){nt(me.message||"Failed to update user.")}},children:A?"Add":"Save"}),!A&&(pe.role==="suspended"?c.jsx("button",{className:"px-4 py-2 rounded bg-green-500 text-white font-medium text-[13px] shadow hover:bg-green-600",onClick:async()=>{await ds(ir(ct,"users",Y.id),{role:"customer"}),n(r.map(me=>me.id===Y.id?{...me,role:"customer"}:me)),L(null)},children:"Lift Suspension"}):c.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-medium text-[13px] shadow hover:bg-red-600",onClick:async()=>{await ds(ir(ct,"users",Y.id),{role:"suspended"}),n(r.map(me=>me.id===Y.id?{...me,role:"suspended"}:me)),L(null)},children:"Suspend"})),c.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{L(null),N(!1),nt("")},children:"Cancel"})]})]})]})}),D&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl max-w-md w-full border border-sky-100",children:[c.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:"Edit Product"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.name,onChange:me=>H(Ue=>({...Ue,name:me.target.value})),placeholder:"Product Name"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.sku,onChange:me=>H(Ue=>({...Ue,sku:me.target.value})),placeholder:"SKU"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.price,onChange:me=>H(Ue=>({...Ue,price:me.target.value})),placeholder:"Price"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.stock,onChange:me=>H(Ue=>({...Ue,stock:me.target.value})),placeholder:"Stock"}),c.jsx("textarea",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:te.description,onChange:me=>H(Ue=>({...Ue,description:me.target.value})),placeholder:"Description",rows:"2"}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{await ds(ir(ct,"products",D.id),{name:te.name,sku:te.sku,price:te.price,stock:te.stock,description:te.description}),a(s.map(me=>me.id===D.id?{...me,...te}:me)),j(null)},children:"Save"}),c.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>j(null),children:"Cancel"})]})]})]})}),se==="infoCards"&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-xl font-semibold text-sky-500",children:"Info Cards"}),c.jsx("button",{className:"px-3 py-1 rounded bg-sky-500 text-white text-[12px] font-medium shadow hover:bg-sky-600",onClick:()=>{try{M(null)}catch{}try{ue(!0)}catch{}try{K({header:"",preview:"",link:"",linkText:"",image:"",fullImage:"",bgColor:"#f0f8ff",headerColor:"#0ea5e9",previewColor:"#475569",linkColor:"#0ea5e9",linkTextColor:"#0ea5e9",headerFontSize:16,previewFontSize:13,linkFontSize:13,linkTextFontSize:13}),z({image:null,fullImage:null}),J({image:!1,fullImage:!1})}catch{}},children:"Add Info Card"})]}),c.jsx("div",{className:"space-y-4",children:g.map(me=>c.jsxs("div",{className:"border border-sky-100 rounded-lg p-4 flex items-center justify-between group hover:shadow-md transition cursor-pointer",style:{background:me.bgColor||"#ffffff"},children:[c.jsxs("div",{className:"flex-1",onClick:()=>{M(me),K({header:me.header||"",preview:me.preview||"",link:me.link||"",linkText:me.linkText||"",image:me.image||"",fullImage:me.fullImage||"",bgColor:me.bgColor||"#f0f8ff",headerColor:me.headerColor||"#0ea5e9",previewColor:me.previewColor||"#475569",linkColor:me.linkColor||me.linkTextColor||"#0ea5e9",linkTextColor:me.linkTextColor||me.linkColor||"#0ea5e9",headerFontSize:me.headerFontSize||16,previewFontSize:me.previewFontSize||13,linkFontSize:me.linkFontSize||13,linkTextFontSize:me.linkTextFontSize||13}),z({image:null,fullImage:null}),J({image:!1,fullImage:!1})},children:[c.jsx("div",{style:{color:me.headerColor||"#0ea5e9",fontSize:(me.headerFontSize||16)+"px",fontWeight:600},children:me.header}),c.jsx("div",{style:{color:me.previewColor||"#475569",fontSize:(me.previewFontSize||13)+"px"},className:"mt-1",children:me.preview}),me.link&&me.linkText&&c.jsx("a",{href:me.link,style:{color:me.linkColor||"#0ea5e9",fontSize:(me.linkFontSize||13)+"px"},className:"underline",target:"_blank",rel:"noopener noreferrer",children:me.linkText}),me.image&&c.jsx("img",{src:me.image,alt:"Info",className:"mt-2 rounded-lg",style:{maxWidth:"120px",maxHeight:"60px"}}),me.fullImage&&c.jsx("img",{src:me.fullImage,alt:"Full",className:"mt-2 rounded-lg",style:{maxWidth:"180px",maxHeight:"100px"}}),c.jsxs("div",{className:"text-[11px] text-zinc-400 mt-2",children:["BG: ",me.bgColor]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-2 py-1 rounded bg-sky-100 text-sky-500 text-[12px] font-medium",onClick:Ue=>{Ue.stopPropagation(),M(me),ue(!1),K({header:me.header||"",preview:me.preview||"",link:me.link||"",linkText:me.linkText||"",image:me.image||"",fullImage:me.fullImage||"",bgColor:me.bgColor||"#f0f8ff",headerColor:me.headerColor||"#0ea5e9",previewColor:me.previewColor||"#475569",linkColor:me.linkColor||me.linkTextColor||"#0ea5e9",linkTextColor:me.linkTextColor||me.linkColor||"#0ea5e9",headerFontSize:me.headerFontSize||16,previewFontSize:me.previewFontSize||13,linkFontSize:me.linkFontSize||13,linkTextFontSize:me.linkTextFontSize||13}),z({image:null,fullImage:null}),J({image:!1,fullImage:!1})},children:"Edit"}),c.jsx("button",{className:"px-2 py-1 rounded bg-red-100 text-red-600 text-[12px] font-medium",onClick:async Ue=>{Ue.stopPropagation(),await jc(ir(ct,"infoCards",me.id))},children:"Delete"})]})]},me.id))}),(F||Z)&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full border border-sky-100",children:[c.jsx("div",{className:"text-[16px] font-semibold tracking-wide text-sky-500 mb-4",children:Z?"Add Info Card":"Edit Info Card"}),Lt&&c.jsx("div",{className:"text-red-500 text-xs mb-2",children:Lt}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ie.header,onChange:me=>K(Ue=>({...Ue,header:me.target.value})),placeholder:"Header"}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500 placeholder:text-zinc-400",value:ie.preview,onChange:me=>K(Ue=>({...Ue,preview:me.target.value})),placeholder:"Preview text"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{className:"flex-1 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ie.link,onChange:me=>K(Ue=>({...Ue,link:me.target.value})),placeholder:"Link (optional)"}),c.jsx("input",{className:"w-36 border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ie.linkText,onChange:me=>K(Ue=>({...Ue,linkText:me.target.value})),placeholder:"Link Text"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"text-xs text-zinc-500 font-medium",children:"Images"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs text-zinc-500",children:"Right Side Image (optional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:me=>ot(me.target.files[0],"image"),className:"flex-1 text-xs border border-sky-100 rounded px-2 py-1 focus:outline-none focus:border-sky-500",disabled:X.image}),X.image&&c.jsxs("div",{className:"text-xs text-sky-500 flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-sky-500 mr-1"}),"Uploading..."]})]}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ie.image,onChange:me=>K(Ue=>({...Ue,image:me.target.value})),placeholder:"Or enter image URL"}),ie.image&&c.jsx("div",{className:"text-xs text-green-600",children:"✓ Image loaded"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs text-zinc-500",children:"Full Image (optional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:me=>ot(me.target.files[0],"fullImage"),className:"flex-1 text-xs border border-sky-100 rounded px-2 py-1 focus:outline-none focus:border-sky-500",disabled:X.fullImage}),X.fullImage&&c.jsxs("div",{className:"text-xs text-sky-500 flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-sky-500 mr-1"}),"Uploading..."]})]}),c.jsx("input",{className:"w-full border-b border-sky-100 text-[13px] py-2 focus:outline-none focus:border-sky-500",value:ie.fullImage,onChange:me=>K(Ue=>({...Ue,fullImage:me.target.value})),placeholder:"Or enter full image URL"}),ie.fullImage&&c.jsx("div",{className:"text-xs text-green-600",children:"✓ Full image loaded"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Color",c.jsx("input",{type:"color",value:ie.headerColor||"#0ea5e9",onChange:me=>K(Ue=>({...Ue,headerColor:me.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Header Size",c.jsx("input",{type:"range",min:"12",max:"28",value:ie.headerFontSize||16,onChange:me=>K(Ue=>({...Ue,headerFontSize:parseInt(me.target.value)})),className:"w-full mt-1"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Color",c.jsx("input",{type:"color",value:ie.previewColor||"#475569",onChange:me=>K(Ue=>({...Ue,previewColor:me.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Preview Size",c.jsx("input",{type:"range",min:"10",max:"22",value:ie.previewFontSize||13,onChange:me=>K(Ue=>({...Ue,previewFontSize:parseInt(me.target.value)})),className:"w-full mt-1"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Color",c.jsx("input",{type:"color",value:ie.linkColor||"#0ea5e9",onChange:me=>K(Ue=>({...Ue,linkColor:me.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Size",c.jsx("input",{type:"range",min:"10",max:"22",value:ie.linkFontSize||13,onChange:me=>K(Ue=>({...Ue,linkFontSize:parseInt(me.target.value)})),className:"w-full mt-1"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Color",c.jsx("input",{type:"color",value:ie.linkTextColor||"#0ea5e9",onChange:me=>K(Ue=>({...Ue,linkTextColor:me.target.value})),className:"w-full h-8 mt-1 p-0 border-0"})]}),c.jsxs("label",{className:"text-xs text-zinc-500",children:["Link Text Size",c.jsx("input",{type:"range",min:"10",max:"22",value:ie.linkTextFontSize||13,onChange:me=>K(Ue=>({...Ue,linkTextFontSize:parseInt(me.target.value)})),className:"w-full mt-1"})]})]}),c.jsxs("div",{className:"mt-2",children:[c.jsx("label",{className:"text-xs text-zinc-500",children:"Background Color"}),c.jsx("input",{type:"color",value:ie.bgColor||"#f0f8ff",onChange:me=>K(Ue=>({...Ue,bgColor:me.target.value})),className:"w-full h-10 mt-1 p-0 border-0"})]}),c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Live preview"}),c.jsxs("div",{style:{background:ie.bgColor||"#f8fafc",padding:12,borderRadius:10,display:"flex",gap:12,alignItems:"center"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{color:ie.headerColor||"#0ea5e9",fontSize:(ie.headerFontSize||16)+"px",fontWeight:700},children:ie.header||"Header"}),c.jsx("div",{style:{color:ie.previewColor||"#475569",fontSize:(ie.previewFontSize||13)+"px",marginTop:4},children:ie.preview||"Preview text goes here"}),ie.linkText&&c.jsx("div",{style:{marginTop:6},children:c.jsx("a",{style:{color:ie.linkTextColor||ie.linkColor||"#0ea5e9",fontSize:(ie.linkTextFontSize||13)+"px"},href:ie.link||"#",children:ie.linkText})})]}),ie.image&&c.jsx("img",{src:ie.image,alt:"Preview",style:{width:80,height:60,objectFit:"cover",borderRadius:6}})]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{className:"px-4 py-2 rounded bg-sky-500 text-white font-medium text-[13px] shadow hover:bg-sky-600",onClick:async()=>{if(Ct(""),Z)try{await af(tr(ct,"infoCards"),ie),ue(!1)}catch(me){Ct(me.message||"Failed to add info card.")}else if(F)try{await ds(ir(ct,"infoCards",F.id),ie),M(null)}catch(me){Ct(me.message||"Failed to save info card.")}},children:Z?"Add":"Save"}),c.jsx("button",{className:"px-4 py-2 rounded bg-zinc-100 text-zinc-700 font-medium text-[13px] shadow hover:bg-zinc-200",onClick:()=>{M(null),ue(!1),Ct(""),z({image:null,fullImage:null}),J({image:!1,fullImage:!1})},children:"Cancel"})]})]})]})})]})]}):c.jsx(U5,{lines:4,className:"my-8"})}function $6e(){return c.jsxs("div",{className:"grid h-full w-full gap-4 lg:grid-cols-[420px_1fr] animate-pulse",children:[c.jsxs("div",{className:"flex flex-col rounded-3xl border border-sky-100 bg-white/80 dark:bg-slate-900/70 dark:border-slate-700/60 p-4 shadow-sm lg:h-full",children:[c.jsx("div",{className:"rounded-2xl bg-sky-100/60 dark:bg-slate-700/80 h-12 mb-4"}),c.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[c.jsx("div",{className:"h-10 flex-1 rounded-2xl bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-10 w-10 rounded-2xl bg-sky-50 dark:bg-slate-800/70"})]}),c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("div",{className:"h-4 w-24 rounded-full bg-sky-50 dark:bg-slate-800/80"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"h-8 w-20 rounded-full bg-sky-50 dark:bg-slate-800/80"}),c.jsx("span",{className:"h-8 w-20 rounded-full bg-sky-50 dark:bg-slate-800/80"})]})]}),c.jsx("div",{className:"space-y-3 overflow-hidden",children:Array.from({length:5}).map((t,e)=>c.jsxs("div",{className:"rounded-3xl border border-sky-50 bg-white/90 dark:bg-slate-800/80 dark:border-slate-700/60 p-4 shadow-sm",children:[c.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-100/60 dark:bg-slate-700/70"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-3 w-3/4 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("div",{className:"h-3 w-1/2 rounded-full bg-sky-50 dark:bg-slate-800/70"})]})]}),c.jsx("div",{className:"mb-3 h-3 w-2/3 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"h-8 flex-1 rounded-full bg-sky-50 dark:bg-slate-800/70"}),c.jsx("span",{className:"h-8 w-24 rounded-full bg-sky-100/80 dark:bg-slate-700/80"})]})]},e))})]}),c.jsxs("div",{className:"relative h-[55vh] rounded-3xl border border-sky-100 bg-gradient-to-br from-sky-50 via-white to-sky-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 shadow-inner lg:h-full",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(56,189,248,0.2),_transparent_50%)] dark:bg-[radial-gradient(circle_at_center,_rgba(125,211,252,0.15),_transparent_55%)]"}),c.jsxs("div",{className:"absolute inset-4 rounded-[26px] border border-white/60 dark:border-white/10 bg-white/40 dark:bg-slate-900/50 backdrop-blur-xl shadow-[inset_0_30px_60px_-30px_rgba(12,74,110,0.25)] dark:shadow-[inset_0_30px_60px_-30px_rgba(148,163,184,0.2)] flex flex-col items-center justify-center gap-6",children:[c.jsx("div",{className:"h-16 w-16 rounded-full bg-sky-100/80 dark:bg-slate-700/80 shadow-lg"}),c.jsxs("div",{className:"space-y-3 text-center",children:[c.jsx("div",{className:"mx-auto h-4 w-40 rounded-full bg-sky-100/80 dark:bg-slate-600/70"}),c.jsx("div",{className:"mx-auto h-3 w-52 rounded-full bg-sky-100/60 dark:bg-slate-600/60"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("span",{className:"h-8 w-28 rounded-full bg-sky-100/80 dark:bg-slate-700/70"}),c.jsx("span",{className:"h-8 w-28 rounded-full bg-sky-100/60 dark:bg-slate-700/60"})]})]})]})]})}function wR({className:t="h-4 w-4",...e}){return c.jsxs("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[c.jsx("path",{d:"M3 9V1M17 17V14M3 17V13M17 10V1M10 4V1M10 17V8",stroke:"currentColor",strokeLinecap:"round"}),c.jsx("path",{d:"M3 13C4.10457 13 5 12.1046 5 11C5 9.89543 4.10457 9 3 9C1.89543 9 1 9.89543 1 11C1 12.1046 1.89543 13 3 13Z",stroke:"currentColor",strokeLinecap:"round"}),c.jsx("path",{d:"M10 8C11.1046 8 12 7.10457 12 6C12 4.89543 11.1046 4 10 4C8.89543 4 8 4.89543 8 6C8 7.10457 8.89543 8 10 8Z",stroke:"currentColor",strokeLinecap:"round"}),c.jsx("path",{d:"M17 14C18.1046 14 19 13.1046 19 12C19 10.8954 18.1046 10 17 10C15.8954 10 15 10.8954 15 12C15 13.1046 15.8954 14 17 14Z",stroke:"currentColor",strokeLinecap:"round"})]})}function q6e(){const t=Jn(),{profile:e}=Vn(),{t:r}=Ds(),{userCoords:n,location:s,isLoading:a}=rg(),[i,o]=R.useState([]),[l,u]=R.useState(!0),[d,p]=R.useState(null),[g,m]=R.useState([]),[x,y]=R.useState(""),[b,S]=R.useState(!1),[P,T]=R.useState("all"),[O,W]=R.useState(!1),[Y,L]=R.useState([]),[A,N]=R.useState(-1);R.useEffect(()=>{e&&e.role!=="customer"&&t("/")},[e,t]),R.useEffect(()=>{async function K(){try{const I=await O5();o(I||[])}catch(I){console.error("Error loading pharmacies:",I)}finally{u(!1)}}K()},[]),R.useEffect(()=>{if(!n||i.length===0){m(i);return}let K=i.map(I=>{const z=UV(I,n,"driving"),X=D(I),J=X?u4(n.latitude,n.longitude,X.latitude,X.longitude):1/0;return{...I,distance:J,eta:z,coords:X}}).filter(I=>I.coords);if(P!=="all"){const I=parseInt(P);K=K.filter(z=>z.distance<=I)}if(x.trim()){const I=x.toLowerCase();K=K.filter(z=>z.name?.toLowerCase().includes(I)||z.address?.toLowerCase().includes(I))}K.sort((I,z)=>I.distance-z.distance),m(K),K.length>0&&(!d||!K.find(I=>I.id===d.id))&&p(K[0])},[n,i,d,x,P]),R.useEffect(()=>{if(!x.trim()||x.length<2){L([]),W(!1);return}const K=x.toLowerCase(),I=i.filter(z=>z.name?.toLowerCase().includes(K)||z.address?.toLowerCase().includes(K)).slice(0,5).map(z=>({id:z.id,name:z.name,address:z.address,type:z.name?.toLowerCase().includes(K)?"name":"address"}));L(I),W(I.length>0),N(-1)},[x,i]);function D(K){return K?K.coordinates?.latitude&&K.coordinates?.longitude?{latitude:Number(K.coordinates.latitude),longitude:Number(K.coordinates.longitude)}:K.latitude&&K.longitude?{latitude:Number(K.latitude),longitude:Number(K.longitude)}:K.lat&&K.lng?{latitude:Number(K.lat),longitude:Number(K.lng)}:null:null}const j=K=>{K.phone&&(window.location.href=`tel:${K.phone}`)},F=K=>{const I=D(K);if(I&&n){const z=`https://www.google.com/maps/dir/${n.latitude},${n.longitude}/${I.latitude},${I.longitude}`;window.open(z,"_blank")}},M=K=>{p(K)},Z=K=>{(K.vendorId||K.id)&&t(`/vendor/${K.vendorId||K.id}`)},ue=K=>{y(K),N(-1)},pe=K=>{y(K.name),W(!1),N(-1);const I=i.find(z=>z.id===K.id);I&&(p(I),setTimeout(()=>{const z=document.getElementById(`pharmacy-${I.id}`);z&&z.scrollIntoView({behavior:"smooth",block:"center"})},100))},fe=()=>{Y.length>0&&x.length>=2&&W(!0)},te=()=>{setTimeout(()=>{W(!1),N(-1)},200)},H=K=>{if(!(!O||Y.length===0))switch(K.key){case"ArrowDown":K.preventDefault(),N(I=>I<Y.length-1?I+1:0);break;case"ArrowUp":K.preventDefault(),N(I=>I>0?I-1:Y.length-1);break;case"Enter":K.preventDefault(),A>=0&&A<Y.length&&pe(Y[A]);break;case"Escape":W(!1),N(-1);break}};if(l||a)return c.jsx("div",{className:"min-h-screen bg-gray-50 w-full px-0 py-6",children:c.jsxs("div",{className:"w-full md:max-w-md md:mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Xd,{className:"h-5 w-5"})}),c.jsx("h1",{className:"text-[25px] font-light text-gray-900 dark:text-white",children:r("nearby_pharmacies","Nearby Pharmacies")})]}),c.jsx($6e,{})]})});const ie=()=>c.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:c.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Xd,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("div",{className:"text-[18px] font-light tracking-tight",children:r("nearby_pharmacies","Nearby Pharmacies")}),c.jsx("div",{className:"text-[12px] text-gray-400",children:n?r("pharmacies_found_near_you","{count} found near you").replace("{count}",g.length):r("loading_location","Loading location...")})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>S(!b),className:"p-2 rounded-full border border-zinc-200 bg-white hover:bg-sky-50 hover:scale-110 active:scale-95 transition-all duration-200","aria-label":r("filter_pharmacies","Filter pharmacies"),children:c.jsx(wR,{className:"w-5 h-5 text-sky-600"})})})]})});return c.jsxs(c.Fragment,{children:[mi.createPortal(c.jsx(ie,{}),document.body),c.jsxs("div",{className:"min-h-screen bg-gray dark:bg-gray-900 pt-24 md:pt-0",children:[c.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-50 dark:border-gray-700 mx-auto px-4 py-4 sticky top-0 z-50 hidden md:block",children:c.jsx("div",{className:"max-w-md mx-auto",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:c.jsx(Xd,{className:"h-5 w-5 text-gray-900 dark:text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-[20px] font-light tracking-tight text-gray-900 dark:text-white",children:r("nearby_pharmacies","Nearby Pharmacies")}),c.jsx("p",{className:"text-[12px] text-gray-400 dark:text-gray-500",children:n?r("pharmacies_found_near_you_detailed","{count} pharmacies found near you").replace("{count}",g.length):r("loading_location","Loading location...")})]})]})})}),c.jsxs("div",{className:"w-full px-0 py-6 md:max-w-md md:mx-auto md:px-4",children:[c.jsx("div",{className:"bg-gray dark:bg-transparent rounded-lg p-4 mb-4 border border-sky-300 dark:border-gray-600 dark:border-gray-600",children:c.jsx("div",{className:"flex items-center gap-3",children:n?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r("your_location","Your Location")}),c.jsx("p",{className:"text-xs text-gray-600 truncate dark:text-gray-400",children:s})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a?r("getting_your_location","Getting your location..."):r("location_access_needed","Location access needed")}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a?r("allow_location_access_etas","Please allow location access for accurate ETAs"):r("enable_location_services","Enable location services to see nearby pharmacies")})]})]})})}),c.jsxs("div",{className:"dark:bg-transparent rounded-lg p-4 border mb-4 border-sky-300 dark:border-gray-600 dark:border-gray-600",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1 relative bg-transparent",children:[c.jsx(jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx("input",{type:"text",placeholder:r("search_pharmacies","Search pharmacies..."),value:x,onChange:K=>ue(K.target.value),onFocus:fe,onBlur:te,onKeyDown:H,className:"w-full pl-10 pr-4 py-2 border-b bg-transparent border-gray-300 dark:border-gray-600 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoComplete:"off"}),O&&x.length>=2&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto animate-fade-in",children:[Y.length>0?Y.map((K,I)=>c.jsx("button",{onClick:()=>pe(K),className:`w-full text-left px-4 py-3 focus:outline-none transition-colors duration-200 border-b border-gray-100 dark:border-gray-700 last:border-b-0 animate-fadeInUp ${I===A?"bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-gray-600 dark:border-gray-600":"hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:bg-blue-50 dark:focus:bg-blue-900/20"}`,style:{animationDelay:`${I*.05}s`},children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors duration-200 ${I===A?"bg-blue-200 dark:bg-blue-800":"bg-blue-100 dark:bg-blue-900"}`,children:c.jsx(Wu,{className:`h-4 w-4 ${I===A?"text-blue-700 dark:text-blue-300":"text-blue-600 dark:text-blue-400"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:K.type==="name"?c.jsx("span",{children:K.name.split(new RegExp(`(${x})`,"gi")).map((z,X)=>z.toLowerCase()===x.toLowerCase()?c.jsx("span",{className:"bg-sky-200 px-1 rounded",children:z},X):z)}):K.name}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1",children:K.type==="address"?c.jsx("span",{children:K.address.split(new RegExp(`(${x})`,"gi")).map((z,X)=>z.toLowerCase()===x.toLowerCase()?c.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:z},X):z)}):K.address})]}),c.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium flex-shrink-0",children:K.type==="name"?r("name","Name"):r("address","Address")})]})},K.id)):c.jsxs("div",{className:"px-4 py-6 text-center text-gray-500 dark:text-gray-400 animate-fade-in",children:[c.jsx(Wu,{className:"h-8 w-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),c.jsx("p",{className:"text-[12px]",children:r("no_pharmacies_found","No pharmacies found")}),c.jsx("p",{className:"text-[10px] mt-1",children:r("try_different_search","Try a different search term")})]}),Y.length>0&&c.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-[12px] text-gray-400 dark:text-gray-500 text-center",children:r("keyboard_navigation_hint","Use ↑↓ arrow keys to navigate, Enter to select, Esc to close")})]})]}),c.jsx("button",{onClick:()=>S(!b),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${b?"bg-blue-500 text-white border-blue-500 dark:border-gray-600":"text-gray-700 dark:text-gray-300"}`,children:c.jsx(wR,{className:"h-4 w-4"})})]}),b&&c.jsxs("div",{className:" pt-3",children:[c.jsx("p",{className:"text-[14px] font-medium text-gray-700 dark:text-gray-300 mb-2",children:r("distance","Distance")}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:"all",label:"All"},{value:"5",label:"Within 5km"},{value:"10",label:"Within 10km"},{value:"20",label:"Within 20km"}].map(K=>c.jsx("button",{onClick:()=>T(K.value),className:`px-3 py-1 rounded-full text-[12px] transition-colors ${P===K.value?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:K.label},K.value))})]})]}),c.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg mb-4 shadow-sm overflow-hidden",children:c.jsxs("div",{className:"h-80 bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 relative",children:[c.jsx("div",{className:"absolute inset-0 opacity-10",children:c.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("defs",{children:c.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:c.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#6B7280",strokeWidth:"1"})})}),c.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),c.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 320",children:[c.jsx("path",{d:"M0 160 Q200 120 400 160",stroke:"#E5E7EB",strokeWidth:"8",fill:"none"}),c.jsx("path",{d:"M200 0 Q200 160 200 320",stroke:"#E5E7EB",strokeWidth:"6",fill:"none"}),c.jsx("path",{d:"M0 80 Q100 60 200 80",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"}),c.jsx("path",{d:"M200 240 Q300 220 400 240",stroke:"#F3F4F6",strokeWidth:"4",fill:"none"})]}),n&&c.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-4 h-4 bg-black rounded-full border-2 border-white shadow-lg animate-pulse"}),c.jsx("div",{className:"absolute -inset-2 bg-blue-400 rounded-full opacity-30 animate-ping"})]}),c.jsx("span",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs bg-white px-2 py-1 rounded shadow-md whitespace-nowrap",children:r("you_are_here","You are here")})]}),g.slice(0,8).map((K,I)=>{const z=I*45*(Math.PI/180),X=80+I*10,J=50+Math.cos(z)*X/4,se=50+Math.sin(z)*X/6;return c.jsx("div",{className:`absolute transform -translate-x-1/2 -translate-y-full cursor-pointer transition-all duration-200 hover:scale-125 z-20 ${d?.id===K.id?"scale-125 z-30":""}`,style:{left:`${Math.max(10,Math.min(90,J))}%`,top:`${Math.max(15,Math.min(85,se))}%`},onClick:()=>M(K),children:c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg border-2 border-white transition-colors ${d?.id===K.id?"bg-red-500 shadow-red-200":"bg-blue-500 shadow-blue-200"}`,children:I+1}),c.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-lg",children:[c.jsx(Qd,{name:K.name,isVerified:K.isVerified,className:"font-medium",iconClassName:"h-3.5 w-3.5 text-emerald-400"}),c.jsxs("div",{className:"text-gray-300",children:[K.eta?.formatted," • ",K.distance?.toFixed(1),"km"]}),c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"})]})})]})},K.id||I)}),c.jsx("div",{className:"absolute top-4 left-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wu,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r("pharmacy_locations","Pharmacy Locations")}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:r("pharmacies_sorted_by_distance","{count} pharmacies • Sorted by distance").replace("{count}",g.length)})]})]})}),c.jsx("div",{className:"absolute bottom-4 right-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:c.jsxs("div",{className:"space-y-2 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-black rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r("your_location","Your location")})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r("pharmacy","Pharmacy")})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full border border-white dark:border-gray-300 dark:border-gray-600"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r("selected","Selected")})]})]})})]})}),d&&c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-3 mb-4 shadow-sm border border-blue-200 dark:border-gray-600 dark:border-gray-600",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-lg flex-shrink-0",children:g.findIndex(K=>K.id===d.id)+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx(Qd,{name:d.name,isVerified:d.isVerified,className:"font-semibold text-gray-900 dark:text-white text-sm truncate",iconClassName:"h-4 w-4 text-emerald-500"}),c.jsx("p",{className:"text-xs text-gray-600 mb-2 truncate",children:d.address}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-700 rounded-full px-2 py-1",children:[c.jsx(Sk,{className:"h-3 w-3 text-blue-500 flex-shrink-0"}),c.jsx("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:d.eta?.formatted||r("calculating","Calculating...")})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-700 rounded-full px-2 py-1",children:[c.jsx(Wu,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),c.jsxs("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:[d.distance?.toFixed(1)||"0"," km"]})]}),d.phone&&c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-700 rounded-full px-2 py-1",children:[c.jsx(b2,{className:"h-3 w-3 text-purple-500 flex-shrink-0"}),c.jsx("span",{className:"font-normal truncate max-w-[80px]",style:{fontSize:"10px !important"},children:d.phone})]})]})]})]}),c.jsx("span",{className:"bg-blue-600 text-white text-xs px-1 py-1 rounded-full font-normal flex-shrink-0 ml-2",children:r("closest","Closest")})]}),c.jsxs("div",{className:"flex gap-1.5",children:[c.jsxs("button",{onClick:()=>F(d),className:"flex-1 bg-blue-600 text-white py-1 px-2 text-xs rounded-full font-normal hover:bg-blue-700 transition-all duration-200 flex items-center justify-center gap-1 btn-interactive",children:[c.jsx(B5,{className:"h-3 w-3"}),c.jsx("span",{className:"hidden sm:inline",style:{fontSize:"10px !important"},children:r("get_directions","Get Directions")}),c.jsx("span",{className:"sm:hidden",style:{fontSize:"10px !important"},children:r("get_directions","Get Directions")})]}),d.phone&&c.jsxs("button",{onClick:()=>j(d),className:"bg-green-600 text-white py-2 px-3 rounded-full font-medium hover:bg-green-700 transition-all duration-200 flex items-center justify-center gap-1 btn-interactive",title:r("call_pharmacy","Call pharmacy"),children:[c.jsx(b2,{className:"h-3 w-3"}),c.jsx("span",{className:"hidden sm:inline",style:{fontSize:"10px !important"},children:r("call","Call")})]}),c.jsxs("button",{onClick:()=>Z(d),className:"flex-1 bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 py-2 px-3 rounded-full font-normal text-xs hover:bg-blue-50 dark:hover:bg-gray-600 transition-all duration-200 border border-blue-200 dark:border-gray-600 btn-interactive",children:[c.jsx("span",{className:"hidden sm:inline",style:{fontSize:"10px !important"},children:r("view_products","View Products")}),c.jsx("span",{className:"sm:hidden",style:{fontSize:"10px !important"},children:r("view_products","View Products")})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-[18px] font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:x?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:r("search_results","Search Results")}),c.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full animate-pulse-slow",children:['"',x,'"']})]}):r("all_pharmacies","All Pharmacies")}),c.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r("pharmacies_found_count","{count} found").replace("{count}",g.length)})]}),g.length===0?c.jsxs("div",{className:"bg-white-10 rounded-lg p-8 text-center",children:[c.jsx(Wu,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x?r("no_pharmacies_found_search","No pharmacies found matching your search"):r("no_pharmacies_found_general","No pharmacies found")}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:x?r("try_adjusting_search","Try adjusting your search terms"):r("try_adjusting_location","Try adjusting your location or check back later")}),x&&c.jsx("button",{onClick:()=>y(""),className:"mt-3 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium hover:scale-105 active:scale-95 transition-all duration-200 px-3 py-1 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20",children:r("clear_search","Clear search")})]}):g.map((K,I)=>c.jsx("div",{id:`pharmacy-${K.id}`,className:`bg-white dark:bg-transparent rounded-lg p-3 border border-gray-200 dark:border-gray-600 dark:border-gray-600 cursor-pointer transition-all duration-200 card-interactive animate-fadeInUp ${d?.id===K.id?"border-sky-600 dark:border-sky-600 bg-blue-50 dark:bg-blue-900/30 scale-102":"border-gray-200 dark:border-gray-600 dark:border-gray-600 hover:border-gray-300 dark:border-gray-600 dark:hover:border-gray-500 hover:shadow-md"}`,style:{animationDelay:`${I*.1}s`},onClick:()=>M(K),children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[c.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-[12px] font-bold shadow-sm flex-shrink-0 ${d?.id===K.id?"bg-blue-500":"bg-gray-400"}`,children:I+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(Qd,{name:K.name,isVerified:K.isVerified,className:"font-semibold text-gray-900 dark:text-white text-sm truncate",iconClassName:"h-3.5 w-3.5 text-emerald-500"}),I===0&&c.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-0.5 rounded-full font-normal flex-shrink-0",children:r("closest","Closest")})]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 truncate",children:K.address}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[c.jsx(Sk,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:K.eta?.formatted||r("calculating","Calculating...")})]}),c.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[c.jsx(Wu,{className:"h-3 w-3 flex-shrink-0"}),c.jsxs("span",{className:"font-normal whitespace-nowrap",style:{fontSize:"10px !important"},children:[K.distance?.toFixed(1)||"0"," km"]})]})]})]})]}),c.jsx("button",{onClick:z=>{z.stopPropagation(),F(K)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full flex-shrink-0 ml-2",title:r("get_directions","Get directions"),children:c.jsx(B5,{className:"h-4 w-4"})})]})},K.id||I))]}),O&&Y.length>0&&c.jsx("div",{className:"absolute z-50 w-full max-w-md mx-auto mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:c.jsx("div",{className:"flex flex-col divide-y divide-gray-200 dark:divide-gray-600",children:Y.map(K=>c.jsxs("button",{onClick:()=>pe(K),className:"flex items-center justify-between w-full px-4 py-2 text-left text-gray-900 dark:text-white hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Wu,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),c.jsxs("div",{className:"flex flex-col text-sm",children:[c.jsx("span",{className:"font-medium",children:K.name}),c.jsx("span",{className:"text-gray-500 dark:text-gray-400 truncate",children:K.address})]})]}),c.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:g.findIndex(I=>I.id===K.id)+1})]},K.id))})})]})]})]})}function H6e(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-white dark:bg-gray-900",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 text-gray-500 dark:text-gray-400",children:[c.jsx("img",{src:"/iconLoader.svg",alt:"Loading",className:"h-12 w-12 animate-spin"}),c.jsx("p",{className:"text-sm tracking-wide uppercase",children:"Preparing your experience…"})]})})}const W6e=({className:t="w-8 h-8"})=>c.jsx("img",{src:"/PharmAIIcon.svg",alt:"PharmAI",className:t});function G6e(){const t=Jn(),e=hl(),{t:r}=Ds(),n=R.useRef(null),[s,a]=R.useState(()=>window.innerWidth<=768);return R.useEffect(()=>{const i="ai-chat-floating-animations";if(document.getElementById(i))return;const o=document.createElement("style");o.id=i,o.textContent=`
      @keyframes aiChatFloat {
        0%, 100% { transform: translate3d(0, 0, 0) rotate(0deg); }
        25% { transform: translate3d(0, -8px, 0) rotate(1deg); }
        50% { transform: translate3d(0, -4px, 0) rotate(0deg); }
        75% { transform: translate3d(0, -8px, 0) rotate(-1deg); }
      }
      @keyframes aiChatRotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes aiChatGradientBorder {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      @keyframes aiChatPulseRing {
        0% { transform: scale(0.8); opacity: 0.6; }
        50% { transform: scale(1.2); opacity: 0.3; }
        100% { transform: scale(1.6); opacity: 0; }
      }
      @keyframes aiChatGlow {
        0%, 100% { opacity: 0.3; transform: scale(1); filter: blur(8px); }
        50% { opacity: 0.6; transform: scale(1.1); filter: blur(12px); }
      }
      @keyframes aiChatShimmer {
        0% { transform: translateX(-100%) skewX(-12deg); }
        100% { transform: translateX(200%) skewX(-12deg); }
      }
      .ai-chat-float {
        animation: aiChatFloat 8s ease-in-out infinite;
      }
      .ai-chat-rotate {
        animation: aiChatRotate 20s linear infinite;
      }
      .ai-chat-gradient-border {
        background: linear-gradient(45deg, #0ea5e9, #3b82f6, #6366f1, #8b5cf6, #06b6d4, #0ea5e9);
        background-size: 400% 400%;
        animation: aiChatGradientBorder 4s ease infinite;
      }
      .ai-chat-soft-glow {
        animation: aiChatGlow 6s ease-in-out infinite;
      }
      .ai-chat-pulse-ring {
        animation: aiChatPulseRing 4s ease-out infinite;
      }
      .ai-chat-shimmer {
        animation: aiChatShimmer 3s ease-in-out infinite;
      }
    `,document.head.appendChild(o)},[]),R.useEffect(()=>{const i=()=>{a(window.innerWidth<=768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e.pathname==="/ai-chat"?null:c.jsxs("button",{ref:n,onClick:()=>t("/ai-chat"),className:"fixed bottom-44 right-4 z-50 w-14 h-14 rounded-2xl overflow-hidden group cursor-pointer transition-all duration-500 hover:scale-110","aria-label":r("ai_chat","AI Chat"),children:[c.jsx("div",{className:"relative w-full h-full p-0.5 rounded-full ai-chat-gradient-border",children:c.jsxs("div",{className:"relative w-full h-full bg-white/0 rounded-full",children:[c.jsx("img",{src:"/PharmBG.svg",alt:"",className:"absolute inset-0 w-full h-full object-cover ai-chat-rotate"}),c.jsx("div",{className:"absolute inset-0 bg-black/0"}),c.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:c.jsx(W6e,{className:"w-8 h-8 transition-all duration-300 group-hover:scale-110 drop-shadow-lg"})})]})}),c.jsxs("div",{className:"absolute -top-14 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-gray-900/95 via-gray-800/95 to-gray-900/95 backdrop-blur-xl text-white text-xs px-4 py-2 rounded-xl opacity-0 group-hover:opacity-100 transition-all duration-300 whitespace-nowrap border border-white/20 shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-sky-400 to-blue-500 rounded-full animate-pulse"}),c.jsx("span",{className:"font-medium",children:r("ai_chat","AI Chat")})]}),c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900/95"})]})]})}function K6e(){return c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-700",children:c.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsx("div",{className:"w-[72px] h-[25px] bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"text-[18px] font-light font-poppins leading-none",children:c.jsx("div",{className:"w-32 h-5 bg-gray-200 dark:bg-gray-700 rounded-full"})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})}),c.jsxs("div",{className:"min-h-screen bg-white/80 dark:bg-gray-900/80 backdrop-blur-md w-full max-w-md mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pt-24 md:pt-8 pb-28",children:[c.jsxs("div",{className:"hidden md:flex sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md pb-2 pt-4 items-center gap-3 animate-slide-down-fade",children:[c.jsx("div",{className:"w-[72px] h-[25px] bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"w-40 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"ml-auto flex items-center gap-2",children:c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"})})]}),c.jsx("div",{className:"w-full mx-auto mt-6",children:c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("aside",{className:"animate-fade-in-left",children:[c.jsxs("div",{className:"border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-5 mb-4 w-full flex flex-col items-start card-interactive",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-gray-700 flex items-center justify-center mb-2",children:c.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded-full"})}),c.jsx("div",{className:"w-48 h-6 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"w-40 h-4 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"w-28 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]}),c.jsx("div",{className:"w-full mb-4",children:c.jsx("div",{className:"w-full h-[37px] bg-gray-200 dark:bg-gray-700 rounded-full"})})]}),c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-4 mb-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"w-32 h-5 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"w-16 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"w-16 h-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((t,e)=>c.jsxs("div",{className:"rounded-2xl border border-zinc-200 dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-800 shadow-sm",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"h-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded-full flex-shrink-0"})]},e))})]})]})})]})]})}function Y6e(){return c.jsxs("div",{className:"animate-pulse",children:[c.jsxs("div",{className:"sticky top-0 z-20 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md pb-2 pt-4 -mx-4 sm:-mx-5 md:-mx-8 lg:-mx-12 xl:-mx-0 px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 items-center gap-3 animate-slide-down-fade hidden md:flex",children:[c.jsx("div",{className:"w-[72px] h-[25px] bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"w-48 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsx("div",{className:"ml-auto flex items-center gap-2",children:c.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"})})]}),c.jsx("div",{className:"min-h-screen bg-white/80 dark:bg-gray-900/80 backdrop-blur-md w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto px-4 sm:px-5 md:px-8 lg:px-12 xl:px-0 pt-24 md:pt-8 pb-28",children:c.jsx("div",{className:"w-full mx-auto mt-6",children:c.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-3 gap-6",children:[c.jsxs("aside",{className:"md:col-span-1 md:self-start md:sticky md:top-20 animate-fade-in-left",children:[c.jsxs("div",{className:"border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-5 mb-4 w-full flex flex-col items-start card-interactive",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-gray-700 flex items-center justify-center mb-2",children:c.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded-full"})}),c.jsx("div",{className:"w-48 h-6 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"w-40 h-4 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"w-28 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded"}),c.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]}),c.jsx("div",{className:"w-full mb-4",children:c.jsx("div",{className:"w-full h-[37px] bg-gray-200 dark:bg-gray-700 rounded-full"})})]}),c.jsxs("div",{className:"md:col-span-2 animate-fade-in-up",children:[c.jsxs("div",{className:"border border-zinc-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 shadow-sm p-4 mb-4 flex items-center justify-between md:sticky md:top-20 md:bg-white/90 md:dark:bg-gray-800/90 md:backdrop-blur-sm md:z-20",children:[c.jsxs("div",{children:[c.jsx("div",{className:"w-40 h-5 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"w-16 h-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"md:max-h-[calc(100vh-12rem)] md:overflow-y-auto md:pr-4",children:c.jsx("div",{className:"space-y-3 px-0",children:Array.from({length:5}).map((t,e)=>c.jsxs("div",{className:"rounded-2xl border border-zinc-200 dark:border-gray-600 p-3 flex items-center gap-3 bg-white dark:bg-gray-800 shadow-sm",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-full"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-700 rounded-full mb-1"}),c.jsx("div",{className:"h-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full"})]}),c.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded-full flex-shrink-0"})]},e))})})]})]})})})]})}const HN=R.createContext({});function WN(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const GN=typeof window<"u",gH=GN?R.useLayoutEffect:R.useEffect,j4=R.createContext(null);function KN(t,e){t.indexOf(e)===-1&&t.push(e)}function YN(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const uf=(t,e,r)=>r>e?e:r<t?t:r;let XN=()=>{};const df={},xH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function yH(t){return typeof t=="object"&&t!==null}const vH=t=>/^0[^.\s]+$/u.test(t);function QN(t){let e;return()=>(e===void 0&&(e=t()),e)}const Mc=t=>t,X6e=(t,e)=>r=>e(t(r)),Ly=(...t)=>t.reduce(X6e),U2=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class JN{constructor(){this.subscriptions=[]}add(e){return KN(this.subscriptions,e),()=>YN(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const cd=t=>t*1e3,ud=t=>t/1e3;function wH(t,e){return e?t*(1e3/e):0}const bH=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Q6e=1e-7,J6e=12;function Z6e(t,e,r,n,s){let a,i,o=0;do i=e+(r-e)/2,a=bH(i,n,s)-t,a>0?r=i:e=i;while(Math.abs(a)>Q6e&&++o<J6e);return i}function Fy(t,e,r,n){if(t===e&&r===n)return Mc;const s=a=>Z6e(a,0,1,t,r);return a=>a===0||a===1?a:bH(s(a),e,n)}const _H=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kH=t=>e=>1-t(1-e),SH=Fy(.33,1.53,.69,.99),ZN=kH(SH),NH=_H(ZN),EH=t=>(t*=2)<1?.5*ZN(t):.5*(2-Math.pow(2,-10*(t-1))),eE=t=>1-Math.sin(Math.acos(t)),CH=kH(eE),AH=_H(eE),eke=Fy(.42,0,1,1),tke=Fy(0,0,.58,1),TH=Fy(.42,0,.58,1),rke=t=>Array.isArray(t)&&typeof t[0]!="number",IH=t=>Array.isArray(t)&&typeof t[0]=="number",nke={linear:Mc,easeIn:eke,easeInOut:TH,easeOut:tke,circIn:eE,circInOut:AH,circOut:CH,backIn:ZN,backInOut:NH,backOut:SH,anticipate:EH},ske=t=>typeof t=="string",bR=t=>{if(IH(t)){XN(t.length===4);const[e,r,n,s]=t;return Fy(e,r,n,s)}else if(ske(t))return nke[t];return t},uw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ake(t,e){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,p=!1,g=!1)=>{const x=g&&s?r:n;return p&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const ike=40;function PH(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=uw.reduce((T,O)=>(T[O]=ake(a),T),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:p,preRender:g,render:m,postRender:x}=i,y=()=>{const T=df.useManualTiming?s.timestamp:performance.now();r=!1,df.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(T-s.timestamp,ike),1)),s.timestamp=T,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),p.process(s),g.process(s),m.process(s),x.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(y))},b=()=>{r=!0,n=!0,s.isProcessing||t(y)};return{schedule:uw.reduce((T,O)=>{const W=i[O];return T[O]=(Y,L=!1,A=!1)=>(r||b(),W.schedule(Y,L,A)),T},{}),cancel:T=>{for(let O=0;O<uw.length;O++)i[uw[O]].cancel(T)},state:s,steps:i}}const{schedule:ra,cancel:Vh,state:fo,steps:l6}=PH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mc,!0);let Xw;function oke(){Xw=void 0}const Pl={now:()=>(Xw===void 0&&Pl.set(fo.isProcessing||df.useManualTiming?fo.timestamp:performance.now()),Xw),set:t=>{Xw=t,queueMicrotask(oke)}},jH=t=>e=>typeof e=="string"&&e.startsWith(t),tE=jH("--"),lke=jH("var(--"),rE=t=>lke(t)?cke.test(t.split("/*")[0].trim()):!1,cke=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},z2={...hg,transform:t=>uf(0,1,t)},dw={...hg,default:1},Qx=t=>Math.round(t*1e5)/1e5,nE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uke(t){return t==null}const dke=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sE=(t,e)=>r=>!!(typeof r=="string"&&dke.test(r)&&r.startsWith(t)||e&&!uke(r)&&Object.prototype.hasOwnProperty.call(r,e)),RH=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(nE);return{[t]:parseFloat(s),[e]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},fke=t=>uf(0,255,t),c6={...hg,transform:t=>Math.round(fke(t))},$0={test:sE("rgb","red"),parse:RH("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+c6.transform(t)+", "+c6.transform(e)+", "+c6.transform(r)+", "+Qx(z2.transform(n))+")"};function hke(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const h8={test:sE("#"),parse:hke,transform:$0.transform},Dy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),nh=Dy("deg"),dd=Dy("%"),qr=Dy("px"),pke=Dy("vh"),mke=Dy("vw"),_R={...dd,parse:t=>dd.parse(t)/100,transform:t=>dd.transform(t*100)},Hm={test:sE("hsl","hue"),parse:RH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+dd.transform(Qx(e))+", "+dd.transform(Qx(r))+", "+Qx(z2.transform(n))+")"},fi={test:t=>$0.test(t)||h8.test(t)||Hm.test(t),parse:t=>$0.test(t)?$0.parse(t):Hm.test(t)?Hm.parse(t):h8.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$0.transform(t):Hm.transform(t),getAnimatableNone:t=>{const e=fi.parse(t);return e.alpha=0,fi.transform(e)}},gke=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xke(t){return isNaN(t)&&typeof t=="string"&&(t.match(nE)?.length||0)+(t.match(gke)?.length||0)>0}const LH="number",FH="color",yke="var",vke="var(",kR="${}",wke=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $2(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=e.replace(wke,l=>(fi.test(l)?(n.color.push(a),s.push(FH),r.push(fi.parse(l))):l.startsWith(vke)?(n.var.push(a),s.push(yke),r.push(l)):(n.number.push(a),s.push(LH),r.push(parseFloat(l))),++a,kR)).split(kR);return{values:r,split:o,indexes:n,types:s}}function DH(t){return $2(t).values}function OH(t){const{split:e,types:r}=$2(t),n=e.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=e[i],s[i]!==void 0){const o=r[i];o===LH?a+=Qx(s[i]):o===FH?a+=fi.transform(s[i]):a+=s[i]}return a}}const bke=t=>typeof t=="number"?0:fi.test(t)?fi.getAnimatableNone(t):t;function _ke(t){const e=DH(t);return OH(t)(e.map(bke))}const Uh={test:xke,parse:DH,createTransformer:OH,getAnimatableNone:_ke};function u6(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function kke({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,a=0,i=0;if(!e)s=a=i=r;else{const o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;s=u6(l,o,t+1/3),a=u6(l,o,t),i=u6(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function fb(t,e){return r=>r>0?e:t}const ma=(t,e,r)=>t+(e-t)*r,d6=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},Ske=[h8,$0,Hm],Nke=t=>Ske.find(e=>e.test(t));function SR(t){const e=Nke(t);if(!e)return!1;let r=e.parse(t);return e===Hm&&(r=kke(r)),r}const NR=(t,e)=>{const r=SR(t),n=SR(e);if(!r||!n)return fb(t,e);const s={...r};return a=>(s.red=d6(r.red,n.red,a),s.green=d6(r.green,n.green,a),s.blue=d6(r.blue,n.blue,a),s.alpha=ma(r.alpha,n.alpha,a),$0.transform(s))},p8=new Set(["none","hidden"]);function Eke(t,e){return p8.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Cke(t,e){return r=>ma(t,e,r)}function aE(t){return typeof t=="number"?Cke:typeof t=="string"?rE(t)?fb:fi.test(t)?NR:Ike:Array.isArray(t)?MH:typeof t=="object"?fi.test(t)?NR:Ake:fb}function MH(t,e){const r=[...t],n=r.length,s=t.map((a,i)=>aE(a)(a,e[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function Ake(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=aE(t[s])(t[s],e[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function Tke(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],i=t.indexes[a][n[a]],o=t.values[i]??0;r[s]=o,n[a]++}return r}const Ike=(t,e)=>{const r=Uh.createTransformer(e),n=$2(t),s=$2(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?p8.has(t)&&!s.values.length||p8.has(e)&&!n.values.length?Eke(t,e):Ly(MH(Tke(n,s),s.values),r):fb(t,e)};function BH(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?ma(t,e,r):aE(t)(t,e)}const Pke=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ra.update(e,r),stop:()=>Vh(e),now:()=>fo.isProcessing?fo.timestamp:Pl.now()}},VH=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let a=0;a<s;a++)n+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},hb=2e4;function iE(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<hb;)e+=r,n=t.next(e);return e>=hb?1/0:e}function jke(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(iE(n),hb);return{type:"keyframes",ease:a=>n.next(s*a).value/e,duration:ud(s)}}const Rke=5;function UH(t,e,r){const n=Math.max(e-Rke,0);return wH(r-t(n),e-n)}const Ea={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},f6=.001;function Lke({duration:t=Ea.duration,bounce:e=Ea.bounce,velocity:r=Ea.velocity,mass:n=Ea.mass}){let s,a,i=1-e;i=uf(Ea.minDamping,Ea.maxDamping,i),t=uf(Ea.minDuration,Ea.maxDuration,ud(t)),i<1?(s=u=>{const d=u*i,p=d*t,g=d-r,m=m8(u,i),x=Math.exp(-p);return f6-g/m*x},a=u=>{const p=u*i*t,g=p*r+r,m=Math.pow(i,2)*Math.pow(u,2)*t,x=Math.exp(-p),y=m8(Math.pow(u,2),i);return(-s(u)+f6>0?-1:1)*((g-m)*x)/y}):(s=u=>{const d=Math.exp(-u*t),p=(u-r)*t+1;return-f6+d*p},a=u=>{const d=Math.exp(-u*t),p=(r-u)*(t*t);return d*p});const o=5/t,l=Dke(s,a,o);if(t=cd(t),isNaN(l))return{stiffness:Ea.stiffness,damping:Ea.damping,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:t}}}const Fke=12;function Dke(t,e,r){let n=r;for(let s=1;s<Fke;s++)n=n-t(n)/e(n);return n}function m8(t,e){return t*Math.sqrt(1-e*e)}const Oke=["duration","bounce"],Mke=["stiffness","damping","mass"];function ER(t,e){return e.some(r=>t[r]!==void 0)}function Bke(t){let e={velocity:Ea.velocity,stiffness:Ea.stiffness,damping:Ea.damping,mass:Ea.mass,isResolvedFromDuration:!1,...t};if(!ER(t,Mke)&&ER(t,Oke))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*uf(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ea.mass,stiffness:s,damping:a}}else{const r=Lke(t);e={...e,...r,mass:Ea.mass},e.isResolvedFromDuration=!0}return e}function pb(t=Ea.visualDuration,e=Ea.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:p,velocity:g,isResolvedFromDuration:m}=Bke({...r,velocity:-ud(r.velocity||0)}),x=g||0,y=u/(2*Math.sqrt(l*d)),b=i-a,S=ud(Math.sqrt(l/d)),P=Math.abs(b)<5;n||(n=P?Ea.restSpeed.granular:Ea.restSpeed.default),s||(s=P?Ea.restDelta.granular:Ea.restDelta.default);let T;if(y<1){const W=m8(S,y);T=Y=>{const L=Math.exp(-y*S*Y);return i-L*((x+y*S*b)/W*Math.sin(W*Y)+b*Math.cos(W*Y))}}else if(y===1)T=W=>i-Math.exp(-S*W)*(b+(x+S*b)*W);else{const W=S*Math.sqrt(y*y-1);T=Y=>{const L=Math.exp(-y*S*Y),A=Math.min(W*Y,300);return i-L*((x+y*S*b)*Math.sinh(A)+W*b*Math.cosh(A))/W}}const O={calculatedDuration:m&&p||null,next:W=>{const Y=T(W);if(m)o.done=W>=p;else{let L=W===0?x:0;y<1&&(L=W===0?cd(x):UH(T,W,Y));const A=Math.abs(L)<=n,N=Math.abs(i-Y)<=s;o.done=A&&N}return o.value=o.done?i:Y,o},toString:()=>{const W=Math.min(iE(O),hb),Y=VH(L=>O.next(W*L).value,W,30);return W+"ms "+Y},toTransition:()=>{}};return O}pb.applyToOptions=t=>{const e=jke(t,100,pb);return t.ease=e.ease,t.duration=cd(e.duration),t.type="keyframes",t};function g8({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:u=.5,restSpeed:d}){const p=t[0],g={done:!1,value:p},m=A=>o!==void 0&&A<o||l!==void 0&&A>l,x=A=>o===void 0?l:l===void 0||Math.abs(o-A)<Math.abs(l-A)?o:l;let y=r*e;const b=p+y,S=i===void 0?b:i(b);S!==b&&(y=S-p);const P=A=>-y*Math.exp(-A/n),T=A=>S+P(A),O=A=>{const N=P(A),D=T(A);g.done=Math.abs(N)<=u,g.value=g.done?S:D};let W,Y;const L=A=>{m(g.value)&&(W=A,Y=pb({keyframes:[g.value,x(g.value)],velocity:UH(T,A,g.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return L(0),{calculatedDuration:null,next:A=>{let N=!1;return!Y&&W===void 0&&(N=!0,O(A),L(A)),W!==void 0&&A>=W?Y.next(A-W):(!N&&O(A),g)}}}function Vke(t,e,r){const n=[],s=r||df.mix||BH,a=t.length-1;for(let i=0;i<a;i++){let o=s(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||Mc:e;o=Ly(l,o)}n.push(o)}return n}function Uke(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const a=t.length;if(XN(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Vke(e,n,s),l=o.length,u=d=>{if(i&&d<t[0])return e[0];let p=0;if(l>1)for(;p<t.length-2&&!(d<t[p+1]);p++);const g=U2(t[p],t[p+1],d);return o[p](g)};return r?d=>u(uf(t[0],t[a-1],d)):u}function zke(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=U2(0,e,n);t.push(ma(r,1,s))}}function $ke(t){const e=[0];return zke(e,t.length-1),e}function qke(t,e){return t.map(r=>r*e)}function Hke(t,e){return t.map(()=>e||TH).splice(0,t.length-1)}function Jx({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=rke(n)?n.map(bR):bR(n),a={done:!1,value:e[0]},i=qke(r&&r.length===e.length?r:$ke(e),t),o=Uke(i,e,{ease:Array.isArray(s)?s:Hke(e,s)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const Wke=t=>t!==null;function oE(t,{repeat:e,repeatType:r="loop"},n,s=1){const a=t.filter(Wke),o=s<0||e&&r!=="loop"&&e%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const Gke={decay:g8,inertia:g8,tween:Jx,keyframes:Jx,spring:pb};function zH(t){typeof t.type=="string"&&(t.type=Gke[t.type])}class lE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const Kke=t=>t/100;class cE extends lE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Pl.now()&&this.tick(Pl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;zH(e);const{type:r=Jx,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=e;let{keyframes:o}=e;const l=r||Jx;l!==Jx&&typeof o[0]!="number"&&(this.mixKeyframes=Ly(Kke,BH(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=iE(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:p,repeatType:g,repeatDelay:m,type:x,onUpdate:y,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let T=this.currentTime,O=n;if(p){const A=Math.min(this.currentTime,s)/o;let N=Math.floor(A),D=A%1;!D&&A>=1&&(D=1),D===1&&N--,N=Math.min(N,p+1),!!(N%2)&&(g==="reverse"?(D=1-D,m&&(D-=m/o)):g==="mirror"&&(O=i)),T=uf(0,1,D)*o}const W=P?{done:!1,value:d[0]}:O.next(T);a&&(W.value=a(W.value));let{done:Y}=W;!P&&l!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return L&&x!==g8&&(W.value=oE(d,this.options,b,this.speed)),y&&y(W.value),L&&this.finish(),W}then(e,r){return this.finished.then(e,r)}get duration(){return ud(this.calculatedDuration)}get time(){return ud(this.currentTime)}set time(e){e=cd(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pl.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=ud(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Pke,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Yke(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const q0=t=>t*180/Math.PI,x8=t=>{const e=q0(Math.atan2(t[1],t[0]));return y8(e)},Xke={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:x8,rotateZ:x8,skewX:t=>q0(Math.atan(t[1])),skewY:t=>q0(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},y8=t=>(t=t%360,t<0&&(t+=360),t),CR=x8,AR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),TR=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Qke={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:AR,scaleY:TR,scale:t=>(AR(t)+TR(t))/2,rotateX:t=>y8(q0(Math.atan2(t[6],t[5]))),rotateY:t=>y8(q0(Math.atan2(-t[2],t[0]))),rotateZ:CR,rotate:CR,skewX:t=>q0(Math.atan(t[4])),skewY:t=>q0(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function v8(t){return t.includes("scale")?1:0}function w8(t,e){if(!t||t==="none")return v8(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=Qke,s=r;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Xke,s=o}if(!s)return v8(e);const a=n[e],i=s[1].split(",").map(Zke);return typeof a=="function"?a(i):i[a]}const Jke=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return w8(r,e)};function Zke(t){return parseFloat(t.trim())}const pg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mg=new Set(pg),IR=t=>t===hg||t===qr,e8e=new Set(["x","y","z"]),t8e=pg.filter(t=>!e8e.has(t));function r8e(t){const e=[];return t8e.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const rp={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>w8(e,"x"),y:(t,{transform:e})=>w8(e,"y")};rp.translateX=rp.x;rp.translateY=rp.y;const np=new Set;let b8=!1,_8=!1,k8=!1;function $H(){if(_8){const t=Array.from(np).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=r8e(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}_8=!1,b8=!1,np.forEach(t=>t.complete(k8)),np.clear()}function qH(){np.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_8=!0)})}function n8e(){k8=!0,qH(),$H(),k8=!1}class uE{constructor(e,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(np.add(this),b8||(b8=!0,ra.read(qH),ra.resolveKeyframes($H))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const a=s?.get(),i=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=i),s&&a===void 0&&s.set(e[0])}Yke(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),np.delete(this)}cancel(){this.state==="scheduled"&&(np.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const s8e=t=>t.startsWith("--");function a8e(t,e,r){s8e(e)?t.style.setProperty(e,r):t.style[e]=r}const i8e=QN(()=>window.ScrollTimeline!==void 0),o8e={};function l8e(t,e){const r=QN(t);return()=>o8e[e]??r()}const HH=l8e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yx=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,PR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yx([0,.65,.55,1]),circOut:yx([.55,0,1,.45]),backIn:yx([.31,.01,.66,-.59]),backOut:yx([.33,1.53,.69,.99])};function WH(t,e){if(t)return typeof t=="function"?HH()?VH(t,e):"ease-out":IH(t)?yx(t):Array.isArray(t)?t.map(r=>WH(r,e)||PR.easeOut):PR[t]}function c8e(t,e,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[e]:r};l&&(d.offset=l);const p=WH(o,s);Array.isArray(p)&&(d.easing=p);const g={delay:n,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(d,g)}function GH(t){return typeof t=="function"&&"applyToOptions"in t}function u8e({type:t,...e}){return GH(t)&&HH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class d8e extends lE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=e,XN(typeof e.type!="string");const u=u8e(e);this.animation=c8e(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=oE(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):a8e(r,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ud(Number(e))}get time(){return ud(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=cd(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&i8e()?(this.animation.timeline=e,Mc):r(this)}}const KH={anticipate:EH,backInOut:NH,circInOut:AH};function f8e(t){return t in KH}function h8e(t){typeof t.ease=="string"&&f8e(t.ease)&&(t.ease=KH[t.ease])}const jR=10;class p8e extends d8e{constructor(e){h8e(e),zH(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const o=new cE({...i,autoplay:!1}),l=cd(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-jR).value,o.sample(l).value,jR),o.stop()}}const RR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Uh.test(t)||t==="0")&&!t.startsWith("url("));function m8e(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function g8e(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],i=RR(s,e),o=RR(a,e);return!i||!o?!1:m8e(t)||(r==="spring"||GH(r))&&n}function S8(t){t.duration=0,t.type}const x8e=new Set(["opacity","clipPath","filter","transform"]),y8e=QN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v8e(t){const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return y8e()&&r&&x8e.has(r)&&(r!=="transform"||!u)&&!l&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const w8e=40;class b8e extends lE{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:l,motionValue:u,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pl.now();const g={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:l,motionValue:u,element:d,...p},m=d?.KeyframeResolver||uE;this.keyframeResolver=new m(o,(x,y,b)=>this.onKeyframesResolved(x,y,g,!b),l,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:l,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Pl.now(),g8e(e,a,i,o)||((df.instantAnimations||!l)&&d?.(oE(e,n,r)),e[0]=e[e.length-1],S8(n),n.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>w8e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},m=!u&&v8e(g)?new p8e({...g,element:g.motionValue.owner.current}):new cE(g);m.finished.then(()=>this.notifyFinished()).catch(Mc),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),n8e()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const _8e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function k8e(t){const e=_8e.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function YH(t,e,r=1){const[n,s]=k8e(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const i=a.trim();return xH(i)?parseFloat(i):i}return rE(s)?YH(s,e,r+1):s}function dE(t,e){return t?.[e]??t?.default??t}const XH=new Set(["width","height","top","left","right","bottom",...pg]),S8e={test:t=>t==="auto",parse:t=>t},QH=t=>e=>e.test(t),JH=[hg,qr,dd,nh,mke,pke,S8e],LR=t=>JH.find(QH(t));function N8e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||vH(t):!0}const E8e=new Set(["brightness","contrast","saturate","opacity"]);function C8e(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(nE)||[];if(!n)return t;const s=r.replace(n,"");let a=E8e.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+s+")"}const A8e=/\b([a-z-]*)\(.*?\)/gu,N8={...Uh,getAnimatableNone:t=>{const e=t.match(A8e);return e?e.map(C8e).join(" "):t}},FR={...hg,transform:Math.round},T8e={rotate:nh,rotateX:nh,rotateY:nh,rotateZ:nh,scale:dw,scaleX:dw,scaleY:dw,scaleZ:dw,skew:nh,skewX:nh,skewY:nh,distance:qr,translateX:qr,translateY:qr,translateZ:qr,x:qr,y:qr,z:qr,perspective:qr,transformPerspective:qr,opacity:z2,originX:_R,originY:_R,originZ:qr},fE={borderWidth:qr,borderTopWidth:qr,borderRightWidth:qr,borderBottomWidth:qr,borderLeftWidth:qr,borderRadius:qr,radius:qr,borderTopLeftRadius:qr,borderTopRightRadius:qr,borderBottomRightRadius:qr,borderBottomLeftRadius:qr,width:qr,maxWidth:qr,height:qr,maxHeight:qr,top:qr,right:qr,bottom:qr,left:qr,padding:qr,paddingTop:qr,paddingRight:qr,paddingBottom:qr,paddingLeft:qr,margin:qr,marginTop:qr,marginRight:qr,marginBottom:qr,marginLeft:qr,backgroundPositionX:qr,backgroundPositionY:qr,...T8e,zIndex:FR,fillOpacity:z2,strokeOpacity:z2,numOctaves:FR},I8e={...fE,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:N8,WebkitFilter:N8},ZH=t=>I8e[t];function eW(t,e){let r=ZH(t);return r!==N8&&(r=Uh),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const P8e=new Set(["auto","none","0"]);function j8e(t,e,r){let n=0,s;for(;n<t.length&&!s;){const a=t[n];typeof a=="string"&&!P8e.has(a)&&$2(a).values.length&&(s=t[n]),n++}if(s&&r)for(const a of e)t[a]=eW(r,s)}class R8e extends uE{constructor(e,r,n,s,a){super(e,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),rE(u))){const d=YH(u,r.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!XH.has(n)||e.length!==2)return;const[s,a]=e,i=LR(s),o=LR(a);if(i!==o)if(IR(i)&&IR(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else rp[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||N8e(e[s]))&&n.push(s);n.length&&j8e(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rp[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=rp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{e.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function L8e(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const s=r?.[t]??n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const tW=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function rW(t){return yH(t)&&"offsetHeight"in t}const DR=30,F8e=t=>!isNaN(parseFloat(t));class D8e{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=Pl.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Pl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=F8e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new JN);const n=this.events[e].add(r);return e==="change"?()=>{n(),ra.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>DR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,DR);return wH(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function B1(t,e){return new D8e(t,e)}const{schedule:hE}=PH(queueMicrotask,!1),ou={x:!1,y:!1};function nW(){return ou.x||ou.y}function O8e(t){return t==="x"||t==="y"?ou[t]?null:(ou[t]=!0,()=>{ou[t]=!1}):ou.x||ou.y?null:(ou.x=ou.y=!0,()=>{ou.x=ou.y=!1})}function sW(t,e){const r=L8e(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function OR(t){return!(t.pointerType==="touch"||nW())}function M8e(t,e,r={}){const[n,s,a]=sW(t,r),i=o=>{if(!OR(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const d=p=>{OR(p)&&(u(p),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const aW=(t,e)=>e?t===e?!0:aW(t,e.parentElement):!1,pE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,B8e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function V8e(t){return B8e.has(t.tagName)||t.tabIndex!==-1}const Qw=new WeakSet;function MR(t){return e=>{e.key==="Enter"&&t(e)}}function h6(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const U8e=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=MR(()=>{if(Qw.has(r))return;h6(r,"down");const s=MR(()=>{h6(r,"up")}),a=()=>h6(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function BR(t){return pE(t)&&!nW()}function z8e(t,e,r={}){const[n,s,a]=sW(t,r),i=o=>{const l=o.currentTarget;if(!BR(o))return;Qw.add(l);const u=e(l,o),d=(m,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Qw.has(l)&&Qw.delete(l),BR(m)&&typeof u=="function"&&u(m,{success:x})},p=m=>{d(m,l===window||l===document||r.useGlobalTarget||aW(l,m.target))},g=m=>{d(m,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",g,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),rW(o)&&(o.addEventListener("focus",u=>U8e(u,s)),!V8e(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function iW(t){return yH(t)&&"ownerSVGElement"in t}function $8e(t){return iW(t)&&t.tagName==="svg"}const Ko=t=>!!(t&&t.getVelocity),q8e=[...JH,fi,Uh],H8e=t=>q8e.find(QH(t)),mE=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class W8e extends R.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=rW(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G8e({children:t,isPresent:e,anchorX:r,root:n}){const s=R.useId(),a=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=R.useContext(mE);return R.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:p,right:g}=i.current;if(e||!a.current||!l||!u)return;const m=r==="left"?`left: ${p}`:`right: ${g}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const y=n??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[e]),c.jsx(W8e,{isPresent:e,childRef:a,sizeRef:i,children:R.cloneElement(t,{ref:a})})}const K8e=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const u=WN(Y8e),d=R.useId();let p=!0,g=R.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:r,custom:s,onExitComplete:m=>{u.set(m,!0);for(const x of u.values())if(!x)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,n]);return a&&p&&(g={...g}),R.useMemo(()=>{u.forEach((m,x)=>u.set(x,!1))},[r]),R.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(t=c.jsx(G8e,{isPresent:r,anchorX:o,root:l,children:t})),c.jsx(j4.Provider,{value:g,children:t})};function Y8e(){return new Map}function oW(t=!0){const e=R.useContext(j4);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,a=R.useId();R.useEffect(()=>{if(t)return s(a)},[t]);const i=R.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,i]:[!0]}const fw=t=>t.key||"";function VR(t){const e=[];return R.Children.forEach(t,r=>{R.isValidElement(r)&&e.push(r)}),e}const X8e=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[u,d]=oW(i),p=R.useMemo(()=>VR(t),[t]),g=i&&!u?[]:p.map(fw),m=R.useRef(!0),x=R.useRef(p),y=WN(()=>new Map),[b,S]=R.useState(p),[P,T]=R.useState(p);gH(()=>{m.current=!1,x.current=p;for(let Y=0;Y<P.length;Y++){const L=fw(P[Y]);g.includes(L)?y.delete(L):y.get(L)!==!0&&y.set(L,!1)}},[P,g.length,g.join("-")]);const O=[];if(p!==b){let Y=[...p];for(let L=0;L<P.length;L++){const A=P[L],N=fw(A);g.includes(N)||(Y.splice(L,0,A),O.push(A))}return a==="wait"&&O.length&&(Y=O),T(VR(Y)),S(p),null}const{forceRender:W}=R.useContext(HN);return c.jsx(c.Fragment,{children:P.map(Y=>{const L=fw(Y),A=i&&!u?!1:p===P||g.includes(L),N=()=>{if(y.has(L))y.set(L,!0);else return;let D=!0;y.forEach(j=>{j||(D=!1)}),D&&(W?.(),T(x.current),i&&d?.(),n&&n())};return c.jsx(K8e,{isPresent:A,initial:!m.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:A?void 0:N,anchorX:o,children:Y},L)})})},lW=R.createContext({strict:!1}),UR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},V1={};for(const t in UR)V1[t]={isEnabled:e=>UR[t].some(r=>!!e[r])};function Q8e(t){for(const e in t)V1[e]={...V1[e],...t[e]}}const J8e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mb(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||J8e.has(t)}let cW=t=>!mb(t);function Z8e(t){typeof t=="function"&&(cW=e=>e.startsWith("on")?!mb(e):t(e))}try{Z8e(require("@emotion/is-prop-valid").default)}catch{}function e7e(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(cW(s)||r===!0&&mb(s)||!e&&!mb(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}const R4=R.createContext({});function L4(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function q2(t){return typeof t=="string"||Array.isArray(t)}const gE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xE=["initial",...gE];function F4(t){return L4(t.animate)||xE.some(e=>q2(t[e]))}function uW(t){return!!(F4(t)||t.variants)}function t7e(t,e){if(F4(t)){const{initial:r,animate:n}=t;return{initial:r===!1||q2(r)?r:void 0,animate:q2(n)?n:void 0}}return t.inherit!==!1?e:{}}function r7e(t){const{initial:e,animate:r}=t7e(t,R.useContext(R4));return R.useMemo(()=>({initial:e,animate:r}),[zR(e),zR(r)])}function zR(t){return Array.isArray(t)?t.join(" "):t}const H2={};function n7e(t){for(const e in t)H2[e]=t[e],tE(e)&&(H2[e].isCSSVariable=!0)}function dW(t,{layout:e,layoutId:r}){return mg.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!H2[t]||t==="opacity")}const s7e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a7e=pg.length;function i7e(t,e,r){let n="",s=!0;for(let a=0;a<a7e;a++){const i=pg[a],o=t[i];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(i.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=tW(o,fE[i]);if(!l){s=!1;const d=s7e[i]||i;n+=`${d}(${u}) `}r&&(e[i]=u)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function yE(t,e,r){const{style:n,vars:s,transformOrigin:a}=t;let i=!1,o=!1;for(const l in e){const u=e[l];if(mg.has(l)){i=!0;continue}else if(tE(l)){s[l]=u;continue}else{const d=tW(u,fE[l]);l.startsWith("origin")?(o=!0,a[l]=d):n[l]=d}}if(e.transform||(i||r?n.transform=i7e(e,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${l} ${u} ${d}`}}const vE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fW(t,e,r){for(const n in e)!Ko(e[n])&&!dW(n,r)&&(t[n]=e[n])}function o7e({transformTemplate:t},e){return R.useMemo(()=>{const r=vE();return yE(r,e,t),Object.assign({},r.vars,r.style)},[e])}function l7e(t,e){const r=t.style||{},n={};return fW(n,r,t),Object.assign(n,o7e(t,e)),n}function c7e(t,e){const r={},n=l7e(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const u7e={offset:"stroke-dashoffset",array:"stroke-dasharray"},d7e={offset:"strokeDashoffset",array:"strokeDasharray"};function f7e(t,e,r=1,n=0,s=!0){t.pathLength=1;const a=s?u7e:d7e;t[a.offset]=qr.transform(-n);const i=qr.transform(e),o=qr.transform(r);t[a.array]=`${i} ${o}`}function hW(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,u,d){if(yE(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=d?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),s!==void 0&&f7e(p,s,a,i,!1)}const pW=()=>({...vE(),attrs:{}}),mW=t=>typeof t=="string"&&t.toLowerCase()==="svg";function h7e(t,e,r,n){const s=R.useMemo(()=>{const a=pW();return hW(a,e,mW(n),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};fW(a,t.style,t),s.style={...a,...s.style}}return s}const p7e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wE(t){return typeof t!="string"||t.includes("-")?!1:!!(p7e.indexOf(t)>-1||/[A-Z]/u.test(t))}function m7e(t,e,r,{latestValues:n},s,a=!1){const o=(wE(t)?h7e:c7e)(e,n,s,t),l=e7e(e,typeof t=="string",a),u=t!==R.Fragment?{...l,...o,ref:r}:{},{children:d}=e,p=R.useMemo(()=>Ko(d)?d.get():d,[d]);return R.createElement(t,{...u,children:p})}function $R(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function bE(t,e,r,n){if(typeof e=="function"){const[s,a]=$R(n);e=e(r!==void 0?r:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=$R(n);e=e(r!==void 0?r:t.custom,s,a)}return e}function Jw(t){return Ko(t)?t.get():t}function g7e({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:x7e(r,n,s,t),renderState:e()}}function x7e(t,e,r,n){const s={},a=n(t,{});for(const g in a)s[g]=Jw(a[g]);let{initial:i,animate:o}=t;const l=F4(t),u=uW(t);e&&u&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),o===void 0&&(o=e.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const p=d?o:i;if(p&&typeof p!="boolean"&&!L4(p)){const g=Array.isArray(p)?p:[p];for(let m=0;m<g.length;m++){const x=bE(t,g[m]);if(x){const{transitionEnd:y,transition:b,...S}=x;for(const P in S){let T=S[P];if(Array.isArray(T)){const O=d?T.length-1:0;T=T[O]}T!==null&&(s[P]=T)}for(const P in y)s[P]=y[P]}}}return s}const gW=t=>(e,r)=>{const n=R.useContext(R4),s=R.useContext(j4),a=()=>g7e(t,e,n,s);return r?a():WN(a)};function _E(t,e,r){const{style:n}=t,s={};for(const a in n)(Ko(n[a])||e.style&&Ko(e.style[a])||dW(a,t)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const y7e=gW({scrapeMotionValuesFromProps:_E,createRenderState:vE});function xW(t,e,r){const n=_E(t,e,r);for(const s in t)if(Ko(t[s])||Ko(e[s])){const a=pg.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=t[s]}return n}const v7e=gW({scrapeMotionValuesFromProps:xW,createRenderState:pW}),w7e=Symbol.for("motionComponentSymbol");function Wm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function b7e(t,e,r){return R.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Wm(r)&&(r.current=n))},[e])}const kE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_7e="framerAppearId",yW="data-"+kE(_7e),vW=R.createContext({});function k7e(t,e,r,n,s){const{visualElement:a}=R.useContext(R4),i=R.useContext(lW),o=R.useContext(j4),l=R.useContext(mE).reducedMotion,u=R.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,p=R.useContext(vW);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&S7e(u.current,r,s,p);const g=R.useRef(!1);R.useInsertionEffect(()=>{d&&g.current&&d.update(r,o)});const m=r[yW],x=R.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return gH(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),R.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),x.current=!1),d.enteringChildren=void 0)}),d}function S7e(t,e,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:wW(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&Wm(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:u})}function wW(t){if(t)return t.options.allowProjection!==!1?t.projection:wW(t.parent)}function p6(t,{forwardMotionProps:e=!1}={},r,n){r&&Q8e(r);const s=wE(t)?v7e:y7e;function a(o,l){let u;const d={...R.useContext(mE),...o,layoutId:N7e(o)},{isStatic:p}=d,g=r7e(o),m=s(o,p);if(!p&&GN){E7e();const x=C7e(d);u=x.MeasureLayout,g.visualElement=k7e(t,m,d,n,x.ProjectionNode)}return c.jsxs(R4.Provider,{value:g,children:[u&&g.visualElement?c.jsx(u,{visualElement:g.visualElement,...d}):null,m7e(t,o,b7e(m,g.visualElement,l),m,p,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const i=R.forwardRef(a);return i[w7e]=t,i}function N7e({layoutId:t}){const e=R.useContext(HN).id;return e&&t!==void 0?e+"-"+t:t}function E7e(t,e){R.useContext(lW).strict}function C7e(t){const{drag:e,layout:r}=V1;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function A7e(t,e){if(typeof Proxy>"u")return p6;const r=new Map,n=(a,i)=>p6(a,i,t,e),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,p6(i,void 0,t,e)),r.get(i))})}function bW({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function T7e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function I7e(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function m6(t){return t===void 0||t===1}function E8({scale:t,scaleX:e,scaleY:r}){return!m6(t)||!m6(e)||!m6(r)}function C0(t){return E8(t)||_W(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _W(t){return qR(t.x)||qR(t.y)}function qR(t){return t&&t!=="0%"}function gb(t,e,r){const n=t-r,s=e*n;return r+s}function HR(t,e,r,n,s){return s!==void 0&&(t=gb(t,s,n)),gb(t,r,n)+e}function C8(t,e=0,r=1,n,s){t.min=HR(t.min,e,r,n,s),t.max=HR(t.max,e,r,n,s)}function kW(t,{x:e,y:r}){C8(t.x,e.translate,e.scale,e.originPoint),C8(t.y,r.translate,r.scale,r.originPoint)}const WR=.999999999999,GR=1.0000000000001;function P7e(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Km(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,kW(t,i)),n&&C0(a.latestValues)&&Km(t,a.latestValues))}e.x<GR&&e.x>WR&&(e.x=1),e.y<GR&&e.y>WR&&(e.y=1)}function Gm(t,e){t.min=t.min+e,t.max=t.max+e}function KR(t,e,r,n,s=.5){const a=ma(t.min,t.max,s);C8(t,e,r,a,n)}function Km(t,e){KR(t.x,e.x,e.scaleX,e.scale,e.originX),KR(t.y,e.y,e.scaleY,e.scale,e.originY)}function SW(t,e){return bW(I7e(t.getBoundingClientRect(),e))}function j7e(t,e,r){const n=SW(t,r),{scroll:s}=e;return s&&(Gm(n.x,s.offset.x),Gm(n.y,s.offset.y)),n}const YR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ym=()=>({x:YR(),y:YR()}),XR=()=>({min:0,max:0}),qa=()=>({x:XR(),y:XR()}),A8={current:null},NW={current:!1};function R7e(){if(NW.current=!0,!!GN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>A8.current=t.matches;t.addEventListener("change",e),e()}else A8.current=!1}const L7e=new WeakMap;function F7e(t,e,r){for(const n in e){const s=e[n],a=r[n];if(Ko(s))t.addValue(n,s);else if(Ko(a))t.addValue(n,B1(s,{owner:t}));else if(a!==s)if(t.hasValue(n)){const i=t.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=t.getStaticValue(n);t.addValue(n,B1(i!==void 0?i:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const QR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D7e{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Pl.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ra.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=F4(r),this.isVariantNode=uW(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in p){const m=p[g];l[g]!==void 0&&Ko(m)&&m.set(l[g])}}mount(e){this.current=e,L7e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),NW.current||R7e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:A8.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Vh(this.notifyUpdate),Vh(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=mg.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[e]=i,this.props.onUpdate&&ra.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in V1){const r=V1[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qa()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<QR.length;n++){const s=QR[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=e[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=F7e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=B1(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(xH(n)||vH(n))?n=parseFloat(n):!H8e(n)&&Uh.test(r)&&(n=eW(e,r)),this.setBaseTarget(e,Ko(n)?n.get():n)),Ko(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=bE(this.props,r,this.presenceContext?.custom);a&&(n=a[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ko(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new JN),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){hE.render(this.render)}}class EW extends D7e{constructor(){super(...arguments),this.KeyframeResolver=R8e}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ko(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function CW(t,{style:e,vars:r},n,s){const a=t.style;let i;for(i in e)a[i]=e[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function O7e(t){return window.getComputedStyle(t)}class M7e extends EW{constructor(){super(...arguments),this.type="html",this.renderInstance=CW}readValueFromInstance(e,r){if(mg.has(r))return this.projection?.isProjecting?v8(r):Jke(e,r);{const n=O7e(e),s=(tE(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return SW(e,r)}build(e,r,n){yE(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return _E(e,r,n)}}const AW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B7e(t,e,r,n){CW(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(AW.has(s)?s:kE(s),e.attrs[s])}class V7e extends EW{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qa}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(mg.has(r)){const n=ZH(r);return n&&n.default||0}return r=AW.has(r)?r:kE(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return xW(e,r,n)}build(e,r,n){hW(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){B7e(e,r,n,s)}mount(e){this.isSVGTag=mW(e.tagName),super.mount(e)}}const U7e=(t,e)=>wE(t)?new V7e(e):new M7e(e,{allowProjection:t!==R.Fragment});function m1(t,e,r){const n=t.getProps();return bE(n,e,r!==void 0?r:n.custom,t)}const T8=t=>Array.isArray(t);function z7e(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,B1(r))}function $7e(t){return T8(t)?t[t.length-1]||0:t}function q7e(t,e){const r=m1(t,e);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=$7e(a[i]);z7e(t,i,o)}}function H7e(t){return!!(Ko(t)&&t.add)}function I8(t,e){const r=t.getValue("willChange");if(H7e(r))return r.add(e);if(!r&&df.WillChange){const n=new df.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function TW(t){return t.props[yW]}const W7e=t=>t!==null;function G7e(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(W7e),a=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[a]}const K7e={type:"spring",stiffness:500,damping:25,restSpeed:10},Y7e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),X7e={type:"keyframes",duration:.8},Q7e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J7e=(t,{keyframes:e})=>e.length>2?X7e:mg.has(t)?t.startsWith("scale")?Y7e(e[1]):K7e:Q7e;function Z7e({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const SE=(t,e,r,n={},s,a)=>i=>{const o=dE(n,t)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-cd(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:s};Z7e(o)||Object.assign(d,J7e(t,d)),d.duration&&(d.duration=cd(d.duration)),d.repeatDelay&&(d.repeatDelay=cd(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(S8(d),d.delay===0&&(p=!0)),(df.instantAnimations||df.skipAnimations)&&(p=!0,S8(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,p&&!a&&e.get()!==void 0){const g=G7e(d.keyframes,o);if(g!==void 0){ra.update(()=>{d.onUpdate(g),d.onComplete()});return}}return o.isSync?new cE(d):new b8e(d)};function eSe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function IW(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:i,...o}=e;n&&(a=n);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const p=t.getValue(d,t.latestValues[d]??null),g=o[d];if(g===void 0||u&&eSe(u,d))continue;const m={delay:r,...dE(a||{},d)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===x&&!m.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const S=TW(t);if(S){const P=window.MotionHandoffAnimation(S,d,ra);P!==null&&(m.startTime=P,y=!0)}}I8(t,d),p.start(SE(d,p,g,t.shouldReduceMotion&&XH.has(d)?{type:!1}:m,t,y));const b=p.animation;b&&l.push(b)}return i&&Promise.all(l).then(()=>{ra.update(()=>{i&&q7e(t,i)})}),l}function PW(t,e,r,n=0,s=1){const a=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),i=t.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function P8(t,e,r={}){const n=m1(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(IW(t,n,r)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:p}=s;return tSe(t,e,l,u,d,p,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,u]=o==="beforeChildren"?[a,i]:[i,a];return l().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function tSe(t,e,r=0,n=0,s=0,a=1,i){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(P8(l,e,{...i,delay:r+(typeof n=="function"?0:n)+PW(t.variantChildren,l,n,s,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function rSe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(a=>P8(t,a,r));n=Promise.all(s)}else if(typeof e=="string")n=P8(t,e,r);else{const s=typeof e=="function"?m1(t,e,r.custom):e;n=Promise.all(IW(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function jW(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const nSe=xE.length;function RW(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?RW(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<nSe;r++){const n=xE[r],s=t.props[n];(q2(s)||s===!1)&&(e[n]=s)}return e}const sSe=[...gE].reverse(),aSe=gE.length;function iSe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>rSe(t,r,n)))}function oSe(t){let e=iSe(t),r=JR(),n=!0;const s=l=>(u,d)=>{const p=m1(t,d,l==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:m,...x}=p;u={...u,...x,...m}}return u};function a(l){e=l(t)}function i(l){const{props:u}=t,d=RW(t.parent)||{},p=[],g=new Set;let m={},x=1/0;for(let b=0;b<aSe;b++){const S=sSe[b],P=r[S],T=u[S]!==void 0?u[S]:d[S],O=q2(T),W=S===l?P.isActive:null;W===!1&&(x=b);let Y=T===d[S]&&T!==u[S]&&O;if(Y&&n&&t.manuallyAnimateOnMount&&(Y=!1),P.protectedKeys={...m},!P.isActive&&W===null||!T&&!P.prevProp||L4(T)||typeof T=="boolean")continue;const L=lSe(P.prevProp,T);let A=L||S===l&&P.isActive&&!Y&&O||b>x&&O,N=!1;const D=Array.isArray(T)?T:[T];let j=D.reduce(s(S),{});W===!1&&(j={});const{prevResolvedValues:F={}}=P,M={...F,...j},Z=fe=>{A=!0,g.has(fe)&&(N=!0,g.delete(fe)),P.needsAnimating[fe]=!0;const te=t.getValue(fe);te&&(te.liveStyle=!1)};for(const fe in M){const te=j[fe],H=F[fe];if(m.hasOwnProperty(fe))continue;let ie=!1;T8(te)&&T8(H)?ie=!jW(te,H):ie=te!==H,ie?te!=null?Z(fe):g.add(fe):te!==void 0&&g.has(fe)?Z(fe):P.protectedKeys[fe]=!0}P.prevProp=T,P.prevResolvedValues=j,P.isActive&&(m={...m,...j}),n&&t.blockInitialAnimation&&(A=!1);const ue=Y&&L;A&&(!ue||N)&&p.push(...D.map(fe=>{const te={type:S};if(typeof fe=="string"&&n&&!ue&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,ie=m1(H,fe);if(H.enteringChildren&&ie){const{delayChildren:K}=ie.transition||{};te.delay=PW(H.enteringChildren,t,K)}}return{animation:fe,options:te}}))}if(g.size){const b={};if(typeof u.initial!="boolean"){const S=m1(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(b.transition=S.transition)}g.forEach(S=>{const P=t.getBaseTarget(S),T=t.getValue(S);T&&(T.liveStyle=!0),b[S]=P??null}),p.push({animation:b})}let y=!!p.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(p):Promise.resolve()}function o(l,u){if(r[l].isActive===u)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(l,u)),r[l].isActive=u;const d=i(l);for(const p in r)r[p].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=JR(),n=!0}}}function lSe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!jW(e,t):!1}function k0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JR(){return{animate:k0(!0),whileInView:k0(),whileHover:k0(),whileTap:k0(),whileDrag:k0(),whileFocus:k0(),exit:k0()}}class e0{constructor(e){this.isMounted=!1,this.node=e}update(){}}class cSe extends e0{constructor(e){super(e),e.animationState||(e.animationState=oSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();L4(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let uSe=0;class dSe extends e0{constructor(){super(...arguments),this.id=uSe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const fSe={animation:{Feature:cSe},exit:{Feature:dSe}};function W2(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function Oy(t){return{point:{x:t.pageX,y:t.pageY}}}const hSe=t=>e=>pE(e)&&t(e,Oy(e));function Zx(t,e,r,n){return W2(t,e,hSe(r),n)}const LW=1e-4,pSe=1-LW,mSe=1+LW,FW=.01,gSe=0-FW,xSe=0+FW;function dl(t){return t.max-t.min}function ySe(t,e,r){return Math.abs(t-e)<=r}function ZR(t,e,r,n=.5){t.origin=n,t.originPoint=ma(e.min,e.max,t.origin),t.scale=dl(r)/dl(e),t.translate=ma(r.min,r.max,t.origin)-t.originPoint,(t.scale>=pSe&&t.scale<=mSe||isNaN(t.scale))&&(t.scale=1),(t.translate>=gSe&&t.translate<=xSe||isNaN(t.translate))&&(t.translate=0)}function e2(t,e,r,n){ZR(t.x,e.x,r.x,n?n.originX:void 0),ZR(t.y,e.y,r.y,n?n.originY:void 0)}function eL(t,e,r){t.min=r.min+e.min,t.max=t.min+dl(e)}function vSe(t,e,r){eL(t.x,e.x,r.x),eL(t.y,e.y,r.y)}function tL(t,e,r){t.min=e.min-r.min,t.max=t.min+dl(e)}function t2(t,e,r){tL(t.x,e.x,r.x),tL(t.y,e.y,r.y)}function Ic(t){return[t("x"),t("y")]}const DW=({current:t})=>t?t.ownerDocument.defaultView:null,rL=(t,e)=>Math.abs(t-e);function wSe(t,e){const r=rL(t.x,e.x),n=rL(t.y,e.y);return Math.sqrt(r**2+n**2)}class OW{constructor(e,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=x6(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=wSe(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!x)return;const{point:y}=g,{timestamp:b}=fo;this.history.push({...y,timestamp:b});const{onStart:S,onMove:P}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=g6(m,this.transformPagePoint),ra.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=x6(g.type==="pointercancel"?this.lastMoveEventInfo:g6(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,S),y&&y(g,S)},!pE(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=Oy(e),l=g6(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=fo;this.history=[{...u,timestamp:d}];const{onSessionStart:p}=r;p&&p(e,x6(l,this.history)),this.removeListeners=Ly(Zx(this.contextWindow,"pointermove",this.handlePointerMove),Zx(this.contextWindow,"pointerup",this.handlePointerUp),Zx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vh(this.updatePoint)}}function g6(t,e){return e?{point:e(t.point)}:t}function nL(t,e){return{x:t.x-e.x,y:t.y-e.y}}function x6({point:t},e){return{point:t,delta:nL(t,MW(e)),offset:nL(t,bSe(e)),velocity:_Se(e,.1)}}function bSe(t){return t[0]}function MW(t){return t[t.length-1]}function _Se(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=MW(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>cd(e)));)r--;if(!n)return{x:0,y:0};const a=ud(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function kSe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?ma(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?ma(r,t,n.max):Math.min(t,r)),t}function sL(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function SSe(t,{top:e,left:r,bottom:n,right:s}){return{x:sL(t.x,r,s),y:sL(t.y,e,n)}}function aL(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function NSe(t,e){return{x:aL(t.x,e.x),y:aL(t.y,e.y)}}function ESe(t,e){let r=.5;const n=dl(t),s=dl(e);return s>n?r=U2(e.min,e.max-n,t.min):n>s&&(r=U2(t.min,t.max-s,e.min)),uf(0,1,r)}function CSe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const j8=.35;function ASe(t=j8){return t===!1?t=0:t===!0&&(t=j8),{x:iL(t,"left","right"),y:iL(t,"top","bottom")}}function iL(t,e,r){return{min:oL(t,e),max:oL(t,r)}}function oL(t,e){return typeof t=="number"?t:t[e]||0}const TSe=new WeakMap;class ISe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qa(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Oy(p).point)},i=(p,g)=>{const{drag:m,dragPropagation:x,onDragStart:y}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=O8e(m),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ic(S=>{let P=this.getAxisMotionValue(S).get()||0;if(dd.test(P)){const{projection:T}=this.visualElement;if(T&&T.layout){const O=T.layout.layoutBox[S];O&&(P=dl(O)*(parseFloat(P)/100))}}this.originPoint[S]=P}),y&&ra.postRender(()=>y(p,g)),I8(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:y,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=g;if(x&&this.currentDirection===null){this.currentDirection=PSe(S),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),b&&b(p,g)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ic(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new OW(e,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:DW(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ra.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!hw(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=kSe(i,this.constraints[e],this.elastic[e])),a.set(i)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Wm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=SSe(n.layoutBox,e):this.constraints=!1,this.elastic=ASe(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ic(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=CSe(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Wm(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=j7e(n,s.root,this.visualElement.getTransformPagePoint());let i=NSe(s.layout.layoutBox,a);if(r){const o=r(T7e(i));this.hasMutatedConstraints=!!o,o&&(i=bW(o))}return i}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ic(d=>{if(!hw(d,r,this.currentDirection))return;let p=l&&l[d]||{};i&&(p={min:0,max:0});const g=s?200:1e6,m=s?40:1e7,x={type:"inertia",velocity:n?e[d]:0,bounceStiffness:g,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return I8(this.visualElement,e),n.start(SE(e,n,0,r,this.visualElement,!1))}stopAnimation(){Ic(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ic(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ic(r=>{const{drag:n}=this.getProps();if(!hw(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(e[r]-ma(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Wm(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ic(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const l=o.get();s[i]=ESe({min:l,max:l},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ic(i=>{if(!hw(i,e,null))return;const o=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];o.set(ma(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;TSe.set(this.visualElement,this);const e=this.visualElement.current,r=Zx(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Wm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ra.read(n);const i=W2(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ic(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=j8,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function hw(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function PSe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class jSe extends e0{constructor(e){super(e),this.removeGroupControls=Mc,this.removeListeners=Mc,this.controls=new ISe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mc}unmount(){this.removeGroupControls(),this.removeListeners()}}const lL=t=>(e,r)=>{t&&ra.postRender(()=>t(e,r))};class RSe extends e0{constructor(){super(...arguments),this.removePointerDownListener=Mc}onPointerDown(e){this.session=new OW(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DW(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:lL(e),onStart:lL(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&ra.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Zx(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sx={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qr.test(t))t=parseFloat(t);else return t;const r=cL(t,e.target.x),n=cL(t,e.target.y);return`${r}% ${n}%`}},LSe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Uh.parse(t);if(s.length>5)return n;const a=Uh.createTransformer(t),i=typeof s[0]!="number"?1:0,o=r.x.scale*e.x,l=r.y.scale*e.y;s[0+i]/=o,s[1+i]/=l;const u=ma(o,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let y6=!1;class FSe extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=e;n7e(DSe),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),y6&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Zw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,y6=!0,s||e.layoutDependency!==r||r===void 0||e.isPresent!==a?i.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?i.promote():i.relegate()||ra.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),hE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;y6=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function BW(t){const[e,r]=oW(),n=R.useContext(HN);return c.jsx(FSe,{...t,layoutGroup:n,switchLayoutGroup:R.useContext(vW),isPresent:e,safeToRemove:r})}const DSe={borderRadius:{...sx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sx,borderTopRightRadius:sx,borderBottomLeftRadius:sx,borderBottomRightRadius:sx,boxShadow:LSe};function OSe(t,e,r){const n=Ko(t)?t:B1(t);return n.start(SE("",n,e,r)),n.animation}const MSe=(t,e)=>t.depth-e.depth;class BSe{constructor(){this.children=[],this.isDirty=!1}add(e){KN(this.children,e),this.isDirty=!0}remove(e){YN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(MSe),this.isDirty=!1,this.children.forEach(e)}}function VSe(t,e){const r=Pl.now(),n=({timestamp:s})=>{const a=s-r;a>=e&&(Vh(n),t(a-e))};return ra.setup(n,!0),()=>Vh(n)}const VW=["TopLeft","TopRight","BottomLeft","BottomRight"],USe=VW.length,uL=t=>typeof t=="string"?parseFloat(t):t,dL=t=>typeof t=="number"||qr.test(t);function zSe(t,e,r,n,s,a){s?(t.opacity=ma(0,r.opacity??1,$Se(n)),t.opacityExit=ma(e.opacity??1,0,qSe(n))):a&&(t.opacity=ma(e.opacity??1,r.opacity??1,n));for(let i=0;i<USe;i++){const o=`border${VW[i]}Radius`;let l=fL(e,o),u=fL(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||dL(l)===dL(u)?(t[o]=Math.max(ma(uL(l),uL(u),n),0),(dd.test(u)||dd.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||r.rotate)&&(t.rotate=ma(e.rotate||0,r.rotate||0,n))}function fL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $Se=UW(0,.5,CH),qSe=UW(.5,.95,Mc);function UW(t,e,r){return n=>n<t?0:n>e?1:r(U2(t,e,n))}function hL(t,e){t.min=e.min,t.max=e.max}function Ec(t,e){hL(t.x,e.x),hL(t.y,e.y)}function pL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mL(t,e,r,n,s){return t-=e,t=gb(t,1/r,n),s!==void 0&&(t=gb(t,1/s,n)),t}function HSe(t,e=0,r=1,n=.5,s,a=t,i=t){if(dd.test(e)&&(e=parseFloat(e),e=ma(i.min,i.max,e/100)-i.min),typeof e!="number")return;let o=ma(a.min,a.max,n);t===a&&(o-=e),t.min=mL(t.min,e,r,o,s),t.max=mL(t.max,e,r,o,s)}function gL(t,e,[r,n,s],a,i){HSe(t,e[r],e[n],e[s],e.scale,a,i)}const WSe=["x","scaleX","originX"],GSe=["y","scaleY","originY"];function xL(t,e,r,n){gL(t.x,e,WSe,r?r.x:void 0,n?n.x:void 0),gL(t.y,e,GSe,r?r.y:void 0,n?n.y:void 0)}function yL(t){return t.translate===0&&t.scale===1}function zW(t){return yL(t.x)&&yL(t.y)}function vL(t,e){return t.min===e.min&&t.max===e.max}function KSe(t,e){return vL(t.x,e.x)&&vL(t.y,e.y)}function wL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $W(t,e){return wL(t.x,e.x)&&wL(t.y,e.y)}function bL(t){return dl(t.x)/dl(t.y)}function _L(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class YSe{constructor(){this.members=[]}add(e){KN(this.members,e),e.scheduleRender()}remove(e){if(YN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XSe(t,e,r){let n="";const s=t.x.translate/e.x,a=t.y.translate/e.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:p,rotateY:g,skewX:m,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),p&&(n+=`rotateX(${p}deg) `),g&&(n+=`rotateY(${g}deg) `),m&&(n+=`skewX(${m}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const v6=["","X","Y","Z"],QSe=1e3;let JSe=0;function w6(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function qW(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=TW(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ra,!(s||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&qW(n)}function HW({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=e?.()){this.id=JSe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tNe),this.nodes.forEach(aNe),this.nodes.forEach(iNe),this.nodes.forEach(rNe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new BSe)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new JN),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const l=this.eventHandlers.get(i);l&&l.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=iW(i)&&!$8e(i),this.instance=i;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let d,p=0;const g=()=>this.root.updateBlockedByResize=!1;ra.read(()=>{p=window.innerWidth}),t(i,()=>{const m=window.innerWidth;m!==p&&(p=m,this.root.updateBlockedByResize=!0,d&&d(),d=VSe(g,250),Zw.hasAnimatedSinceResize&&(Zw.hasAnimatedSinceResize=!1,this.nodes.forEach(NL)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||dNe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=u.getProps(),S=!this.targetLayout||!$W(this.targetLayout,m),P=!p&&g;if(this.options.layoutRoot||this.resumeFrom||P||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...dE(x,"layout"),onPlay:y,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(d,P)}else p||NL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oNe),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qW(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SL);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sNe),this.nodes.forEach(ZSe),this.nodes.forEach(eNe)):this.nodes.forEach(SL),this.clearAllSnapshots();const o=Pl.now();fo.delta=uf(0,1e3/60,o-fo.timestamp),fo.timestamp=o,fo.isProcessing=!0,l6.update.process(fo),l6.preRender.process(fo),l6.render.process(fo),fo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nNe),this.sharedNodes.forEach(lNe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ra.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ra.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!dl(this.snapshot.measuredBox.x)&&!dl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!zW(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||C0(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return i&&(l=this.removeTransform(l)),fNe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return qa();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hNe))){const{scroll:u}=this.root;u&&(Gm(o.x,u.offset.x),Gm(o.y,u.offset.y))}return o}removeElementScroll(i){const o=qa();if(Ec(o,i),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:p}=u;u!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Ec(o,i),Gm(o.x,d.offset.x),Gm(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const l=qa();Ec(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Km(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),C0(d.latestValues)&&Km(l,d.latestValues)}return C0(this.latestValues)&&Km(l,this.latestValues),l}removeTransform(i){const o=qa();Ec(o,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!C0(u.latestValues))continue;E8(u.latestValues)&&u.updateSnapshot();const d=qa(),p=u.measurePageBox();Ec(d,p),xL(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return C0(this.latestValues)&&xL(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=fo.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qa(),this.relativeTargetOrigin=qa(),t2(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ec(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qa(),this.targetWithTransforms=qa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ec(this.target,this.layout.layoutBox),kW(this.target,this.targetDelta)):Ec(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qa(),this.relativeTargetOrigin=qa(),t2(this.relativeTargetOrigin,this.target,g.target),Ec(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||E8(this.parent.latestValues)||_W(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===fo.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ec(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;P7e(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=qa());const{target:m}=i;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pL(this.prevProjectionDelta.x,this.projectionDelta.x),pL(this.prevProjectionDelta.y,this.projectionDelta.y)),e2(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!_L(this.projectionDelta.x,this.prevProjectionDelta.x)||!_L(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ym(),this.projectionDelta=Ym(),this.projectionDeltaWithTransform=Ym()}setAnimationOrigin(i,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},p=Ym();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=qa(),m=l?l.source:void 0,x=this.layout?this.layout.source:void 0,y=m!==x,b=this.getStack(),S=!b||b.members.length<=1,P=!!(y&&!S&&this.options.crossfade===!0&&!this.path.some(uNe));this.animationProgress=0;let T;this.mixTargetDelta=O=>{const W=O/1e3;EL(p.x,i.x,W),EL(p.y,i.y,W),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(t2(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cNe(this.relativeTarget,this.relativeTargetOrigin,g,W),T&&KSe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=qa()),Ec(T,this.relativeTarget)),y&&(this.animationValues=d,zSe(d,u,this.latestValues,W,P,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Vh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ra.update(()=>{Zw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=B1(0)),this.currentAnimation=OSe(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QSe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=i;if(!(!o||!l||!u)){if(this!==i&&this.layout&&u&&WW(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||qa();const p=dl(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+p;const g=dl(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+g}Ec(o,l),Km(o,d),e2(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new YSe),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&w6("z",i,u,this.animationValues);for(let d=0;d<v6.length;d++)w6(`rotate${v6[d]}`,i,u,this.animationValues),w6(`skew${v6[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Jw(o?.pointerEvents)||"",i.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Jw(o?.pointerEvents)||""),this.hasProjected&&!C0(this.latestValues)&&(i.transform=l?l({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=XSe(this.projectionDeltaWithTransform,this.treeScale,d);l&&(p=l(d,p)),i.transform=p;const{x:g,y:m}=this.projectionDelta;i.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in H2){if(d[x]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:S}=H2[x],P=p==="none"?d[x]:y(d[x],u);if(b){const T=b.length;for(let O=0;O<T;O++)i[b[O]]=P}else S?this.options.visualElement.renderState.vars[x]=P:i[x]=P}this.options.layoutId&&(i.pointerEvents=u===this?Jw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(kL),this.root.sharedNodes.clear()}}}function ZSe(t){t.updateLayout()}function eNe(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Ic(d=>{const p=a?e.measuredBox[d]:e.layoutBox[d],g=dl(p);p.min=r[d].min,p.max=p.min+g}):WW(s,e.layoutBox,r)&&Ic(d=>{const p=a?e.measuredBox[d]:e.layoutBox[d],g=dl(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const i=Ym();e2(i,r,e.layoutBox);const o=Ym();a?e2(o,t.applyTransform(n,!0),e.measuredBox):e2(o,r,e.layoutBox);const l=!zW(i);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const m=qa();t2(m,e.layoutBox,p.layoutBox);const x=qa();t2(x,r,g.layoutBox),$W(m,x)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function tNe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rNe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nNe(t){t.clearSnapshot()}function kL(t){t.clearMeasurements()}function SL(t){t.isLayoutDirty=!1}function sNe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aNe(t){t.resolveTargetDelta()}function iNe(t){t.calcProjection()}function oNe(t){t.resetSkewAndRotation()}function lNe(t){t.removeLeadSnapshot()}function EL(t,e,r){t.translate=ma(e.translate,0,r),t.scale=ma(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function CL(t,e,r,n){t.min=ma(e.min,r.min,n),t.max=ma(e.max,r.max,n)}function cNe(t,e,r,n){CL(t.x,e.x,r.x,n),CL(t.y,e.y,r.y,n)}function uNe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const dNe={duration:.45,ease:[.4,0,.1,1]},AL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),TL=AL("applewebkit/")&&!AL("chrome/")?Math.round:Mc;function IL(t){t.min=TL(t.min),t.max=TL(t.max)}function fNe(t){IL(t.x),IL(t.y)}function WW(t,e,r){return t==="position"||t==="preserve-aspect"&&!ySe(bL(e),bL(r),.2)}function hNe(t){return t!==t.root&&t.scroll?.wasRoot}const pNe=HW({attachResizeListener:(t,e)=>W2(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),b6={current:void 0},GW=HW({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!b6.current){const t=new pNe({});t.mount(window),t.setOptions({layoutScroll:!0}),b6.current=t}return b6.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mNe={pan:{Feature:RSe},drag:{Feature:jSe,ProjectionNode:GW,MeasureLayout:BW}};function PL(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&ra.postRender(()=>a(e,Oy(e)))}class gNe extends e0{mount(){const{current:e}=this.node;e&&(this.unmount=M8e(e,(r,n)=>(PL(this.node,n,"Start"),s=>PL(this.node,s,"End"))))}unmount(){}}class xNe extends e0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ly(W2(this.node.current,"focus",()=>this.onFocus()),W2(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jL(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&ra.postRender(()=>a(e,Oy(e)))}class yNe extends e0{mount(){const{current:e}=this.node;e&&(this.unmount=z8e(e,(r,n)=>(jL(this.node,n,"Start"),(s,{success:a})=>jL(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const R8=new WeakMap,_6=new WeakMap,vNe=t=>{const e=R8.get(t.target);e&&e(t)},wNe=t=>{t.forEach(vNe)};function bNe({root:t,...e}){const r=t||document;_6.has(r)||_6.set(r,{});const n=_6.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(wNe,{root:t,...e})),n[s]}function _Ne(t,e,r){const n=bNe(e);return R8.set(t,r),n.observe(t),()=>{R8.delete(t),n.unobserve(t)}}const kNe={some:0,all:1};class SNe extends e0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=e,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:kNe[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),g=u?d:p;g&&g(l)};return _Ne(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(NNe(e,r))&&this.startObserver()}unmount(){}}function NNe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const ENe={inView:{Feature:SNe},tap:{Feature:yNe},focus:{Feature:xNe},hover:{Feature:gNe}},CNe={layout:{ProjectionNode:GW,MeasureLayout:BW}},ANe={...fSe,...ENe,...mNe,...CNe},Hi=A7e(ANe,U7e),TNe="/assets/PharmaseaLogo-J4_RPPc9.png";function gg({children:t}){const[e,r]=R.useState(!1);return R.useEffect(()=>{const n=()=>{const a=document.documentElement.classList.contains("dark");r(a)};n();const s=new MutationObserver(n);return s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),c.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:c.jsxs("div",{className:"max-w-md mx-auto px-6 pt-14 pb-10",children:[c.jsxs("div",{className:"flex flex-col items-center mb-10",children:[c.jsx("img",{src:e?"/PharmLogoDark.png":TNe,alt:"Pharmasea",className:"w-40 h-15 object-contain transition-opacity duration-300"}),c.jsx("div",{className:"mt-3 text-zinc-600 dark:text-zinc-400 text-[13px]"})]}),t]})})}function INe({className:t,stroke:e}){return c.jsx("svg",{viewBox:"0 0 91 152",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:c.jsx("path",{d:"M17.9558 53.3893L8.27792 64.6462C6.66938 66.5171 5.41493 68.6715 4.57719 71.0016L2.02085 78.1119C1.34548 79.9904 1 81.9738 1 83.9727V144.038C1 145.898 2.49116 147.406 4.33061 147.406M17.9558 53.3893V48.6425M17.9558 53.3893L34.6089 64.4141M53.3814 18.7837L54.3809 16.3407C55.821 12.8205 54.0914 8.79384 50.5647 7.4562L47.3257 6.2277L32.2398 1.3232C31.0192 0.92638 29.7113 0.894269 28.4731 1.23072L23.0885 2.69388C15.4164 4.77859 10.0835 11.8129 10.0835 19.8478V25.8211C10.0835 26.8331 10.3089 27.832 10.7429 28.7438L17.2964 42.5105C17.7304 43.4223 17.9558 44.4213 17.9558 45.4332V48.6425M53.3814 18.7837L44.7483 21.5411C42.9395 22.1189 41.5043 23.5227 40.873 25.3318L39.9367 28.0151C39.0833 30.4607 36.1645 31.416 34.0563 29.9399C32.1107 28.5775 29.4231 29.2739 28.3648 31.4147L27.1285 33.9155C26.5328 35.1206 26.7663 36.576 27.7082 37.5287C29.0866 38.9229 28.8627 41.2433 27.2438 42.3416L17.9558 48.6425M53.3814 18.7837V25.8478C53.3814 26.8426 53.5992 27.8251 54.0192 28.7247L57.1065 35.3372C57.8674 36.9669 57.0683 38.9047 55.3879 39.5045C54.1855 39.9338 53.3814 41.0833 53.3814 42.373V45.3402C53.3814 47.4234 52.4286 49.3894 50.8006 50.6655L49.8214 51.4331C48.2553 52.6607 46.1993 53.0475 44.3015 52.4717C40.9857 51.4656 37.5042 53.4323 36.6123 56.8154L34.6089 64.4141M34.6089 64.4141L45.9226 79.1266C46.832 80.3093 47.3257 81.7647 47.3257 83.263V112.494M47.3257 112.494L57.378 114.673C58.9322 115.01 60.0426 116.399 60.0426 118.007M47.3257 112.494L39.2526 111.134C36.4692 110.664 34.2802 108.472 33.7884 105.662L28.5532 75.7452M5.84452 90.4449L16.5969 122.799C17.4252 125.291 19.6115 127.069 22.1963 127.351L44.9035 129.829M44.9035 129.829L58.4183 131.304C59.2857 131.399 60.0426 130.712 60.0426 129.829M44.9035 129.829V144.344C44.9035 146.035 43.5479 147.406 41.8756 147.406M4.33061 147.406V152M4.33061 147.406H41.8756M41.8756 147.406V152M60.0426 118.007L74.9597 115.396C75.4962 115.302 76.0484 115.39 76.5296 115.648L77.5323 116.185C78.9238 116.93 78.8663 118.966 77.435 119.629C75.9577 120.314 75.9577 122.437 77.435 123.122L80.026 124.323C80.6177 124.597 81.2779 124.683 81.9188 124.569L89.2869 123.253C89.8746 123.149 90.2421 123.876 89.8139 124.296L83.029 130.688C81.8106 132.153 79.7275 132.829 77.6711 132.516L60.0426 129.829M60.0426 118.007V129.829",stroke:e,strokeWidth:"1"})})}function PNe({className:t,stroke:e}){return c.jsx("svg",{viewBox:"0 0 124 154",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:c.jsx("path",{d:"M91.0549 25.0462L73.1047 18.9491L69.7581 17.6418M91.0549 25.0462V15.9124C91.0549 12.2404 89.4035 8.76383 86.5593 6.44828L84.0113 4.37386C82.2516 2.94119 80.1275 2.02961 77.8784 1.74191L72.8466 1.09826C69.1654 0.627362 65.4709 1.86534 62.8128 4.46045L55.1546 11.9374M91.0549 25.0462L86.187 39.6793M55.1546 11.9374L42.0162 13.7096C40.4803 13.9168 39.3342 15.2303 39.3342 16.7831C39.3342 18.0841 40.1446 19.2469 41.3636 19.6948L45.7766 21.3161C47.53 21.9603 49.4304 22.0904 51.255 21.6911L53.3292 21.2372M55.1546 11.9374L69.7581 17.6418M69.7581 17.6418L53.3292 21.2372M86.187 39.6793L84.1073 37.9861C82.3434 36.55 81.3192 34.3938 81.3192 32.1164V29.8544C81.3192 28.0625 80.2099 26.4585 78.5355 25.8293C77.2288 25.3383 75.7654 25.5149 74.6123 26.3026L74.4142 26.438C71.9808 28.1005 68.6396 27.1674 67.4151 24.4834L66.8363 23.2147C65.6954 20.7139 62.9904 19.3251 60.2983 19.8579L53.3292 21.2372M86.187 39.6793V42.3816C86.187 47.066 83.509 51.3364 79.2968 53.3686L69.7581 57.9706M53.3292 29.619L50.776 32.8169C49.6344 34.2468 50.2196 36.3768 51.9308 37.0198C52.8004 37.3466 53.4399 38.1002 53.6221 39.0127L54.6658 44.2419C54.9838 45.8349 55.789 47.2892 56.9697 48.4027C59.0405 50.3557 62.0076 51.0253 64.7141 50.1505L65.0424 50.0443M65.0424 50.0443L69.7581 48.5201M65.0424 50.0443L69.7581 57.9706M69.7581 57.9706L58.4277 73.5484C57.2767 75.1309 56.523 76.9678 56.2302 78.9039L55.2919 85.1091C55.2005 85.7137 55.1546 86.3243 55.1546 86.9358V105.833M86.187 51.5686L94.7057 60.4094M94.7057 60.4094L97.2251 68.7403C97.5719 69.8869 97.7481 71.0785 97.7481 72.2767V117.417M94.7057 60.4094L86.5047 58.9153C83.1962 58.3125 79.7862 59.1084 77.0841 61.1141L76.4306 61.5991C74.274 63.1998 72.706 65.4699 71.9705 68.0562L66.3979 87.6526C65.643 90.3072 67.1319 93.082 69.7581 93.915M94.7057 60.4094C96.5984 57.3751 99.9175 55.5317 103.489 55.5317H110.691C116.582 55.5317 121.628 59.7609 122.669 65.5717L122.809 66.3525C122.936 67.0635 123 67.7844 123 68.5068V114.611C123 116.438 122.439 118.22 121.394 119.717C119.731 122.097 117.014 123.514 114.114 123.514H98.3397M97.7481 117.417L98.3397 123.514M97.7481 117.417L84.4731 103.089M56.6758 119.856V136.318C56.6758 138.33 58.3187 139.953 60.3267 139.925M56.6758 119.856L71.2748 118.208C75.606 117.719 79.3455 114.946 81.0785 110.939L84.4731 103.089M56.6758 119.856L51.8317 119.407C49.6266 119.202 47.4077 119.604 45.4139 120.57L41.0962 122.661C39.944 123.219 38.6602 123.447 37.3868 123.319L30.7529 122.655C29.0361 122.483 28.0373 120.626 28.8379 119.094M86.187 99.126L94.7057 79.9202M86.187 99.126L69.7581 93.915M86.187 99.126L84.4731 103.089M98.3397 123.514L99.3773 134.208C99.6467 136.986 97.4902 139.401 94.7057 139.44M55.1546 105.833L53.3508 106.408C50.2244 107.405 46.8289 107.094 43.934 105.547L39.3342 103.089M55.1546 105.833L60.1247 104.684C64.3874 103.698 67.7941 100.495 69.0476 96.2957L69.7581 93.915M39.3342 103.089H32.8489C32.3189 103.089 31.8032 103.261 31.3792 103.58C29.9657 104.642 30.1054 106.809 31.6436 107.68L31.8803 107.814M39.3342 103.089V85.7124C39.3342 82.5134 36.7461 79.9202 33.5536 79.9202M18.6459 113.759H29.0173C29.7889 113.759 30.5391 113.505 31.152 113.035L32.1866 112.242C33.6989 111.083 33.5377 108.753 31.8803 107.814M18.6459 113.759L20.9268 116.299C22.9188 118.516 25.8982 119.569 28.8379 119.094M18.6459 113.759H13.1696C6.44851 113.759 1 108.3 1 101.565V86.9318C1 83.0594 4.13289 79.9202 7.99751 79.9202M28.8379 119.094L33.5536 118.332M7.99751 79.9202L8.39241 78.1395C8.92777 75.7255 10.1829 73.5317 11.9914 71.849L13.4738 70.4696M7.99751 79.9202H33.5536M7.99751 79.9202V100.65M13.4738 70.4696H13.1696C10.9852 70.4696 9.21446 68.6953 9.21446 66.5065C9.21446 64.3178 10.9852 62.5434 13.1696 62.5434H28.0773C30.2617 62.5434 32.0324 64.3178 32.0324 66.5065V66.8114C32.0324 68.8318 30.3979 70.4696 28.3815 70.4696M13.4738 70.4696H28.3815M28.3815 70.4696L30.207 74.4328L33.5536 79.9202M33.5536 79.9202V88.4561C33.5536 95.1908 28.1051 100.65 21.384 100.65H7.99751M7.99751 100.65C7.99751 104.684 11.2741 107.946 15.2991 107.92L31.8803 107.814M60.3267 139.925V154M60.3267 139.925L94.7057 139.44M94.7057 139.44V154M20.7756 83.5784V89.9804M20.7756 89.9804V96.3824M20.7756 89.9804H26.5561M20.7756 89.9804H14.3865",stroke:e,strokeWidth:"1"})})}function jNe(){const[t,e]=R.useState("customer"),r=Jn(),n=()=>{r(t==="customer"?"/auth/customer/signin":"/auth/pharmacy/signin")};return c.jsx(gg,{children:c.jsxs(Hi.div,{initial:"hidden",animate:"show",exit:"hidden",variants:{hidden:{opacity:0,y:6},show:{opacity:1,y:0,transition:{staggerChildren:.08,when:"beforeChildren"}}},children:[c.jsxs(Hi.h1,{variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.5}}},className:"mt-4 font-poppins text-[32px] sm:text-[38px] md:text-[42px] lg:text-[50px] font-thin tracking-tight leading-[109%] text-left lg:text-left lg:max-w-4xl",children:[c.jsx("span",{className:"block lg:inline",children:"HealthCare at"})," ",c.jsx("span",{className:"block lg:inline",children:"Your Doorstep"})]}),c.jsx(Hi.p,{variants:{hidden:{opacity:0,y:6},show:{opacity:1,y:0,transition:{duration:.45}}},className:"mt-1 text-black text-[13px] sm:text-[14px] md:text-[16px] tracking-tight font-thin leading-[154%] font-poppins text-left lg:text-left lg:max-w-2xl",children:"Pick up and deliver medical prescribed medications and, over-the-counter items from pharmacies to your doorstep."}),c.jsxs(Hi.div,{className:"mt-8 flex flex-row gap-4 w-full max-w-[350px] mx-0",variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.45}}},children:[c.jsxs(Hi.button,{onClick:()=>e("customer"),whileHover:{scale:1.035},whileTap:{scale:.985},className:`relative rounded-3xl p-0 text-left font-poppins bg-[#F7F7F7]/10 w-[169px] h-[169px] ${t==="customer"?"border-[#36A5FF] border-[3px] ring-3 ring-[#36A5FF]":"border-[#36A5FF] border-[1px]"} card-interactive transition-all duration-200 shadow-sm group`,children:[c.jsxs("div",{className:"absolute left-[9px] md:top-[70px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:["I’m a",c.jsx("br",{}),"customer"]}),c.jsx("div",{className:"absolute left-[9px] md:top-[127px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:"Sign Up or Login as a customer"})]}),c.jsxs(Hi.button,{onClick:()=>e("pharmacy"),whileHover:{scale:1.035},whileTap:{scale:.985},className:`relative rounded-3xl p-0 text-left font-poppins bg-[#F7F7F7]/10 w-[169px] h-[169px] ${t==="pharmacy"?"border-[#36A5FF] border-[3px] ring-3 ring-[#36A5FF]":"border-[#36A5FF] border-[1px]"} card-interactive transition-all duration-200 shadow-sm group`,children:[c.jsxs("div",{className:"absolute left-[9px] md:top-[70px] top-[80px] text-[20px] sm:text-[25px] font-light tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:["I’m a",c.jsx("br",{}),"pharmacy"]}),c.jsx("div",{className:"absolute left-[9px] md:top-[127px] top-[127px] text-black text-[12px] sm:text-[13px] font-extralight tracking-tight leading-[109%] font-poppins group-hover:text-[#36A5FF] transition-colors duration-200",children:"Sign Up or Login as a pharmacy"})]})]}),c.jsx(Hi.div,{className:"flex justify-start w-full max-w-[350px] mx-0",children:c.jsx(Hi.button,{onClick:n,disabled:!t,whileHover:t?{scale:1.02}:{},whileTap:t?{scale:.985}:{},className:`mt-8 w-full h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] font-light flex items-center justify-center btn-interactive transition-all duration-200 shadow-sm ${t?"border-[#36A5FF] text-[#36A5FF] cursor-pointer bg-white":"border-zinc-300 dark:border-gray-600 text-zinc-400 cursor-not-allowed bg-white"}`,children:"Continue"})}),c.jsx(Hi.div,{className:"pointer-events-none fixed bottom-0 left-0 right-0 z-10 md:hidden flex justify-center",variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.5}}},children:c.jsxs("div",{className:"flex flex-row items-end gap-0 justify-center",children:[c.jsx(INe,{className:"w-[22vw] max-w-[110px] h-auto",stroke:t==="customer"?"#36A5FF":"#9C9C9C"}),c.jsx(PNe,{className:"w-[28vw] max-w-[142px] h-auto -ml-4",stroke:t==="pharmacy"?"#36A5FF":"#989898"})]})})]})})}const RNe="Left",LNe="Right",FNe="Up",DNe="Down",Xm={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},L8={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},RL="mousemove",LL="mouseup",ONe="touchend",MNe="touchmove",BNe="touchstart";function VNe(t,e,r,n){return t>e?r>0?LNe:RNe:n>0?DNe:FNe}function FL(t,e){if(e===0)return t;const r=Math.PI/180*e,n=t[0]*Math.cos(r)+t[1]*Math.sin(r),s=t[1]*Math.cos(r)-t[0]*Math.sin(r);return[n,s]}function UNe(t,e){const r=d=>{const p="touches"in d;p&&d.touches.length>1||t((g,m)=>{m.trackMouse&&!p&&(document.addEventListener(RL,n),document.addEventListener(LL,i));const{clientX:x,clientY:y}=p?d.touches[0]:d,b=FL([x,y],m.rotationAngle);return m.onTouchStartOrOnMouseDown&&m.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},g),L8),{initial:b.slice(),xy:b,start:d.timeStamp||0})})},n=d=>{t((p,g)=>{const m="touches"in d;if(m&&d.touches.length>1)return p;if(d.timeStamp-p.start>g.swipeDuration)return p.swiping?Object.assign(Object.assign({},p),{swiping:!1}):p;const{clientX:x,clientY:y}=m?d.touches[0]:d,[b,S]=FL([x,y],g.rotationAngle),P=b-p.xy[0],T=S-p.xy[1],O=Math.abs(P),W=Math.abs(T),Y=(d.timeStamp||0)-p.start,L=Math.sqrt(O*O+W*W)/(Y||1),A=[P/(Y||1),T/(Y||1)],N=VNe(O,W,P,T),D=typeof g.delta=="number"?g.delta:g.delta[N.toLowerCase()]||Xm.delta;if(O<D&&W<D&&!p.swiping)return p;const j={absX:O,absY:W,deltaX:P,deltaY:T,dir:N,event:d,first:p.first,initial:p.initial,velocity:L,vxvy:A};j.first&&g.onSwipeStart&&g.onSwipeStart(j),g.onSwiping&&g.onSwiping(j);let F=!1;return(g.onSwiping||g.onSwiped||g[`onSwiped${N}`])&&(F=!0),F&&g.preventScrollOnSwipe&&g.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},p),{first:!1,eventData:j,swiping:!0})})},s=d=>{t((p,g)=>{let m;if(p.swiping&&p.eventData){if(d.timeStamp-p.start<g.swipeDuration){m=Object.assign(Object.assign({},p.eventData),{event:d}),g.onSwiped&&g.onSwiped(m);const x=g[`onSwiped${m.dir}`];x&&x(m)}}else g.onTap&&g.onTap({event:d});return g.onTouchEndOrOnMouseUp&&g.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},p),L8),{eventData:m})})},a=()=>{document.removeEventListener(RL,n),document.removeEventListener(LL,i)},i=d=>{a(),s(d)},o=(d,p)=>{let g=()=>{};if(d&&d.addEventListener){const m=Object.assign(Object.assign({},Xm.touchEventOptions),p.touchEventOptions),x=[[BNe,r,m],[MNe,n,Object.assign(Object.assign({},m),p.preventScrollOnSwipe?{passive:!1}:{})],[ONe,s,m]];x.forEach(([y,b,S])=>d.addEventListener(y,b,S)),g=()=>x.forEach(([y,b])=>d.removeEventListener(y,b))}return g},u={ref:d=>{d!==null&&t((p,g)=>{if(p.el===d)return p;const m={};return p.el&&p.el!==d&&p.cleanUpTouch&&(p.cleanUpTouch(),m.cleanUpTouch=void 0),g.trackTouch&&d&&(m.cleanUpTouch=o(d,g)),Object.assign(Object.assign(Object.assign({},p),{el:d}),m)})}};return e.trackMouse&&(u.onMouseDown=r),[u,o]}function zNe(t,e,r,n){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==r.preventScrollOnSwipe||e.touchEventOptions.passive!==r.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:n(t.el,e)})}function $Ne(t){const{trackMouse:e}=t,r=R.useRef(Object.assign({},L8)),n=R.useRef(Object.assign({},Xm)),s=R.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Xm),t);let a;for(a in Xm)n.current[a]===void 0&&(n.current[a]=Xm[a]);const[i,o]=R.useMemo(()=>UNe(l=>r.current=l(r.current,n.current),{trackMouse:e}),[e]);return r.current=zNe(r.current,n.current,s.current,o),i}const k6=[{title:"Welcome to Pharmasea",description:"Your trusted digital pharmacy marketplace.",illustration:"/onboarding/Onboarding 1.png"},{title:"Find Verified Pharmacies",description:"Easily locate licensed pharmacies near you.",illustration:"/onboarding/Onboarding 2.png"},{title:"Order & Refill Medications",description:"Order prescriptions and over-the-counter drugs with ease.",illustration:"/onboarding/Onboarding 3.png"},{title:"Secure Payments & Fast Delivery",description:"Pay safely through integrated wallets and get doorstep delivery.",illustration:"/onboarding/Onboarding 4.png"},{title:"Pharmacy Dashboard (for Vendors)",description:"Manage your products, sales, and customers in one place.",illustration:"/onboarding/Onboarding 5.png"},{title:"Join the Pharmasea Community",description:"Connect with healthcare professionals and customers easily.",illustration:"/onboarding/Onboarding 6.png"}],qNe=["#D1FFF8","#FFDBDB","#D9FFE1","#FFF7CD","#EFE1FF","#E1F2FF"];function HNe(){const t=Jn(),[e,r]=R.useState(0),[n,s]=R.useState(!1),a=k6.length,i=R.useMemo(()=>k6[e],[e]),o=()=>t("/auth/landing",{replace:!0}),l=()=>{if(!n){if(e>=a-1){t("/auth/landing",{replace:!0});return}s(!0),r(x=>Math.min(x+1,a-1))}},u=()=>{n||e!==0&&(s(!0),r(x=>Math.max(x-1,0)))},d=R.useCallback(x=>{x.key==="ArrowRight"&&l(),x.key==="ArrowLeft"&&u(),x.key==="Escape"&&o()},[e,n]);R.useEffect(()=>(window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)),[d]);const p=$Ne({onSwipedLeft:()=>l(),onSwipedRight:()=>u(),delta:50,preventDefaultTouchmoveEvent:!0,trackMouse:!0}),m={backgroundColor:qNe[e]||"#FFFFFF",width:"100vw",marginLeft:"calc(50% - 50vw)",marginRight:"calc(50% - 50vw)"};return c.jsxs("div",{className:"relative flex min-h-screen flex-col overflow-hidden transition-colors duration-300",style:m,children:[e!==a-1&&c.jsx("button",{type:"button",onClick:o,"aria-label":"Skip onboarding",className:"fixed right-4 top-4 z-50 pointer-events-auto text-sm font-normal text-sky-500 transition-colors hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-400 dark:text-slate-400 dark:hover:text-white",style:{WebkitTapHighlightColor:"transparent"},children:"Skip"}),c.jsx("div",{className:"flex w-full max-w-none flex-1 flex-col items-start px-0 pb-28 sm:px-0 lg:px-0",style:{paddingTop:23},children:c.jsxs("div",{...p,className:"flex flex-col mr-auto self-start w-full",children:[c.jsxs("div",{className:"w-full max-w-xl pr-6 sm:pr-8 md:pr-56 lg:pr-64 lg:max-w-none",children:[c.jsx(Hi.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-4 mt-16 flex justify-center lg:justify-center",children:c.jsx("img",{src:"/PharmLogo.png",alt:"Pharmasea",className:"mx-auto h-8 sm:h-10 md:h-12 lg:h-16 object-contain"})}),c.jsxs(X8e,{mode:"wait",children:[c.jsx(Hi.h1,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.45},className:"mt-8 text-left text-4xl font-light leading-tight sm:text-3xl md:text-4xl lg:text-6xl pl-4 sm:pl-6 lg:pl-6 pr-4 sm:pr-6 lg:pr-6",children:i.title.includes("(for Vendors)")?c.jsxs(c.Fragment,{children:[i.title.replace(" (for Vendors)",""),c.jsx("span",{className:"ml-2 align-left text-sm font-light text-slate-500 dark:text-slate-400",children:"(for Vendors)"})]}):i.title},i.title),c.jsx(Hi.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.45,delay:.04},className:"mt-4 max-w-xl lg:max-w-none text-left text-[17px] font-normal text-slate-500 dark:text-slate-300 sm:text-lg lg:text-[22px] pl-4 sm:pl-6 lg:pl-6 pr-4 sm:pr-6 lg:pr-6",children:i.description},i.description)]})]}),c.jsx("div",{className:"relative mt-8 flex w-full justify-end",style:{bottom:70},children:c.jsx("div",{className:"w-full max-w-[400px] sm:max-w-[440px] h-0","aria-hidden":!0})})]})}),c.jsxs(Hi.span,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.35},className:"fixed left-4 top-4 z-50 text-xs uppercase tracking-[0.25em] text-slate-400 dark:text-slate-500 pointer-events-none",children:["Step ",e+1," of ",a]}),c.jsx(Hi.img,{src:i.illustration,alt:"","aria-hidden":"true",loading:"lazy",initial:{opacity:0,y:24,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:24,scale:.98},transition:{type:"spring",stiffness:160,damping:20},onAnimationComplete:()=>s(!1),className:"fixed bottom-4 right-4 pointer-events-none z-10 w-[320px] max-w-[90vw] sm:w-[420px] md:w-[520px] object-contain will-change-transform",style:{maxWidth:"min(520px, 90vw)"}},i.illustration),c.jsx("div",{"aria-hidden":!0,className:"fixed inset-x-0 bottom-6 z-40 flex justify-center pointer-events-none",children:c.jsxs("div",{className:"w-full max-w-md pointer-events-auto relative flex items-center justify-between px-4",children:[c.jsx("button",{type:"button",onClick:u,disabled:e===0,"aria-label":"Go to previous",className:"z-20 text-sm font-normal text-slate-500 transition-colors hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-400 disabled:pointer-events-none disabled:opacity-0 dark:text-slate-400 dark:hover:text-white bg-white/0 backdrop-blur rounded-md px-3 py-2",children:"back"}),e===a-1?c.jsx("div",{className:"w-0"}):c.jsx("div",{className:"flex items-center gap-2 z-10 pointer-events-auto",children:k6.map((x,y)=>c.jsx(Hi.span,{layout:!0,initial:!1,animate:{scale:y===e?1.15:1,backgroundColor:y===e?"#0f172a":"#e6e9ee"},transition:{type:"spring",stiffness:300,damping:20},onClick:()=>{n||(s(!0),r(y))},className:"h-2 w-2 rounded-full cursor-pointer dark:cursor-pointer","aria-label":`Go to step ${y+1}`},y))}),c.jsx("div",{className:"relative w-full flex justify-end items-center z-20 pointer-events-auto px-4",children:c.jsx(Hi.div,{layoutId:"cta",layout:!0,transition:{layout:{type:"spring",stiffness:320,damping:28}},className:"flex items-center justify-end w-full",style:{display:"flex",justifyContent:"flex-end"},children:e===a-1?c.jsx(Hi.button,{type:"button",onClick:l,whileTap:{scale:.985},whileHover:{scale:1.02},className:"h-14 shadow-md bg-sky-600 text-lg font-medium text-white transition-colors hover:bg-sky-600/90 active:scale-[1] dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200 pointer-events-auto",style:{minWidth:220,borderRadius:999,zIndex:999},children:"Continue"},"continue-btn"):c.jsx(Hi.button,{type:"button",onClick:l,whileTap:{scale:.96},whileHover:{scale:1.02},className:"flex h-14 items-center justify-center shadow-md rounded-full bg-sky-600 text-lg font-normal text-white transition-colors dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200 pointer-events-auto",style:{width:56,height:56,borderRadius:999,zIndex:999},children:"Next"},"next-btn")})})]})})]})}function My({to:t}){const e=Jn();return c.jsx("button",{onClick:()=>e(t||-1),className:"mb-5 w-[70px] h-[20px] font-poppins font-extralight tracking-tight text-[12px] flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-zinc-300 dark:border-gray-600 dark:border-gray-600",children:"← Back"})}function KW({email:t}){return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white dark:bg-gray-800",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 max-w-md w-full text-center",children:[c.jsxs("h2",{className:"text-xl font-thin mb-2",children:["Registration",c.jsx("br",{}),"Successful!"]}),c.jsxs("p",{className:"mb-4 text-zinc-600 text-[13px]",children:["A verification link has been sent to ",c.jsx("b",{children:t}),".",c.jsx("br",{}),"Please check your inbox and verify your email to continue."]}),c.jsx(sp,{to:"/auth/customer/signin",className:"mt-4 inline-block px-4 py-2 bg-sky-600 text-white rounded-full",children:"Go to Sign In"})]})})}const WNe=()=>c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]});function YW({onClick:t,loading:e=!1,children:r,className:n=""}){return c.jsxs("button",{type:"button",onClick:t,disabled:e,className:`w-full sm:w-[359px] h-[47px] rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center gap-3 font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light text-gray-700 dark:text-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${n}`,children:[e?c.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):c.jsx(WNe,{}),c.jsx("span",{children:r})]})}const XW=()=>{if(typeof window>"u"||new URLSearchParams(window.location.search).get("debugGoogleAuth")!=="1")return;console.group("🔍 Google Auth Configuration Diagnostic"),console.log("Firebase Config:"),console.log("- API Key:","✅ Present"),console.log("- Auth Domain:","✅ Present"),console.log("- Project ID:","✅ Present"),console.log("Environment:","🚀 Production"),console.log("Host:",window.location.hostname),console.log("Protocol:",window.location.protocol),console.log("User Agent:",navigator.userAgent.includes("Chrome")?"✅ Chrome":navigator.userAgent.includes("Safari")?"⚠️ Safari (may have popup restrictions)":navigator.userAgent.includes("Firefox")?"⚠️ Firefox (may have popup restrictions)":"❓ Other"),console.groupEnd();const e=document.createElement("div");e.style.cssText=`
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    z-index: 9999;
    max-width: 300px;
  `,e.innerHTML=`
    <strong>🔍 Google Auth Debug</strong><br>
    API Key: ✅<br>
    Auth Domain: ✅<br>
    Project ID: ✅<br>
    Host: ${window.location.hostname}<br>
    <small>Add ?debugGoogleAuth=1 to see console logs</small>
  `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e4)};function GNe(){const{signUp:t,signUpWithGoogle:e}=Vn(),{userCoords:r,location:n,locationError:s}=rg(),[a,i]=R.useState({name:"",email:"",phone:"",password:"",address:""}),[o,l]=R.useState(!1),[u,d]=R.useState(!1),[p,g]=R.useState(null),[m,x]=R.useState([]),[y,b]=R.useState(null),S=R.useRef(),[P,T]=R.useState(!1),O=Jn();R.useEffect(()=>{XW()},[]);const W=async D=>{if(!D)return x([]);const F=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(D)}&addressdetails=1&limit=5`)).json();x(F)},Y=D=>{const j=D.target.value;i({...a,address:j}),b(null),clearTimeout(S.current),S.current=setTimeout(()=>W(j),400)},L=D=>{i({...a,address:D.display_name}),b(D),x([])},A=async D=>{D.preventDefault(),l(!0);try{if(!a.address)throw new Error("Address is required");const j=await t({email:a.email,password:a.password,displayName:a.name,role:"customer",address:a.address,lat:y?.lat,lon:y?.lon,phone:a.phone});g(a.email)}catch(j){alert(j.message)}finally{l(!1)}},N=async()=>{d(!0);try{console.log("Starting Google registration process..."),console.log("User location:",{location:n,userCoords:r});const D={address:n,latitude:r?.latitude,longitude:r?.longitude},j=await e(D);console.log("Google registration result:",j),j.isNewUser?(console.log("New user created, showing success screen"),g(j.user.email)):j.existingCustomer?(console.log("Existing customer, navigating to home"),O("/")):(console.log("Existing user, navigating to home"),O("/"))}catch(D){console.error("Google registration failed:",D),D.message&&!D.message.includes("Firebase:")?alert(D.message):alert("Google registration failed. Please try again or contact support if the issue persists.")}finally{d(!1)}};return p?c.jsx(KW,{email:p}):c.jsxs(gg,{children:[c.jsx(My,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),c.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",c.jsx("br",{}),"Customer"]}),c.jsxs("form",{onSubmit:A,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[c.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Full Name",value:a.name,onChange:D=>i({...a,name:D.target.value})}),c.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:a.email,onChange:D=>i({...a,email:D.target.value})}),c.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:a.phone,onChange:D=>i({...a,phone:D.target.value})}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Address (required)",value:a.address||"",onChange:Y,required:!0,autoComplete:"off"}),m.length>0&&c.jsx("div",{className:"absolute left-0 right-0 bg-white dark:bg-gray-800 border border-zinc-200 rounded shadow z-10 max-h-40 overflow-y-auto",children:m.map(D=>c.jsx("div",{className:"px-4 py-2 hover:bg-sky-50 cursor-pointer text-[13px]",onClick:()=>L(D),children:D.display_name},D.place_id))})]}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:P?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:a.password,onChange:D=>i({...a,password:D.target.value})}),c.jsx("button",{type:"button",onClick:()=>T(D=>!D),"aria-pressed":P,"aria-label":P?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:P?c.jsx(l4,{className:"h-5 w-5"}):c.jsx(vy,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"flex justify-center w-full",children:c.jsx("button",{disabled:o,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:o?"Registering…":"Register"})})]}),c.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[c.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"}),c.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:"or"}),c.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"})]}),c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsx(YW,{onClick:N,loading:u,children:"Register with Google"})}),!s&&r&&c.jsx("div",{className:"mt-3 text-center text-xs text-gray-500 dark:text-gray-400",children:"Google registration will use your current location as address"}),s&&c.jsx("div",{className:"mt-3 text-center text-xs text-red-500 dark:text-red-400",children:"Location access required for Google registration"}),c.jsxs("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",c.jsx(sp,{to:"/auth/customer/signin",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Sign In"})]})]})}const DL=t=>{const e=t.code||t.message;return e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"Invalid email or password. Please check your credentials and try again.":e.includes("auth/invalid-email")?"Please enter a valid email address.":e.includes("auth/too-many-requests")?"Too many failed attempts. Please try again later.":e.includes("auth/network-request-failed")?"Network error. Please check your connection and try again.":e.includes("auth/popup-closed-by-user")?"Google sign-in was cancelled. Please try again.":e.includes("auth/popup-blocked")?"Pop-up was blocked by your browser. Please allow pop-ups and try again.":e.includes("auth/account-exists-with-different-credential")?"An account with this email exists with a different sign-in method. Please use your email and password instead.":!e.includes("auth/")&&!e.includes("Firebase:")?t.message:"Sign in failed. Please try again."};function KNe(){const{signIn:t,signInWithGoogle:e}=Vn(),[r,n]=R.useState({email:"",password:""}),[s,a]=R.useState(!1),[i,o]=R.useState(!1),[l,u]=R.useState(null),[d,p]=R.useState(!1),g=Jn();R.useEffect(()=>{XW()},[]);const m=async y=>{y.preventDefault(),a(!0),u(null);try{await t(r.email,r.password),g("/")}catch(b){u(DL(b))}finally{a(!1)}},x=async()=>{o(!0),u(null);try{console.log("Starting Google sign-in process...");const y=await e();console.log("Google sign-in successful, navigating to home"),g("/")}catch(y){console.error("Google sign-in failed:",y),y.message&&!y.message.includes("Firebase:")?u(y.message):u(DL(y))}finally{o(!1)}};return c.jsxs(gg,{children:[c.jsx(My,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),c.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left text-black dark:text-white",children:["I'm a",c.jsx("br",{}),"Customer"]}),l&&c.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[c.jsx(FS,{className:"h-4 w-4 text-red-500 dark:text-red-400 flex-shrink-0"}),c.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:l}),c.jsx("button",{onClick:()=>u(null),className:"ml-auto text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-300","aria-label":"Dismiss error",children:"×"})]}),c.jsxs("form",{onSubmit:m,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[c.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:r.email,onChange:y=>n({...r,email:y.target.value})}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:d?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:r.password,onChange:y=>n({...r,password:y.target.value}),"aria-label":"Password"}),c.jsx("button",{type:"button",onClick:()=>p(y=>!y),"aria-pressed":d,"aria-label":d?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200",children:d?c.jsx(l4,{className:"h-5 w-5"}):c.jsx(vy,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"flex justify-center w-full",children:c.jsx("button",{disabled:s,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] dark:border-sky-400 text-[#36A5FF] dark:text-sky-400 bg-white dark:bg-gray-800 mt-4 flex items-center justify-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Signing in…":"Sign In"})})]}),c.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[c.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"}),c.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:"or"}),c.jsx("div",{className:"border-t border-gray-300 dark:border-gray-600 flex-1"})]}),c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsx(YW,{onClick:x,loading:i,children:"Sign in with Google"})}),c.jsx("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:c.jsx(sp,{to:"/auth/forgot-password",className:"text-sky-600 dark:text-sky-400 font-medium hover:text-sky-700 dark:hover:text-sky-300",children:"Forgot password?"})}),c.jsxs("div",{className:"mt-2 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Don't have an account? ",c.jsx(sp,{to:"/auth/customer/register",className:"text-sky-600 dark:text-sky-400 font-medium hover:text-sky-700 dark:hover:text-sky-300",children:"Register"})]})]})}function YNe(){const{signUp:t}=Vn(),[e,r]=R.useState({name:"",email:"",phone:"",address:"",password:""}),[n,s]=R.useState(!1),[a,i]=R.useState([]),[o,l]=R.useState(null),[u,d]=R.useState(null),p=R.useRef(),[g,m]=R.useState(!1);Jn();const x=async S=>{if(!S)return i([]);const T=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(S)}&addressdetails=1&limit=5`)).json();i(T)},y=S=>{const P=S.target.value;r({...e,address:P}),l(null),clearTimeout(p.current),p.current=setTimeout(()=>x(P),400)},b=async S=>{S.preventDefault(),s(!0);try{await t({email:e.email,password:e.password,displayName:e.name,role:"pharmacy"});const P=sh.currentUser?.uid;P&&await ad(ir(ct,"pharmacies",P),{id:P,name:e.name,email:e.email,address:e.address,lat:o?.lat||null,lon:o?.lon||null,etaMins:25,phone:e.phone}),d(e.email)}catch(P){alert(P.message)}finally{s(!1)}};return u?c.jsx(KW,{email:u}):c.jsxs(gg,{children:[c.jsx(My,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),c.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left",children:["I'm a",c.jsx("br",{}),"Pharmacy"]}),c.jsxs("form",{onSubmit:b,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[c.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Pharmacy Name",value:e.name,onChange:S=>r({...e,name:S.target.value})}),c.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:S=>r({...e,email:S.target.value})}),c.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Phone Number",value:e.phone,onChange:S=>r({...e,phone:S.target.value})}),c.jsx("input",{className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Address",value:e.address,onChange:y}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:g?"text":"password",className:"w-full mb-0 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Choose a password",value:e.password,onChange:S=>r({...e,password:S.target.value})}),c.jsx("button",{type:"button",onClick:()=>m(S=>!S),"aria-pressed":g,"aria-label":g?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:g?c.jsx(l4,{className:"h-5 w-5"}):c.jsx(vy,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"flex justify-center w-full",children:c.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:n?"Registering…":"Register"})})]}),c.jsxs("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Already have an account? ",c.jsx(sp,{to:"/auth/pharmacy/signin",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Sign In"})]})]})}const XNe=t=>{const e=t.code||t.message;return e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"Invalid email or password. Please check your credentials and try again.":e.includes("auth/invalid-email")?"Please enter a valid email address.":e.includes("auth/too-many-requests")?"Too many failed attempts. Please try again later.":e.includes("auth/network-request-failed")?"Network error. Please check your connection and try again.":"Sign in failed. Please try again."};function QNe(){const{signIn:t}=Vn(),[e,r]=R.useState({email:"",password:""}),[n,s]=R.useState(!1),[a,i]=R.useState(null),[o,l]=R.useState(!1),u=Jn(),d=async p=>{p.preventDefault(),s(!0),i(null);try{await t(e.email,e.password),u("/")}catch(g){i(XNe(g))}finally{s(!1)}};return c.jsxs(gg,{children:[c.jsx(My,{to:"/auth/landing",className:"w-[78px] h-[27px] font-poppins font-extralight tracking-tight text-[14px] sm:text-[16px]"}),c.jsxs("div",{className:"font-poppins text-[32px] sm:text-[42px] md:text-[54px] lg:text-[64px] font-thin tracking-tight leading-[109%] text-left text-black dark:text-white",children:["I'm a",c.jsx("br",{}),"Pharmacy"]}),a&&c.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[c.jsx(FS,{className:"h-4 w-4 text-red-500 dark:text-red-400 flex-shrink-0"}),c.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:a}),c.jsx("button",{onClick:()=>i(null),className:"ml-auto text-red-400 dark:text-red-500 hover:text-red-600 dark:hover:text-red-300","aria-label":"Dismiss error",children:"×"})]}),c.jsxs("form",{onSubmit:d,className:"mt-8 w-full max-w-md md:max-w-xl lg:max-w-2xl mx-auto font-poppins",children:[c.jsx("input",{type:"email",className:"w-full mb-4 px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Email Address",value:e.email,onChange:p=>r({...e,email:p.target.value})}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:o?"text":"password",className:"w-full px-4 py-2 border-b border-zinc-300 dark:border-gray-600 bg-transparent font-thin text-[13px] sm:text-[14px] md:text-[16px] lg:text-[18px] font-poppins placeholder:text-left text-black dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:border-[#36A5FF]",placeholder:"Password",value:e.password,onChange:p=>r({...e,password:p.target.value}),"aria-label":"Password"}),c.jsx("button",{type:"button",onClick:()=>l(p=>!p),"aria-pressed":o,"aria-label":o?"Hide password":"Show password",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-500 dark:text-zinc-400",children:o?c.jsx(l4,{className:"h-5 w-5"}):c.jsx(vy,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"flex justify-center w-full",children:c.jsx("button",{disabled:n,className:"w-full sm:w-[359px] h-[47px] rounded-full border font-poppins text-[14px] sm:text-[16px] lg:text-[18px] font-light border-[#36A5FF] text-[#36A5FF] bg-white dark:bg-gray-800 mt-4 flex items-center justify-center",children:n?"Signing in…":"Sign In"})})]}),c.jsx("div",{className:"mt-6 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:c.jsx(sp,{to:"/auth/forgot-password",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Forgot password?"})}),c.jsxs("div",{className:"mt-2 text-center text-zinc-500 dark:text-zinc-400 text-[13px] sm:text-[14px] md:text-[16px] font-light",children:["Don’t have an account? ",c.jsx(sp,{to:"/auth/pharmacy/register",className:"text-sky-600 dark:text-sky-400 font-medium",children:"Register"})]})]})}function JNe(){const{user:t,logout:e}=Vn(),[r,n]=R.useState(!1),[s,a]=R.useState(!1),i=Jn();if(R.useEffect(()=>{t&&t.emailVerified},[t]),!t||t.emailVerified)return null;const o=async()=>{a(!0),await jV(t),n(!0),a(!1)},l=async()=>{try{await e()}catch{}window.history&&window.history.length>1?i(-1):i("/auth/landing")};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:c.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center",children:[c.jsx("h2",{className:"text-xl font-light mb-2",children:"Verify your email"}),c.jsxs("p",{className:"mb-4 text-zinc-600 text-[14px] font-thin",children:["A verification link has been sent to ",c.jsx("b",{children:t.email}),".",c.jsx("br",{}),"Please check your inbox and click the link to activate your account."]}),c.jsx("button",{className:"px-4 py-2 bg-sky-600 text-white rounded-full text-[12px] font-light disabled:opacity-50",onClick:o,disabled:s||r,children:r?"Verification Sent!":s?"Sending...":"Resend Email"}),c.jsx("button",{className:"block mt-4 mx-auto text-sm text-zinc-500 underline",onClick:l,children:"Back"})]})})}function ZNe(){const[t,e]=R.useState(""),[r,n]=R.useState(!1),[s,a]=R.useState(""),[i,o]=R.useState(!1),l=async u=>{u.preventDefault(),o(!0),a("");try{await cle(t),n(!0)}catch(d){a(d.message||"Failed to send reset email.")}o(!1)};return c.jsxs(gg,{children:[c.jsx(My,{to:"/auth/landing"}),c.jsxs("div",{className:"w-full max-w-md text-center bg-white dark:bg-gray-800 rounded-2xl  p-8",children:[c.jsx("img",{src:"/ForgotPasswordIllustration.png",alt:"Forgot Password",className:"mx-auto mb-4 w-28 h-28 object-contain"}),c.jsx("h2",{className:"text-xl font-light mb-4",children:"Forgot Password?"}),r?c.jsx("p",{className:"text-green-600 font-thin text-[14px]",children:"A password reset link has been sent to your email."}):c.jsxs("form",{onSubmit:l,className:"space-y-4 text-left",children:[c.jsx("input",{type:"email",className:"w-full border-b border-zinc-300 dark:border-gray-600 dark:border-gray-600 text-[12px] mt-2 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-200 focus:border-sky-400 dark:border-gray-600",placeholder:"Enter your email",value:t,onChange:u=>e(u.target.value),required:!0}),s&&c.jsx("div",{className:"text-red-500 text-sm",children:s}),c.jsxs("button",{type:"submit",disabled:i,className:"w-full rounded-full bg-sky-600 text-white text-[13px] font-light py-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i&&c.jsx("span",{className:"inline-block h-4 w-4 border-2 border-white/70 border-t-transparent rounded-full animate-spin"}),i?"Sending…":"Send Reset Link"]})]})]})]})}function eEe(){const t=Jn(),[e]=yX(),{t:r}=Ds(),n=e.get("pharmacyId"),[s,a]=R.useState({name:"",price:"",category:"Over-the-Counter",stock:0,sku:"",tags:"",image:"",description:""}),[i,o]=R.useState(null),[l,u]=R.useState(!1),[d,p]=R.useState(!1),g=()=>s.name.trim()?!s.price||isNaN(Number(s.price))||Number(s.price)<=0?(alert(r("invalid_price","Please enter a valid price")),!1):!0:(alert(r("please_fill_required","Please fill in all required fields")),!1),m=async()=>{if(g()){u(!0);try{let y=s.image;if(!y&&i){p(!0);const S=`products/${n}/${Date.now()}_${i.name}`,P=NS(CS,S);await kS(P,i),y=await SS(P),p(!1)}const b=(s.tags||"").split(",").map(S=>S.trim()).filter(Boolean);await bV({...s,image:y,price:Number(s.price),pharmacyId:n,tags:b}),alert(r("product_created_success","Product created successfully!")),t(-1)}catch(y){console.error("Error creating product:",y),alert(r("error_creating_product","Error creating product. Please try again."))}finally{u(!1),p(!1)}}},x=[{value:"Prescription",label:r("prescription_drugs","Prescription Drugs")},{value:"Over-the-Counter",label:r("over_counter","Over-the-counter")},{value:"General Pills",label:r("general_pills","General Pills")},{value:"Controlled",label:r("controlled_substances","Controlled Substances")},{value:"Syrup",label:r("syrup_liquid","Syrup/Liquid")},{value:"Therapeutic",label:r("therapeutic_drugs","Therapeutic Drugs")},{value:"Others",label:r("supplements_vitamins","Supplements & Vitamins")}];return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8",children:c.jsxs("div",{className:"max-w-lg md:max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-3xl shadow-xl border border-[#9ED3FF] dark:border-gray-700 overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-blue-600 p-6 text-white",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors duration-200",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsx("h1",{className:"text-xl font-light font-poppins",children:r("add_product_title","Add New Product")})]})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[r("product_name","Product Name")," *"]}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("product_name_placeholder","Enter product name"),value:s.name,onChange:y=>a({...s,name:y.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[r("product_price","Price")," *"]}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("product_price_placeholder","Enter price"),type:"number",value:s.price,onChange:y=>a({...s,price:y.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[r("product_category","Category")," *"]}),c.jsxs("select",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500",value:s.category,onChange:y=>a({...s,category:y.target.value}),children:[c.jsx("option",{value:"",disabled:!0,children:r("select_category","Select Category")}),x.map(y=>c.jsx("option",{value:y.value,children:y.label},y.value))]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("stock_quantity","Stock Quantity")}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("stock_placeholder","Enter stock quantity"),type:"number",value:s.stock,onChange:y=>a({...s,stock:Number(y.target.value)})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_sku","SKU")}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("sku_placeholder","Enter SKU (optional)"),value:s.sku,onChange:y=>a({...s,sku:y.target.value})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_tags","Tags")}),c.jsx("input",{className:"w-full border-b border-[#9ED3FF] dark:border-gray-600 text-[13px] font-light py-3 outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("tags_placeholder","Add tags separated by commas"),value:s.tags,onChange:y=>a({...s,tags:y.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_image","Product Image")}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"file",accept:"image/*",className:"w-full border border-[#9ED3FF] dark:border-gray-600 rounded-lg p-3 text-[13px] font-light focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:y=>o(y.target.files?.[0]||null)}),c.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:"or"}),c.jsx("input",{className:"w-full border border-[#9ED3FF] dark:border-gray-600 rounded-lg p-3 text-[13px] font-light outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:r("image_url_placeholder","Or enter image URL"),value:s.image,onChange:y=>a({...s,image:y.target.value})})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("product_description","Description")}),c.jsx("textarea",{rows:4,placeholder:r("description_placeholder","Enter product description"),value:s.description,onChange:y=>a({...s,description:y.target.value}),className:"w-full border border-[#9ED3FF] dark:border-gray-600 rounded-lg p-3 text-[13px] font-light outline-none focus:border-sky-500 dark:focus:border-sky-400 transition-colors duration-200 hover:border-sky-400 dark:hover:border-sky-500 resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),c.jsx("div",{className:"p-6 pt-0",children:c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{className:"flex-1 rounded-full bg-gradient-to-r from-sky-500 to-blue-600 text-white text-sm font-medium py-3 shadow-lg hover:from-sky-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",disabled:l||d,onClick:m,children:d?r("uploading","Uploading..."):l?r("creating_product","Creating Product..."):r("create_product","Create Product")}),c.jsx("button",{className:"flex-1 rounded-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 text-sm font-medium py-3 hover:border-gray-400 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",onClick:()=>t(-1),disabled:l,children:r("cancel","Cancel")})]})})]})})}function tEe(){const[t,e]=R.useState([]),[r,n]=R.useState("all"),[s,a]=R.useState(!0),{user:i}=Vn(),o=Jn(),{t:l}=Ds();R.useEffect(()=>{const x=LS(e,50);return a(!1),x},[]);const u=x=>{const y=new Date,b=new Date(y.getFullYear(),y.getMonth(),y.getDate());switch(x){case"today":return{start:b,end:new Date(b.getTime()+1440*60*1e3)};case"week":const S=new Date(b.getTime()-b.getDay()*24*60*60*1e3);return{start:S,end:new Date(S.getTime()+10080*60*1e3)};case"month":const P=new Date(y.getFullYear(),y.getMonth(),1),T=new Date(y.getFullYear(),y.getMonth()+1,1);return{start:P,end:T};case"all":default:return null}},d=R.useMemo(()=>{if(r==="all")return t.slice(0,12);const x=u(r);return x?t.filter(y=>{if(!y.createdAt)return!1;const b=y.createdAt.toDate?y.createdAt.toDate():new Date(y.createdAt);return b>=x.start&&b<x.end}).slice(0,12):t.slice(0,12)},[t,r]),p=x=>{o(`/product/${x}`)},g=x=>{i?R1(i.uid,x,1):alert(l("please_sign_in","Please sign in"))},m=[{key:"all",label:"All Time",icon:"🌟"},{key:"month",label:"This Month",icon:"📅"},{key:"week",label:"This Week",icon:"📊"},{key:"today",label:"Today",icon:"⚡"}];return s?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:c.jsx("div",{className:"max-w-6xl mx-auto",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-lg mb-6 w-48"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[...Array(12)].map((x,y)=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4",children:[c.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-3"}),c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]},y))})]})})}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[c.jsx("div",{className:"sticky top-0 z-40 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700",children:c.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:c.jsx(Xd,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white font-poppins",children:l("all_new_products","New Arrivals")}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Discover the latest products from our pharmacies"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(OV,{className:"h-5 w-5 text-gray-500"}),c.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[d.length," products"]})]})]})})}),c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(GT,{className:"h-5 w-5 text-indigo-600"}),c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filter by Time"})]}),c.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:m.map(x=>c.jsxs("button",{onClick:()=>n(x.key),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all whitespace-nowrap min-w-fit ${r===x.key?"bg-indigo-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600"}`,children:[c.jsx("span",{className:"text-lg",children:x.icon}),x.label]},x.key))})]}),d.length>0?c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 md:gap-6",children:d.map((x,y)=>c.jsxs("div",{className:"group relative bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700",style:{animationDelay:`${y*.1}s`,animation:"fadeInUp 0.6s ease-out forwards"},children:[c.jsx("div",{className:"absolute top-3 left-3 z-10",children:c.jsx("span",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"NEW"})}),c.jsx("div",{className:"p-4",children:c.jsx(Ek,{product:x,onOpen:()=>p(x.id),onAdd:()=>g(x.id),cardWidth:"100%",cardHeight:"140px",nameSize:"13px",nameWeight:"semibold",nameTracking:"-0.3px",priceSize:"12px",priceColor:"#6B7280",priceWeight:"medium",addColor:"#4F46E5",addSize:"11px",showBorder:!1})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},x.id||x.sku))}):c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:c.jsx(GT,{className:"h-12 w-12 text-gray-400"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No products found"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Try selecting a different time filter to see more products."}),c.jsx("button",{onClick:()=>n("all"),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:"Show All Products"})]}),d.length>0&&c.jsx("div",{className:"mt-12 text-center",children:c.jsxs("div",{className:"inline-flex items-center gap-4 px-6 py-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:d.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Products"})]}),c.jsx("div",{className:"w-px h-8 bg-gray-300 dark:bg-gray-600"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:new Date().toLocaleDateString()}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Updated"})]})]})})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function Hr(t,e,r,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}function it(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}let QW=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return QW=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function F8(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const D8=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class jr extends Error{}class wo extends jr{constructor(e,r,n,s){super(`${wo.makeMessage(e,r,n)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=r;const a=r;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,r,n){const s=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,r,n,s){if(!e||!s)return new D4({message:n,cause:D8(r)});const a=r?.error;return e===400?new JW(e,a,n,s):e===401?new ZW(e,a,n,s):e===403?new eG(e,a,n,s):e===404?new tG(e,a,n,s):e===409?new rG(e,a,n,s):e===422?new nG(e,a,n,s):e===429?new sG(e,a,n,s):e>=500?new aG(e,a,n,s):new wo(e,a,n,s)}}class Fc extends wo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class D4 extends wo{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class NE extends D4{constructor({message:e}={}){super({message:e??"Request timed out."})}}class JW extends wo{}class ZW extends wo{}class eG extends wo{}class tG extends wo{}class rG extends wo{}class nG extends wo{}class sG extends wo{}class aG extends wo{}class iG extends jr{constructor(){super("Could not parse response content as the length limit was reached")}}class oG extends jr{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class vx extends Error{constructor(e){super(e)}}const rEe=/^[a-z][a-z0-9+.-]*:/i,nEe=t=>rEe.test(t);let Cl=t=>(Cl=Array.isArray,Cl(t)),OL=Cl;function lG(t){return typeof t!="object"?{}:t??{}}function sEe(t){if(!t)return!0;for(const e in t)return!1;return!0}function aEe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S6(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const iEe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new jr(`${t} must be an integer`);if(e<0)throw new jr(`${t} must be a positive integer`);return e},oEe=t=>{try{return JSON.parse(t)}catch{return}},By=t=>new Promise(e=>setTimeout(e,t)),Mm="6.3.0",lEe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function cEe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uEe=()=>{const t=cEe();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mm,"X-Stainless-OS":BL(Deno.build.os),"X-Stainless-Arch":ML(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mm,"X-Stainless-OS":BL(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ML(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=dEe();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Mm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function dEe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const s=n[1]||0,a=n[2]||0,i=n[3]||0;return{browser:e,version:`${s}.${a}.${i}`}}}return null}const ML=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",BL=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let VL;const fEe=()=>VL??(VL=uEe());function hEe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function cG(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function uG(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return cG({start(){},async pull(r){const{done:n,value:s}=await e.next();n?r.close():r.enqueue(s)},async cancel(){await e.return?.()}})}function dG(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function pEe(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),r=e.cancel();e.releaseLock(),await r}const mEe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),fG="RFC3986",hG=t=>String(t),UL={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:hG},gEe="RFC1738";let O8=(t,e)=>(O8=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),O8(t,e));const Uu=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),N6=1024,xEe=(t,e,r,n,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=N6){const l=a.length>=N6?a.slice(o,o+N6):a,u=[];for(let d=0;d<l.length;++d){let p=l.charCodeAt(d);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===gEe&&(p===40||p===41)){u[u.length]=l.charAt(d);continue}if(p<128){u[u.length]=Uu[p];continue}if(p<2048){u[u.length]=Uu[192|p>>6]+Uu[128|p&63];continue}if(p<55296||p>=57344){u[u.length]=Uu[224|p>>12]+Uu[128|p>>6&63]+Uu[128|p&63];continue}d+=1,p=65536+((p&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=Uu[240|p>>18]+Uu[128|p>>12&63]+Uu[128|p>>6&63]+Uu[128|p&63]}i+=u.join("")}return i};function yEe(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function zL(t,e){if(Cl(t)){const r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}const pG={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},mG=function(t,e){Array.prototype.push.apply(t,Cl(e)?e:[e])};let $L;const Ci={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:xEe,encodeValuesOnly:!1,format:fG,formatter:hG,indices:!1,serializeDate(t){return($L??($L=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function vEe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const E6={};function gG(t,e,r,n,s,a,i,o,l,u,d,p,g,m,x,y,b,S){let P=t,T=S,O=0,W=!1;for(;(T=T.get(E6))!==void 0&&!W;){const D=T.get(t);if(O+=1,typeof D<"u"){if(D===O)throw new RangeError("Cyclic object value");W=!0}typeof T.get(E6)>"u"&&(O=0)}if(typeof u=="function"?P=u(e,P):P instanceof Date?P=g?.(P):r==="comma"&&Cl(P)&&(P=zL(P,function(D){return D instanceof Date?g?.(D):D})),P===null){if(a)return l&&!y?l(e,Ci.encoder,b,"key",m):e;P=""}if(vEe(P)||yEe(P)){if(l){const D=y?e:l(e,Ci.encoder,b,"key",m);return[x?.(D)+"="+x?.(l(P,Ci.encoder,b,"value",m))]}return[x?.(e)+"="+x?.(String(P))]}const Y=[];if(typeof P>"u")return Y;let L;if(r==="comma"&&Cl(P))y&&l&&(P=zL(P,l)),L=[{value:P.length>0?P.join(",")||null:void 0}];else if(Cl(u))L=u;else{const D=Object.keys(P);L=d?D.sort(d):D}const A=o?String(e).replace(/\./g,"%2E"):String(e),N=n&&Cl(P)&&P.length===1?A+"[]":A;if(s&&Cl(P)&&P.length===0)return N+"[]";for(let D=0;D<L.length;++D){const j=L[D],F=typeof j=="object"&&typeof j.value<"u"?j.value:P[j];if(i&&F===null)continue;const M=p&&o?j.replace(/\./g,"%2E"):j,Z=Cl(P)?typeof r=="function"?r(N,M):N:N+(p?"."+M:"["+M+"]");S.set(t,O);const ue=new WeakMap;ue.set(E6,S),mG(Y,gG(F,Z,r,n,s,a,i,o,r==="comma"&&y&&Cl(P)?null:l,u,d,p,g,m,x,y,b,ue))}return Y}function wEe(t=Ci){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ci.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=fG;if(typeof t.format<"u"){if(!O8(UL,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const n=UL[r];let s=Ci.filter;(typeof t.filter=="function"||Cl(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in pG?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Ci.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ci.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ci.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ci.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ci.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ci.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ci.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ci.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ci.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ci.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ci.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ci.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ci.strictNullHandling}}function bEe(t,e={}){let r=t;const n=wEe(e);let s,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):Cl(n.filter)&&(a=n.filter,s=a);const i=[];if(typeof r!="object"||r===null)return"";const o=pG[n.arrayFormat],l=o==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);const u=new WeakMap;for(let g=0;g<s.length;++g){const m=s[g];n.skipNulls&&r[m]===null||mG(i,gG(r[m],m,o,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}const d=i.join(n.delimiter);let p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""}function _Ee(t){let e=0;for(const s of t)e+=s.length;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}let qL;function EE(t){let e;return(qL??(e=new globalThis.TextEncoder,qL=e.encode.bind(e)))(t)}let HL;function WL(t){let e;return(HL??(e=new globalThis.TextDecoder,HL=e.decode.bind(e)))(t)}var Ql,Jl;class O4{constructor(){Ql.set(this,void 0),Jl.set(this,void 0),Hr(this,Ql,new Uint8Array),Hr(this,Jl,null)}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?EE(e):e;Hr(this,Ql,_Ee([it(this,Ql,"f"),r]));const n=[];let s;for(;(s=kEe(it(this,Ql,"f"),it(this,Jl,"f")))!=null;){if(s.carriage&&it(this,Jl,"f")==null){Hr(this,Jl,s.index);continue}if(it(this,Jl,"f")!=null&&(s.index!==it(this,Jl,"f")+1||s.carriage)){n.push(WL(it(this,Ql,"f").subarray(0,it(this,Jl,"f")-1))),Hr(this,Ql,it(this,Ql,"f").subarray(it(this,Jl,"f"))),Hr(this,Jl,null);continue}const a=it(this,Jl,"f")!==null?s.preceding-1:s.preceding,i=WL(it(this,Ql,"f").subarray(0,a));n.push(i),Hr(this,Ql,it(this,Ql,"f").subarray(s.index)),Hr(this,Jl,null)}return n}flush(){return it(this,Ql,"f").length?this.decode(`
`):[]}}Ql=new WeakMap,Jl=new WeakMap;O4.NEWLINE_CHARS=new Set([`
`,"\r"]);O4.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kEe(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function SEe(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}const xb={off:0,error:200,warn:300,info:400,debug:500},GL=(t,e,r)=>{if(t){if(aEe(xb,t))return t;ho(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(xb))}`)}};function wx(){}function pw(t,e,r){return!e||xb[t]>xb[r]?wx:e[t].bind(e)}const NEe={error:wx,warn:wx,info:wx,debug:wx};let KL=new WeakMap;function ho(t){const e=t.logger,r=t.logLevel??"off";if(!e)return NEe;const n=KL.get(e);if(n&&n[0]===r)return n[1];const s={error:pw("error",e,r),warn:pw("warn",e,r),info:pw("info",e,r),debug:pw("debug",e,r)};return KL.set(e,[r,s]),s}const A0=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var ax;class rd{constructor(e,r,n){this.iterator=e,ax.set(this,void 0),this.controller=r,Hr(this,ax,n)}static fromSSEResponse(e,r,n){let s=!1;const a=n?ho(n):console;async function*i(){if(s)throw new jr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of EEe(e,r))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(d){throw a.error("Could not parse message into JSON:",l.data),a.error("From chunk:",l.raw),d}if(u&&u.error)throw new wo(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new wo(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}o=!0}catch(l){if(F8(l))return;throw l}finally{o||r.abort()}}return new rd(i,r,n)}static fromReadableStream(e,r,n){let s=!1;async function*a(){const o=new O4,l=dG(e);for await(const u of l)for(const d of o.decode(u))yield d;for(const u of o.flush())yield u}async function*i(){if(s)throw new jr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of a())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(F8(l))return;throw l}finally{o||r.abort()}}return new rd(i,r,n)}[(ax=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),s=a=>({next:()=>{if(a.length===0){const i=n.next();e.push(i),r.push(i)}return a.shift()}});return[new rd(()=>s(e),this.controller,it(this,ax,"f")),new rd(()=>s(r),this.controller,it(this,ax,"f"))]}toReadableStream(){const e=this;let r;return cG({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await r.next();if(a)return n.close();const i=EE(JSON.stringify(s)+`
`);n.enqueue(i)}catch(s){n.error(s)}},async cancel(){await r.return?.()}})}}async function*EEe(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new jr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new jr("Attempted to iterate over a response with no body");const r=new AEe,n=new O4,s=dG(t.body);for await(const a of CEe(s))for(const i of n.decode(a)){const o=r.decode(i);o&&(yield o)}for(const a of n.flush()){const i=r.decode(a);i&&(yield i)}}async function*CEe(t){let e=new Uint8Array;for await(const r of t){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?EE(r):r;let s=new Uint8Array(e.length+n.length);s.set(e),s.set(n,e.length),e=s;let a;for(;(a=SEe(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class AEe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,s]=TEe(e,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}function TEe(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function xG(t,e){const{response:r,requestLogID:n,retryOfRequestLogID:s,startTime:a}=e,i=await(async()=>{if(e.options.stream)return ho(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):rd.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const l=r.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){const p=await r.json();return yG(p,r)}return await r.text()})();return ho(t).debug(`[${n}] response parsed`,A0({retryOfRequestLogID:s,url:r.url,status:r.status,body:i,durationMs:Date.now()-a})),i}function yG(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var bx;class M4 extends Promise{constructor(e,r,n=xG){super(s=>{s(null)}),this.responsePromise=r,this.parseResponse=n,bx.set(this,void 0),Hr(this,bx,e)}_thenUnwrap(e){return new M4(it(this,bx,"f"),this.responsePromise,async(r,n)=>yG(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(it(this,bx,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}bx=new WeakMap;var mw;class CE{constructor(e,r,n,s){mw.set(this,void 0),Hr(this,mw,e),this.options=s,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new jr("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await it(this,mw,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(mw=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class IEe extends M4{constructor(e,r,n){super(e,r,async(s,a)=>new n(s,a.response,await xG(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}class B4 extends CE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class gi extends CE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),r=e[e.length-1]?.id;return r?{...this.options,query:{...lG(this.options.query),after:r}}:null}}class yb extends CE{constructor(e,r,n,s){super(e,r,n,s),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...lG(this.options.query),after:e}}:null}}const vG=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function r2(t,e,r){return vG(),new File(t,e??"unknown_file",r)}function e5(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const AE=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",M8=async(t,e)=>B8(t.body)?{...t,body:await wG(t.body,e)}:t,Ip=async(t,e)=>({...t,body:await wG(t.body,e)}),YL=new WeakMap;function PEe(t){const e=typeof t=="function"?t:t.fetch,r=YL.get(e);if(r)return r;const n=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return YL.set(e,n),n}const wG=async(t,e)=>{if(!await PEe(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,s])=>V8(r,n,s))),r},bG=t=>t instanceof Blob&&"name"in t,jEe=t=>typeof t=="object"&&t!==null&&(t instanceof Response||AE(t)||bG(t)),B8=t=>{if(jEe(t))return!0;if(Array.isArray(t))return t.some(B8);if(t&&typeof t=="object"){for(const e in t)if(B8(t[e]))return!0}return!1},V8=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response)t.append(e,r2([await r.blob()],e5(r)));else if(AE(r))t.append(e,r2([await new Response(uG(r)).blob()],e5(r)));else if(bG(r))t.append(e,r,e5(r));else if(Array.isArray(r))await Promise.all(r.map(n=>V8(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,s])=>V8(t,`${e}[${n}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},_G=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",REe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&_G(t),LEe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function FEe(t,e,r){if(vG(),t=await t,REe(t))return t instanceof File?t:r2([await t.arrayBuffer()],t.name);if(LEe(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),r2(await U8(s),e,r)}const n=await U8(t);if(e||(e=e5(t)),!r?.type){const s=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(r={...r,type:s})}return r2(n,e,r)}async function U8(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(_G(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(AE(t))for await(const r of t)e.push(...await U8(r));else{const r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${DEe(t)}`)}return e}function DEe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}class Ir{constructor(e){this._client=e}}function kG(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const XL=Object.freeze(Object.create(null)),OEe=(t=kG)=>function(r,...n){if(r.length===1)return r[0];let s=!1;const a=[],i=r.reduce((d,p,g)=>{/[?#]/.test(p)&&(s=!0);const m=n[g];let x=(s?encodeURIComponent:t)(""+m);return g!==n.length&&(m==null||typeof m=="object"&&m.toString===Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??XL)??XL)?.toString)&&(x=m+"",a.push({start:d.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),d+p+(g===n.length?"":x)},""),o=i.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(o))!==null;)a.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(a.sort((d,p)=>d.start-p.start),a.length>0){let d=0;const p=a.reduce((g,m)=>{const x=" ".repeat(m.start-d),y="^".repeat(m.length);return d=m.start+m.length,g+x+y},"");throw new jr(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${i}
${p}`)}return i},Wt=OEe(kG);let SG=class extends Ir{list(e,r={},n){return this._client.getAPIList(Wt`/chat/completions/${e}/messages`,gi,{query:r,...n})}};function vb(t){return t!==void 0&&"function"in t&&t.function!==void 0}function TE(t){return t?.$brand==="auto-parseable-response-format"}function Vy(t){return t?.$brand==="auto-parseable-tool"}function MEe(t,e){return!e||!NG(e)?{...t,choices:t.choices.map(r=>(EG(r.message.tool_calls),{...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:IE(t,e)}function IE(t,e){const r=t.choices.map(n=>{if(n.finish_reason==="length")throw new iG;if(n.finish_reason==="content_filter")throw new oG;return EG(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:n.message.tool_calls?.map(s=>VEe(e,s))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?BEe(e,n.message.content):null}}});return{...t,choices:r}}function BEe(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function VEe(t,e){const r=t.tools?.find(n=>vb(n)&&n.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Vy(r)?r.$parseRaw(e.function.arguments):r?.function.strict?JSON.parse(e.function.arguments):null}}}function UEe(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const r=t.tools?.find(n=>vb(n)&&n.function?.name===e.function.name);return vb(r)&&(Vy(r)||r?.function.strict||!1)}function NG(t){return TE(t.response_format)?!0:t.tools?.some(e=>Vy(e)||e.type==="function"&&e.function.strict===!0)??!1}function EG(t){for(const e of t||[])if(e.type!=="function")throw new jr(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function zEe(t){for(const e of t??[]){if(e.type!=="function")throw new jr(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new jr(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const wb=t=>t?.role==="assistant",CG=t=>t?.role==="tool";var z8,t5,r5,_x,kx,n5,Sx,Bd,Nx,bb,_b,Bm,AG;class PE{constructor(){z8.add(this),this.controller=new AbortController,t5.set(this,void 0),r5.set(this,()=>{}),_x.set(this,()=>{}),kx.set(this,void 0),n5.set(this,()=>{}),Sx.set(this,()=>{}),Bd.set(this,{}),Nx.set(this,!1),bb.set(this,!1),_b.set(this,!1),Bm.set(this,!1),Hr(this,t5,new Promise((e,r)=>{Hr(this,r5,e,"f"),Hr(this,_x,r,"f")})),Hr(this,kx,new Promise((e,r)=>{Hr(this,n5,e,"f"),Hr(this,Sx,r,"f")})),it(this,t5,"f").catch(()=>{}),it(this,kx,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},it(this,z8,"m",AG).bind(this))},0)}_connected(){this.ended||(it(this,r5,"f").call(this),this._emit("connect"))}get ended(){return it(this,Nx,"f")}get errored(){return it(this,bb,"f")}get aborted(){return it(this,_b,"f")}abort(){this.controller.abort()}on(e,r){return(it(this,Bd,"f")[e]||(it(this,Bd,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=it(this,Bd,"f")[e];if(!n)return this;const s=n.findIndex(a=>a.listener===r);return s>=0&&n.splice(s,1),this}once(e,r){return(it(this,Bd,"f")[e]||(it(this,Bd,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Hr(this,Bm,!0),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Hr(this,Bm,!0),await it(this,kx,"f")}_emit(e,...r){if(it(this,Nx,"f"))return;e==="end"&&(Hr(this,Nx,!0),it(this,n5,"f").call(this));const n=it(this,Bd,"f")[e];if(n&&(it(this,Bd,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...r))),e==="abort"){const s=r[0];!it(this,Bm,"f")&&!n?.length&&Promise.reject(s),it(this,_x,"f").call(this,s),it(this,Sx,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=r[0];!it(this,Bm,"f")&&!n?.length&&Promise.reject(s),it(this,_x,"f").call(this,s),it(this,Sx,"f").call(this,s),this._emit("end")}}_emitFinal(){}}t5=new WeakMap,r5=new WeakMap,_x=new WeakMap,kx=new WeakMap,n5=new WeakMap,Sx=new WeakMap,Bd=new WeakMap,Nx=new WeakMap,bb=new WeakMap,_b=new WeakMap,Bm=new WeakMap,z8=new WeakSet,AG=function(e){if(Hr(this,bb,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Fc),e instanceof Fc)return Hr(this,_b,!0),this._emit("abort",e);if(e instanceof jr)return this._emit("error",e);if(e instanceof Error){const r=new jr(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new jr(String(e)))};function $Ee(t){return typeof t.parse=="function"}var ol,$8,kb,q8,H8,W8,TG,IG;const qEe=10;class PG extends PE{constructor(){super(...arguments),ol.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=e.choices[0]?.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),CG(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(wb(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new jr("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),it(this,ol,"m",$8).call(this)}async finalMessage(){return await this.done(),it(this,ol,"m",kb).call(this)}async finalFunctionToolCall(){return await this.done(),it(this,ol,"m",q8).call(this)}async finalFunctionToolCallResult(){return await this.done(),it(this,ol,"m",H8).call(this)}async totalUsage(){return await this.done(),it(this,ol,"m",W8).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=it(this,ol,"m",kb).call(this);r&&this._emit("finalMessage",r);const n=it(this,ol,"m",$8).call(this);n&&this._emit("finalContent",n);const s=it(this,ol,"m",q8).call(this);s&&this._emit("finalFunctionToolCall",s);const a=it(this,ol,"m",H8).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",it(this,ol,"m",W8).call(this))}async _createChatCompletion(e,r,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),it(this,ol,"m",TG).call(this,r);const a=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(IE(a,r))}async _runChatCompletion(e,r,n){for(const s of r.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,r,n)}async _runTools(e,r,n){const s="tool",{tool_choice:a="auto",stream:i,...o}=r,l=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:u=qEe}=n||{},d=r.tools.map(m=>{if(Vy(m)){if(!m.$callback)throw new jr("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),p={};for(const m of d)m.type==="function"&&(p[m.function.name||m.function.function.name]=m.function);const g="tools"in r?d.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of r.messages)this._addMessage(m,!1);for(let m=0;m<u;++m){const y=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:g,messages:[...this.messages]},n)).choices[0]?.message;if(!y)throw new jr("missing message in ChatCompletion response");if(!y.tool_calls?.length)return;for(const b of y.tool_calls){if(b.type!=="function")continue;const S=b.id,{name:P,arguments:T}=b.function,O=p[P];if(O){if(l&&l!==P){const A=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:A});continue}}else{const A=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(p).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:A});continue}let W;try{W=$Ee(O)?await O.parse(T):T}catch(A){const N=A instanceof Error?A.message:String(A);this._addMessage({role:s,tool_call_id:S,content:N});continue}const Y=await O.function(W,this),L=it(this,ol,"m",IG).call(this,Y);if(this._addMessage({role:s,tool_call_id:S,content:L}),l)return}}}}ol=new WeakSet,$8=function(){return it(this,ol,"m",kb).call(this).content??null},kb=function(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(wb(r))return{...r,content:r.content??null,refusal:r.refusal??null}}throw new jr("stream ended without producing a ChatCompletionMessage with role=assistant")},q8=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(wb(r)&&r?.tool_calls?.length)return r.tool_calls.filter(n=>n.type==="function").at(-1)?.function}},H8=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(CG(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>n.role==="assistant"&&n.tool_calls?.some(s=>s.type==="function"&&s.id===r.tool_call_id)))return r.content}},W8=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},TG=function(e){if(e.n!=null&&e.n>1)throw new jr("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},IG=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class jE extends PG{static runTools(e,r,n){const s=new jE,a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,a)),s}_addMessage(e,r=!0){super._addMessage(e,r),wb(e)&&e.content&&this._emit("content",e.content)}}const jG=1,RG=2,LG=4,FG=8,DG=16,OG=32,MG=64,BG=128,VG=256,UG=BG|VG,zG=DG|OG|UG|MG,$G=jG|RG|zG,qG=LG|FG,HEe=$G|qG,zi={STR:jG,NUM:RG,ARR:LG,OBJ:FG,NULL:DG,BOOL:OG,NAN:MG,INFINITY:BG,MINUS_INFINITY:VG,INF:UG,SPECIAL:zG,ATOM:$G,COLLECTION:qG,ALL:HEe};class WEe extends Error{}class GEe extends Error{}function KEe(t,e=zi.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return YEe(t.trim(),e)}const YEe=(t,e)=>{const r=t.length;let n=0;const s=g=>{throw new WEe(`${g} at position ${n}`)},a=g=>{throw new GEe(`${g} at position ${n}`)},i=()=>(p(),n>=r&&s("Unexpected end of input"),t[n]==='"'?o():t[n]==="{"?l():t[n]==="["?u():t.substring(n,n+4)==="null"||zi.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||zi.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||zi.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||zi.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||zi.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||zi.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):d()),o=()=>{const g=n;let m=!1;for(n++;n<r&&(t[n]!=='"'||m&&t[n-1]==="\\");)m=t[n]==="\\"?!m:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(g,++n-Number(m)))}catch(x){a(String(x))}else if(zi.STR&e)try{return JSON.parse(t.substring(g,n-Number(m))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{n++,p();const g={};try{for(;t[n]!=="}";){if(p(),n>=r&&zi.OBJ&e)return g;const m=o();p(),n++;try{const x=i();Object.defineProperty(g,m,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(zi.OBJ&e)return g;throw x}p(),t[n]===","&&n++}}catch{if(zi.OBJ&e)return g;s("Expected '}' at end of object")}return n++,g},u=()=>{n++;const g=[];try{for(;t[n]!=="]";)g.push(i()),p(),t[n]===","&&n++}catch{if(zi.ARR&e)return g;s("Expected ']' at end of array")}return n++,g},d=()=>{if(n===0){t==="-"&&zi.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(zi.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(m))}}const g=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(zi.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(g,n))}catch{t.substring(g,n)==="-"&&zi.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(x){a(String(x))}}},p=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return i()},QL=t=>KEe(t,zi.ALL^zi.NUM);var Ei,Md,Cm,th,C6,gw,A6,T6,I6,xw,P6,JL;class G2 extends PG{constructor(e){super(),Ei.add(this),Md.set(this,void 0),Cm.set(this,void 0),th.set(this,void 0),Hr(this,Md,e),Hr(this,Cm,[])}get currentChatCompletionSnapshot(){return it(this,th,"f")}static fromReadableStream(e){const r=new G2(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const s=new G2(r);return s._run(()=>s._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,r,n){super._createChatCompletion;const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),it(this,Ei,"m",C6).call(this);const a=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const i of a)it(this,Ei,"m",A6).call(this,i);if(a.controller.signal?.aborted)throw new Fc;return this._addChatCompletion(it(this,Ei,"m",xw).call(this))}async _fromReadableStream(e,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),it(this,Ei,"m",C6).call(this),this._connected();const s=rd.fromReadableStream(e,this.controller);let a;for await(const i of s)a&&a!==i.id&&this._addChatCompletion(it(this,Ei,"m",xw).call(this)),it(this,Ei,"m",A6).call(this,i),a=i.id;if(s.controller.signal?.aborted)throw new Fc;return this._addChatCompletion(it(this,Ei,"m",xw).call(this))}[(Md=new WeakMap,Cm=new WeakMap,th=new WeakMap,Ei=new WeakSet,C6=function(){this.ended||Hr(this,th,void 0)},gw=function(r){let n=it(this,Cm,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},it(this,Cm,"f")[r.index]=n,n)},A6=function(r){if(this.ended)return;const n=it(this,Ei,"m",JL).call(this,r);this._emit("chunk",r,n);for(const s of r.choices){const a=n.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const i=it(this,Ei,"m",gw).call(this,a);a.finish_reason&&(it(this,Ei,"m",I6).call(this,a),i.current_tool_call_index!=null&&it(this,Ei,"m",T6).call(this,a,i.current_tool_call_index));for(const o of s.delta.tool_calls??[])i.current_tool_call_index!==o.index&&(it(this,Ei,"m",I6).call(this,a),i.current_tool_call_index!=null&&it(this,Ei,"m",T6).call(this,a,i.current_tool_call_index)),i.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const l=a.message.tool_calls?.[o.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:o.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(l?.type,void 0))}}},T6=function(r,n){if(it(this,Ei,"m",gw).call(this,r).done_tool_calls.has(n))return;const a=r.message.tool_calls?.[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const i=it(this,Md,"f")?.tools?.find(o=>vb(o)&&o.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:Vy(i)?i.$parseRaw(a.function.arguments):i?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},I6=function(r){const n=it(this,Ei,"m",gw).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;const s=it(this,Ei,"m",P6).call(this);this._emit("content.done",{content:r.message.content,parsed:s?s.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),r.logprobs?.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),r.logprobs?.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},xw=function(){if(this.ended)throw new jr("stream has ended, this shouldn't happen");const r=it(this,th,"f");if(!r)throw new jr("request ended without sending any chunks");return Hr(this,th,void 0),Hr(this,Cm,[]),XEe(r,it(this,Md,"f"))},P6=function(){const r=it(this,Md,"f")?.response_format;return TE(r)?r:null},JL=function(r){var n,s,a,i;let o=it(this,th,"f");const{choices:l,...u}=r;o?Object.assign(o,u):o=Hr(this,th,{...u,choices:[]});for(const{delta:d,finish_reason:p,index:g,logprobs:m=null,...x}of r.choices){let y=o.choices[g];if(y||(y=o.choices[g]={finish_reason:p,index:g,message:{},logprobs:m,...x}),m)if(!y.logprobs)y.logprobs=Object.assign({},m);else{const{content:Y,refusal:L,...A}=m;Object.assign(y.logprobs,A),Y&&((n=y.logprobs).content??(n.content=[]),y.logprobs.content.push(...Y)),L&&((s=y.logprobs).refusal??(s.refusal=[]),y.logprobs.refusal.push(...L))}if(p&&(y.finish_reason=p,it(this,Md,"f")&&NG(it(this,Md,"f")))){if(p==="length")throw new iG;if(p==="content_filter")throw new oG}if(Object.assign(y,x),!d)continue;const{content:b,refusal:S,function_call:P,role:T,tool_calls:O,...W}=d;if(Object.assign(y.message,W),S&&(y.message.refusal=(y.message.refusal||"")+S),T&&(y.message.role=T),P&&(y.message.function_call?(P.name&&(y.message.function_call.name=P.name),P.arguments&&((a=y.message.function_call).arguments??(a.arguments=""),y.message.function_call.arguments+=P.arguments)):y.message.function_call=P),b&&(y.message.content=(y.message.content||"")+b,!y.message.refusal&&it(this,Ei,"m",P6).call(this)&&(y.message.parsed=QL(y.message.content))),O){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:Y,id:L,type:A,function:N,...D}of O){const j=(i=y.message.tool_calls)[Y]??(i[Y]={});Object.assign(j,D),L&&(j.id=L),A&&(j.type=A),N&&(j.function??(j.function={name:N.name??"",arguments:""})),N?.name&&(j.function.name=N.name),N?.arguments&&(j.function.arguments+=N.arguments,UEe(it(this,Md,"f"),j)&&(j.function.parsed_arguments=QL(j.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>r.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new rd(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function XEe(t,e){const{id:r,choices:n,created:s,model:a,system_fingerprint:i,...o}=t,l={...o,id:r,choices:n.map(({message:u,finish_reason:d,index:p,logprobs:g,...m})=>{if(!d)throw new jr(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:y,tool_calls:b,...S}=u,P=u.role;if(!P)throw new jr(`missing role for choice ${p}`);if(y){const{arguments:T,name:O}=y;if(T==null)throw new jr(`missing function_call.arguments for choice ${p}`);if(!O)throw new jr(`missing function_call.name for choice ${p}`);return{...m,message:{content:x,function_call:{arguments:T,name:O},role:P,refusal:u.refusal??null},finish_reason:d,index:p,logprobs:g}}return b?{...m,index:p,finish_reason:d,logprobs:g,message:{...S,role:P,content:x,refusal:u.refusal??null,tool_calls:b.map((T,O)=>{const{function:W,type:Y,id:L,...A}=T,{arguments:N,name:D,...j}=W||{};if(L==null)throw new jr(`missing choices[${p}].tool_calls[${O}].id
${yw(t)}`);if(Y==null)throw new jr(`missing choices[${p}].tool_calls[${O}].type
${yw(t)}`);if(D==null)throw new jr(`missing choices[${p}].tool_calls[${O}].function.name
${yw(t)}`);if(N==null)throw new jr(`missing choices[${p}].tool_calls[${O}].function.arguments
${yw(t)}`);return{...A,id:L,type:Y,function:{...j,name:D,arguments:N}}})}}:{...m,message:{...S,content:x,role:P,refusal:u.refusal??null},finish_reason:d,index:p,logprobs:g}}),created:s,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return MEe(l,e)}function yw(t){return JSON.stringify(t)}class Sb extends G2{static fromReadableStream(e){const r=new Sb(null);return r._run(()=>r._fromReadableStream(e)),r}static runTools(e,r,n){const s=new Sb(r),a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,r,a)),s}}let RE=class extends Ir{constructor(){super(...arguments),this.messages=new SG(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(Wt`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(Wt`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/chat/completions",gi,{query:e,...r})}delete(e,r){return this._client.delete(Wt`/chat/completions/${e}`,r)}parse(e,r){return zEe(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>IE(n,e))}runTools(e,r){return e.stream?Sb.runTools(this._client,e,r):jE.runTools(this._client,e,r)}stream(e,r){return G2.createChatCompletion(this._client,e,r)}};RE.Messages=SG;class LE extends Ir{constructor(){super(...arguments),this.completions=new RE(this._client)}}LE.Completions=RE;const HG=Symbol("brand.privateNullableHeaders");function*QEe(t){if(!t)return;if(HG in t){const{values:n,nulls:s}=t;yield*n.entries();for(const a of s)yield[a,null];return}let e=!1,r;t instanceof Headers?r=t.entries():OL(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=OL(n[1])?n[1]:[n[1]];let i=!1;for(const o of a)o!==void 0&&(e&&!i&&(i=!0,yield[s,null]),yield[s,o])}}const hr=t=>{const e=new Headers,r=new Set;for(const n of t){const s=new Set;for(const[a,i]of QEe(n)){const o=a.toLowerCase();s.has(o)||(e.delete(a),s.add(o)),i===null?(e.delete(a),r.add(o)):(e.append(a,i),r.delete(o))}}return{[HG]:!0,values:e,nulls:r}};class WG extends Ir{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:hr([{Accept:"application/octet-stream"},r?.headers]),__binaryResponse:!0})}}class GG extends Ir{create(e,r){return this._client.post("/audio/transcriptions",Ip({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class KG extends Ir{create(e,r){return this._client.post("/audio/translations",Ip({body:e,...r,__metadata:{model:e.model}},this._client))}}let Uy=class extends Ir{constructor(){super(...arguments),this.transcriptions=new GG(this._client),this.translations=new KG(this._client),this.speech=new WG(this._client)}};Uy.Transcriptions=GG;Uy.Translations=KG;Uy.Speech=WG;class YG extends Ir{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(Wt`/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/batches",gi,{query:e,...r})}cancel(e,r){return this._client.post(Wt`/batches/${e}/cancel`,r)}}class XG extends Ir{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(Wt`/assistants/${e}`,{...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(Wt`/assistants/${e}`,{body:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},r){return this._client.getAPIList("/assistants",gi,{query:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,r){return this._client.delete(Wt`/assistants/${e}`,{...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}let QG=class extends Ir{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};class JG extends Ir{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}let V4=class extends Ir{constructor(){super(...arguments),this.sessions=new QG(this._client),this.transcriptionSessions=new JG(this._client)}};V4.Sessions=QG;V4.TranscriptionSessions=JG;class ZG extends Ir{create(e,r){return this._client.post("/chatkit/sessions",{body:e,...r,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}cancel(e,r){return this._client.post(Wt`/chatkit/sessions/${e}/cancel`,{...r,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}}let eK=class extends Ir{retrieve(e,r){return this._client.get(Wt`/chatkit/threads/${e}`,{...r,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}list(e={},r){return this._client.getAPIList("/chatkit/threads",yb,{query:e,...r,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}delete(e,r){return this._client.delete(Wt`/chatkit/threads/${e}`,{...r,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}listItems(e,r={},n){return this._client.getAPIList(Wt`/chatkit/threads/${e}/items`,yb,{query:r,...n,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}};class U4 extends Ir{constructor(){super(...arguments),this.sessions=new ZG(this._client),this.threads=new eK(this._client)}uploadFile(e,r){return this._client.post("/chatkit/files",M8({body:e,...r,headers:hr([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])},this._client))}}U4.Sessions=ZG;U4.Threads=eK;class tK extends Ir{create(e,r,n){return this._client.post(Wt`/threads/${e}/messages`,{body:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){const{thread_id:s}=r;return this._client.get(Wt`/threads/${s}/messages/${e}`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){const{thread_id:s,...a}=r;return this._client.post(Wt`/threads/${s}/messages/${e}`,{body:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(Wt`/threads/${e}/messages`,gi,{query:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r,n){const{thread_id:s}=r;return this._client.delete(Wt`/threads/${s}/messages/${e}`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class rK extends Ir{retrieve(e,r,n){const{thread_id:s,run_id:a,...i}=r;return this._client.get(Wt`/threads/${s}/runs/${a}/steps/${e}`,{query:i,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r,n){const{thread_id:s,...a}=r;return this._client.getAPIList(Wt`/threads/${s}/runs/${e}/steps`,gi,{query:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}const JEe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);return Array.from(new Float32Array(n.buffer))}};var ZEe={};const Am=t=>{if(typeof globalThis.process<"u")return ZEe?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var po,H0,G8,Gu,s5,lu,W0,Qm,D0,Nb,Zl,a5,i5,n2,Ex,Cx,ZL,eF,tF,rF,nF,sF,aF;class s2 extends PE{constructor(){super(...arguments),po.add(this),G8.set(this,[]),Gu.set(this,{}),s5.set(this,{}),lu.set(this,void 0),W0.set(this,void 0),Qm.set(this,void 0),D0.set(this,void 0),Nb.set(this,void 0),Zl.set(this,void 0),a5.set(this,void 0),i5.set(this,void 0),n2.set(this,void 0)}[(G8=new WeakMap,Gu=new WeakMap,s5=new WeakMap,lu=new WeakMap,W0=new WeakMap,Qm=new WeakMap,D0=new WeakMap,Nb=new WeakMap,Zl=new WeakMap,a5=new WeakMap,i5=new WeakMap,n2=new WeakMap,po=new WeakSet,Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>r.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const r=new H0;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=rd.fromReadableStream(e,this.controller);for await(const a of s)it(this,po,"m",Ex).call(this,a);if(s.controller.signal?.aborted)throw new Fc;return this._addRun(it(this,po,"m",Cx).call(this))}toReadableStream(){return new rd(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,s){const a=new H0;return a._run(()=>a._runToolAssistantStream(e,r,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,r,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.submitToolOutputs(r,i,{...s,signal:this.controller.signal});this._connected();for await(const l of o)it(this,po,"m",Ex).call(this,l);if(o.controller.signal?.aborted)throw new Fc;return this._addRun(it(this,po,"m",Cx).call(this))}static createThreadAssistantStream(e,r,n){const s=new H0;return s._run(()=>s._threadAssistantStream(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,r,n,s){const a=new H0;return a._run(()=>a._runAssistantStream(e,r,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return it(this,a5,"f")}currentRun(){return it(this,i5,"f")}currentMessageSnapshot(){return it(this,lu,"f")}currentRunStepSnapshot(){return it(this,n2,"f")}async finalRunSteps(){return await this.done(),Object.values(it(this,Gu,"f"))}async finalMessages(){return await this.done(),Object.values(it(this,s5,"f"))}async finalRun(){if(await this.done(),!it(this,W0,"f"))throw Error("Final run was not received.");return it(this,W0,"f")}async _createThreadAssistantStream(e,r,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const o of i)it(this,po,"m",Ex).call(this,o);if(i.controller.signal?.aborted)throw new Fc;return this._addRun(it(this,po,"m",Cx).call(this))}async _createAssistantStream(e,r,n,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.create(r,i,{...s,signal:this.controller.signal});this._connected();for await(const l of o)it(this,po,"m",Ex).call(this,l);if(o.controller.signal?.aborted)throw new Fc;return this._addRun(it(this,po,"m",Cx).call(this))}static accumulateDelta(e,r){for(const[n,s]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let a=e[n];if(a==null){e[n]=s;continue}if(n==="index"||n==="type"){e[n]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(S6(a)&&S6(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...s);continue}for(const i of s){if(!S6(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(i):a[o]=this.accumulateDelta(l,i)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,s){return await this._createAssistantStream(r,e,n,s)}async _runToolAssistantStream(e,r,n,s){return await this._createToolAssistantStream(r,e,n,s)}}H0=s2,Ex=function(e){if(!this.ended)switch(Hr(this,a5,e),it(this,po,"m",tF).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":it(this,po,"m",aF).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":it(this,po,"m",eF).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":it(this,po,"m",ZL).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Cx=function(){if(this.ended)throw new jr("stream has ended, this shouldn't happen");if(!it(this,W0,"f"))throw Error("Final run has not been received");return it(this,W0,"f")},ZL=function(e){const[r,n]=it(this,po,"m",nF).call(this,e,it(this,lu,"f"));Hr(this,lu,r),it(this,s5,"f")[r.id]=r;for(const s of n){const a=r.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,i=r.content[s.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=it(this,Qm,"f")){if(it(this,D0,"f"))switch(it(this,D0,"f").type){case"text":this._emit("textDone",it(this,D0,"f").text,it(this,lu,"f"));break;case"image_file":this._emit("imageFileDone",it(this,D0,"f").image_file,it(this,lu,"f"));break}Hr(this,Qm,s.index)}Hr(this,D0,r.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(it(this,Qm,"f")!==void 0){const s=e.data.content[it(this,Qm,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,it(this,lu,"f"));break;case"text":this._emit("textDone",s.text,it(this,lu,"f"));break}}it(this,lu,"f")&&this._emit("messageDone",e.data),Hr(this,lu,void 0)}},eF=function(e){const r=it(this,po,"m",rF).call(this,e);switch(Hr(this,n2,r),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==it(this,Nb,"f")?this._emit("toolCallDelta",a,r.step_details.tool_calls[a.index]):(it(this,Zl,"f")&&this._emit("toolCallDone",it(this,Zl,"f")),Hr(this,Nb,a.index),Hr(this,Zl,r.step_details.tool_calls[a.index]),it(this,Zl,"f")&&this._emit("toolCallCreated",it(this,Zl,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Hr(this,n2,void 0),e.data.step_details.type=="tool_calls"&&it(this,Zl,"f")&&(this._emit("toolCallDone",it(this,Zl,"f")),Hr(this,Zl,void 0)),this._emit("runStepDone",e.data,r);break}},tF=function(e){it(this,G8,"f").push(e),this._emit("event",e)},rF=function(e){switch(e.event){case"thread.run.step.created":return it(this,Gu,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=it(this,Gu,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=H0.accumulateDelta(r,n.delta);it(this,Gu,"f")[e.data.id]=s}return it(this,Gu,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":it(this,Gu,"f")[e.data.id]=e.data;break}if(it(this,Gu,"f")[e.data.id])return it(this,Gu,"f")[e.data.id];throw new Error("No snapshot available")},nF=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in r.content){let i=r.content[a.index];r.content[a.index]=it(this,po,"m",sF).call(this,a,i)}else r.content[a.index]=a,n.push(a);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},sF=function(e,r){return H0.accumulateDelta(r,e)},aF=function(e){switch(Hr(this,i5,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Hr(this,W0,e.data),it(this,Zl,"f")&&(this._emit("toolCallDone",it(this,Zl,"f")),Hr(this,Zl,void 0));break}};let FE=class extends Ir{constructor(){super(...arguments),this.steps=new rK(this._client)}create(e,r,n){const{include:s,...a}=r;return this._client.post(Wt`/threads/${e}/runs`,{query:{include:s},body:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:r.stream??!1})}retrieve(e,r,n){const{thread_id:s}=r;return this._client.get(Wt`/threads/${s}/runs/${e}`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){const{thread_id:s,...a}=r;return this._client.post(Wt`/threads/${s}/runs/${e}`,{body:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(Wt`/threads/${e}/runs`,gi,{query:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,r,n){const{thread_id:s}=r;return this._client.post(Wt`/threads/${s}/runs/${e}/cancel`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(s.id,{thread_id:e},n)}createAndStream(e,r,n){return s2.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){const s=hr([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(e,r,{...n,headers:{...n?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await By(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,r,n){return s2.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n){const{thread_id:s,...a}=r;return this._client.post(Wt`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:r.stream??!1})}async submitToolOutputsAndPoll(e,r,n){const s=await this.submitToolOutputs(e,r,n);return await this.poll(s.id,r,n)}submitToolOutputsStream(e,r,n){return s2.createToolAssistantStream(e,this._client.beta.threads.runs,r,n)}};FE.Steps=rK;class z4 extends Ir{constructor(){super(...arguments),this.runs=new FE(this._client),this.messages=new tK(this._client)}create(e={},r){return this._client.post("/threads",{body:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(Wt`/threads/${e}`,{...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(Wt`/threads/${e}`,{body:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r){return this._client.delete(Wt`/threads/${e}`,{...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,r){const n=await this.createAndRun(e,r);return await this.runs.poll(n.id,{thread_id:n.thread_id},r)}createAndRunStream(e,r){return s2.createThreadAssistantStream(e,this._client.beta.threads,r)}}z4.Runs=FE;z4.Messages=tK;class xg extends Ir{constructor(){super(...arguments),this.realtime=new V4(this._client),this.chatkit=new U4(this._client),this.assistants=new XG(this._client),this.threads=new z4(this._client)}}xg.Realtime=V4;xg.ChatKit=U4;xg.Assistants=XG;xg.Threads=z4;class nK extends Ir{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}class sK extends Ir{retrieve(e,r,n){const{container_id:s}=r;return this._client.get(Wt`/containers/${s}/files/${e}/content`,{...n,headers:hr([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}}let DE=class extends Ir{constructor(){super(...arguments),this.content=new sK(this._client)}create(e,r,n){return this._client.post(Wt`/containers/${e}/files`,Ip({body:r,...n},this._client))}retrieve(e,r,n){const{container_id:s}=r;return this._client.get(Wt`/containers/${s}/files/${e}`,n)}list(e,r={},n){return this._client.getAPIList(Wt`/containers/${e}/files`,gi,{query:r,...n})}delete(e,r,n){const{container_id:s}=r;return this._client.delete(Wt`/containers/${s}/files/${e}`,{...n,headers:hr([{Accept:"*/*"},n?.headers])})}};DE.Content=sK;class OE extends Ir{constructor(){super(...arguments),this.files=new DE(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(Wt`/containers/${e}`,r)}list(e={},r){return this._client.getAPIList("/containers",gi,{query:e,...r})}delete(e,r){return this._client.delete(Wt`/containers/${e}`,{...r,headers:hr([{Accept:"*/*"},r?.headers])})}}OE.Files=DE;class aK extends Ir{create(e,r,n){const{include:s,...a}=r;return this._client.post(Wt`/conversations/${e}/items`,{query:{include:s},body:a,...n})}retrieve(e,r,n){const{conversation_id:s,...a}=r;return this._client.get(Wt`/conversations/${s}/items/${e}`,{query:a,...n})}list(e,r={},n){return this._client.getAPIList(Wt`/conversations/${e}/items`,yb,{query:r,...n})}delete(e,r,n){const{conversation_id:s}=r;return this._client.delete(Wt`/conversations/${s}/items/${e}`,n)}}class ME extends Ir{constructor(){super(...arguments),this.items=new aK(this._client)}create(e={},r){return this._client.post("/conversations",{body:e,...r})}retrieve(e,r){return this._client.get(Wt`/conversations/${e}`,r)}update(e,r,n){return this._client.post(Wt`/conversations/${e}`,{body:r,...n})}delete(e,r){return this._client.delete(Wt`/conversations/${e}`,r)}}ME.Items=aK;class iK extends Ir{create(e,r){const n=!!e.encoding_format;let s=n?e.encoding_format:"base64";n&&ho(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...r});return n?a:(ho(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const l=o.embedding;o.embedding=JEe(l)}),i)))}}class oK extends Ir{retrieve(e,r,n){const{eval_id:s,run_id:a}=r;return this._client.get(Wt`/evals/${s}/runs/${a}/output_items/${e}`,n)}list(e,r,n){const{eval_id:s,...a}=r;return this._client.getAPIList(Wt`/evals/${s}/runs/${e}/output_items`,gi,{query:a,...n})}}class BE extends Ir{constructor(){super(...arguments),this.outputItems=new oK(this._client)}create(e,r,n){return this._client.post(Wt`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){const{eval_id:s}=r;return this._client.get(Wt`/evals/${s}/runs/${e}`,n)}list(e,r={},n){return this._client.getAPIList(Wt`/evals/${e}/runs`,gi,{query:r,...n})}delete(e,r,n){const{eval_id:s}=r;return this._client.delete(Wt`/evals/${s}/runs/${e}`,n)}cancel(e,r,n){const{eval_id:s}=r;return this._client.post(Wt`/evals/${s}/runs/${e}`,n)}}BE.OutputItems=oK;class VE extends Ir{constructor(){super(...arguments),this.runs=new BE(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(Wt`/evals/${e}`,r)}update(e,r,n){return this._client.post(Wt`/evals/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/evals",gi,{query:e,...r})}delete(e,r){return this._client.delete(Wt`/evals/${e}`,r)}}VE.Runs=BE;let lK=class extends Ir{create(e,r){return this._client.post("/files",Ip({body:e,...r},this._client))}retrieve(e,r){return this._client.get(Wt`/files/${e}`,r)}list(e={},r){return this._client.getAPIList("/files",gi,{query:e,...r})}delete(e,r){return this._client.delete(Wt`/files/${e}`,r)}content(e,r){return this._client.get(Wt`/files/${e}/content`,{...r,headers:hr([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!s.has(i.status);)if(await By(r),i=await this.retrieve(e),Date.now()-a>n)throw new NE({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}};class cK extends Ir{}let uK=class extends Ir{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};class UE extends Ir{constructor(){super(...arguments),this.graders=new uK(this._client)}}UE.Graders=uK;class dK extends Ir{create(e,r,n){return this._client.getAPIList(Wt`/fine_tuning/checkpoints/${e}/permissions`,B4,{body:r,method:"post",...n})}retrieve(e,r={},n){return this._client.get(Wt`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}delete(e,r,n){const{fine_tuned_model_checkpoint:s}=r;return this._client.delete(Wt`/fine_tuning/checkpoints/${s}/permissions/${e}`,n)}}let zE=class extends Ir{constructor(){super(...arguments),this.permissions=new dK(this._client)}};zE.Permissions=dK;class fK extends Ir{list(e,r={},n){return this._client.getAPIList(Wt`/fine_tuning/jobs/${e}/checkpoints`,gi,{query:r,...n})}}class $E extends Ir{constructor(){super(...arguments),this.checkpoints=new fK(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(Wt`/fine_tuning/jobs/${e}`,r)}list(e={},r){return this._client.getAPIList("/fine_tuning/jobs",gi,{query:e,...r})}cancel(e,r){return this._client.post(Wt`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return this._client.getAPIList(Wt`/fine_tuning/jobs/${e}/events`,gi,{query:r,...n})}pause(e,r){return this._client.post(Wt`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(Wt`/fine_tuning/jobs/${e}/resume`,r)}}$E.Checkpoints=fK;class yg extends Ir{constructor(){super(...arguments),this.methods=new cK(this._client),this.jobs=new $E(this._client),this.checkpoints=new zE(this._client),this.alpha=new UE(this._client)}}yg.Methods=cK;yg.Jobs=$E;yg.Checkpoints=zE;yg.Alpha=UE;class hK extends Ir{}class qE extends Ir{constructor(){super(...arguments),this.graderModels=new hK(this._client)}}qE.GraderModels=hK;class pK extends Ir{createVariation(e,r){return this._client.post("/images/variations",Ip({body:e,...r},this._client))}edit(e,r){return this._client.post("/images/edits",Ip({body:e,...r,stream:e.stream??!1},this._client))}generate(e,r){return this._client.post("/images/generations",{body:e,...r,stream:e.stream??!1})}}class mK extends Ir{retrieve(e,r){return this._client.get(Wt`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",B4,e)}delete(e,r){return this._client.delete(Wt`/models/${e}`,r)}}class gK extends Ir{create(e,r){return this._client.post("/moderations",{body:e,...r})}}class xK extends Ir{accept(e,r,n){return this._client.post(Wt`/realtime/calls/${e}/accept`,{body:r,...n,headers:hr([{Accept:"*/*"},n?.headers])})}hangup(e,r){return this._client.post(Wt`/realtime/calls/${e}/hangup`,{...r,headers:hr([{Accept:"*/*"},r?.headers])})}refer(e,r,n){return this._client.post(Wt`/realtime/calls/${e}/refer`,{body:r,...n,headers:hr([{Accept:"*/*"},n?.headers])})}reject(e,r={},n){return this._client.post(Wt`/realtime/calls/${e}/reject`,{body:r,...n,headers:hr([{Accept:"*/*"},n?.headers])})}}class yK extends Ir{create(e,r){return this._client.post("/realtime/client_secrets",{body:e,...r})}}class $4 extends Ir{constructor(){super(...arguments),this.clientSecrets=new yK(this._client),this.calls=new xK(this._client)}}$4.ClientSecrets=yK;$4.Calls=xK;function e9e(t,e){return!e||!r9e(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:vK(t,e)}function vK(t,e){const r=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:a9e(e,s)};if(s.type==="message"){const a=s.content.map(i=>i.type==="output_text"?{...i,parsed:t9e(e,i.text)}:i);return{...s,content:a}}return s}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||K8(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const s of n.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function t9e(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function r9e(t){return!!TE(t.text?.format)}function n9e(t){return t?.$brand==="auto-parseable-tool"}function s9e(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function a9e(t,e){const r=s9e(t.tools??[],e.name);return{...e,...e,parsed_arguments:n9e(r)?r.$parseRaw(e.arguments):r?.strict?JSON.parse(e.arguments):null}}function K8(t){const e=[];for(const r of t.output)if(r.type==="message")for(const n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}var Tm,vw,rh,ww,iF,oF,lF,cF;class HE extends PE{constructor(e){super(),Tm.add(this),vw.set(this,void 0),rh.set(this,void 0),ww.set(this,void 0),Hr(this,vw,e)}static createResponse(e,r,n){const s=new HE(r);return s._run(()=>s._createOrRetrieveResponse(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,r,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),it(this,Tm,"m",iF).call(this);let a,i=null;"response_id"in r?(a=await e.responses.retrieve(r.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),i=r.starting_after??null):a=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const o of a)it(this,Tm,"m",oF).call(this,o,i);if(a.controller.signal?.aborted)throw new Fc;return it(this,Tm,"m",lF).call(this)}[(vw=new WeakMap,rh=new WeakMap,ww=new WeakMap,Tm=new WeakSet,iF=function(){this.ended||Hr(this,rh,void 0)},oF=function(r,n){if(this.ended)return;const s=(i,o)=>{(n==null||o.sequence_number>n)&&this._emit(i,o)},a=it(this,Tm,"m",cF).call(this,r);switch(s("event",r),r.type){case"response.output_text.delta":{const i=a.output[r.output_index];if(!i)throw new jr(`missing output at index ${r.output_index}`);if(i.type==="message"){const o=i.content[r.content_index];if(!o)throw new jr(`missing content at index ${r.content_index}`);if(o.type!=="output_text")throw new jr(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...r,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=a.output[r.output_index];if(!i)throw new jr(`missing output at index ${r.output_index}`);i.type==="function_call"&&s("response.function_call_arguments.delta",{...r,snapshot:i.arguments});break}default:s(r.type,r);break}},lF=function(){if(this.ended)throw new jr("stream has ended, this shouldn't happen");const r=it(this,rh,"f");if(!r)throw new jr("request ended without sending any events");Hr(this,rh,void 0);const n=i9e(r,it(this,vw,"f"));return Hr(this,ww,n),n},cF=function(r){let n=it(this,rh,"f");if(!n){if(r.type!=="response.created")throw new jr(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=Hr(this,rh,r.response),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{const s=n.output[r.output_index];if(!s)throw new jr(`missing output at index ${r.output_index}`);const a=s.type,i=r.part;a==="message"&&i.type!=="reasoning_text"?s.content.push(i):a==="reasoning"&&i.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(i));break}case"response.output_text.delta":{const s=n.output[r.output_index];if(!s)throw new jr(`missing output at index ${r.output_index}`);if(s.type==="message"){const a=s.content[r.content_index];if(!a)throw new jr(`missing content at index ${r.content_index}`);if(a.type!=="output_text")throw new jr(`expected content to be 'output_text', got ${a.type}`);a.text+=r.delta}break}case"response.function_call_arguments.delta":{const s=n.output[r.output_index];if(!s)throw new jr(`missing output at index ${r.output_index}`);s.type==="function_call"&&(s.arguments+=r.delta);break}case"response.reasoning_text.delta":{const s=n.output[r.output_index];if(!s)throw new jr(`missing output at index ${r.output_index}`);if(s.type==="reasoning"){const a=s.content?.[r.content_index];if(!a)throw new jr(`missing content at index ${r.content_index}`);if(a.type!=="reasoning_text")throw new jr(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=r.delta}break}case"response.completed":{Hr(this,rh,r.response);break}}return n},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("event",s=>{const a=r.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const a of r)a.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>r.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=it(this,ww,"f");if(!e)throw new jr("stream ended without producing a ChatCompletion");return e}}function i9e(t,e){return e9e(t,e)}class wK extends Ir{list(e,r={},n){return this._client.getAPIList(Wt`/responses/${e}/input_items`,gi,{query:r,...n})}}class WE extends Ir{constructor(){super(...arguments),this.inputItems=new wK(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&K8(n),n))}retrieve(e,r={},n){return this._client.get(Wt`/responses/${e}`,{query:r,...n,stream:r?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&K8(s),s))}delete(e,r){return this._client.delete(Wt`/responses/${e}`,{...r,headers:hr([{Accept:"*/*"},r?.headers])})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>vK(n,e))}stream(e,r){return HE.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(Wt`/responses/${e}/cancel`,r)}}WE.InputItems=wK;class bK extends Ir{create(e,r,n){return this._client.post(Wt`/uploads/${e}/parts`,Ip({body:r,...n},this._client))}}class GE extends Ir{constructor(){super(...arguments),this.parts=new bK(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(Wt`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(Wt`/uploads/${e}/complete`,{body:r,...n})}}GE.Parts=bK;const o9e=async t=>{const e=await Promise.allSettled(t),r=e.filter(s=>s.status==="rejected");if(r.length){for(const s of r)console.error(s.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const s of e)s.status==="fulfilled"&&n.push(s.value);return n};class _K extends Ir{create(e,r,n){return this._client.post(Wt`/vector_stores/${e}/file_batches`,{body:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){const{vector_store_id:s}=r;return this._client.get(Wt`/vector_stores/${s}/file_batches/${e}`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,r,n){const{vector_store_id:s}=r;return this._client.post(Wt`/vector_stores/${s}/file_batches/${e}/cancel`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r);return await this.poll(e,s.id,n)}listFiles(e,r,n){const{vector_store_id:s,...a}=r;return this._client.getAPIList(Wt`/vector_stores/${s}/file_batches/${e}/files`,gi,{query:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,r,n){const s=hr([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(r,{vector_store_id:e},{...n,headers:s}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await By(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},s){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,i=Math.min(a,r.length),o=this._client,l=r.values(),u=[...n];async function d(g){for(let m of g){const x=await o.files.create({file:m,purpose:"assistants"},s);u.push(x.id)}}const p=Array(i).fill(l).map(d);return await o9e(p),await this.createAndPoll(e,{file_ids:u})}}class kK extends Ir{create(e,r,n){return this._client.post(Wt`/vector_stores/${e}/files`,{body:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){const{vector_store_id:s}=r;return this._client.get(Wt`/vector_stores/${s}/files/${e}`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){const{vector_store_id:s,...a}=r;return this._client.post(Wt`/vector_stores/${s}/files/${e}`,{body:a,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(Wt`/vector_stores/${e}/files`,gi,{query:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r,n){const{vector_store_id:s}=r;return this._client.delete(Wt`/vector_stores/${s}/files/${e}`,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){const s=await this.create(e,r,n);return await this.poll(e,s.id,n)}async poll(e,r,n){const s=hr([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(r,{vector_store_id:e},{...n,headers:s}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(n?.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await By(o);break;case"failed":case"completed":return i}}}async upload(e,r,n){const s=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,r,n){const s=await this.upload(e,r,n);return await this.poll(e,s.id,n)}content(e,r,n){const{vector_store_id:s}=r;return this._client.getAPIList(Wt`/vector_stores/${s}/files/${e}/content`,B4,{...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class q4 extends Ir{constructor(){super(...arguments),this.files=new kK(this._client),this.fileBatches=new _K(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(Wt`/vector_stores/${e}`,{...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(Wt`/vector_stores/${e}`,{body:r,...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},r){return this._client.getAPIList("/vector_stores",gi,{query:e,...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,r){return this._client.delete(Wt`/vector_stores/${e}`,{...r,headers:hr([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}search(e,r,n){return this._client.getAPIList(Wt`/vector_stores/${e}/search`,B4,{body:r,method:"post",...n,headers:hr([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}q4.Files=kK;q4.FileBatches=_K;class SK extends Ir{create(e,r){return this._client.post("/videos",M8({body:e,...r},this._client))}retrieve(e,r){return this._client.get(Wt`/videos/${e}`,r)}list(e={},r){return this._client.getAPIList("/videos",yb,{query:e,...r})}delete(e,r){return this._client.delete(Wt`/videos/${e}`,r)}downloadContent(e,r={},n){return this._client.get(Wt`/videos/${e}/content`,{query:r,...n,headers:hr([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,r,n){return this._client.post(Wt`/videos/${e}/remix`,M8({body:r,...n},this._client))}}var Vm,NK,o5;class EK extends Ir{constructor(){super(...arguments),Vm.add(this)}async unwrap(e,r,n=this._client.webhookSecret,s=300){return await this.verifySignature(e,r,n,s),JSON.parse(e)}async verifySignature(e,r,n=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");it(this,Vm,"m",NK).call(this,n);const a=hr([r]).values,i=it(this,Vm,"m",o5).call(this,a,"webhook-signature"),o=it(this,Vm,"m",o5).call(this,a,"webhook-timestamp"),l=it(this,Vm,"m",o5).call(this,a,"webhook-id"),u=parseInt(o,10);if(isNaN(u))throw new vx("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-u>s)throw new vx("Webhook timestamp is too old");if(u>d+s)throw new vx("Webhook timestamp is too new");const p=i.split(" ").map(y=>y.startsWith("v1,")?y.substring(3):y),g=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),m=l?`${l}.${o}.${e}`:`${o}.${e}`,x=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const y of p)try{const b=Buffer.from(y,"base64");if(await crypto.subtle.verify("HMAC",x,b,new TextEncoder().encode(m)))return}catch{continue}throw new vx("The given webhook signature does not match the expected signature")}}Vm=new WeakSet,NK=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},o5=function(e,r){if(!e)throw new Error("Headers are required");const n=e.get(r);if(n==null)throw new Error(`Missing required header: ${r}`);return n};var Y8,KE,l5,CK;class wn{constructor({baseURL:e=Am("OPENAI_BASE_URL"),apiKey:r=Am("OPENAI_API_KEY"),organization:n=Am("OPENAI_ORG_ID")??null,project:s=Am("OPENAI_PROJECT_ID")??null,webhookSecret:a=Am("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(Y8.add(this),l5.set(this,void 0),this.completions=new nK(this),this.chat=new LE(this),this.embeddings=new iK(this),this.files=new lK(this),this.images=new pK(this),this.audio=new Uy(this),this.moderations=new gK(this),this.models=new mK(this),this.fineTuning=new yg(this),this.graders=new qE(this),this.vectorStores=new q4(this),this.webhooks=new EK(this),this.beta=new xg(this),this.batches=new YG(this),this.uploads=new GE(this),this.responses=new WE(this),this.realtime=new $4(this),this.conversations=new ME(this),this.evals=new VE(this),this.containers=new OE(this),this.videos=new SK(this),r===void 0)throw new jr("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:r,organization:n,project:s,webhookSecret:a,...i,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&lEe())throw new jr(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??KE.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=GL(o.logLevel,"ClientOptions.logLevel",this)??GL(Am("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??hEe(),Hr(this,l5,mEe),this._options=o,this.apiKey=typeof r=="string"?r:"Missing Key",this.organization=n,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){}async authHeaders(e){return hr([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return bEe(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Mm}`}defaultIdempotencyKey(){return`stainless-node-retry-${QW()}`}makeStatusError(e,r,n,s){return wo.generate(e,r,n,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let r;try{r=await e()}catch(n){throw n instanceof jr?n:new jr(`Failed to get token from 'apiKey' function: ${n.message}`,{cause:n})}if(typeof r!="string"||!r)throw new jr(`Expected 'apiKey' function argument to return a string but it returned ${r}`);return this.apiKey=r,!0}buildURL(e,r,n){const s=!it(this,Y8,"m",CK).call(this)&&n||this.baseURL,a=nEe(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return sEe(i)||(r={...i,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(a.search=this.stringifyQuery(r)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(s=>({method:e,path:r,...s})))}request(e,r=null){return new M4(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){const s=await e,a=s.maxRetries??this.maxRetries;r==null&&(r=a),await this.prepareOptions(s);const{req:i,url:o,timeout:l}=await this.buildRequest(s,{retryCount:a-r});await this.prepareRequest(i,{url:o,options:s});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=n===void 0?"":`, retryOf: ${n}`,p=Date.now();if(ho(this).debug(`[${u}] sending request`,A0({retryOfRequestLogID:n,method:s.method,url:o,options:s,headers:i.headers})),s.signal?.aborted)throw new Fc;const g=new AbortController,m=await this.fetchWithTimeout(o,i,l,g).catch(D8),x=Date.now();if(m instanceof globalThis.Error){const S=`retrying, ${r} attempts remaining`;if(s.signal?.aborted)throw new Fc;const P=F8(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(r)return ho(this).info(`[${u}] connection ${P?"timed out":"failed"} - ${S}`),ho(this).debug(`[${u}] connection ${P?"timed out":"failed"} (${S})`,A0({retryOfRequestLogID:n,url:o,durationMs:x-p,message:m.message})),this.retryRequest(s,r,n??u);throw ho(this).info(`[${u}] connection ${P?"timed out":"failed"} - error; no more retries left`),ho(this).debug(`[${u}] connection ${P?"timed out":"failed"} (error; no more retries left)`,A0({retryOfRequestLogID:n,url:o,durationMs:x-p,message:m.message})),P?new NE:new D4({cause:m})}const y=[...m.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,P])=>", "+S+": "+JSON.stringify(P)).join(""),b=`[${u}${d}${y}] ${i.method} ${o} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${x-p}ms`;if(!m.ok){const S=await this.shouldRetry(m);if(r&&S){const L=`retrying, ${r} attempts remaining`;return await pEe(m.body),ho(this).info(`${b} - ${L}`),ho(this).debug(`[${u}] response error (${L})`,A0({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:x-p})),this.retryRequest(s,r,n??u,m.headers)}const P=S?"error; no more retries left":"error; not retryable";ho(this).info(`${b} - ${P}`);const T=await m.text().catch(L=>D8(L).message),O=oEe(T),W=O?void 0:T;throw ho(this).debug(`[${u}] response error (${P})`,A0({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:W,durationMs:Date.now()-p})),this.makeStatusError(m.status,O,W,m.headers)}return ho(this).info(b),ho(this).debug(`[${u}] response start`,A0({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:x-p})),{response:m,options:s,controller:g,requestLogID:u,retryOfRequestLogID:n,startTime:p}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){const n=this.makeRequest(r,null,void 0);return new IEe(this,n,e)}async fetchWithTimeout(e,r,n,s){const{signal:a,method:i,...o}=r||{};a&&a.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),n),u=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,d={signal:s.signal,...u?{duplex:"half"}:{},method:"GET",...o};i&&(d.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,s){let a;const i=s?.get("retry-after-ms");if(i){const l=parseFloat(i);Number.isNaN(l)||(a=l)}const o=s?.get("retry-after");if(o&&!a){const l=parseFloat(o);Number.isNaN(l)?a=Date.parse(o)-Date.now():a=l*1e3}if(!(a&&0<=a&&a<60*1e3)){const l=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,l)}return await By(a),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){const a=r-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}async buildRequest(e,{retryCount:r=0}={}){const n={...e},{method:s,path:a,query:i,defaultBaseURL:o}=n,l=this.buildURL(a,i,o);"timeout"in n&&iEe("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:n}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:u,retryCount:r});return{req:{method:s,headers:p,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...n.fetchOptions??{}},url:l,timeout:n.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:s}){let a={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const i=hr([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...fEe(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=hr([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:uG(e)}:it(this,l5,"f").call(this,{body:e,headers:n})}}KE=wn,l5=new WeakMap,Y8=new WeakSet,CK=function(){return this.baseURL!=="https://api.openai.com/v1"};wn.OpenAI=KE;wn.DEFAULT_TIMEOUT=6e5;wn.OpenAIError=jr;wn.APIError=wo;wn.APIConnectionError=D4;wn.APIConnectionTimeoutError=NE;wn.APIUserAbortError=Fc;wn.NotFoundError=tG;wn.ConflictError=rG;wn.RateLimitError=sG;wn.BadRequestError=JW;wn.AuthenticationError=ZW;wn.InternalServerError=aG;wn.PermissionDeniedError=eG;wn.UnprocessableEntityError=nG;wn.InvalidWebhookSignatureError=vx;wn.toFile=FEe;wn.Completions=nK;wn.Chat=LE;wn.Embeddings=iK;wn.Files=lK;wn.Images=pK;wn.Audio=Uy;wn.Moderations=gK;wn.Models=mK;wn.FineTuning=yg;wn.Graders=qE;wn.VectorStores=q4;wn.Webhooks=EK;wn.Beta=xg;wn.Batches=YG;wn.Uploads=GE;wn.Responses=WE;wn.Realtime=$4;wn.Conversations=ME;wn.Evals=VE;wn.Containers=OE;wn.Videos=SK;var uF;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(uF||(uF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dF;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(dF||(dF={}));var fF;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(fF||(fF={}));var hF;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(hF||(hF={}));var pF;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(pF||(pF={}));var mF;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(mF||(mF={}));var gF;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(gF||(gF={}));var a2;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(a2||(a2={}));var xF;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(xF||(xF={}));var yF;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(yF||(yF={}));var vF;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vF||(vF={}));var wF;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(wF||(wF={}));a2.RECITATION,a2.SAFETY,a2.LANGUAGE;const bF="mistral";async function l9e(t=20){try{const e=br(tr(ct,"users"),Fr("role","==","pharmacy"),vu(t)),r=await vn(e),n=[];return r.forEach(s=>{const a=s.data(),i=a?.lat??a?.latitude??a?.location?.lat??a?.location?.latitude??a?.coords?.lat??a?.coords?.latitude??a?.coordinates?.lat??a?.coordinates?.latitude,o=a?.lon??a?.lng??a?.longitude??a?.location?.lon??a?.location?.lng??a?.location?.longitude??a?.coords?.lon??a?.coords?.lng??a?.coords?.longitude??a?.coordinates?.lon??a?.coordinates?.lng??a?.coordinates?.longitude,l=typeof i=="number"?i:i!=null?Number(i):void 0,u=typeof o=="number"?o:o!=null?Number(o):void 0,d=a?.coordinates||a?.coords||(l!==void 0&&!Number.isNaN(l)&&u!==void 0&&!Number.isNaN(u)?{latitude:l,longitude:u}:void 0);n.push({id:s.id,name:a.displayName||a.name,email:a.email,location:a.location,phone:a.phone||a.phoneNumber,address:a.address,verified:a.verified||a.isVerified||!1,lat:l!==void 0&&!Number.isNaN(l)?l:void 0,lon:u!==void 0&&!Number.isNaN(u)?u:void 0,coordinates:d,services:a.services,url:`/vendor/${s.id}`})}),n}catch(e){return console.error("Error fetching pharmacies:",e),[]}}async function c9e(t=50){try{const e=br(tr(ct,"products"),Qa("createdAt","desc"),vu(t)),r=await vn(e),n=[];return r.forEach(s=>{const a=s.data();n.push({name:a.name,description:a.description,category:a.category,price:a.price,pharmacyName:a.pharmacyName,stock:a.stock,tags:a.tags||[],url:`/product/${s.id}`})}),n}catch(e){return console.error("Error fetching products:",e),[]}}async function AK(t=[]){const e=Array.from(new Set((t||[]).filter(Boolean).map(s=>typeof s=="string"?s.trim():s)));if(e.length===0)return{};const r=await Promise.all(e.map(s=>Pa(ir(ct,"products",s)))),n={};return r.forEach((s,a)=>{s.exists()&&(n[e[a]]={id:s.id,...s.data()})}),n}const Ax=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function"){const e=t.toDate();return e instanceof Date&&!Number.isNaN(e.getTime())?e:null}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return Number.isNaN(e.getTime())?null:e}if(typeof t.toISOString=="function"){const e=t.toISOString(),r=new Date(e);return Number.isNaN(r.getTime())?null:r}return null},X8=t=>{const e=Ax(t);return e?e.toISOString():null};async function u9e(t,{limitItems:e=25}={}){if(!t)return[];try{let n=(await vn(tr(ct,"users",t,"cart"))).docs.map(i=>({id:i.id,...i.data()}));if(n.length===0)return[];typeof e=="number"&&e>0&&(n=n.slice(0,e));const s=n.map(i=>i.productId).filter(Boolean),a=await AK(s);return n.map(i=>{const o=a[i.productId]||{};return{id:i.id,productId:i.productId||null,quantity:i.qty||i.quantity||1,productName:o.name,price:o.price,currency:o.currency||"NGN",pharmacyName:o.pharmacyName,stock:o.stock,productUrl:o.id?`/product/${o.id}`:null,cartUrl:"/cart"}})}catch(r){return console.error("Error fetching user cart for AI context:",r),[]}}async function d9e(t,{limitCount:e=10}={}){if(!t)return[];try{const r=br(tr(ct,"orders"),Fr("customerId","==",t),Qa("createdAt","desc"),vu(e)),n=await vn(r);if(n.empty)return[];const s=[],a=new Set;n.forEach(o=>{const l=o.data();s.push({id:o.id,...l}),(l.items||[]).forEach(u=>{u?.productId&&a.add(u.productId)})});const i=await AK(Array.from(a));return s.map(o=>{const l=X8(o.createdAt),u=(o.items||[]).map(d=>{const p=i[d.productId]||{};return{productId:d.productId||null,productName:p.name,quantity:d.quantity||d.qty||1,price:d.price??p.price,productUrl:p.id?`/product/${p.id}`:null}});return{id:o.id,status:o.status||"pending",total:o.total,createdAt:l,pharmacyId:o.pharmacyId||null,orderUrl:`/orders?highlight=${o.id}`,items:u}})}catch(r){return console.error("Error fetching user orders for AI context:",r),[]}}async function f9e(t,{limitCount:e=15}={}){if(!t)return[];try{const r=br(tr(ct,"prescriptions"),Fr("customerId","==",t)),n=await vn(r);if(n.empty)return[];const s=n.docs.map(i=>({id:i.id,...i.data()}));return s.sort((i,o)=>{const l=Ax(i.startDate)||Ax(i.createdAt)||new Date(0);return((Ax(o.startDate)||Ax(o.createdAt)||new Date(0))?.getTime?.()||0)-(l?.getTime?.()||0)}),(typeof e=="number"&&e>0?s.slice(0,e):s).map(i=>{const o=X8(i.startDate)||X8(i.createdAt);return{id:i.id,pharmacyId:i.pharmacyId||null,status:i.status||"active",startDate:o,duration:i.duration,notes:i.notes,drugs:(i.drugs||[]).map(l=>({name:l.name,dosage:l.dosage,frequency:l.frequency,instructions:l.instructions})),prescriptionUrl:"/profile",relatedChatThreadId:i.chatThreadId||null}})}catch(r){return console.error("Error fetching user prescriptions for AI context:",r),[]}}const h9e=()=>({apiKey:"066561f51f6241ed8b403f898592a34c",baseURL:"https://api.aimlapi.com/v1/chat/completions",model:"mistralai/Mistral-7B-Instruct-v0.3"}),p9e=`You are PharmAI, a helpful AI assistant for a pharmacy app called Pharmasea. You help users with:

1. GENERAL HEALTH INFORMATION - Provide general wellness tips, explain common health concepts, and answer basic health questions
2. PRODUCT INFORMATION - Help users understand medications, supplements, and health products available in our app
3. PHARMACY SERVICES - Explain how pharmacy services work, prescription processes, etc.
4. PHARMACY SEARCH - Help users find pharmacies in our network based on location, name, or services
5. PRODUCT SEARCH - Help users find specific medications, health products, or alternatives available in our app
6. WELLNESS ADVICE - Give general lifestyle and wellness recommendations

IMPORTANT CAPABILITIES:
- You have access to our pharmacy network and can search for pharmacies by location, name, or services
- You have access to our product catalog and can search for medications, supplements, and health products
- You can review the user's current cart items, recent orders, and prescriptions (when provided) to give contextual assistance—never invent entries that are not in the supplied data
- When users ask about specific drugs or pharmacies, search our database and provide accurate information
- When listing products, ALWAYS include the product URL so users can click directly to view details
- When listing pharmacies, ALWAYS include the pharmacy URL so users can click directly to view details
- You know the user's approximate location when provided and can highlight nearby pharmacies and their distance
- When searching for pharmacies, if no exact matches are found, suggest similar pharmacies that might be what the user is looking for
- Always mention that you can help search for pharmacies or products when relevant
- Only recommend pharmacies that exist in the provided pharmacy lists; never invent locations or references outside the supplied data
- Use any provided navigation URLs (e.g., cartUrl, orderUrl, productUrl, prescriptionUrl) so users can quickly open the relevant screen inside Pharmasea
- Always refer to our platform as "Pharmasea" (never shorten it to "Pharmacy" or any other name)

IMPORTANT SAFETY GUIDELINES:
- NEVER give medical advice, diagnoses, or treatment recommendations
- NEVER suggest specific medications or dosages
- ALWAYS include disclaimers when discussing health topics
- ALWAYS recommend consulting healthcare professionals for medical concerns
- When advising professional care, recommend at least one nearby pharmacy from the provided nearestPharmacies data (prioritize verified options and mention distance when available)
- If a user asks for medical advice, politely redirect them to speak with a doctor or pharmacist

RESPONSE STYLE:
- Be friendly, helpful, and professional
- Use clear, simple language
- Keep responses concise but informative
- NEVER include internal IDs, database keys, or technical identifiers in your responses
- When listing products, embed links in the product names using markdown format: [Product Name](URL) - ₦Price - Description
- When mentioning pharmacies, embed links in pharmacy names using markdown format: [Pharmacy Name](URL)
- When mentioning nearby pharmacies, list them as bullet points with distance (e.g., • [PharmCare Pharmacy](URL) — 1.2 km away — Address)
- Use markdown link format [Name](URL) to make names clickable
- When suggesting pharmacies, mention if they are similar matches when exact searches don't work
- If no suitable pharmacy exists in the provided data, state that clearly instead of recommending an unknown location
- When referencing cart items, orders, or prescriptions, acknowledge their current state and include the relevant navigation link (cartUrl, orderUrl, prescriptionUrl) so the user can jump straight to that view
- When referencing the app or experience, call it "Pharmasea" to reinforce branding
- Always end medical/health related responses with appropriate disclaimers
- Be culturally sensitive and inclusive

If you don't know something, admit it and suggest consulting appropriate professionals.`;async function m9e(t,e={}){try{if(bF!=="gemini"){if(bF==="mistral")return await g9e(t,e)}}catch(r){return console.error("AI response error:",r),"I'm sorry, I'm having trouble connecting right now. Please try again later or contact our support team."}}async function g9e(t,e={}){const r=h9e(),n=[{role:"system",content:p9e},{role:"user",content:t}];e.userLocation&&n.splice(1,0,{role:"system",content:`User location: ${JSON.stringify(e.userLocation)}`}),e.userInfo&&n.splice(1,0,{role:"system",content:`User context: ${JSON.stringify(e.userInfo)}`}),e.nearestPharmacies&&n.splice(1,0,{role:"system",content:`Nearest pharmacies to the user: ${JSON.stringify(e.nearestPharmacies)}`}),e.productInfo&&n.splice(1,0,{role:"system",content:`Available products in our app: ${JSON.stringify(e.productInfo)}`}),e.pharmacyInfo&&n.splice(1,0,{role:"system",content:`Available pharmacies in our network: ${JSON.stringify(e.pharmacyInfo)}`});const s=await fetch(r.baseURL,{method:"POST",headers:{Authorization:`Bearer ${r.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:r.model,messages:n,max_tokens:500,temperature:.7})});if(!s.ok)throw new Error(`AIML API error: ${s.status} ${s.statusText}`);return(await s.json()).choices[0].message.content}function TK(t){const e=["diagnosis","diagnose","treatment","treat","cure","medicine","medication","prescription","prescribe","dosage","dose","symptoms","symptom","pain","ache","hurt","illness","disease","condition","sick","emergency","urgent","serious","severe","chronic","acute"],r=t.toLowerCase();return e.some(n=>r.includes(n))}function x9e(t,e={}){return t&&(TK(t)?t+`

⚠️ **Medical Disclaimer:** This is general information only and not medical advice. Please consult with a healthcare professional for personalized medical recommendations.`:t)}const y9e="/ChatBg.svg",bw=({className:t="w-5 h-5"})=>c.jsx("img",{src:"/PharmAIDp.svg",alt:"PharmAI",className:t}),v9e=(t="")=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),w9e=t=>{const e=t?.name?.trim(),r=t?.url;if(!e||!r)return null;const n=v9e(e),a=/\w/.test(e[0])&&/\w/.test(e[e.length-1])?`\\b${n}\\b`:n;return{name:e,url:r,pattern:a}},b9e=(t,e,r,n)=>(Array.isArray(t)||(t=[t]),e?.length?t.flatMap(s=>typeof s!="string"?[s]:e.reduce((a,i)=>a.flatMap(o=>{if(typeof o!="string")return[o];const l=new RegExp(i.pattern,"gi");let u=0,d;const p=[];for(;(d=l.exec(o))!==null;){d.index>u&&p.push(o.slice(u,d.index));const g=d[0];p.push(c.jsx("span",{onClick:()=>r(i.url),className:"text-sky-600 hover:text-sky-800 underline font-normal cursor-pointer",children:g},n())),u=l.lastIndex}return p.length===0?[o]:(u<o.length&&p.push(o.slice(u)),p)}),[s])):t),Lc=t=>{if(t==null)return null;if(typeof t=="number"&&Number.isFinite(t))return t;const e=Number(t);return Number.isFinite(e)?e:null},_9e=["location","coordinates","coords"],k9e=["lat","latitude"],S9e=["lon","lng","longitude"],c5=(t,e=0)=>{if(!t||e>2)return null;for(const r of k9e)for(const n of S9e){const s=Lc(t[r]),a=Lc(t[n]);if(s!==null&&a!==null)return{lat:s,lon:a}}for(const r of _9e){if(!t[r])continue;const n=c5(t[r],e+1);if(n)return n}return null},_w=t=>t*Math.PI/180,N9e=6371,E9e=(t,e)=>{if(!t||!e)return null;const r=Lc(t.lat),n=Lc(t.lon),s=Lc(e.lat),a=Lc(e.lon);if(r===null||n===null||s===null||a===null)return null;const i=_w(s-r),o=_w(a-n),l=_w(r),u=_w(s),d=Math.sin(i/2)*Math.sin(i/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(l)*Math.cos(u),p=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return N9e*p},_F=t=>{if(!t)return null;const e={id:t.id,name:t.name||t.displayName||"Pharmacy",address:t.address||t.location?.address||t.location,verified:!!t.verified,url:t.url};t.phone&&(e.phone=t.phone),t.location&&(e.location=t.location);const r=Lc(t.distanceKm);return r!==null&&(e.distanceKm=Number(r.toFixed(2))),e},C9e=(t,e,r=[])=>{if(!t)return null;const n=/\[([^\]]+)\]\(([^)]+)\)/g,s=[];let a=0,i,o=0;const l=()=>`ai-link-${o++}`;for(;(i=n.exec(t))!==null;){i.index>a&&s.push(t.slice(a,i.index));const p=i[1],g=i[2];s.push(c.jsx("span",{onClick:()=>e(g),className:"text-sky-600 hover:text-sky-800 underline font-normal cursor-pointer",children:p},l())),a=i.index+i[0].length}a<t.length&&s.push(t.slice(a));const u=s.length?s:[t],d=b9e(u,r,e,l);return d.length===1?d[0]:d};function A9e(){const{user:t,profile:e}=Vn(),{t:r}=Ds(),n=Jn(),[s,a]=R.useState([]),[i,o]=R.useState(""),[l,u]=R.useState(!1),[d,p]=R.useState(!1),[g,m]=R.useState([]),[x,y]=R.useState([]),[b,S]=R.useState([]),[P,T]=R.useState([]),[O,W]=R.useState([]),Y=R.useRef(null),L=R.useRef(null),A=R.useMemo(()=>(x||[]).map(w9e).filter(Boolean).sort((H,ie)=>ie.name.length-H.name.length),[x]),N=R.useMemo(()=>{if(!e&&!t)return null;const H=c5(e)||c5(t),ie={};H&&(ie.lat=H.lat,ie.lon=H.lon);const K=e?.address||e?.location?.address||e?.coords?.address||e?.coordinates?.address;K&&(ie.address=K);const I=e?.city||e?.location?.city||e?.coordinates?.city;I&&(ie.city=I);const z=e?.state||e?.location?.state||e?.coordinates?.state;z&&(ie.state=z);const X=e?.country||e?.location?.country||e?.coordinates?.country;X&&(ie.country=X);const J=e?.postalCode||e?.location?.postalCode||e?.coordinates?.postalCode;J&&(ie.postalCode=J);const se=e?.displayName||t?.displayName||t?.email;return se&&(ie.displayName=se),Object.keys(ie).length?ie:null},[e,t]),D=R.useMemo(()=>!Array.isArray(g)||g.length===0?[]:g.map(H=>{const ie=c5(H),K=ie&&N&&Lc(N?.lat)!==null&&Lc(N?.lon)!==null?E9e(ie,N):null,I=K!==null&&Number.isFinite(K)?Number(K.toFixed(2)):null;return{...H,distanceKm:I}}),[g,N]),j=R.useMemo(()=>D.length?[...D].sort((H,ie)=>{const K=typeof H.distanceKm=="number",I=typeof ie.distanceKm=="number";return K&&I?H.distanceKm-ie.distanceKm:K?-1:I?1:0}):[],[D]),F=R.useMemo(()=>j.length?j.slice(0,10).map(_F).filter(Boolean):[],[j]),M=R.useMemo(()=>j.length?j.slice(0,3).map(_F).filter(Boolean):[],[j]),Z=R.useMemo(()=>{if(!N)return null;const{lat:H,lon:ie,address:K,city:I,state:z,country:X,postalCode:J}=N,se={};return Lc(H)!==null&&(se.lat=Number(H)),Lc(ie)!==null&&(se.lon=Number(ie)),K&&(se.address=K),I&&(se.city=I),z&&(se.state=z),X&&(se.country=X),J&&(se.postalCode=J),Object.keys(se).length?se:null},[N]);R.useEffect(()=>{if(!t?.uid)return;const H=br(tr(ct,"ai_conversations"),Fr("userId","==",t.uid));return Dn(H,K=>{const I=[];K.forEach(z=>{const X=z.data();I.push({id:z.id,...X,timestamp:X.timestamp?.toDate()||new Date})}),I.sort((z,X)=>z.timestamp-X.timestamp),a(I)})},[t?.uid]),R.useEffect(()=>{Y.current?.scrollIntoView({behavior:"smooth"})},[s]),R.useEffect(()=>{L.current?.focus()},[]),R.useEffect(()=>{(async()=>{try{const[ie,K]=await Promise.all([l9e(20),c9e(50)]);m(ie),y(K)}catch(ie){console.error("Error loading app data for AI:",ie)}})()},[]),R.useEffect(()=>{if(!t?.uid){S([]),T([]),W([]);return}let H=!0;return(async()=>{try{const[K,I,z]=await Promise.all([u9e(t.uid,{limitItems:25}),d9e(t.uid,{limitCount:10}),f9e(t.uid,{limitCount:15})]);if(!H)return;S(K),T(I),W(z)}catch(K){console.error("Error loading user data for AI context:",K)}})(),()=>{H=!1}},[t?.uid]);const ue=async H=>{try{await af(tr(ct,"ai_conversations"),{...H,userId:t.uid,timestamp:Is()})}catch(ie){console.error("Error saving message:",ie)}},pe=async()=>{if(!i.trim()||l)return;const H=i.trim();o(""),u(!0),p(!0);const ie={role:"user",content:H,timestamp:new Date};a(K=>[...K,ie]);try{await ue(ie);const K={userInfo:{role:e?.role,language:r("current_language","en"),platformName:"Pharmasea"},productInfo:x.slice(0,20),pharmacyInfo:F,nearestPharmacies:M,cartInfo:b,orderInfo:P,prescriptionInfo:O};(e?.displayName||t?.displayName)&&(K.userInfo.displayName=e?.displayName||t?.displayName),K.userInfo.cartItemCount=b.length,K.userInfo.orderCount=P.length,K.userInfo.prescriptionCount=O.length,Z&&(K.userInfo.location=Z,K.userLocation=Z);let I=await m9e(H,K);if(TK(I)){const X=r("pharmacy_verified_label","verified"),J=r("distance_nearby","nearby"),se=r("distance_km_away","km away"),le=r("nearby_pharmacies_heading","Nearby pharmacy options:"),xe=(M&&M.length>0?M:F.slice(0,3)).map(Ee=>{if(!Ee)return null;const ke=Ee.name||r("pharmacy_generic_name","Pharmacy"),oe=Ee.url?`[${ke}](${Ee.url})`:ke,Fe=Lc(Ee.distanceKm),Pe=Fe!==null?`${Fe.toFixed(1)} ${se}`:J,ne=Ee.verified?` (${X})`:"",ye=Ee.address?` — ${Ee.address}`:"";return`• ${oe}${ne} — ${Pe}${ye}`}).filter(Boolean);xe.length>0&&(I+=`

${le}
${xe.join(`
`)}`)}I=x9e(I,{nearestPharmacies:M});const z={role:"assistant",content:I,timestamp:new Date};a(X=>[...X,z]),await ue(z)}catch(K){console.error("Error getting AI response:",K);const I={role:"assistant",content:K.message.includes("API key")?"I'm not configured yet. Please ask your administrator to set up the OpenAI API key.":r("ai_error_message","Sorry, I'm having trouble connecting. Please try again later."),timestamp:new Date};a(z=>[...z,I])}finally{u(!1),p(!1)}},fe=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),pe())},te=async()=>{if(t?.uid)try{a([]),o(""),L.current?.focus()}catch(H){console.error("Error starting new chat:",H)}};return t?c.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[c.jsxs("div",{className:"bg-white border-b border-gray-100 px-4 py-4 flex items-center justify-between sticky top-0 z-10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>n(-1),className:"p-2 rounded-full hover:bg-gray-100 transition",children:c.jsx(Xd,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-sky-100 rounded-full flex items-center justify-center",children:c.jsx(bw,{className:"w-5 h-5 text-sky-600"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"font-semibold text-gray-900",children:"PharmAI"}),c.jsx(ble,{className:"w-4 h-4 text-sky-500","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:r("verified_account","Verified account")})]}),c.jsx("div",{className:"text-xs text-gray-500",children:d?r("typing","Typing..."):r("online","Online")})]})]})]}),c.jsx("button",{onClick:te,className:"text-xs text-gray-500 hover:text-gray-700 px-3 py-1 rounded-full border",children:r("new_chat","New Chat")})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 pb-32",style:{backgroundImage:`url(${y9e})`,backgroundSize:"contain",backgroundRepeat:"repeat",backgroundPosition:"center"},children:[s.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-sky-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(bw,{className:"w-8 h-8 text-sky-600"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r("welcome_to_pharmai","Welcome to PharmAI!")}),c.jsx("p",{className:"text-gray-600 max-w-sm",children:r("ai_assistant_description","I'm here to help with general health information, product questions, and pharmacy services. Remember, I'm not a substitute for professional medical advice.")})]}):c.jsxs("div",{className:"space-y-4",children:[s.map((H,ie)=>c.jsx("div",{className:`flex ${H.role==="user"?"justify-end":"justify-start"} ${ie===s.length-1?"pb-6":""}`,children:c.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${H.role==="user"?"bg-sky-500 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[c.jsxs("div",{className:"flex items-start gap-2",children:[H.role==="assistant"&&c.jsx(bw,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),H.role==="user"&&c.jsx(Lle,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),c.jsx("div",{className:"flex-1 whitespace-pre-wrap text-sm break-words overflow-hidden",children:C9e(H.content,n,A)})]}),c.jsx("div",{className:`text-xs mt-1 ${H.role==="user"?"text-sky-100":"text-gray-500"}`,children:H.timestamp?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},H.id||ie)),d&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 max-w-[80%]",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bw,{className:"w-4 h-4"}),c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),c.jsx("div",{ref:Y})]}),c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 border-t border-gray-100 bg-white px-4 py-3 z-20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex-1 relative",children:c.jsx("textarea",{ref:L,value:i,onChange:H=>o(H.target.value),onKeyPress:fe,placeholder:r("type_message","Type your message..."),className:"w-full border border-gray-300 rounded-full px-4 py-3 pr-12 resize-none focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500",rows:1,style:{minHeight:"44px",maxHeight:"120px"},disabled:l})}),c.jsx("button",{onClick:pe,disabled:!i.trim()||l,className:"w-11 h-11 bg-sky-500 hover:bg-sky-600 disabled:bg-gray-300 rounded-full flex items-center justify-center transition",children:c.jsx(Ile,{className:"w-5 h-5 text-white"})})]}),c.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:r("ai_disclaimer","⚠️ PharmAI provides general information only. Not medical advice. Consult professionals for health concerns.")})]})]}):c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:[c.jsx("div",{className:"text-xl font-poppins font-light mb-6",children:r("please_sign_in_continue","Please sign in to continue")}),c.jsx("button",{className:"rounded-full bg-sky-600 text-white px-8 py-3 text-lg font-poppins font-medium shadow hover:bg-sky-700 transition",onClick:()=>n("/auth/landing"),children:r("sign_in_sign_up","Sign In / Sign Up")})]})}function T9e(){const t=hl(),e=Jn(),{user:r,profile:n,loading:s}=Vn(),{getSetting:a}=wy(),[i,o]=R.useState(t.pathname),[l,u]=R.useState(0),[d,p]=R.useState(0),[g,m]=R.useState(0),{newOrder:x,showNotification:y,clearNotification:b}=B6e();R.useEffect(()=>{o((pe=>pe?pe.startsWith("/chat")||pe.startsWith("/thread")?"/messages":pe:"/")(t.pathname))},[t.pathname]),R.useEffect(()=>{if(!r||s||n&&n.role==="pharmacy")return u(0);const ue=br(tr(ct,"users",r.uid,"cart"));return Dn(ue,fe=>u(fe.size))},[r,n,s]),R.useEffect(()=>{if(!r||s||!n||n.role!=="pharmacy")return m(0);const ue=n.uid||r.uid,pe=br(tr(ct,"orders"),Fr("pharmacyId","==",ue));return Dn(pe,te=>{const H=te.docs.filter(ie=>{const I=ie.data().status?.toLowerCase()||"pending";return!["processing","shipped","fulfilled","cancelled"].includes(I)});m(H.length)})},[r,n]),R.useEffect(()=>{if(!r||s||!n?.role)return p(0);const ue=o4({uid:r.uid,role:n.role},pe=>{try{const fe=pe.reduce((te,H)=>{const ie=H?.unread?.[r.uid];return te+(typeof ie=="number"?ie:0)},0);p(fe),console.debug("[AppLayout] unread total from listenUserThreads",{sum:fe,count:pe.length})}catch(fe){console.error("[AppLayout] error computing unread from threads",fe)}},pe=>console.error("[AppLayout] listenUserThreads error",pe));return()=>ue&&ue()},[r,n?.role,s]);const P=!!new URLSearchParams(t.search).get("chat"),T=uC("/chat/:vendorId"),O=uC("/thread/:threadId"),W=!!(T||O),Y=typeof window<"u"&&new URLSearchParams(window.location.search).get("debugBottomNav")==="1";R.useEffect(()=>{Y&&console.debug("[AppLayout] render",{chatModalOpen:P,unreadMessages:d,tab:i,cartCount:l})},[Y,P,d,i,l]);const L=ue=>{e("/orders")},A=typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width: 1024px)").matches,N=!A,D=a(Mr.SWIPE_NAVIGATION),j=A&&D,F=s||r&&n===void 0,M=typeof document<"u"&&document.body.classList.contains("image-modal-open"),Z=!P&&!M&&!F&&(!W||N);return c.jsxs("div",{className:`min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32 ${Z?"pb-24":""}`,children:[c.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:j?c.jsx(Y5e,{}):c.jsx(r7,{})}),Z&&c.jsxs(c.Fragment,{children:[c.jsx(nbe,{tab:i,setTab:ue=>e(ue),cartCount:l,unreadMessages:d,ordersCount:g}),c.jsx(G6e,{})]}),Y&&c.jsxs("div",{className:"fixed bottom-24 right-4 z-60 bg-black/80 text-white text-xs px-3 py-1 rounded",children:["AppDebug: chatModalOpen=",String(P)," unread=",String(d)]}),c.jsx(M6e,{order:x,isOpen:y,onClose:b,onViewOrder:L})]})}function j6(){return c.jsx("div",{className:"min-h-screen bg-white w-full flex flex-col items-center px-2 md:px-8 lg:px-16 xl:px-32",children:c.jsx("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto flex-1 flex flex-col",children:c.jsx(r7,{})})})}function I9e(){const{id:t}=t7(),[e,r]=R.useState(null),[n,s]=R.useState(null),[a,i]=R.useState(!0);return R.useEffect(()=>{async function o(){i(!0);try{const u=(await Pa(ir(ct,"products",t))).data();if(r(u?{id:t,...u}:null),u?.pharmacyId){const d=await Pa(ir(ct,"pharmacies",u.pharmacyId));s(d.data())}}catch(l){console.error("Error fetching product:",l),r(null)}finally{i(!1)}}o()},[t]),a?c.jsxs("div",{children:[c.jsx("div",{className:"md:hidden",children:c.jsx(sbe,{})}),c.jsx("div",{className:"hidden md:block",children:c.jsx(abe,{})})]}):e?c.jsx(ibe,{product:e,pharmacy:n}):null}function P9e(){const{id:t}=t7(),[e,r]=R.useState(null),[n,s]=R.useState(!0);return R.useEffect(()=>{async function a(){s(!0);try{const o=(await Pa(ir(ct,"pharmacies",t))).data();r(o?{id:t,...o}:null)}catch(i){console.error("Error fetching vendor:",i),r(null)}finally{s(!1)}}a()},[t]),n?c.jsxs("div",{children:[c.jsx("div",{className:"md:hidden",children:c.jsx(K6e,{})}),c.jsx("div",{className:"hidden md:block",children:c.jsx(Y6e,{})})]}):e?c.jsx(VendorProfile,{}):null}function j9e(){const{profile:t}=Vn();return t?t.role==="pharmacy"?c.jsx(dq,{onSwitchToCustomer:()=>{}}):c.jsx(GV,{onSwitchToPharmacy:()=>{}}):null}function R9e(){const{user:t,profile:e,loading:r}=Vn();return r?c.jsx(H6e,{}):t?e?.role==="pharmacy"?c.jsx(fq,{}):e?.role==="customer"?c.jsx(Ck,{}):e?.role==="superuser"?c.jsx(T0,{to:"/superuser",replace:!0}):c.jsx(Ck,{}):c.jsx(T0,{to:"/auth/onboarding",replace:!0})}function L9e(){const{user:t,profile:e}=Vn(),r=hl(),n=new URLSearchParams(r.search);return n.get("scrollTo")&&parseInt(n.get("scrollTo"),10),t&&e===void 0?c.jsx(U5,{lines:4,className:"my-8"}):t&&!t.emailVerified?c.jsxs(fC,{children:[c.jsx(Xn,{path:"/verify-email",element:c.jsx(JNe,{})}),c.jsx(Xn,{path:"*",element:c.jsx(T0,{to:"/verify-email",replace:!0})})]}):e&&e.role==="superuser"&&r.pathname==="/"?c.jsx(T0,{to:"/superuser",replace:!0}):c.jsxs(fC,{children:[c.jsxs(Xn,{element:c.jsx(j6,{}),children:[c.jsx(Xn,{path:"/auth/onboarding",element:c.jsx(HNe,{})}),c.jsx(Xn,{path:"/auth/landing",element:c.jsx(jNe,{})}),c.jsx(Xn,{path:"/auth/customer/register",element:c.jsx(GNe,{})}),c.jsx(Xn,{path:"/auth/customer/signin",element:c.jsx(KNe,{})}),c.jsx(Xn,{path:"/auth/pharmacy/register",element:c.jsx(YNe,{})}),c.jsx(Xn,{path:"/auth/pharmacy/signin",element:c.jsx(QNe,{})}),c.jsx(Xn,{path:"/auth/forgot-password",element:c.jsx(ZNe,{})}),c.jsx(Xn,{path:"/auth",element:c.jsx(T0,{to:"/auth/onboarding",replace:!0})}),c.jsx(Xn,{path:"/ai-chat",element:c.jsx(Nc,{children:c.jsx(A9e,{})})})]}),c.jsx(Xn,{element:c.jsx(j6,{}),children:c.jsx(Xn,{path:"/superuser",element:c.jsx(Nc,{children:c.jsx(z6e,{})})})}),c.jsxs(Xn,{element:c.jsx(T9e,{}),children:[c.jsx(Xn,{path:"/",element:c.jsx(R9e,{})}),c.jsx(Xn,{path:"/new-arrivals",element:c.jsx(Nc,{children:c.jsx(tEe,{})})}),c.jsx(Xn,{path:"/vendor/:id",element:c.jsx(P9e,{})}),c.jsx(Xn,{path:"/product/:id",element:c.jsx(I9e,{})}),c.jsx(Xn,{path:"/pharmacy-map",element:c.jsx(Nc,{children:c.jsx(q6e,{})})}),c.jsx(Xn,{path:"/add-product",element:c.jsx(Nc,{children:c.jsx(eEe,{})})}),c.jsx(Xn,{path:"/chat/:vendorId",element:c.jsx(Nc,{children:c.jsx(gR,{})})}),c.jsx(Xn,{path:"/thread/:threadId",element:c.jsx(Nc,{children:c.jsx(gR,{})})}),c.jsx(Xn,{path:"/messages",element:c.jsx(Nc,{children:c.jsx(OS,{})})}),c.jsx(Xn,{path:"/cart",element:c.jsx(Nc,{children:e&&e.role==="pharmacy"?c.jsx(T0,{to:"/"}):c.jsx(qV,{})})}),c.jsx(Xn,{path:"/orders",element:c.jsx(Nc,{children:c.jsx($V,{})})}),c.jsx(Xn,{path:"/profile",element:c.jsx(Nc,{children:c.jsx(j9e,{})})}),c.jsx(Xn,{path:"/settings",element:c.jsx(Nc,{children:c.jsx(F6e,{})})})]}),c.jsx(Xn,{element:c.jsx(j6,{}),children:c.jsx(Xn,{path:"/product-preview/:id",element:c.jsx(ProductPreview,{})})}),c.jsx(Xn,{path:"*",element:c.jsx(T0,{to:"/",replace:!0})})]})}function F9e(){return X5e(),c.jsxs(ule,{children:[c.jsx(O6e,{}),c.jsx(L9e,{}),c.jsx(mH,{})]})}gY.createRoot(document.getElementById("root")).render(c.jsx(pX,{children:c.jsx(Ble,{children:c.jsx(Ule,{children:c.jsx(F9e,{})})})}));export{Sle as G,d4 as M,hs as _,D9e as a,Zr as c,kF as g,c as j,R as r};
