import{c as h,r as m,j as e,G as y}from"./index-TewB2sSM.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=h("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=h("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=h("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=h("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),w=/(https?:\/\/[^\s]+)/gi;function j(t){return t?t.match(w)||[]:[]}function o(t){try{return new URL(t).hostname.replace("www.","")}catch{return t}}async function N(t){try{const i=o(t);if(i.includes("youtube.com")||i.includes("youtu.be")){const s=k(t);if(s)return{url:t,title:"YouTube Video",description:"Watch on YouTube",image:`https://img.youtube.com/vi/${s}/hqdefault.jpg`,domain:"YouTube",type:"video"}}return i.includes("twitter.com")||i.includes("x.com")?{url:t,title:"Twitter/X Post",description:"View on Twitter/X",image:null,domain:"Twitter/X",type:"social"}:i.includes("instagram.com")?{url:t,title:"Instagram Post",description:"View on Instagram",image:null,domain:"Instagram",type:"social"}:i.includes("github.com")?{url:t,title:"GitHub Repository",description:"View on GitHub",image:null,domain:"GitHub",type:"code"}:{url:t,title:i,description:"Click to visit",image:null,domain:i,type:"website"}}catch(i){return console.error("Error fetching link preview:",i),{url:t,title:o(t),description:"Click to visit",image:null,domain:o(t),type:"website"}}}function k(t){const i=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,s=t.match(i);return s?s[1]:null}function _({url:t,compact:i=!1}){const[s,l]=m.useState(null),[d,u]=m.useState(!0),[x,r]=m.useState(!1);m.useEffect(()=>{if(!t)return;async function c(){try{u(!0),r(!1);const g=await N(t);l(g)}catch(g){console.error("Failed to load preview:",g),r(!0),l({url:t,title:o(t),description:"Click to visit",image:null,domain:o(t),type:"website"})}finally{u(!1)}}c()},[t]);const n=()=>{window.open(t,"_blank","noopener,noreferrer")},a=()=>{switch(s?.type){case"video":return e.jsx(f,{className:"w-4 h-4"});case"code":return e.jsx(v,{className:"w-4 h-4"});case"social":return e.jsx(b,{className:"w-4 h-4"});default:return e.jsx(y,{className:"w-4 h-4"})}};return d?e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})}):x||!s?e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white hover:bg-gray-50 transition-colors cursor-pointer",onClick:n,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(p,{className:"w-4 h-4 text-gray-500"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-sm text-blue-600 hover:underline truncate",children:t})})]})}):i?e.jsx("div",{className:"border border-gray-200 rounded-lg p-2 bg-white hover:bg-gray-50 transition-colors cursor-pointer",onClick:n,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:a()}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-xs text-blue-600 hover:underline truncate",children:s.domain})}),e.jsx(p,{className:"w-3 h-3 text-gray-400 flex-shrink-0"})]})}):e.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors cursor-pointer overflow-hidden",onClick:n,children:[s.image&&e.jsxs("div",{className:"aspect-video bg-gray-100 relative overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover",onError:c=>{c.target.style.display="none"}}),s.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx("div",{className:"w-12 h-12 bg-black/70 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-white ml-1",fill:"currentColor"})})})]}),e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[!s.image&&e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1",children:s.title}),s.description&&e.jsx("div",{className:"text-xs text-gray-500 line-clamp-2 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-400 truncate",children:s.domain}),e.jsx(p,{className:"w-3 h-3 text-gray-400 flex-shrink-0 ml-2"})]})]})]})})]})}function I({text:t,isMine:i=!1}){if(!t)return null;const s=j(t);if(s.length===0)return e.jsx("span",{children:t});let l=t;const d=[];s.forEach((r,n)=>{const a=`__LINK_${n}__`;l=l.replace(r,a),d[n]=e.jsx("a",{href:r.trim(),target:"_blank",rel:"noopener noreferrer",className:`underline ${i?"text-sky-100 hover:text-white":"text-blue-600 hover:text-blue-800"} transition-colors`,onClick:c=>c.stopPropagation(),children:r.trim()},`url-${n}`)});const x=l.split(/(__LINK_\d+__)/).map((r,n)=>{const a=r.match(/^__LINK_(\d+)__$/);if(a){const c=parseInt(a[1]);return d[c]}return e.jsx("span",{children:r},n)});return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:x}),s.length>0&&e.jsxs("div",{className:"space-y-2 mt-3",children:[s.slice(0,3).map((r,n)=>e.jsx(_,{url:r.trim(),compact:s.length>1},`preview-${r}-${n}`)),s.length>3&&e.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["and ",s.length-3," more link",s.length-3>1?"s":""]})]})]})}export{I as default};
